/*! For license information please see 9005.a275c571.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9005],{5949(e,a,s){s.d(a,{E:()=>o});var t=s(2555),r=s(3986),n=(s(5043),s(917)),l=s(1089),d=s(579);const i=["className","variant"],c=(0,n.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:s}=e,n=(0,r.A)(e,i);return(0,d.jsx)("div",(0,t.A)({className:(0,l.cn)(c({variant:s}),a)},n))}},3390(e,a,s){s.d(a,{$:()=>x});var t=s(2555),r=s(3986),n=s(5043),l=s(6851),d=s(917),i=s(1089),c=s(579);const o=["className","variant","size","asChild"],m=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-500 text-white shadow-sm hover:bg-blue-600 rounded-lg",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-50 text-gray-700 rounded-lg",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),x=n.forwardRef((e,a)=>{let{className:s,variant:n,size:d,asChild:x=!1}=e,h=(0,r.A)(e,o);const p=x?l.DX:"button";return(0,c.jsx)(p,(0,t.A)({className:(0,i.cn)(m({variant:n,size:d,className:s})),ref:a},h))});x.displayName="Button"},1140(e,a,s){s.d(a,{BT:()=>g,Wu:()=>v,ZB:()=>f,Zp:()=>p,aR:()=>u});var t=s(2555),r=s(3986),n=s(5043),l=s(1089),d=s(579);const i=["className"],c=["className"],o=["className"],m=["className"],x=["className"],h=["className"],p=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,i);return(0,d.jsx)("div",(0,t.A)({ref:a,className:(0,l.cn)("rounded-xl border border-gray-200 bg-white text-gray-900 shadow-sm",s)},n))});p.displayName="Card";const u=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,c);return(0,d.jsx)("div",(0,t.A)({ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-5",s)},n))});u.displayName="CardHeader";const f=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,o);return(0,d.jsx)("div",(0,t.A)({ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",s)},n))});f.displayName="CardTitle";const g=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,m);return(0,d.jsx)("div",(0,t.A)({ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s)},n))});g.displayName="CardDescription";const v=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,x);return(0,d.jsx)("div",(0,t.A)({ref:a,className:(0,l.cn)("p-5 pt-0",s)},n))});v.displayName="CardContent";n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,h);return(0,d.jsx)("div",(0,t.A)({ref:a,className:(0,l.cn)("flex items-center p-5 pt-0",s)},n))}).displayName="CardFooter"},5598(e,a,s){s.d(a,{Cf:()=>b,L3:()=>N,c7:()=>j,lG:()=>u,rr:()=>y,zM:()=>f});var t=s(2555),r=s(3986),n=s(5043),l=s(7427),d=s(614),i=s(1089),c=s(579);const o=["className"],m=["className","children"],x=["className"],h=["className"],p=["className"],u=l.bL,f=l.l9,g=l.ZL,v=(l.bm,n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,o);return(0,c.jsx)(l.hJ,(0,t.A)({ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},n))}));v.displayName=l.hJ.displayName;const b=n.forwardRef((e,a)=>{let{className:s,children:n}=e,o=(0,r.A)(e,m);return(0,c.jsxs)(g,{children:[(0,c.jsx)(v,{}),(0,c.jsxs)(l.UC,(0,t.A)((0,t.A)({ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},o),{},{children:[n,(0,c.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,c.jsx)(d.A,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});b.displayName=l.UC.displayName;const j=e=>{let{className:a}=e,s=(0,r.A)(e,x);return(0,c.jsx)("div",(0,t.A)({className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a)},s))};j.displayName="DialogHeader";const N=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,h);return(0,c.jsx)(l.hE,(0,t.A)({ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s)},n))});N.displayName=l.hE.displayName;const y=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,p);return(0,c.jsx)(l.VY,(0,t.A)({ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s)},n))});y.displayName=l.VY.displayName},2264(e,a,s){s.d(a,{p:()=>c});var t=s(2555),r=s(3986),n=s(5043),l=s(1089),d=s(579);const i=["className","type"],c=n.forwardRef((e,a)=>{let{className:s,type:n}=e,c=(0,r.A)(e,i);return(0,d.jsx)("input",(0,t.A)({type:n,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-white px-3 py-1 text-base text-gray-900 shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a},c))});c.displayName="Input"},9938(e,a,s){s.d(a,{J:()=>x});var t=s(2555),r=s(3986),n=s(5043),l=s(5131),d=s(917),i=s(1089),c=s(579);const o=["className"],m=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,r.A)(e,o);return(0,c.jsx)(l.b,(0,t.A)({ref:a,className:(0,i.cn)(m(),s)},n))});x.displayName=l.b.displayName},1089(e,a,s){s.d(a,{cn:()=>n});var t=s(8387),r=s(9359);function n(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.QP)((0,t.$)(a))}},9005(e,a,s){s.r(a),s.d(a,{default:()=>C});var t=s(2555),r=s(5043),n=s(6930),l=s(9722),d=s(8729),i=s(3390),c=s(2264),o=s(9938),m=s(1140),x=s(5949),h=s(5598),p=s(2024),u=s(6533),f=s(5264),g=s(9797),v=s(8006),b=s(1286),j=s(1360),N=s(2489),y=s(7118),A=s(6328),w=s(579);function C(){const{t:e}=(0,n.Bd)(),{user:a}=(0,d.As)(),s=null===a||void 0===a?void 0:a.school_id,[C,_]=(0,r.useState)([]),[k,R]=(0,r.useState)(!0),[z,B]=(0,r.useState)(!1),[J,M]=(0,r.useState)(null),[S,Z]=(0,r.useState)({name:"",address:"",city:"",state:"",pincode:"",principal_name:"",phone:"",email:"",code:""});(0,r.useEffect)(()=>{P()},[s]);const P=async()=>{R(!0);try{var e;const a=localStorage.getItem("token"),t=await l.A.get("".concat("","/api/branches?school_id=").concat(s),{headers:{Authorization:"Bearer ".concat(a)}});_((null===(e=t.data)||void 0===e?void 0:e.branches)||[])}catch(a){_([{id:"main",name:"Main Campus",address:"Main Branch",students:0,staff:0,is_main:!0}])}finally{R(!1)}},D=C.reduce((e,a)=>e+(a.students||0),0),F=C.reduce((e,a)=>e+(a.staff||0),0);return(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[(0,w.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center",children:(0,w.jsx)(f.A,{className:"w-5 h-5 text-white"})}),e("multi_branch")]}),(0,w.jsx)("p",{className:"text-gray-500 mt-1",children:"Unify, monitor, and lead - stay smartly synced"})]}),(0,w.jsxs)(i.$,{onClick:()=>{M(null),Z({name:"",address:"",city:"",state:"",pincode:"",principal_name:"",phone:"",email:"",code:""}),B(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[(0,w.jsx)(j.A,{className:"w-4 h-4 mr-2"})," ",e("add_branch")]})]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,w.jsx)(m.Zp,{className:"border-0 shadow-md bg-gradient-to-br from-blue-50 to-blue-100",children:(0,w.jsx)(m.Wu,{className:"p-5",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm text-blue-600",children:e("total_branches")}),(0,w.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:C.length})]}),(0,w.jsx)(f.A,{className:"w-10 h-10 text-blue-500 opacity-50"})]})})}),(0,w.jsx)(m.Zp,{className:"border-0 shadow-md bg-gradient-to-br from-green-50 to-green-100",children:(0,w.jsx)(m.Wu,{className:"p-5",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm text-green-600",children:e("total_students")}),(0,w.jsx)("p",{className:"text-3xl font-bold text-green-900",children:D})]}),(0,w.jsx)(g.A,{className:"w-10 h-10 text-green-500 opacity-50"})]})})}),(0,w.jsx)(m.Zp,{className:"border-0 shadow-md bg-gradient-to-br from-purple-50 to-purple-100",children:(0,w.jsx)(m.Wu,{className:"p-5",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm text-purple-600",children:e("total_staff")}),(0,w.jsx)("p",{className:"text-3xl font-bold text-purple-900",children:F})]}),(0,w.jsx)(y.A,{className:"w-10 h-10 text-purple-500 opacity-50"})]})})}),(0,w.jsx)(m.Zp,{className:"border-0 shadow-md bg-gradient-to-br from-amber-50 to-amber-100",children:(0,w.jsx)(m.Wu,{className:"p-5",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm text-amber-600",children:e("active")}),(0,w.jsx)("p",{className:"text-3xl font-bold text-amber-900",children:C.filter(e=>!1!==e.is_active).length})]}),(0,w.jsx)(N.A,{className:"w-10 h-10 text-amber-500 opacity-50"})]})})})]}),k?(0,w.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,w.jsx)(p.A,{className:"w-8 h-8 animate-spin text-blue-500"})}):(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(a=>(0,w.jsx)(m.Zp,{className:"border-0 shadow-md hover:shadow-lg transition-shadow",children:(0,w.jsxs)(m.Wu,{className:"p-5",children:[(0,w.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center",children:(0,w.jsx)(f.A,{className:"w-6 h-6 text-white"})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"font-bold text-gray-900",children:a.name}),a.is_main&&(0,w.jsx)(x.E,{className:"bg-blue-100 text-blue-700 text-[10px]",children:e("main_branch")})]})]}),(0,w.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{M(e),Z({name:e.name||"",address:e.address||"",city:e.city||"",state:e.state||"",pincode:e.pincode||"",principal_name:e.principal_name||"",phone:e.phone||"",email:e.email||"",code:e.code||""}),B(!0)})(a),children:(0,w.jsx)(u.A,{className:"w-4 h-4 text-gray-400"})})]}),a.address&&(0,w.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1 mb-3",children:[(0,w.jsx)(v.A,{className:"w-3 h-3"})," ",a.address,a.city?", ".concat(a.city):""]}),(0,w.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[(0,w.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[(0,w.jsx)("p",{className:"text-xs text-gray-500",children:e("students")}),(0,w.jsx)("p",{className:"text-lg font-bold text-gray-900",children:a.students||0})]}),(0,w.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[(0,w.jsx)("p",{className:"text-xs text-gray-500",children:e("staff")}),(0,w.jsx)("p",{className:"text-lg font-bold text-gray-900",children:a.staff||0})]})]}),a.principal_name&&(0,w.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["Principal: ",a.principal_name]}),a.phone&&(0,w.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[(0,w.jsx)(b.A,{className:"w-3 h-3"})," ",a.phone]})]})},a.id))}),(0,w.jsx)(h.lG,{open:z,onOpenChange:B,children:(0,w.jsxs)(h.Cf,{className:"max-w-lg",children:[(0,w.jsx)(h.c7,{children:(0,w.jsx)(h.L3,{children:e(J?"edit":"add_branch")})}),(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)(o.J,{children:[e("branch_name")," *"]}),(0,w.jsx)(c.p,{value:S.name,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{name:e.target.value})),placeholder:"e.g., City Center Branch"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:e("branch_code")}),(0,w.jsx)(c.p,{value:S.code,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{code:e.target.value})),placeholder:"e.g., BR-001"})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:"Address"}),(0,w.jsx)(c.p,{value:S.address,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{address:e.target.value})),placeholder:"Full address"})]}),(0,w.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:"City"}),(0,w.jsx)(c.p,{value:S.city,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{city:e.target.value}))})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:"State"}),(0,w.jsx)(c.p,{value:S.state,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{state:e.target.value}))})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:"Pincode"}),(0,w.jsx)(c.p,{value:S.pincode,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{pincode:e.target.value}))})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:"Principal Name"}),(0,w.jsx)(c.p,{value:S.principal_name,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{principal_name:e.target.value}))})]}),(0,w.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:e("phone")}),(0,w.jsx)(c.p,{value:S.phone,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{phone:e.target.value}))})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(o.J,{children:e("email")}),(0,w.jsx)(c.p,{value:S.email,onChange:e=>Z(a=>(0,t.A)((0,t.A)({},a),{},{email:e.target.value}))})]})]}),(0,w.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,w.jsx)(i.$,{variant:"outline",onClick:()=>B(!1),children:e("cancel")}),(0,w.jsx)(i.$,{onClick:async()=>{try{const e=localStorage.getItem("token"),a=(0,t.A)((0,t.A)({},S),{},{school_id:s});J?(await l.A.put("".concat("","/api/branches/").concat(J.id),a,{headers:{Authorization:"Bearer ".concat(e)}}),A.oR.success("Branch updated!")):(await l.A.post("".concat("","/api/branches"),a,{headers:{Authorization:"Bearer ".concat(e)}}),A.oR.success("Branch added!")),B(!1),M(null),Z({name:"",address:"",city:"",state:"",pincode:"",principal_name:"",phone:"",email:"",code:""}),P()}catch(e){A.oR.error("Failed to save branch")}},className:"bg-blue-600 hover:bg-blue-700",children:e(J?"save":"add_branch")})]})]})]})})]})}},2024(e,a,s){s.d(a,{A:()=>t});const t=(0,s(7784).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8006(e,a,s){s.d(a,{A:()=>t});const t=(0,s(7784).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},1360(e,a,s){s.d(a,{A:()=>t});const t=(0,s(7784).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6533(e,a,s){s.d(a,{A:()=>t});const t=(0,s(7784).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},5131(e,a,s){s.d(a,{b:()=>m});var t=s(2555),r=s(5043),n=s(3986),l=(s(7950),s(6851)),d=s(579);const i=["asChild"];var c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{const s=(0,l.TL)("Primitive.".concat(a)),c=r.forwardRef((e,r)=>{const{asChild:l}=e,c=(0,n.A)(e,i),o=l?s:a;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,d.jsx)(o,(0,t.A)((0,t.A)({},c),{},{ref:r}))});return c.displayName="Primitive.".concat(a),(0,t.A)((0,t.A)({},e),{},{[a]:c})},{});var o=r.forwardRef((e,a)=>(0,d.jsx)(c.label,(0,t.A)((0,t.A)({},e),{},{ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}})));o.displayName="Label";var m=o}}]);
//# sourceMappingURL=9005.a275c571.chunk.js.map