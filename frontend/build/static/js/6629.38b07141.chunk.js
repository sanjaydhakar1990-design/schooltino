"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6629],{4245(e,a,s){s.d(a,{BT:()=>b,Wu:()=>f,ZB:()=>g,Zp:()=>x,aR:()=>p});var t=s(2555),n=s(3986),l=s(9950),r=s(9332),i=s(4414);const o=["className"],c=["className"],d=["className"],m=["className"],h=["className"],u=["className"],x=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,o);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("rounded-xl border border-gray-200 bg-white text-gray-900 shadow-sm",s)},l))});x.displayName="Card";const p=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,c);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-5",s)},l))});p.displayName="CardHeader";const g=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,d);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("font-semibold leading-none tracking-tight",s)},l))});g.displayName="CardTitle";const b=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,m);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s)},l))});b.displayName="CardDescription";const f=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,h);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("p-5 pt-0",s)},l))});f.displayName="CardContent";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,u);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("flex items-center p-5 pt-0",s)},l))}).displayName="CardFooter"},810(e,a,s){s.d(a,{k:()=>d});var t=s(2555),n=s(3986),l=s(9950),r=s(3757),i=s(9332),o=s(4414);const c=["className","value"],d=l.forwardRef((e,a)=>{let{className:s,value:l}=e,d=(0,n.A)(e,c);return(0,o.jsx)(r.bL,(0,t.A)((0,t.A)({ref:a,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s)},d),{},{children:(0,o.jsx)(r.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})}))});d.displayName=r.bL.displayName},3787(e,a,s){s.d(a,{A0:()=>b,BF:()=>f,Hj:()=>j,XI:()=>g,nA:()=>N,nd:()=>v});var t=s(2555),n=s(3986),l=s(9950),r=s(9332),i=s(4414);const o=["className"],c=["className"],d=["className"],m=["className"],h=["className"],u=["className"],x=["className"],p=["className"],g=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,o);return(0,i.jsx)("div",{className:"relative w-full overflow-auto rounded-xl border border-gray-200 bg-white overflow-hidden",children:(0,i.jsx)("table",(0,t.A)({ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",s)},l))})});g.displayName="Table";const b=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,c);return(0,i.jsx)("thead",(0,t.A)({ref:a,className:(0,r.cn)("[&_tr]:border-b bg-gray-50/80",s)},l))});b.displayName="TableHeader";const f=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,d);return(0,i.jsx)("tbody",(0,t.A)({ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",s)},l))});f.displayName="TableBody";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,m);return(0,i.jsx)("tfoot",(0,t.A)({ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s)},l))}).displayName="TableFooter";const j=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,h);return(0,i.jsx)("tr",(0,t.A)({ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-blue-50/40 data-[state=selected]:bg-muted",s)},l))});j.displayName="TableRow";const v=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,u);return(0,i.jsx)("th",(0,t.A)({ref:a,className:(0,r.cn)("h-11 px-4 text-xs uppercase tracking-wider text-left align-middle font-medium text-gray-600 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s)},l))});v.displayName="TableHead";const N=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,x);return(0,i.jsx)("td",(0,t.A)({ref:a,className:(0,r.cn)("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s)},l))});N.displayName="TableCell";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,p);return(0,i.jsx)("caption",(0,t.A)({ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",s)},l))}).displayName="TableCaption"},5475(e,a,s){s.d(a,{Xi:()=>x,av:()=>p,j7:()=>u,tU:()=>h});var t=s(2555),n=s(3986),l=s(9950),r=s(7970),i=s(9332),o=s(4414);const c=["className"],d=["className"],m=["className"],h=r.bL,u=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,c);return(0,o.jsx)(r.B8,(0,t.A)({ref:a,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-gray-100 border border-gray-200 p-1 text-muted-foreground",s)},l))});u.displayName=r.B8.displayName;const x=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,d);return(0,o.jsx)(r.l9,(0,t.A)({ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-blue-500",s)},l))});x.displayName=r.l9.displayName;const p=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,m);return(0,o.jsx)(r.UC,(0,t.A)({ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s)},l))});p.displayName=r.UC.displayName},6629(e,a,s){s.r(a),s.d(a,{default:()=>be});var t=s(2555),n=s(9950),l=s(5030),r=s(5532),i=s(6910),o=s(1111),c=s(4779),d=s(557),m=s(7255),h=(s(3787),s(5475)),u=s(8890),x=s(2989),p=s(5107),g=s(5097),b=s(1420),f=s(7834),j=s(6479),v=s(6311),N=s(259),_=s(5924),y=s(1830),w=s(3147),A=s(1064),C=s(5354),k=s(743),S=s(7838),P=s(978),R=s(1041),I=s(2796),B=s(5332),D=s(4814),F=s(6987),T=s(9975),J=s(6958),E=s(6649),z=s(1449),O=s(3986),M=s(8097),L=s(983),G=s(5675),q=s(9332),$=s(4414);const U=["className","inset","children"],H=["className"],W=["className","sideOffset"],Q=["className","inset"],V=["className","children","checked"],Z=["className","children"],Y=["className","inset"],X=["className"],K=M.bL,ee=M.l9;M.YJ,M.ZL,M.Pb,M.z6;n.forwardRef((e,a)=>{let{className:s,inset:n,children:l}=e,r=(0,O.A)(e,U);return(0,$.jsxs)(M.ZP,(0,t.A)((0,t.A)({ref:a,className:(0,q.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",s)},r),{},{children:[l,(0,$.jsx)(L.A,{className:"ml-auto"})]}))}).displayName=M.ZP.displayName;n.forwardRef((e,a)=>{let{className:s}=e,n=(0,O.A)(e,H);return(0,$.jsx)(M.G5,(0,t.A)({ref:a,className:(0,q.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s)},n))}).displayName=M.G5.displayName;const ae=n.forwardRef((e,a)=>{let{className:s,sideOffset:n=4}=e,l=(0,O.A)(e,W);return(0,$.jsx)(M.ZL,{children:(0,$.jsx)(M.UC,(0,t.A)({ref:a,sideOffset:n,className:(0,q.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s)},l))})});ae.displayName=M.UC.displayName;const se=n.forwardRef((e,a)=>{let{className:s,inset:n}=e,l=(0,O.A)(e,Q);return(0,$.jsx)(M.q7,(0,t.A)({ref:a,className:(0,q.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",s)},l))});se.displayName=M.q7.displayName;n.forwardRef((e,a)=>{let{className:s,children:n,checked:l}=e,r=(0,O.A)(e,V);return(0,$.jsxs)(M.H_,(0,t.A)((0,t.A)({ref:a,className:(0,q.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l},r),{},{children:[(0,$.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,$.jsx)(M.VF,{children:(0,$.jsx)(v.A,{className:"h-4 w-4"})})}),n]}))}).displayName=M.H_.displayName;n.forwardRef((e,a)=>{let{className:s,children:n}=e,l=(0,O.A)(e,Z);return(0,$.jsxs)(M.hN,(0,t.A)((0,t.A)({ref:a,className:(0,q.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},l),{},{children:[(0,$.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,$.jsx)(M.VF,{children:(0,$.jsx)(G.A,{className:"h-2 w-2 fill-current"})})}),n]}))}).displayName=M.hN.displayName;n.forwardRef((e,a)=>{let{className:s,inset:n}=e,l=(0,O.A)(e,Y);return(0,$.jsx)(M.JU,(0,t.A)({ref:a,className:(0,q.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",s)},l))}).displayName=M.JU.displayName;const te=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,O.A)(e,X);return(0,$.jsx)(M.wv,(0,t.A)({ref:a,className:(0,q.cn)("-mx-1 my-1 h-px bg-muted",s)},n))});te.displayName=M.wv.displayName;var ne=s(2033),le=s(4245),re=s(810),ie=s(1082),oe=s(5833),ce=s(9469),de=s(6859);const me=[{id:"passport",label:"Passport Photo",icon:A.A,description:"Front facing, neutral expression",required:!0},{id:"front",label:"Front View",icon:S.A,description:"Direct front view",required:!1},{id:"left",label:"Left Profile",icon:A.A,description:"Left side (30-45\xb0)",required:!1},{id:"right",label:"Right Profile",icon:A.A,description:"Right side (30-45\xb0)",required:!1},{id:"full_body",label:"Full Body",icon:A.A,description:"Full body with face visible",required:!1}];function he(e){var a,s,l,r,i,c,d;let{studentId:h,schoolId:u,studentName:p,onComplete:g,onSkip:j,isOpen:v,onClose:N}=e;const[y,w]=(0,n.useState)("passport"),[A,C]=(0,n.useState)({}),[k,S]=(0,n.useState)(!1),[P,R]=(0,n.useState)(!1),[I,B]=(0,n.useState)(!1),[D,F]=(0,n.useState)("camera"),[T,J]=(0,n.useState)(null),[E,z]=(0,n.useState)(null),[O,M]=(0,n.useState)(null),L=(0,n.useRef)(null),G=(0,n.useRef)(null),q=(0,n.useRef)(null),U=(0,n.useRef)(null);(0,n.useEffect)(()=>{h&&v&&H()},[h,v]),(0,n.useEffect)(()=>()=>{Q()},[]);const H=async()=>{try{const a=await fetch("".concat("","/api/face-recognition/enrollment-status/").concat(h));if(a.ok){var e;const s=await a.json();M(s);const t={};null===(e=s.photos_uploaded)||void 0===e||e.forEach(e=>{t[e]={uploaded:!0}}),C(t)}}catch(a){console.error("Error fetching enrollment status:",a)}},W=async()=>{try{const e={video:{width:{ideal:1920},height:{ideal:1080},facingMode:"user"}},a=await navigator.mediaDevices.getUserMedia(e);U.current=a,L.current&&(L.current.srcObject=a,await L.current.play()),B(!0),ne.oR.success("Camera started! Position your face properly.")}catch(e){console.error("Camera error:",e),ne.oR.error("Camera access denied. Please allow camera permission or upload photos."),F("upload")}},Q=()=>{U.current&&(U.current.getTracks().forEach(e=>e.stop()),U.current=null),B(!1)},V=async e=>{R(!0),J(null);try{const a=await fetch("".concat("","/api/face-recognition/upload-photo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:h,school_id:u,photo_base64:e,photo_type:y,capture_device:"camera"===D?"webcam":"upload"})}),s=await a.json();if(s.success){ne.oR.success(s.message||"Photo uploaded successfully!"),J(s.analysis),C(e=>(0,t.A)((0,t.A)({},e),{},{[y]:{uploaded:!0,quality:s.quality_score,photoId:s.photo_id}}));const e=me.findIndex(e=>e.id===y);e<me.length-1&&w(me[e+1].id),H()}else"TWIN_OR_SIBLING_DETECTED"===s.warning?z({type:"twin",similar_student:s.similar_student,similarity:s.similarity,message:s.message}):(ne.oR.error(s.error||"Failed to upload photo"),J(s.analysis))}catch(a){console.error("Upload error:",a),ne.oR.error("Failed to upload photo. Please try again.")}finally{R(!1)}},Z=Object.keys(A).filter(e=>{var a;return null===(a=A[e])||void 0===a?void 0:a.uploaded}).length,Y=Z/3*100,X=(null===(a=A.passport)||void 0===a?void 0:a.uploaded)&&Z>=2;return(0,$.jsx)(m.lG,{open:v,onOpenChange:N,children:(0,$.jsxs)(m.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,$.jsxs)(m.c7,{children:[(0,$.jsxs)(m.L3,{className:"flex items-center gap-2",children:[(0,$.jsx)(ie.A,{className:"w-6 h-6 text-indigo-600"}),"AI Face Enrollment - ",p]}),(0,$.jsx)(m.rr,{children:"4-5 photos chahiye (1 passport + angles) for accurate face recognition"})]}),(0,$.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-4",children:[(0,$.jsxs)("div",{className:"space-y-3",children:[(0,$.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$.jsx)("span",{className:"text-sm font-medium",children:"Progress"}),(0,$.jsxs)("span",{className:"text-sm text-slate-500",children:[Z,"/5 photos"]})]}),(0,$.jsx)(re.k,{value:Y,className:"h-2 mb-4"}),me.map(e=>{var a;const s=(e=>{var a;return null!==(a=A[e])&&void 0!==a&&a.uploaded?"complete":e===y?"current":"pending"})(e.id);return(0,$.jsx)("button",{onClick:()=>w(e.id),className:"w-full p-3 rounded-lg border-2 text-left transition-all ".concat("complete"===s?"border-emerald-300 bg-emerald-50":"current"===s?"border-indigo-400 bg-indigo-50":"border-slate-200 bg-white hover:border-slate-300"),"data-testid":"photo-type-".concat(e.id),children:(0,$.jsxs)("div",{className:"flex items-center gap-3",children:[(0,$.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("complete"===s?"bg-emerald-500":"current"===s?"bg-indigo-500":"bg-slate-200"),children:"complete"===s?(0,$.jsx)(oe.A,{className:"w-5 h-5 text-white"}):(0,$.jsx)(e.icon,{className:"w-4 h-4 ".concat("current"===s?"text-white":"text-slate-500")})}),(0,$.jsxs)("div",{className:"flex-1",children:[(0,$.jsxs)("p",{className:"font-medium text-sm ".concat("complete"===s?"text-emerald-700":"text-slate-900"),children:[e.label," ",e.required&&(0,$.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]}),"complete"===s&&(null===(a=A[e.id])||void 0===a?void 0:a.quality)&&(0,$.jsxs)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded",children:[A[e.id].quality,"%"]})]})},e.id)})]}),(0,$.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,$.jsxs)("div",{className:"flex gap-2",children:[(0,$.jsxs)(o.$,{variant:"camera"===D?"default":"outline",onClick:()=>{F("camera"),I||W()},className:"flex-1",children:[(0,$.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Camera"]}),(0,$.jsxs)(o.$,{variant:"upload"===D?"default":"outline",onClick:()=>{F("upload"),Q()},className:"flex-1",children:[(0,$.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Upload"]})]}),"camera"===D&&(0,$.jsx)(le.Zp,{className:"overflow-hidden",children:(0,$.jsxs)(le.Wu,{className:"p-0",children:[(0,$.jsxs)("div",{className:"relative aspect-[4/3] bg-slate-900",children:[(0,$.jsx)("video",{ref:L,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,$.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,$.jsx)("div",{className:"border-4 border-dashed rounded-full w-48 h-64 ".concat("full_body"===y?"w-32 h-80":""," ").concat(I?"border-white/50":"border-slate-500")})}),(0,$.jsx)("div",{className:"absolute top-4 left-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm",children:null===(s=me.find(e=>e.id===y))||void 0===s?void 0:s.label}),!I&&(0,$.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80",children:(0,$.jsxs)(o.$,{onClick:W,size:"lg",children:[(0,$.jsx)(b.A,{className:"w-5 h-5 mr-2"}),"Start Camera"]})})]}),I&&(0,$.jsxs)("div",{className:"p-4 bg-slate-100 flex justify-center gap-4",children:[(0,$.jsxs)(o.$,{size:"lg",onClick:async()=>{if(!L.current||!G.current)return;S(!0);const e=L.current,a=G.current,s=a.getContext("2d");a.width=e.videoWidth,a.height=e.videoHeight,s.drawImage(e,0,0);const t=a.toDataURL("image/jpeg",.9).split(",")[1];await V(t),S(!1)},disabled:k||P,className:"bg-red-600 hover:bg-red-700","data-testid":"capture-photo-btn",children:[k||P?(0,$.jsx)(x.A,{className:"w-5 h-5 animate-spin mr-2"}):(0,$.jsx)(b.A,{className:"w-5 h-5 mr-2"}),P?"Analyzing...":"Capture Photo"]}),(0,$.jsxs)(o.$,{variant:"outline",onClick:Q,children:[(0,$.jsx)(ce.A,{className:"w-4 h-4 mr-2"}),"Stop"]})]})]})}),"upload"===D&&(0,$.jsx)(le.Zp,{className:"border-2 border-dashed border-slate-300 hover:border-indigo-400 transition-colors",children:(0,$.jsx)(le.Wu,{className:"p-8",children:(0,$.jsxs)("div",{className:"flex flex-col items-center justify-center cursor-pointer",onClick:()=>{var e;return null===(e=q.current)||void 0===e?void 0:e.click()},children:[(0,$.jsx)(f.A,{className:"w-12 h-12 text-slate-400 mb-4"}),(0,$.jsxs)("p",{className:"text-lg font-medium text-slate-700",children:["Click to upload ",null===(l=me.find(e=>e.id===y))||void 0===l?void 0:l.label]}),(0,$.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"JPG, PNG up to 10MB - High resolution recommended"}),(0,$.jsx)("input",{ref:q,type:"file",accept:"image/*",onChange:async e=>{const a=e.target.files[0];if(!a)return;if(!a.type.startsWith("image/"))return void ne.oR.error("Please upload an image file");if(a.size>10485760)return void ne.oR.error("File size too large. Max 10MB allowed.");const s=new FileReader;s.onloadend=async()=>{const e=s.result.split(",")[1];await V(e)},s.readAsDataURL(a)},className:"hidden","data-testid":"photo-upload-input"}),P&&(0,$.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-indigo-600",children:[(0,$.jsx)(x.A,{className:"w-5 h-5 animate-spin"}),(0,$.jsx)("span",{children:"AI analyzing photo..."})]})]})})}),T&&(0,$.jsx)(le.Zp,{className:"".concat(T.quality_score>=80?"border-emerald-300 bg-emerald-50":T.quality_score>=60?"border-amber-300 bg-amber-50":"border-red-300 bg-red-50"),children:(0,$.jsx)(le.Wu,{className:"p-4",children:(0,$.jsxs)("div",{className:"flex items-start gap-3",children:[T.quality_score>=80?(0,$.jsx)(oe.A,{className:"w-6 h-6 text-emerald-600 flex-shrink-0"}):T.quality_score>=60?(0,$.jsx)(_.A,{className:"w-6 h-6 text-amber-600 flex-shrink-0"}):(0,$.jsx)(ce.A,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),(0,$.jsxs)("div",{className:"flex-1",children:[(0,$.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,$.jsxs)("span",{className:"font-semibold",children:["Quality Score: ",T.quality_score,"/100"]}),T.face_detected&&(0,$.jsx)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded",children:"Face Detected"})]}),(null===(r=T.issues)||void 0===r?void 0:r.length)>0&&(0,$.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,$.jsx)("strong",{children:"Issues:"})," ",T.issues.join(", ")]}),(null===(i=T.recommendations)||void 0===i?void 0:i.length)>0&&(0,$.jsxs)("div",{className:"text-sm text-slate-600 mt-1",children:[(0,$.jsx)("strong",{children:"Tips:"})," ",T.recommendations.join(", ")]})]})]})})}),(0,$.jsx)("canvas",{ref:G,className:"hidden"})]})]}),"twin"===(null===E||void 0===E?void 0:E.type)&&(0,$.jsx)("div",{className:"mt-4 p-4 bg-amber-50 border-2 border-amber-300 rounded-lg",children:(0,$.jsxs)("div",{className:"flex items-start gap-3",children:[(0,$.jsx)(_.A,{className:"w-6 h-6 text-amber-600 flex-shrink-0"}),(0,$.jsxs)("div",{children:[(0,$.jsx)("h4",{className:"font-bold text-amber-800",children:"\u26a0\ufe0f Similar Face Detected!"}),(0,$.jsxs)("p",{className:"text-sm text-amber-700 mt-1",children:["This face is ",E.similarity,"% similar to: ",(0,$.jsx)("strong",{children:null===(c=E.similar_student)||void 0===c?void 0:c.name}),(null===(d=E.similar_student)||void 0===d?void 0:d.class)&&" (Class ".concat(E.similar_student.class,")")]}),(0,$.jsxs)("p",{className:"text-sm text-amber-700 mt-2",children:[(0,$.jsx)("strong",{children:"Kya ye student twin/sibling hai?"})," Please verify carefully before proceeding."]}),(0,$.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,$.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>z(null),children:"Re-take Photo"}),(0,$.jsx)(o.$,{size:"sm",className:"bg-amber-600 hover:bg-amber-700",onClick:()=>{z(null),ne.oR.success("Verified as different person. Continue enrollment.")},children:"Yes, Different Person - Continue"})]})]})]})}),(0,$.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[(0,$.jsx)(o.$,{variant:"ghost",onClick:async()=>{try{(await fetch("".concat("","/api/face-recognition/skip-enrollment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:h,school_id:u,skip_face:!0,skip_biometric:!0,reason:"Skipped during admission - will complete later"})})).ok&&(ne.oR.info("Face enrollment skipped. Can be completed later."),null===j||void 0===j||j(),null===N||void 0===N||N())}catch(e){console.error("Skip error:",e)}},className:"text-slate-500",children:"Skip for now"}),(0,$.jsxs)("div",{className:"flex gap-3",children:[(0,$.jsx)(o.$,{variant:"outline",onClick:N,children:"Cancel"}),(0,$.jsxs)(o.$,{onClick:()=>{Q(),null===g||void 0===g||g(),null===N||void 0===N||N()},disabled:!X,className:"bg-emerald-600 hover:bg-emerald-700","data-testid":"complete-enrollment-btn",children:[(0,$.jsx)(oe.A,{className:"w-4 h-4 mr-2"}),"Complete Enrollment"]})]})]}),(0,$.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg flex items-start gap-2",children:[(0,$.jsx)(de.A,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,$.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,$.jsx)("strong",{children:"Tips for best results:"}),(0,$.jsxs)("ul",{className:"list-disc ml-4 mt-1",children:[(0,$.jsx)("li",{children:"Good lighting - face clearly visible"}),(0,$.jsx)("li",{children:"Remove glasses if possible"}),(0,$.jsx)("li",{children:"Neutral expression for passport photo"}),(0,$.jsx)("li",{children:"Different angles help AI identify student accurately"}),(0,$.jsx)("li",{children:"Full body photo helps even if face is partially visible"})]})]})]})]})})}var ue=s(8529);var xe=s(4773),pe=s(9256);const ge="".concat("","/api");function be(){var e;const{t:a}=(0,l.Bd)(),{schoolId:s,user:O}=(0,r.As)(),[M,L]=(0,n.useState)([]),[G,q]=(0,n.useState)([]),[U,H]=(0,n.useState)([]),[W,Q]=(0,n.useState)(!0),[V,Z]=(0,n.useState)(""),[Y,X]=(0,n.useState)(""),[le,re]=(0,n.useState)(!1),[ie,oe]=(0,n.useState)(!1),[ce,de]=(0,n.useState)(!1),[me,be]=(0,n.useState)(!1),[fe,je]=(0,n.useState)(!1),[ve,Ne]=(0,n.useState)(!1),[_e,ye]=(0,n.useState)(null),[we,Ae]=(0,n.useState)(null),[Ce,ke]=(0,n.useState)(null),[Se,Pe]=(0,n.useState)(null),[Re,Ie]=(0,n.useState)(null),[Be,De]=(0,n.useState)(!1),[Fe,Te]=(0,n.useState)(null),[Je,Ee]=(0,n.useState)(!1),[ze,Oe]=(0,n.useState)(!1),[Me,Le]=(0,n.useState)(!1),[Ge,qe]=(0,n.useState)({fromClassId:"",toClassId:"",selectedStudentIds:[],selectAll:!1}),[$e,Ue]=(0,n.useState)(!1),[He,We]=(0,n.useState)(null),[Qe,Ve]=(0,n.useState)(!1),[Ze,Ye]=(0,n.useState)(!1),[Xe,Ke]=(0,n.useState)(null),[ea,aa]=(0,n.useState)(""),[sa,ta]=(0,n.useState)(!1),[na,la]=(0,n.useState)(!1),[ra,ia]=(0,n.useState)(null),[oa,ca]=(0,n.useState)(!1),[da,ma]=(0,n.useState)(!1),[ha,ua]=(0,n.useState)(null),[xa,pa]=(0,n.useState)(!1),ga=(0,n.useRef)(null),ba=(0,n.useRef)(null),[fa,ja]=(0,n.useState)(null),[va,Na]=(0,n.useState)(null),[_a,ya]=(0,n.useState)(!1),[wa,Aa]=(0,n.useState)(null),[Ca,ka]=(0,n.useState)(!1),[Sa,Pa]=(0,n.useState)(null),[Ra,Ia]=(0,n.useState)(""),[Ba,Da]=(0,n.useState)(!1),[Fa,Ta]=(0,n.useState)(!1),Ja=(0,n.useRef)(null),Ea=(0,n.useRef)(null),[za,Oa]=(0,n.useState)("basic"),[Ma,La]=(0,n.useState)({name:"",class_id:"",dob:"",gender:"male",blood_group:"",admission_date:(new Date).toISOString().split("T")[0],aadhar_no:"",scholar_no:"",pen_number:"",sssmid:"",samagra_family_id:"",jan_aadhar_no:"",caste:"",sub_caste:"",religion:"",category:"",nationality:"Indian",mother_tongue:"",birth_place:"",identification_mark:"",rte_status:!1,father_name:"",father_occupation:"",father_qualification:"",mother_name:"",mother_occupation:"",mother_qualification:"",guardian_name:"",guardian_relation:"",guardian_mobile:"",guardian_occupation:"",annual_income:"",mobile:"",parent_phone:"",email:"",address:"",emergency_contact:"",emergency_contact_name:"",bank_name:"",bank_account_no:"",ifsc_code:"",bank_branch:"",transport_mode:"",bus_route:"",bus_stop:"",pickup_point:"",is_hosteler:!1,hostel_room_no:"",medical_conditions:"",allergies:"",previous_school:"",previous_class:"",previous_percentage:"",tc_number:""}),[Ga,qa]=(0,n.useState)({birth_certificate:null,aadhar_card:null,transfer_certificate:null,marksheet:null,caste_certificate:null,income_certificate:null,passport_photo:null}),[$a,Ua]=(0,n.useState)({father_photo:null,mother_photo:null,guardian_photo:null}),[Ha,Wa]=(0,n.useState)(null),[Qa,Va]=((0,n.useRef)(null),(0,n.useRef)(null),(0,n.useState)(null)),[Za,Ya]=(0,n.useState)({reason:"fees_pending",details:""}),Xa={fees_pending:"Fees Pending (\u0936\u0941\u0932\u094d\u0915 \u092c\u0915\u093e\u092f\u093e)",misconduct:"Misconduct (\u0905\u0928\u0941\u0936\u093e\u0938\u0928\u0939\u0940\u0928\u0924\u093e)",document_pending:"Document Pending (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0932\u0902\u092c\u093f\u0924)",attendance_low:"Low Attendance (\u0915\u092e \u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f)",other:"Other (\u0905\u0928\u094d\u092f)"};(0,n.useEffect)(()=>{s&&(Ka(),es())},[s,V,Y]);const Ka=async()=>{try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)};let t="".concat(ge,"/students?school_id=").concat(s);V&&(t+="&search=".concat(V)),Y&&(t+="&class_id=".concat(Y));const[n,l]=await Promise.all([i.A.get("".concat(t,"&status=active"),{headers:a}),i.A.get("".concat(t,"&status=suspended"),{headers:a})]);L(n.data),q(l.data)}catch(e){ne.oR.error("Failed to fetch students")}finally{Q(!1)}},es=async()=>{try{const e=localStorage.getItem("token"),a=await i.A.get("".concat(ge,"/classes?school_id=").concat(s),{headers:{Authorization:"Bearer ".concat(e)}});H(a.data)}catch(e){console.error("Failed to fetch classes")}},as=()=>{wa&&(wa.getTracks().forEach(e=>e.stop()),Aa(null)),ya(!1)},ss=async(e,a)=>{const s=e.target.files[0];if(!s)return;if(s.size>5242880)return void ne.oR.error("Photo size 5MB se kam honi chahiye");pa(!0);const n=new FileReader;n.onload=async e=>{try{const s=localStorage.getItem("token"),n=(await i.A.post("".concat(ge,"/students/").concat(a,"/update-photo"),{photo_data:e.target.result},{headers:{Authorization:"Bearer ".concat(s)}})).data.photo_url;ua(e=>e?(0,t.A)((0,t.A)({},e),{},{photo_url:n}):e),ja(e=>e&&e.id===a?(0,t.A)((0,t.A)({},e),{},{photo_url:n}):e),Ka(),ne.oR.success("Photo upload ho gayi!")}catch(s){ne.oR.error("Photo upload fail hua. Please try again.")}finally{pa(!1)}},n.readAsDataURL(s)},ts=async e=>{ia({name:e.name,student_id:e.student_id||e.id,class_name:e.class_name,father_name:e.father_name,mobile:e.mobile||e.parent_phone,default_password:e.mobile||e.parent_phone||e.student_id||e.id}),la(!0)},ns=e=>"\ud83d\udcda *StudyTino Login Details*\n\n\ud83d\udc64 Student: ".concat(e.name,"\n\ud83c\udfeb Class: ").concat(e.class_name||"N/A","\n\n\ud83d\udd10 *Login Credentials:*\nStudent ID: ").concat(e.student_id,"\nPassword: ").concat(e.default_password,"\n\n\ud83d\udcf1 App Link: ").concat(window.location.origin,"/studytino\n\nNote: First login \u092a\u0930 password change \u0915\u0930\u0947\u0902\u0964"),ls=e=>{const a=e,s=window.open("","_blank");if(!s)return void ne.oR.error("Popup blocked - please allow popups");const t=a.photo_url?'<img src="'.concat(a.photo_url,'" style="width:120px;height:140px;object-fit:cover;border-radius:8px;border:2px solid #1e40af;" />'):'<div style="width:120px;height:140px;background:#e2e8f0;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:48px;color:#94a3b8;border:2px solid #1e40af;">\ud83d\udc64</div>',n=(e,a)=>a?'<tr><td style="padding:6px 12px;font-weight:600;color:#374151;background:#f8fafc;border:1px solid #e2e8f0;width:200px;">'.concat(e,'</td><td style="padding:6px 12px;border:1px solid #e2e8f0;">').concat(a,"</td></tr>"):"",l=(e,a)=>'<tr><td colspan="2" style="padding:10px 12px;font-weight:700;font-size:14px;background:linear-gradient(135deg,#1e40af,#3b82f6);color:white;border:1px solid #1e40af;">'.concat(a," ").concat(e,"</td></tr>"),r="<!DOCTYPE html><html><head><title>Student Profile - ".concat(a.name,'</title>\n<style>@page{size:A4;margin:15mm}body{font-family:\'Segoe UI\',Arial,sans-serif;color:#1e293b;margin:0;padding:20px}\n.header{text-align:center;margin-bottom:20px;border-bottom:3px solid #1e40af;padding-bottom:15px}\ntable{width:100%;border-collapse:collapse;margin-bottom:15px;font-size:13px}\n.print-btn{position:fixed;top:10px;right:10px;padding:10px 20px;background:#1e40af;color:white;border:none;border-radius:8px;cursor:pointer;font-size:14px}\n@media print{.print-btn{display:none}}</style></head>\n<body>\n<button class="print-btn" onclick="window.print()">\ud83d\udda8\ufe0f Print</button>\n<div class="header">\n').concat(t,'\n<h1 style="margin:10px 0 5px;color:#1e40af;font-size:24px;">').concat(a.name,'</h1>\n<p style="color:#64748b;margin:0;">Student ID: ').concat(a.student_id||a.admission_no||"N/A"," | Class: ").concat(a.class_name||"N/A").concat(a.section?" - "+a.section:"","</p>\n</div>\n<table>\n").concat(l("Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)","\ud83d\udccb"),"\n").concat(n("Name (\u0928\u093e\u092e)",a.name),"\n").concat(n("Student ID",a.student_id||a.admission_no),"\n").concat(n("Class (\u0915\u0915\u094d\u0937\u093e)",a.class_name),"\n").concat(n("Section",a.section),"\n").concat(n("Gender (\u0932\u093f\u0902\u0917)",a.gender),"\n").concat(n("Date of Birth (\u091c\u0928\u094d\u092e \u0924\u093f\u0925\u093f)",a.dob),"\n").concat(n("Blood Group (\u0930\u0915\u094d\u0924 \u0938\u092e\u0942\u0939)",a.blood_group),"\n").concat(n("Admission Date (\u092a\u094d\u0930\u0935\u0947\u0936 \u0924\u093f\u0925\u093f)",a.admission_date),"\n").concat(n("Category (\u0936\u094d\u0930\u0947\u0923\u0940)",a.category),"\n").concat(n("Caste (\u091c\u093e\u0924\u093f)",a.caste),"\n").concat(n("Religion (\u0927\u0930\u094d\u092e)",a.religion),"\n").concat(n("Nationality",a.nationality),"\n").concat(n("Mother Tongue",a.mother_tongue),"\n").concat(n("Birth Place",a.birth_place),"\n").concat(n("Identification Mark",a.identification_mark),"\n").concat(n("RTE Status",a.rte_status?"Yes":"No"),"\n").concat(l("Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)","\ud83c\udd94"),"\n").concat(n("Aadhar No (\u0906\u0927\u093e\u0930 \u0928\u0902.)",a.aadhar_no),"\n").concat(n("Scholar No (\u0935\u093f\u0926\u094d\u092f\u093e\u0930\u094d\u0925\u0940 \u0915\u094d\u0930\u092e\u093e\u0902\u0915)",a.scholar_no),"\n").concat(n("PEN Number",a.pen_number),"\n").concat(n("SSSMID",a.sssmid),"\n").concat(n("Samagra Family ID",a.samagra_family_id),"\n").concat(n("Jan Aadhar No",a.jan_aadhar_no),"\n").concat(l("Family Information (\u092a\u093e\u0930\u093f\u0935\u093e\u0930\u093f\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)","\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66"),"\n").concat(n("Father Name (\u092a\u093f\u0924\u093e \u0915\u093e \u0928\u093e\u092e)",a.father_name),"\n").concat(n("Father Occupation",a.father_occupation),"\n").concat(n("Father Qualification",a.father_qualification),"\n").concat(n("Mother Name (\u092e\u093e\u0924\u093e \u0915\u093e \u0928\u093e\u092e)",a.mother_name),"\n").concat(n("Mother Occupation",a.mother_occupation),"\n").concat(n("Mother Qualification",a.mother_qualification),"\n").concat(n("Guardian Name",a.guardian_name),"\n").concat(n("Guardian Relation",a.guardian_relation),"\n").concat(n("Guardian Mobile",a.guardian_mobile),"\n").concat(n("Guardian Occupation",a.guardian_occupation),"\n").concat(n("Annual Income",a.annual_income),"\n").concat(l("Contact Information (\u0938\u0902\u092a\u0930\u094d\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)","\ud83d\udcde"),"\n").concat(n("Mobile (\u092e\u094b\u092c\u093e\u0907\u0932)",a.mobile),"\n").concat(n("Parent Phone",a.parent_phone),"\n").concat(n("Email",a.email),"\n").concat(n("Address (\u092a\u0924\u093e)",a.address),"\n").concat(n("Emergency Contact",a.emergency_contact),"\n").concat(n("Emergency Contact Name",a.emergency_contact_name),"\n").concat(l("Bank Details - Scholarship (\u092c\u0948\u0902\u0915 \u0935\u093f\u0935\u0930\u0923)","\ud83c\udfe6"),"\n").concat(n("Bank Name",a.bank_name),"\n").concat(n("Account No",a.bank_account_no),"\n").concat(n("IFSC Code",a.ifsc_code),"\n").concat(n("Branch",a.bank_branch),"\n").concat(l("Transport (\u092a\u0930\u093f\u0935\u0939\u0928)","\ud83d\ude8c"),"\n").concat(n("Transport Mode",a.transport_mode),"\n").concat(n("Bus Route",a.bus_route),"\n").concat(n("Bus Stop",a.bus_stop),"\n").concat(n("Pickup Point",a.pickup_point),"\n").concat(l("Medical (\u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e)","\ud83c\udfe5"),"\n").concat(n("Medical Conditions",a.medical_conditions),"\n").concat(n("Allergies",a.allergies),"\n").concat(l("Previous Education (\u092a\u0942\u0930\u094d\u0935 \u0936\u093f\u0915\u094d\u0937\u093e)","\ud83c\udf93"),"\n").concat(n("Previous School",a.previous_school),"\n").concat(n("Previous Class",a.previous_class),"\n").concat(n("Previous Percentage",a.previous_percentage),"\n").concat(n("TC Number",a.tc_number),'\n</table>\n<div style="text-align:center;margin-top:30px;color:#94a3b8;font-size:11px;">\nGenerated on ').concat((new Date).toLocaleDateString("en-IN")," | Schooltino ERP\n</div>\n</body></html>");s.document.write(r),s.document.close()},rs=e=>{ke(e),La({name:e.name,class_id:e.class_id,father_name:e.father_name,mother_name:e.mother_name,dob:e.dob,gender:e.gender,address:e.address,mobile:e.mobile,parent_phone:e.parent_phone||e.mobile||"",email:e.email||"",blood_group:e.blood_group||"",aadhar_no:e.aadhar_no||"",scholar_no:e.scholar_no||"",pen_number:e.pen_number||"",sssmid:e.sssmid||"",samagra_family_id:e.samagra_family_id||"",jan_aadhar_no:e.jan_aadhar_no||"",caste:e.caste||"",sub_caste:e.sub_caste||"",religion:e.religion||"",category:e.category||"",nationality:e.nationality||"Indian",mother_tongue:e.mother_tongue||"",birth_place:e.birth_place||"",identification_mark:e.identification_mark||"",rte_status:e.rte_status||!1,father_occupation:e.father_occupation||"",father_qualification:e.father_qualification||"",mother_occupation:e.mother_occupation||"",mother_qualification:e.mother_qualification||"",guardian_name:e.guardian_name||"",guardian_relation:e.guardian_relation||"",guardian_mobile:e.guardian_mobile||"",guardian_occupation:e.guardian_occupation||"",annual_income:e.annual_income||"",emergency_contact:e.emergency_contact||"",emergency_contact_name:e.emergency_contact_name||"",bank_name:e.bank_name||"",bank_account_no:e.bank_account_no||"",ifsc_code:e.ifsc_code||"",bank_branch:e.bank_branch||"",transport_mode:e.transport_mode||"",bus_route:e.bus_route||"",bus_stop:e.bus_stop||"",pickup_point:e.pickup_point||"",is_hosteler:e.is_hosteler||!1,hostel_room_no:e.hostel_room_no||"",medical_conditions:e.medical_conditions||"",allergies:e.allergies||"",previous_school:e.previous_school||"",previous_class:e.previous_class||"",previous_percentage:e.previous_percentage||"",tc_number:e.tc_number||"",admission_date:e.admission_date||(new Date).toISOString().split("T")[0]}),Oa("basic"),re(!0)},is=()=>{ke(null),Oa("basic"),La({name:"",class_id:"",dob:"",gender:"male",blood_group:"",admission_date:(new Date).toISOString().split("T")[0],aadhar_no:"",scholar_no:"",pen_number:"",sssmid:"",samagra_family_id:"",jan_aadhar_no:"",caste:"",sub_caste:"",religion:"",category:"",nationality:"Indian",mother_tongue:"",birth_place:"",identification_mark:"",rte_status:!1,father_name:"",father_occupation:"",father_qualification:"",mother_name:"",mother_occupation:"",mother_qualification:"",guardian_name:"",guardian_relation:"",guardian_mobile:"",guardian_occupation:"",annual_income:"",mobile:"",parent_phone:"",email:"",address:"",emergency_contact:"",emergency_contact_name:"",bank_name:"",bank_account_no:"",ifsc_code:"",bank_branch:"",transport_mode:"",bus_route:"",bus_stop:"",pickup_point:"",is_hosteler:!1,hostel_room_no:"",medical_conditions:"",allergies:"",previous_school:"",previous_class:"",previous_percentage:"",tc_number:""})},os=e=>{La(a=>(0,t.A)((0,t.A)({},a),{},{[e.target.name]:e.target.value}))},cs=(e,a)=>{navigator.clipboard.writeText(e),Te(a),setTimeout(()=>Te(null),2e3),ne.oR.success("Copied!")};return s?(0,$.jsxs)("div",{className:"space-y-6","data-testid":"students-page",children:[(0,$.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:a("students")}),(0,$.jsx)("p",{className:"text-slate-500 mt-1",children:a("student_admission")})]}),(0,$.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,$.jsx)(xe.A,{type:"student",schoolId:s,onImportComplete:Ka}),(0,$.jsxs)(o.$,{variant:"outline",onClick:()=>Oe(!0),className:"gap-2 text-green-600 border-green-200 hover:bg-green-50","data-testid":"promote-students-btn",children:[(0,$.jsx)(u.A,{className:"w-4 h-4"}),a("promote_students")]}),(0,$.jsxs)(o.$,{variant:"outline",onClick:async()=>{if(0!==M.length){Ee(!0),ne.oR.info("Generating ID cards...");try{const s=localStorage.getItem("token"),t=M.filter(e=>"active"===e.status),n=[];for(const c of t)try{var e;const a=await i.A.get(ge+"/id-card/generate/student/"+c.id,{headers:{Authorization:"Bearer "+s}});null!==(e=a.data)&&void 0!==e&&e.id_card&&n.push({card:a.data.id_card,school:a.data.school,photo:a.data.photo||null})}catch(a){console.error("Error fetching card for",c.name)}const l=window.open("","_blank");if(!l)return ne.oR.error("Popup blocked - please allow popups"),void Ee(!1);let r=n.map(e=>{const a=e.card,s=e.school,t=e.photo,n=null!==s&&void 0!==s&&s.logo_url?'<div class="watermark"><img src="'+s.logo_url+'" alt=""/></div>':"",l=null!==s&&void 0!==s&&s.logo_url?'<div class="header-logo"><img src="'+s.logo_url+'" alt=""/></div>':"",r=a.parent_phone||a.phone||"",i=t?'<div class="photo"><img src="'+t+'" style="width:100%;height:100%;object-fit:cover;border-radius:2mm;" /></div>':'<div class="photo"><span>Photo</span></div>';return'<div class="id-card">'+n+'<div class="content"><div class="header">'+l+'<div class="header-text"><div class="school-name">'+((null===s||void 0===s?void 0:s.name)||"School")+'</div><div class="card-type">STUDENT ID CARD</div></div></div><div class="body">'+i+'<div class="details"><div class="name">'+a.name+'</div><div class="detail-row"><span class="label">Class:</span><span class="value">'+(a.class||"")+'</span></div><div class="detail-row"><span class="label">Father:</span><span class="value">'+(a.father_name||"")+"</span></div>"+(a.blood_group?'<div class="detail-row"><span class="label">Blood:</span><span class="value">'+a.blood_group+"</span></div>":"")+(r?'<div class="contact">\ud83d\udcde Parent: '+r+"</div>":"")+'</div></div><div class="footer">Valid: '+(a.valid_until||(new Date).getFullYear()+1)+"</div></div></div>"}).join("");const o="<!DOCTYPE html><html><head><title>Bulk Student ID Cards</title><style>@page{size:A4;margin:10mm}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;display:flex;flex-wrap:wrap;gap:10mm;padding:10mm;-webkit-print-color-adjust:exact;print-color-adjust:exact}.id-card{width:85.6mm;height:54mm;background:linear-gradient(135deg,#1e40af 0%,#3b82f6 50%,#1e40af 100%);border-radius:4mm;overflow:hidden;position:relative;color:white;padding:3mm;page-break-inside:avoid}.watermark{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0.15;width:25mm;height:25mm}.watermark img{width:100%;height:100%;object-fit:contain}.content{position:relative;z-index:1;height:100%;display:flex;flex-direction:column}.header{display:flex;align-items:center;gap:2mm;padding-bottom:2mm;border-bottom:0.3mm solid rgba(255,255,255,0.3);margin-bottom:2mm}.header-logo{width:7mm;height:7mm;background:white;border-radius:50%;padding:0.5mm}.header-logo img{width:100%;height:100%;object-fit:contain;border-radius:50%}.header-text{flex:1;text-align:center}.school-name{font-size:8pt;font-weight:bold;text-transform:uppercase}.card-type{font-size:5pt;background:rgba(255,255,255,0.25);padding:0.5mm 2mm;border-radius:2mm;display:inline-block;margin-top:1mm}.body{display:flex;gap:2mm;flex:1}.photo{width:16mm;height:20mm;background:white;border-radius:2mm;display:flex;align-items:center;justify-content:center;color:#999;font-size:6pt;overflow:hidden;flex-shrink:0}.details{flex:1;font-size:6pt}.name{font-size:9pt;font-weight:bold;color:#fef08a;margin-bottom:1mm}.detail-row{margin-bottom:0.5mm}.label{opacity:0.8;width:12mm;display:inline-block}.value{font-weight:600}.contact{background:rgba(255,255,255,0.2);padding:1mm;border-radius:1mm;margin-top:1mm;font-size:5.5pt}.footer{font-size:4pt;opacity:0.8;text-align:right;margin-top:auto}</style></head><body>"+r+"<script>window.onload=function(){setTimeout(function(){window.print()},1000)}<\/script></body></html>";l.document.write(o),l.document.close(),ne.oR.success(n.length+" ID cards ready to print!")}catch(s){ne.oR.error("Error generating bulk ID cards")}finally{Ee(!1)}}else ne.oR.error("No students to print")},disabled:Je||0===M.length,className:"gap-2","data-testid":"bulk-print-btn",children:[Je?(0,$.jsx)(x.A,{className:"w-4 h-4 animate-spin"}):(0,$.jsx)(p.A,{className:"w-4 h-4"}),a("bulk_print_id_cards")]}),(0,$.jsxs)(m.lG,{open:le,onOpenChange:e=>{re(e),e||is()},children:[(0,$.jsx)(m.zM,{asChild:!0,children:(0,$.jsxs)(o.$,{className:"btn-primary","data-testid":"add-student-btn",children:[(0,$.jsx)(g.A,{className:"w-5 h-5 mr-2"}),a("new_admissions")]})}),(0,$.jsxs)(m.Cf,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[(0,$.jsxs)(m.c7,{children:[(0,$.jsx)(m.L3,{className:"text-xl",children:Ce?"".concat(a("edit")," ").concat(a("students")):"\ud83d\udcdd ".concat(a("new_admissions"))}),(0,$.jsx)(m.rr,{children:!Ce&&"Student ID \u0914\u0930 Password automatically generate \u0939\u094b\u0902\u0917\u0947\u0964 \u0938\u092d\u0940 * fields \u092d\u0930\u0928\u093e \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0964"})]}),(0,$.jsx)("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg mb-4 overflow-x-auto",children:[{id:"basic",label:"\ud83d\udccb Basic"},{id:"identity",label:"\ud83c\udd94 ID & Docs"},{id:"family",label:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family & Contact"},{id:"bank",label:"\ud83c\udfe6 Bank"},{id:"other",label:"\ud83d\ude8c Transport & Medical"},{id:"documents",label:"\ud83d\udcc4 Documents"}].map(e=>(0,$.jsx)("button",{type:"button",onClick:()=>Oa(e.id),className:"flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat(za===e.id?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:bg-white/50"),children:e.label},e.id))}),(0,$.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),De(!0);try{const e=(0,t.A)((0,t.A)({},Ma),{},{school_id:s}),n=localStorage.getItem("token"),l={Authorization:"Bearer ".concat(n)};if(Ce)await i.A.put("".concat(ge,"/students/").concat(Ce.id),e,{headers:l}),ne.oR.success(a("saved_successfully")),re(!1);else{const a=await i.A.post("".concat(ge,"/students/admit"),e,{headers:l}),t=a.data.student_id;if(va)try{const e=va.split(",")[1],a=atob(e),l=new Array(a.length);for(let s=0;s<a.length;s++)l[s]=a.charCodeAt(s);const r=new Uint8Array(l),o=new Blob([r],{type:"image/jpeg"}),c=new FormData;c.append("photo",o,"admission_photo.jpg"),c.append("student_id",t),c.append("school_id",s),c.append("photo_type","front"),await i.A.post("".concat(ge,"/face-recognition/upload-photo"),c,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)}}),ne.oR.success("Face photo uploaded for AI attendance! \ud83d\udcf8")}catch(r){console.error("Photo upload failed:",r),ne.oR.info("Student created but photo upload failed. Add later from profile.")}Ie({student_id:t,name:a.data.name,login_id:a.data.login_id,temporary_password:a.data.temporary_password,class_name:a.data.class_name,section:a.data.section}),re(!1),oe(!0)}is(),Na(null),Ka()}catch(o){var n,l;const e=null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.detail;ne.oR.error("string"===typeof e?e:a("something_went_wrong"))}finally{De(!1)}},className:"space-y-4",children:["basic"===za&&(0,$.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,$.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udccb Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)(d.J,{children:[a("student_name")," *"]}),(0,$.jsx)(c.p,{name:"name",value:Ma.name,onChange:os,required:!0,placeholder:"Student Full Name","data-testid":"student-name-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)(d.J,{children:[a("class_section")," *"]}),(0,$.jsxs)("select",{name:"class_id",value:Ma.class_id,onChange:os,required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"class-select",children:[(0,$.jsx)("option",{value:"",children:a("select_class")}),U.map(e=>(0,$.jsxs)("option",{value:e.id,children:[e.name,e.section&&"A"!==e.section?" - ".concat(e.section):""]},e.id))]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)(d.J,{children:[a("gender")," *"]}),(0,$.jsxs)("select",{name:"gender",value:Ma.gender,onChange:os,required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"gender-select",children:[(0,$.jsx)("option",{value:"male",children:a("male")}),(0,$.jsx)("option",{value:"female",children:a("female")}),(0,$.jsx)("option",{value:"other",children:a("other")})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)(d.J,{children:[a("dob")," *"]}),(0,$.jsx)(c.p,{name:"dob",type:"date",value:Ma.dob,onChange:os,required:!0,max:(new Date).toISOString().split("T")[0],"data-testid":"dob-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)(d.J,{children:[a("admission_date")," *"]}),(0,$.jsx)(c.p,{name:"admission_date",type:"date",value:Ma.admission_date,onChange:os,required:!0,max:(new Date).toISOString().split("T")[0],"data-testid":"admission-date-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:a("blood_group")}),(0,$.jsxs)("select",{name:"blood_group",value:Ma.blood_group,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),["A+","A-","B+","B-","O+","O-","AB+","AB-"].map(e=>(0,$.jsx)("option",{value:e,children:e},e))]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Birth Place (\u091c\u0928\u094d\u092e \u0938\u094d\u0925\u093e\u0928)"}),(0,$.jsx)(c.p,{name:"birth_place",value:Ma.birth_place,onChange:os,placeholder:"City/Village"})]}),(0,$.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,$.jsx)(d.J,{children:"Identification Mark (\u092a\u0939\u091a\u093e\u0928 \u091a\u093f\u0928\u094d\u0939)"}),(0,$.jsx)(c.p,{name:"identification_mark",value:Ma.identification_mark,onChange:os,placeholder:"Mole on right cheek, etc."})]})]})]}),"identity"===za&&(0,$.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,$.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83c\udd94 Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Scholar No. / Enrollment No."}),(0,$.jsx)(c.p,{name:"scholar_no",value:Ma.scholar_no,onChange:os,placeholder:"If existing student"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"PEN Number (CBSE)"}),(0,$.jsx)(c.p,{name:"pen_number",value:Ma.pen_number,onChange:os,placeholder:"Permanent Education Number"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Aadhar Number"}),(0,$.jsx)(c.p,{name:"aadhar_no",value:Ma.aadhar_no,onChange:os,placeholder:"12 digit Aadhar","data-testid":"aadhar-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"SSSMID / Samagra ID (MP)"}),(0,$.jsx)(c.p,{name:"sssmid",value:Ma.sssmid,onChange:os,placeholder:"\u0938\u092e\u0917\u094d\u0930 ID","data-testid":"samgra-id-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Samagra Family ID (MP)"}),(0,$.jsx)(c.p,{name:"samagra_family_id",value:Ma.samagra_family_id,onChange:os,placeholder:"\u0938\u092e\u0917\u094d\u0930 \u092a\u0930\u093f\u0935\u093e\u0930 ID"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Jan Aadhar / Bhamashah (RJ)"}),(0,$.jsx)(c.p,{name:"jan_aadhar_no",value:Ma.jan_aadhar_no,onChange:os,placeholder:"\u091c\u0928 \u0906\u0927\u093e\u0930"})]})]}),(0,$.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,$.jsx)("h4",{className:"font-medium text-slate-700 mb-3",children:"\ud83d\udcc2 Category Information (\u0936\u094d\u0930\u0947\u0923\u0940)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Caste (\u091c\u093e\u0924\u093f)"}),(0,$.jsxs)("select",{name:"caste",value:Ma.caste,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select Caste"}),(0,$.jsx)("option",{value:"General",children:"General (\u0938\u093e\u092e\u093e\u0928\u094d\u092f)"}),(0,$.jsx)("option",{value:"OBC",children:"OBC (\u0905\u0928\u094d\u092f \u092a\u093f\u091b\u0921\u093c\u093e \u0935\u0930\u094d\u0917)"}),(0,$.jsx)("option",{value:"SC",children:"SC (\u0905\u0928\u0941\u0938\u0942\u091a\u093f\u0924 \u091c\u093e\u0924\u093f)"}),(0,$.jsx)("option",{value:"ST",children:"ST (\u0905\u0928\u0941\u0938\u0942\u091a\u093f\u0924 \u091c\u0928\u091c\u093e\u0924\u093f)"}),(0,$.jsx)("option",{value:"EWS",children:"EWS (\u0906\u0930\u094d\u0925\u093f\u0915 \u0915\u092e\u091c\u094b\u0930)"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Sub-Caste (\u0909\u092a \u091c\u093e\u0924\u093f)"}),(0,$.jsx)(c.p,{name:"sub_caste",value:Ma.sub_caste,onChange:os,placeholder:"Sub-caste"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Religion (\u0927\u0930\u094d\u092e)"}),(0,$.jsxs)("select",{name:"religion",value:Ma.religion,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select Religion"}),(0,$.jsx)("option",{value:"Hindu",children:"Hindu (\u0939\u093f\u0928\u094d\u0926\u0942)"}),(0,$.jsx)("option",{value:"Muslim",children:"Muslim (\u092e\u0941\u0938\u094d\u0932\u093f\u092e)"}),(0,$.jsx)("option",{value:"Christian",children:"Christian (\u0908\u0938\u093e\u0908)"}),(0,$.jsx)("option",{value:"Sikh",children:"Sikh (\u0938\u093f\u0916)"}),(0,$.jsx)("option",{value:"Buddhist",children:"Buddhist (\u092c\u094c\u0926\u094d\u0927)"}),(0,$.jsx)("option",{value:"Jain",children:"Jain (\u091c\u0948\u0928)"}),(0,$.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Category (\u0935\u0930\u094d\u0917)"}),(0,$.jsxs)("select",{name:"category",value:Ma.category,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"APL",children:"APL (\u0917\u0930\u0940\u092c\u0940 \u0930\u0947\u0916\u093e \u0938\u0947 \u090a\u092a\u0930)"}),(0,$.jsx)("option",{value:"BPL",children:"BPL (\u0917\u0930\u0940\u092c\u0940 \u0930\u0947\u0916\u093e \u0938\u0947 \u0928\u0940\u091a\u0947)"}),(0,$.jsx)("option",{value:"EWS",children:"EWS (\u0906\u0930\u094d\u0925\u093f\u0915 \u0915\u092e\u091c\u094b\u0930)"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Mother Tongue (\u092e\u093e\u0924\u0943\u092d\u093e\u0937\u093e)"}),(0,$.jsxs)("select",{name:"mother_tongue",value:Ma.mother_tongue,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"Hindi",children:"Hindi (\u0939\u093f\u0928\u094d\u0926\u0940)"}),(0,$.jsx)("option",{value:"English",children:"English (\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940)"}),(0,$.jsx)("option",{value:"Marathi",children:"Marathi (\u092e\u0930\u093e\u0920\u0940)"}),(0,$.jsx)("option",{value:"Gujarati",children:"Gujarati (\u0917\u0941\u091c\u0930\u093e\u0924\u0940)"}),(0,$.jsx)("option",{value:"Punjabi",children:"Punjabi (\u092a\u0902\u091c\u093e\u092c\u0940)"}),(0,$.jsx)("option",{value:"Bengali",children:"Bengali (\u092c\u0902\u0917\u093e\u0932\u0940)"}),(0,$.jsx)("option",{value:"Urdu",children:"Urdu (\u0909\u0930\u094d\u0926\u0942)"}),(0,$.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Nationality (\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f\u0924\u093e)"}),(0,$.jsx)(c.p,{name:"nationality",value:Ma.nationality,onChange:os,placeholder:"Indian"})]}),(0,$.jsxs)("div",{className:"flex items-center gap-2 col-span-2",children:[(0,$.jsx)("input",{type:"checkbox",id:"rte_status",name:"rte_status",checked:Ma.rte_status,onChange:e=>La((0,t.A)((0,t.A)({},Ma),{},{rte_status:e.target.checked})),className:"w-4 h-4"}),(0,$.jsx)(d.J,{htmlFor:"rte_status",children:"RTE Admission (\u0936\u093f\u0915\u094d\u0937\u093e \u0915\u093e \u0905\u0927\u093f\u0915\u093e\u0930)"})]})]})]})]}),"family"===za&&(0,$.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,$.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family Information (\u092a\u0930\u093f\u0935\u093e\u0930 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,$.jsx)("h4",{className:"font-medium text-blue-800 mb-3",children:"\ud83d\udc68 Father Details (\u092a\u093f\u0924\u093e \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)(d.J,{children:[a("father_name")," *"]}),(0,$.jsx)(c.p,{name:"father_name",value:Ma.father_name,onChange:os,required:!0,placeholder:"Father Full Name","data-testid":"father-name-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Occupation (\u0935\u094d\u092f\u0935\u0938\u093e\u092f)"}),(0,$.jsxs)("select",{name:"father_occupation",value:Ma.father_occupation,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"Government Job",children:"Government Job (\u0938\u0930\u0915\u093e\u0930\u0940 \u0928\u094c\u0915\u0930\u0940)"}),(0,$.jsx)("option",{value:"Private Job",children:"Private Job (\u092a\u094d\u0930\u093e\u0907\u0935\u0947\u091f \u0928\u094c\u0915\u0930\u0940)"}),(0,$.jsx)("option",{value:"Business",children:"Business (\u0935\u094d\u092f\u093e\u092a\u093e\u0930)"}),(0,$.jsx)("option",{value:"Farmer",children:"Farmer (\u0915\u093f\u0938\u093e\u0928)"}),(0,$.jsx)("option",{value:"Daily Wage",children:"Daily Wage (\u0926\u0948\u0928\u093f\u0915 \u092e\u091c\u0926\u0942\u0930)"}),(0,$.jsx)("option",{value:"Self Employed",children:"Self Employed (\u0938\u094d\u0935\u0930\u094b\u091c\u0917\u093e\u0930)"}),(0,$.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Qualification (\u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,$.jsxs)("select",{name:"father_qualification",value:Ma.father_qualification,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"Below 10th",children:"Below 10th"}),(0,$.jsx)("option",{value:"10th Pass",children:"10th Pass"}),(0,$.jsx)("option",{value:"12th Pass",children:"12th Pass"}),(0,$.jsx)("option",{value:"Graduate",children:"Graduate"}),(0,$.jsx)("option",{value:"Post Graduate",children:"Post Graduate"}),(0,$.jsx)("option",{value:"Professional",children:"Professional Degree"}),(0,$.jsx)("option",{value:"Illiterate",children:"Illiterate (\u0905\u0936\u093f\u0915\u094d\u0937\u093f\u0924)"})]})]})]})]}),(0,$.jsxs)("div",{className:"p-4 bg-pink-50 rounded-lg border border-pink-200",children:[(0,$.jsx)("h4",{className:"font-medium text-pink-800 mb-3",children:"\ud83d\udc69 Mother Details (\u092e\u093e\u0924\u093e \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)(d.J,{children:[a("mother_name")," *"]}),(0,$.jsx)(c.p,{name:"mother_name",value:Ma.mother_name,onChange:os,required:!0,placeholder:"Mother Full Name","data-testid":"mother-name-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Occupation (\u0935\u094d\u092f\u0935\u0938\u093e\u092f)"}),(0,$.jsxs)("select",{name:"mother_occupation",value:Ma.mother_occupation,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"Housewife",children:"Housewife (\u0917\u0943\u0939\u093f\u0923\u0940)"}),(0,$.jsx)("option",{value:"Government Job",children:"Government Job"}),(0,$.jsx)("option",{value:"Private Job",children:"Private Job"}),(0,$.jsx)("option",{value:"Business",children:"Business"}),(0,$.jsx)("option",{value:"Teacher",children:"Teacher (\u0936\u093f\u0915\u094d\u0937\u0915)"}),(0,$.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Qualification (\u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,$.jsxs)("select",{name:"mother_qualification",value:Ma.mother_qualification,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"Below 10th",children:"Below 10th"}),(0,$.jsx)("option",{value:"10th Pass",children:"10th Pass"}),(0,$.jsx)("option",{value:"12th Pass",children:"12th Pass"}),(0,$.jsx)("option",{value:"Graduate",children:"Graduate"}),(0,$.jsx)("option",{value:"Post Graduate",children:"Post Graduate"}),(0,$.jsx)("option",{value:"Illiterate",children:"Illiterate"})]})]})]})]}),(0,$.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,$.jsx)("h4",{className:"font-medium text-amber-800 mb-3",children:"\ud83e\uddd3 Guardian Details (if different from parents)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Guardian Name"}),(0,$.jsx)(c.p,{name:"guardian_name",value:Ma.guardian_name,onChange:os,placeholder:"Guardian's Full Name"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Relation (\u0930\u093f\u0936\u094d\u0924\u093e)"}),(0,$.jsxs)("select",{name:"guardian_relation",value:Ma.guardian_relation,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"Grandfather",children:"Grandfather (\u0926\u093e\u0926\u093e/\u0928\u093e\u0928\u093e)"}),(0,$.jsx)("option",{value:"Grandmother",children:"Grandmother (\u0926\u093e\u0926\u0940/\u0928\u093e\u0928\u0940)"}),(0,$.jsx)("option",{value:"Uncle",children:"Uncle (\u091a\u093e\u091a\u093e/\u092e\u093e\u092e\u093e)"}),(0,$.jsx)("option",{value:"Aunt",children:"Aunt (\u091a\u093e\u091a\u0940/\u092e\u093e\u092e\u0940)"}),(0,$.jsx)("option",{value:"Brother",children:"Brother (\u092d\u093e\u0908)"}),(0,$.jsx)("option",{value:"Sister",children:"Sister (\u092c\u0939\u0928)"}),(0,$.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Guardian Mobile"}),(0,$.jsx)(c.p,{name:"guardian_mobile",value:Ma.guardian_mobile,onChange:os,placeholder:"10 digit mobile"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Guardian Occupation"}),(0,$.jsx)(c.p,{name:"guardian_occupation",value:Ma.guardian_occupation,onChange:os,placeholder:"\u0935\u094d\u092f\u0935\u0938\u093e\u092f"})]})]})]}),(0,$.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Annual Family Income (\u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u0906\u092f)"}),(0,$.jsxs)("select",{name:"annual_income",value:Ma.annual_income,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"Below 1 Lakh",children:"Below \u20b91 Lakh"}),(0,$.jsx)("option",{value:"1-2.5 Lakh",children:"\u20b91 - 2.5 Lakh"}),(0,$.jsx)("option",{value:"2.5-5 Lakh",children:"\u20b92.5 - 5 Lakh"}),(0,$.jsx)("option",{value:"5-10 Lakh",children:"\u20b95 - 10 Lakh"}),(0,$.jsx)("option",{value:"Above 10 Lakh",children:"Above \u20b910 Lakh"})]})]})}),(0,$.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200 mt-4",children:[(0,$.jsx)("h4",{className:"font-medium text-green-800 mb-3",children:"\ud83d\udcde Contact Information (\u0938\u0902\u092a\u0930\u094d\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Primary Mobile * (for login)"}),(0,$.jsx)(c.p,{name:"mobile",value:Ma.mobile,onChange:os,required:!0,placeholder:"Parent's mobile for OTP","data-testid":"mobile-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Secondary Phone (ID Card)"}),(0,$.jsx)(c.p,{name:"parent_phone",value:Ma.parent_phone,onChange:os,placeholder:"Alternate number","data-testid":"parent-phone-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Email"}),(0,$.jsx)(c.p,{name:"email",type:"email",value:Ma.email,onChange:os,placeholder:"Optional"})]}),(0,$.jsxs)("div",{className:"space-y-2 col-span-2 md:col-span-3",children:[(0,$.jsxs)(d.J,{children:[a("address")," *"]}),(0,$.jsx)(c.p,{name:"address",value:Ma.address,onChange:os,required:!0,placeholder:"Full Address","data-testid":"address-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Emergency Contact Name"}),(0,$.jsx)(c.p,{name:"emergency_contact_name",value:Ma.emergency_contact_name,onChange:os,placeholder:"Emergency person name"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Emergency Contact Number"}),(0,$.jsx)(c.p,{name:"emergency_contact",value:Ma.emergency_contact,onChange:os,placeholder:"Emergency mobile"})]})]})]})]}),"bank"===za&&(0,$.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,$.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83c\udfe6 Bank Details (\u091b\u093e\u0924\u094d\u0930\u0935\u0943\u0924\u094d\u0924\u093f \u0915\u0947 \u0932\u093f\u090f)"}),(0,$.jsx)("p",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"\ud83d\udca1 Scholarship \u0914\u0930 government benefits \u0915\u0947 \u0932\u093f\u090f bank details \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0902"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Bank Name"}),(0,$.jsx)(c.p,{name:"bank_name",value:Ma.bank_name,onChange:os,placeholder:"State Bank of India"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Account Number"}),(0,$.jsx)(c.p,{name:"bank_account_no",value:Ma.bank_account_no,onChange:os,placeholder:"Account Number"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"IFSC Code"}),(0,$.jsx)(c.p,{name:"ifsc_code",value:Ma.ifsc_code,onChange:os,placeholder:"SBIN0001234"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Branch Name"}),(0,$.jsx)(c.p,{name:"bank_branch",value:Ma.bank_branch,onChange:os,placeholder:"Branch Name"})]})]})]}),"other"===za&&(0,$.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,$.jsxs)("div",{className:"p-4 bg-teal-50 rounded-lg border border-teal-200",children:[(0,$.jsx)("h4",{className:"font-medium text-teal-800 mb-3",children:"\ud83d\ude8c Transport Details (\u092a\u0930\u093f\u0935\u0939\u0928)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Transport Mode"}),(0,$.jsxs)("select",{name:"transport_mode",value:Ma.transport_mode,onChange:os,className:"w-full h-10 rounded-lg border border-slate-200 px-3 text-sm",children:[(0,$.jsx)("option",{value:"",children:"Select"}),(0,$.jsx)("option",{value:"School Bus",children:"School Bus"}),(0,$.jsx)("option",{value:"Private Vehicle",children:"Private Vehicle"}),(0,$.jsx)("option",{value:"Walking",children:"Walking"}),(0,$.jsx)("option",{value:"Bicycle",children:"Bicycle"}),(0,$.jsx)("option",{value:"Auto/Rickshaw",children:"Auto/Rickshaw"})]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Bus Route"}),(0,$.jsx)(c.p,{name:"bus_route",value:Ma.bus_route,onChange:os,placeholder:"Route No.",className:"h-10"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Bus Stop"}),(0,$.jsx)(c.p,{name:"bus_stop",value:Ma.bus_stop,onChange:os,placeholder:"Stop Name",className:"h-10"})]}),(0,$.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,$.jsx)("input",{type:"checkbox",id:"is_hosteler",name:"is_hosteler",checked:Ma.is_hosteler,onChange:e=>La((0,t.A)((0,t.A)({},Ma),{},{is_hosteler:e.target.checked})),className:"w-4 h-4"}),(0,$.jsx)(d.J,{htmlFor:"is_hosteler",children:"Hostel Student"})]})]})]}),(0,$.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,$.jsx)("h4",{className:"font-medium text-red-800 mb-3",children:"\ud83c\udfe5 Medical Information"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Medical Conditions (\u092c\u0940\u092e\u093e\u0930\u093f\u092f\u093e\u0901)"}),(0,$.jsx)(c.p,{name:"medical_conditions",value:Ma.medical_conditions,onChange:os,placeholder:"Asthma, Diabetes, etc."})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Allergies (\u090f\u0932\u0930\u094d\u091c\u0940)"}),(0,$.jsx)(c.p,{name:"allergies",value:Ma.allergies,onChange:os,placeholder:"Food/medicine allergies"})]})]})]}),(0,$.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,$.jsx)("h4",{className:"font-medium text-purple-800 mb-3",children:"\ud83d\udcda Previous Education (\u092a\u0942\u0930\u094d\u0935 \u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,$.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,$.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,$.jsx)(d.J,{children:"Previous School"}),(0,$.jsx)(c.p,{name:"previous_school",value:Ma.previous_school,onChange:os,placeholder:"School name","data-testid":"prev-school-input"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Previous Class"}),(0,$.jsx)(c.p,{name:"previous_class",value:Ma.previous_class,onChange:os,placeholder:"Last class"})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"TC Number"}),(0,$.jsx)(c.p,{name:"tc_number",value:Ma.tc_number,onChange:os,placeholder:"TC/LC No."})]})]})]})]}),"documents"===za&&(0,$.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,$.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udcc4 Documents Upload (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0905\u092a\u0932\u094b\u0921)"}),(0,$.jsx)("p",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"\ud83d\udca1 Scholarship \u0914\u0930 government benefits \u0915\u0947 \u0932\u093f\u090f documents \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0902\u0964 Admission \u0915\u0947 \u092c\u093e\u0926 \u092d\u0940 upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"}),Ce?(0,$.jsx)(pe.Ay,{personId:Ce.id,personType:"student",schoolId:s,existingDocuments:[]}):(0,$.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[(0,$.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc1"}),(0,$.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Documents \u092c\u093e\u0926 \u092e\u0947\u0902 Upload \u0915\u0930\u0947\u0902"}),(0,$.jsx)("p",{className:"text-sm text-blue-600",children:"Student admission complete \u0939\u094b\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 Edit \u0915\u0930\u0915\u0947 documents upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),(0,$.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,$.jsx)("h4",{className:"font-medium text-slate-700 mb-3",children:"\ud83d\udccb Required Documents Checklist:"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[{icon:"\ud83d\udcc4",name:"Birth Certificate (\u091c\u0928\u094d\u092e \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83c\udd94",name:"Aadhar Card (\u0906\u0927\u093e\u0930 \u0915\u093e\u0930\u094d\u0921)"},{icon:"\ud83d\udccb",name:"Transfer Certificate (TC)"},{icon:"\ud83d\udcca",name:"Previous Marksheet"},{icon:"\ud83d\udcdc",name:"Caste Certificate (\u091c\u093e\u0924\u093f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83d\udcb0",name:"Income Certificate (\u0906\u092f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83c\udfe0",name:"Domicile Certificate"},{icon:"\ud83d\udcf7",name:"Passport Photo"},{icon:"\ud83d\udc68",name:"Father Aadhar (\u092a\u093f\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)"},{icon:"\ud83d\udc69",name:"Mother Aadhar (\u092e\u093e\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)"},{icon:"\ud83c\udfab",name:"BPL Card (\u092f\u0926\u093f \u0932\u093e\u0917\u0942 \u0939\u094b)"},{icon:"\ud83c\udfe6",name:"Bank Passbook (\u091b\u093e\u0924\u094d\u0930\u0935\u0943\u0924\u094d\u0924\u093f \u0915\u0947 \u0932\u093f\u090f)"}].map((e,a)=>(0,$.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 bg-slate-50 rounded",children:[(0,$.jsx)("span",{children:e.icon}),(0,$.jsx)("span",{className:"text-slate-600",children:e.name})]},a))})]})]}),(0,$.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[(0,$.jsxs)(d.J,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[(0,$.jsx)(b.A,{className:"w-5 h-5 text-blue-600"}),"Student Photo (\u091b\u093e\u0924\u094d\u0930 \u092b\u094b\u091f\u094b) ",Ce?"- Update Photo":"- Optional"]}),!va&&!_a&&(0,$.jsxs)("div",{className:"flex gap-3",children:[(0,$.jsx)(o.$,{type:"button",variant:"outline",className:"flex-1 border-blue-200 text-blue-700 hover:bg-blue-50 h-20",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:640,height:480}});Aa(e),ya(!0),Ja.current&&(Ja.current.srcObject=e)}catch(e){ne.oR.error("Camera access denied. Please allow camera permission.")}},"data-testid":"open-camera-btn",children:(0,$.jsxs)("div",{className:"flex flex-col items-center",children:[(0,$.jsx)(b.A,{className:"w-6 h-6 mb-1"}),(0,$.jsx)("span",{children:"\ud83d\udcf7 Camera \u0938\u0947 Capture"})]})}),(0,$.jsxs)("label",{className:"flex-1",children:[(0,$.jsxs)("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-slate-300 rounded-lg h-20 cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-all",children:[(0,$.jsx)(f.A,{className:"w-6 h-6 text-slate-400 mb-1"}),(0,$.jsx)("span",{className:"text-sm text-slate-600",children:"\ud83d\udcc1 Photo Upload"})]}),(0,$.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{const a=e.target.files[0];if(a){if(a.size>5242880)return void ne.oR.error("File size should be less than 5MB");const e=new FileReader;e.onload=e=>{Na(e.target.result),ne.oR.success("Photo uploaded! \ud83d\udcf8")},e.readAsDataURL(a)}},"data-testid":"photo-upload-input"})]})]}),_a&&(0,$.jsxs)("div",{className:"relative bg-black rounded-xl overflow-hidden",children:[(0,$.jsx)("video",{ref:Ja,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-64 object-cover"}),(0,$.jsx)("canvas",{ref:Ea,className:"hidden"}),(0,$.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-3",children:[(0,$.jsxs)(o.$,{type:"button",onClick:()=>{if(Ja.current&&Ea.current){const e=Ja.current,a=Ea.current;a.width=e.videoWidth,a.height=e.videoHeight;a.getContext("2d").drawImage(e,0,0);const s=a.toDataURL("image/jpeg",.8);Na(s),as(),ne.oR.success("Photo captured! \ud83d\udcf8")}},className:"bg-white text-blue-600 hover:bg-blue-50","data-testid":"capture-btn",children:[(0,$.jsx)(b.A,{className:"w-5 h-5 mr-2"}),a("capture")]}),(0,$.jsxs)(o.$,{type:"button",variant:"outline",onClick:as,className:"bg-white/80 text-red-600 border-red-300",children:[(0,$.jsx)(j.A,{className:"w-5 h-5 mr-2"}),a("cancel")]})]})]}),va&&(0,$.jsxs)("div",{className:"relative",children:[(0,$.jsx)("img",{src:va,alt:"Captured",className:"w-full h-48 object-cover rounded-xl border-2 border-emerald-500"}),(0,$.jsx)("div",{className:"absolute top-2 right-2 flex gap-2",children:(0,$.jsxs)(o.$,{type:"button",size:"sm",variant:"outline",className:"bg-white/90 text-red-600 border-red-300 hover:bg-red-50",onClick:()=>{Na(null)},children:[(0,$.jsx)(j.A,{className:"w-4 h-4 mr-1"}),a("remove")]})}),(0,$.jsxs)("div",{className:"absolute bottom-2 left-2 bg-emerald-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[(0,$.jsx)(v.A,{className:"w-4 h-4"}),"Photo Ready"]})]}),(0,$.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"* Photo optional hai\u0964 \u092c\u093e\u0926 \u092e\u0947\u0902 student profile \u0938\u0947 \u092d\u0940 add \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),!Ce&&(0,$.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[(0,$.jsxs)(d.J,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[(0,$.jsx)(N.A,{className:"w-5 h-5 text-emerald-600"}),"Biometric Enrollment (Fingerprint) - Optional"]}),(0,$.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[(0,$.jsxs)("div",{className:"flex items-center gap-4",children:[(0,$.jsx)("div",{className:"w-16 h-16 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,$.jsx)(N.A,{className:"w-8 h-8 text-emerald-600"})}),(0,$.jsxs)("div",{className:"flex-1",children:[(0,$.jsx)("p",{className:"text-sm text-slate-700 font-medium",children:"Fingerprint Registration"}),(0,$.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Biometric device \u0938\u0947 fingerprint register \u0915\u0930\u0947\u0902\u0964 Student admission \u0915\u0947 \u092c\u093e\u0926 Biometric section \u0938\u0947 \u092d\u0940 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]})]}),(0,$.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,$.jsx)("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,$.jsx)("div",{className:"h-full w-0 bg-emerald-500 rounded-full"})}),(0,$.jsx)("span",{className:"text-xs text-slate-400",children:"Not enrolled"})]}),(0,$.jsxs)("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[(0,$.jsx)(_.A,{className:"w-3 h-3"}),"Biometric device connect \u0939\u094b\u0928\u0947 \u092a\u0930 \u0939\u0940 \u0915\u093e\u092e \u0915\u0930\u0947\u0917\u093e"]})]}),(0,$.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"* Biometric optional \u0939\u0948\u0964 \u092c\u093e\u0926 \u092e\u0947\u0902 Biometric section \u0938\u0947 enroll \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),(0,$.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,$.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>re(!1),children:a("cancel")}),(0,$.jsxs)(o.$,{type:"submit",className:"btn-primary",disabled:Be,"data-testid":"save-student-btn",children:[Be?(0,$.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):null,a(Ce?"save":"admit_student")]})]})]})]})]})]})]}),(0,$.jsx)(m.lG,{open:ie,onOpenChange:oe,children:(0,$.jsxs)(m.Cf,{className:"max-w-md",children:[(0,$.jsxs)(m.c7,{children:[(0,$.jsxs)(m.L3,{className:"text-emerald-600 flex items-center gap-2",children:[(0,$.jsx)(v.A,{className:"w-6 h-6"}),"Admission Successful!"]}),(0,$.jsx)(m.rr,{children:"Student \u0915\u0947 login credentials \u0928\u0940\u091a\u0947 \u0926\u093f\u090f \u0917\u090f \u0939\u0948\u0902\u0964 \u0907\u0928\u094d\u0939\u0947\u0902 Parent \u0915\u094b share \u0915\u0930\u0947\u0902\u0964"})]}),Re&&(0,$.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,$.jsxs)("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:[(0,$.jsx)("p",{className:"text-lg font-semibold text-emerald-800",children:Re.name}),(0,$.jsxs)("p",{className:"text-sm text-emerald-600",children:[Re.class_name," - ",Re.section]})]}),(0,$.jsxs)("div",{className:"space-y-3",children:[(0,$.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:"Student ID / Login ID"}),(0,$.jsx)("p",{className:"font-mono font-bold text-lg",children:Re.student_id})]}),(0,$.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>cs(Re.student_id,"id"),children:"id"===Fe?(0,$.jsx)(v.A,{className:"w-4 h-4 text-emerald-500"}):(0,$.jsx)(y.A,{className:"w-4 h-4"})})]}),(0,$.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("p",{className:"text-xs text-amber-600",children:"Temporary Password"}),(0,$.jsx)("p",{className:"font-mono font-bold text-lg",children:Re.temporary_password})]}),(0,$.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>cs(Re.temporary_password,"pass"),children:"pass"===Fe?(0,$.jsx)(v.A,{className:"w-4 h-4 text-emerald-500"}):(0,$.jsx)(y.A,{className:"w-4 h-4"})})]})]}),(0,$.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[(0,$.jsx)("p",{className:"font-medium",children:"\u26a0\ufe0f Important:"}),(0,$.jsxs)("ul",{className:"list-disc ml-4 mt-1 space-y-1",children:[(0,$.jsx)("li",{children:"\u092f\u0939 password \u0938\u093f\u0930\u094d\u092b \u090f\u0915 \u092c\u093e\u0930 \u0926\u093f\u0916\u0947\u0917\u093e"}),(0,$.jsx)("li",{children:"First login \u092a\u0930 password change \u0915\u0930\u0928\u093e mandatory \u0939\u0948"}),(0,$.jsx)("li",{children:"Parent \u0915\u094b Mobile + DOB \u0938\u0947 \u092d\u0940 login \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902"})]})]}),(0,$.jsxs)(o.$,{className:"w-full btn-primary",onClick:()=>{const e="Student ID: ".concat(Re.student_id,"\nPassword: ").concat(Re.temporary_password);cs(e,"all")},children:[(0,$.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Copy All Credentials"]}),(0,$.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[(0,$.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["\ud83d\udcf8 ",(0,$.jsx)("strong",{children:"Face Enrollment"})," - AI attendance ke liye photos add karein (Optional)"]}),(0,$.jsxs)("div",{className:"flex gap-2",children:[(0,$.jsx)(o.$,{variant:"outline",className:"flex-1 border-indigo-200 text-indigo-700 hover:bg-indigo-50",onClick:()=>{oe(!1),be(!0)},"data-testid":"capture-photos-btn",children:"\ud83d\udcf7 Capture Photos Now"}),(0,$.jsx)(o.$,{variant:"ghost",className:"text-slate-500",onClick:()=>{ne.oR.info("Face enrollment skipped. Complete from student profile later."),oe(!1)},"data-testid":"skip-face-btn",children:"Skip for Now"})]})]}),(0,$.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[(0,$.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["\ud83d\udc46 ",(0,$.jsx)("strong",{children:"Biometric Enrollment"})," - Fingerprint registration (Optional)"]}),(0,$.jsxs)("div",{className:"flex gap-2",children:[(0,$.jsx)(o.$,{variant:"outline",className:"flex-1 border-emerald-200 text-emerald-700 hover:bg-emerald-50",onClick:()=>{ne.oR.info("Biometric device se connect karein aur fingerprint register karein."),window.location.href="/app/biometric?student_id=".concat(null===Re||void 0===Re?void 0:Re.student_id,"&name=").concat(encodeURIComponent((null===Re||void 0===Re?void 0:Re.name)||""))},"data-testid":"biometric-enroll-btn",children:"\ud83d\udc46 Enroll Biometric Now"}),(0,$.jsx)(o.$,{variant:"ghost",className:"text-slate-500",onClick:()=>{ne.oR.info("Biometric enrollment skipped. Complete later from Biometric section.")},"data-testid":"skip-biometric-btn",children:"Skip"})]})]})]})]})}),(0,$.jsx)(m.lG,{open:ce,onOpenChange:de,children:(0,$.jsxs)(m.Cf,{className:"max-w-md",children:[(0,$.jsxs)(m.c7,{children:[(0,$.jsxs)(m.L3,{className:"flex items-center gap-2",children:[(0,$.jsx)(_.A,{className:"w-5 h-5 text-amber-500"}),"Suspend Student"]}),(0,$.jsxs)(m.rr,{children:[null===Se||void 0===Se?void 0:Se.name," \u0915\u094b temporarily suspend \u0915\u0930\u0947\u0902"]})]}),(0,$.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),Se){De(!0);try{const e=localStorage.getItem("token");await i.A.post("".concat(ge,"/students/").concat(Se.id,"/suspend?reason=").concat(Za.reason,"&details=").concat(Za.details),{},{headers:{Authorization:"Bearer ".concat(e)}}),ne.oR.success("Student suspended"),de(!1),Ya({reason:"fees_pending",details:""}),Pe(null),Ka()}catch(a){ne.oR.error("Failed to suspend student")}finally{De(!1)}}},className:"space-y-4 mt-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Reason *"}),(0,$.jsx)("select",{value:Za.reason,onChange:e=>Ya(a=>(0,t.A)((0,t.A)({},a),{},{reason:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",required:!0,children:Object.entries(Xa).map(e=>{let[a,s]=e;return(0,$.jsx)("option",{value:a,children:s},a)})})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(d.J,{children:"Details"}),(0,$.jsx)(c.p,{value:Za.details,onChange:e=>Ya(a=>(0,t.A)((0,t.A)({},a),{},{details:e.target.value})),placeholder:"Additional details..."})]}),(0,$.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,$.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>de(!1),children:a("cancel")}),(0,$.jsxs)(o.$,{type:"submit",className:"bg-amber-600 hover:bg-amber-700",disabled:Be,children:[Be?(0,$.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):null,a("suspend")," ",a("students")]})]})]})]})}),(0,$.jsxs)("div",{className:"flex gap-4",style:{height:"calc(100vh - 220px)",minHeight:"500px"},children:[(0,$.jsxs)("div",{className:"w-2/5 flex flex-col bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,$.jsxs)("div",{className:"p-3 border-b border-gray-100 space-y-2",children:[(0,$.jsxs)("div",{className:"relative",children:[(0,$.jsx)(w.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,$.jsx)(c.p,{placeholder:a("search"),value:V,onChange:e=>Z(e.target.value),className:"pl-9 h-9 text-sm","data-testid":"search-input"})]}),(0,$.jsxs)("select",{value:Y,onChange:e=>X(e.target.value),className:"w-full h-9 rounded-lg border border-slate-200 px-3 text-sm","data-testid":"filter-class",children:[(0,$.jsx)("option",{value:"",children:a("all_classes")}),U.map(e=>(0,$.jsxs)("option",{value:e.id,children:[e.name,e.section&&"A"!==e.section?" - ".concat(e.section):""]},e.id))]})]}),(0,$.jsxs)(h.tU,{defaultValue:"active",className:"flex-1 flex flex-col overflow-hidden",children:[(0,$.jsxs)(h.j7,{className:"mx-3 mt-2 shrink-0",children:[(0,$.jsxs)(h.Xi,{value:"active",className:"text-xs gap-1",children:[(0,$.jsx)(A.A,{className:"w-3.5 h-3.5"}),a("active")," (",M.length,")"]}),(0,$.jsxs)(h.Xi,{value:"suspended",className:"text-xs gap-1",children:[(0,$.jsx)(C.A,{className:"w-3.5 h-3.5"}),a("suspended")," (",G.length,")"]})]}),(0,$.jsx)(h.av,{value:"active",className:"flex-1 overflow-y-auto p-2 mt-0",children:W?(0,$.jsx)("div",{className:"flex justify-center py-10",children:(0,$.jsx)(x.A,{className:"w-8 h-8 animate-spin text-blue-500"})}):0===M.length?(0,$.jsxs)("div",{className:"text-center py-10",children:[(0,$.jsx)(A.A,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),(0,$.jsx)("p",{className:"text-sm text-slate-400",children:a("no_data")})]}):(0,$.jsx)("div",{className:"space-y-1",children:M.map(e=>(0,$.jsxs)("div",{onClick:()=>ja(e),className:"flex items-center gap-3 p-2.5 rounded-xl cursor-pointer transition-all group ".concat((null===fa||void 0===fa?void 0:fa.id)===e.id?"bg-blue-50 border-2 border-blue-400 shadow-sm":"border-2 border-transparent hover:bg-slate-50 hover:border-blue-200"),"data-testid":"student-row-".concat(e.id),children:[(0,$.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-100 border border-slate-200 flex items-center justify-center overflow-hidden flex-shrink-0",children:e.photo_url?(0,$.jsx)("img",{src:e.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,$.jsx)(A.A,{className:"w-5 h-5 text-slate-400"})}),(0,$.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$.jsx)("p",{className:"font-medium text-sm text-slate-900 truncate",children:e.name}),(0,$.jsxs)("p",{className:"text-xs text-slate-500 truncate",children:[e.class_name,e.section&&"A"!==e.section?" - ".concat(e.section):""," ",e.father_name?"| ".concat(e.father_name):""]})]}),(0,$.jsxs)("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[(0,$.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium ".concat("active"===e.status?"bg-emerald-100 text-emerald-700":"suspended"===e.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:e.status}),(0,$.jsxs)(K,{children:[(0,$.jsx)(ee,{asChild:!0,children:(0,$.jsx)("button",{className:"p-1 rounded hover:bg-slate-200 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:(0,$.jsx)(k.A,{className:"w-3.5 h-3.5 text-slate-400"})})}),(0,$.jsxs)(ae,{align:"end",children:[(0,$.jsxs)(se,{onClick:()=>(e=>{ua(e),ma(!0)})(e),children:[(0,$.jsx)(S.A,{className:"w-4 h-4 mr-2 text-blue-600"}),a("view_profile")]}),(0,$.jsxs)(se,{onClick:()=>rs(e),children:[(0,$.jsx)(P.A,{className:"w-4 h-4 mr-2"}),a("edit")]}),(0,$.jsxs)(se,{onClick:()=>{ye(e),je(!0)},children:[(0,$.jsx)(R.A,{className:"w-4 h-4 mr-2 text-blue-600"}),a("id_card")]}),(0,$.jsxs)(se,{onClick:()=>ts(e),children:[(0,$.jsx)(I.A,{className:"w-4 h-4 mr-2 text-purple-600"}),"Share Login Details"]}),(0,$.jsxs)(se,{onClick:()=>{Ie({student_id:e.student_id||e.id,name:e.name}),be(!0)},children:[(0,$.jsx)(b.A,{className:"w-4 h-4 mr-2 text-emerald-600"}),a("face_enrollment")]}),(0,$.jsx)(te,{}),(0,$.jsxs)(se,{onClick:()=>(e=>{Pe(e),de(!0)})(e),children:[(0,$.jsx)(C.A,{className:"w-4 h-4 mr-2 text-amber-500"}),a("suspend")]}),["director","principal"].includes(null===O||void 0===O?void 0:O.role)&&(0,$.jsxs)(se,{onClick:()=>(async e=>{const a=window.prompt("Left reason (e.g., Transfer, TC Issued):");if(a)try{const s=localStorage.getItem("token");await i.A.post("".concat(ge,"/students/").concat(e,"/mark-left?reason=").concat(encodeURIComponent(a)),{},{headers:{Authorization:"Bearer ".concat(s)}}),ne.oR.success("Student marked as left"),Ka()}catch(s){ne.oR.error("Failed to update student")}})(e.id),className:"text-rose-600",children:[(0,$.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Mark as Left (TC)"]}),("director"===(null===O||void 0===O?void 0:O.role)||"admin"===(null===O||void 0===O?void 0:O.role))&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(te,{}),(0,$.jsxs)(se,{onClick:()=>(e=>{Ke(e),aa(""),Ye(!0)})(e),className:"text-red-600 bg-red-50 hover:bg-red-100",children:[(0,$.jsx)(D.A,{className:"w-4 h-4 mr-2"}),a("delete")]})]})]})]})]})]},e.id))})}),(0,$.jsx)(h.av,{value:"suspended",className:"flex-1 overflow-y-auto p-2 mt-0",children:0===G.length?(0,$.jsxs)("div",{className:"text-center py-10",children:[(0,$.jsx)(C.A,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),(0,$.jsx)("p",{className:"text-sm text-slate-400",children:"No suspended students"})]}):(0,$.jsx)("div",{className:"space-y-1",children:G.map(e=>(0,$.jsxs)("div",{onClick:()=>ja(e),className:"flex items-center gap-3 p-2.5 rounded-xl cursor-pointer transition-all group ".concat((null===fa||void 0===fa?void 0:fa.id)===e.id?"bg-amber-50 border-2 border-amber-400 shadow-sm":"border-2 border-transparent hover:bg-amber-50/50 hover:border-amber-200"),children:[(0,$.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-50 border border-amber-200 flex items-center justify-center overflow-hidden flex-shrink-0",children:e.photo_url?(0,$.jsx)("img",{src:e.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,$.jsx)(A.A,{className:"w-5 h-5 text-amber-400"})}),(0,$.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$.jsx)("p",{className:"font-medium text-sm text-slate-900 truncate",children:e.name}),(0,$.jsxs)("p",{className:"text-xs text-amber-600 truncate",children:[e.class_name," | ",Xa[e.suspension_reason]||e.suspension_reason||"Suspended"]})]}),(0,$.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,$.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium bg-amber-100 text-amber-700",children:"suspended"}),["director","principal"].includes(null===O||void 0===O?void 0:O.role)&&(0,$.jsxs)(o.$,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 h-7 text-xs opacity-0 group-hover:opacity-100 transition-opacity",onClick:a=>{a.stopPropagation(),(async e=>{try{const a=localStorage.getItem("token");await i.A.post("".concat(ge,"/students/").concat(e,"/unsuspend"),{},{headers:{Authorization:"Bearer ".concat(a)}}),ne.oR.success("Student unsuspended"),Ka()}catch(a){ne.oR.error("Failed to unsuspend student")}})(e.id)},children:[(0,$.jsx)(F.A,{className:"w-3 h-3 mr-1"}),"Unsuspend"]})]})]},e.id))})})]})]}),(0,$.jsx)("div",{className:"w-3/5 bg-white rounded-xl border border-gray-100 shadow-sm overflow-y-auto",children:fa?(0,$.jsxs)("div",{className:"p-6 space-y-5",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-6 border border-blue-100",children:(0,$.jsxs)("div",{className:"flex items-start gap-6",children:[(0,$.jsxs)("div",{className:"flex gap-4",children:[(0,$.jsx)("input",{type:"file",ref:ba,className:"hidden",accept:"image/jpeg,image/png,image/webp",onChange:e=>ss(e,fa.id)}),(0,$.jsxs)("div",{className:"text-center",children:[(0,$.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{var e;return null===(e=ba.current)||void 0===e?void 0:e.click()},children:[(0,$.jsx)("div",{className:"w-24 h-24 rounded-xl bg-white border-3 border-blue-300 shadow-lg flex items-center justify-center overflow-hidden",children:fa.photo_url?(0,$.jsx)("img",{src:fa.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,$.jsx)(A.A,{className:"w-12 h-12 text-slate-300"})}),(0,$.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:xa?(0,$.jsx)(x.A,{className:"w-6 h-6 text-white animate-spin"}):(0,$.jsx)(b.A,{className:"w-6 h-6 text-white"})}),(0,$.jsx)("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white shadow-md",children:(0,$.jsx)(b.A,{className:"w-3.5 h-3.5 text-white"})})]}),(0,$.jsx)("p",{className:"text-xs text-slate-500 mt-1.5 font-medium",children:"Click to upload"})]})]}),(0,$.jsxs)("div",{className:"flex-1",children:[(0,$.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:fa.name}),(0,$.jsxs)("p",{className:"text-slate-500 mt-1",children:[fa.student_id||fa.admission_no," | ",fa.class_name,fa.section?" - ".concat(fa.section):""]}),(0,$.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,$.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-semibold ".concat("active"===fa.status?"bg-emerald-100 text-emerald-700":"suspended"===fa.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:null===(e=fa.status)||void 0===e?void 0:e.toUpperCase()}),fa.blood_group&&(0,$.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-red-50 text-red-600 font-medium",children:fa.blood_group})]}),(0,$.jsxs)("div",{className:"flex gap-2 mt-4 flex-wrap",children:[(0,$.jsxs)(o.$,{size:"sm",className:"gap-1.5 h-8 text-xs",onClick:()=>ls(fa),children:[(0,$.jsx)(p.A,{className:"w-3.5 h-3.5"})," ",a("print")]}),(0,$.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs",onClick:()=>rs(fa),children:[(0,$.jsx)(P.A,{className:"w-3.5 h-3.5"})," ",a("edit")]}),(0,$.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs text-blue-600",onClick:()=>{ye(fa),je(!0)},children:[(0,$.jsx)(R.A,{className:"w-3.5 h-3.5"})," ",a("id_card")]}),(0,$.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs text-purple-600",onClick:()=>ts(fa),children:[(0,$.jsx)(I.A,{className:"w-3.5 h-3.5"})," Credentials"]}),["director","principal"].includes(null===O||void 0===O?void 0:O.role)&&(0,$.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs text-amber-600",onClick:()=>{Pa(fa),Ia(""),ka(!0)},children:[(0,$.jsx)(I.A,{className:"w-3.5 h-3.5"})," ",a("reset_password")]})]})]})]})}),(0,$.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,$.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,$.jsx)(A.A,{className:"w-4 h-4"})," ",a("personal_info")]}),(0,$.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("name"),fa.name],[a("student_id"),fa.student_id||fa.admission_no],[a("classes"),fa.class_name],[a("section"),fa.section||"A"],[a("gender"),fa.gender],[a("dob"),fa.dob],[a("blood_group"),fa.blood_group],[a("admission_date"),fa.admission_date],[a("category"),fa.category],[a("caste"),fa.caste],["Sub Caste",fa.sub_caste],[a("religion"),fa.religion],[a("nationality"),fa.nationality],["Mother Tongue",fa.mother_tongue],["Birth Place",fa.birth_place],["Identification Mark",fa.identification_mark],["RTE Status",fa.rte_status?"Yes":"No"],[a("aadhar_number"),fa.aadhar_no],["Scholar No",fa.scholar_no],["PEN Number",fa.pen_number],["SSSMID",fa.sssmid],["Samagra Family ID",fa.samagra_family_id],["Jan Aadhar No",fa.jan_aadhar_no]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,$.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-green-600 to-emerald-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,$.jsx)(T.A,{className:"w-4 h-4"})," ",a("family_details")]}),(0,$.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("father_name"),fa.father_name],["Father Occupation",fa.father_occupation],["Father Qualification",fa.father_qualification],[a("mother_name"),fa.mother_name],["Mother Occupation",fa.mother_occupation],["Mother Qualification",fa.mother_qualification],[a("guardian_name"),fa.guardian_name],["Guardian Relation",fa.guardian_relation],["Guardian Mobile",fa.guardian_mobile],["Guardian Occupation",fa.guardian_occupation],["Annual Income",fa.annual_income],[a("mobile"),fa.mobile],["Parent Phone",fa.parent_phone],[a("email"),fa.email],[a("address"),fa.address],[a("emergency_contact"),fa.emergency_contact],["Emergency Name",fa.emergency_contact_name]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,$.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-teal-600 to-cyan-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,$.jsx)(J.A,{className:"w-4 h-4"})," ",a("bank_details")]}),(0,$.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("bank_name"),fa.bank_name],["Account No",fa.bank_account_no],["IFSC Code",fa.ifsc_code],["Branch",fa.bank_branch]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![fa.bank_name,fa.bank_account_no].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No bank details recorded"})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,$.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-orange-500 to-amber-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,$.jsx)(E.A,{className:"w-4 h-4"})," ",a("transport")]}),(0,$.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[["Transport Mode",fa.transport_mode],["Bus Route",fa.bus_route],["Bus Stop",fa.bus_stop],["Pickup Point",fa.pickup_point],["Medical Conditions",fa.medical_conditions],["Allergies",fa.allergies]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![fa.transport_mode,fa.bus_route,fa.medical_conditions,fa.allergies].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No transport or medical details recorded"})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,$.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,$.jsx)(u.A,{className:"w-4 h-4"})," Previous Education"]}),(0,$.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("previous_school"),fa.previous_school],["Previous Class",fa.previous_class],["Previous Percentage",fa.previous_percentage],["TC Number",fa.tc_number]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![fa.previous_school,fa.previous_class,fa.tc_number].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No previous education details recorded"})]})]}):(0,$.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[(0,$.jsx)("div",{className:"w-20 h-20 rounded-full bg-slate-50 flex items-center justify-center mb-4",children:(0,$.jsx)(A.A,{className:"w-10 h-10 text-slate-300"})}),(0,$.jsx)("p",{className:"text-lg font-medium text-slate-500",children:"Select a student to view profile"}),(0,$.jsx)("p",{className:"text-sm mt-1 text-slate-400",children:"Click on any student from the left panel"})]})})]}),me&&Re&&(0,$.jsx)(he,{isOpen:me,onClose:()=>be(!1),studentId:Re.student_id,schoolId:s,studentName:Re.name,onComplete:()=>{be(!1),ne.oR.success("Face enrollment completed!"),Ka()},onSkip:()=>{be(!1),ne.oR.info("Face enrollment skipped. Complete later from profile.")}}),fe&&_e&&(0,$.jsx)(ue.A,{isOpen:fe,onClose:()=>{je(!1),ye(null)},personId:_e.student_id||_e.id,personType:"student",schoolId:s,onPhotoUpload:()=>Ka()}),(0,$.jsx)(m.lG,{open:Ze,onOpenChange:Ye,children:(0,$.jsxs)(m.Cf,{className:"max-w-md",children:[(0,$.jsx)(m.c7,{children:(0,$.jsxs)(m.L3,{className:"flex items-center gap-2 text-red-600",children:[(0,$.jsx)(_.A,{className:"w-6 h-6"}),"\u26a0\ufe0f DANGER: Permanent Delete"]})}),Xe&&(0,$.jsxs)("div",{className:"space-y-4",children:[(0,$.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,$.jsx)("h4",{className:"font-bold text-red-800 mb-2",children:"\ud83d\udea8 \u092e\u0939\u0924\u094d\u0935\u092a\u0942\u0930\u094d\u0923 \u091a\u0947\u0924\u093e\u0935\u0928\u0940:"}),(0,$.jsxs)("ul",{className:"text-sm text-red-700 space-y-1 list-disc list-inside",children:[(0,$.jsx)("li",{children:"\u092f\u0939 action UNDO \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e"}),(0,$.jsx)("li",{children:"Student \u0915\u093e \u0938\u093e\u0930\u093e data \u0939\u092e\u0947\u0936\u093e \u0915\u0947 \u0932\u093f\u090f delete \u0939\u094b \u091c\u093e\u090f\u0917\u093e"}),(0,$.jsx)("li",{children:"Attendance, Fee records, Results \u0938\u092c delete \u0939\u094b \u091c\u093e\u090f\u0902\u0917\u0947"}),(0,$.jsx)("li",{children:"Face recognition data \u092d\u0940 delete \u0939\u094b \u091c\u093e\u090f\u0917\u093e"})]})]}),(0,$.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,$.jsx)("p",{className:"font-medium text-lg",children:Xe.name}),(0,$.jsxs)("p",{className:"text-sm text-slate-500",children:[Xe.student_id," \u2022 ",Xe.class_name||"Class N/A"]}),(0,$.jsxs)("p",{className:"text-sm text-slate-500",children:["Father: ",Xe.father_name]})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:["Confirm \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f ",(0,$.jsx)("span",{className:"text-red-600 font-bold",children:"DELETE"})," type \u0915\u0930\u0947\u0902:"]}),(0,$.jsx)(c.p,{value:ea,onChange:e=>aa(e.target.value.toUpperCase()),placeholder:"Type DELETE here",className:"border-red-200 focus:border-red-400"})]}),(0,$.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,$.jsx)(o.$,{variant:"outline",onClick:()=>Ye(!1),className:"flex-1",children:"Cancel (\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902)"}),(0,$.jsxs)(o.$,{onClick:async()=>{if("DELETE"===ea){ta(!0);try{const e=localStorage.getItem("token");await i.A.delete("".concat(ge,"/students/").concat(Xe.id),{headers:{Authorization:"Bearer ".concat(e)}}),ne.oR.success("Student data permanently deleted"),Ye(!1),Ke(null),aa(""),Ka()}catch(s){var e,a;ne.oR.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to delete student")}finally{ta(!1)}}else ne.oR.error("Please type DELETE to confirm")},disabled:"DELETE"!==ea||sa,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[sa?(0,$.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):(0,$.jsx)(D.A,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})]})}),(0,$.jsx)(m.lG,{open:da,onOpenChange:ma,children:(0,$.jsxs)(m.Cf,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[(0,$.jsx)(m.c7,{children:(0,$.jsxs)(m.L3,{className:"flex items-center gap-2 text-xl",children:[(0,$.jsx)(A.A,{className:"w-6 h-6 text-blue-600"}),"Student Profile (\u0935\u093f\u0926\u094d\u092f\u093e\u0930\u094d\u0925\u0940 \u092a\u094d\u0930\u094b\u092b\u093c\u093e\u0907\u0932)"]})}),ha&&(0,$.jsxs)("div",{className:"space-y-4",children:[(0,$.jsx)("input",{type:"file",ref:ga,className:"hidden",accept:"image/jpeg,image/png,image/webp",onChange:e=>ss(e,ha.id)}),(0,$.jsxs)("div",{className:"text-center bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-6 border border-blue-100",children:[(0,$.jsx)("div",{className:"flex justify-center mb-3",children:(0,$.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{var e;return null===(e=ga.current)||void 0===e?void 0:e.click()},children:[(0,$.jsx)("div",{className:"w-28 h-28 rounded-xl bg-white border-4 border-blue-300 shadow-lg flex items-center justify-center overflow-hidden",children:ha.photo_url?(0,$.jsx)("img",{src:ha.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,$.jsx)(A.A,{className:"w-14 h-14 text-slate-300"})}),(0,$.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:xa?(0,$.jsx)(x.A,{className:"w-8 h-8 text-white animate-spin"}):(0,$.jsx)(b.A,{className:"w-8 h-8 text-white"})}),(0,$.jsx)("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white shadow-md",children:(0,$.jsx)(b.A,{className:"w-4 h-4 text-white"})})]})}),(0,$.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:ha.name}),(0,$.jsxs)("p",{className:"text-slate-500 mt-1",children:[ha.student_id||ha.admission_no," | ",ha.class_name,ha.section?" - ".concat(ha.section):""]}),(0,$.jsx)("span",{className:"inline-block mt-2 badge ".concat((e=>{switch(e){case"active":return"badge-success";case"suspended":return"badge-warning";case"left":return"badge-error";default:return"badge-info"}})(ha.status)),children:ha.status})]}),(0,$.jsxs)("div",{className:"flex gap-2 flex-wrap justify-center",children:[(0,$.jsxs)(o.$,{size:"sm",className:"gap-2",onClick:()=>ls(ha),children:[(0,$.jsx)(p.A,{className:"w-4 h-4"})," Print Profile"]}),(0,$.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>{ma(!1),rs(ha)},children:[(0,$.jsx)(P.A,{className:"w-4 h-4"})," ",a("edit")]}),(0,$.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-2 text-blue-600",onClick:()=>{ma(!1),ye(ha),je(!0)},children:[(0,$.jsx)(R.A,{className:"w-4 h-4"})," ",a("id_card")]})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-blue-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\udccb Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("name"),ha.name],[a("student_id"),ha.student_id||ha.admission_no],[a("classes"),ha.class_name],[a("section"),ha.section||"A"],[a("gender"),ha.gender],[a("dob"),ha.dob],[a("blood_group"),ha.blood_group],[a("admission_date"),ha.admission_date],[a("category"),ha.category],[a("caste"),ha.caste],["Sub Caste",ha.sub_caste],[a("religion"),ha.religion],[a("nationality"),ha.nationality],["Mother Tongue",ha.mother_tongue],["Birth Place",ha.birth_place],["Identification Mark",ha.identification_mark],["RTE Status",ha.rte_status?"Yes":"No"]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-amber-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-amber-600 to-amber-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udd94 Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("aadhar_number"),ha.aadhar_no],["Scholar No",ha.scholar_no],["PEN Number",ha.pen_number],["SSSMID",ha.sssmid],["Samagra Family ID",ha.samagra_family_id],["Jan Aadhar No",ha.jan_aadhar_no]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ha.aadhar_no,ha.scholar_no,ha.pen_number,ha.sssmid].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No identity documents recorded"})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-green-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-green-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family Information (\u092a\u093e\u0930\u093f\u0935\u093e\u0930\u093f\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("father_name"),ha.father_name],["Father Occupation",ha.father_occupation],["Father Qualification",ha.father_qualification],[a("mother_name"),ha.mother_name],["Mother Occupation",ha.mother_occupation],["Mother Qualification",ha.mother_qualification],[a("guardian_name"),ha.guardian_name],["Guardian Relation",ha.guardian_relation],["Guardian Mobile",ha.guardian_mobile],["Guardian Occupation",ha.guardian_occupation],["Annual Income",ha.annual_income]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-purple-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\udcde Contact Information (\u0938\u0902\u092a\u0930\u094d\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("mobile"),ha.mobile],["Parent Phone",ha.parent_phone],[a("email"),ha.email],[a("address"),ha.address],[a("emergency_contact"),ha.emergency_contact],["Emergency Contact Name",ha.emergency_contact_name]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-teal-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-teal-600 to-teal-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udfe6 Bank Details - Scholarship (\u092c\u0948\u0902\u0915 \u0935\u093f\u0935\u0930\u0923)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("bank_name"),ha.bank_name],["Account No",ha.bank_account_no],["IFSC Code",ha.ifsc_code],["Branch",ha.bank_branch]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ha.bank_name,ha.bank_account_no].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No bank details recorded"})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-orange-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-orange-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\ude8c Transport (\u092a\u0930\u093f\u0935\u0939\u0928)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[["Transport Mode",ha.transport_mode],["Bus Route",ha.bus_route],["Bus Stop",ha.bus_stop],["Pickup Point",ha.pickup_point]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ha.transport_mode,ha.bus_route].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No transport details recorded"})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-red-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-red-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udfe5 Medical Information (\u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 gap-px bg-slate-200",children:[["Medical Conditions",ha.medical_conditions],["Allergies",ha.allergies]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ha.medical_conditions,ha.allergies].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No medical information recorded"})]}),(0,$.jsxs)("div",{className:"rounded-xl border border-indigo-200 overflow-hidden",children:[(0,$.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udf93 Previous Education (\u092a\u0942\u0930\u094d\u0935 \u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[["Previous School",ha.previous_school],["Previous Class",ha.previous_class],["Previous Percentage",ha.previous_percentage],["TC Number",ha.tc_number]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,$.jsxs)("div",{className:"bg-white p-3",children:[(0,$.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,$.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ha.previous_school,ha.previous_class,ha.tc_number].some(Boolean)&&(0,$.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No previous education details recorded"})]})]})]})}),(0,$.jsx)(m.lG,{open:na,onOpenChange:la,children:(0,$.jsxs)(m.Cf,{className:"max-w-md",children:[(0,$.jsx)(m.c7,{children:(0,$.jsxs)(m.L3,{className:"flex items-center gap-2",children:[(0,$.jsx)(I.A,{className:"w-5 h-5 text-purple-600"}),"\ud83d\udcf1 StudyTino Login Details"]})}),ra&&(0,$.jsxs)("div",{className:"space-y-4",children:[(0,$.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-100",children:[(0,$.jsx)("p",{className:"font-bold text-lg",children:ra.name}),(0,$.jsxs)("p",{className:"text-sm text-slate-600",children:["Class: ",ra.class_name||"N/A"," | Father: ",ra.father_name]})]}),(0,$.jsxs)("div",{className:"bg-slate-900 text-white rounded-xl p-4 space-y-3",children:[(0,$.jsxs)("div",{className:"flex justify-between items-center",children:[(0,$.jsx)("span",{className:"text-slate-400 text-sm",children:"Student ID:"}),(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)("span",{className:"font-mono font-bold text-lg text-purple-300",children:ra.student_id}),(0,$.jsx)(o.$,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-white hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(ra.student_id),ne.oR.success("ID copied!")},children:(0,$.jsx)(y.A,{className:"w-4 h-4"})})]})]}),(0,$.jsxs)("div",{className:"flex justify-between items-center",children:[(0,$.jsx)("span",{className:"text-slate-400 text-sm",children:"Password:"}),(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)("span",{className:"font-mono font-bold text-lg text-green-300",children:ra.default_password}),(0,$.jsx)(o.$,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-white hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(ra.default_password),ne.oR.success("Password copied!")},children:(0,$.jsx)(y.A,{className:"w-4 h-4"})})]})]})]}),(0,$.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,$.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"App Link:"}),(0,$.jsxs)("p",{className:"font-mono text-sm text-blue-800",children:[window.location.origin,"/studytino"]})]}),(0,$.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,$.jsxs)(o.$,{onClick:()=>(e=>{var a;const s=ns(e),t=(null===(a=e.mobile)||void 0===a?void 0:a.replace(/[^0-9]/g,""))||"",n=t?"https://wa.me/91".concat(t,"?text=").concat(encodeURIComponent(s)):"https://wa.me/?text=".concat(encodeURIComponent(s));window.open(n,"_blank")})(ra),className:"bg-green-600 hover:bg-green-700 gap-2",children:[(0,$.jsx)(z.A,{className:"w-4 h-4"}),"WhatsApp Share"]}),(0,$.jsxs)(o.$,{variant:"outline",onClick:()=>(async e=>{const a=ns(e);await navigator.clipboard.writeText(a),ne.oR.success("Credentials copied!")})(ra),className:"gap-2",children:[(0,$.jsx)(y.A,{className:"w-4 h-4"}),"Copy All"]})]}),(0,$.jsx)("div",{className:"text-xs text-slate-500 text-center bg-amber-50 rounded-lg p-2",children:"\ud83d\udca1 Parent \u0915\u094b \u092f\u0947 details share \u0915\u0930\u0947\u0902\u0964 First login \u092a\u0930 password change \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e\u0964"})]})]})}),Ca&&Sa&&(0,$.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>ka(!1),children:(0,$.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2 mb-4",children:[(0,$.jsx)(I.A,{className:"w-5 h-5 text-amber-600"}),"Reset Student Password"]}),(0,$.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 mb-4",children:[(0,$.jsx)("p",{className:"font-medium",children:Sa.name}),(0,$.jsxs)("p",{className:"text-sm text-slate-500",children:[Sa.student_id||Sa.admission_no||"N/A"," \u2022 ",Sa.class_name||"N/A"]})]}),(0,$.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,$.jsx)(d.J,{children:"New Password (\u0915\u092e \u0938\u0947 \u0915\u092e 4 characters)"}),(0,$.jsxs)("div",{className:"relative",children:[(0,$.jsx)(c.p,{type:Fa?"text":"password",value:Ra,onChange:e=>Ia(e.target.value),placeholder:"Enter new password",className:"pr-10"}),(0,$.jsx)("button",{type:"button",onClick:()=>Ta(!Fa),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,$.jsx)(S.A,{className:"w-4 h-4"})})]})]}),(0,$.jsxs)("div",{className:"flex gap-3",children:[(0,$.jsx)(o.$,{variant:"outline",onClick:()=>ka(!1),className:"flex-1",children:a("cancel")}),(0,$.jsxs)(o.$,{onClick:async()=>{if(!Ra||Ra.length<4)ne.oR.error("Password must be at least 4 characters");else{Da(!0);try{const e=localStorage.getItem("token");await i.A.put("".concat(ge,"/students/").concat(Sa.id,"/reset-password"),{new_password:Ra},{headers:{Authorization:"Bearer ".concat(e)}}),ne.oR.success("Password reset for ".concat(Sa.name)),ka(!1),Pa(null),Ia("")}catch(s){var e,a;ne.oR.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Password reset failed")}finally{Da(!1)}}},disabled:!Ra||Ra.length<4||Ba,className:"flex-1 bg-amber-600 hover:bg-amber-700",children:[Ba?(0,$.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):(0,$.jsx)(I.A,{className:"w-4 h-4 mr-2"}),a("reset_password")]})]})]})})]}):(0,$.jsx)("div",{className:"text-center py-20",children:(0,$.jsx)("p",{className:"text-slate-500",children:a("select_school_first")})})}}}]);