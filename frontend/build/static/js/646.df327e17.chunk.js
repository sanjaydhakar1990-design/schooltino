/*! For license information please see 646.df327e17.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[646],{3390(e,s,t){t.d(s,{$:()=>m});var a=t(2555),l=t(3986),r=t(5043),n=t(6851),c=t(917),o=t(1089),d=t(579);const i=["className","variant","size","asChild"],x=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-500 text-white shadow-sm hover:bg-blue-600 rounded-lg",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-50 text-gray-700 rounded-lg",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,s)=>{let{className:t,variant:r,size:c,asChild:m=!1}=e,p=(0,l.A)(e,i);const h=m?n.DX:"button";return(0,d.jsx)(h,(0,a.A)({className:(0,o.cn)(x({variant:r,size:c,className:t})),ref:s},p))});m.displayName="Button"},2264(e,s,t){t.d(s,{p:()=>d});var a=t(2555),l=t(3986),r=t(5043),n=t(1089),c=t(579);const o=["className","type"],d=r.forwardRef((e,s)=>{let{className:t,type:r}=e,d=(0,l.A)(e,o);return(0,c.jsx)("input",(0,a.A)({type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-white px-3 py-1 text-base text-gray-900 shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s},d))});d.displayName="Input"},9938(e,s,t){t.d(s,{J:()=>m});var a=t(2555),l=t(3986),r=t(5043),n=t(5131),c=t(917),o=t(1089),d=t(579);const i=["className"],x=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=r.forwardRef((e,s)=>{let{className:t}=e,r=(0,l.A)(e,i);return(0,d.jsx)(n.b,(0,a.A)({ref:s,className:(0,o.cn)(x(),t)},r))});m.displayName=n.b.displayName},1089(e,s,t){t.d(s,{cn:()=>r});var a=t(8387),l=t(9359);function r(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,a.$)(s))}},646(e,s,t){t.r(s),t.d(s,{default:()=>R});var a=t(2555),l=t(5043),r=t(6930),n=t(8729),c=t(3390),o=t(2264),d=t(9938),i=t(2489),x=t(7737),m=t(516),p=t(7104),h=t(7719),u=t(7118),f=t(9797),b=t(9292);const g=(0,t(7784).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var y=t(2382),N=t(2024),j=t(6210),v=t(2313),w=t(4651),A=t(5087),k=t(8326),C=t(2626),S=t(6328),M=t(9722),L=t(579);function R(){const{t:e,i18n:s}=(0,r.Bd)(),{user:t}=(0,n.As)(),R="hi"===s.language,D=localStorage.getItem("token"),[_,z]=(0,l.useState)("staff"),[I,P]=(0,l.useState)(!1),[E,$]=(0,l.useState)({staff:[],students:[]}),[T,V]=(0,l.useState)(""),[q,F]=(0,l.useState)({}),[O,U]=(0,l.useState)(null),[B,H]=(0,l.useState)(""),[J,Q]=(0,l.useState)(!1),[X,G]=(0,l.useState)(null),[K,W]=(0,l.useState)("all"),[Y,Z]=(0,l.useState)("all"),[ee,se]=(0,l.useState)({}),te=(0,l.useCallback)(async()=>{P(!0);try{const e={type:"all"},s=await M.A.get("".concat("","/api/admin/credentials"),{headers:{Authorization:"Bearer ".concat(D)},params:e});$(s.data)}catch(e){S.oR.error(R?"\u0921\u0947\u091f\u093e \u0932\u094b\u0921 \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0924\u094d\u0930\u0941\u091f\u093f":"Failed to load credentials")}P(!1)},[D,R]);(0,l.useEffect)(()=>{te()},[te]);const ae=(0,l.useMemo)(()=>{const e=new Map;E.students.forEach(s=>{const t=s.class_name||(R?"\u092c\u093f\u0928\u093e \u0915\u0915\u094d\u0937\u093e":"No Class");e.has(t)||e.set(t,0),e.set(t,e.get(t)+1)});return Array.from(e.entries()).sort((e,s)=>{const t=parseInt(e[0].replace(/\D/g,""))||999,a=parseInt(s[0].replace(/\D/g,""))||999;return t!==a?t-a:e[0].localeCompare(s[0])})},[E.students,R]),le=(0,l.useMemo)(()=>{const e=new Map;return E.staff.forEach(s=>{const t=s.role||"unknown";e.has(t)||e.set(t,0),e.set(t,e.get(t)+1)}),Array.from(e.entries()).sort((e,s)=>e[0].localeCompare(s[0]))},[E.staff]),re=(0,l.useMemo)(()=>{const e={};E.students.filter(e=>{if(T){var s,t,a;const l=T.toLowerCase();if((null===(s=e.name)||void 0===s||!s.toLowerCase().includes(l))&&(null===(t=e.student_id)||void 0===t||!t.toLowerCase().includes(l))&&(null===(a=e.father_name)||void 0===a||!a.toLowerCase().includes(l)))return!1}if("all"!==K){if((e.class_name||(R?"\u092c\u093f\u0928\u093e \u0915\u0915\u094d\u0937\u093e":"No Class"))!==K)return!1}return!0}).forEach(s=>{const t=s.class_name||(R?"\u092c\u093f\u0928\u093e \u0915\u0915\u094d\u0937\u093e":"No Class");e[t]||(e[t]=[]),e[t].push(s)});return Object.keys(e).sort((e,s)=>{const t=parseInt(e.replace(/\D/g,""))||999,a=parseInt(s.replace(/\D/g,""))||999;return t!==a?t-a:e.localeCompare(s)}).map(s=>({className:s,students:e[s]}))},[E.students,T,K,R]),ne=(0,l.useMemo)(()=>E.staff.filter(e=>{if(T){var s,t,a;const l=T.toLowerCase();if((null===(s=e.name)||void 0===s||!s.toLowerCase().includes(l))&&(null===(t=e.email)||void 0===t||!t.toLowerCase().includes(l))&&(null===(a=e.role)||void 0===a||!a.toLowerCase().includes(l)))return!1}return"all"===Y||e.role===Y}),[E.staff,T,Y]),ce=(0,l.useMemo)(()=>re.reduce((e,s)=>e+s.students.length,0),[re]),oe=e=>{F(s=>(0,a.A)((0,a.A)({},s),{},{[e]:!s[e]}))},de=(e,s,t)=>{navigator.clipboard.writeText(e),G(s),S.oR.success("".concat(t," ").concat(R?"\u0915\u0949\u092a\u0940 \u0915\u093f\u092f\u093e":"copied","!")),setTimeout(()=>G(null),2e3)};return"director"!==(null===t||void 0===t?void 0:t.role)?(0,L.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,L.jsxs)("div",{className:"text-center",children:[(0,L.jsx)(i.A,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),(0,L.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:R?"\u092a\u0939\u0941\u0901\u091a \u0905\u0938\u094d\u0935\u0940\u0915\u0943\u0924":"Access Denied"}),(0,L.jsx)("p",{className:"text-gray-500",children:R?"\u0915\u0947\u0935\u0932 \u0921\u093e\u092f\u0930\u0947\u0915\u094d\u091f\u0930 \u0907\u0938 \u092a\u0947\u091c \u0915\u094b \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902":"Only Director can access this page"})]})}):(0,L.jsxs)("div",{className:"space-y-6",children:[(0,L.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm p-5",children:[(0,L.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,L.jsxs)("div",{children:[(0,L.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,L.jsx)(x.A,{className:"w-6 h-6 text-amber-600"}),R?"\u0932\u0949\u0917\u093f\u0928 \u0915\u094d\u0930\u0947\u0921\u0947\u0902\u0936\u093f\u092f\u0932\u094d\u0938":"Login Credentials"]}),(0,L.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:R?"\u0938\u092d\u0940 \u0938\u094d\u091f\u093e\u092b \u0914\u0930 \u091b\u093e\u0924\u094d\u0930\u094b\u0902 \u0915\u0947 \u0932\u0949\u0917\u093f\u0928 \u0935\u093f\u0935\u0930\u0923 \u0926\u0947\u0916\u0947\u0902 \u0914\u0930 \u092a\u094d\u0930\u092c\u0902\u0927\u093f\u0924 \u0915\u0930\u0947\u0902":"View and manage login details for all staff and students"})]}),(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsxs)(c.$,{variant:"outline",size:"sm",onClick:te,disabled:I,className:"gap-1",children:[(0,L.jsx)(m.A,{className:"w-4 h-4 ".concat(I?"animate-spin":"")}),R?"\u0930\u093f\u092b\u094d\u0930\u0947\u0936":"Refresh"]}),(0,L.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{const e="staff"===_?ne:E.students.filter(e=>{if("all"!==K){return(e.class_name||(R?"\u092c\u093f\u0928\u093e \u0915\u0915\u094d\u0937\u093e":"No Class"))===K}return!0});if(!e.length)return void S.oR.error(R?"\u0915\u094b\u0908 \u0921\u0947\u091f\u093e \u0928\u0939\u0940\u0902":"No data to export");let s="";"staff"===_?(s="Name,Email (Login ID),Role,Password\n",e.forEach(e=>{s+='"'.concat(e.name,'","').concat(e.email,'","').concat(e.role,'","').concat(e.password||"Not Available",'"\n')})):(s="Name,Student ID (Login ID),Class,Password,Father Name,Mobile\n",e.forEach(e=>{s+='"'.concat(e.name,'","').concat(e.student_id,'","').concat(e.class_name,'","').concat(e.password||"Not Available",'","').concat(e.father_name||"",'","').concat(e.mobile||"",'"\n')}));const t=new Blob([s],{type:"text/csv"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download="".concat(_,"_credentials").concat("all"!==K?"_".concat(K.replace(/\s/g,"_")):"","_").concat((new Date).toISOString().split("T")[0],".csv"),l.click(),URL.revokeObjectURL(a),S.oR.success(R?"CSV \u0921\u093e\u0909\u0928\u0932\u094b\u0921 \u0939\u094b \u0917\u092f\u093e":"CSV downloaded")},className:"gap-1",children:[(0,L.jsx)(p.A,{className:"w-4 h-4"}),R?"CSV \u0921\u093e\u0909\u0928\u0932\u094b\u0921":"Download CSV"]})]})]}),(0,L.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mt-4 flex items-start gap-2",children:[(0,L.jsx)(h.A,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,L.jsx)("p",{className:"text-sm text-amber-800",children:R?"\u092f\u0939 \u0938\u0902\u0935\u0947\u0926\u0928\u0936\u0940\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u0939\u0948\u0964 \u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0915\u0947\u0935\u0932 \u0905\u0927\u093f\u0915\u0943\u0924 \u0935\u094d\u092f\u0915\u094d\u0924\u093f\u092f\u094b\u0902 \u0915\u0947 \u0938\u093e\u0925 \u0938\u093e\u091d\u093e \u0915\u0930\u0947\u0902\u0964":"This is sensitive information. Only share passwords with authorized individuals."})]})]}),(0,L.jsxs)("div",{className:"flex gap-2 bg-gray-100 rounded-xl p-1.5",children:[(0,L.jsxs)("button",{onClick:()=>{z("staff"),V(""),W("all"),Z("all")},className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all ".concat("staff"===_?"bg-white shadow-sm text-blue-700":"text-gray-500 hover:text-gray-700"),children:[(0,L.jsx)(u.A,{className:"w-4 h-4"}),R?"\u0938\u094d\u091f\u093e\u092b / \u091f\u0940\u091a\u0930":"Staff / Teachers",(0,L.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-full",children:E.staff.length})]}),(0,L.jsxs)("button",{onClick:()=>{z("students"),V(""),W("all"),Z("all")},className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all ".concat("students"===_?"bg-white shadow-sm text-purple-700":"text-gray-500 hover:text-gray-700"),children:[(0,L.jsx)(f.A,{className:"w-4 h-4"}),R?"\u091b\u093e\u0924\u094d\u0930":"Students",(0,L.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-0.5 rounded-full",children:E.students.length})]})]}),(0,L.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,L.jsxs)("div",{className:"relative flex-1",children:[(0,L.jsx)(b.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,L.jsx)("input",{type:"text",value:T,onChange:e=>V(e.target.value),placeholder:R?"staff"===_?"\u0928\u093e\u092e, \u0908\u092e\u0947\u0932 \u092f\u093e \u0930\u094b\u0932 \u0938\u0947 \u0916\u094b\u091c\u0947\u0902...":"\u0928\u093e\u092e, Student ID \u092f\u093e \u092a\u093f\u0924\u093e \u0915\u0947 \u0928\u093e\u092e \u0938\u0947 \u0916\u094b\u091c\u0947\u0902...":"staff"===_?"Search by name, email, or role...":"Search by name, Student ID, or father name...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),"students"===_&&ae.length>0&&(0,L.jsxs)("div",{className:"relative",children:[(0,L.jsx)(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,L.jsxs)("select",{value:K,onChange:e=>W(e.target.value),className:"pl-10 pr-8 py-2.5 border border-gray-200 rounded-xl text-sm bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 appearance-none cursor-pointer min-w-[180px]",children:[(0,L.jsxs)("option",{value:"all",children:[R?"\u0938\u092d\u0940 \u0915\u0915\u094d\u0937\u093e\u090f\u0902":"All Classes"," (",E.students.length,")"]}),ae.map(e=>{let[s,t]=e;return(0,L.jsxs)("option",{value:s,children:[s," (",t,")"]},s)})]}),(0,L.jsx)(y.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),"staff"===_&&le.length>0&&(0,L.jsxs)("div",{className:"relative",children:[(0,L.jsx)(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,L.jsxs)("select",{value:Y,onChange:e=>Z(e.target.value),className:"pl-10 pr-8 py-2.5 border border-gray-200 rounded-xl text-sm bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none cursor-pointer min-w-[180px]",children:[(0,L.jsxs)("option",{value:"all",children:[R?"\u0938\u092d\u0940 \u092d\u0942\u092e\u093f\u0915\u093e\u090f\u0902":"All Roles"," (",E.staff.length,")"]}),le.map(e=>{let[s,t]=e;return(0,L.jsxs)("option",{value:s,className:"capitalize",children:[s," (",t,")"]},s)})]}),(0,L.jsx)(y.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),I?(0,L.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,L.jsx)(N.A,{className:"w-8 h-8 animate-spin text-blue-500"})}):"staff"===_?(0,L.jsx)("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:(0,L.jsx)("div",{className:"overflow-x-auto",children:(0,L.jsxs)("table",{className:"w-full text-sm",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{className:"bg-slate-50 border-b",children:[(0,L.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-slate-700",children:R?"\u0928\u093e\u092e":"Name"}),(0,L.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-slate-700",children:R?"\u0932\u0949\u0917\u093f\u0928 ID (\u0908\u092e\u0947\u0932)":"Login ID (Email)"}),(0,L.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-slate-700",children:R?"\u092d\u0942\u092e\u093f\u0915\u093e":"Role"}),(0,L.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-slate-700",children:R?"\u092a\u093e\u0938\u0935\u0930\u094d\u0921":"Password"}),(0,L.jsx)("th",{className:"text-center px-4 py-3 font-semibold text-slate-700",children:R?"\u0915\u093e\u0930\u094d\u0930\u0935\u093e\u0908":"Actions"})]})}),(0,L.jsxs)("tbody",{children:[ne.map(e=>{var s,t;return(0,L.jsxs)("tr",{className:"border-b border-slate-50 hover:bg-blue-50/30",children:[(0,L.jsx)("td",{className:"px-4 py-3",children:(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold text-xs",children:null===(s=e.name)||void 0===s||null===(t=s.charAt(0))||void 0===t?void 0:t.toUpperCase()}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{className:"font-medium text-slate-800",children:e.name}),e.mobile&&(0,L.jsx)("p",{className:"text-xs text-gray-400",children:e.mobile})]})]})}),(0,L.jsx)("td",{className:"px-4 py-3",children:(0,L.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,L.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono text-gray-800",children:e.email||"-"}),e.email&&(0,L.jsx)("button",{onClick:()=>de(e.email,"email-".concat(e.id),"Login ID"),className:"text-blue-500 hover:text-blue-700 p-1",children:X==="email-".concat(e.id)?(0,L.jsx)(j.A,{className:"w-3.5 h-3.5 text-green-500"}):(0,L.jsx)(v.A,{className:"w-3.5 h-3.5"})})]})}),(0,L.jsx)("td",{className:"px-4 py-3",children:(0,L.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 capitalize",children:e.role})}),(0,L.jsx)("td",{className:"px-4 py-3",children:e.password?(0,L.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,L.jsx)("code",{className:"text-xs bg-amber-50 border border-amber-200 px-2 py-1 rounded font-mono text-gray-800",children:q[e.id]?e.password:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,L.jsx)("button",{onClick:()=>oe(e.id),className:"text-gray-400 hover:text-gray-600 p-1",children:q[e.id]?(0,L.jsx)(w.A,{className:"w-3.5 h-3.5"}):(0,L.jsx)(A.A,{className:"w-3.5 h-3.5"})}),(0,L.jsx)("button",{onClick:()=>de(e.password,"pwd-".concat(e.id),"Password"),className:"text-blue-500 hover:text-blue-700 p-1",children:X==="pwd-".concat(e.id)?(0,L.jsx)(j.A,{className:"w-3.5 h-3.5 text-green-500"}):(0,L.jsx)(v.A,{className:"w-3.5 h-3.5"})})]}):(0,L.jsx)("span",{className:"text-xs text-gray-400 italic",children:R?"\u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0939\u0940\u0902":"Not available"})}),(0,L.jsx)("td",{className:"px-4 py-3 text-center",children:(0,L.jsxs)(c.$,{size:"sm",variant:"outline",className:"h-7 text-xs gap-1 border-amber-300 text-amber-700 hover:bg-amber-50",onClick:()=>{U((0,a.A)((0,a.A)({},e),{},{type:"staff"})),H("")},children:[(0,L.jsx)(x.A,{className:"w-3 h-3"}),R?"\u0930\u0940\u0938\u0947\u091f":"Reset"]})})]},e.id)}),0===ne.length&&(0,L.jsx)("tr",{children:(0,L.jsxs)("td",{colSpan:"5",className:"px-4 py-10 text-center text-slate-400",children:[(0,L.jsx)(u.A,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,L.jsx)("p",{children:R?"\u0915\u094b\u0908 \u0938\u094d\u091f\u093e\u092b \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e":"No staff found"})]})})]})]})})}):(0,L.jsxs)("div",{className:"space-y-3",children:[(0,L.jsxs)("div",{className:"flex items-center justify-between",children:[(0,L.jsx)("p",{className:"text-sm text-gray-500",children:R?"".concat(re.length," \u0915\u0915\u094d\u0937\u093e\u0913\u0902 \u092e\u0947\u0902 ").concat(ce," \u091b\u093e\u0924\u094d\u0930"):"".concat(ce," students in ").concat(re.length," classes")}),(0,L.jsxs)("div",{className:"flex gap-2",children:[(0,L.jsx)("button",{onClick:()=>{const e={};re.forEach(s=>{e[s.className]=!0}),se(e)},className:"text-xs text-purple-600 hover:text-purple-800 font-medium",children:R?"\u0938\u092d\u0940 \u0916\u094b\u0932\u0947\u0902":"Expand All"}),(0,L.jsx)("span",{className:"text-gray-300",children:"|"}),(0,L.jsx)("button",{onClick:()=>{se({})},className:"text-xs text-purple-600 hover:text-purple-800 font-medium",children:R?"\u0938\u092d\u0940 \u092c\u0902\u0926 \u0915\u0930\u0947\u0902":"Collapse All"})]})]}),re.map(e=>(0,L.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[(0,L.jsxs)("button",{onClick:()=>{return s=e.className,void se(e=>(0,a.A)((0,a.A)({},e),{},{[s]:!e[s]}));var s},className:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-50 to-indigo-50 hover:from-purple-100 hover:to-indigo-100 transition-colors",children:[(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[ee[e.className]?(0,L.jsx)(y.A,{className:"w-4 h-4 text-purple-600"}):(0,L.jsx)(k.A,{className:"w-4 h-4 text-purple-600"}),(0,L.jsx)(C.A,{className:"w-4 h-4 text-purple-500"}),(0,L.jsx)("span",{className:"font-semibold text-purple-800 text-sm",children:e.className}),(0,L.jsxs)("span",{className:"bg-purple-200 text-purple-800 text-xs px-2 py-0.5 rounded-full font-medium",children:[e.students.length," ",R?"\u091b\u093e\u0924\u094d\u0930":"students"]})]}),(0,L.jsx)("div",{className:"flex items-center gap-2",children:(0,L.jsxs)("button",{onClick:s=>{s.stopPropagation();const t=e.students.every(e=>q[e.id]),l={};e.students.forEach(e=>{l[e.id]=!t}),F(e=>(0,a.A)((0,a.A)({},e),l))},className:"text-xs text-purple-600 hover:text-purple-800 flex items-center gap-1 px-2 py-1 rounded-md hover:bg-purple-100",children:[(0,L.jsx)(A.A,{className:"w-3 h-3"}),R?"\u0938\u092d\u0940 \u092a\u093e\u0938\u0935\u0930\u094d\u0921":"Toggle All"]})})]}),ee[e.className]&&(0,L.jsx)("div",{className:"overflow-x-auto",children:(0,L.jsxs)("table",{className:"w-full text-sm",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{className:"bg-slate-50 border-b",children:[(0,L.jsx)("th",{className:"text-left px-4 py-2.5 font-semibold text-slate-600 text-xs",children:"#"}),(0,L.jsx)("th",{className:"text-left px-4 py-2.5 font-semibold text-slate-600 text-xs",children:R?"\u0928\u093e\u092e":"Name"}),(0,L.jsx)("th",{className:"text-left px-4 py-2.5 font-semibold text-slate-600 text-xs",children:R?"Student ID (\u0932\u0949\u0917\u093f\u0928)":"Student ID (Login)"}),(0,L.jsx)("th",{className:"text-left px-4 py-2.5 font-semibold text-slate-600 text-xs",children:R?"\u092a\u093e\u0938\u0935\u0930\u094d\u0921":"Password"}),(0,L.jsx)("th",{className:"text-left px-4 py-2.5 font-semibold text-slate-600 text-xs",children:R?"\u092a\u093f\u0924\u093e \u0915\u093e \u0928\u093e\u092e":"Father"}),(0,L.jsx)("th",{className:"text-center px-4 py-2.5 font-semibold text-slate-600 text-xs",children:R?"\u0915\u093e\u0930\u094d\u0930\u0935\u093e\u0908":"Actions"})]})}),(0,L.jsx)("tbody",{children:e.students.map((e,s)=>{var t,l;return(0,L.jsxs)("tr",{className:"border-b border-slate-50 hover:bg-purple-50/30",children:[(0,L.jsx)("td",{className:"px-4 py-2.5 text-xs text-gray-400",children:s+1}),(0,L.jsx)("td",{className:"px-4 py-2.5",children:(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)("div",{className:"w-7 h-7 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-semibold text-xs",children:null===(t=e.name)||void 0===t||null===(l=t.charAt(0))||void 0===l?void 0:l.toUpperCase()}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{className:"font-medium text-slate-800 text-sm",children:e.name}),e.mobile&&(0,L.jsx)("p",{className:"text-xs text-gray-400",children:e.mobile})]})]})}),(0,L.jsx)("td",{className:"px-4 py-2.5",children:(0,L.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,L.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono text-gray-800",children:e.student_id}),(0,L.jsx)("button",{onClick:()=>de(e.student_id,"sid-".concat(e.id),"Student ID"),className:"text-blue-500 hover:text-blue-700 p-1",children:X==="sid-".concat(e.id)?(0,L.jsx)(j.A,{className:"w-3.5 h-3.5 text-green-500"}):(0,L.jsx)(v.A,{className:"w-3.5 h-3.5"})})]})}),(0,L.jsx)("td",{className:"px-4 py-2.5",children:e.password?(0,L.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,L.jsx)("code",{className:"text-xs bg-amber-50 border border-amber-200 px-2 py-1 rounded font-mono text-gray-800",children:q[e.id]?e.password:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,L.jsx)("button",{onClick:()=>oe(e.id),className:"text-gray-400 hover:text-gray-600 p-1",children:q[e.id]?(0,L.jsx)(w.A,{className:"w-3.5 h-3.5"}):(0,L.jsx)(A.A,{className:"w-3.5 h-3.5"})}),(0,L.jsx)("button",{onClick:()=>de(e.password,"pwd-".concat(e.id),"Password"),className:"text-blue-500 hover:text-blue-700 p-1",children:X==="pwd-".concat(e.id)?(0,L.jsx)(j.A,{className:"w-3.5 h-3.5 text-green-500"}):(0,L.jsx)(v.A,{className:"w-3.5 h-3.5"})})]}):(0,L.jsx)("span",{className:"text-xs text-gray-400 italic",children:R?"\u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0939\u0940\u0902":"Not available"})}),(0,L.jsx)("td",{className:"px-4 py-2.5 text-sm text-gray-600",children:e.father_name||"-"}),(0,L.jsx)("td",{className:"px-4 py-2.5 text-center",children:(0,L.jsxs)(c.$,{size:"sm",variant:"outline",className:"h-7 text-xs gap-1 border-amber-300 text-amber-700 hover:bg-amber-50",onClick:()=>{U((0,a.A)((0,a.A)({},e),{},{type:"student"})),H("")},children:[(0,L.jsx)(x.A,{className:"w-3 h-3"}),R?"\u0930\u0940\u0938\u0947\u091f":"Reset"]})})]},e.id)})})]})})]},e.className)),0===re.length&&(0,L.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm p-10 text-center text-slate-400",children:[(0,L.jsx)(f.A,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,L.jsx)("p",{children:R?"\u0915\u094b\u0908 \u091b\u093e\u0924\u094d\u0930 \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e":"No students found"})]})]}),O&&(0,L.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>U(null),children:(0,L.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,L.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2 mb-4",children:[(0,L.jsx)(x.A,{className:"w-5 h-5 text-amber-600"}),R?"\u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0930\u0940\u0938\u0947\u091f \u0915\u0930\u0947\u0902":"Reset Password"]}),(0,L.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 mb-4",children:[(0,L.jsx)("p",{className:"font-medium text-gray-900",children:O.name}),(0,L.jsx)("p",{className:"text-sm text-slate-500",children:"staff"===O.type?"".concat(O.email," \u2022 ").concat(O.role):"".concat(O.student_id," \u2022 ").concat(O.class_name||"")}),O.password&&(0,L.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:[R?"\u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u092a\u093e\u0938\u0935\u0930\u094d\u0921":"Current password",": ",(0,L.jsx)("code",{className:"bg-amber-50 px-1.5 py-0.5 rounded",children:O.password})]})]}),(0,L.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,L.jsx)(d.J,{className:"text-gray-700",children:R?"\u0928\u092f\u093e \u092a\u093e\u0938\u0935\u0930\u094d\u0921":"New Password"}),(0,L.jsx)(o.p,{type:"text",value:B,onChange:e=>H(e.target.value),placeholder:R?"\u0928\u092f\u093e \u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0921\u093e\u0932\u0947\u0902":"Enter new password",className:"text-gray-900 bg-white"})]}),(0,L.jsxs)("div",{className:"flex gap-2",children:[(0,L.jsx)(c.$,{variant:"outline",className:"flex-1",onClick:()=>U(null),children:R?"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902":"Cancel"}),(0,L.jsx)(c.$,{className:"flex-1 bg-amber-600 hover:bg-amber-700 text-white",onClick:async()=>{if(!B||B.length<4)S.oR.error(R?"\u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0915\u092e \u0938\u0947 \u0915\u092e 4 \u0905\u0915\u094d\u0937\u0930 \u0915\u093e \u0939\u094b\u0928\u093e \u091a\u093e\u0939\u093f\u090f":"Password must be at least 4 characters");else{Q(!0);try{const e="staff"===O.type?"".concat("","/api/employees/").concat(O.employee_id,"/reset-password"):"".concat("","/api/students/").concat(O.id,"/reset-password");await M.A.put(e,{new_password:B},{headers:{Authorization:"Bearer ".concat(D)}}),S.oR.success("".concat(O.name," ").concat(R?"\u0915\u093e \u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0930\u0940\u0938\u0947\u091f \u0939\u094b \u0917\u092f\u093e":"'s password reset successfully")),U(null),H(""),te()}catch(t){var e,s;S.oR.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||(R?"\u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0930\u0940\u0938\u0947\u091f \u0935\u093f\u092b\u0932":"Password reset failed"))}Q(!1)}},disabled:J||!B,children:J?(0,L.jsx)(N.A,{className:"w-4 h-4 animate-spin"}):(0,L.jsx)(L.Fragment,{children:R?"\u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0930\u0940\u0938\u0947\u091f \u0915\u0930\u0947\u0902":"Reset Password"})})]})]})})]})}},6210(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2382(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2313(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7104(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},4651(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5087(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7737(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},2024(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},516(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7719(e,s,t){t.d(s,{A:()=>a});const a=(0,t(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5131(e,s,t){t.d(s,{b:()=>x});var a=t(2555),l=t(5043),r=t(3986),n=(t(7950),t(6851)),c=t(579);const o=["asChild"];var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{const t=(0,n.TL)("Primitive.".concat(s)),d=l.forwardRef((e,l)=>{const{asChild:n}=e,d=(0,r.A)(e,o),i=n?t:s;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,c.jsx)(i,(0,a.A)((0,a.A)({},d),{},{ref:l}))});return d.displayName="Primitive.".concat(s),(0,a.A)((0,a.A)({},e),{},{[s]:d})},{});var i=l.forwardRef((e,s)=>(0,c.jsx)(d.label,(0,a.A)((0,a.A)({},e),{},{ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}})));i.displayName="Label";var x=i}}]);
//# sourceMappingURL=646.df327e17.chunk.js.map