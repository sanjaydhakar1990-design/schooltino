"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8345],{5949(e,s,a){a.d(s,{E:()=>c});var t=a(2555),l=a(3986),r=(a(5043),a(917)),n=a(1089),i=a(579);const d=["className","variant"],o=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a}=e,r=(0,l.A)(e,d);return(0,i.jsx)("div",(0,t.A)({className:(0,n.cn)(o({variant:a}),s)},r))}},3390(e,s,a){a.d(s,{$:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(6851),i=a(917),d=a(1089),o=a(579);const c=["className","variant","size","asChild"],m=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-500 text-white shadow-sm hover:bg-blue-600 rounded-lg",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-50 text-gray-700 rounded-lg",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),x=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:x=!1}=e,h=(0,l.A)(e,c);const u=x?n.DX:"button";return(0,o.jsx)(u,(0,t.A)({className:(0,d.cn)(m({variant:r,size:i,className:a})),ref:s},h))});x.displayName="Button"},1140(e,s,a){a.d(s,{BT:()=>b,Wu:()=>y,ZB:()=>p,Zp:()=>u,aR:()=>g});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const d=["className"],o=["className"],c=["className"],m=["className"],x=["className"],h=["className"],u=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,d);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("rounded-xl border border-gray-200 bg-white text-gray-900 shadow-sm",a)},r))});u.displayName="Card";const g=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-5",a)},r))});g.displayName="CardHeader";const p=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",a)},r))});p.displayName="CardTitle";const b=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,m);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a)},r))});b.displayName="CardDescription";const y=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,x);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("p-5 pt-0",a)},r))});y.displayName="CardContent";r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("flex items-center p-5 pt-0",a)},r))}).displayName="CardFooter"},5598(e,s,a){a.d(s,{Cf:()=>j,L3:()=>f,c7:()=>v,lG:()=>g,rr:()=>N,zM:()=>p});var t=a(2555),l=a(3986),r=a(5043),n=a(7427),i=a(614),d=a(1089),o=a(579);const c=["className"],m=["className","children"],x=["className"],h=["className"],u=["className"],g=n.bL,p=n.l9,b=n.ZL,y=(n.bm,r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,o.jsx)(n.hJ,(0,t.A)({ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},r))}));y.displayName=n.hJ.displayName;const j=r.forwardRef((e,s)=>{let{className:a,children:r}=e,c=(0,l.A)(e,m);return(0,o.jsxs)(b,{children:[(0,o.jsx)(y,{}),(0,o.jsxs)(n.UC,(0,t.A)((0,t.A)({ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},c),{},{children:[r,(0,o.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(i.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});j.displayName=n.UC.displayName;const v=e=>{let{className:s}=e,a=(0,l.A)(e,x);return(0,o.jsx)("div",(0,t.A)({className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s)},a))};v.displayName="DialogHeader";const f=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,o.jsx)(n.hE,(0,t.A)({ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a)},r))});f.displayName=n.hE.displayName;const N=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,u);return(0,o.jsx)(n.VY,(0,t.A)({ref:s,className:(0,d.cn)("text-sm text-muted-foreground",a)},r))});N.displayName=n.VY.displayName},2264(e,s,a){a.d(s,{p:()=>o});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const d=["className","type"],o=r.forwardRef((e,s)=>{let{className:a,type:r}=e,o=(0,l.A)(e,d);return(0,i.jsx)("input",(0,t.A)({type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-white px-3 py-1 text-base text-gray-900 shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s},o))});o.displayName="Input"},9938(e,s,a){a.d(s,{J:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(5131),i=a(917),d=a(1089),o=a(579);const c=["className"],m=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,o.jsx)(n.b,(0,t.A)({ref:s,className:(0,d.cn)(m(),a)},r))});x.displayName=n.b.displayName},3416(e,s,a){a.d(s,{T:()=>o});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const d=["className"],o=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,d);return(0,i.jsx)("textarea",(0,t.A)({className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s},r))});o.displayName="Textarea"},1089(e,s,a){a.d(s,{cn:()=>r});var t=a(8387),l=a(9359);function r(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.QP)((0,t.$)(s))}},8345(e,s,a){a.r(s),a.d(s,{default:()=>ue});var t=a(2555),l=a(5043),r=a(5029),n=a(6930),i=a(8729),d=a(9722),o=a(3390),c=a(1140),m=a(5949),x=a(2264),h=a(3416),u=a(9938),g=a(5598),p=a(2024),b=a(5727),y=a(9493),j=a(2054),v=a(2626),f=a(9233),N=a(6405),w=a(5347),A=a(2029),_=a(1130),C=a(1680),S=a(6382),k=a(2574),P=a(1527),R=a(9333),D=a(5242),z=a(8800),I=a(4459),F=a(7095),L=a(7365),T=a(3658),B=a(5088),E=a(6245),G=a(5746),O=a(2489),$=a(1286),J=a(5327),M=a(8646),U=a(7737),q=a(6533),V=a(4651),H=a(5087),W=a(7118),Z=a(2494),K=a(6376),Q=a(1360),Y=a(152),X=a(7010),ee=a(4830),se=a(2638),ae=a(4918),te=a(8306),le=a(6511),re=a(6328),ne=a(7819),ie=a(7104),de=a(579);const oe=e=>{var s,a,t,l,r,n,i,d,o,c,m,x,h,u,g,p,b,y,j;let{data:v}=e;return v?(0,de.jsxs)("div",{className:"p-8 max-w-2xl mx-auto bg-white",style:{fontFamily:"Arial, sans-serif"},children:[(0,de.jsxs)("div",{className:"text-center border-b-2 border-gray-800 pb-4 mb-4",children:[(0,de.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:null===(s=v.school)||void 0===s?void 0:s.name}),(0,de.jsx)("p",{className:"text-sm text-gray-600",children:null===(a=v.school)||void 0===a?void 0:a.address}),(0,de.jsxs)("p",{className:"text-sm text-gray-600",children:["Phone: ",null===(t=v.school)||void 0===t?void 0:t.phone]})]}),(0,de.jsxs)("div",{className:"text-center bg-indigo-600 text-white py-2 mb-4",children:[(0,de.jsx)("h2",{className:"text-xl font-bold",children:"ADMIT CARD / \u092a\u094d\u0930\u0935\u0947\u0936 \u092a\u0924\u094d\u0930"}),(0,de.jsxs)("p",{className:"text-sm",children:[null===(l=v.exam)||void 0===l?void 0:l.name," - ",null===(r=v.exam)||void 0===r?void 0:r.type]})]}),(0,de.jsxs)("div",{className:"flex gap-6 mb-6",children:[(0,de.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,de.jsxs)("div",{className:"flex",children:[(0,de.jsx)("span",{className:"w-32 font-medium",children:"Name / \u0928\u093e\u092e:"}),(0,de.jsx)("span",{className:"font-bold",children:null===(n=v.student)||void 0===n?void 0:n.name})]}),(0,de.jsxs)("div",{className:"flex",children:[(0,de.jsx)("span",{className:"w-32 font-medium",children:"Father's Name:"}),(0,de.jsx)("span",{children:null===(i=v.student)||void 0===i?void 0:i.father_name})]}),(0,de.jsxs)("div",{className:"flex",children:[(0,de.jsx)("span",{className:"w-32 font-medium",children:"Roll No:"}),(0,de.jsx)("span",{className:"font-bold",children:null===(d=v.student)||void 0===d?void 0:d.roll_no})]}),(0,de.jsxs)("div",{className:"flex",children:[(0,de.jsx)("span",{className:"w-32 font-medium",children:"Class:"}),(0,de.jsxs)("span",{children:[null===(o=v.student)||void 0===o?void 0:o.class," ",null===(c=v.student)||void 0===c?void 0:c.section]})]}),(0,de.jsxs)("div",{className:"flex",children:[(0,de.jsx)("span",{className:"w-32 font-medium",children:"DOB:"}),(0,de.jsx)("span",{children:null===(m=v.student)||void 0===m?void 0:m.dob})]})]}),(0,de.jsx)("div",{className:"w-32 h-40 border-2 border-gray-300 flex items-center justify-center",children:null!==(x=v.student)&&void 0!==x&&x.photo_url?(0,de.jsx)("img",{src:v.student.photo_url,alt:"Student",className:"w-full h-full object-cover"}):(0,de.jsx)("span",{className:"text-gray-400 text-xs text-center",children:"Photo"})})]}),(0,de.jsxs)("div",{className:"mb-6",children:[(0,de.jsx)("h3",{className:"font-bold text-gray-900 mb-2 border-b pb-1",children:"Exam Schedule / \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0938\u092e\u092f \u0938\u093e\u0930\u093f\u0923\u0940"}),(0,de.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("span",{className:"text-gray-600",children:"Start Date:"}),(0,de.jsx)("span",{className:"ml-2 font-medium",children:null===(h=v.exam)||void 0===h?void 0:h.start_date})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("span",{className:"text-gray-600",children:"End Date:"}),(0,de.jsx)("span",{className:"ml-2 font-medium",children:null===(u=v.exam)||void 0===u?void 0:u.end_date})]})]})]}),(0,de.jsxs)("div",{className:"mb-6",children:[(0,de.jsx)("h3",{className:"font-bold text-gray-900 mb-2 border-b pb-1",children:"Instructions / \u0928\u093f\u0930\u094d\u0926\u0947\u0936"}),(0,de.jsx)("ol",{className:"text-sm list-decimal list-inside space-y-1",children:null===(g=v.exam)||void 0===g||null===(p=g.instructions)||void 0===p?void 0:p.map((e,s)=>(0,de.jsx)("li",{children:e},s))})]}),(0,de.jsxs)("div",{className:"flex justify-between items-end mt-8 pt-4 border-t",children:[(0,de.jsxs)("div",{className:"text-center",children:[(0,de.jsx)("div",{className:"w-32 h-16 border-b border-gray-400 mb-1"}),(0,de.jsx)("p",{className:"text-xs",children:"Student's Signature"})]}),(0,de.jsxs)("div",{className:"text-center",children:[(null===(b=v.seal)||void 0===b?void 0:b.image_url)&&(0,de.jsx)("img",{src:v.seal.image_url,alt:"Seal",className:"w-20 h-20 mx-auto"}),(0,de.jsx)("p",{className:"text-xs",children:"School Seal"})]}),(0,de.jsxs)("div",{className:"text-center",children:[(null===(y=v.signature)||void 0===y?void 0:y.image_url)&&(0,de.jsx)("img",{src:v.signature.image_url,alt:"Signature",className:"w-24 h-12 mx-auto"}),(0,de.jsx)("div",{className:"w-32 h-16 border-b border-gray-400 mb-1"}),(0,de.jsx)("p",{className:"text-xs",children:"director"===(null===(j=v.signature)||void 0===j?void 0:j.authority)?"Director":"Principal"})]})]}),(0,de.jsxs)("div",{className:"text-center mt-4 text-xs text-gray-500",children:["Admit Card No: ",v.admit_card_no," | Generated: ",new Date(v.generated_at).toLocaleString()]})]}):null},ce=e=>{var s,a,r;let{studentId:n,schoolId:i,profile:o}=e;const c=i||(null===o||void 0===o?void 0:o.school_id)||(null===o||void 0===o?void 0:o.schoolId),[m,x]=(0,l.useState)([]),[h,u]=(0,l.useState)(!0),[g,p]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),[f,N]=(0,l.useState)(0),[w,A]=(0,l.useState)(!1),[_,S]=(0,l.useState)(null);(0,l.useRef)();(0,l.useEffect)(()=>{n&&c?k():(u(!1),n?c||S("School ID \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u0940"):S("Student ID \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u0940"))},[n,c]);const k=async()=>{u(!0),S(null);try{const e=((await d.A.get("".concat("","/api/admit-card/student/my-admit-cards/").concat(n,"?school_id=").concat(c))).data.admit_cards||[]).map(e=>(0,t.A)((0,t.A)({},e),{},{is_eligible:void 0!==e.is_eligible?e.is_eligible:e.eligible_to_download,is_generated:e.is_generated||!1}));x(e)}catch(e){console.error("Error fetching admit cards:",e),S("Admit cards load \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u090f\u0964 \u0936\u093e\u092f\u0926 \u0905\u092d\u0940 \u0915\u094b\u0908 exam \u0928\u0939\u0940\u0902 \u0939\u0948\u0964")}finally{u(!1)}};return h?(0,de.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,de.jsx)("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),(0,de.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading..."})]}):_?(0,de.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 text-center",children:[(0,de.jsx)(ne.A,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,de.jsx)("p",{className:"text-amber-800 font-medium",children:_}),(0,de.jsx)("p",{className:"text-sm text-amber-600 mt-2",children:"Admin \u0938\u0947 \u0938\u0902\u092a\u0930\u094d\u0915 \u0915\u0930\u0947\u0902 \u092f\u093e \u092c\u093e\u0926 \u092e\u0947\u0902 try \u0915\u0930\u0947\u0902"})]}):(0,de.jsxs)("div",{className:"space-y-6",children:[(0,de.jsx)("div",{className:"flex items-center justify-between",children:(0,de.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,de.jsx)(C.A,{className:"w-6 h-6 text-indigo-600"}),"Admit Cards / \u092a\u094d\u0930\u0935\u0947\u0936 \u092a\u0924\u094d\u0930"]})}),0===m.length?(0,de.jsxs)("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[(0,de.jsx)(C.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,de.jsx)("p",{className:"text-gray-600",children:"\u0915\u094b\u0908 Admit Card \u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0939\u0940\u0902 \u0939\u0948"}),(0,de.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"\u091c\u092c exam schedule \u0939\u094b\u0917\u0940, admit card \u092f\u0939\u093e\u0901 \u0926\u093f\u0916\u0947\u0917\u093e"})]}):(0,de.jsx)("div",{className:"grid gap-4",children:m.map(e=>(0,de.jsxs)("div",{className:"bg-white rounded-xl border-2 overflow-hidden ".concat(e.is_eligible?"border-green-200":"border-amber-200"),children:[(0,de.jsx)("div",{className:"px-4 py-3 ".concat(e.is_eligible?"bg-green-50":"bg-amber-50"),children:(0,de.jsxs)("div",{className:"flex items-center justify-between",children:[(0,de.jsxs)("div",{className:"flex items-center gap-3",children:[(0,de.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.is_eligible?"bg-green-500":"bg-amber-500"),children:e.is_eligible?(0,de.jsx)(j.A,{className:"w-5 h-5 text-white"}):(0,de.jsx)(b.A,{className:"w-5 h-5 text-white"})}),(0,de.jsxs)("div",{children:[(0,de.jsx)("h3",{className:"font-semibold text-gray-900",children:e.exam_name}),(0,de.jsx)("p",{className:"text-sm text-gray-600",children:e.exam_type})]})]}),(0,de.jsx)("div",{className:"text-right",children:(0,de.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,de.jsx)(M.A,{className:"w-4 h-4 inline mr-1"}),e.start_date," - ",e.end_date]})})]})}),(0,de.jsxs)("div",{className:"p-4",children:[e.fee_status&&(0,de.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,de.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,de.jsx)("span",{className:"text-sm text-gray-600",children:"Fee Status"}),(0,de.jsxs)("span",{className:"text-sm font-medium ".concat(e.is_eligible?"text-green-600":"text-amber-600"),children:[e.fee_status.paid_percentage,"% Paid"]})]}),(0,de.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,de.jsx)("div",{className:"h-2 rounded-full ".concat(e.is_eligible?"bg-green-500":"bg-amber-500"),style:{width:"".concat(Math.min(100,e.fee_status.paid_percentage),"%")}})}),!e.is_eligible&&(0,de.jsxs)("p",{className:"text-xs text-amber-600 mt-2",children:["\u26a0\ufe0f Minimum \u20b9",e.min_amount_required," fee \u091c\u092e\u093e \u0915\u0930\u0947\u0902"]})]}),(0,de.jsx)("button",{onClick:()=>(async e=>{if(!e.is_eligible)return p(e),N(e.min_amount_required),void v(!0);if(e.is_generated&&e.admit_card)p(e),setTimeout(()=>{window.print()},500);else try{A(!0);const s=await d.A.get("".concat("","/api/admit-card/generate/").concat(c,"/").concat(e.exam_id,"/").concat(n));s.data.success?(re.oR.success("Admit Card generated!"),k()):re.oR.error(s.data.message||"Generation failed")}catch(s){re.oR.error("Admit card generate \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u092f\u093e")}finally{A(!1)}})(e),disabled:w,className:"w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all ".concat(e.is_eligible?"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-amber-500 hover:bg-amber-600 text-white"),children:w?(0,de.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.is_eligible?(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(ie.A,{className:"w-5 h-5"}),"Download Admit Card"]}):(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(K.A,{className:"w-5 h-5"}),"Pay \u20b9",e.min_amount_required," & Download"]})})]})]},e.exam_id))}),y&&g&&(0,de.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,de.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,de.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Fee Payment Required"}),(0,de.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4",children:(0,de.jsxs)("p",{className:"text-amber-800",children:[(0,de.jsx)(ne.A,{className:"w-5 h-5 inline mr-2"}),"Admit Card download \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f minimum fee \u091c\u092e\u093e \u0915\u0930\u0947\u0902"]})}),(0,de.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,de.jsxs)("div",{className:"flex justify-between",children:[(0,de.jsx)("span",{className:"text-gray-600",children:"Total Fee"}),(0,de.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(s=g.fee_status)||void 0===s?void 0:s.total_fee)||0]})]}),(0,de.jsxs)("div",{className:"flex justify-between",children:[(0,de.jsx)("span",{className:"text-gray-600",children:"Paid"}),(0,de.jsxs)("span",{className:"font-medium text-green-600",children:["\u20b9",(null===(a=g.fee_status)||void 0===a?void 0:a.paid_fee)||0]})]}),(0,de.jsxs)("div",{className:"flex justify-between",children:[(0,de.jsx)("span",{className:"text-gray-600",children:"Pending"}),(0,de.jsxs)("span",{className:"font-medium text-red-600",children:["\u20b9",(null===(r=g.fee_status)||void 0===r?void 0:r.pending_fee)||0]})]}),(0,de.jsx)("hr",{}),(0,de.jsxs)("div",{className:"flex justify-between",children:[(0,de.jsx)("span",{className:"text-gray-900 font-medium",children:"Minimum Required"}),(0,de.jsxs)("span",{className:"font-bold text-lg text-indigo-600",children:["\u20b9",f]})]})]}),(0,de.jsxs)("div",{className:"flex gap-3",children:[(0,de.jsx)("button",{onClick:()=>v(!1),className:"flex-1 py-3 rounded-xl border-2 border-gray-200 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),(0,de.jsx)("button",{onClick:async()=>{if(g){A(!0);try{(await d.A.post("".concat("","/api/admit-card/student/pay-for-admit-card"),{school_id:c,student_id:n,exam_id:g.exam_id,amount:f,payment_method:"online"})).data.success&&(re.oR.success("Payment successful! Admit Card ready"),v(!1),k())}catch(e){re.oR.error("Payment failed")}finally{A(!1)}}},disabled:w,className:"flex-1 py-3 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium flex items-center justify-center gap-2",children:w?(0,de.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(K.A,{className:"w-5 h-5"}),"Pay \u20b9",f]})})]})]})}),(null===g||void 0===g?void 0:g.admit_card)&&(0,de.jsx)("div",{className:"hidden print:block",children:(0,de.jsx)(oe,{data:g.admit_card})})]})};var me=a(8106);const xe="".concat("","/api"),he=()=>(0,de.jsxs)("span",{className:"inline-flex flex-col ml-1 -space-y-1 opacity-40",children:[(0,de.jsx)("span",{className:"text-[8px] leading-none",children:"\u25b2"}),(0,de.jsx)("span",{className:"text-[8px] leading-none",children:"\u25bc"})]});function ue(){const{t:e}=(0,n.Bd)(),{user:s,logout:a,schoolData:ne}=(0,i.As)(),ie=(0,r.Zp)(),[oe,ue]=(0,l.useState)(!0),[ge,pe]=(0,l.useState)(null),[be,ye]=(0,l.useState)([]),[je,ve]=(0,l.useState)([]),[fe,Ne]=(0,l.useState)([]),[we,Ae]=(0,l.useState)({present:0,total:0}),[_e,Ce]=(0,l.useState)(!1),[Se,ke]=(0,l.useState)(!1),[Pe,Re]=(0,l.useState)(!1),[De,ze]=(0,l.useState)(!1),[Ie,Fe]=(0,l.useState)(!1),[Le,Te]=(0,l.useState)(!1),[Be,Ee]=(0,l.useState)(!1),[Ge,Oe]=(0,l.useState)(!1),[$e,Je]=(0,l.useState)(null),[Me,Ue]=(0,l.useState)(!1),[qe,Ve]=(0,l.useState)(!1),[He,We]=(0,l.useState)(!1),[Ze,Ke]=(0,l.useState)(!1),[Qe,Ye]=(0,l.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),[Xe,es]=(0,l.useState)([]),[ss,as]=(0,l.useState)(""),[ts,ls]=(0,l.useState)(null),[rs,ns]=(0,l.useState)({complaint_to:"teacher",category:"academic",subject:"",description:"",is_anonymous:!1}),[is,ds]=(0,l.useState)([]),[os,cs]=(0,l.useState)(!1),[ms,xs]=(0,l.useState)(""),[hs,us]=(0,l.useState)(!1),[gs,ps]=(0,l.useState)("free"),[bs,ys]=(0,l.useState)(null),[js,vs]=(0,l.useState)(null),[fs,Ns]=(0,l.useState)(""),[ws,As]=(0,l.useState)(""),[_s,Cs]=(0,l.useState)("upi"),[Ss,ks]=(0,l.useState)(""),[Ps,Rs]=(0,l.useState)([]),[Ds,zs]=(0,l.useState)(!1),[Is,Fs]=(0,l.useState)({leave_type:"sick",from_date:"",to_date:"",reason:""}),[Ls,Ts]=(0,l.useState)(!1),[Bs,Es]=(0,l.useState)(!1),[Gs,Os]=(0,l.useState)(0),[$s,Js]=(0,l.useState)([]),[Ms,Us]=(0,l.useState)(""),[qs,Vs]=(0,l.useState)(0),[Hs,Ws]=(0,l.useState)(!1),[Zs,Ks]=(0,l.useState)([]),[Qs,Ys]=(0,l.useState)(!1),[Xs,ea]=(0,l.useState)([]),[sa,aa]=(0,l.useState)(""),[ta,la]=(0,l.useState)(!1),[ra,na]=(0,l.useState)([]),[ia,da]=(0,l.useState)([]),[oa,ca]=(0,l.useState)(""),[ma,xa]=(0,l.useState)(!1);(0,l.useEffect)(()=>{ha()},[]);const ha=async()=>{ue(!0);try{const[l,r,n]=await Promise.allSettled([d.A.get("".concat(xe,"/student/dashboard")),d.A.get("".concat(xe,"/student/notices")),d.A.get("".concat(xe,"/student/homework"))]);if("fulfilled"===l.status){var e;const s=l.value.data;pe(s.profile),"blocked"===(null===(e=s.profile)||void 0===e?void 0:e.status)&&Ts(!0),s.attendance_summary&&Ae({present:s.attendance_summary.percentage||0,total:s.attendance_summary.total||0}),s.fee_status&&Vs(s.fee_status.pending||0),s.recent_notices&&ye(s.recent_notices)}if(ye(e=>e.length>0?e:"fulfilled"===r.status&&r.value.data||[]),ve("fulfilled"===n.status&&n.value.data||[]),"fulfilled"===l.status){var s;const e=null===(s=l.value.data)||void 0===s?void 0:s.profile;if(null!==e&&void 0!==e&&e.school_id&&null!==e&&void 0!==e&&e.class_id)try{var a;const s=(null===(a=(await d.A.get("".concat(xe,"/syllabus-progress/student/").concat(e.school_id,"/").concat(e.class_id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data)||void 0===a?void 0:a.subjects)||[];Ne(s.map(e=>{var s,a;return{subject:e.subject,completed:e.completion_percentage||0,current:(null===(s=e.chapters)||void 0===s||null===(a=s.find(e=>"in_progress"===e.status))||void 0===a?void 0:a.chapter_name)||(e.completed_count>0?"Completed":"Not Started"),chapters:e.chapters||[],total:e.total_count||0,completedCount:e.completed_count||0,inProgressCount:e.in_progress_count||0}}))}catch(t){Ne([])}else Ne([])}else Ne([])}catch(l){console.error("Dashboard fetch error:",l)}finally{ue(!1)}},ua=async()=>{if(ss.trim()&&ts)try{const e=await d.A.post("".concat(xe,"/chat/messages/send"),{group_id:ts.id,content:ss,sender_id:null===s||void 0===s?void 0:s.id,sender_name:(null===ge||void 0===ge?void 0:ge.name)||(null===s||void 0===s?void 0:s.name),sender_role:"student"});es(s=>[...s,e.data.data]),as("")}catch(e){re.oR.error("Failed to send message")}},ga=(0,l.useCallback)(async()=>{if(!ms||isNaN(ms)||Number(ms)<=0)re.oR.error("Please enter a valid amount");else{us(!0);try{if(!await new Promise(e=>{if(window.Razorpay)return void e(!0);const s=document.createElement("script");s.src="https://checkout.razorpay.com/v1/checkout.js",s.onload=()=>e(!0),s.onerror=()=>e(!1),document.body.appendChild(s)}))return re.oR.error("Payment gateway loading failed"),void us(!1);const e=await d.A.post("".concat(xe,"/razorpay/create-order"),{amount:Math.round(100*Number(ms)),student_id:null===s||void 0===s?void 0:s.id,student_name:(null===ge||void 0===ge?void 0:ge.name)||(null===s||void 0===s?void 0:s.name),school_id:(null===ge||void 0===ge?void 0:ge.school_id)||"default",fee_type:"tuition",description:"Fee Payment - ".concat(null===ge||void 0===ge?void 0:ge.name)}),{order_id:a,key_id:t,amount:l}=e.data,r={key:t,amount:l,currency:"INR",name:"Schooltino",description:"Fee Payment - ".concat(null===ge||void 0===ge?void 0:ge.class_name),order_id:a,handler:async e=>{try{await d.A.post("".concat(xe,"/razorpay/verify-payment"),{razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,student_id:null===s||void 0===s?void 0:s.id,school_id:(null===ge||void 0===ge?void 0:ge.school_id)||"default"}),re.oR.success("Payment successful!"),cs(!1),xs("")}catch(a){re.oR.error("Payment verification failed. Please contact school.")}},prefill:{name:(null===ge||void 0===ge?void 0:ge.name)||(null===s||void 0===s?void 0:s.name),email:(null===s||void 0===s?void 0:s.email)||"",contact:(null===ge||void 0===ge?void 0:ge.mobile)||""},theme:{color:"#3B82F6"},modal:{ondismiss:()=>{us(!1)}}};new window.Razorpay(r).open()}catch(e){re.oR.error("Failed to initiate payment")}finally{us(!1)}}},[ms,s,ge]),pa=(0,l.useCallback)(async()=>{try{var e;const a=localStorage.getItem("token"),[t,l]=await Promise.allSettled([d.A.get("".concat(xe,"/school/payment-settings?school_id=").concat((null===ge||void 0===ge?void 0:ge.school_id)||(null===s||void 0===s?void 0:s.school_id)),{headers:{Authorization:"Bearer ".concat(a)}}),d.A.get("".concat(xe,"/parent/fee-details/").concat(null===s||void 0===s?void 0:s.id),{headers:{Authorization:"Bearer ".concat(a)}})]);"fulfilled"===t.status&&ys(t.value.data),"fulfilled"===l.status&&Rs((null===(e=l.value.data)||void 0===e?void 0:e.payment_history)||[])}catch(a){}},[ge,s]),ba=(0,l.useCallback)(()=>{pa(),cs(!0),ps("free"),vs(null),Ns(""),As(""),xs("")},[pa]),ya=async()=>{try{const e=await d.A.get("".concat(xe,"/student/wallet?student_id=").concat(null===s||void 0===s?void 0:s.id));Os(e.data.balance||0),Js(e.data.transactions||[])}catch(e){Os(0),Js([])}Es(!0)},ja=e=>{sa.trim()&&(ea(s=>s.map(s=>s.id===e?(0,t.A)((0,t.A)({},s),{},{comments:[...s.comments||[],{id:Date.now().toString(),author:(null===ge||void 0===ge?void 0:ge.name)||"Student",text:sa}]}):s)),d.A.post("".concat(xe,"/school-feed/").concat(e,"/comment"),{text:sa}).catch(()=>{}),aa(""))},va=async()=>{if(!oa.trim())return;const e={role:"user",content:oa};da(s=>[...s,e]),ca(""),xa(!0);try{const e=await d.A.post("".concat(xe,"/tino-ai/chat"),{message:oa,user_id:null===s||void 0===s?void 0:s.id,school_id:(null===ge||void 0===ge?void 0:ge.school_id)||(null===s||void 0===s?void 0:s.school_id),language:"hi"});da(s=>[...s,{role:"assistant",content:e.data.response||e.data.message||"I can help you with your studies! Try asking me about any subject."}])}catch(a){da(e=>[...e,{role:"assistant",content:"Could not connect. Please try again."}])}finally{xa(!1)}},fa=()=>{a(),ie("/login")},Na=je.filter(e=>"pending"===e.status).length;if(oe)return(0,de.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,de.jsx)(p.A,{className:"w-10 h-10 animate-spin text-blue-500"})});if(Ls)return(0,de.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,de.jsxs)(c.Zp,{className:"max-w-md w-full text-center p-8 bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(b.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,de.jsx)("h1",{className:"text-xl font-bold text-gray-800 mb-2",children:"Account Blocked"}),(0,de.jsx)("p",{className:"text-gray-600 mb-6",children:"Please contact school office."}),(0,de.jsxs)(o.$,{onClick:fa,variant:"outline",className:"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 rounded-lg",children:[(0,de.jsx)(y.A,{className:"w-4 h-4 mr-2"})," ",e("logout")]})]})});const wa=[{label:e("attendance"),value:"".concat(we.present,"%"),icon:j.A,subtext:"Your attendance percentage",bgColor:"bg-green-50",textColor:"text-green-500"},{label:e("homework"),value:Na,icon:v.A,subtext:"Assignments due",bgColor:"bg-amber-50",textColor:"text-amber-500"},{label:e("notices"),value:be.length,icon:f.A,subtext:"School announcements",bgColor:"bg-blue-50",textColor:"text-blue-500"},{label:e("subjects"),value:fe.length,icon:N.A,subtext:"Enrolled subjects",bgColor:"bg-indigo-50",textColor:"text-indigo-500"},{label:"Syllabus Completed",value:"".concat(Math.round(fe.reduce((e,s)=>e+s.completed,0)/(fe.length||1)),"%"),icon:w.A,subtext:"Overall syllabus progress",bgColor:"bg-purple-50",textColor:"text-purple-500"},{label:e("fees"),value:qs>0?"\u20b9"+qs.toLocaleString("en-IN"):"\u20b90",icon:A.A,subtext:"Pending fee balance",bgColor:"bg-red-50",textColor:"text-red-500"},{label:"Activities",value:0,icon:_.A,subtext:"Extra-curricular activities",bgColor:"bg-orange-50",textColor:"text-orange-500"},{label:e("exams"),value:0,icon:C.A,subtext:"Upcoming examinations",bgColor:"bg-cyan-50",textColor:"text-cyan-500"}],Aa=[{id:"studyai",name:"StudyAI",desc:"AI-powered study assistant for homework help & learning.",icon:S.A,lightBg:"bg-violet-50",iconColor:"text-violet-600",action:()=>ze(!0)},{id:"feetino",name:"FeeTino",desc:"Pay school fees online via UPI or Razorpay.",icon:A.A,lightBg:"bg-green-50",iconColor:"text-green-600",action:()=>ba()},{id:"classchat",name:"ClassChat",desc:"Real-time chat with classmates & group discussions.",icon:k.A,lightBg:"bg-blue-50",iconColor:"text-blue-600",action:()=>(async()=>{try{const e=await d.A.get("".concat(xe,"/chat/groups/class/").concat(null===ge||void 0===ge?void 0:ge.class_id,"?school_id=").concat(null===ge||void 0===ge?void 0:ge.school_id));ls(e.data);const s=await d.A.get("".concat(xe,"/chat/messages/").concat(e.data.id,"?limit=50"));es(s.data.messages||[]),Fe(!0)}catch(e){re.oR.error("Failed to load chat")}})()},{id:"admitcard",name:"AdmitCard",desc:"View & download exam admit cards instantly.",icon:w.A,lightBg:"bg-amber-50",iconColor:"text-amber-600",action:()=>Oe(!0)},{id:"activities",name:"Activities",desc:"Track your extra-curricular activities & achievements.",icon:_.A,lightBg:"bg-red-50",iconColor:"text-red-600",action:()=>(async()=>{try{const e=await d.A.get("".concat(xe,"/activities/student/").concat(null===s||void 0===s?void 0:s.id));ds(e.data.activities||[]),Ee(!0)}catch(e){ds([]),Ee(!0)}})()},{id:"wallet",name:"My Wallet",desc:"View balance, add money & track spending.",icon:P.A,lightBg:"bg-emerald-50",iconColor:"text-emerald-600",action:()=>ya()},{id:"liveclass",name:"Live Class",desc:"Join live classes, view schedule & recordings.",icon:R.A,lightBg:"bg-pink-50",iconColor:"text-pink-600",action:()=>(async()=>{try{const e=await d.A.get("".concat(xe,"/student/live-classes")),s=e.data.classes||e.data||[];Ks(Array.isArray(s)?s:[])}catch(e){Ks([])}Ws(!0)})()},{id:"complaint",name:"Complaint",desc:"Submit a complaint to school administration.",icon:D.A,lightBg:"bg-orange-50",iconColor:"text-orange-600",action:()=>Te(!0)},{id:"applyleave",name:"Apply Leave",desc:"Submit leave application for approval.",icon:z.A,lightBg:"bg-teal-50",iconColor:"text-teal-600",action:()=>Ce(!0)},{id:"myprofile",name:"My Profile",desc:"View & manage your profile details.",icon:I.A,lightBg:"bg-slate-50",iconColor:"text-slate-600",action:()=>Re(!0)}];return(0,de.jsxs)("div",{className:"min-h-screen bg-gray-50 relative","data-testid":"studytino-dashboard",children:[(0,de.jsx)(me.Go,{}),(0,de.jsxs)("header",{className:"sticky top-0 z-50 relative",style:{zIndex:50},children:[ne&&(0,de.jsx)("div",{className:"bg-gradient-to-r from-blue-700 via-blue-800 to-indigo-900 text-white px-4 py-1.5",children:(0,de.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-between text-[10px]",children:[(0,de.jsx)("span",{className:"font-medium truncate",children:ne.name}),(0,de.jsxs)("div",{className:"hidden sm:flex items-center gap-3 text-blue-200",children:[ne.phone&&(0,de.jsx)("span",{children:ne.phone}),ne.email&&(0,de.jsx)("span",{children:ne.email}),ne.board_type&&(0,de.jsx)("span",{className:"bg-white/10 px-1.5 py-0.5 rounded text-white font-semibold",children:ne.board_type})]})]})}),(0,de.jsx)("div",{className:"bg-white border-b border-gray-100",children:(0,de.jsx)("div",{className:"max-w-5xl mx-auto px-4 py-3",children:(0,de.jsxs)("div",{className:"flex items-center justify-between",children:[(0,de.jsxs)("div",{className:"flex items-center gap-3",children:[null!==ge&&void 0!==ge&&ge.photo_url?(0,de.jsx)("img",{src:ge.photo_url,alt:"",className:"w-10 h-10 rounded-full object-cover border-2 border-blue-100"}):(0,de.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:((null===ge||void 0===ge?void 0:ge.name)||"S").charAt(0)}),(0,de.jsxs)("div",{children:[(0,de.jsx)("h1",{className:"font-semibold text-gray-800 text-sm",children:(null===ge||void 0===ge?void 0:ge.name)||(null===s||void 0===s?void 0:s.name)||"Student"}),(0,de.jsxs)("p",{className:"text-xs text-gray-400",children:[(null===ge||void 0===ge?void 0:ge.class_name)||"Class",null!==ge&&void 0!==ge&&ge.section?" - "+ge.section:""," | ",(null===ge||void 0===ge?void 0:ge.student_id)||""]})]})]}),(0,de.jsxs)("div",{className:"flex items-center gap-1",children:[(0,de.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>(async()=>{try{const e=await d.A.get("".concat(xe,"/e-store/items"));na(e.data.items||e.data||[])}catch(e){na([])}la(!0)})(),className:"hover:bg-gray-50 rounded-xl",title:"E-Store",children:(0,de.jsx)(F.A,{className:"w-5 h-5 text-gray-400"})}),(0,de.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>Re(!0),className:"hover:bg-gray-50 rounded-xl",children:(0,de.jsx)(L.A,{className:"w-5 h-5 text-gray-400"})}),(0,de.jsx)(o.$,{variant:"ghost",size:"icon",onClick:fa,className:"text-gray-400 hover:bg-gray-50 rounded-xl",children:(0,de.jsx)(y.A,{className:"w-5 h-5"})})]})]})})})]}),(0,de.jsxs)("main",{className:"max-w-5xl mx-auto px-4 py-5 space-y-6 pb-24",children:[(0,de.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,de.jsxs)("button",{className:"flex items-center gap-1.5 px-3.5 py-1.5 bg-blue-500 text-white rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:[(0,de.jsx)(T.A,{className:"w-3.5 h-3.5"})," ",e("home")]}),(0,de.jsx)("span",{className:"text-gray-300",children:"\u203a"}),(0,de.jsx)("span",{className:"text-gray-500 text-xs",children:e("dashboard")})]}),(0,de.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[(0,de.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Welcome, ",(null===ge||void 0===ge?void 0:ge.name)||"Student","!"]}),(0,de.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(null===ge||void 0===ge?void 0:ge.class_name)||"Class"," \u2022 ",(null===ge||void 0===ge?void 0:ge.school_name)||"School"]})]}),(0,de.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:wa.map((e,s)=>(0,de.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-sm transition-all",children:[(0,de.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,de.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:e.label}),(0,de.jsx)("div",{className:"w-9 h-9 ".concat(e.bgColor," rounded-xl flex items-center justify-center"),children:(0,de.jsx)(e.icon,{className:"w-4 h-4 ".concat(e.textColor)})})]}),(0,de.jsx)("div",{className:"text-2xl font-bold text-gray-800 mb-0.5",children:e.value}),(0,de.jsx)("div",{className:"text-xs text-gray-400",children:e.subtext})]},s))}),(0,de.jsxs)("div",{children:[(0,de.jsxs)("div",{className:"mb-4",children:[(0,de.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Key Features"}),(0,de.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Powerful tools crafted to enhance your learning experience."})]}),(0,de.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:Aa.map(e=>(0,de.jsxs)("div",{onClick:e.action,className:"group cursor-pointer bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-all duration-200 hover:scale-[1.02]",children:[(0,de.jsx)("div",{className:"w-12 h-12 ".concat(e.lightBg," rounded-xl flex items-center justify-center mb-3"),children:(0,de.jsx)(e.icon,{className:"w-6 h-6 ".concat(e.iconColor)})}),(0,de.jsx)("h3",{className:"font-semibold text-gray-900 text-sm mb-1",children:e.name}),(0,de.jsx)("p",{className:"text-xs text-gray-400 leading-relaxed line-clamp-2",children:e.desc})]},e.id))})]}),je.length>0&&(0,de.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[(0,de.jsxs)("div",{className:"px-5 pt-5 pb-4",children:[(0,de.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e("homework")}),(0,de.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Pending and completed homework assignments."})]}),(0,de.jsx)("div",{className:"overflow-x-auto",children:(0,de.jsxs)("table",{className:"w-full",children:[(0,de.jsx)("thead",{children:(0,de.jsxs)("tr",{className:"border-t border-b border-gray-200 bg-gray-50/80",children:[(0,de.jsxs)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-600 whitespace-nowrap",children:["Subject ",(0,de.jsx)(he,{})]}),(0,de.jsxs)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-600 hidden sm:table-cell whitespace-nowrap",children:["Topic ",(0,de.jsx)(he,{})]}),(0,de.jsxs)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-600 whitespace-nowrap",children:["Due Date ",(0,de.jsx)(he,{})]}),(0,de.jsx)("th",{className:"text-right px-5 py-3 text-xs font-semibold text-gray-600 whitespace-nowrap",children:"Status"})]})}),(0,de.jsx)("tbody",{children:je.map(s=>(0,de.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-blue-50/40 transition-colors",children:[(0,de.jsx)("td",{className:"px-5 py-3.5 text-sm text-gray-800",children:s.subject}),(0,de.jsx)("td",{className:"px-5 py-3.5 text-sm text-gray-500 hidden sm:table-cell",children:s.topic}),(0,de.jsx)("td",{className:"px-5 py-3.5 text-sm text-gray-500",children:new Date(s.due_date).toLocaleDateString("hi-IN")}),(0,de.jsx)("td",{className:"px-5 py-3.5 text-right",children:(0,de.jsx)("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full ".concat("pending"===s.status?"bg-amber-50 text-amber-600 border border-amber-200":"bg-green-50 text-green-600 border border-green-200"),children:"pending"===s.status?e("pending"):e("completed")})})]},s.id))})]})})]}),fe.length>0&&(0,de.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[(0,de.jsxs)("div",{className:"px-5 pt-5 pb-4",children:[(0,de.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Syllabus Progress"}),(0,de.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Subject-wise syllabus completion status."})]}),(0,de.jsx)("div",{className:"space-y-3 px-5 pb-5",children:fe.map((e,s)=>{const a=["blue","green","purple","amber","teal","rose"],t=a[s%a.length];return(0,de.jsxs)("div",{className:"border border-gray-100 rounded-xl p-4",children:[(0,de.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,de.jsx)("h3",{className:"text-sm font-semibold text-gray-800",children:e.subject}),(0,de.jsxs)("span",{className:"text-sm font-bold text-".concat(t,"-600"),children:[e.completed,"%"]})]}),(0,de.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2 mb-2",children:(0,de.jsx)("div",{className:"h-2 rounded-full bg-".concat(t,"-500 transition-all"),style:{width:"".concat(e.completed,"%")}})}),(0,de.jsxs)("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 mb-2",children:[(0,de.jsxs)("span",{className:"flex items-center gap-1",children:[(0,de.jsx)(j.A,{className:"w-3 h-3 text-green-500"})," ",e.completedCount||0," Done"]}),(0,de.jsxs)("span",{className:"flex items-center gap-1",children:[(0,de.jsx)(B.A,{className:"w-3 h-3 text-amber-500"})," ",e.inProgressCount||0," In Progress"]}),(0,de.jsxs)("span",{className:"text-gray-400",children:["Total: ",e.total||0]})]}),e.current&&"Not Started"!==e.current&&(0,de.jsxs)("p",{className:"text-xs text-gray-500",children:["Currently: ",(0,de.jsx)("span",{className:"font-medium text-gray-700",children:e.current})]}),e.chapters&&e.chapters.length>0&&(0,de.jsxs)("div",{className:"mt-2 space-y-1",children:[e.chapters.slice(0,5).map((e,s)=>(0,de.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:["completed"===e.status?(0,de.jsx)(j.A,{className:"w-3 h-3 text-green-500 flex-shrink-0"}):"in_progress"===e.status?(0,de.jsx)(B.A,{className:"w-3 h-3 text-amber-500 flex-shrink-0"}):"skipped"===e.status?(0,de.jsx)(E.A,{className:"w-3 h-3 text-red-400 flex-shrink-0"}):(0,de.jsx)(v.A,{className:"w-3 h-3 text-gray-300 flex-shrink-0"}),(0,de.jsx)("span",{className:"text-gray-600 truncate",children:e.chapter_name||"Chapter ".concat(e.chapter_number)}),(0,de.jsx)("span",{className:"ml-auto text-[10px] px-1.5 py-0.5 rounded ".concat("completed"===e.status?"bg-green-50 text-green-600":"in_progress"===e.status?"bg-amber-50 text-amber-600":"skipped"===e.status?"bg-red-50 text-red-600":"bg-gray-50 text-gray-400"),children:"completed"===e.status?"Done":"in_progress"===e.status?"Partial":"skipped"===e.status?"Skipped":"Pending"})]},s)),e.chapters.length>5&&(0,de.jsxs)("p",{className:"text-[10px] text-gray-400 pl-5",children:["+",e.chapters.length-5," more chapters"]})]})]},s)})})]}),be.length>0&&(0,de.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[(0,de.jsxs)("div",{className:"px-5 pt-5 pb-4",children:[(0,de.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e("notices")}),(0,de.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Latest school announcements."})]}),(0,de.jsx)("div",{className:"overflow-x-auto",children:(0,de.jsxs)("table",{className:"w-full",children:[(0,de.jsx)("thead",{children:(0,de.jsxs)("tr",{className:"border-t border-b border-gray-200 bg-gray-50/80",children:[(0,de.jsxs)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-600 whitespace-nowrap",children:["Title ",(0,de.jsx)(he,{})]}),(0,de.jsxs)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-600 hidden sm:table-cell whitespace-nowrap",children:["Content ",(0,de.jsx)(he,{})]}),(0,de.jsx)("th",{className:"text-right px-5 py-3 text-xs font-semibold text-gray-600 whitespace-nowrap",children:"Priority"})]})}),(0,de.jsx)("tbody",{children:be.map(e=>(0,de.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-blue-50/40 transition-colors cursor-pointer",onClick:()=>{Je(e),ke(!0)},children:[(0,de.jsx)("td",{className:"px-5 py-3.5 text-sm text-gray-800",children:e.title}),(0,de.jsx)("td",{className:"px-5 py-3.5 text-sm text-gray-500 hidden sm:table-cell line-clamp-1",children:e.content}),(0,de.jsx)("td",{className:"px-5 py-3.5 text-right",children:"high"===e.priority?(0,de.jsx)("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full bg-red-50 text-red-600 border border-red-200",children:"Important"}):(0,de.jsx)("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full bg-gray-50 text-gray-600 border border-gray-200",children:"Normal"})})]},e.id))})]})})]})]}),(0,de.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-50",style:{boxShadow:"0 -2px 10px rgba(0,0,0,0.05)"},children:(0,de.jsx)("div",{className:"grid grid-cols-5 gap-1 p-2 max-w-lg mx-auto",children:[{icon:T.A,label:e("home"),active:!0},{icon:v.A,label:"Study",action:()=>ie("/app/exams")},{icon:f.A,label:e("notices")},{icon:A.A,label:e("fees"),action:()=>ba()},{icon:S.A,label:"AI",action:()=>ze(!0)}].map((e,s)=>(0,de.jsxs)("button",{onClick:e.action||void 0,className:"flex flex-col items-center gap-1 p-2 rounded-xl transition-colors ".concat(e.active?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-gray-600"),children:[(0,de.jsx)(e.icon,{className:"w-5 h-5"}),(0,de.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},s))})}),(0,de.jsx)(g.lG,{open:_e,onOpenChange:Ce,children:(0,de.jsxs)(g.Cf,{children:[(0,de.jsx)(g.c7,{children:(0,de.jsx)(g.L3,{className:"text-base font-semibold text-gray-800",children:"Apply for Leave"})}),(0,de.jsxs)("div",{className:"space-y-4",children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Leave Type"}),(0,de.jsxs)("select",{value:Is.leave_type,onChange:e=>Fs(s=>(0,t.A)((0,t.A)({},s),{},{leave_type:e.target.value})),className:"w-full h-10 rounded-lg border border-gray-200 px-3 mt-1 text-gray-700",children:[(0,de.jsx)("option",{value:"sick",children:"Sick Leave"}),(0,de.jsx)("option",{value:"personal",children:"Personal"}),(0,de.jsx)("option",{value:"other",children:"Other"})]})]}),(0,de.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"From"}),(0,de.jsx)(x.p,{type:"date",value:Is.from_date,onChange:e=>Fs(s=>(0,t.A)((0,t.A)({},s),{},{from_date:e.target.value})),className:"border-gray-200"})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"To"}),(0,de.jsx)(x.p,{type:"date",value:Is.to_date,onChange:e=>Fs(s=>(0,t.A)((0,t.A)({},s),{},{to_date:e.target.value})),className:"border-gray-200"})]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Reason"}),(0,de.jsx)(h.T,{value:Is.reason,onChange:e=>Fs(s=>(0,t.A)((0,t.A)({},s),{},{reason:e.target.value})),placeholder:"Enter reason...",className:"border-gray-200"})]}),(0,de.jsxs)(o.$,{onClick:async()=>{if(Is.from_date&&Is.reason)try{await d.A.post("".concat(xe,"/student/leaves"),Is),re.oR.success("Leave application submitted!"),Ce(!1)}catch(e){re.oR.error("Failed to apply leave")}else re.oR.error("Please fill required fields")},className:"w-full bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:[(0,de.jsx)(G.A,{className:"w-4 h-4 mr-2"})," Submit"]})]})]})}),(0,de.jsx)(g.lG,{open:Se,onOpenChange:ke,children:(0,de.jsxs)(g.Cf,{children:[(0,de.jsx)(g.c7,{children:(0,de.jsx)(g.L3,{children:"Notice Details"})}),$e&&(0,de.jsxs)("div",{className:"space-y-4",children:[(0,de.jsx)("h3",{className:"font-bold text-lg",children:$e.title}),(0,de.jsx)("p",{className:"text-gray-600",children:$e.content}),(0,de.jsxs)("p",{className:"text-sm text-gray-400",children:["Posted: ",new Date($e.created_at).toLocaleDateString("hi-IN")]})]})]})}),(0,de.jsx)(g.lG,{open:Pe,onOpenChange:e=>{Re(e),e||(Ue(!1),Ye({oldPassword:"",newPassword:"",confirmPassword:""}))},children:(0,de.jsxs)(g.Cf,{className:"max-w-md max-h-[85vh] overflow-y-auto",children:[(0,de.jsx)(g.c7,{children:(0,de.jsx)(g.L3,{className:"text-base font-semibold text-gray-800",children:e("profile")})}),(0,de.jsxs)("div",{className:"space-y-4",children:[(0,de.jsxs)("div",{className:"flex items-center gap-4",children:[(0,de.jsx)("div",{className:"w-16 h-16 bg-purple-50 rounded-full flex items-center justify-center",children:(0,de.jsx)(I.A,{className:"w-8 h-8 text-purple-500"})}),(0,de.jsxs)("div",{children:[(0,de.jsx)("p",{className:"font-bold text-lg text-gray-800",children:null===ge||void 0===ge?void 0:ge.name}),(0,de.jsxs)("p",{className:"text-sm text-gray-400",children:[null===ge||void 0===ge?void 0:ge.class_name,null!==ge&&void 0!==ge&&ge.section?" - ".concat(ge.section):""]})]})]}),(0,de.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-xl text-sm border border-gray-100",children:[(0,de.jsxs)("div",{className:"flex justify-between",children:[(0,de.jsxs)("span",{className:"text-gray-500 flex items-center gap-1",children:[(0,de.jsx)(O.A,{className:"w-3 h-3"})," Student ID"]}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:null===ge||void 0===ge?void 0:ge.student_id})]}),(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Admission No"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:null===ge||void 0===ge?void 0:ge.admission_no})]}),(null===ge||void 0===ge?void 0:ge.mobile)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsxs)("span",{className:"text-gray-500 flex items-center gap-1",children:[(0,de.jsx)($.A,{className:"w-3 h-3"})," Contact"]}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.mobile})]}),(null===ge||void 0===ge?void 0:ge.email)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsxs)("span",{className:"text-gray-500 flex items-center gap-1",children:[(0,de.jsx)(J.A,{className:"w-3 h-3"})," Email"]}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.email})]}),(null===ge||void 0===ge?void 0:ge.father_name)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Father"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.father_name})]}),(null===ge||void 0===ge?void 0:ge.mother_name)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Mother"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.mother_name})]}),(null===ge||void 0===ge?void 0:ge.dob)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsxs)("span",{className:"text-gray-500 flex items-center gap-1",children:[(0,de.jsx)(M.A,{className:"w-3 h-3"})," Date of Birth"]}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:new Date(ge.dob).toLocaleDateString("en-IN")})]}),(null===ge||void 0===ge?void 0:ge.gender)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Gender"}),(0,de.jsx)("span",{className:"font-medium text-gray-700 capitalize",children:ge.gender})]}),(null===ge||void 0===ge?void 0:ge.blood_group)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Blood Group"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.blood_group})]}),(null===ge||void 0===ge?void 0:ge.address)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Address"}),(0,de.jsx)("span",{className:"font-medium text-gray-700 text-right max-w-[60%]",children:ge.address})]}),(null===ge||void 0===ge?void 0:ge.admission_date)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Admission Date"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:new Date(ge.admission_date).toLocaleDateString("en-IN")})]}),(null===ge||void 0===ge?void 0:ge.aadhar_number)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Aadhar"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.aadhar_number})]}),(null===ge||void 0===ge?void 0:ge.category)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Category"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.category})]}),(null===ge||void 0===ge?void 0:ge.religion)&&(0,de.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,de.jsx)("span",{className:"text-gray-500",children:"Religion"}),(0,de.jsx)("span",{className:"font-medium text-gray-700",children:ge.religion})]})]}),(0,de.jsxs)("button",{onClick:()=>Ue(!Me),className:"w-full flex items-center justify-between p-3 bg-amber-50 rounded-xl border border-amber-100 hover:bg-amber-100 transition-colors",children:[(0,de.jsxs)("div",{className:"flex items-center gap-2",children:[(0,de.jsx)(U.A,{className:"w-4 h-4 text-amber-600"}),(0,de.jsx)("span",{className:"text-sm font-medium text-amber-700",children:"Change Password"})]}),(0,de.jsx)(q.A,{className:"w-4 h-4 text-amber-400"})]}),Me&&(0,de.jsxs)("div",{className:"space-y-3 p-3 bg-white rounded-xl border border-gray-200",children:[(0,de.jsxs)("div",{className:"relative",children:[(0,de.jsx)(x.p,{type:He?"text":"password",placeholder:"Current Password",value:Qe.oldPassword,onChange:e=>Ye((0,t.A)((0,t.A)({},Qe),{},{oldPassword:e.target.value})),className:"pr-10"}),(0,de.jsx)("button",{type:"button",onClick:()=>We(!He),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:He?(0,de.jsx)(V.A,{className:"w-4 h-4"}):(0,de.jsx)(H.A,{className:"w-4 h-4"})})]}),(0,de.jsxs)("div",{className:"relative",children:[(0,de.jsx)(x.p,{type:Ze?"text":"password",placeholder:"New Password (min 6 chars)",value:Qe.newPassword,onChange:e=>Ye((0,t.A)((0,t.A)({},Qe),{},{newPassword:e.target.value})),className:"pr-10"}),(0,de.jsx)("button",{type:"button",onClick:()=>Ke(!Ze),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:Ze?(0,de.jsx)(V.A,{className:"w-4 h-4"}):(0,de.jsx)(H.A,{className:"w-4 h-4"})})]}),(0,de.jsx)(x.p,{type:"password",placeholder:"Confirm New Password",value:Qe.confirmPassword,onChange:e=>Ye((0,t.A)((0,t.A)({},Qe),{},{confirmPassword:e.target.value}))}),(0,de.jsx)(o.$,{onClick:async()=>{if(Qe.oldPassword&&Qe.newPassword&&Qe.confirmPassword)if(Qe.newPassword===Qe.confirmPassword)if(Qe.newPassword.length<6)re.oR.error("Password must be at least 6 characters");else{Ve(!0);try{const e=new FormData;e.append("old_password",Qe.oldPassword),e.append("new_password",Qe.newPassword);const s=await fetch("".concat(xe,"/student/change-password"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:e}),a=await s.json();s.ok?(re.oR.success("Password changed successfully!"),Ue(!1),Ye({oldPassword:"",newPassword:"",confirmPassword:""})):re.oR.error(a.detail||"Failed to change password")}catch(e){re.oR.error("Error changing password")}finally{Ve(!1)}}else re.oR.error("New passwords do not match");else re.oR.error("Please fill all fields")},disabled:qe,className:"w-full bg-amber-500 hover:bg-amber-600 text-white",children:qe?(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(p.A,{className:"w-4 h-4 mr-2 animate-spin"})," Changing..."]}):"Update Password"})]})]})]})}),(0,de.jsx)(g.lG,{open:De,onOpenChange:ze,children:(0,de.jsxs)(g.Cf,{className:"max-w-md h-[80vh] flex flex-col bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100 pb-3",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-violet-50 rounded flex items-center justify-center",children:(0,de.jsx)(S.A,{className:"w-4 h-4 text-violet-500"})}),"Tino AI Study Helper"]})}),(0,de.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 p-3 bg-gray-50 rounded-lg",children:[0===ia.length?(0,de.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,de.jsx)(S.A,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,de.jsx)("p",{className:"text-sm",children:"Ask me anything about your studies!"}),(0,de.jsx)("p",{className:"text-xs mt-1 text-gray-300",children:"Math, Science, English, Hindi & more"})]}):ia.map((e,s)=>(0,de.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,de.jsx)("div",{className:"max-w-[80%] rounded-xl px-3 py-2 ".concat("user"===e.role?"bg-blue-500 text-white rounded-br-sm":"bg-white border border-gray-200 text-gray-700 rounded-bl-sm"),children:(0,de.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})})},s)),ma&&(0,de.jsx)("div",{className:"flex justify-start",children:(0,de.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl px-3 py-2 rounded-bl-sm",children:(0,de.jsx)(p.A,{className:"w-4 h-4 animate-spin text-violet-500"})})})]}),(0,de.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-gray-100",children:[(0,de.jsx)(x.p,{value:oa,onChange:e=>ca(e.target.value),placeholder:"Ask a study question...",onKeyPress:e=>"Enter"===e.key&&va(),className:"border-gray-200"}),(0,de.jsx)(o.$,{onClick:va,disabled:ma,className:"bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:(0,de.jsx)(G.A,{className:"w-4 h-4"})})]})]})}),(0,de.jsx)(g.lG,{open:Ie,onOpenChange:Fe,children:(0,de.jsxs)(g.Cf,{className:"max-w-md h-[80vh] flex flex-col bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-blue-50 rounded flex items-center justify-center",children:(0,de.jsx)(k.A,{className:"w-4 h-4 text-blue-500"})}),(null===ts||void 0===ts?void 0:ts.name)||"Class Chat"]})}),(0,de.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 p-3 bg-gray-50 rounded-lg",children:0===Xe.length?(0,de.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,de.jsx)(W.A,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,de.jsx)("p",{children:"No messages yet. Start the conversation!"})]}):Xe.map((e,a)=>(0,de.jsx)("div",{className:"flex ".concat(e.sender_id===(null===s||void 0===s?void 0:s.id)?"justify-end":"justify-start"),children:(0,de.jsxs)("div",{className:"max-w-[75%] rounded-xl px-3 py-2 ".concat(e.sender_id===(null===s||void 0===s?void 0:s.id)?"bg-blue-500 text-white rounded-br-sm":"bg-white border border-gray-200 rounded-bl-sm"),children:[e.sender_id!==(null===s||void 0===s?void 0:s.id)&&(0,de.jsx)("p",{className:"text-xs font-medium text-blue-600 mb-1",children:e.sender_name}),(0,de.jsx)("p",{className:"text-sm",children:e.content}),(0,de.jsx)("p",{className:"text-xs mt-1 ".concat(e.sender_id===(null===s||void 0===s?void 0:s.id)?"text-blue-100":"text-gray-400"),children:new Date(e.created_at).toLocaleTimeString("hi-IN",{hour:"2-digit",minute:"2-digit"})})]})},a))}),(0,de.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-gray-100",children:[(0,de.jsx)(x.p,{value:ss,onChange:e=>as(e.target.value),placeholder:"Type a message...",onKeyPress:e=>"Enter"===e.key&&ua(),className:"border-gray-200"}),(0,de.jsx)(o.$,{onClick:ua,className:"bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:(0,de.jsx)(G.A,{className:"w-4 h-4"})})]})]})}),(0,de.jsx)(g.lG,{open:Le,onOpenChange:Te,children:(0,de.jsxs)(g.Cf,{children:[(0,de.jsx)(g.c7,{children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-red-50 rounded flex items-center justify-center",children:(0,de.jsx)(D.A,{className:"w-4 h-4 text-red-500"})}),"Submit Complaint"]})}),(0,de.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),rs.subject&&rs.description)try{await d.A.post("".concat(xe,"/complaints/create"),(0,t.A)({student_id:null===s||void 0===s?void 0:s.id,student_name:(null===ge||void 0===ge?void 0:ge.name)||(null===s||void 0===s?void 0:s.name),class_id:null===ge||void 0===ge?void 0:ge.class_id,class_name:null===ge||void 0===ge?void 0:ge.class_name,school_id:null===ge||void 0===ge?void 0:ge.school_id},rs)),re.oR.success("Complaint submitted successfully"),Te(!1),ns({complaint_to:"teacher",category:"academic",subject:"",description:"",is_anonymous:!1})}catch(a){re.oR.error("Failed to submit complaint")}else re.oR.error("Please fill all fields")},className:"space-y-4",children:[(0,de.jsxs)("div",{className:"space-y-2",children:[(0,de.jsx)(u.J,{className:"text-sm text-gray-600",children:"Complaint To"}),(0,de.jsxs)("select",{value:rs.complaint_to,onChange:e=>ns(s=>(0,t.A)((0,t.A)({},s),{},{complaint_to:e.target.value})),className:"w-full h-10 rounded-lg border border-gray-200 px-3 text-gray-700",children:[(0,de.jsx)("option",{value:"teacher",children:"Class Teacher"}),(0,de.jsx)("option",{value:"admin",children:"Admin/Principal"}),(0,de.jsx)("option",{value:"both",children:"Both"})]})]}),(0,de.jsxs)("div",{className:"space-y-2",children:[(0,de.jsx)(u.J,{className:"text-sm text-gray-600",children:"Category"}),(0,de.jsxs)("select",{value:rs.category,onChange:e=>ns(s=>(0,t.A)((0,t.A)({},s),{},{category:e.target.value})),className:"w-full h-10 rounded-lg border border-gray-200 px-3 text-gray-700",children:[(0,de.jsx)("option",{value:"academic",children:"Academic Issues"}),(0,de.jsx)("option",{value:"bullying",children:"Bullying/Harassment"}),(0,de.jsx)("option",{value:"facilities",children:"Facilities"}),(0,de.jsx)("option",{value:"teacher",children:"Teacher Related"}),(0,de.jsx)("option",{value:"fees",children:"Fees Related"}),(0,de.jsx)("option",{value:"transport",children:"Transport"}),(0,de.jsx)("option",{value:"food",children:"Food/Canteen"}),(0,de.jsx)("option",{value:"other",children:"Other"})]})]}),(0,de.jsxs)("div",{className:"space-y-2",children:[(0,de.jsx)(u.J,{className:"text-sm text-gray-600",children:"Subject"}),(0,de.jsx)(x.p,{value:rs.subject,onChange:e=>ns(s=>(0,t.A)((0,t.A)({},s),{},{subject:e.target.value})),placeholder:"Brief subject...",className:"border-gray-200"})]}),(0,de.jsxs)("div",{className:"space-y-2",children:[(0,de.jsx)(u.J,{className:"text-sm text-gray-600",children:"Description"}),(0,de.jsx)(h.T,{value:rs.description,onChange:e=>ns(s=>(0,t.A)((0,t.A)({},s),{},{description:e.target.value})),placeholder:"Describe in detail...",rows:3,className:"border-gray-200"})]}),(0,de.jsxs)("div",{className:"flex items-center gap-2",children:[(0,de.jsx)("input",{type:"checkbox",id:"anonymous",checked:rs.is_anonymous,onChange:e=>ns(s=>(0,t.A)((0,t.A)({},s),{},{is_anonymous:e.target.checked})),className:"rounded border-gray-200"}),(0,de.jsx)("label",{htmlFor:"anonymous",className:"text-sm text-gray-600",children:"Submit Anonymously"})]}),(0,de.jsx)(o.$,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:"Submit Complaint"})]})]})}),(0,de.jsx)(g.lG,{open:Be,onOpenChange:Ee,children:(0,de.jsxs)(g.Cf,{children:[(0,de.jsx)(g.c7,{children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-amber-50 rounded flex items-center justify-center",children:(0,de.jsx)(_.A,{className:"w-4 h-4 text-amber-500"})}),"My Activities"]})}),(0,de.jsx)("div",{className:"space-y-3",children:0===is.length?(0,de.jsx)("p",{className:"text-center text-gray-400 py-6 text-sm",children:"No activities found"}):is.map((e,s)=>(0,de.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,de.jsx)("p",{className:"font-medium text-gray-800",children:e.title||e.name}),(0,de.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description||e.type})]},s))})]})}),(0,de.jsx)(g.lG,{open:os,onOpenChange:cs,children:(0,de.jsxs)(g.Cf,{className:"max-w-md bg-white rounded-xl",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100 pb-3",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-7 h-7 bg-green-50 rounded-lg flex items-center justify-center",children:(0,de.jsx)(A.A,{className:"w-4 h-4 text-green-500"})}),"FeeTino - Pay Fees"]})}),(0,de.jsxs)("div",{className:"space-y-4 py-2",children:[qs>0&&(0,de.jsxs)("div",{className:"p-3 bg-red-50 rounded-xl border border-red-100 flex items-center justify-between",children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("p",{className:"text-xs text-red-500",children:"Pending Fee"}),(0,de.jsxs)("p",{className:"text-xl font-bold text-red-600",children:["\u20b9",qs.toLocaleString("en-IN")]})]}),(0,de.jsxs)("button",{onClick:()=>zs(!Ds),className:"text-xs text-blue-500 hover:text-blue-700 underline",children:[Ds?"Hide":"View"," History"]})]}),Ds&&Ps.length>0&&(0,de.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-2",children:Ps.slice(0,5).map((e,s)=>{var a,t;return(0,de.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg text-xs",children:[(0,de.jsxs)("div",{children:[(0,de.jsxs)("p",{className:"font-medium text-gray-700",children:["\u20b9",null===(a=e.amount)||void 0===a?void 0:a.toLocaleString("en-IN")]}),(0,de.jsxs)("p",{className:"text-gray-400",children:[null===(t=e.payment_mode)||void 0===t?void 0:t.toUpperCase()," \u2022 ",new Date(e.created_at).toLocaleDateString("en-IN")]})]}),(0,de.jsx)(m.E,{className:"text-[10px] ".concat("verified"===e.status||"paid"===e.status?"bg-green-100 text-green-700":"rejected"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"verified"===e.status||"paid"===e.status?"Paid":"rejected"===e.status?"Rejected":"Pending"})]},s)})}),(0,de.jsxs)("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[(0,de.jsx)("button",{onClick:()=>ps("free"),className:"flex-1 py-2.5 text-sm font-medium transition-colors ".concat("free"===gs?"bg-green-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"),children:"UPI / QR (Free)"}),(0,de.jsx)("button",{onClick:()=>ps("razorpay"),className:"flex-1 py-2.5 text-sm font-medium transition-colors border-l border-gray-200 ".concat("razorpay"===gs?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"),children:"Razorpay (Online)"})]}),"free"===gs?(0,de.jsxs)("div",{className:"space-y-3",children:[null!==bs&&void 0!==bs&&bs.upi_id||null!==bs&&void 0!==bs&&bs.gpay_number||null!==bs&&void 0!==bs&&bs.phonepe_number||null!==bs&&void 0!==bs&&bs.paytm_number||null!==bs&&void 0!==bs&&bs.qr_code_url?(0,de.jsxs)("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-100",children:[(null===bs||void 0===bs?void 0:bs.qr_code_url)&&(0,de.jsx)("div",{className:"flex justify-center mb-3",children:(0,de.jsx)("div",{className:"bg-white p-2 rounded-xl border-2 border-blue-200 shadow-sm",children:(0,de.jsx)("img",{src:bs.qr_code_url,alt:"School QR Code",className:"w-44 h-44 rounded-lg object-contain"})})}),(null===bs||void 0===bs?void 0:bs.qr_code_url)&&(0,de.jsx)("p",{className:"text-[10px] text-center text-blue-500 mb-2",children:"Scan QR code to pay, then fill details below"}),(0,de.jsx)("p",{className:"text-xs font-semibold text-blue-700 mb-2",children:"School Payment Details:"}),(0,de.jsxs)("div",{className:"space-y-1.5 text-xs text-blue-800",children:[(null===bs||void 0===bs?void 0:bs.upi_id)&&(0,de.jsxs)("p",{children:[(0,de.jsx)("span",{className:"font-medium",children:"UPI ID:"})," ",bs.upi_id]}),(null===bs||void 0===bs?void 0:bs.gpay_number)&&(0,de.jsxs)("p",{children:[(0,de.jsx)("span",{className:"font-medium",children:"GPay:"})," ",bs.gpay_number]}),(null===bs||void 0===bs?void 0:bs.phonepe_number)&&(0,de.jsxs)("p",{children:[(0,de.jsx)("span",{className:"font-medium",children:"PhonePe:"})," ",bs.phonepe_number]}),(null===bs||void 0===bs?void 0:bs.paytm_number)&&(0,de.jsxs)("p",{children:[(0,de.jsx)("span",{className:"font-medium",children:"Paytm:"})," ",bs.paytm_number]})]})]}):(0,de.jsx)("div",{className:"p-3 bg-yellow-50 rounded-xl border border-yellow-100",children:(0,de.jsx)("p",{className:"text-xs text-yellow-700",children:"School payment details not configured yet. Please pay directly to school and enter details below."})}),(0,de.jsxs)("div",{children:[(0,de.jsx)(u.J,{className:"text-xs font-medium text-gray-600",children:"Payment Mode"}),(0,de.jsxs)("select",{value:_s,onChange:e=>Cs(e.target.value),className:"w-full mt-1 p-2 border border-gray-200 rounded-lg text-sm text-gray-700 focus:outline-none focus:border-green-500",children:[(0,de.jsx)("option",{value:"upi",children:"UPI"}),(0,de.jsx)("option",{value:"gpay",children:"Google Pay"}),(0,de.jsx)("option",{value:"phonepe",children:"PhonePe"}),(0,de.jsx)("option",{value:"paytm",children:"Paytm"}),(0,de.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,de.jsx)("option",{value:"cash",children:"Cash"})]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)(u.J,{className:"text-xs font-medium text-gray-600",children:"Amount (\u20b9)"}),(0,de.jsx)(x.p,{type:"number",value:ms,onChange:e=>xs(e.target.value),placeholder:"Enter amount...",className:"mt-1 border-gray-200",min:"1"})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)(u.J,{className:"text-xs font-medium text-gray-600",children:"Transaction ID / Reference No."}),(0,de.jsx)(x.p,{value:ws,onChange:e=>As(e.target.value),placeholder:"Enter UPI ref number...",className:"mt-1 border-gray-200"})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)(u.J,{className:"text-xs font-medium text-gray-600",children:"Remarks / Note (Optional)"}),(0,de.jsx)("textarea",{value:Ss,onChange:e=>ks(e.target.value),placeholder:"E.g., Paid for April month fees, Tuition fee for Term 2...",className:"w-full mt-1 p-2 border border-gray-200 rounded-lg text-sm text-gray-700 focus:outline-none focus:border-green-500 resize-none",rows:2,maxLength:200}),(0,de.jsxs)("p",{className:"text-[10px] text-gray-400 mt-0.5 text-right",children:[Ss.length,"/200"]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)(u.J,{className:"text-xs font-medium text-gray-600",children:"Payment Screenshot (Optional)"}),(0,de.jsx)("div",{className:"mt-1 border-2 border-dashed border-gray-200 rounded-lg p-3 text-center hover:border-green-400 transition-colors cursor-pointer",onClick:()=>document.getElementById("screenshot-input").click(),children:fs?(0,de.jsxs)("div",{className:"relative",children:[(0,de.jsx)("img",{src:fs,alt:"Screenshot",className:"max-h-40 mx-auto rounded-lg"}),(0,de.jsx)("button",{onClick:e=>{e.stopPropagation(),vs(null),Ns("")},className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs",children:"\u2715"})]}):(0,de.jsxs)("div",{className:"py-4",children:[(0,de.jsx)(Z.A,{className:"w-6 h-6 mx-auto text-gray-300 mb-2"}),(0,de.jsx)("p",{className:"text-xs text-gray-400",children:"Tap to upload payment screenshot"}),(0,de.jsx)("p",{className:"text-[10px] text-gray-300 mt-1",children:"JPG, PNG up to 5MB"})]})}),(0,de.jsx)("input",{id:"screenshot-input",type:"file",accept:"image/*",className:"hidden",onChange:e=>{const s=e.target.files[0];if(!s)return;if(s.size>5242880)return void re.oR.error("File size must be less than 5MB");vs(s);const a=new FileReader;a.onloadend=()=>Ns(a.result),a.readAsDataURL(s)}})]}),(0,de.jsxs)(o.$,{onClick:async()=>{if(!ms||isNaN(ms)||Number(ms)<=0)re.oR.error("Please enter amount");else if(ws.trim()){us(!0);try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)};let l=null;if(js){const e=new FormData;e.append("file",js),e.append("school_id",(null===ge||void 0===ge?void 0:ge.school_id)||"");const s=await d.A.post("".concat(xe,"/upload/photo"),e,{headers:(0,t.A)((0,t.A)({},a),{},{"Content-Type":"multipart/form-data"})});l=s.data.url||s.data.photo_url}await d.A.post("".concat(xe,"/parent/record-payment"),{student_id:null===s||void 0===s?void 0:s.id,amount:Number(ms),payment_mode:_s,transaction_id:ws.trim(),payer_name:(null===ge||void 0===ge?void 0:ge.father_name)||(null===ge||void 0===ge?void 0:ge.name)||(null===s||void 0===s?void 0:s.name),remarks:Ss.trim()||"Fee payment via ".concat(_s.toUpperCase()),screenshot_url:l},{headers:a}),re.oR.success("Payment submitted! Admin will verify and update your fees."),cs(!1),xs(""),As(""),vs(null),Ns(""),ks("")}catch(l){var e,a;re.oR.error((null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to submit payment")}finally{us(!1)}}else re.oR.error("Please enter UPI Transaction ID / Reference Number")},disabled:hs,className:"w-full bg-green-500 hover:bg-green-600 text-white rounded-lg",children:[hs?(0,de.jsx)(p.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,de.jsx)(G.A,{className:"w-4 h-4 mr-2"}),hs?"Submitting...":"Submit Payment"]}),(0,de.jsx)("p",{className:"text-[10px] text-center text-gray-400",children:"Admin will verify your payment and update your fees"})]}):(0,de.jsxs)("div",{className:"space-y-3",children:[(0,de.jsx)("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-100",children:(0,de.jsx)("p",{className:"text-xs text-blue-600",children:"Pay securely via Razorpay gateway. Supports Credit/Debit Card, Net Banking, UPI & Wallets."})}),(0,de.jsxs)("div",{children:[(0,de.jsx)(u.J,{className:"text-xs font-medium text-gray-600",children:"Amount (\u20b9)"}),(0,de.jsx)(x.p,{type:"number",value:ms,onChange:e=>xs(e.target.value),placeholder:"Enter amount...",className:"mt-1 border-gray-200",min:"1"})]}),(0,de.jsxs)(o.$,{onClick:ga,disabled:hs,className:"w-full bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:[hs?(0,de.jsx)(p.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,de.jsx)(K.A,{className:"w-4 h-4 mr-2"}),hs?"Processing...":"Pay via Razorpay"]}),(0,de.jsx)("p",{className:"text-[10px] text-center text-gray-400",children:"Secured by Razorpay \u2022 2% transaction fee applies"})]})]})]})}),(0,de.jsx)(g.lG,{open:Ge,onOpenChange:Oe,children:(0,de.jsxs)(g.Cf,{className:"max-w-2xl bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100 pb-3",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-blue-50 rounded flex items-center justify-center",children:(0,de.jsx)(w.A,{className:"w-4 h-4 text-blue-500"})}),"Admit Card"]})}),(0,de.jsx)(ce,{studentId:null===s||void 0===s?void 0:s.id,profile:ge})]})}),(0,de.jsx)(g.lG,{open:Bs,onOpenChange:Es,children:(0,de.jsxs)(g.Cf,{className:"max-w-md bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100 pb-3",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-emerald-50 rounded flex items-center justify-center",children:(0,de.jsx)(P.A,{className:"w-4 h-4 text-emerald-500"})}),"My Wallet"]})}),(0,de.jsxs)("div",{className:"space-y-4",children:[(0,de.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-5 text-white",children:[(0,de.jsx)("p",{className:"text-sm opacity-80",children:"Available Balance"}),(0,de.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["\u20b9",Gs.toLocaleString("en-IN")]})]}),(0,de.jsxs)("div",{className:"flex gap-2",children:[(0,de.jsx)(x.p,{type:"number",value:Ms,onChange:e=>Us(e.target.value),placeholder:"Enter amount...",className:"border-gray-200",min:"1"}),(0,de.jsxs)(o.$,{onClick:async()=>{if(!Ms||isNaN(Ms)||Number(Ms)<=0)re.oR.error("Enter a valid amount");else try{await d.A.post("".concat(xe,"/student/wallet/add"),{student_id:null===s||void 0===s?void 0:s.id,amount:Number(Ms)}),re.oR.success("\u20b9".concat(Ms," added to wallet!")),ya(),Us("")}catch(e){re.oR.error("Wallet feature coming soon")}},className:"bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg whitespace-nowrap",children:[(0,de.jsx)(Q.A,{className:"w-4 h-4 mr-1"})," Add"]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Transaction History"}),(0,de.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:0===$s.length?(0,de.jsx)("p",{className:"text-center text-gray-400 py-4 text-sm",children:"No transactions yet"}):$s.map(e=>(0,de.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100",children:[(0,de.jsxs)("div",{className:"flex items-center gap-2",children:[(0,de.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("credit"===e.type?"bg-green-50":"bg-red-50"),children:"credit"===e.type?(0,de.jsx)(Y.A,{className:"w-4 h-4 text-green-500"}):(0,de.jsx)(X.A,{className:"w-4 h-4 text-red-500"})}),(0,de.jsxs)("div",{children:[(0,de.jsx)("p",{className:"text-sm text-gray-800",children:e.description}),(0,de.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.date).toLocaleDateString("hi-IN")})]})]}),(0,de.jsxs)("span",{className:"text-sm font-semibold ".concat("credit"===e.type?"text-green-600":"text-red-600"),children:["credit"===e.type?"+":"-","\u20b9",e.amount]})]},e.id))})]})]})]})}),(0,de.jsx)(g.lG,{open:Hs,onOpenChange:Ws,children:(0,de.jsxs)(g.Cf,{className:"max-w-lg bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100 pb-3",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-pink-50 rounded flex items-center justify-center",children:(0,de.jsx)(R.A,{className:"w-4 h-4 text-pink-500"})}),"Live Classes"]})}),(0,de.jsx)("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:0===Zs.length?(0,de.jsx)("p",{className:"text-center text-gray-400 py-8 text-sm",children:"No live classes scheduled"}):Zs.map(e=>(0,de.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100",children:[(0,de.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("h4",{className:"font-semibold text-gray-800 text-sm",children:e.subject}),(0,de.jsx)("p",{className:"text-xs text-gray-500",children:e.topic})]}),(0,de.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full ".concat("live"===e.status?"bg-red-50 text-red-600 border border-red-200 animate-pulse":"upcoming"===e.status?"bg-blue-50 text-blue-600 border border-blue-200":"bg-gray-100 text-gray-500 border border-gray-200"),children:"live"===e.status?"\u25cf LIVE":"upcoming"===e.status?"Upcoming":"Completed"})]}),(0,de.jsxs)("p",{className:"text-xs text-gray-400 mb-2",children:["Teacher: ",e.teacher," \u2022 ",new Date(e.scheduled_at).toLocaleString("hi-IN")]}),(0,de.jsxs)("div",{className:"flex gap-2",children:["live"===e.status&&e.join_url&&(0,de.jsxs)(o.$,{size:"sm",onClick:()=>window.open(e.join_url,"_blank"),className:"bg-red-500 hover:bg-red-600 text-white text-xs rounded-lg",children:[(0,de.jsx)(ee.A,{className:"w-3 h-3 mr-1"})," Join Now"]}),"completed"===e.status&&e.recording_url&&(0,de.jsxs)(o.$,{size:"sm",variant:"outline",onClick:()=>window.open(e.recording_url,"_blank"),className:"text-xs border-gray-200 text-gray-600 rounded-lg",children:[(0,de.jsx)(H.A,{className:"w-3 h-3 mr-1"})," View Recording"]}),"upcoming"===e.status&&(0,de.jsxs)("span",{className:"text-xs text-gray-400 flex items-center",children:[(0,de.jsx)(B.A,{className:"w-3 h-3 mr-1"})," Starts soon"]})]})]},e.id))})]})}),(0,de.jsx)(g.lG,{open:Qs,onOpenChange:Ys,children:(0,de.jsxs)(g.Cf,{className:"max-w-lg h-[85vh] flex flex-col bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100 pb-3",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-cyan-50 rounded flex items-center justify-center",children:(0,de.jsx)(se.A,{className:"w-4 h-4 text-cyan-500"})}),"School Feed"]})}),(0,de.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 py-2",children:0===Xs.length?(0,de.jsx)("p",{className:"text-center text-gray-400 py-8 text-sm",children:"No posts yet"}):Xs.map(e=>(0,de.jsxs)("div",{className:"bg-gray-50 rounded-xl border border-gray-100 overflow-hidden",children:[(0,de.jsxs)("div",{className:"p-4",children:[(0,de.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,de.jsx)("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center",children:(0,de.jsx)(I.A,{className:"w-4 h-4 text-blue-600"})}),(0,de.jsxs)("div",{children:[(0,de.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:e.author}),(0,de.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleString("hi-IN")})]})]}),(0,de.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed mb-3",children:e.content}),e.image&&(0,de.jsx)("img",{src:e.image,alt:"",className:"w-full rounded-lg mb-3 max-h-48 object-cover"}),(0,de.jsxs)("div",{className:"flex items-center gap-4 pt-2 border-t border-gray-100",children:[(0,de.jsxs)("button",{onClick:()=>{return s=e.id,ea(e=>e.map(e=>e.id===s?(0,t.A)((0,t.A)({},e),{},{liked:!e.liked,likes:e.liked?e.likes-1:e.likes+1}):e)),void d.A.post("".concat(xe,"/school-feed/").concat(s,"/like")).catch(()=>{});var s},className:"flex items-center gap-1.5 text-xs ".concat(e.liked?"text-red-500":"text-gray-400 hover:text-red-400"," transition-colors"),children:[(0,de.jsx)(ae.A,{className:"w-4 h-4 ".concat(e.liked?"fill-current":"")})," ",e.likes]}),(0,de.jsxs)("button",{onClick:()=>(e=>{navigator.share?navigator.share({title:"".concat(e.author," - School Feed"),text:e.content}).catch(()=>{}):(navigator.clipboard.writeText(e.content),re.oR.success("Post copied to clipboard!"))})(e),className:"flex items-center gap-1.5 text-xs text-gray-400 hover:text-blue-400 transition-colors",children:[(0,de.jsx)(te.A,{className:"w-4 h-4"})," Share"]}),(0,de.jsxs)("span",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[(0,de.jsx)(k.A,{className:"w-4 h-4"})," ",(e.comments||[]).length]})]})]}),(e.comments||[]).length>0&&(0,de.jsx)("div",{className:"px-4 pb-3 space-y-2",children:e.comments.slice(-2).map(e=>(0,de.jsxs)("div",{className:"flex items-start gap-2",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,de.jsx)(I.A,{className:"w-3 h-3 text-gray-500"})}),(0,de.jsxs)("div",{className:"bg-white rounded-lg px-2.5 py-1.5 border border-gray-100 flex-1",children:[(0,de.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.author}),(0,de.jsx)("p",{className:"text-xs text-gray-500",children:e.text})]})]},e.id))}),(0,de.jsxs)("div",{className:"px-4 pb-3 flex gap-2",children:[(0,de.jsx)(x.p,{value:sa,onChange:e=>aa(e.target.value),placeholder:"Write a comment...",className:"text-xs h-8 border-gray-200",onKeyPress:s=>"Enter"===s.key&&ja(e.id)}),(0,de.jsx)(o.$,{size:"sm",onClick:()=>ja(e.id),className:"bg-blue-500 hover:bg-blue-600 text-white h-8 text-xs rounded-lg",children:(0,de.jsx)(G.A,{className:"w-3 h-3"})})]})]},e.id))})]})}),(0,de.jsx)(g.lG,{open:ta,onOpenChange:la,children:(0,de.jsxs)(g.Cf,{className:"max-w-lg bg-white rounded-xl border border-gray-200",children:[(0,de.jsx)(g.c7,{className:"border-b border-gray-100 pb-3",children:(0,de.jsxs)(g.L3,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[(0,de.jsx)("div",{className:"w-6 h-6 bg-orange-50 rounded flex items-center justify-center",children:(0,de.jsx)(le.A,{className:"w-4 h-4 text-orange-500"})}),"School E-Store"]})}),(0,de.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-[60vh] overflow-y-auto py-2",children:0===ra.length?(0,de.jsx)("p",{className:"text-center text-gray-400 py-8 text-sm col-span-2",children:"No items available"}):ra.map(e=>(0,de.jsxs)("div",{className:"bg-gray-50 rounded-xl border border-gray-100 p-3 hover:shadow-sm transition-all",children:[(0,de.jsx)("div",{className:"w-full h-24 bg-gray-100 rounded-lg flex items-center justify-center mb-2",children:e.image?(0,de.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded-lg"}):(0,de.jsx)(F.A,{className:"w-8 h-8 text-gray-300"})}),(0,de.jsx)("h4",{className:"text-xs font-semibold text-gray-800 line-clamp-2 mb-1",children:e.name}),(0,de.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:e.category}),(0,de.jsxs)("div",{className:"flex items-center justify-between",children:[(0,de.jsxs)("span",{className:"text-sm font-bold text-gray-800",children:["\u20b9",e.price]}),e.in_stock?(0,de.jsx)(o.$,{size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white text-[10px] h-7 px-2 rounded-lg",onClick:()=>re.oR.success("".concat(e.name," added to cart!")),children:"Buy"}):(0,de.jsx)("span",{className:"text-[10px] text-red-500 font-medium",children:"Out of Stock"})]})]},e.id))})]})})]})}}}]);
//# sourceMappingURL=8345.76ad80b9.chunk.js.map