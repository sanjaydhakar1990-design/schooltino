"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5381],{1140(e,a,s){s.d(a,{BT:()=>b,Wu:()=>f,ZB:()=>g,Zp:()=>x,aR:()=>p});var t=s(2555),n=s(3986),l=s(5043),r=s(1089),i=s(579);const o=["className"],c=["className"],d=["className"],m=["className"],h=["className"],u=["className"],x=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,o);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("rounded-xl border border-gray-200 bg-white text-gray-900 shadow-sm",s)},l))});x.displayName="Card";const p=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,c);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-5",s)},l))});p.displayName="CardHeader";const g=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,d);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("font-semibold leading-none tracking-tight",s)},l))});g.displayName="CardTitle";const b=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,m);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s)},l))});b.displayName="CardDescription";const f=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,h);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("p-5 pt-0",s)},l))});f.displayName="CardContent";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,u);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,r.cn)("flex items-center p-5 pt-0",s)},l))}).displayName="CardFooter"},5395(e,a,s){s.d(a,{k:()=>d});var t=s(2555),n=s(3986),l=s(5043),r=s(7989),i=s(1089),o=s(579);const c=["className","value"],d=l.forwardRef((e,a)=>{let{className:s,value:l}=e,d=(0,n.A)(e,c);return(0,o.jsx)(r.bL,(0,t.A)((0,t.A)({ref:a,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s)},d),{},{children:(0,o.jsx)(r.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})}))});d.displayName=r.bL.displayName},3340(e,a,s){s.d(a,{A0:()=>b,BF:()=>f,Hj:()=>j,XI:()=>g,nA:()=>N,nd:()=>v});var t=s(2555),n=s(3986),l=s(5043),r=s(1089),i=s(579);const o=["className"],c=["className"],d=["className"],m=["className"],h=["className"],u=["className"],x=["className"],p=["className"],g=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,o);return(0,i.jsx)("div",{className:"relative w-full overflow-auto rounded-xl border border-gray-200 bg-white overflow-hidden",children:(0,i.jsx)("table",(0,t.A)({ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",s)},l))})});g.displayName="Table";const b=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,c);return(0,i.jsx)("thead",(0,t.A)({ref:a,className:(0,r.cn)("[&_tr]:border-b bg-gray-50/80",s)},l))});b.displayName="TableHeader";const f=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,d);return(0,i.jsx)("tbody",(0,t.A)({ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",s)},l))});f.displayName="TableBody";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,m);return(0,i.jsx)("tfoot",(0,t.A)({ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s)},l))}).displayName="TableFooter";const j=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,h);return(0,i.jsx)("tr",(0,t.A)({ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-blue-50/40 data-[state=selected]:bg-muted",s)},l))});j.displayName="TableRow";const v=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,u);return(0,i.jsx)("th",(0,t.A)({ref:a,className:(0,r.cn)("h-11 px-4 text-xs uppercase tracking-wider text-left align-middle font-medium text-gray-600 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s)},l))});v.displayName="TableHead";const N=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,x);return(0,i.jsx)("td",(0,t.A)({ref:a,className:(0,r.cn)("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s)},l))});N.displayName="TableCell";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,p);return(0,i.jsx)("caption",(0,t.A)({ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",s)},l))}).displayName="TableCaption"},9690(e,a,s){s.d(a,{Xi:()=>x,av:()=>p,j7:()=>u,tU:()=>h});var t=s(2555),n=s(3986),l=s(5043),r=s(7127),i=s(1089),o=s(579);const c=["className"],d=["className"],m=["className"],h=r.bL,u=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,c);return(0,o.jsx)(r.B8,(0,t.A)({ref:a,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-gray-100 border border-gray-200 p-1 text-muted-foreground",s)},l))});u.displayName=r.B8.displayName;const x=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,d);return(0,o.jsx)(r.l9,(0,t.A)({ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-blue-500",s)},l))});x.displayName=r.l9.displayName;const p=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,n.A)(e,m);return(0,o.jsx)(r.UC,(0,t.A)({ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s)},l))});p.displayName=r.UC.displayName},5381(e,a,s){s.r(a),s.d(a,{default:()=>fe});var t=s(2555),n=s(5043),l=s(6930),r=s(8729),i=s(9722),o=s(3390),c=s(2264),d=s(9938),m=s(5598),h=(s(3340),s(9690)),u=s(9797),x=s(2024),p=s(2754),g=s(1884),b=s(247),f=s(797),j=s(614),v=s(6210),N=s(9682),_=s(7719),y=s(2313),w=s(9292),A=s(4459),C=s(7475),k=s(5686),S=s(5087),P=s(6533),R=s(6376),I=s(7737),B=s(9493),D=s(9855),F=s(516),T=s(7118),J=s(2029),E=s(2244),z=s(4651),O=s(2574),M=s(3986),L=s(853),G=s(8326),$=s(9868),q=s(1089),U=s(579);const H=["className","inset","children"],W=["className"],Q=["className","sideOffset"],V=["className","inset"],Z=["className","children","checked"],Y=["className","children"],X=["className","inset"],K=["className"],ee=L.bL,ae=L.l9;L.YJ,L.ZL,L.Pb,L.z6;n.forwardRef((e,a)=>{let{className:s,inset:n,children:l}=e,r=(0,M.A)(e,H);return(0,U.jsxs)(L.ZP,(0,t.A)((0,t.A)({ref:a,className:(0,q.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",s)},r),{},{children:[l,(0,U.jsx)(G.A,{className:"ml-auto"})]}))}).displayName=L.ZP.displayName;n.forwardRef((e,a)=>{let{className:s}=e,n=(0,M.A)(e,W);return(0,U.jsx)(L.G5,(0,t.A)({ref:a,className:(0,q.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s)},n))}).displayName=L.G5.displayName;const se=n.forwardRef((e,a)=>{let{className:s,sideOffset:n=4}=e,l=(0,M.A)(e,Q);return(0,U.jsx)(L.ZL,{children:(0,U.jsx)(L.UC,(0,t.A)({ref:a,sideOffset:n,className:(0,q.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s)},l))})});se.displayName=L.UC.displayName;const te=n.forwardRef((e,a)=>{let{className:s,inset:n}=e,l=(0,M.A)(e,V);return(0,U.jsx)(L.q7,(0,t.A)({ref:a,className:(0,q.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",s)},l))});te.displayName=L.q7.displayName;n.forwardRef((e,a)=>{let{className:s,children:n,checked:l}=e,r=(0,M.A)(e,Z);return(0,U.jsxs)(L.H_,(0,t.A)((0,t.A)({ref:a,className:(0,q.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l},r),{},{children:[(0,U.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,U.jsx)(L.VF,{children:(0,U.jsx)(v.A,{className:"h-4 w-4"})})}),n]}))}).displayName=L.H_.displayName;n.forwardRef((e,a)=>{let{className:s,children:n}=e,l=(0,M.A)(e,Y);return(0,U.jsxs)(L.hN,(0,t.A)((0,t.A)({ref:a,className:(0,q.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},l),{},{children:[(0,U.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,U.jsx)(L.VF,{children:(0,U.jsx)($.A,{className:"h-2 w-2 fill-current"})})}),n]}))}).displayName=L.hN.displayName;n.forwardRef((e,a)=>{let{className:s,inset:n}=e,l=(0,M.A)(e,X);return(0,U.jsx)(L.JU,(0,t.A)({ref:a,className:(0,q.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",s)},l))}).displayName=L.JU.displayName;const ne=n.forwardRef((e,a)=>{let{className:s}=e,n=(0,M.A)(e,K);return(0,U.jsx)(L.wv,(0,t.A)({ref:a,className:(0,q.cn)("-mx-1 my-1 h-px bg-muted",s)},n))});ne.displayName=L.wv.displayName;var le=s(6328),re=s(1140),ie=s(5395),oe=s(817),ce=s(2054),de=s(6245),me=s(7856);const he=[{id:"passport",label:"Passport Photo",icon:A.A,description:"Front facing, neutral expression",required:!0},{id:"front",label:"Front View",icon:S.A,description:"Direct front view",required:!1},{id:"left",label:"Left Profile",icon:A.A,description:"Left side (30-45\xb0)",required:!1},{id:"right",label:"Right Profile",icon:A.A,description:"Right side (30-45\xb0)",required:!1},{id:"full_body",label:"Full Body",icon:A.A,description:"Full body with face visible",required:!1}];function ue(e){var a,s,l,r,i,c,d;let{studentId:h,schoolId:u,studentName:p,onComplete:g,onSkip:j,isOpen:v,onClose:N}=e;const[y,w]=(0,n.useState)("passport"),[A,C]=(0,n.useState)({}),[k,S]=(0,n.useState)(!1),[P,R]=(0,n.useState)(!1),[I,B]=(0,n.useState)(!1),[D,F]=(0,n.useState)("camera"),[T,J]=(0,n.useState)(null),[E,z]=(0,n.useState)(null),[O,M]=(0,n.useState)(null),L=(0,n.useRef)(null),G=(0,n.useRef)(null),$=(0,n.useRef)(null),q=(0,n.useRef)(null);(0,n.useEffect)(()=>{h&&v&&H()},[h,v]),(0,n.useEffect)(()=>()=>{Q()},[]);const H=async()=>{try{const a=await fetch("".concat("","/api/face-recognition/enrollment-status/").concat(h));if(a.ok){var e;const s=await a.json();M(s);const t={};null===(e=s.photos_uploaded)||void 0===e||e.forEach(e=>{t[e]={uploaded:!0}}),C(t)}}catch(a){console.error("Error fetching enrollment status:",a)}},W=async()=>{try{const e={video:{width:{ideal:1920},height:{ideal:1080},facingMode:"user"}},a=await navigator.mediaDevices.getUserMedia(e);q.current=a,L.current&&(L.current.srcObject=a,await L.current.play()),B(!0),le.oR.success("Camera started! Position your face properly.")}catch(e){console.error("Camera error:",e),le.oR.error("Camera access denied. Please allow camera permission or upload photos."),F("upload")}},Q=()=>{q.current&&(q.current.getTracks().forEach(e=>e.stop()),q.current=null),B(!1)},V=async e=>{R(!0),J(null);try{const a=await fetch("".concat("","/api/face-recognition/upload-photo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:h,school_id:u,photo_base64:e,photo_type:y,capture_device:"camera"===D?"webcam":"upload"})}),s=await a.json();if(s.success){le.oR.success(s.message||"Photo uploaded successfully!"),J(s.analysis),C(e=>(0,t.A)((0,t.A)({},e),{},{[y]:{uploaded:!0,quality:s.quality_score,photoId:s.photo_id}}));const e=he.findIndex(e=>e.id===y);e<he.length-1&&w(he[e+1].id),H()}else"TWIN_OR_SIBLING_DETECTED"===s.warning?z({type:"twin",similar_student:s.similar_student,similarity:s.similarity,message:s.message}):(le.oR.error(s.error||"Failed to upload photo"),J(s.analysis))}catch(a){console.error("Upload error:",a),le.oR.error("Failed to upload photo. Please try again.")}finally{R(!1)}},Z=Object.keys(A).filter(e=>{var a;return null===(a=A[e])||void 0===a?void 0:a.uploaded}).length,Y=Z/3*100,X=(null===(a=A.passport)||void 0===a?void 0:a.uploaded)&&Z>=2;return(0,U.jsx)(m.lG,{open:v,onOpenChange:N,children:(0,U.jsxs)(m.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,U.jsxs)(m.c7,{children:[(0,U.jsxs)(m.L3,{className:"flex items-center gap-2",children:[(0,U.jsx)(oe.A,{className:"w-6 h-6 text-indigo-600"}),"AI Face Enrollment - ",p]}),(0,U.jsx)(m.rr,{children:"4-5 photos chahiye (1 passport + angles) for accurate face recognition"})]}),(0,U.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-4",children:[(0,U.jsxs)("div",{className:"space-y-3",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,U.jsx)("span",{className:"text-sm font-medium",children:"Progress"}),(0,U.jsxs)("span",{className:"text-sm text-slate-500",children:[Z,"/5 photos"]})]}),(0,U.jsx)(ie.k,{value:Y,className:"h-2 mb-4"}),he.map(e=>{var a;const s=(e=>{var a;return null!==(a=A[e])&&void 0!==a&&a.uploaded?"complete":e===y?"current":"pending"})(e.id);return(0,U.jsx)("button",{onClick:()=>w(e.id),className:"w-full p-3 rounded-lg border-2 text-left transition-all ".concat("complete"===s?"border-emerald-300 bg-emerald-50":"current"===s?"border-indigo-400 bg-indigo-50":"border-slate-200 bg-white hover:border-slate-300"),"data-testid":"photo-type-".concat(e.id),children:(0,U.jsxs)("div",{className:"flex items-center gap-3",children:[(0,U.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("complete"===s?"bg-emerald-500":"current"===s?"bg-indigo-500":"bg-slate-200"),children:"complete"===s?(0,U.jsx)(ce.A,{className:"w-5 h-5 text-white"}):(0,U.jsx)(e.icon,{className:"w-4 h-4 ".concat("current"===s?"text-white":"text-slate-500")})}),(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsxs)("p",{className:"font-medium text-sm ".concat("complete"===s?"text-emerald-700":"text-slate-900"),children:[e.label," ",e.required&&(0,U.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,U.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]}),"complete"===s&&(null===(a=A[e.id])||void 0===a?void 0:a.quality)&&(0,U.jsxs)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded",children:[A[e.id].quality,"%"]})]})},e.id)})]}),(0,U.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,U.jsxs)("div",{className:"flex gap-2",children:[(0,U.jsxs)(o.$,{variant:"camera"===D?"default":"outline",onClick:()=>{F("camera"),I||W()},className:"flex-1",children:[(0,U.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Camera"]}),(0,U.jsxs)(o.$,{variant:"upload"===D?"default":"outline",onClick:()=>{F("upload"),Q()},className:"flex-1",children:[(0,U.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Upload"]})]}),"camera"===D&&(0,U.jsx)(re.Zp,{className:"overflow-hidden",children:(0,U.jsxs)(re.Wu,{className:"p-0",children:[(0,U.jsxs)("div",{className:"relative aspect-[4/3] bg-slate-900",children:[(0,U.jsx)("video",{ref:L,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,U.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,U.jsx)("div",{className:"border-4 border-dashed rounded-full w-48 h-64 ".concat("full_body"===y?"w-32 h-80":""," ").concat(I?"border-white/50":"border-slate-500")})}),(0,U.jsx)("div",{className:"absolute top-4 left-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm",children:null===(s=he.find(e=>e.id===y))||void 0===s?void 0:s.label}),!I&&(0,U.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80",children:(0,U.jsxs)(o.$,{onClick:W,size:"lg",children:[(0,U.jsx)(b.A,{className:"w-5 h-5 mr-2"}),"Start Camera"]})})]}),I&&(0,U.jsxs)("div",{className:"p-4 bg-slate-100 flex justify-center gap-4",children:[(0,U.jsxs)(o.$,{size:"lg",onClick:async()=>{if(!L.current||!G.current)return;S(!0);const e=L.current,a=G.current,s=a.getContext("2d");a.width=e.videoWidth,a.height=e.videoHeight,s.drawImage(e,0,0);const t=a.toDataURL("image/jpeg",.9).split(",")[1];await V(t),S(!1)},disabled:k||P,className:"bg-red-600 hover:bg-red-700","data-testid":"capture-photo-btn",children:[k||P?(0,U.jsx)(x.A,{className:"w-5 h-5 animate-spin mr-2"}):(0,U.jsx)(b.A,{className:"w-5 h-5 mr-2"}),P?"Analyzing...":"Capture Photo"]}),(0,U.jsxs)(o.$,{variant:"outline",onClick:Q,children:[(0,U.jsx)(de.A,{className:"w-4 h-4 mr-2"}),"Stop"]})]})]})}),"upload"===D&&(0,U.jsx)(re.Zp,{className:"border-2 border-dashed border-slate-300 hover:border-indigo-400 transition-colors",children:(0,U.jsx)(re.Wu,{className:"p-8",children:(0,U.jsxs)("div",{className:"flex flex-col items-center justify-center cursor-pointer",onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.click()},children:[(0,U.jsx)(f.A,{className:"w-12 h-12 text-slate-400 mb-4"}),(0,U.jsxs)("p",{className:"text-lg font-medium text-slate-700",children:["Click to upload ",null===(l=he.find(e=>e.id===y))||void 0===l?void 0:l.label]}),(0,U.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"JPG, PNG up to 10MB - High resolution recommended"}),(0,U.jsx)("input",{ref:$,type:"file",accept:"image/*",onChange:async e=>{const a=e.target.files[0];if(!a)return;if(!a.type.startsWith("image/"))return void le.oR.error("Please upload an image file");if(a.size>10485760)return void le.oR.error("File size too large. Max 10MB allowed.");const s=new FileReader;s.onloadend=async()=>{const e=s.result.split(",")[1];await V(e)},s.readAsDataURL(a)},className:"hidden","data-testid":"photo-upload-input"}),P&&(0,U.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-indigo-600",children:[(0,U.jsx)(x.A,{className:"w-5 h-5 animate-spin"}),(0,U.jsx)("span",{children:"AI analyzing photo..."})]})]})})}),T&&(0,U.jsx)(re.Zp,{className:"".concat(T.quality_score>=80?"border-emerald-300 bg-emerald-50":T.quality_score>=60?"border-amber-300 bg-amber-50":"border-red-300 bg-red-50"),children:(0,U.jsx)(re.Wu,{className:"p-4",children:(0,U.jsxs)("div",{className:"flex items-start gap-3",children:[T.quality_score>=80?(0,U.jsx)(ce.A,{className:"w-6 h-6 text-emerald-600 flex-shrink-0"}):T.quality_score>=60?(0,U.jsx)(_.A,{className:"w-6 h-6 text-amber-600 flex-shrink-0"}):(0,U.jsx)(de.A,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,U.jsxs)("span",{className:"font-semibold",children:["Quality Score: ",T.quality_score,"/100"]}),T.face_detected&&(0,U.jsx)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded",children:"Face Detected"})]}),(null===(r=T.issues)||void 0===r?void 0:r.length)>0&&(0,U.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,U.jsx)("strong",{children:"Issues:"})," ",T.issues.join(", ")]}),(null===(i=T.recommendations)||void 0===i?void 0:i.length)>0&&(0,U.jsxs)("div",{className:"text-sm text-slate-600 mt-1",children:[(0,U.jsx)("strong",{children:"Tips:"})," ",T.recommendations.join(", ")]})]})]})})}),(0,U.jsx)("canvas",{ref:G,className:"hidden"})]})]}),"twin"===(null===E||void 0===E?void 0:E.type)&&(0,U.jsx)("div",{className:"mt-4 p-4 bg-amber-50 border-2 border-amber-300 rounded-lg",children:(0,U.jsxs)("div",{className:"flex items-start gap-3",children:[(0,U.jsx)(_.A,{className:"w-6 h-6 text-amber-600 flex-shrink-0"}),(0,U.jsxs)("div",{children:[(0,U.jsx)("h4",{className:"font-bold text-amber-800",children:"\u26a0\ufe0f Similar Face Detected!"}),(0,U.jsxs)("p",{className:"text-sm text-amber-700 mt-1",children:["This face is ",E.similarity,"% similar to: ",(0,U.jsx)("strong",{children:null===(c=E.similar_student)||void 0===c?void 0:c.name}),(null===(d=E.similar_student)||void 0===d?void 0:d.class)&&" (Class ".concat(E.similar_student.class,")")]}),(0,U.jsxs)("p",{className:"text-sm text-amber-700 mt-2",children:[(0,U.jsx)("strong",{children:"Kya ye student twin/sibling hai?"})," Please verify carefully before proceeding."]}),(0,U.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,U.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>z(null),children:"Re-take Photo"}),(0,U.jsx)(o.$,{size:"sm",className:"bg-amber-600 hover:bg-amber-700",onClick:()=>{z(null),le.oR.success("Verified as different person. Continue enrollment.")},children:"Yes, Different Person - Continue"})]})]})]})}),(0,U.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[(0,U.jsx)(o.$,{variant:"ghost",onClick:async()=>{try{(await fetch("".concat("","/api/face-recognition/skip-enrollment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:h,school_id:u,skip_face:!0,skip_biometric:!0,reason:"Skipped during admission - will complete later"})})).ok&&(le.oR.info("Face enrollment skipped. Can be completed later."),null===j||void 0===j||j(),null===N||void 0===N||N())}catch(e){console.error("Skip error:",e)}},className:"text-slate-500",children:"Skip for now"}),(0,U.jsxs)("div",{className:"flex gap-3",children:[(0,U.jsx)(o.$,{variant:"outline",onClick:N,children:"Cancel"}),(0,U.jsxs)(o.$,{onClick:()=>{Q(),null===g||void 0===g||g(),null===N||void 0===N||N()},disabled:!X,className:"bg-emerald-600 hover:bg-emerald-700","data-testid":"complete-enrollment-btn",children:[(0,U.jsx)(ce.A,{className:"w-4 h-4 mr-2"}),"Complete Enrollment"]})]})]}),(0,U.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg flex items-start gap-2",children:[(0,U.jsx)(me.A,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,U.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,U.jsx)("strong",{children:"Tips for best results:"}),(0,U.jsxs)("ul",{className:"list-disc ml-4 mt-1",children:[(0,U.jsx)("li",{children:"Good lighting - face clearly visible"}),(0,U.jsx)("li",{children:"Remove glasses if possible"}),(0,U.jsx)("li",{children:"Neutral expression for passport photo"}),(0,U.jsx)("li",{children:"Different angles help AI identify student accurately"}),(0,U.jsx)("li",{children:"Full body photo helps even if face is partially visible"})]})]})]})]})})}var xe=s(5972);var pe=s(3868),ge=s(2385);const be="".concat("","/api");function fe(){var e;const{t:a}=(0,l.Bd)(),{schoolId:s,user:M}=(0,r.As)(),[L,G]=(0,n.useState)([]),[$,q]=(0,n.useState)([]),[H,W]=(0,n.useState)([]),[Q,V]=(0,n.useState)(!0),[Z,Y]=(0,n.useState)(""),[X,K]=(0,n.useState)(""),[re,ie]=(0,n.useState)(!1),[oe,ce]=(0,n.useState)(!1),[de,me]=(0,n.useState)(!1),[he,fe]=(0,n.useState)(!1),[je,ve]=(0,n.useState)(!1),[Ne,_e]=(0,n.useState)(!1),[ye,we]=(0,n.useState)(null),[Ae,Ce]=(0,n.useState)(null),[ke,Se]=(0,n.useState)(null),[Pe,Re]=(0,n.useState)(null),[Ie,Be]=(0,n.useState)(null),[De,Fe]=(0,n.useState)(!1),[Te,Je]=(0,n.useState)(null),[Ee,ze]=(0,n.useState)(!1),[Oe,Me]=(0,n.useState)(!1),[Le,Ge]=(0,n.useState)(!1),[$e,qe]=(0,n.useState)({fromClassId:"",toClassId:"",selectedStudentIds:[],selectAll:!1}),[Ue,He]=(0,n.useState)(!1),[We,Qe]=(0,n.useState)(null),[Ve,Ze]=(0,n.useState)(!1),[Ye,Xe]=(0,n.useState)(!1),[Ke,ea]=(0,n.useState)(null),[aa,sa]=(0,n.useState)(""),[ta,na]=(0,n.useState)(!1),[la,ra]=(0,n.useState)(!1),[ia,oa]=(0,n.useState)(null),[ca,da]=(0,n.useState)(!1),[ma,ha]=(0,n.useState)(!1),[ua,xa]=(0,n.useState)(null),[pa,ga]=(0,n.useState)(!1),ba=(0,n.useRef)(null),fa=(0,n.useRef)(null),[ja,va]=(0,n.useState)(null),[Na,_a]=(0,n.useState)(null),[ya,wa]=(0,n.useState)(!1),[Aa,Ca]=(0,n.useState)(null),[ka,Sa]=(0,n.useState)(!1),[Pa,Ra]=(0,n.useState)(null),[Ia,Ba]=(0,n.useState)(""),[Da,Fa]=(0,n.useState)(!1),[Ta,Ja]=(0,n.useState)(!1),Ea=(0,n.useRef)(null),za=(0,n.useRef)(null),[Oa,Ma]=(0,n.useState)("basic"),[La,Ga]=(0,n.useState)({name:"",class_id:"",dob:"",gender:"male",blood_group:"",admission_date:(new Date).toISOString().split("T")[0],aadhar_no:"",scholar_no:"",pen_number:"",sssmid:"",samagra_family_id:"",jan_aadhar_no:"",caste:"",sub_caste:"",religion:"",category:"",nationality:"Indian",mother_tongue:"",birth_place:"",identification_mark:"",rte_status:!1,father_name:"",father_occupation:"",father_qualification:"",mother_name:"",mother_occupation:"",mother_qualification:"",guardian_name:"",guardian_relation:"",guardian_mobile:"",guardian_occupation:"",annual_income:"",mobile:"",parent_phone:"",email:"",address:"",emergency_contact:"",emergency_contact_name:"",bank_name:"",bank_account_no:"",ifsc_code:"",bank_branch:"",transport_mode:"",bus_route:"",bus_stop:"",pickup_point:"",is_hosteler:!1,hostel_room_no:"",medical_conditions:"",allergies:"",previous_school:"",previous_class:"",previous_percentage:"",tc_number:""}),[$a,qa]=(0,n.useState)({birth_certificate:null,aadhar_card:null,transfer_certificate:null,marksheet:null,caste_certificate:null,income_certificate:null,passport_photo:null}),[Ua,Ha]=(0,n.useState)({father_photo:null,mother_photo:null,guardian_photo:null}),[Wa,Qa]=(0,n.useState)(null),[Va,Za]=((0,n.useRef)(null),(0,n.useRef)(null),(0,n.useState)(null)),[Ya,Xa]=(0,n.useState)({reason:"fees_pending",details:""}),Ka={fees_pending:"Fees Pending (\u0936\u0941\u0932\u094d\u0915 \u092c\u0915\u093e\u092f\u093e)",misconduct:"Misconduct (\u0905\u0928\u0941\u0936\u093e\u0938\u0928\u0939\u0940\u0928\u0924\u093e)",document_pending:"Document Pending (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0932\u0902\u092c\u093f\u0924)",attendance_low:"Low Attendance (\u0915\u092e \u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f)",other:"Other (\u0905\u0928\u094d\u092f)"};(0,n.useEffect)(()=>{s&&(es(),as())},[s,Z,X]);const es=async()=>{try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)};let t="".concat(be,"/students?school_id=").concat(s);Z&&(t+="&search=".concat(Z)),X&&(t+="&class_id=".concat(X));const[n,l]=await Promise.all([i.A.get("".concat(t,"&status=active"),{headers:a}),i.A.get("".concat(t,"&status=suspended"),{headers:a})]);G(n.data),q(l.data)}catch(e){le.oR.error("Failed to fetch students")}finally{V(!1)}},as=async()=>{try{const e=localStorage.getItem("token"),a=await i.A.get("".concat(be,"/classes?school_id=").concat(s),{headers:{Authorization:"Bearer ".concat(e)}});W(a.data)}catch(e){console.error("Failed to fetch classes")}},ss=()=>{Aa&&(Aa.getTracks().forEach(e=>e.stop()),Ca(null)),wa(!1)},ts=async(e,a)=>{const s=e.target.files[0];if(!s)return;if(s.size>5242880)return void le.oR.error("Photo size 5MB se kam honi chahiye");ga(!0);const n=new FileReader;n.onload=async e=>{try{const s=localStorage.getItem("token"),n=(await i.A.post("".concat(be,"/students/").concat(a,"/update-photo"),{photo_data:e.target.result},{headers:{Authorization:"Bearer ".concat(s)}})).data.photo_url;xa(e=>e?(0,t.A)((0,t.A)({},e),{},{photo_url:n}):e),va(e=>e&&e.id===a?(0,t.A)((0,t.A)({},e),{},{photo_url:n}):e),es(),le.oR.success("Photo upload ho gayi!")}catch(s){le.oR.error("Photo upload fail hua. Please try again.")}finally{ga(!1)}},n.readAsDataURL(s)},ns=async e=>{oa({id:e.id,name:e.name,student_id:e.student_id||e.id,class_name:e.class_name,father_name:e.father_name,mobile:e.mobile||e.parent_phone,plain_password:e.plain_password||null,default_password:e.plain_password||e.mobile||e.parent_phone||e.student_id||e.id}),ra(!0)},ls=e=>"\ud83d\udcda *StudyTino Login Details*\n\n\ud83d\udc64 Student: ".concat(e.name,"\n\ud83c\udfeb Class: ").concat(e.class_name||"N/A","\n\n\ud83d\udd10 *Login Credentials:*\nStudent ID: ").concat(e.student_id,"\nPassword: ").concat(e.default_password,"\n\n\ud83d\udcf1 App Link: ").concat(window.location.origin,"/studytino\n\nNote: First login \u092a\u0930 password change \u0915\u0930\u0947\u0902\u0964"),rs=e=>{const a=e,s=window.open("","_blank");if(!s)return void le.oR.error("Popup blocked - please allow popups");const t=a.photo_url?'<img src="'.concat(a.photo_url,'" style="width:120px;height:140px;object-fit:cover;border-radius:8px;border:2px solid #1e40af;" />'):'<div style="width:120px;height:140px;background:#e2e8f0;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:48px;color:#94a3b8;border:2px solid #1e40af;">\ud83d\udc64</div>',n=(e,a)=>a?'<tr><td style="padding:6px 12px;font-weight:600;color:#374151;background:#f8fafc;border:1px solid #e2e8f0;width:200px;">'.concat(e,'</td><td style="padding:6px 12px;border:1px solid #e2e8f0;">').concat(a,"</td></tr>"):"",l=(e,a)=>'<tr><td colspan="2" style="padding:10px 12px;font-weight:700;font-size:14px;background:linear-gradient(135deg,#1e40af,#3b82f6);color:white;border:1px solid #1e40af;">'.concat(a," ").concat(e,"</td></tr>"),r="<!DOCTYPE html><html><head><title>Student Profile - ".concat(a.name,'</title>\n<style>@page{size:A4;margin:15mm}body{font-family:\'Segoe UI\',Arial,sans-serif;color:#1e293b;margin:0;padding:20px}\n.header{text-align:center;margin-bottom:20px;border-bottom:3px solid #1e40af;padding-bottom:15px}\ntable{width:100%;border-collapse:collapse;margin-bottom:15px;font-size:13px}\n.print-btn{position:fixed;top:10px;right:10px;padding:10px 20px;background:#1e40af;color:white;border:none;border-radius:8px;cursor:pointer;font-size:14px}\n@media print{.print-btn{display:none}}</style></head>\n<body>\n<button class="print-btn" onclick="window.print()">\ud83d\udda8\ufe0f Print</button>\n<div class="header">\n').concat(t,'\n<h1 style="margin:10px 0 5px;color:#1e40af;font-size:24px;">').concat(a.name,'</h1>\n<p style="color:#64748b;margin:0;">Student ID: ').concat(a.student_id||a.admission_no||"N/A"," | Class: ").concat(a.class_name||"N/A").concat(a.section?" - "+a.section:"","</p>\n</div>\n<table>\n").concat(l("Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)","\ud83d\udccb"),"\n").concat(n("Name (\u0928\u093e\u092e)",a.name),"\n").concat(n("Student ID",a.student_id||a.admission_no),"\n").concat(n("Class (\u0915\u0915\u094d\u0937\u093e)",a.class_name),"\n").concat(n("Section",a.section),"\n").concat(n("Gender (\u0932\u093f\u0902\u0917)",a.gender),"\n").concat(n("Date of Birth (\u091c\u0928\u094d\u092e \u0924\u093f\u0925\u093f)",a.dob),"\n").concat(n("Blood Group (\u0930\u0915\u094d\u0924 \u0938\u092e\u0942\u0939)",a.blood_group),"\n").concat(n("Admission Date (\u092a\u094d\u0930\u0935\u0947\u0936 \u0924\u093f\u0925\u093f)",a.admission_date),"\n").concat(n("Category (\u0936\u094d\u0930\u0947\u0923\u0940)",a.category),"\n").concat(n("Caste (\u091c\u093e\u0924\u093f)",a.caste),"\n").concat(n("Religion (\u0927\u0930\u094d\u092e)",a.religion),"\n").concat(n("Nationality",a.nationality),"\n").concat(n("Mother Tongue",a.mother_tongue),"\n").concat(n("Birth Place",a.birth_place),"\n").concat(n("Identification Mark",a.identification_mark),"\n").concat(n("RTE Status",a.rte_status?"Yes":"No"),"\n").concat(l("Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)","\ud83c\udd94"),"\n").concat(n("Aadhar No (\u0906\u0927\u093e\u0930 \u0928\u0902.)",a.aadhar_no),"\n").concat(n("Scholar No (\u0935\u093f\u0926\u094d\u092f\u093e\u0930\u094d\u0925\u0940 \u0915\u094d\u0930\u092e\u093e\u0902\u0915)",a.scholar_no),"\n").concat(n("PEN Number",a.pen_number),"\n").concat(n("SSSMID",a.sssmid),"\n").concat(n("Samagra Family ID",a.samagra_family_id),"\n").concat(n("Jan Aadhar No",a.jan_aadhar_no),"\n").concat(l("Family Information (\u092a\u093e\u0930\u093f\u0935\u093e\u0930\u093f\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)","\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66"),"\n").concat(n("Father Name (\u092a\u093f\u0924\u093e \u0915\u093e \u0928\u093e\u092e)",a.father_name),"\n").concat(n("Father Occupation",a.father_occupation),"\n").concat(n("Father Qualification",a.father_qualification),"\n").concat(n("Mother Name (\u092e\u093e\u0924\u093e \u0915\u093e \u0928\u093e\u092e)",a.mother_name),"\n").concat(n("Mother Occupation",a.mother_occupation),"\n").concat(n("Mother Qualification",a.mother_qualification),"\n").concat(n("Guardian Name",a.guardian_name),"\n").concat(n("Guardian Relation",a.guardian_relation),"\n").concat(n("Guardian Mobile",a.guardian_mobile),"\n").concat(n("Guardian Occupation",a.guardian_occupation),"\n").concat(n("Annual Income",a.annual_income),"\n").concat(l("Contact Information (\u0938\u0902\u092a\u0930\u094d\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)","\ud83d\udcde"),"\n").concat(n("Mobile (\u092e\u094b\u092c\u093e\u0907\u0932)",a.mobile),"\n").concat(n("Parent Phone",a.parent_phone),"\n").concat(n("Email",a.email),"\n").concat(n("Address (\u092a\u0924\u093e)",a.address),"\n").concat(n("Emergency Contact",a.emergency_contact),"\n").concat(n("Emergency Contact Name",a.emergency_contact_name),"\n").concat(l("Bank Details - Scholarship (\u092c\u0948\u0902\u0915 \u0935\u093f\u0935\u0930\u0923)","\ud83c\udfe6"),"\n").concat(n("Bank Name",a.bank_name),"\n").concat(n("Account No",a.bank_account_no),"\n").concat(n("IFSC Code",a.ifsc_code),"\n").concat(n("Branch",a.bank_branch),"\n").concat(l("Transport (\u092a\u0930\u093f\u0935\u0939\u0928)","\ud83d\ude8c"),"\n").concat(n("Transport Mode",a.transport_mode),"\n").concat(n("Bus Route",a.bus_route),"\n").concat(n("Bus Stop",a.bus_stop),"\n").concat(n("Pickup Point",a.pickup_point),"\n").concat(l("Medical (\u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e)","\ud83c\udfe5"),"\n").concat(n("Medical Conditions",a.medical_conditions),"\n").concat(n("Allergies",a.allergies),"\n").concat(l("Previous Education (\u092a\u0942\u0930\u094d\u0935 \u0936\u093f\u0915\u094d\u0937\u093e)","\ud83c\udf93"),"\n").concat(n("Previous School",a.previous_school),"\n").concat(n("Previous Class",a.previous_class),"\n").concat(n("Previous Percentage",a.previous_percentage),"\n").concat(n("TC Number",a.tc_number),'\n</table>\n<div style="text-align:center;margin-top:30px;color:#94a3b8;font-size:11px;">\nGenerated on ').concat((new Date).toLocaleDateString("en-IN")," | Schooltino ERP\n</div>\n</body></html>");s.document.write(r),s.document.close()},is=e=>{Se(e),Ga({name:e.name,class_id:e.class_id,father_name:e.father_name,mother_name:e.mother_name,dob:e.dob,gender:e.gender,address:e.address,mobile:e.mobile,parent_phone:e.parent_phone||e.mobile||"",email:e.email||"",blood_group:e.blood_group||"",aadhar_no:e.aadhar_no||"",scholar_no:e.scholar_no||"",pen_number:e.pen_number||"",sssmid:e.sssmid||"",samagra_family_id:e.samagra_family_id||"",jan_aadhar_no:e.jan_aadhar_no||"",caste:e.caste||"",sub_caste:e.sub_caste||"",religion:e.religion||"",category:e.category||"",nationality:e.nationality||"Indian",mother_tongue:e.mother_tongue||"",birth_place:e.birth_place||"",identification_mark:e.identification_mark||"",rte_status:e.rte_status||!1,father_occupation:e.father_occupation||"",father_qualification:e.father_qualification||"",mother_occupation:e.mother_occupation||"",mother_qualification:e.mother_qualification||"",guardian_name:e.guardian_name||"",guardian_relation:e.guardian_relation||"",guardian_mobile:e.guardian_mobile||"",guardian_occupation:e.guardian_occupation||"",annual_income:e.annual_income||"",emergency_contact:e.emergency_contact||"",emergency_contact_name:e.emergency_contact_name||"",bank_name:e.bank_name||"",bank_account_no:e.bank_account_no||"",ifsc_code:e.ifsc_code||"",bank_branch:e.bank_branch||"",transport_mode:e.transport_mode||"",bus_route:e.bus_route||"",bus_stop:e.bus_stop||"",pickup_point:e.pickup_point||"",is_hosteler:e.is_hosteler||!1,hostel_room_no:e.hostel_room_no||"",medical_conditions:e.medical_conditions||"",allergies:e.allergies||"",previous_school:e.previous_school||"",previous_class:e.previous_class||"",previous_percentage:e.previous_percentage||"",tc_number:e.tc_number||"",admission_date:e.admission_date||(new Date).toISOString().split("T")[0]}),Ma("basic"),ie(!0)},os=()=>{Se(null),Ma("basic"),Ga({name:"",class_id:"",dob:"",gender:"male",blood_group:"",admission_date:(new Date).toISOString().split("T")[0],aadhar_no:"",scholar_no:"",pen_number:"",sssmid:"",samagra_family_id:"",jan_aadhar_no:"",caste:"",sub_caste:"",religion:"",category:"",nationality:"Indian",mother_tongue:"",birth_place:"",identification_mark:"",rte_status:!1,father_name:"",father_occupation:"",father_qualification:"",mother_name:"",mother_occupation:"",mother_qualification:"",guardian_name:"",guardian_relation:"",guardian_mobile:"",guardian_occupation:"",annual_income:"",mobile:"",parent_phone:"",email:"",address:"",emergency_contact:"",emergency_contact_name:"",bank_name:"",bank_account_no:"",ifsc_code:"",bank_branch:"",transport_mode:"",bus_route:"",bus_stop:"",pickup_point:"",is_hosteler:!1,hostel_room_no:"",medical_conditions:"",allergies:"",previous_school:"",previous_class:"",previous_percentage:"",tc_number:""})},cs=e=>{Ga(a=>(0,t.A)((0,t.A)({},a),{},{[e.target.name]:e.target.value}))},ds=(e,a)=>{navigator.clipboard.writeText(e),Je(a),setTimeout(()=>Je(null),2e3),le.oR.success("Copied!")};return s?(0,U.jsxs)("div",{className:"space-y-6","data-testid":"students-page",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:a("students")}),(0,U.jsx)("p",{className:"text-slate-500 mt-1",children:a("student_admission")})]}),(0,U.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,U.jsx)(pe.A,{type:"student",schoolId:s,onImportComplete:es}),(0,U.jsxs)(o.$,{variant:"outline",onClick:()=>Me(!0),className:"gap-2 text-green-600 border-green-200 hover:bg-green-50","data-testid":"promote-students-btn",children:[(0,U.jsx)(u.A,{className:"w-4 h-4"}),a("promote_students")]}),(0,U.jsxs)(o.$,{variant:"outline",onClick:async()=>{if(0!==L.length){ze(!0),le.oR.info("Generating ID cards...");try{const s=localStorage.getItem("token"),t=L.filter(e=>"active"===e.status),n=[];for(const c of t)try{var e;const a=await i.A.get(be+"/id-card/generate/student/"+c.id,{headers:{Authorization:"Bearer "+s}});null!==(e=a.data)&&void 0!==e&&e.id_card&&n.push({card:a.data.id_card,school:a.data.school,photo:a.data.photo||null})}catch(a){console.error("Error fetching card for",c.name)}const l=window.open("","_blank");if(!l)return le.oR.error("Popup blocked - please allow popups"),void ze(!1);let r=n.map(e=>{const a=e.card,s=e.school,t=e.photo,n=null!==s&&void 0!==s&&s.logo_url?'<div class="watermark"><img src="'+s.logo_url+'" alt=""/></div>':"",l=null!==s&&void 0!==s&&s.logo_url?'<div class="header-logo"><img src="'+s.logo_url+'" alt=""/></div>':"",r=a.parent_phone||a.phone||"",i=t?'<div class="photo"><img src="'+t+'" style="width:100%;height:100%;object-fit:cover;border-radius:2mm;" /></div>':'<div class="photo"><span>Photo</span></div>';return'<div class="id-card">'+n+'<div class="content"><div class="header">'+l+'<div class="header-text"><div class="school-name">'+((null===s||void 0===s?void 0:s.name)||"School")+'</div><div class="card-type">STUDENT ID CARD</div></div></div><div class="body">'+i+'<div class="details"><div class="name">'+a.name+'</div><div class="detail-row"><span class="label">Class:</span><span class="value">'+(a.class||"")+'</span></div><div class="detail-row"><span class="label">Father:</span><span class="value">'+(a.father_name||"")+"</span></div>"+(a.blood_group?'<div class="detail-row"><span class="label">Blood:</span><span class="value">'+a.blood_group+"</span></div>":"")+(r?'<div class="contact">\ud83d\udcde Parent: '+r+"</div>":"")+'</div></div><div class="footer">Valid: '+(a.valid_until||(new Date).getFullYear()+1)+"</div></div></div>"}).join("");const o="<!DOCTYPE html><html><head><title>Bulk Student ID Cards</title><style>@page{size:A4;margin:10mm}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;display:flex;flex-wrap:wrap;gap:10mm;padding:10mm;-webkit-print-color-adjust:exact;print-color-adjust:exact}.id-card{width:85.6mm;height:54mm;background:linear-gradient(135deg,#1e40af 0%,#3b82f6 50%,#1e40af 100%);border-radius:4mm;overflow:hidden;position:relative;color:white;padding:3mm;page-break-inside:avoid}.watermark{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0.15;width:25mm;height:25mm}.watermark img{width:100%;height:100%;object-fit:contain}.content{position:relative;z-index:1;height:100%;display:flex;flex-direction:column}.header{display:flex;align-items:center;gap:2mm;padding-bottom:2mm;border-bottom:0.3mm solid rgba(255,255,255,0.3);margin-bottom:2mm}.header-logo{width:7mm;height:7mm;background:white;border-radius:50%;padding:0.5mm}.header-logo img{width:100%;height:100%;object-fit:contain;border-radius:50%}.header-text{flex:1;text-align:center}.school-name{font-size:8pt;font-weight:bold;text-transform:uppercase}.card-type{font-size:5pt;background:rgba(255,255,255,0.25);padding:0.5mm 2mm;border-radius:2mm;display:inline-block;margin-top:1mm}.body{display:flex;gap:2mm;flex:1}.photo{width:16mm;height:20mm;background:white;border-radius:2mm;display:flex;align-items:center;justify-content:center;color:#999;font-size:6pt;overflow:hidden;flex-shrink:0}.details{flex:1;font-size:6pt}.name{font-size:9pt;font-weight:bold;color:#fef08a;margin-bottom:1mm}.detail-row{margin-bottom:0.5mm}.label{opacity:0.8;width:12mm;display:inline-block}.value{font-weight:600}.contact{background:rgba(255,255,255,0.2);padding:1mm;border-radius:1mm;margin-top:1mm;font-size:5.5pt}.footer{font-size:4pt;opacity:0.8;text-align:right;margin-top:auto}</style></head><body>"+r+"<script>window.onload=function(){setTimeout(function(){window.print()},1000)}<\/script></body></html>";l.document.write(o),l.document.close(),le.oR.success(n.length+" ID cards ready to print!")}catch(s){le.oR.error("Error generating bulk ID cards")}finally{ze(!1)}}else le.oR.error("No students to print")},disabled:Ee||0===L.length,className:"gap-2","data-testid":"bulk-print-btn",children:[Ee?(0,U.jsx)(x.A,{className:"w-4 h-4 animate-spin"}):(0,U.jsx)(p.A,{className:"w-4 h-4"}),a("bulk_print_id_cards")]}),(0,U.jsxs)(m.lG,{open:re,onOpenChange:e=>{ie(e),e||os()},children:[(0,U.jsx)(m.zM,{asChild:!0,children:(0,U.jsxs)(o.$,{className:"btn-primary","data-testid":"add-student-btn",children:[(0,U.jsx)(g.A,{className:"w-5 h-5 mr-2"}),a("new_admissions")]})}),(0,U.jsxs)(m.Cf,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[(0,U.jsxs)(m.c7,{children:[(0,U.jsx)(m.L3,{className:"text-xl",children:ke?"".concat(a("edit")," ").concat(a("students")):"\ud83d\udcdd ".concat(a("new_admissions"))}),(0,U.jsx)(m.rr,{children:!ke&&"Student ID \u0914\u0930 Password automatically generate \u0939\u094b\u0902\u0917\u0947\u0964 \u0938\u092d\u0940 * fields \u092d\u0930\u0928\u093e \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0964"})]}),(0,U.jsx)("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg mb-4 overflow-x-auto",children:[{id:"basic",label:"\ud83d\udccb Basic"},{id:"identity",label:"\ud83c\udd94 ID & Docs"},{id:"family",label:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family & Contact"},{id:"bank",label:"\ud83c\udfe6 Bank"},{id:"other",label:"\ud83d\ude8c Transport & Medical"},{id:"documents",label:"\ud83d\udcc4 Documents"}].map(e=>(0,U.jsx)("button",{type:"button",onClick:()=>Ma(e.id),className:"flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat(Oa===e.id?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:bg-white/50"),children:e.label},e.id))}),(0,U.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),Fe(!0);try{const e=(0,t.A)((0,t.A)({},La),{},{school_id:s}),n=localStorage.getItem("token"),l={Authorization:"Bearer ".concat(n)};if(ke)await i.A.put("".concat(be,"/students/").concat(ke.id),e,{headers:l}),le.oR.success(a("saved_successfully")),ie(!1);else{const a=await i.A.post("".concat(be,"/students/admit"),e,{headers:l}),t=a.data.student_id;if(Na)try{const e=Na.split(",")[1],a=atob(e),l=new Array(a.length);for(let s=0;s<a.length;s++)l[s]=a.charCodeAt(s);const r=new Uint8Array(l),o=new Blob([r],{type:"image/jpeg"}),c=new FormData;c.append("photo",o,"admission_photo.jpg"),c.append("student_id",t),c.append("school_id",s),c.append("photo_type","front"),await i.A.post("".concat(be,"/face-recognition/upload-photo"),c,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)}}),le.oR.success("Face photo uploaded for AI attendance! \ud83d\udcf8")}catch(r){console.error("Photo upload failed:",r),le.oR.info("Student created but photo upload failed. Add later from profile.")}Be({student_id:t,name:a.data.name,login_id:a.data.login_id,temporary_password:a.data.temporary_password,class_name:a.data.class_name,section:a.data.section}),ie(!1),ce(!0)}os(),_a(null),es()}catch(o){var n,l;const e=null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.detail;le.oR.error("string"===typeof e?e:a("something_went_wrong"))}finally{Fe(!1)}},className:"space-y-4",children:["basic"===Oa&&(0,U.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,U.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udccb Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)(d.J,{children:[a("student_name")," *"]}),(0,U.jsx)(c.p,{name:"name",value:La.name,onChange:cs,required:!0,placeholder:"Student Full Name","data-testid":"student-name-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)(d.J,{children:[a("class_section")," *"]}),(0,U.jsxs)("select",{name:"class_id",value:La.class_id,onChange:cs,required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"class-select",children:[(0,U.jsx)("option",{value:"",children:a("select_class")}),H.map(e=>(0,U.jsxs)("option",{value:e.id,children:[e.name,e.section&&"A"!==e.section?" - ".concat(e.section):""]},e.id))]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)(d.J,{children:[a("gender")," *"]}),(0,U.jsxs)("select",{name:"gender",value:La.gender,onChange:cs,required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"gender-select",children:[(0,U.jsx)("option",{value:"male",children:a("male")}),(0,U.jsx)("option",{value:"female",children:a("female")}),(0,U.jsx)("option",{value:"other",children:a("other")})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)(d.J,{children:[a("dob")," *"]}),(0,U.jsx)(c.p,{name:"dob",type:"date",value:La.dob,onChange:cs,required:!0,max:(new Date).toISOString().split("T")[0],"data-testid":"dob-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)(d.J,{children:[a("admission_date")," *"]}),(0,U.jsx)(c.p,{name:"admission_date",type:"date",value:La.admission_date,onChange:cs,required:!0,max:(new Date).toISOString().split("T")[0],"data-testid":"admission-date-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:a("blood_group")}),(0,U.jsxs)("select",{name:"blood_group",value:La.blood_group,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),["A+","A-","B+","B-","O+","O-","AB+","AB-"].map(e=>(0,U.jsx)("option",{value:e,children:e},e))]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Birth Place (\u091c\u0928\u094d\u092e \u0938\u094d\u0925\u093e\u0928)"}),(0,U.jsx)(c.p,{name:"birth_place",value:La.birth_place,onChange:cs,placeholder:"City/Village"})]}),(0,U.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,U.jsx)(d.J,{children:"Identification Mark (\u092a\u0939\u091a\u093e\u0928 \u091a\u093f\u0928\u094d\u0939)"}),(0,U.jsx)(c.p,{name:"identification_mark",value:La.identification_mark,onChange:cs,placeholder:"Mole on right cheek, etc."})]})]})]}),"identity"===Oa&&(0,U.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,U.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83c\udd94 Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Scholar No. / Enrollment No."}),(0,U.jsx)(c.p,{name:"scholar_no",value:La.scholar_no,onChange:cs,placeholder:"If existing student"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"PEN Number (CBSE)"}),(0,U.jsx)(c.p,{name:"pen_number",value:La.pen_number,onChange:cs,placeholder:"Permanent Education Number"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Aadhar Number"}),(0,U.jsx)(c.p,{name:"aadhar_no",value:La.aadhar_no,onChange:cs,placeholder:"12 digit Aadhar","data-testid":"aadhar-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"SSSMID / Samagra ID (MP)"}),(0,U.jsx)(c.p,{name:"sssmid",value:La.sssmid,onChange:cs,placeholder:"\u0938\u092e\u0917\u094d\u0930 ID","data-testid":"samgra-id-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Samagra Family ID (MP)"}),(0,U.jsx)(c.p,{name:"samagra_family_id",value:La.samagra_family_id,onChange:cs,placeholder:"\u0938\u092e\u0917\u094d\u0930 \u092a\u0930\u093f\u0935\u093e\u0930 ID"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Jan Aadhar / Bhamashah (RJ)"}),(0,U.jsx)(c.p,{name:"jan_aadhar_no",value:La.jan_aadhar_no,onChange:cs,placeholder:"\u091c\u0928 \u0906\u0927\u093e\u0930"})]})]}),(0,U.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,U.jsx)("h4",{className:"font-medium text-slate-700 mb-3",children:"\ud83d\udcc2 Category Information (\u0936\u094d\u0930\u0947\u0923\u0940)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Caste (\u091c\u093e\u0924\u093f)"}),(0,U.jsxs)("select",{name:"caste",value:La.caste,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select Caste"}),(0,U.jsx)("option",{value:"General",children:"General (\u0938\u093e\u092e\u093e\u0928\u094d\u092f)"}),(0,U.jsx)("option",{value:"OBC",children:"OBC (\u0905\u0928\u094d\u092f \u092a\u093f\u091b\u0921\u093c\u093e \u0935\u0930\u094d\u0917)"}),(0,U.jsx)("option",{value:"SC",children:"SC (\u0905\u0928\u0941\u0938\u0942\u091a\u093f\u0924 \u091c\u093e\u0924\u093f)"}),(0,U.jsx)("option",{value:"ST",children:"ST (\u0905\u0928\u0941\u0938\u0942\u091a\u093f\u0924 \u091c\u0928\u091c\u093e\u0924\u093f)"}),(0,U.jsx)("option",{value:"EWS",children:"EWS (\u0906\u0930\u094d\u0925\u093f\u0915 \u0915\u092e\u091c\u094b\u0930)"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Sub-Caste (\u0909\u092a \u091c\u093e\u0924\u093f)"}),(0,U.jsx)(c.p,{name:"sub_caste",value:La.sub_caste,onChange:cs,placeholder:"Sub-caste"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Religion (\u0927\u0930\u094d\u092e)"}),(0,U.jsxs)("select",{name:"religion",value:La.religion,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select Religion"}),(0,U.jsx)("option",{value:"Hindu",children:"Hindu (\u0939\u093f\u0928\u094d\u0926\u0942)"}),(0,U.jsx)("option",{value:"Muslim",children:"Muslim (\u092e\u0941\u0938\u094d\u0932\u093f\u092e)"}),(0,U.jsx)("option",{value:"Christian",children:"Christian (\u0908\u0938\u093e\u0908)"}),(0,U.jsx)("option",{value:"Sikh",children:"Sikh (\u0938\u093f\u0916)"}),(0,U.jsx)("option",{value:"Buddhist",children:"Buddhist (\u092c\u094c\u0926\u094d\u0927)"}),(0,U.jsx)("option",{value:"Jain",children:"Jain (\u091c\u0948\u0928)"}),(0,U.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Category (\u0935\u0930\u094d\u0917)"}),(0,U.jsxs)("select",{name:"category",value:La.category,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"APL",children:"APL (\u0917\u0930\u0940\u092c\u0940 \u0930\u0947\u0916\u093e \u0938\u0947 \u090a\u092a\u0930)"}),(0,U.jsx)("option",{value:"BPL",children:"BPL (\u0917\u0930\u0940\u092c\u0940 \u0930\u0947\u0916\u093e \u0938\u0947 \u0928\u0940\u091a\u0947)"}),(0,U.jsx)("option",{value:"EWS",children:"EWS (\u0906\u0930\u094d\u0925\u093f\u0915 \u0915\u092e\u091c\u094b\u0930)"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Mother Tongue (\u092e\u093e\u0924\u0943\u092d\u093e\u0937\u093e)"}),(0,U.jsxs)("select",{name:"mother_tongue",value:La.mother_tongue,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"Hindi",children:"Hindi (\u0939\u093f\u0928\u094d\u0926\u0940)"}),(0,U.jsx)("option",{value:"English",children:"English (\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940)"}),(0,U.jsx)("option",{value:"Marathi",children:"Marathi (\u092e\u0930\u093e\u0920\u0940)"}),(0,U.jsx)("option",{value:"Gujarati",children:"Gujarati (\u0917\u0941\u091c\u0930\u093e\u0924\u0940)"}),(0,U.jsx)("option",{value:"Punjabi",children:"Punjabi (\u092a\u0902\u091c\u093e\u092c\u0940)"}),(0,U.jsx)("option",{value:"Bengali",children:"Bengali (\u092c\u0902\u0917\u093e\u0932\u0940)"}),(0,U.jsx)("option",{value:"Urdu",children:"Urdu (\u0909\u0930\u094d\u0926\u0942)"}),(0,U.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Nationality (\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f\u0924\u093e)"}),(0,U.jsx)(c.p,{name:"nationality",value:La.nationality,onChange:cs,placeholder:"Indian"})]}),(0,U.jsxs)("div",{className:"flex items-center gap-2 col-span-2",children:[(0,U.jsx)("input",{type:"checkbox",id:"rte_status",name:"rte_status",checked:La.rte_status,onChange:e=>Ga((0,t.A)((0,t.A)({},La),{},{rte_status:e.target.checked})),className:"w-4 h-4"}),(0,U.jsx)(d.J,{htmlFor:"rte_status",children:"RTE Admission (\u0936\u093f\u0915\u094d\u0937\u093e \u0915\u093e \u0905\u0927\u093f\u0915\u093e\u0930)"})]})]})]})]}),"family"===Oa&&(0,U.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,U.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family Information (\u092a\u0930\u093f\u0935\u093e\u0930 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,U.jsx)("h4",{className:"font-medium text-blue-800 mb-3",children:"\ud83d\udc68 Father Details (\u092a\u093f\u0924\u093e \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)(d.J,{children:[a("father_name")," *"]}),(0,U.jsx)(c.p,{name:"father_name",value:La.father_name,onChange:cs,required:!0,placeholder:"Father Full Name","data-testid":"father-name-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Occupation (\u0935\u094d\u092f\u0935\u0938\u093e\u092f)"}),(0,U.jsxs)("select",{name:"father_occupation",value:La.father_occupation,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"Government Job",children:"Government Job (\u0938\u0930\u0915\u093e\u0930\u0940 \u0928\u094c\u0915\u0930\u0940)"}),(0,U.jsx)("option",{value:"Private Job",children:"Private Job (\u092a\u094d\u0930\u093e\u0907\u0935\u0947\u091f \u0928\u094c\u0915\u0930\u0940)"}),(0,U.jsx)("option",{value:"Business",children:"Business (\u0935\u094d\u092f\u093e\u092a\u093e\u0930)"}),(0,U.jsx)("option",{value:"Farmer",children:"Farmer (\u0915\u093f\u0938\u093e\u0928)"}),(0,U.jsx)("option",{value:"Daily Wage",children:"Daily Wage (\u0926\u0948\u0928\u093f\u0915 \u092e\u091c\u0926\u0942\u0930)"}),(0,U.jsx)("option",{value:"Self Employed",children:"Self Employed (\u0938\u094d\u0935\u0930\u094b\u091c\u0917\u093e\u0930)"}),(0,U.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Qualification (\u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,U.jsxs)("select",{name:"father_qualification",value:La.father_qualification,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"Below 10th",children:"Below 10th"}),(0,U.jsx)("option",{value:"10th Pass",children:"10th Pass"}),(0,U.jsx)("option",{value:"12th Pass",children:"12th Pass"}),(0,U.jsx)("option",{value:"Graduate",children:"Graduate"}),(0,U.jsx)("option",{value:"Post Graduate",children:"Post Graduate"}),(0,U.jsx)("option",{value:"Professional",children:"Professional Degree"}),(0,U.jsx)("option",{value:"Illiterate",children:"Illiterate (\u0905\u0936\u093f\u0915\u094d\u0937\u093f\u0924)"})]})]})]})]}),(0,U.jsxs)("div",{className:"p-4 bg-pink-50 rounded-lg border border-pink-200",children:[(0,U.jsx)("h4",{className:"font-medium text-pink-800 mb-3",children:"\ud83d\udc69 Mother Details (\u092e\u093e\u0924\u093e \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)(d.J,{children:[a("mother_name")," *"]}),(0,U.jsx)(c.p,{name:"mother_name",value:La.mother_name,onChange:cs,required:!0,placeholder:"Mother Full Name","data-testid":"mother-name-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Occupation (\u0935\u094d\u092f\u0935\u0938\u093e\u092f)"}),(0,U.jsxs)("select",{name:"mother_occupation",value:La.mother_occupation,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"Housewife",children:"Housewife (\u0917\u0943\u0939\u093f\u0923\u0940)"}),(0,U.jsx)("option",{value:"Government Job",children:"Government Job"}),(0,U.jsx)("option",{value:"Private Job",children:"Private Job"}),(0,U.jsx)("option",{value:"Business",children:"Business"}),(0,U.jsx)("option",{value:"Teacher",children:"Teacher (\u0936\u093f\u0915\u094d\u0937\u0915)"}),(0,U.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Qualification (\u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,U.jsxs)("select",{name:"mother_qualification",value:La.mother_qualification,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"Below 10th",children:"Below 10th"}),(0,U.jsx)("option",{value:"10th Pass",children:"10th Pass"}),(0,U.jsx)("option",{value:"12th Pass",children:"12th Pass"}),(0,U.jsx)("option",{value:"Graduate",children:"Graduate"}),(0,U.jsx)("option",{value:"Post Graduate",children:"Post Graduate"}),(0,U.jsx)("option",{value:"Illiterate",children:"Illiterate"})]})]})]})]}),(0,U.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,U.jsx)("h4",{className:"font-medium text-amber-800 mb-3",children:"\ud83e\uddd3 Guardian Details (if different from parents)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Guardian Name"}),(0,U.jsx)(c.p,{name:"guardian_name",value:La.guardian_name,onChange:cs,placeholder:"Guardian's Full Name"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Relation (\u0930\u093f\u0936\u094d\u0924\u093e)"}),(0,U.jsxs)("select",{name:"guardian_relation",value:La.guardian_relation,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"Grandfather",children:"Grandfather (\u0926\u093e\u0926\u093e/\u0928\u093e\u0928\u093e)"}),(0,U.jsx)("option",{value:"Grandmother",children:"Grandmother (\u0926\u093e\u0926\u0940/\u0928\u093e\u0928\u0940)"}),(0,U.jsx)("option",{value:"Uncle",children:"Uncle (\u091a\u093e\u091a\u093e/\u092e\u093e\u092e\u093e)"}),(0,U.jsx)("option",{value:"Aunt",children:"Aunt (\u091a\u093e\u091a\u0940/\u092e\u093e\u092e\u0940)"}),(0,U.jsx)("option",{value:"Brother",children:"Brother (\u092d\u093e\u0908)"}),(0,U.jsx)("option",{value:"Sister",children:"Sister (\u092c\u0939\u0928)"}),(0,U.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Guardian Mobile"}),(0,U.jsx)(c.p,{name:"guardian_mobile",value:La.guardian_mobile,onChange:cs,placeholder:"10 digit mobile"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Guardian Occupation"}),(0,U.jsx)(c.p,{name:"guardian_occupation",value:La.guardian_occupation,onChange:cs,placeholder:"\u0935\u094d\u092f\u0935\u0938\u093e\u092f"})]})]})]}),(0,U.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Annual Family Income (\u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u0906\u092f)"}),(0,U.jsxs)("select",{name:"annual_income",value:La.annual_income,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"Below 1 Lakh",children:"Below \u20b91 Lakh"}),(0,U.jsx)("option",{value:"1-2.5 Lakh",children:"\u20b91 - 2.5 Lakh"}),(0,U.jsx)("option",{value:"2.5-5 Lakh",children:"\u20b92.5 - 5 Lakh"}),(0,U.jsx)("option",{value:"5-10 Lakh",children:"\u20b95 - 10 Lakh"}),(0,U.jsx)("option",{value:"Above 10 Lakh",children:"Above \u20b910 Lakh"})]})]})}),(0,U.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200 mt-4",children:[(0,U.jsx)("h4",{className:"font-medium text-green-800 mb-3",children:"\ud83d\udcde Contact Information (\u0938\u0902\u092a\u0930\u094d\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Primary Mobile * (for login)"}),(0,U.jsx)(c.p,{name:"mobile",value:La.mobile,onChange:cs,required:!0,placeholder:"Parent's mobile for OTP","data-testid":"mobile-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Secondary Phone (ID Card)"}),(0,U.jsx)(c.p,{name:"parent_phone",value:La.parent_phone,onChange:cs,placeholder:"Alternate number","data-testid":"parent-phone-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Email"}),(0,U.jsx)(c.p,{name:"email",type:"email",value:La.email,onChange:cs,placeholder:"Optional"})]}),(0,U.jsxs)("div",{className:"space-y-2 col-span-2 md:col-span-3",children:[(0,U.jsxs)(d.J,{children:[a("address")," *"]}),(0,U.jsx)(c.p,{name:"address",value:La.address,onChange:cs,required:!0,placeholder:"Full Address","data-testid":"address-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Emergency Contact Name"}),(0,U.jsx)(c.p,{name:"emergency_contact_name",value:La.emergency_contact_name,onChange:cs,placeholder:"Emergency person name"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Emergency Contact Number"}),(0,U.jsx)(c.p,{name:"emergency_contact",value:La.emergency_contact,onChange:cs,placeholder:"Emergency mobile"})]})]})]})]}),"bank"===Oa&&(0,U.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,U.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83c\udfe6 Bank Details (\u091b\u093e\u0924\u094d\u0930\u0935\u0943\u0924\u094d\u0924\u093f \u0915\u0947 \u0932\u093f\u090f)"}),(0,U.jsx)("p",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"\ud83d\udca1 Scholarship \u0914\u0930 government benefits \u0915\u0947 \u0932\u093f\u090f bank details \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0902"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Bank Name"}),(0,U.jsx)(c.p,{name:"bank_name",value:La.bank_name,onChange:cs,placeholder:"State Bank of India"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Account Number"}),(0,U.jsx)(c.p,{name:"bank_account_no",value:La.bank_account_no,onChange:cs,placeholder:"Account Number"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"IFSC Code"}),(0,U.jsx)(c.p,{name:"ifsc_code",value:La.ifsc_code,onChange:cs,placeholder:"SBIN0001234"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Branch Name"}),(0,U.jsx)(c.p,{name:"bank_branch",value:La.bank_branch,onChange:cs,placeholder:"Branch Name"})]})]})]}),"other"===Oa&&(0,U.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,U.jsxs)("div",{className:"p-4 bg-teal-50 rounded-lg border border-teal-200",children:[(0,U.jsx)("h4",{className:"font-medium text-teal-800 mb-3",children:"\ud83d\ude8c Transport Details (\u092a\u0930\u093f\u0935\u0939\u0928)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Transport Mode"}),(0,U.jsxs)("select",{name:"transport_mode",value:La.transport_mode,onChange:cs,className:"w-full h-10 rounded-lg border border-slate-200 px-3 text-sm",children:[(0,U.jsx)("option",{value:"",children:"Select"}),(0,U.jsx)("option",{value:"School Bus",children:"School Bus"}),(0,U.jsx)("option",{value:"Private Vehicle",children:"Private Vehicle"}),(0,U.jsx)("option",{value:"Walking",children:"Walking"}),(0,U.jsx)("option",{value:"Bicycle",children:"Bicycle"}),(0,U.jsx)("option",{value:"Auto/Rickshaw",children:"Auto/Rickshaw"})]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Bus Route"}),(0,U.jsx)(c.p,{name:"bus_route",value:La.bus_route,onChange:cs,placeholder:"Route No.",className:"h-10"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Bus Stop"}),(0,U.jsx)(c.p,{name:"bus_stop",value:La.bus_stop,onChange:cs,placeholder:"Stop Name",className:"h-10"})]}),(0,U.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,U.jsx)("input",{type:"checkbox",id:"is_hosteler",name:"is_hosteler",checked:La.is_hosteler,onChange:e=>Ga((0,t.A)((0,t.A)({},La),{},{is_hosteler:e.target.checked})),className:"w-4 h-4"}),(0,U.jsx)(d.J,{htmlFor:"is_hosteler",children:"Hostel Student"})]})]})]}),(0,U.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,U.jsx)("h4",{className:"font-medium text-red-800 mb-3",children:"\ud83c\udfe5 Medical Information"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Medical Conditions (\u092c\u0940\u092e\u093e\u0930\u093f\u092f\u093e\u0901)"}),(0,U.jsx)(c.p,{name:"medical_conditions",value:La.medical_conditions,onChange:cs,placeholder:"Asthma, Diabetes, etc."})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Allergies (\u090f\u0932\u0930\u094d\u091c\u0940)"}),(0,U.jsx)(c.p,{name:"allergies",value:La.allergies,onChange:cs,placeholder:"Food/medicine allergies"})]})]})]}),(0,U.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,U.jsx)("h4",{className:"font-medium text-purple-800 mb-3",children:"\ud83d\udcda Previous Education (\u092a\u0942\u0930\u094d\u0935 \u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,U.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,U.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,U.jsx)(d.J,{children:"Previous School"}),(0,U.jsx)(c.p,{name:"previous_school",value:La.previous_school,onChange:cs,placeholder:"School name","data-testid":"prev-school-input"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Previous Class"}),(0,U.jsx)(c.p,{name:"previous_class",value:La.previous_class,onChange:cs,placeholder:"Last class"})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"TC Number"}),(0,U.jsx)(c.p,{name:"tc_number",value:La.tc_number,onChange:cs,placeholder:"TC/LC No."})]})]})]})]}),"documents"===Oa&&(0,U.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,U.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udcc4 Documents Upload (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0905\u092a\u0932\u094b\u0921)"}),(0,U.jsx)("p",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"\ud83d\udca1 Scholarship \u0914\u0930 government benefits \u0915\u0947 \u0932\u093f\u090f documents \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0902\u0964 Admission \u0915\u0947 \u092c\u093e\u0926 \u092d\u0940 upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"}),ke?(0,U.jsx)(ge.Ay,{personId:ke.id,personType:"student",schoolId:s,existingDocuments:[]}):(0,U.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[(0,U.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc1"}),(0,U.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Documents \u092c\u093e\u0926 \u092e\u0947\u0902 Upload \u0915\u0930\u0947\u0902"}),(0,U.jsx)("p",{className:"text-sm text-blue-600",children:"Student admission complete \u0939\u094b\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 Edit \u0915\u0930\u0915\u0947 documents upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),(0,U.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,U.jsx)("h4",{className:"font-medium text-slate-700 mb-3",children:"\ud83d\udccb Required Documents Checklist:"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[{icon:"\ud83d\udcc4",name:"Birth Certificate (\u091c\u0928\u094d\u092e \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83c\udd94",name:"Aadhar Card (\u0906\u0927\u093e\u0930 \u0915\u093e\u0930\u094d\u0921)"},{icon:"\ud83d\udccb",name:"Transfer Certificate (TC)"},{icon:"\ud83d\udcca",name:"Previous Marksheet"},{icon:"\ud83d\udcdc",name:"Caste Certificate (\u091c\u093e\u0924\u093f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83d\udcb0",name:"Income Certificate (\u0906\u092f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83c\udfe0",name:"Domicile Certificate"},{icon:"\ud83d\udcf7",name:"Passport Photo"},{icon:"\ud83d\udc68",name:"Father Aadhar (\u092a\u093f\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)"},{icon:"\ud83d\udc69",name:"Mother Aadhar (\u092e\u093e\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)"},{icon:"\ud83c\udfab",name:"BPL Card (\u092f\u0926\u093f \u0932\u093e\u0917\u0942 \u0939\u094b)"},{icon:"\ud83c\udfe6",name:"Bank Passbook (\u091b\u093e\u0924\u094d\u0930\u0935\u0943\u0924\u094d\u0924\u093f \u0915\u0947 \u0932\u093f\u090f)"}].map((e,a)=>(0,U.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 bg-slate-50 rounded",children:[(0,U.jsx)("span",{children:e.icon}),(0,U.jsx)("span",{className:"text-slate-600",children:e.name})]},a))})]})]}),(0,U.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[(0,U.jsxs)(d.J,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[(0,U.jsx)(b.A,{className:"w-5 h-5 text-blue-600"}),"Student Photo (\u091b\u093e\u0924\u094d\u0930 \u092b\u094b\u091f\u094b) ",ke?"- Update Photo":"- Optional"]}),!Na&&!ya&&(0,U.jsxs)("div",{className:"flex gap-3",children:[(0,U.jsx)(o.$,{type:"button",variant:"outline",className:"flex-1 border-blue-200 text-blue-700 hover:bg-blue-50 h-20",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:640,height:480}});Ca(e),wa(!0),Ea.current&&(Ea.current.srcObject=e)}catch(e){le.oR.error("Camera access denied. Please allow camera permission.")}},"data-testid":"open-camera-btn",children:(0,U.jsxs)("div",{className:"flex flex-col items-center",children:[(0,U.jsx)(b.A,{className:"w-6 h-6 mb-1"}),(0,U.jsx)("span",{children:"\ud83d\udcf7 Camera \u0938\u0947 Capture"})]})}),(0,U.jsxs)("label",{className:"flex-1",children:[(0,U.jsxs)("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-slate-300 rounded-lg h-20 cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-all",children:[(0,U.jsx)(f.A,{className:"w-6 h-6 text-slate-400 mb-1"}),(0,U.jsx)("span",{className:"text-sm text-slate-600",children:"\ud83d\udcc1 Photo Upload"})]}),(0,U.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{const a=e.target.files[0];if(a){if(a.size>5242880)return void le.oR.error("File size should be less than 5MB");const e=new FileReader;e.onload=e=>{_a(e.target.result),le.oR.success("Photo uploaded! \ud83d\udcf8")},e.readAsDataURL(a)}},"data-testid":"photo-upload-input"})]})]}),ya&&(0,U.jsxs)("div",{className:"relative bg-black rounded-xl overflow-hidden",children:[(0,U.jsx)("video",{ref:Ea,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-64 object-cover"}),(0,U.jsx)("canvas",{ref:za,className:"hidden"}),(0,U.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-3",children:[(0,U.jsxs)(o.$,{type:"button",onClick:()=>{if(Ea.current&&za.current){const e=Ea.current,a=za.current;a.width=e.videoWidth,a.height=e.videoHeight;a.getContext("2d").drawImage(e,0,0);const s=a.toDataURL("image/jpeg",.8);_a(s),ss(),le.oR.success("Photo captured! \ud83d\udcf8")}},className:"bg-white text-blue-600 hover:bg-blue-50","data-testid":"capture-btn",children:[(0,U.jsx)(b.A,{className:"w-5 h-5 mr-2"}),a("capture")]}),(0,U.jsxs)(o.$,{type:"button",variant:"outline",onClick:ss,className:"bg-white/80 text-red-600 border-red-300",children:[(0,U.jsx)(j.A,{className:"w-5 h-5 mr-2"}),a("cancel")]})]})]}),Na&&(0,U.jsxs)("div",{className:"relative",children:[(0,U.jsx)("img",{src:Na,alt:"Captured",className:"w-full h-48 object-cover rounded-xl border-2 border-emerald-500"}),(0,U.jsx)("div",{className:"absolute top-2 right-2 flex gap-2",children:(0,U.jsxs)(o.$,{type:"button",size:"sm",variant:"outline",className:"bg-white/90 text-red-600 border-red-300 hover:bg-red-50",onClick:()=>{_a(null)},children:[(0,U.jsx)(j.A,{className:"w-4 h-4 mr-1"}),a("remove")]})}),(0,U.jsxs)("div",{className:"absolute bottom-2 left-2 bg-emerald-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[(0,U.jsx)(v.A,{className:"w-4 h-4"}),"Photo Ready"]})]}),(0,U.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"* Photo optional hai\u0964 \u092c\u093e\u0926 \u092e\u0947\u0902 student profile \u0938\u0947 \u092d\u0940 add \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),!ke&&(0,U.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[(0,U.jsxs)(d.J,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[(0,U.jsx)(N.A,{className:"w-5 h-5 text-emerald-600"}),"Biometric Enrollment (Fingerprint) - Optional"]}),(0,U.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[(0,U.jsxs)("div",{className:"flex items-center gap-4",children:[(0,U.jsx)("div",{className:"w-16 h-16 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,U.jsx)(N.A,{className:"w-8 h-8 text-emerald-600"})}),(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsx)("p",{className:"text-sm text-slate-700 font-medium",children:"Fingerprint Registration"}),(0,U.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Biometric device \u0938\u0947 fingerprint register \u0915\u0930\u0947\u0902\u0964 Student admission \u0915\u0947 \u092c\u093e\u0926 Biometric section \u0938\u0947 \u092d\u0940 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]})]}),(0,U.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,U.jsx)("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,U.jsx)("div",{className:"h-full w-0 bg-emerald-500 rounded-full"})}),(0,U.jsx)("span",{className:"text-xs text-slate-400",children:"Not enrolled"})]}),(0,U.jsxs)("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[(0,U.jsx)(_.A,{className:"w-3 h-3"}),"Biometric device connect \u0939\u094b\u0928\u0947 \u092a\u0930 \u0939\u0940 \u0915\u093e\u092e \u0915\u0930\u0947\u0917\u093e"]})]}),(0,U.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"* Biometric optional \u0939\u0948\u0964 \u092c\u093e\u0926 \u092e\u0947\u0902 Biometric section \u0938\u0947 enroll \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),(0,U.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,U.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>ie(!1),children:a("cancel")}),(0,U.jsxs)(o.$,{type:"submit",className:"btn-primary",disabled:De,"data-testid":"save-student-btn",children:[De?(0,U.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):null,a(ke?"save":"admit_student")]})]})]})]})]})]})]}),(0,U.jsx)(m.lG,{open:oe,onOpenChange:ce,children:(0,U.jsxs)(m.Cf,{className:"max-w-md",children:[(0,U.jsxs)(m.c7,{children:[(0,U.jsxs)(m.L3,{className:"text-emerald-600 flex items-center gap-2",children:[(0,U.jsx)(v.A,{className:"w-6 h-6"}),"Admission Successful!"]}),(0,U.jsx)(m.rr,{children:"Student \u0915\u0947 login credentials \u0928\u0940\u091a\u0947 \u0926\u093f\u090f \u0917\u090f \u0939\u0948\u0902\u0964 \u0907\u0928\u094d\u0939\u0947\u0902 Parent \u0915\u094b share \u0915\u0930\u0947\u0902\u0964"})]}),Ie&&(0,U.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,U.jsxs)("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:[(0,U.jsx)("p",{className:"text-lg font-semibold text-emerald-800",children:Ie.name}),(0,U.jsxs)("p",{className:"text-sm text-emerald-600",children:[Ie.class_name," - ",Ie.section]})]}),(0,U.jsxs)("div",{className:"space-y-3",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:"Student ID / Login ID"}),(0,U.jsx)("p",{className:"font-mono font-bold text-lg",children:Ie.student_id})]}),(0,U.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>ds(Ie.student_id,"id"),children:"id"===Te?(0,U.jsx)(v.A,{className:"w-4 h-4 text-emerald-500"}):(0,U.jsx)(y.A,{className:"w-4 h-4"})})]}),(0,U.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("p",{className:"text-xs text-amber-600",children:"Temporary Password"}),(0,U.jsx)("p",{className:"font-mono font-bold text-lg",children:Ie.temporary_password})]}),(0,U.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>ds(Ie.temporary_password,"pass"),children:"pass"===Te?(0,U.jsx)(v.A,{className:"w-4 h-4 text-emerald-500"}):(0,U.jsx)(y.A,{className:"w-4 h-4"})})]})]}),(0,U.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[(0,U.jsx)("p",{className:"font-medium",children:"\u26a0\ufe0f Important:"}),(0,U.jsxs)("ul",{className:"list-disc ml-4 mt-1 space-y-1",children:[(0,U.jsx)("li",{children:"\u092f\u0939 password \u0938\u093f\u0930\u094d\u092b \u090f\u0915 \u092c\u093e\u0930 \u0926\u093f\u0916\u0947\u0917\u093e"}),(0,U.jsx)("li",{children:"First login \u092a\u0930 password change \u0915\u0930\u0928\u093e mandatory \u0939\u0948"}),(0,U.jsx)("li",{children:"Parent \u0915\u094b Mobile + DOB \u0938\u0947 \u092d\u0940 login \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902"})]})]}),(0,U.jsxs)(o.$,{className:"w-full btn-primary",onClick:()=>{const e="Student ID: ".concat(Ie.student_id,"\nPassword: ").concat(Ie.temporary_password);ds(e,"all")},children:[(0,U.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Copy All Credentials"]}),(0,U.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[(0,U.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["\ud83d\udcf8 ",(0,U.jsx)("strong",{children:"Face Enrollment"})," - AI attendance ke liye photos add karein (Optional)"]}),(0,U.jsxs)("div",{className:"flex gap-2",children:[(0,U.jsx)(o.$,{variant:"outline",className:"flex-1 border-indigo-200 text-indigo-700 hover:bg-indigo-50",onClick:()=>{ce(!1),fe(!0)},"data-testid":"capture-photos-btn",children:"\ud83d\udcf7 Capture Photos Now"}),(0,U.jsx)(o.$,{variant:"ghost",className:"text-slate-500",onClick:()=>{le.oR.info("Face enrollment skipped. Complete from student profile later."),ce(!1)},"data-testid":"skip-face-btn",children:"Skip for Now"})]})]}),(0,U.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[(0,U.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["\ud83d\udc46 ",(0,U.jsx)("strong",{children:"Biometric Enrollment"})," - Fingerprint registration (Optional)"]}),(0,U.jsxs)("div",{className:"flex gap-2",children:[(0,U.jsx)(o.$,{variant:"outline",className:"flex-1 border-emerald-200 text-emerald-700 hover:bg-emerald-50",onClick:()=>{le.oR.info("Biometric device se connect karein aur fingerprint register karein."),window.location.href="/app/biometric?student_id=".concat(null===Ie||void 0===Ie?void 0:Ie.student_id,"&name=").concat(encodeURIComponent((null===Ie||void 0===Ie?void 0:Ie.name)||""))},"data-testid":"biometric-enroll-btn",children:"\ud83d\udc46 Enroll Biometric Now"}),(0,U.jsx)(o.$,{variant:"ghost",className:"text-slate-500",onClick:()=>{le.oR.info("Biometric enrollment skipped. Complete later from Biometric section.")},"data-testid":"skip-biometric-btn",children:"Skip"})]})]})]})]})}),(0,U.jsx)(m.lG,{open:de,onOpenChange:me,children:(0,U.jsxs)(m.Cf,{className:"max-w-md",children:[(0,U.jsxs)(m.c7,{children:[(0,U.jsxs)(m.L3,{className:"flex items-center gap-2",children:[(0,U.jsx)(_.A,{className:"w-5 h-5 text-amber-500"}),"Suspend Student"]}),(0,U.jsxs)(m.rr,{children:[null===Pe||void 0===Pe?void 0:Pe.name," \u0915\u094b temporarily suspend \u0915\u0930\u0947\u0902"]})]}),(0,U.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),Pe){Fe(!0);try{const e=localStorage.getItem("token");await i.A.post("".concat(be,"/students/").concat(Pe.id,"/suspend?reason=").concat(Ya.reason,"&details=").concat(Ya.details),{},{headers:{Authorization:"Bearer ".concat(e)}}),le.oR.success("Student suspended"),me(!1),Xa({reason:"fees_pending",details:""}),Re(null),es()}catch(a){le.oR.error("Failed to suspend student")}finally{Fe(!1)}}},className:"space-y-4 mt-4",children:[(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Reason *"}),(0,U.jsx)("select",{value:Ya.reason,onChange:e=>Xa(a=>(0,t.A)((0,t.A)({},a),{},{reason:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",required:!0,children:Object.entries(Ka).map(e=>{let[a,s]=e;return(0,U.jsx)("option",{value:a,children:s},a)})})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsx)(d.J,{children:"Details"}),(0,U.jsx)(c.p,{value:Ya.details,onChange:e=>Xa(a=>(0,t.A)((0,t.A)({},a),{},{details:e.target.value})),placeholder:"Additional details..."})]}),(0,U.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,U.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>me(!1),children:a("cancel")}),(0,U.jsxs)(o.$,{type:"submit",className:"bg-amber-600 hover:bg-amber-700",disabled:De,children:[De?(0,U.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):null,a("suspend")," ",a("students")]})]})]})]})}),(0,U.jsxs)("div",{className:"flex gap-4",style:{height:"calc(100vh - 220px)",minHeight:"500px"},children:[(0,U.jsxs)("div",{className:"w-2/5 flex flex-col bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,U.jsxs)("div",{className:"p-3 border-b border-gray-100 space-y-2",children:[(0,U.jsxs)("div",{className:"relative",children:[(0,U.jsx)(w.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,U.jsx)(c.p,{placeholder:a("search"),value:Z,onChange:e=>Y(e.target.value),className:"pl-9 h-9 text-sm","data-testid":"search-input"})]}),(0,U.jsxs)("select",{value:X,onChange:e=>K(e.target.value),className:"w-full h-9 rounded-lg border border-slate-200 px-3 text-sm","data-testid":"filter-class",children:[(0,U.jsx)("option",{value:"",children:a("all_classes")}),H.map(e=>(0,U.jsxs)("option",{value:e.id,children:[e.name,e.section&&"A"!==e.section?" - ".concat(e.section):""]},e.id))]})]}),(0,U.jsxs)(h.tU,{defaultValue:"active",className:"flex-1 flex flex-col overflow-hidden",children:[(0,U.jsxs)(h.j7,{className:"mx-3 mt-2 shrink-0",children:[(0,U.jsxs)(h.Xi,{value:"active",className:"text-xs gap-1",children:[(0,U.jsx)(A.A,{className:"w-3.5 h-3.5"}),a("active")," (",L.length,")"]}),(0,U.jsxs)(h.Xi,{value:"suspended",className:"text-xs gap-1",children:[(0,U.jsx)(C.A,{className:"w-3.5 h-3.5"}),a("suspended")," (",$.length,")"]})]}),(0,U.jsx)(h.av,{value:"active",className:"flex-1 overflow-y-auto p-2 mt-0",children:Q?(0,U.jsx)("div",{className:"flex justify-center py-10",children:(0,U.jsx)(x.A,{className:"w-8 h-8 animate-spin text-blue-500"})}):0===L.length?(0,U.jsxs)("div",{className:"text-center py-10",children:[(0,U.jsx)(A.A,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),(0,U.jsx)("p",{className:"text-sm text-slate-400",children:a("no_data")})]}):(0,U.jsx)("div",{className:"space-y-1",children:L.map(e=>(0,U.jsxs)("div",{onClick:()=>va(e),className:"flex items-center gap-3 p-2.5 rounded-xl cursor-pointer transition-all group ".concat((null===ja||void 0===ja?void 0:ja.id)===e.id?"bg-blue-50 border-2 border-blue-400 shadow-sm":"border-2 border-transparent hover:bg-slate-50 hover:border-blue-200"),"data-testid":"student-row-".concat(e.id),children:[(0,U.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-100 border border-slate-200 flex items-center justify-center overflow-hidden flex-shrink-0",children:e.photo_url?(0,U.jsx)("img",{src:e.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,U.jsx)(A.A,{className:"w-5 h-5 text-slate-400"})}),(0,U.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,U.jsx)("p",{className:"font-medium text-sm text-slate-900 truncate",children:e.name}),(0,U.jsxs)("p",{className:"text-xs text-slate-500 truncate",children:[e.class_name,e.section&&"A"!==e.section?" - ".concat(e.section):""," ",e.father_name?"| ".concat(e.father_name):""]})]}),(0,U.jsxs)("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[(0,U.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium ".concat("active"===e.status?"bg-emerald-100 text-emerald-700":"suspended"===e.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:e.status}),(0,U.jsxs)(ee,{children:[(0,U.jsx)(ae,{asChild:!0,children:(0,U.jsx)("button",{className:"p-1 rounded hover:bg-slate-200 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:(0,U.jsx)(k.A,{className:"w-3.5 h-3.5 text-slate-400"})})}),(0,U.jsxs)(se,{align:"end",children:[(0,U.jsxs)(te,{onClick:()=>(e=>{xa(e),ha(!0)})(e),children:[(0,U.jsx)(S.A,{className:"w-4 h-4 mr-2 text-blue-600"}),a("view_profile")]}),(0,U.jsxs)(te,{onClick:()=>is(e),children:[(0,U.jsx)(P.A,{className:"w-4 h-4 mr-2"}),a("edit")]}),(0,U.jsxs)(te,{onClick:()=>{we(e),ve(!0)},children:[(0,U.jsx)(R.A,{className:"w-4 h-4 mr-2 text-blue-600"}),a("id_card")]}),(0,U.jsxs)(te,{onClick:()=>ns(e),children:[(0,U.jsx)(I.A,{className:"w-4 h-4 mr-2 text-purple-600"}),"Share Login Details"]}),(0,U.jsxs)(te,{onClick:()=>{Be({student_id:e.student_id||e.id,name:e.name}),fe(!0)},children:[(0,U.jsx)(b.A,{className:"w-4 h-4 mr-2 text-emerald-600"}),a("face_enrollment")]}),(0,U.jsx)(ne,{}),(0,U.jsxs)(te,{onClick:()=>(e=>{Re(e),me(!0)})(e),children:[(0,U.jsx)(C.A,{className:"w-4 h-4 mr-2 text-amber-500"}),a("suspend")]}),["director","principal"].includes(null===M||void 0===M?void 0:M.role)&&(0,U.jsxs)(te,{onClick:()=>(async e=>{const a=window.prompt("Left reason (e.g., Transfer, TC Issued):");if(a)try{const s=localStorage.getItem("token");await i.A.post("".concat(be,"/students/").concat(e,"/mark-left?reason=").concat(encodeURIComponent(a)),{},{headers:{Authorization:"Bearer ".concat(s)}}),le.oR.success("Student marked as left"),es()}catch(s){le.oR.error("Failed to update student")}})(e.id),className:"text-rose-600",children:[(0,U.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Mark as Left (TC)"]}),("director"===(null===M||void 0===M?void 0:M.role)||"admin"===(null===M||void 0===M?void 0:M.role))&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ne,{}),(0,U.jsxs)(te,{onClick:()=>(e=>{ea(e),sa(""),Xe(!0)})(e),className:"text-red-600 bg-red-50 hover:bg-red-100",children:[(0,U.jsx)(D.A,{className:"w-4 h-4 mr-2"}),a("delete")]})]})]})]})]})]},e.id))})}),(0,U.jsx)(h.av,{value:"suspended",className:"flex-1 overflow-y-auto p-2 mt-0",children:0===$.length?(0,U.jsxs)("div",{className:"text-center py-10",children:[(0,U.jsx)(C.A,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),(0,U.jsx)("p",{className:"text-sm text-slate-400",children:"No suspended students"})]}):(0,U.jsx)("div",{className:"space-y-1",children:$.map(e=>(0,U.jsxs)("div",{onClick:()=>va(e),className:"flex items-center gap-3 p-2.5 rounded-xl cursor-pointer transition-all group ".concat((null===ja||void 0===ja?void 0:ja.id)===e.id?"bg-amber-50 border-2 border-amber-400 shadow-sm":"border-2 border-transparent hover:bg-amber-50/50 hover:border-amber-200"),children:[(0,U.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-50 border border-amber-200 flex items-center justify-center overflow-hidden flex-shrink-0",children:e.photo_url?(0,U.jsx)("img",{src:e.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,U.jsx)(A.A,{className:"w-5 h-5 text-amber-400"})}),(0,U.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,U.jsx)("p",{className:"font-medium text-sm text-slate-900 truncate",children:e.name}),(0,U.jsxs)("p",{className:"text-xs text-amber-600 truncate",children:[e.class_name," | ",Ka[e.suspension_reason]||e.suspension_reason||"Suspended"]})]}),(0,U.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,U.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium bg-amber-100 text-amber-700",children:"suspended"}),["director","principal"].includes(null===M||void 0===M?void 0:M.role)&&(0,U.jsxs)(o.$,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 h-7 text-xs opacity-0 group-hover:opacity-100 transition-opacity",onClick:a=>{a.stopPropagation(),(async e=>{try{const a=localStorage.getItem("token");await i.A.post("".concat(be,"/students/").concat(e,"/unsuspend"),{},{headers:{Authorization:"Bearer ".concat(a)}}),le.oR.success("Student unsuspended"),es()}catch(a){le.oR.error("Failed to unsuspend student")}})(e.id)},children:[(0,U.jsx)(F.A,{className:"w-3 h-3 mr-1"}),"Unsuspend"]})]})]},e.id))})})]})]}),(0,U.jsx)("div",{className:"w-3/5 bg-white rounded-xl border border-gray-100 shadow-sm overflow-y-auto",children:ja?(0,U.jsxs)("div",{className:"p-6 space-y-5",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-6 border border-blue-100",children:(0,U.jsxs)("div",{className:"flex items-start gap-6",children:[(0,U.jsxs)("div",{className:"flex gap-4",children:[(0,U.jsx)("input",{type:"file",ref:fa,className:"hidden",accept:"image/jpeg,image/png,image/webp",onChange:e=>ts(e,ja.id)}),(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{var e;return null===(e=fa.current)||void 0===e?void 0:e.click()},children:[(0,U.jsx)("div",{className:"w-24 h-24 rounded-xl bg-white border-3 border-blue-300 shadow-lg flex items-center justify-center overflow-hidden",children:ja.photo_url?(0,U.jsx)("img",{src:ja.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,U.jsx)(A.A,{className:"w-12 h-12 text-slate-300"})}),(0,U.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:pa?(0,U.jsx)(x.A,{className:"w-6 h-6 text-white animate-spin"}):(0,U.jsx)(b.A,{className:"w-6 h-6 text-white"})}),(0,U.jsx)("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white shadow-md",children:(0,U.jsx)(b.A,{className:"w-3.5 h-3.5 text-white"})})]}),(0,U.jsx)("p",{className:"text-xs text-slate-500 mt-1.5 font-medium",children:"Click to upload"})]})]}),(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:ja.name}),(0,U.jsxs)("p",{className:"text-slate-500 mt-1",children:[ja.student_id||ja.admission_no," | ",ja.class_name,ja.section?" - ".concat(ja.section):""]}),(0,U.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,U.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-semibold ".concat("active"===ja.status?"bg-emerald-100 text-emerald-700":"suspended"===ja.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:null===(e=ja.status)||void 0===e?void 0:e.toUpperCase()}),ja.blood_group&&(0,U.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-red-50 text-red-600 font-medium",children:ja.blood_group})]}),(0,U.jsxs)("div",{className:"flex gap-2 mt-4 flex-wrap",children:[(0,U.jsxs)(o.$,{size:"sm",className:"gap-1.5 h-8 text-xs",onClick:()=>rs(ja),children:[(0,U.jsx)(p.A,{className:"w-3.5 h-3.5"})," ",a("print")]}),(0,U.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs",onClick:()=>is(ja),children:[(0,U.jsx)(P.A,{className:"w-3.5 h-3.5"})," ",a("edit")]}),(0,U.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs text-blue-600",onClick:()=>{we(ja),ve(!0)},children:[(0,U.jsx)(R.A,{className:"w-3.5 h-3.5"})," ",a("id_card")]}),(0,U.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs text-purple-600",onClick:()=>ns(ja),children:[(0,U.jsx)(I.A,{className:"w-3.5 h-3.5"})," Credentials"]}),["director","principal"].includes(null===M||void 0===M?void 0:M.role)&&(0,U.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-1.5 h-8 text-xs text-amber-600",onClick:()=>{Ra(ja),Ba(""),Sa(!0)},children:[(0,U.jsx)(I.A,{className:"w-3.5 h-3.5"})," ",a("reset_password")]})]})]})]})}),(0,U.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,U.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,U.jsx)(A.A,{className:"w-4 h-4"})," ",a("personal_info")]}),(0,U.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("name"),ja.name],[a("student_id"),ja.student_id||ja.admission_no],[a("classes"),ja.class_name],[a("section"),ja.section||"A"],[a("gender"),ja.gender],[a("dob"),ja.dob],[a("blood_group"),ja.blood_group],[a("admission_date"),ja.admission_date],[a("category"),ja.category],[a("caste"),ja.caste],["Sub Caste",ja.sub_caste],[a("religion"),ja.religion],[a("nationality"),ja.nationality],["Mother Tongue",ja.mother_tongue],["Birth Place",ja.birth_place],["Identification Mark",ja.identification_mark],["RTE Status",ja.rte_status?"Yes":"No"],[a("aadhar_number"),ja.aadhar_no],["Scholar No",ja.scholar_no],["PEN Number",ja.pen_number],["SSSMID",ja.sssmid],["Samagra Family ID",ja.samagra_family_id],["Jan Aadhar No",ja.jan_aadhar_no]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,U.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-green-600 to-emerald-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,U.jsx)(T.A,{className:"w-4 h-4"})," ",a("family_details")]}),(0,U.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("father_name"),ja.father_name],["Father Occupation",ja.father_occupation],["Father Qualification",ja.father_qualification],[a("mother_name"),ja.mother_name],["Mother Occupation",ja.mother_occupation],["Mother Qualification",ja.mother_qualification],[a("guardian_name"),ja.guardian_name],["Guardian Relation",ja.guardian_relation],["Guardian Mobile",ja.guardian_mobile],["Guardian Occupation",ja.guardian_occupation],["Annual Income",ja.annual_income],[a("mobile"),ja.mobile],["Parent Phone",ja.parent_phone],[a("email"),ja.email],[a("address"),ja.address],[a("emergency_contact"),ja.emergency_contact],["Emergency Name",ja.emergency_contact_name]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,U.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-teal-600 to-cyan-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,U.jsx)(J.A,{className:"w-4 h-4"})," ",a("bank_details")]}),(0,U.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("bank_name"),ja.bank_name],["Account No",ja.bank_account_no],["IFSC Code",ja.ifsc_code],["Branch",ja.bank_branch]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ja.bank_name,ja.bank_account_no].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No bank details recorded"})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,U.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-orange-500 to-amber-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,U.jsx)(E.A,{className:"w-4 h-4"})," ",a("transport")]}),(0,U.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[["Transport Mode",ja.transport_mode],["Bus Route",ja.bus_route],["Bus Stop",ja.bus_stop],["Pickup Point",ja.pickup_point],["Medical Conditions",ja.medical_conditions],["Allergies",ja.allergies]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ja.transport_mode,ja.bus_route,ja.medical_conditions,ja.allergies].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No transport or medical details recorded"})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,U.jsxs)("div",{className:"px-4 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-500 text-white font-semibold text-sm flex items-center gap-2",children:[(0,U.jsx)(u.A,{className:"w-4 h-4"})," Previous Education"]}),(0,U.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-px bg-slate-100",children:[[a("previous_school"),ja.previous_school],["Previous Class",ja.previous_class],["Previous Percentage",ja.previous_percentage],["TC Number",ja.tc_number]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-400 mb-0.5",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ja.previous_school,ja.previous_class,ja.tc_number].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No previous education details recorded"})]})]}):(0,U.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[(0,U.jsx)("div",{className:"w-20 h-20 rounded-full bg-slate-50 flex items-center justify-center mb-4",children:(0,U.jsx)(A.A,{className:"w-10 h-10 text-slate-300"})}),(0,U.jsx)("p",{className:"text-lg font-medium text-slate-500",children:"Select a student to view profile"}),(0,U.jsx)("p",{className:"text-sm mt-1 text-slate-400",children:"Click on any student from the left panel"})]})})]}),he&&Ie&&(0,U.jsx)(ue,{isOpen:he,onClose:()=>fe(!1),studentId:Ie.student_id,schoolId:s,studentName:Ie.name,onComplete:()=>{fe(!1),le.oR.success("Face enrollment completed!"),es()},onSkip:()=>{fe(!1),le.oR.info("Face enrollment skipped. Complete later from profile.")}}),je&&ye&&(0,U.jsx)(xe.A,{isOpen:je,onClose:()=>{ve(!1),we(null)},personId:ye.student_id||ye.id,personType:"student",schoolId:s,onPhotoUpload:()=>es()}),(0,U.jsx)(m.lG,{open:Ye,onOpenChange:Xe,children:(0,U.jsxs)(m.Cf,{className:"max-w-md",children:[(0,U.jsx)(m.c7,{children:(0,U.jsxs)(m.L3,{className:"flex items-center gap-2 text-red-600",children:[(0,U.jsx)(_.A,{className:"w-6 h-6"}),"\u26a0\ufe0f DANGER: Permanent Delete"]})}),Ke&&(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,U.jsx)("h4",{className:"font-bold text-red-800 mb-2",children:"\ud83d\udea8 \u092e\u0939\u0924\u094d\u0935\u092a\u0942\u0930\u094d\u0923 \u091a\u0947\u0924\u093e\u0935\u0928\u0940:"}),(0,U.jsxs)("ul",{className:"text-sm text-red-700 space-y-1 list-disc list-inside",children:[(0,U.jsx)("li",{children:"\u092f\u0939 action UNDO \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e"}),(0,U.jsx)("li",{children:"Student \u0915\u093e \u0938\u093e\u0930\u093e data \u0939\u092e\u0947\u0936\u093e \u0915\u0947 \u0932\u093f\u090f delete \u0939\u094b \u091c\u093e\u090f\u0917\u093e"}),(0,U.jsx)("li",{children:"Attendance, Fee records, Results \u0938\u092c delete \u0939\u094b \u091c\u093e\u090f\u0902\u0917\u0947"}),(0,U.jsx)("li",{children:"Face recognition data \u092d\u0940 delete \u0939\u094b \u091c\u093e\u090f\u0917\u093e"})]})]}),(0,U.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,U.jsx)("p",{className:"font-medium text-lg",children:Ke.name}),(0,U.jsxs)("p",{className:"text-sm text-slate-500",children:[Ke.student_id," \u2022 ",Ke.class_name||"Class N/A"]}),(0,U.jsxs)("p",{className:"text-sm text-slate-500",children:["Father: ",Ke.father_name]})]}),(0,U.jsxs)("div",{className:"space-y-2",children:[(0,U.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:["Confirm \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f ",(0,U.jsx)("span",{className:"text-red-600 font-bold",children:"DELETE"})," type \u0915\u0930\u0947\u0902:"]}),(0,U.jsx)(c.p,{value:aa,onChange:e=>sa(e.target.value.toUpperCase()),placeholder:"Type DELETE here",className:"border-red-200 focus:border-red-400"})]}),(0,U.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,U.jsx)(o.$,{variant:"outline",onClick:()=>Xe(!1),className:"flex-1",children:"Cancel (\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902)"}),(0,U.jsxs)(o.$,{onClick:async()=>{if("DELETE"===aa){na(!0);try{const e=localStorage.getItem("token");await i.A.delete("".concat(be,"/students/").concat(Ke.id),{headers:{Authorization:"Bearer ".concat(e)}}),le.oR.success("Student data permanently deleted"),Xe(!1),ea(null),sa(""),es()}catch(s){var e,a;le.oR.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to delete student")}finally{na(!1)}}else le.oR.error("Please type DELETE to confirm")},disabled:"DELETE"!==aa||ta,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[ta?(0,U.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):(0,U.jsx)(D.A,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})]})}),(0,U.jsx)(m.lG,{open:ma,onOpenChange:ha,children:(0,U.jsxs)(m.Cf,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[(0,U.jsx)(m.c7,{children:(0,U.jsxs)(m.L3,{className:"flex items-center gap-2 text-xl",children:[(0,U.jsx)(A.A,{className:"w-6 h-6 text-blue-600"}),"Student Profile (\u0935\u093f\u0926\u094d\u092f\u093e\u0930\u094d\u0925\u0940 \u092a\u094d\u0930\u094b\u092b\u093c\u093e\u0907\u0932)"]})}),ua&&(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsx)("input",{type:"file",ref:ba,className:"hidden",accept:"image/jpeg,image/png,image/webp",onChange:e=>ts(e,ua.id)}),(0,U.jsxs)("div",{className:"text-center bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-xl p-6 border border-blue-100",children:[(0,U.jsx)("div",{className:"flex justify-center mb-3",children:(0,U.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{var e;return null===(e=ba.current)||void 0===e?void 0:e.click()},children:[(0,U.jsx)("div",{className:"w-28 h-28 rounded-xl bg-white border-4 border-blue-300 shadow-lg flex items-center justify-center overflow-hidden",children:ua.photo_url?(0,U.jsx)("img",{src:ua.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,U.jsx)(A.A,{className:"w-14 h-14 text-slate-300"})}),(0,U.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:pa?(0,U.jsx)(x.A,{className:"w-8 h-8 text-white animate-spin"}):(0,U.jsx)(b.A,{className:"w-8 h-8 text-white"})}),(0,U.jsx)("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white shadow-md",children:(0,U.jsx)(b.A,{className:"w-4 h-4 text-white"})})]})}),(0,U.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:ua.name}),(0,U.jsxs)("p",{className:"text-slate-500 mt-1",children:[ua.student_id||ua.admission_no," | ",ua.class_name,ua.section?" - ".concat(ua.section):""]}),(0,U.jsx)("span",{className:"inline-block mt-2 badge ".concat((e=>{switch(e){case"active":return"badge-success";case"suspended":return"badge-warning";case"left":return"badge-error";default:return"badge-info"}})(ua.status)),children:ua.status})]}),(0,U.jsxs)("div",{className:"flex gap-2 flex-wrap justify-center",children:[(0,U.jsxs)(o.$,{size:"sm",className:"gap-2",onClick:()=>rs(ua),children:[(0,U.jsx)(p.A,{className:"w-4 h-4"})," Print Profile"]}),(0,U.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>{ha(!1),is(ua)},children:[(0,U.jsx)(P.A,{className:"w-4 h-4"})," ",a("edit")]}),(0,U.jsxs)(o.$,{size:"sm",variant:"outline",className:"gap-2 text-blue-600",onClick:()=>{ha(!1),we(ua),ve(!0)},children:[(0,U.jsx)(R.A,{className:"w-4 h-4"})," ",a("id_card")]})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-blue-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\udccb Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("name"),ua.name],[a("student_id"),ua.student_id||ua.admission_no],[a("classes"),ua.class_name],[a("section"),ua.section||"A"],[a("gender"),ua.gender],[a("dob"),ua.dob],[a("blood_group"),ua.blood_group],[a("admission_date"),ua.admission_date],[a("category"),ua.category],[a("caste"),ua.caste],["Sub Caste",ua.sub_caste],[a("religion"),ua.religion],[a("nationality"),ua.nationality],["Mother Tongue",ua.mother_tongue],["Birth Place",ua.birth_place],["Identification Mark",ua.identification_mark],["RTE Status",ua.rte_status?"Yes":"No"]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-amber-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-amber-600 to-amber-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udd94 Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("aadhar_number"),ua.aadhar_no],["Scholar No",ua.scholar_no],["PEN Number",ua.pen_number],["SSSMID",ua.sssmid],["Samagra Family ID",ua.samagra_family_id],["Jan Aadhar No",ua.jan_aadhar_no]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ua.aadhar_no,ua.scholar_no,ua.pen_number,ua.sssmid].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No identity documents recorded"})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-green-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-green-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family Information (\u092a\u093e\u0930\u093f\u0935\u093e\u0930\u093f\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("father_name"),ua.father_name],["Father Occupation",ua.father_occupation],["Father Qualification",ua.father_qualification],[a("mother_name"),ua.mother_name],["Mother Occupation",ua.mother_occupation],["Mother Qualification",ua.mother_qualification],[a("guardian_name"),ua.guardian_name],["Guardian Relation",ua.guardian_relation],["Guardian Mobile",ua.guardian_mobile],["Guardian Occupation",ua.guardian_occupation],["Annual Income",ua.annual_income]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-purple-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\udcde Contact Information (\u0938\u0902\u092a\u0930\u094d\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("mobile"),ua.mobile],["Parent Phone",ua.parent_phone],[a("email"),ua.email],[a("address"),ua.address],[a("emergency_contact"),ua.emergency_contact],["Emergency Contact Name",ua.emergency_contact_name]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-teal-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-teal-600 to-teal-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udfe6 Bank Details - Scholarship (\u092c\u0948\u0902\u0915 \u0935\u093f\u0935\u0930\u0923)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[[a("bank_name"),ua.bank_name],["Account No",ua.bank_account_no],["IFSC Code",ua.ifsc_code],["Branch",ua.bank_branch]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ua.bank_name,ua.bank_account_no].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No bank details recorded"})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-orange-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-orange-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83d\ude8c Transport (\u092a\u0930\u093f\u0935\u0939\u0928)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[["Transport Mode",ua.transport_mode],["Bus Route",ua.bus_route],["Bus Stop",ua.bus_stop],["Pickup Point",ua.pickup_point]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ua.transport_mode,ua.bus_route].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No transport details recorded"})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-red-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-red-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udfe5 Medical Information (\u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 gap-px bg-slate-200",children:[["Medical Conditions",ua.medical_conditions],["Allergies",ua.allergies]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ua.medical_conditions,ua.allergies].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No medical information recorded"})]}),(0,U.jsxs)("div",{className:"rounded-xl border border-indigo-200 overflow-hidden",children:[(0,U.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-500 text-white px-4 py-2 font-semibold text-sm flex items-center gap-2",children:"\ud83c\udf93 Previous Education (\u092a\u0942\u0930\u094d\u0935 \u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,U.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-px bg-slate-200",children:[["Previous School",ua.previous_school],["Previous Class",ua.previous_class],["Previous Percentage",ua.previous_percentage],["TC Number",ua.tc_number]].filter(e=>{let[,a]=e;return a}).map((e,a)=>{let[s,t]=e;return(0,U.jsxs)("div",{className:"bg-white p-3",children:[(0,U.jsx)("p",{className:"text-xs text-slate-500",children:s}),(0,U.jsx)("p",{className:"font-medium text-sm text-slate-800",children:t})]},a)})}),![ua.previous_school,ua.previous_class,ua.tc_number].some(Boolean)&&(0,U.jsx)("div",{className:"bg-white p-3 text-center text-sm text-slate-400",children:"No previous education details recorded"})]})]})]})}),(0,U.jsx)(m.lG,{open:la,onOpenChange:ra,children:(0,U.jsxs)(m.Cf,{className:"max-w-md",children:[(0,U.jsx)(m.c7,{children:(0,U.jsxs)(m.L3,{className:"flex items-center gap-2",children:[(0,U.jsx)(I.A,{className:"w-5 h-5 text-purple-600"}),"\ud83d\udcf1 StudyTino Login Details"]})}),ia&&(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-100",children:[(0,U.jsx)("p",{className:"font-bold text-lg",children:ia.name}),(0,U.jsxs)("p",{className:"text-sm text-slate-600",children:["Class: ",ia.class_name||"N/A"," | Father: ",ia.father_name]})]}),(0,U.jsxs)("div",{className:"bg-slate-900 text-white rounded-xl p-4 space-y-3",children:[(0,U.jsxs)("div",{className:"flex justify-between items-center",children:[(0,U.jsx)("span",{className:"text-slate-400 text-sm",children:"Student ID:"}),(0,U.jsxs)("div",{className:"flex items-center gap-2",children:[(0,U.jsx)("span",{className:"font-mono font-bold text-lg text-purple-300",children:ia.student_id}),(0,U.jsx)(o.$,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-white hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(ia.student_id),le.oR.success("ID copied!")},children:(0,U.jsx)(y.A,{className:"w-4 h-4"})})]})]}),(0,U.jsxs)("div",{className:"flex justify-between items-center",children:[(0,U.jsx)("span",{className:"text-slate-400 text-sm",children:"Password:"}),(0,U.jsxs)("div",{className:"flex items-center gap-2",children:[(0,U.jsx)("span",{className:"font-mono font-bold text-lg text-green-300",children:Ta?ia.default_password:"********"}),(0,U.jsx)(o.$,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-white hover:bg-slate-700",onClick:()=>Ja(!Ta),children:Ta?(0,U.jsx)(z.A,{className:"w-4 h-4"}):(0,U.jsx)(S.A,{className:"w-4 h-4"})}),(0,U.jsx)(o.$,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-white hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(ia.default_password),le.oR.success("Password copied!")},children:(0,U.jsx)(y.A,{className:"w-4 h-4"})})]})]})]}),"director"===(null===M||void 0===M?void 0:M.role)&&(0,U.jsxs)(o.$,{variant:"outline",className:"w-full gap-2 border-amber-300 text-amber-700 hover:bg-amber-50",onClick:()=>{Ra(ia),Ba(""),ra(!1),Sa(!0)},children:[(0,U.jsx)(I.A,{className:"w-4 h-4"}),a("reset_password")]}),(0,U.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,U.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"App Link:"}),(0,U.jsxs)("p",{className:"font-mono text-sm text-blue-800",children:[window.location.origin,"/studytino"]})]}),(0,U.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,U.jsxs)(o.$,{onClick:()=>(e=>{var a;const s=ls(e),t=(null===(a=e.mobile)||void 0===a?void 0:a.replace(/[^0-9]/g,""))||"",n=t?"https://wa.me/91".concat(t,"?text=").concat(encodeURIComponent(s)):"https://wa.me/?text=".concat(encodeURIComponent(s));window.open(n,"_blank")})(ia),className:"bg-green-600 hover:bg-green-700 gap-2",children:[(0,U.jsx)(O.A,{className:"w-4 h-4"}),"WhatsApp Share"]}),(0,U.jsxs)(o.$,{variant:"outline",onClick:()=>(async e=>{const a=ls(e);await navigator.clipboard.writeText(a),le.oR.success("Credentials copied!")})(ia),className:"gap-2",children:[(0,U.jsx)(y.A,{className:"w-4 h-4"}),"Copy All"]})]}),(0,U.jsx)("div",{className:"text-xs text-slate-500 text-center bg-amber-50 rounded-lg p-2",children:"\ud83d\udca1 Parent \u0915\u094b \u092f\u0947 details share \u0915\u0930\u0947\u0902\u0964 First login \u092a\u0930 password change \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e\u0964"})]})]})}),ka&&Pa&&(0,U.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>Sa(!1),children:(0,U.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,U.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2 mb-4",children:[(0,U.jsx)(I.A,{className:"w-5 h-5 text-amber-600"}),"Reset Student Password"]}),(0,U.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 mb-4",children:[(0,U.jsx)("p",{className:"font-medium",children:Pa.name}),(0,U.jsxs)("p",{className:"text-sm text-slate-500",children:[Pa.student_id||Pa.admission_no||"N/A"," \u2022 ",Pa.class_name||"N/A"]})]}),(0,U.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,U.jsx)(d.J,{children:"New Password (\u0915\u092e \u0938\u0947 \u0915\u092e 4 characters)"}),(0,U.jsxs)("div",{className:"relative",children:[(0,U.jsx)(c.p,{type:Ta?"text":"password",value:Ia,onChange:e=>Ba(e.target.value),placeholder:"Enter new password",className:"pr-10"}),(0,U.jsx)("button",{type:"button",onClick:()=>Ja(!Ta),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,U.jsx)(S.A,{className:"w-4 h-4"})})]})]}),(0,U.jsxs)("div",{className:"flex gap-3",children:[(0,U.jsx)(o.$,{variant:"outline",onClick:()=>Sa(!1),className:"flex-1",children:a("cancel")}),(0,U.jsxs)(o.$,{onClick:async()=>{if(!Ia||Ia.length<4)le.oR.error("Password must be at least 4 characters");else{Fa(!0);try{const e=localStorage.getItem("token");await i.A.put("".concat(be,"/students/").concat(Pa.id,"/reset-password"),{new_password:Ia},{headers:{Authorization:"Bearer ".concat(e)}}),le.oR.success("Password reset for ".concat(Pa.name)),Sa(!1),Ra(null),Ba(""),es()}catch(s){var e,a;le.oR.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Password reset failed")}finally{Fa(!1)}}},disabled:!Ia||Ia.length<4||Da,className:"flex-1 bg-amber-600 hover:bg-amber-700",children:[Da?(0,U.jsx)(x.A,{className:"w-4 h-4 animate-spin mr-2"}):(0,U.jsx)(I.A,{className:"w-4 h-4 mr-2"}),a("reset_password")]})]})]})})]}):(0,U.jsx)("div",{className:"text-center py-20",children:(0,U.jsx)("p",{className:"text-slate-500",children:a("select_school_first")})})}}}]);
//# sourceMappingURL=5381.bbebb278.chunk.js.map