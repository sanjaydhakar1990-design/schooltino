"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1438],{5949(e,s,a){a.d(s,{E:()=>o});var t=a(2555),l=a(3986),r=(a(5043),a(917)),n=a(1089),i=a(579);const c=["className","variant"],d=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:a}=e,r=(0,l.A)(e,c);return(0,i.jsx)("div",(0,t.A)({className:(0,n.cn)(d({variant:a}),s)},r))}},3390(e,s,a){a.d(s,{$:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(6851),i=a(917),c=a(1089),d=a(579);const o=["className","variant","size","asChild"],m=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-500 text-white shadow-sm hover:bg-blue-600 rounded-lg",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-50 text-gray-700 rounded-lg",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),x=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:x=!1}=e,h=(0,l.A)(e,o);const u=x?n.DX:"button";return(0,d.jsx)(u,(0,t.A)({className:(0,c.cn)(m({variant:r,size:i,className:a})),ref:s},h))});x.displayName="Button"},1140(e,s,a){a.d(s,{BT:()=>j,Wu:()=>f,ZB:()=>p,Zp:()=>u,aR:()=>g});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const c=["className"],d=["className"],o=["className"],m=["className"],x=["className"],h=["className"],u=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("rounded-xl border border-gray-200 bg-white text-gray-900 shadow-sm",a)},r))});u.displayName="Card";const g=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,d);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-5",a)},r))});g.displayName="CardHeader";const p=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",a)},r))});p.displayName="CardTitle";const j=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,m);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a)},r))});j.displayName="CardDescription";const f=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,x);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("p-5 pt-0",a)},r))});f.displayName="CardContent";r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("flex items-center p-5 pt-0",a)},r))}).displayName="CardFooter"},5598(e,s,a){a.d(s,{Cf:()=>N,L3:()=>b,c7:()=>v,lG:()=>g,rr:()=>y,zM:()=>p});var t=a(2555),l=a(3986),r=a(5043),n=a(7427),i=a(614),c=a(1089),d=a(579);const o=["className"],m=["className","children"],x=["className"],h=["className"],u=["className"],g=n.bL,p=n.l9,j=n.ZL,f=(n.bm,r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,d.jsx)(n.hJ,(0,t.A)({ref:s,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},r))}));f.displayName=n.hJ.displayName;const N=r.forwardRef((e,s)=>{let{className:a,children:r}=e,o=(0,l.A)(e,m);return(0,d.jsxs)(j,{children:[(0,d.jsx)(f,{}),(0,d.jsxs)(n.UC,(0,t.A)((0,t.A)({ref:s,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},o),{},{children:[r,(0,d.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(i.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});N.displayName=n.UC.displayName;const v=e=>{let{className:s}=e,a=(0,l.A)(e,x);return(0,d.jsx)("div",(0,t.A)({className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s)},a))};v.displayName="DialogHeader";const b=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,d.jsx)(n.hE,(0,t.A)({ref:s,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",a)},r))});b.displayName=n.hE.displayName;const y=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,u);return(0,d.jsx)(n.VY,(0,t.A)({ref:s,className:(0,c.cn)("text-sm text-muted-foreground",a)},r))});y.displayName=n.VY.displayName},2264(e,s,a){a.d(s,{p:()=>d});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const c=["className","type"],d=r.forwardRef((e,s)=>{let{className:a,type:r}=e,d=(0,l.A)(e,c);return(0,i.jsx)("input",(0,t.A)({type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-white px-3 py-1 text-base text-gray-900 shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s},d))});d.displayName="Input"},9938(e,s,a){a.d(s,{J:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(5131),i=a(917),c=a(1089),d=a(579);const o=["className"],m=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,d.jsx)(n.b,(0,t.A)({ref:s,className:(0,c.cn)(m(),a)},r))});x.displayName=n.b.displayName},9690(e,s,a){a.d(s,{Xi:()=>u,av:()=>g,j7:()=>h,tU:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(7127),i=a(1089),c=a(579);const d=["className"],o=["className"],m=["className"],x=n.bL,h=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,d);return(0,c.jsx)(n.B8,(0,t.A)({ref:s,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-gray-100 border border-gray-200 p-1 text-muted-foreground",a)},r))});h.displayName=n.B8.displayName;const u=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,c.jsx)(n.l9,(0,t.A)({ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-blue-500",a)},r))});u.displayName=n.l9.displayName;const g=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,m);return(0,c.jsx)(n.UC,(0,t.A)({ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a)},r))});g.displayName=n.UC.displayName},3416(e,s,a){a.d(s,{T:()=>d});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const c=["className"],d=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,i.jsx)("textarea",(0,t.A)({className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s},r))});d.displayName="Textarea"},1089(e,s,a){a.d(s,{cn:()=>r});var t=a(8387),l=a(9359);function r(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.QP)((0,t.$)(s))}},1438(e,s,a){a.r(s),a.d(s,{default:()=>L});var t=a(2555),l=a(5043),r=a(8729),n=a(6930),i=a(9722),c=a(3390),d=a(2264),o=a(9938),m=a(1140),x=a(5949),h=a(9690),u=a(5598),g=a(6328),p=(a(3416),a(2054)),j=a(6245),f=a(2024),N=a(8646),v=a(5088),b=a(7104),y=a(764),w=a(9807),A=a(3172),_=a(4830),C=a(1360),k=a(9757),S=a(9292),M=a(8306),R=a(9855),z=a(254),T=a(7118),B=a(9333),E=a(579);const D="".concat("","/api");function L(){const{user:e}=(0,r.As)(),{t:s}=(0,n.Bd)(),a=(null===e||void 0===e?void 0:e.school_id)||localStorage.getItem("school_id"),[L,J]=(0,l.useState)("schedule"),[P,Z]=(0,l.useState)(!1),[G,$]=(0,l.useState)(!1),[I,V]=(0,l.useState)(""),[W,U]=(0,l.useState)([]),[F,X]=(0,l.useState)({title:"",subject:"",class_name:"",teacher:"",teacher_id:"",date:"",time:"",duration:"60",platform:"Zoom",meeting_link:""}),K=[{id:101,title:"Biology - Cell Division",subject:"Biology",class_name:"Class 11-A",teacher:"Dr. Mehta",platform:"Zoom",attendees:38,maxAttendees:45,startedAt:new Date(Date.now()-15e5).toISOString(),duration:60,meeting_link:"https://zoom.us/j/345678"},{id:102,title:"Computer Science - Python",subject:"Computer Science",class_name:"Class 12-B",teacher:"Mr. Kumar",platform:"Built-in",attendees:32,maxAttendees:40,startedAt:new Date(Date.now()-6e5).toISOString(),duration:45,meeting_link:""}],[H,O]=(0,l.useState)([{id:1,title:"Mathematics - Trigonometry",subject:"Mathematics",class_name:"Class 10-A",teacher:"Mr. Sharma",date:"2026-02-10",time:"10:00",duration:60,platform:"Zoom",meeting_link:"https://zoom.us/j/123456",status:"upcoming"},{id:2,title:"Physics - Laws of Motion",subject:"Physics",class_name:"Class 11-B",teacher:"Mrs. Gupta",date:"2026-02-10",time:"11:30",duration:45,platform:"Google Meet",meeting_link:"https://meet.google.com/abc-def",status:"upcoming"},{id:3,title:"English - Essay Writing",subject:"English",class_name:"Class 9-A",teacher:"Ms. Patel",date:"2026-02-11",time:"09:00",duration:40,platform:"Built-in",meeting_link:"",status:"upcoming"},{id:4,title:"Chemistry - Periodic Table",subject:"Chemistry",class_name:"Class 12-A",teacher:"Dr. Singh",date:"2026-02-11",time:"14:00",duration:50,platform:"Zoom",meeting_link:"https://zoom.us/j/789012",status:"upcoming"},{id:5,title:"Hindi - Kabir Ke Dohe",subject:"Hindi",class_name:"Class 8-B",teacher:"Mrs. Verma",date:"2026-02-12",time:"10:30",duration:35,platform:"Google Meet",meeting_link:"https://meet.google.com/xyz-abc",status:"upcoming"}]),[q,Q]=(0,l.useState)(K),[Y,ee]=(0,l.useState)([{id:201,title:"Mathematics - Algebra Basics",subject:"Mathematics",class_name:"Class 9-A",teacher:"Mr. Sharma",date:"2026-02-08",duration:"58:32",size:"245 MB",views:127,status:"available"},{id:202,title:"Science - Chemical Reactions",subject:"Science",class_name:"Class 10-B",teacher:"Mrs. Gupta",date:"2026-02-07",duration:"42:15",size:"178 MB",views:89,status:"available"},{id:203,title:"Social Studies - Indian Constitution",subject:"Social Studies",class_name:"Class 8-A",teacher:"Mr. Joshi",date:"2026-02-06",duration:"35:48",size:"156 MB",views:64,status:"available"},{id:204,title:"English - Grammar Workshop",subject:"English",class_name:"Class 7-B",teacher:"Ms. Patel",date:"2026-02-05",duration:"40:22",size:"192 MB",views:103,status:"processing"}]),[se,ae]=(0,l.useState)([{id:301,class_name:"Class 10-A",subject:"Mathematics",date:"2026-02-08",totalStudents:45,present:41,absent:4,teacher:"Mr. Sharma",session:"Trigonometry"},{id:302,class_name:"Class 11-B",subject:"Physics",date:"2026-02-08",totalStudents:40,present:36,absent:4,teacher:"Mrs. Gupta",session:"Laws of Motion"},{id:303,class_name:"Class 9-A",subject:"English",date:"2026-02-07",totalStudents:42,present:39,absent:3,teacher:"Ms. Patel",session:"Essay Writing"},{id:304,class_name:"Class 12-A",subject:"Chemistry",date:"2026-02-07",totalStudents:38,present:35,absent:3,teacher:"Dr. Singh",session:"Periodic Table"}]),[te,le]=(0,l.useState)(null),[re,ne]=(0,l.useState)(!1);(0,l.useEffect)(()=>{ie(),ce()},[]);const ie=async()=>{try{const l=localStorage.getItem("token"),r={Authorization:"Bearer ".concat(l)};let n=[];try{n=((await i.A.get("".concat(D,"/employees?school_id=").concat(a),{headers:r})).data||[]).filter(e=>{var s;return"teacher"===e.role||(null===(s=e.designation)||void 0===s?void 0:s.toLowerCase().includes("teacher"))})}catch(e){try{n=((await i.A.get("".concat(D,"/staff?school_id=").concat(a),{headers:r})).data||[]).filter(e=>{var s;return"teacher"===e.role||(null===(s=e.designation)||void 0===s?void 0:s.toLowerCase().includes("teacher"))})}catch(s){try{n=(await i.A.get("".concat(D,"/users?role=teacher"),{headers:r})).data||[]}catch(t){console.log("Could not fetch teachers from any endpoint")}}}U(n)}catch(l){console.error("Failed to fetch teachers:",l)}},ce=async()=>{try{const e=localStorage.getItem("token"),s={Authorization:"Bearer ".concat(e)},t=(await i.A.get("".concat(D,"/live-classes?school_id=").concat(a),{headers:s})).data||[];t.length>0&&(O(t.filter(e=>"upcoming"===e.status||"scheduled"===e.status)),Q(t.filter(e=>"ongoing"===e.status||"live"===e.status)))}catch(e){console.log("Using default live class data")}},de=e=>{g.oR.success("Downloading attendance report for ".concat(e.class_name," - ").concat(e.session))},oe=e=>{switch(e){case"Zoom":return(0,E.jsx)(x.E,{className:"bg-blue-100 text-blue-700",children:"Zoom"});case"Google Meet":return(0,E.jsx)(x.E,{className:"bg-green-100 text-green-700",children:"Google Meet"});default:return(0,E.jsx)(x.E,{className:"bg-purple-100 text-purple-700",children:"Built-in"})}},me={totalScheduled:H.length,ongoingNow:q.length,totalRecordings:Y.length,avgAttendance:se.length>0?Math.round(se.reduce((e,s)=>e+s.present/s.totalStudents*100,0)/se.length):0};return(0,E.jsxs)("div",{className:"space-y-6",children:[(0,E.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 rounded-2xl p-6 text-white",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{children:[(0,E.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,E.jsx)(B.A,{className:"w-8 h-8"}),s("live_classes")]}),(0,E.jsx)("p",{className:"text-red-100 mt-2",children:s("schedule_class")})]}),(0,E.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,E.jsxs)("div",{className:"bg-white/20 rounded-xl px-4 py-2 text-center",children:[(0,E.jsx)("p",{className:"text-2xl font-bold",children:me.totalScheduled}),(0,E.jsx)("p",{className:"text-xs text-red-100",children:s("scheduled")})]}),(0,E.jsxs)("div",{className:"bg-white/20 rounded-xl px-4 py-2 text-center",children:[(0,E.jsx)("p",{className:"text-2xl font-bold",children:me.ongoingNow}),(0,E.jsx)("p",{className:"text-xs text-red-100",children:s("ongoing")})]}),(0,E.jsxs)("div",{className:"bg-white/20 rounded-xl px-4 py-2 text-center",children:[(0,E.jsx)("p",{className:"text-2xl font-bold",children:me.totalRecordings}),(0,E.jsx)("p",{className:"text-xs text-red-100",children:s("recording")})]}),(0,E.jsxs)("div",{className:"bg-white/20 rounded-xl px-4 py-2 text-center",children:[(0,E.jsxs)("p",{className:"text-2xl font-bold",children:[me.avgAttendance,"%"]}),(0,E.jsx)("p",{className:"text-xs text-red-100",children:s("attendance")})]})]})]})}),(0,E.jsxs)(h.tU,{value:L,onValueChange:J,className:"w-full",children:[(0,E.jsxs)(h.j7,{className:"grid w-full grid-cols-4 h-12",children:[(0,E.jsxs)(h.Xi,{value:"schedule",className:"flex items-center gap-2",children:[(0,E.jsx)(N.A,{className:"w-4 h-4"})," ",s("scheduled")]}),(0,E.jsxs)(h.Xi,{value:"ongoing",className:"flex items-center gap-2",children:[(0,E.jsx)(k.A,{className:"w-4 h-4"})," ",s("ongoing")]}),(0,E.jsxs)(h.Xi,{value:"recordings",className:"flex items-center gap-2",children:[(0,E.jsx)(_.A,{className:"w-4 h-4"})," ",s("recording")]}),(0,E.jsxs)(h.Xi,{value:"attendance",className:"flex items-center gap-2",children:[(0,E.jsx)(z.A,{className:"w-4 h-4"})," ",s("attendance")]})]}),(0,E.jsxs)(h.av,{value:"schedule",className:"mt-6",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,E.jsx)(S.A,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,E.jsx)(d.p,{placeholder:s("search_placeholder"),value:I,onChange:e=>V(e.target.value),className:"pl-10"})]}),(0,E.jsxs)(c.$,{onClick:()=>$(!0),className:"bg-red-600 hover:bg-red-700",children:[(0,E.jsx)(C.A,{className:"w-4 h-4 mr-2"})," ",s("schedule_class")]})]}),(0,E.jsxs)("div",{className:"space-y-3",children:[H.filter(e=>e.title.toLowerCase().includes(I.toLowerCase())||e.subject.toLowerCase().includes(I.toLowerCase())).map(e=>(0,E.jsx)(m.Zp,{className:"border-0 shadow-sm hover:shadow-md transition-all",children:(0,E.jsx)(m.Wu,{className:"p-5",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center gap-4",children:[(0,E.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-100 to-rose-100 flex items-center justify-center",children:(0,E.jsx)(B.A,{className:"w-6 h-6 text-red-600"})}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,E.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[(0,E.jsxs)("span",{className:"flex items-center gap-1",children:[(0,E.jsx)(N.A,{className:"w-3 h-3"})," ",e.date]}),(0,E.jsxs)("span",{className:"flex items-center gap-1",children:[(0,E.jsx)(v.A,{className:"w-3 h-3"})," ",e.time]}),(0,E.jsxs)("span",{children:[e.duration," min"]}),(0,E.jsx)("span",{children:e.class_name})]}),(0,E.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[s("teacher"),": ",e.teacher]})]})]}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[oe(e.platform),e.meeting_link&&(0,E.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>window.open(e.meeting_link,"_blank"),children:[(0,E.jsx)(y.A,{className:"w-3 h-3 mr-1"})," Link"]}),(0,E.jsx)(c.$,{size:"sm",variant:"ghost",onClick:()=>{return s=e.id,O(e=>e.filter(e=>e.id!==s)),void g.oR.success("Scheduled class removed");var s},children:(0,E.jsx)(R.A,{className:"w-4 h-4 text-red-400"})})]})]})})},e.id)),0===H.length&&(0,E.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,E.jsx)(N.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,E.jsx)("p",{children:s("no_data")})]})]})]}),(0,E.jsx)(h.av,{value:"ongoing",className:"mt-6",children:q.length>0?(0,E.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(e=>{const a=(t=e.startedAt,Math.floor((Date.now()-new Date(t).getTime())/6e4));var t;const l=e.duration-a;return(0,E.jsx)(m.Zp,{className:"border-0 shadow-md border-l-4 border-l-red-500",children:(0,E.jsxs)(m.Wu,{className:"p-5",children:[(0,E.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,E.jsx)(x.E,{className:"bg-red-100 text-red-700",children:"LIVE"}),oe(e.platform)]}),(0,E.jsxs)("span",{className:"text-sm text-gray-500",children:[a," ",s("duration_minutes")]})]}),(0,E.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:e.title}),(0,E.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.class_name," \u2022 ",e.teacher]}),(0,E.jsxs)("div",{className:"flex items-center gap-4 mt-4",children:[(0,E.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[(0,E.jsx)(T.A,{className:"w-4 h-4"})," ",e.attendees,"/",e.maxAttendees]}),(0,E.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[(0,E.jsx)(v.A,{className:"w-4 h-4"})," ",l>0?"".concat(l," ").concat(s("duration_minutes")):s("ended")]})]}),(0,E.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:(0,E.jsx)("div",{className:"bg-red-500 h-2 rounded-full transition-all",style:{width:"".concat(Math.min(a/e.duration*100,100),"%")}})}),(0,E.jsxs)(c.$,{className:"w-full mt-4 bg-red-600 hover:bg-red-700",onClick:()=>(e=>{e.meeting_link&&window.open(e.meeting_link,"_blank"),g.oR.success("Joining ".concat(e.title,"..."))})(e),children:[(0,E.jsx)(A.A,{className:"w-4 h-4 mr-2"})," ",s("join_class")]})]})},e.id)})}):(0,E.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,E.jsx)(k.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,E.jsx)("p",{children:s("no_data")})]})}),(0,E.jsx)(h.av,{value:"recordings",className:"mt-6",children:(0,E.jsx)("div",{className:"space-y-3",children:Y.map(e=>(0,E.jsx)(m.Zp,{className:"border-0 shadow-sm hover:shadow-md transition-all",children:(0,E.jsx)(m.Wu,{className:"p-5",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center gap-4",children:[(0,E.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center",children:(0,E.jsx)(_.A,{className:"w-6 h-6 text-purple-600"})}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,E.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[(0,E.jsx)("span",{children:e.class_name}),(0,E.jsx)("span",{children:e.date}),(0,E.jsxs)("span",{className:"flex items-center gap-1",children:[(0,E.jsx)(v.A,{className:"w-3 h-3"})," ",e.duration]}),(0,E.jsx)("span",{children:e.size})]}),(0,E.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[s("teacher"),": ",e.teacher," \u2022 ",e.views," views"]})]})]}),(0,E.jsx)("div",{className:"flex items-center gap-2",children:"processing"===e.status?(0,E.jsxs)(x.E,{className:"bg-amber-100 text-amber-700",children:[(0,E.jsx)(f.A,{className:"w-3 h-3 mr-1 animate-spin"})," ",s("loading")]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>g.oR.success("Playing recording..."),children:[(0,E.jsx)(_.A,{className:"w-3 h-3 mr-1"})," ",s("view")]}),(0,E.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>g.oR.success("Download started..."),children:[(0,E.jsx)(b.A,{className:"w-3 h-3 mr-1"})," ",s("download")]}),(0,E.jsx)(c.$,{size:"sm",variant:"ghost",onClick:()=>(e=>{navigator.clipboard.writeText("Check out: ".concat(e.title," - Live Class Recording")),g.oR.success("Recording link copied to clipboard!")})(e),children:(0,E.jsx)(M.A,{className:"w-4 h-4 text-gray-500"})})]})})]})})},e.id))})}),(0,E.jsx)(h.av,{value:"attendance",className:"mt-6",children:(0,E.jsx)("div",{className:"space-y-3",children:se.map(e=>(0,E.jsx)(m.Zp,{className:"border-0 shadow-sm hover:shadow-md transition-all cursor-pointer",onClick:()=>(e=>{le(e),ne(!0)})(e),children:(0,E.jsx)(m.Wu,{className:"p-5",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center gap-4",children:[(0,E.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-100 to-emerald-100 flex items-center justify-center",children:(0,E.jsx)(z.A,{className:"w-6 h-6 text-green-600"})}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h3",{className:"font-semibold text-gray-900",children:e.session}),(0,E.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[(0,E.jsx)("span",{children:e.class_name}),(0,E.jsx)("span",{children:e.subject}),(0,E.jsx)("span",{children:e.date}),(0,E.jsxs)("span",{children:[s("teacher"),": ",e.teacher]})]})]})]}),(0,E.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E.jsxs)("div",{className:"text-right",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsxs)(x.E,{className:"bg-green-100 text-green-700",children:[(0,E.jsx)(p.A,{className:"w-3 h-3 mr-1"})," ",e.present," ",s("present")]}),(0,E.jsxs)(x.E,{className:"bg-red-100 text-red-700",children:[(0,E.jsx)(j.A,{className:"w-3 h-3 mr-1"})," ",e.absent," ",s("absent")]})]}),(0,E.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[Math.round(e.present/e.totalStudents*100),"% ",s("attendance")]})]}),(0,E.jsxs)(c.$,{size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),de(e)},children:[(0,E.jsx)(w.A,{className:"w-3 h-3 mr-1"})," ",s("reports")]})]})]})})},e.id))})})]}),(0,E.jsx)(u.lG,{open:G,onOpenChange:$,children:(0,E.jsxs)(u.Cf,{className:"max-w-lg",children:[(0,E.jsx)(u.c7,{children:(0,E.jsxs)(u.L3,{className:"flex items-center gap-2",children:[(0,E.jsx)(B.A,{className:"w-5 h-5 text-red-600"})," ",s("schedule_class")]})}),(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("title")}),(0,E.jsx)(d.p,{value:F.title,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{title:e.target.value})),placeholder:"e.g. Mathematics - Quadratic Equations"})]}),(0,E.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("subject")}),(0,E.jsx)(d.p,{value:F.subject,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{subject:e.target.value})),placeholder:s("subject")})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("class_section")}),(0,E.jsx)(d.p,{value:F.class_name,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{class_name:e.target.value})),placeholder:"Class 10-A"})]})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("teacher")}),W.length>0?(0,E.jsxs)("select",{value:F.teacher_id,onChange:e=>{const s=W.find(s=>(s.id||s._id)===e.target.value);X(a=>(0,t.A)((0,t.A)({},a),{},{teacher_id:e.target.value,teacher:(null===s||void 0===s?void 0:s.name)||""}))},className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,E.jsxs)("option",{value:"",children:["-- ",s("select")," ",s("teacher")," --"]}),W.map(e=>(0,E.jsxs)("option",{value:e.id||e._id,children:[e.name," ",e.subject?"(".concat(e.subject,")"):""]},e.id||e._id))]}):(0,E.jsx)(d.p,{value:F.teacher,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{teacher:e.target.value})),placeholder:s("teacher")})]}),(0,E.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("date")}),(0,E.jsx)(d.p,{type:"date",value:F.date,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{date:e.target.value}))})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("time")}),(0,E.jsx)(d.p,{type:"time",value:F.time,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{time:e.target.value}))})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("duration_minutes")}),(0,E.jsx)(d.p,{type:"number",value:F.duration,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{duration:e.target.value}))})]})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("online_class")}),(0,E.jsx)("div",{className:"grid grid-cols-3 gap-3",children:["Zoom","Google Meet","Built-in"].map(e=>(0,E.jsx)("button",{type:"button",onClick:()=>X(s=>(0,t.A)((0,t.A)({},s),{},{platform:e})),className:"p-3 rounded-xl border-2 text-center text-sm font-medium transition-all ".concat(F.platform===e?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-red-200"),children:e},e))})]}),"Built-in"!==F.platform&&(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(o.J,{children:s("meeting_link")}),(0,E.jsx)(d.p,{value:F.meeting_link,onChange:e=>X(s=>(0,t.A)((0,t.A)({},s),{},{meeting_link:e.target.value})),placeholder:"https://zoom.us/j/..."})]}),(0,E.jsxs)(c.$,{onClick:async()=>{if(!F.title||!F.subject||!F.date||!F.time)return void g.oR.error("Please fill all required fields");const e=W.find(e=>(e.id||e._id)===F.teacher_id),s=(null===e||void 0===e?void 0:e.name)||F.teacher||"",l=(0,t.A)((0,t.A)({id:Date.now()},F),{},{teacher:s,duration:parseInt(F.duration),status:"upcoming"});try{var r;const e=localStorage.getItem("token"),s=await i.A.post("".concat(D,"/live-classes"),(0,t.A)((0,t.A)({},l),{},{school_id:a}),{headers:{Authorization:"Bearer ".concat(e)}});null!==(r=s.data)&&void 0!==r&&r.id&&(l.id=s.data.id)}catch(n){console.log("Saved locally")}O(e=>[l,...e]),g.oR.success("Live class scheduled successfully!"),$(!1),X({title:"",subject:"",class_name:"",teacher:"",teacher_id:"",date:"",time:"",duration:"60",platform:"Zoom",meeting_link:""})},className:"w-full bg-red-600 hover:bg-red-700",children:[(0,E.jsx)(N.A,{className:"w-4 h-4 mr-2"})," ",s("schedule_class")]})]})]})}),(0,E.jsx)(u.lG,{open:re,onOpenChange:ne,children:(0,E.jsxs)(u.Cf,{className:"max-w-2xl",children:[(0,E.jsx)(u.c7,{children:(0,E.jsxs)(u.L3,{className:"flex items-center gap-2",children:[(0,E.jsx)(z.A,{className:"w-5 h-5 text-green-600"})," ",s("attendance")," ",s("details")," \u2014 ",null===te||void 0===te?void 0:te.session]})}),te&&(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,E.jsx)("span",{children:te.class_name}),(0,E.jsx)("span",{children:te.subject}),(0,E.jsx)("span",{children:te.date})]}),(0,E.jsx)("div",{className:"border rounded-xl overflow-hidden",children:(0,E.jsxs)("table",{className:"w-full",children:[(0,E.jsx)("thead",{className:"bg-gray-50",children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{className:"text-left p-3 text-sm font-medium text-gray-600",children:s("roll_no")}),(0,E.jsx)("th",{className:"text-left p-3 text-sm font-medium text-gray-600",children:s("name")}),(0,E.jsx)("th",{className:"text-left p-3 text-sm font-medium text-gray-600",children:s("status")}),(0,E.jsx)("th",{className:"text-left p-3 text-sm font-medium text-gray-600",children:s("start_time")}),(0,E.jsx)("th",{className:"text-left p-3 text-sm font-medium text-gray-600",children:s("end_time")})]})}),(0,E.jsx)("tbody",{className:"divide-y",children:[{id:"s1",name:"Aarav Patel",rollNo:1,status:"present",joinTime:"10:02",leaveTime:"10:58"},{id:"s2",name:"Ananya Sharma",rollNo:2,status:"present",joinTime:"10:00",leaveTime:"10:58"},{id:"s3",name:"Arjun Singh",rollNo:3,status:"absent",joinTime:"-",leaveTime:"-"},{id:"s4",name:"Diya Gupta",rollNo:4,status:"present",joinTime:"10:05",leaveTime:"10:58"},{id:"s5",name:"Ishaan Kumar",rollNo:5,status:"present",joinTime:"10:01",leaveTime:"10:55"},{id:"s6",name:"Kavya Verma",rollNo:6,status:"absent",joinTime:"-",leaveTime:"-"},{id:"s7",name:"Mohit Joshi",rollNo:7,status:"present",joinTime:"10:00",leaveTime:"10:58"},{id:"s8",name:"Priya Mehta",rollNo:8,status:"present",joinTime:"10:03",leaveTime:"10:58"}].map(e=>(0,E.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,E.jsx)("td",{className:"p-3 text-sm",children:e.rollNo}),(0,E.jsx)("td",{className:"p-3 text-sm font-medium",children:e.name}),(0,E.jsx)("td",{className:"p-3",children:(0,E.jsxs)(x.E,{className:"present"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:["present"===e.status?(0,E.jsx)(p.A,{className:"w-3 h-3 mr-1"}):(0,E.jsx)(j.A,{className:"w-3 h-3 mr-1"}),"present"===e.status?s("present"):s("absent")]})}),(0,E.jsx)("td",{className:"p-3 text-sm text-gray-500",children:e.joinTime}),(0,E.jsx)("td",{className:"p-3 text-sm text-gray-500",children:e.leaveTime})]},e.id))})]})}),(0,E.jsxs)(c.$,{variant:"outline",onClick:()=>de(te),className:"w-full",children:[(0,E.jsx)(w.A,{className:"w-4 h-4 mr-2"})," ",s("download")," ",s("reports")]})]})]})})]})}}}]);
//# sourceMappingURL=1438.7ab527ff.chunk.js.map