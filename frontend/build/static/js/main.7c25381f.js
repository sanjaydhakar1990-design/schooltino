/*! For license information please see main.7c25381f.js.LICENSE.txt */
(()=>{var e={4441(e,t,a){var s;!function(){"use strict";var n,r=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},l=!0,o="[DecimalError] ",c=o+"Invalid argument: ",d=o+"Exponent out of range: ",u=Math.floor,m=Math.pow,h=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,x=9007199254740991,f=u(1286742750677284.5),g={};function v(e,t){var a,s,n,r,i,o,c,d,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),l?E(t,m):t;if(c=e.d,d=t.d,i=e.e,n=t.e,c=c.slice(),r=i-n){for(r<0?(s=c,r=-r,o=d.length):(s=d,n=i,o=c.length),r>(o=(i=Math.ceil(m/7))>o?i+1:o+1)&&(r=o,s.length=1),s.reverse();r--;)s.push(0);s.reverse()}for((o=c.length)-(r=d.length)<0&&(r=o,s=d,d=c,c=s),a=0;r;)a=(c[--r]=c[r]+d[r]+a)/p|0,c[r]%=p;for(a&&(c.unshift(a),++n),o=c.length;0==c[--o];)c.pop();return t.d=c,t.e=n,l?E(t,m):t}function b(e,t,a){if(e!==~~e||e<t||e>a)throw Error(c+e)}function y(e){var t,a,s,n=e.length-1,r="",i=e[0];if(n>0){for(r+=i,t=1;t<n;t++)(a=7-(s=e[t]+"").length)&&(r+=_(a)),r+=s;(a=7-(s=(i=e[t])+"").length)&&(r+=_(a))}else if(0===i)return"0";for(;i%10===0;)i/=10;return r+i}g.absoluteValue=g.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},g.comparedTo=g.cmp=function(e){var t,a,s,n,r=this;if(e=new r.constructor(e),r.s!==e.s)return r.s||-e.s;if(r.e!==e.e)return r.e>e.e^r.s<0?1:-1;for(t=0,a=(s=r.d.length)<(n=e.d.length)?s:n;t<a;++t)if(r.d[t]!==e.d[t])return r.d[t]>e.d[t]^r.s<0?1:-1;return s===n?0:s>n^r.s<0?1:-1},g.decimalPlaces=g.dp=function(){var e=this,t=e.d.length-1,a=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)a--;return a<0?0:a},g.dividedBy=g.div=function(e){return j(this,new this.constructor(e))},g.dividedToIntegerBy=g.idiv=function(e){var t=this.constructor;return E(j(this,new t(e),0,1),t.precision)},g.equals=g.eq=function(e){return!this.cmp(e)},g.exponent=function(){return w(this)},g.greaterThan=g.gt=function(e){return this.cmp(e)>0},g.greaterThanOrEqualTo=g.gte=function(e){return this.cmp(e)>=0},g.isInteger=g.isint=function(){return this.e>this.d.length-2},g.isNegative=g.isneg=function(){return this.s<0},g.isPositive=g.ispos=function(){return this.s>0},g.isZero=function(){return 0===this.s},g.lessThan=g.lt=function(e){return this.cmp(e)<0},g.lessThanOrEqualTo=g.lte=function(e){return this.cmp(e)<1},g.logarithm=g.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(void 0===e)e=new s(10);else if((e=new s(e)).s<1||e.eq(n))throw Error(o+"NaN");if(a.s<1)throw Error(o+(a.s?"NaN":"-Infinity"));return a.eq(n)?new s(0):(l=!1,t=j(k(a,i),k(e,i),i),l=!0,E(t,r))},g.minus=g.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?A(t,e):v(t,(e.s=-e.s,e))},g.modulo=g.mod=function(e){var t,a=this,s=a.constructor,n=s.precision;if(!(e=new s(e)).s)throw Error(o+"NaN");return a.s?(l=!1,t=j(a,e,0,1).times(e),l=!0,a.minus(t)):E(new s(a),n)},g.naturalExponential=g.exp=function(){return N(this)},g.naturalLogarithm=g.ln=function(){return k(this)},g.negated=g.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},g.plus=g.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):A(t,(e.s=-e.s,e))},g.precision=g.sd=function(e){var t,a,s,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=w(n)+1,a=7*(s=n.d.length-1)+1,s=n.d[s]){for(;s%10==0;s/=10)a--;for(s=n.d[0];s>=10;s/=10)a++}return e&&t>a?t:a},g.squareRoot=g.sqrt=function(){var e,t,a,s,n,r,i,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(o+"NaN")}for(e=w(c),l=!1,0==(n=Math.sqrt(+c))||n==1/0?(((t=y(c.d)).length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),s=new d(t=n==1/0?"5e"+e:(t=n.toExponential()).slice(0,t.indexOf("e")+1)+e)):s=new d(n.toString()),n=i=(a=d.precision)+3;;)if(s=(r=s).plus(j(c,r,i+2)).times(.5),y(r.d).slice(0,i)===(t=y(s.d)).slice(0,i)){if(t=t.slice(i-3,i+1),n==i&&"4999"==t){if(E(r,a+1,0),r.times(r).eq(c)){s=r;break}}else if("9999"!=t)break;i+=4}return l=!0,E(s,a)},g.times=g.mul=function(e){var t,a,s,n,r,i,o,c,d,u=this,m=u.constructor,h=u.d,x=(e=new m(e)).d;if(!u.s||!e.s)return new m(0);for(e.s*=u.s,a=u.e+e.e,(c=h.length)<(d=x.length)&&(r=h,h=x,x=r,i=c,c=d,d=i),r=[],s=i=c+d;s--;)r.push(0);for(s=d;--s>=0;){for(t=0,n=c+s;n>s;)o=r[n]+x[s]*h[n-s-1]+t,r[n--]=o%p|0,t=o/p|0;r[n]=(r[n]+t)%p|0}for(;!r[--i];)r.pop();return t?++a:r.shift(),e.d=r,e.e=a,l?E(e,m.precision):e},g.toDecimalPlaces=g.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),void 0===e?a:(b(e,0,r),void 0===t?t=s.rounding:b(t,0,8),E(a,e+w(a)+1,t))},g.toExponential=function(e,t){var a,s=this,n=s.constructor;return void 0===e?a=P(s,!0):(b(e,0,r),void 0===t?t=n.rounding:b(t,0,8),a=P(s=E(new n(s),e+1,t),!0,e+1)),a},g.toFixed=function(e,t){var a,s,n=this,i=n.constructor;return void 0===e?P(n):(b(e,0,r),void 0===t?t=i.rounding:b(t,0,8),a=P((s=E(new i(n),e+w(n)+1,t)).abs(),!1,e+w(s)+1),n.isneg()&&!n.isZero()?"-"+a:a)},g.toInteger=g.toint=function(){var e=this,t=e.constructor;return E(new t(e),w(e)+1,t.rounding)},g.toNumber=function(){return+this},g.toPower=g.pow=function(e){var t,a,s,r,i,c,d=this,m=d.constructor,h=+(e=new m(e));if(!e.s)return new m(n);if(!(d=new m(d)).s){if(e.s<1)throw Error(o+"Infinity");return d}if(d.eq(n))return d;if(s=m.precision,e.eq(n))return E(d,s);if(c=(t=e.e)>=(a=e.d.length-1),i=d.s,c){if((a=h<0?-h:h)<=x){for(r=new m(n),t=Math.ceil(s/7+4),l=!1;a%2&&O((r=r.times(d)).d,t),0!==(a=u(a/2));)O((d=d.times(d)).d,t);return l=!0,e.s<0?new m(n).div(r):E(r,s)}}else if(i<0)throw Error(o+"NaN");return i=i<0&&1&e.d[Math.max(t,a)]?-1:1,d.s=1,l=!1,r=e.times(k(d,s+12)),l=!0,(r=N(r)).s=i,r},g.toPrecision=function(e,t){var a,s,n=this,i=n.constructor;return void 0===e?s=P(n,(a=w(n))<=i.toExpNeg||a>=i.toExpPos):(b(e,1,r),void 0===t?t=i.rounding:b(t,0,8),s=P(n=E(new i(n),e,t),e<=(a=w(n))||a<=i.toExpNeg,e)),s},g.toSignificantDigits=g.tosd=function(e,t){var a=this.constructor;return void 0===e?(e=a.precision,t=a.rounding):(b(e,1,r),void 0===t?t=a.rounding:b(t,0,8)),E(new a(this),e,t)},g.toString=g.valueOf=g.val=g.toJSON=function(){var e=this,t=w(e),a=e.constructor;return P(e,t<=a.toExpNeg||t>=a.toExpPos)};var j=function(){function e(e,t){var a,s=0,n=e.length;for(e=e.slice();n--;)a=e[n]*t+s,e[n]=a%p|0,s=a/p|0;return s&&e.unshift(s),e}function t(e,t,a,s){var n,r;if(a!=s)r=a>s?1:-1;else for(n=r=0;n<a;n++)if(e[n]!=t[n]){r=e[n]>t[n]?1:-1;break}return r}function a(e,t,a){for(var s=0;a--;)e[a]-=s,s=e[a]<t[a]?1:0,e[a]=s*p+e[a]-t[a];for(;!e[0]&&e.length>1;)e.shift()}return function(s,n,r,i){var l,c,d,u,m,h,x,f,g,v,b,y,j,N,S,_,k,C,A=s.constructor,P=s.s==n.s?1:-1,O=s.d,M=n.d;if(!s.s)return new A(s);if(!n.s)throw Error(o+"Division by zero");for(c=s.e-n.e,k=M.length,S=O.length,f=(x=new A(P)).d=[],d=0;M[d]==(O[d]||0);)++d;if(M[d]>(O[d]||0)&&--c,(y=null==r?r=A.precision:i?r+(w(s)-w(n))+1:r)<0)return new A(0);if(y=y/7+2|0,d=0,1==k)for(u=0,M=M[0],y++;(d<S||u)&&y--;d++)j=u*p+(O[d]||0),f[d]=j/M|0,u=j%M|0;else{for((u=p/(M[0]+1)|0)>1&&(M=e(M,u),O=e(O,u),k=M.length,S=O.length),N=k,v=(g=O.slice(0,k)).length;v<k;)g[v++]=0;(C=M.slice()).unshift(0),_=M[0],M[1]>=p/2&&++_;do{u=0,(l=t(M,g,k,v))<0?(b=g[0],k!=v&&(b=b*p+(g[1]||0)),(u=b/_|0)>1?(u>=p&&(u=p-1),1==(l=t(m=e(M,u),g,h=m.length,v=g.length))&&(u--,a(m,k<h?C:M,h))):(0==u&&(l=u=1),m=M.slice()),(h=m.length)<v&&m.unshift(0),a(g,m,v),-1==l&&(l=t(M,g,k,v=g.length))<1&&(u++,a(g,k<v?C:M,v)),v=g.length):0===l&&(u++,g=[0]),f[d++]=u,l&&g[0]?g[v++]=O[N]||0:(g=[O[N]],v=1)}while((N++<S||void 0!==g[0])&&y--)}return f[0]||f.shift(),x.e=c,E(x,i?r+w(x)+1:r)}}();function N(e,t){var a,s,r,i,o,c=0,u=0,h=e.constructor,p=h.precision;if(w(e)>16)throw Error(d+w(e));if(!e.s)return new h(n);for(null==t?(l=!1,o=p):o=t,i=new h(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(o+=Math.log(m(2,u))/Math.LN10*2+5|0,a=s=r=new h(n),h.precision=o;;){if(s=E(s.times(e),o),a=a.times(++c),y((i=r.plus(j(s,a,o))).d).slice(0,o)===y(r.d).slice(0,o)){for(;u--;)r=E(r.times(r),o);return h.precision=p,null==t?(l=!0,E(r,p)):r}r=i}}function w(e){for(var t=7*e.e,a=e.d[0];a>=10;a/=10)t++;return t}function S(e,t,a){if(t>e.LN10.sd())throw l=!0,a&&(e.precision=a),Error(o+"LN10 precision limit exceeded");return E(new e(e.LN10),t)}function _(e){for(var t="";e--;)t+="0";return t}function k(e,t){var a,s,r,i,c,d,u,m,h,p=1,x=e,f=x.d,g=x.constructor,v=g.precision;if(x.s<1)throw Error(o+(x.s?"NaN":"-Infinity"));if(x.eq(n))return new g(0);if(null==t?(l=!1,m=v):m=t,x.eq(10))return null==t&&(l=!0),S(g,m);if(m+=10,g.precision=m,s=(a=y(f)).charAt(0),i=w(x),!(Math.abs(i)<15e14))return u=S(g,m+2,v).times(i+""),x=k(new g(s+"."+a.slice(1)),m-10).plus(u),g.precision=v,null==t?(l=!0,E(x,v)):x;for(;s<7&&1!=s||1==s&&a.charAt(1)>3;)s=(a=y((x=x.times(e)).d)).charAt(0),p++;for(i=w(x),s>1?(x=new g("0."+a),i++):x=new g(s+"."+a.slice(1)),d=c=x=j(x.minus(n),x.plus(n),m),h=E(x.times(x),m),r=3;;){if(c=E(c.times(h),m),y((u=d.plus(j(c,new g(r),m))).d).slice(0,m)===y(d.d).slice(0,m))return d=d.times(2),0!==i&&(d=d.plus(S(g,m+2,v).times(i+""))),d=j(d,new g(p),m),g.precision=v,null==t?(l=!0,E(d,v)):d;d=u,r+=2}}function C(e,t){var a,s,n;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;48===t.charCodeAt(s);)++s;for(n=t.length;48===t.charCodeAt(n-1);)--n;if(t=t.slice(s,n)){if(n-=s,a=a-s-1,e.e=u(a/7),e.d=[],s=(a+1)%7,a<0&&(s+=7),s<n){for(s&&e.d.push(+t.slice(0,s)),n-=7;s<n;)e.d.push(+t.slice(s,s+=7));s=7-(t=t.slice(s)).length}else s-=n;for(;s--;)t+="0";if(e.d.push(+t),l&&(e.e>f||e.e<-f))throw Error(d+a)}else e.s=0,e.e=0,e.d=[0];return e}function E(e,t,a){var s,n,r,i,o,c,h,x,g=e.d;for(i=1,r=g[0];r>=10;r/=10)i++;if((s=t-i)<0)s+=7,n=t,h=g[x=0];else{if((x=Math.ceil((s+1)/7))>=(r=g.length))return e;for(h=r=g[x],i=1;r>=10;r/=10)i++;n=(s%=7)-7+i}if(void 0!==a&&(o=h/(r=m(10,i-n-1))%10|0,c=t<0||void 0!==g[x+1]||h%r,c=a<4?(o||c)&&(0==a||a==(e.s<0?3:2)):o>5||5==o&&(4==a||c||6==a&&(s>0?n>0?h/m(10,i-n):0:g[x-1])%10&1||a==(e.s<0?8:7))),t<1||!g[0])return c?(r=w(e),g.length=1,t=t-r-1,g[0]=m(10,(7-t%7)%7),e.e=u(-t/7)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(0==s?(g.length=x,r=1,x--):(g.length=x+1,r=m(10,7-s),g[x]=n>0?(h/m(10,i-n)%m(10,n)|0)*r:0),c)for(;;){if(0==x){(g[0]+=r)==p&&(g[0]=1,++e.e);break}if(g[x]+=r,g[x]!=p)break;g[x--]=0,r=1}for(s=g.length;0===g[--s];)g.pop();if(l&&(e.e>f||e.e<-f))throw Error(d+w(e));return e}function A(e,t){var a,s,n,r,i,o,c,d,u,m,h=e.constructor,x=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),l?E(t,x):t;if(c=e.d,m=t.d,s=t.e,d=e.e,c=c.slice(),i=d-s){for((u=i<0)?(a=c,i=-i,o=m.length):(a=m,s=d,o=c.length),i>(n=Math.max(Math.ceil(x/7),o)+2)&&(i=n,a.length=1),a.reverse(),n=i;n--;)a.push(0);a.reverse()}else{for((u=(n=c.length)<(o=m.length))&&(o=n),n=0;n<o;n++)if(c[n]!=m[n]){u=c[n]<m[n];break}i=0}for(u&&(a=c,c=m,m=a,t.s=-t.s),o=c.length,n=m.length-o;n>0;--n)c[o++]=0;for(n=m.length;n>i;){if(c[--n]<m[n]){for(r=n;r&&0===c[--r];)c[r]=p-1;--c[r],c[n]+=p}c[n]-=m[n]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--s;return c[0]?(t.d=c,t.e=s,l?E(t,x):t):new h(0)}function P(e,t,a){var s,n=w(e),r=y(e.d),i=r.length;return t?(a&&(s=a-i)>0?r=r.charAt(0)+"."+r.slice(1)+_(s):i>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(n<0?"e":"e+")+n):n<0?(r="0."+_(-n-1)+r,a&&(s=a-i)>0&&(r+=_(s))):n>=i?(r+=_(n+1-i),a&&(s=a-n-1)>0&&(r=r+"."+_(s))):((s=n+1)<i&&(r=r.slice(0,s)+"."+r.slice(s)),a&&(s=a-i)>0&&(n+1===i&&(r+="."),r+=_(s))),e.s<0?"-"+r:r}function O(e,t){if(e.length>t)return e.length=t,!0}function M(e){if(!e||"object"!==typeof e)throw Error(o+"Object expected");var t,a,s,n=["precision",1,r,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if(void 0!==(s=e[a=n[t]])){if(!(u(s)===s&&s>=n[t+1]&&s<=n[t+2]))throw Error(c+a+": "+s);this[a]=s}if(void 0!==(s=e[a="LN10"])){if(s!=Math.LN10)throw Error(c+a+": "+s);this[a]=new this(s)}return this}i=function e(t){var a,s,n;function r(e){var t=this;if(!(t instanceof r))return new r(e);if(t.constructor=r,e instanceof r)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!h.test(e))throw Error(c+e);C(t,e)}if(r.prototype=g,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=e,r.config=r.set=M,void 0===t&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],a=0;a<n.length;)t.hasOwnProperty(s=n[a++])||(t[s]=this[s]);return r.config(t),r}(i),i.default=i.Decimal=i,n=new i(1),void 0===(s=function(){return i}.call(t,a,t,e))||(e.exports=s)}()},4879(e,t,a){e.exports=a(8146).get},2540(e,t,a){e.exports=a(3177).isPlainObject},6667(e,t,a){e.exports=a(6928).last},8354(e,t,a){e.exports=a(7774).range},830(e,t,a){e.exports=a(5497).sortBy},6135(e,t,a){e.exports=a(6633).throttle},2239(e,t,a){e.exports=a(7384).uniqBy},3900(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isEqualsSameValueZero=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},4195(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},8897(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a=[],s=Math.floor(t),n=(e,t)=>{for(let r=0;r<e.length;r++){const i=e[r];Array.isArray(i)&&t<s?n(i,t+1):a.push(i)}};return n(e,0),a}},1047(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},11(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const a=new Map;for(let s=0;s<e.length;s++){const n=e[s],r=t(n,s,e);a.has(r)||a.set(r,n)}return Array.from(a.values())}},5698(e,t){"use strict";function a(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,s)=>{if(e!==t){const n=a(e),r=a(t);if(n===r&&0===n){if(e<t)return"desc"===s?1:-1;if(e>t)return"desc"===s?-1:1}return"desc"===s?r-n:n-r}return 0}},9190(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},9223(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},1098(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},7431(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return a.test(e)}}},2718(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(7431),n=a(7740),r=a(3539),i=a(3900);t.isIterateeCall=function(e,t,a){return!!r.isObject(a)&&(!!("number"===typeof t&&n.isArrayLike(a)&&s.isIndex(t)&&t<a.length||"string"===typeof t&&t in a)&&i.isEqualsSameValueZero(a[t],e))}},9696(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(7108),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!s.isSymbol(e))||("string"===typeof e&&(r.test(e)||!n.test(e))||null!=t&&Object.hasOwn(t,e)))}},3470(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},225(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},1083(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},6928(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(1047),n=a(225),r=a(7740);t.last=function(e){if(r.isArrayLike(e))return s.last(n.toArray(e))}},9363(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(5698),n=a(9696),r=a(5031);t.orderBy=function(e,t,a,i){if(null==e)return[];a=i?void 0:a,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(a)||(a=null==a?[]:[a]),a=a.map(e=>String(e));const l=(e,t)=>{let a=e;for(let s=0;s<t.length&&null!=a;++s)a=a[t[s]];return a},o=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||n.isKey(e)?e:{key:e,path:r.toPath(e)}));return e.map(e=>({original:e,criteria:o.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:l(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?l(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let n=0;n<o.length;n++){const r=s.compareValues(e.criteria[n],t.criteria[n],a[n]);if(0!==r)return r}return 0}).map(e=>e.original)}},5497(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(9363),n=a(8897),r=a(2718);t.sortBy=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];const l=a.length;return l>1&&r.isIterateeCall(e,a[0],a[1])?a=[]:l>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),s.orderBy(e,n.flatten(a),["asc"])}},7384(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(11),n=a(6192),r=a(1810),i=a(3787),l=a(1640);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.identity;return i.isArrayLikeObject(e)?s.uniqBy(Array.from(e),n.ary(l.iteratee(t),1)):[]}},2742(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(6907);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof a&&(a={});const{leading:n=!1,trailing:r=!0,maxWait:i}=a,l=Array(2);let o;n&&(l[0]="leading"),r&&(l[1]="trailing");let c=null;const d=s.debounce(function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];o=e.apply(this,a),c=null},t,{edges:l}),u=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return null!=i&&(null===c&&(c=Date.now()),Date.now()-c>=i)?(o=e.apply(this,a),c=Date.now(),d.cancel(),d.schedule(),o):(d.apply(this,a),o)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),o),u}},6633(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(2742);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:n=!0,trailing:r=!0}=a;return s.debounce(e,t,{leading:n,maxWait:t,trailing:r})}},7774(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(2718),n=a(6567);t.range=function(e,t,a){a&&"number"!==typeof a&&s.isIterateeCall(e,t,a)&&(t=a=void 0),e=n.toFinite(e),void 0===t?(t=e,e=0):t=n.toFinite(t),a=void 0===a?e<t?1:-1:n.toFinite(a);const r=Math.max(Math.ceil((t-e)/(a||1)),0),i=new Array(r);for(let s=0;s<r;s++)i[s]=e,e+=a;return i}},5573(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(6537);t.cloneDeep=function(e){return s.cloneDeepWith(e)}},6537(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(9690),n=a(9223),r=a(3470);t.cloneDeepWith=function(e,t){return s.cloneDeepWith(e,(a,i,l,o)=>{const c=null===t||void 0===t?void 0:t(a,i,l,o);if(void 0!==c)return c;if("object"===typeof e){if(n.getTag(e)===r.objectTag&&"function"!==typeof e.constructor){const t={};return o.set(e,t),s.copyProperties(t,e,l,o),t}switch(Object.prototype.toString.call(e)){case r.numberTag:case r.stringTag:case r.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return s.copyProperties(t,e),t}case r.argumentsTag:{const t={};return s.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}})}},8146(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(4195),n=a(1098),r=a(1083),i=a(5031);t.get=function e(t,a,l){if(null==t)return l;switch(typeof a){case"string":{if(s.isUnsafeProperty(a))return l;const r=t[a];return void 0===r?n.isDeepKey(a)?e(t,i.toPath(a),l):l:r}case"number":case"symbol":{"number"===typeof a&&(a=r.toKey(a));const e=t[a];return void 0===e?l:e}default:{var o;if(Array.isArray(a))return function(e,t,a){if(0===t.length)return a;let n=e;for(let r=0;r<t.length;r++){if(null==n)return a;if(s.isUnsafeProperty(t[r]))return a;n=n[t[r]]}if(void 0===n)return a;return n}(t,a,l);if(a=Object.is(null===(o=a)||void 0===o?void 0:o.valueOf(),-0)?"-0":String(a),s.isUnsafeProperty(a))return l;const e=t[a];return void 0===e?l:e}}}},5942(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(1098),n=a(7431),r=a(5230),i=a(5031);t.has=function(e,t){let a;if(a=Array.isArray(t)?t:"string"===typeof t&&s.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?i.toPath(t):[t],0===a.length)return!1;let l=e;for(let s=0;s<a.length;s++){const e=a[s];if(null==l||!Object.hasOwn(l,e)){if(!((Array.isArray(l)||r.isArguments(l))&&n.isIndex(e)&&e<l.length))return!1}l=l[e]}return!0}},5825(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(8146);t.property=function(e){return function(t){return s.get(t,e)}}},5230(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(9223);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===s.getTag(e)}},7740(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(1111);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&s.isLength(e.length)}},3787(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(7740),n=a(8316);t.isArrayLikeObject=function(e){return n.isObjectLike(e)&&s.isArrayLike(e)}},5399(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(1311);t.isMatch=function(e,t){return s.isMatchWith(e,t,()=>{})}},1311(e,t,a){"use strict";var s=a(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=a(3539),r=a(1214),i=a(3900);function l(e,t,a,d){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,a,s){if(null==t)return!0;if(Array.isArray(t))return o(e,t,a,s);if(t instanceof Map)return function(e,t,a,s){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[n,r]of t.entries()){if(!1===a(e.get(n),r,n,e,t,s))return!1}return!0}(e,t,a,s);if(t instanceof Set)return c(e,t,a,s);const n=Object.keys(t);if(null==e||r.isPrimitive(e))return 0===n.length;if(0===n.length)return!0;if(null!==s&&void 0!==s&&s.has(t))return s.get(t)===e;null===s||void 0===s||s.set(t,e);try{for(let i=0;i<n.length;i++){const l=n[i];if(!r.isPrimitive(e)&&!(l in e))return!1;if(void 0===t[l]&&void 0!==e[l])return!1;if(null===t[l]&&null!==e[l])return!1;if(!a(e[l],t[l],l,e,t,s))return!1}return!0}finally{null===s||void 0===s||s.delete(t)}}(e,t,a,d);case"function":return Object.keys(t).length>0?l(e,s({},t),a,d):i.isEqualsSameValueZero(e,t);default:return n.isObject(e)?"string"!==typeof t||""===t:i.isEqualsSameValueZero(e,t)}}function o(e,t,a,s){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const n=new Set;for(let r=0;r<t.length;r++){const i=t[r];let l=!1;for(let o=0;o<e.length;o++){if(n.has(o))continue;let c=!1;if(a(e[o],i,r,e,t,s)&&(c=!0),c){n.add(o),l=!0;break}}if(!l)return!1}return!0}function c(e,t,a,s){return 0===t.size||e instanceof Set&&o([...e],[...t],a,s)}t.isMatchWith=function e(t,a,s){return"function"!==typeof s?e(t,a,()=>{}):l(t,a,function e(t,a,n,r,i,o){const c=s(t,a,n,r,i,o);return void 0!==c?Boolean(c):l(t,a,e,o)},new Map)},t.isSetMatch=c},3539(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},8316(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},3177(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const a=e[Symbol.toStringTag];if(null==a)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(a,"]")}let a=e;for(;null!==Object.getPrototypeOf(a);)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(e)===a}},7108(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},3679(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(5399),n=a(9358);t.matches=function(e){return e=n.cloneDeep(e),t=>s.isMatch(t,e)}},4090(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(5399),n=a(1083),r=a(5573),i=a(8146),l=a(5942);t.matchesProperty=function(e,t){switch(typeof e){case"object":var a;Object.is(null===(a=e)||void 0===a?void 0:a.valueOf(),-0)&&(e="-0");break;case"number":e=n.toKey(e)}return t=r.cloneDeep(t),function(a){const n=i.get(a,e);return void 0===n?l.has(a,e):void 0===t?void 0===n:s.isMatch(n,t)}}},1640(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(1810),n=a(5825),r=a(3679),i=a(4090);t.iteratee=function(e){if(null==e)return s.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?i.matchesProperty(e[0],e[1]):r.matches(e);case"string":case"symbol":case"number":return n.property(e)}}},6567(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(1921);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=s.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},1921(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(7108);t.toNumber=function(e){return s.isSymbol(e)?NaN:Number(e)}},5031(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(6301),n=a(1083);t.toPath=function(e){if(Array.isArray(e))return e.map(n.toKey);if("symbol"===typeof e)return[e];const t=[],a=(e=s.toString(e)).length;if(0===a)return t;let r=0,i="",l="",o=!1;for(46===e.charCodeAt(0)&&(t.push(""),r++);r<a;){const s=e[r];l?"\\"===s&&r+1<a?(r++,i+=e[r]):s===l?l="":i+=s:o?'"'===s||"'"===s?l=s:"]"===s?(o=!1,t.push(i),i=""):i+=s:"["===s?(o=!0,i&&(t.push(i),i="")):"."===s?i&&(t.push(i),i=""):i+=s,r++}return i&&t.push(i),t}},6301(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const a=String(t);return"0"===a&&Object.is(Number(t),-0)?"-0":a}},6192(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.ary=function(e,t){return function(){for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return e.apply(this,s.slice(0,t))}}},6907(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let a,{signal:s,edges:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null;const i=null!=n&&n.includes("leading"),l=null==n||n.includes("trailing"),o=()=>{null!==r&&(e.apply(a,r),a=void 0,r=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,l&&o(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),a=void 0,r=null},m=function(){if(null!==s&&void 0!==s&&s.aborted)return;a=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r=t;const l=null==c;d(),i&&l&&o()};return m.schedule=d,m.cancel=u,m.flush=()=>{o()},null===s||void 0===s||s.addEventListener("abort",u,{once:!0}),m}},1810(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9358(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(9690);t.cloneDeep=function(e){return s.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},9690(e,t,a){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const s=a(9190),n=a(9223),r=a(3470),i=a(1214),l=a(1558);function o(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u=null===d||void 0===d?void 0:d(e,t,a,s);if(void 0!==u)return u;if(i.isPrimitive(e))return e;if(s.has(e))return s.get(e);if(Array.isArray(e)){const t=new Array(e.length);s.set(e,t);for(let n=0;n<e.length;n++)t[n]=o(e[n],n,a,s,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;s.set(e,t);for(const[n,r]of e)t.set(n,o(r,n,a,s,d));return t}if(e instanceof Set){const t=new Set;s.set(e,t);for(const n of e)t.add(o(n,void 0,a,s,d));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(l.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);s.set(e,t);for(let n=0;n<e.length;n++)t[n]=o(e[n],n,a,s,d);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return s.set(e,t),c(t,e,a,s,d),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return s.set(e,t),c(t,e,a,s,d),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return s.set(e,t),c(t,e,a,s,d),t}if(e instanceof Error){const t=new e.constructor;return s.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,a,s,d),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return s.set(e,t),c(t,e,a,s,d),t}if(e instanceof Number){const t=new Number(e.valueOf());return s.set(e,t),c(t,e,a,s,d),t}if(e instanceof String){const t=new String(e.valueOf());return s.set(e,t),c(t,e,a,s,d),t}if("object"===typeof e&&function(e){switch(n.getTag(e)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return s.set(e,t),c(t,e,a,s,d),t}return e}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;const i=[...Object.keys(t),...s.getSymbols(t)];for(let s=0;s<i.length;s++){const l=i[s],c=Object.getOwnPropertyDescriptor(e,l);(null==c||c.writable)&&(e[l]=o(t[l],l,a,n,r))}}t.cloneDeepWith=function(e,t){return o(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=o,t.copyProperties=c},1111(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},1214(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},1558(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},5438(e){"use strict";var t=Object.prototype.hasOwnProperty,a="~";function s(){}function n(e,t,a){this.fn=e,this.context=t,this.once=a||!1}function r(e,t,s,r,i){if("function"!==typeof s)throw new TypeError("The listener must be a function");var l=new n(s,r||e,i),o=a?a+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],l]:e._events[o].push(l):(e._events[o]=l,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function l(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(a=!1)),l.prototype.eventNames=function(){var e,s,n=[];if(0===this._eventsCount)return n;for(s in e=this._events)t.call(e,s)&&n.push(a?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=a?a+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,r=s.length,i=new Array(r);n<r;n++)i[n]=s[n].fn;return i},l.prototype.listenerCount=function(e){var t=a?a+e:e,s=this._events[t];return s?s.fn?1:s.length:0},l.prototype.emit=function(e,t,s,n,r,i){var l=a?a+e:e;if(!this._events[l])return!1;var o,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,s),!0;case 4:return d.fn.call(d.context,t,s,n),!0;case 5:return d.fn.call(d.context,t,s,n,r),!0;case 6:return d.fn.call(d.context,t,s,n,r,i),!0}for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];d.fn.apply(d.context,o)}else{var m,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,s);break;case 4:d[c].fn.call(d[c].context,t,s,n);break;default:if(!o)for(m=1,o=new Array(u-1);m<u;m++)o[m-1]=arguments[m];d[c].fn.apply(d[c].context,o)}}return!0},l.prototype.on=function(e,t,a){return r(this,e,t,a,!1)},l.prototype.once=function(e,t,a){return r(this,e,t,a,!0)},l.prototype.removeListener=function(e,t,s,n){var r=a?a+e:e;if(!this._events[r])return this;if(!t)return i(this,r),this;var l=this._events[r];if(l.fn)l.fn!==t||n&&!l.once||s&&l.context!==s||i(this,r);else{for(var o=0,c=[],d=l.length;o<d;o++)(l[o].fn!==t||n&&!l[o].once||s&&l[o].context!==s)&&c.push(l[o]);c.length?this._events[r]=1===c.length?c[0]:c:i(this,r)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&i(this,t)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l},1085(e,t,a){"use strict";var s=a(5340),n=a(9950),r=a(7119);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(i(188))}function m(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=m(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),j=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case j:return e.displayName||"Context";case y:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return M(e(t))}catch(a){}}return null}var T=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},L=[],F=-1;function z(e){return{current:e}}function B(e){0>F||(e.current=L[F],L[F]=null,F--)}function U(e,t){F++,L[F]=e.current,e.current=t}var H,q,V=z(null),W=z(null),G=z(null),K=z(null);function Y(e,t){switch(U(G,t),U(W,e),U(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vu(t=gu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(V),U(V,e)}function J(){B(V),B(W),B(G)}function $(e){null!==e.memoizedState&&U(K,e);var t=V.current,a=vu(t,e.type);t!==a&&(U(W,e),U(V,a))}function Q(e){W.current===e&&(B(V),B(W)),K.current===e&&(B(K),dm._currentValue=R)}function X(e){if(void 0===H)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",q=-1<a.stack.indexOf("\n    at")?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+q}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(n){var s=n}Reflect.construct(e,[],a)}else{try{a.call()}catch(r){s=r}e.call(a.prototype)}}else{try{throw Error()}catch(i){s=i}(a=e())&&"function"===typeof a.catch&&a.catch(function(){})}}catch(l){if(l&&s&&"string"===typeof l.stack)return[l.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),i=r[0],l=r[1];if(i&&l){var o=i.split("\n"),c=l.split("\n");for(n=s=0;s<o.length&&!o[s].includes("DetermineComponentFrameRoot");)s++;for(;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;if(s===o.length||n===c.length)for(s=o.length-1,n=c.length-1;1<=s&&0<=n&&o[s]!==c[n];)n--;for(;1<=s&&0<=n;s--,n--)if(o[s]!==c[n]){if(1!==s||1!==n)do{if(s--,0>--n||o[s]!==c[n]){var d="\n"+o[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=s&&0<=n);break}}}finally{Z=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?X(a):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ae(e){try{var t="",a=null;do{t+=te(e,a),a=e,e=e.return}while(e);return t}catch(s){return"\nError generating stack: "+s.message+"\n"+s.stack}}var se=Object.prototype.hasOwnProperty,ne=s.unstable_scheduleCallback,re=s.unstable_cancelCallback,ie=s.unstable_shouldYield,le=s.unstable_requestPaint,oe=s.unstable_now,ce=s.unstable_getCurrentPriorityLevel,de=s.unstable_ImmediatePriority,ue=s.unstable_UserBlockingPriority,me=s.unstable_NormalPriority,he=s.unstable_LowPriority,pe=s.unstable_IdlePriority,xe=s.log,fe=s.unstable_setDisableYieldValue,ge=null,ve=null;function be(e){if("function"===typeof xe&&fe(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ge,e)}catch(t){}}var ye=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(je(e)/Ne|0)|0},je=Math.log,Ne=Math.LN2;var we=256,Se=262144,_e=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,a){var s=e.pendingLanes;if(0===s)return 0;var n=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=134217727&s;return 0!==l?0!==(s=l&~r)?n=ke(s):0!==(i&=l)?n=ke(i):a||0!==(a=l&~e)&&(n=ke(a)):0!==(l=s&~r)?n=ke(l):0!==i?n=ke(i):a||0!==(a=s&~e)&&(n=ke(a)),0===n?0:0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(a=t&-t)||32===r&&0!==(4194048&a))?t:n}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=_e;return 0===(62914560&(_e<<=1))&&(_e=4194304),e}function Oe(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-ye(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|261930&a}function De(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-ye(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function Ie(e,t){var a=t&-t;return 0!==((a=0!==(42&a)?1:Re(a))&(e.suspendedLanes|t))?0:a}function Re(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:km(e.type)}function ze(e,t){var a=I.p;try{return I.p=e,t()}finally{I.p=a}}var Be=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Be,He="__reactProps$"+Be,qe="__reactContainer$"+Be,Ve="__reactEvents$"+Be,We="__reactListeners$"+Be,Ge="__reactHandles$"+Be,Ke="__reactResources$"+Be,Ye="__reactMarker$"+Be;function Je(e){delete e[Ue],delete e[He],delete e[Ve],delete e[We],delete e[Ge]}function $e(e){var t=e[Ue];if(t)return t;for(var a=e.parentNode;a;){if(t=a[qe]||a[Ue]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=Ru(e);null!==e;){if(a=e[Ue])return a;e=Ru(e)}return t}a=(e=a).parentNode}return null}function Qe(e){if(e=e[Ue]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ze(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ye]=!0}var tt=new Set,at={};function st(e,t){nt(e,t),nt(e+"Capture",t)}function nt(e,t){for(at[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},lt={};function ot(e,t,a){if(n=t,se.call(lt,n)||!se.call(it,n)&&(rt.test(n)?lt[n]=!0:(it[n]=!0,0)))if(null===a)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var s=t.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void e.removeAttribute(t)}e.setAttribute(t,""+a)}var n}function ct(e,t,a){if(null===a)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+a)}}function dt(e,t,a,s){if(null===s)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(a)}e.setAttributeNS(t,a,""+s)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function mt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){if(!e._valueTracker){var t=mt(e)?"checked":"value";e._valueTracker=function(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=mt(e)?e.checked?"true":"false":e.value),(e=s)!==a&&(t.setValue(e),!0)}function xt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function gt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,a,s,n,r,i,l){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?yt(e,i,ut(t)):null!=a?yt(e,i,ut(a)):null!=s&&e.removeAttribute("value"),null==n&&null!=r&&(e.defaultChecked=!!r),null!=n&&(e.checked=n&&"function"!==typeof n&&"symbol"!==typeof n),null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.name=""+ut(l):e.removeAttribute("name")}function bt(e,t,a,s,n,r,i,l){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=a){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return void ht(e);a=null!=a?""+ut(a):"",t=null!=t?""+ut(t):a,l||t===e.value||(e.value=t),e.defaultValue=t}s="function"!==typeof(s=null!=s?s:n)&&"symbol"!==typeof s&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i),ht(e)}function yt(e,t,a){"number"===t&&xt(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function jt(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+ut(a),t=null,n=0;n<e.length;n++){if(e[n].value===a)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function Nt(e,t,a){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=a)?e.defaultValue=null!=a?""+ut(a):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,a,s){if(null==t){if(null!=s){if(null!=a)throw Error(i(92));if(T(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}null==a&&(a=""),t=a}a=ut(t),e.defaultValue=a,(s=e.textContent)===a&&""!==s&&null!==s&&(e.value=s),ht(e)}function St(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,a){var s=0===t.indexOf("--");null==a||"boolean"===typeof a||""===a?s?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":s?e.setProperty(t,a):"number"!==typeof a||0===a||_t.has(t)?"float"===t?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ct(e,t,a){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=a){for(var s in a)!a.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&kt(e,n,s)}else for(var r in t)t.hasOwnProperty(r)&&kt(e,r,t[r])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mt(){}var Tt=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Rt=null;function Lt(e){var t=Qe(e);if(t&&(e=t.stateNode)){var a=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[He]||null;if(!n)throw Error(i(90));vt(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)(s=a[t]).form===e.form&&pt(s)}break e;case"textarea":Nt(e,a.value,a.defaultValue);break e;case"select":null!=(t=a.value)&&jt(e,!!a.multiple,t,!1)}}}var Ft=!1;function zt(e,t,a){if(Ft)return e(t,a);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==It||null!==Rt)&&(Zc(),It&&(t=It,e=Rt,Rt=It=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Bt(e,t){var a=e.stateNode;if(null===a)return null;var s=a[He]||null;if(null===s)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(a&&"function"!==typeof a)throw Error(i(231,t,typeof a));return a}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ht=!1;if(Ut)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(Qm){Ht=!1}var Vt=null,Wt=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,a=Wt,s=a.length,n="value"in Vt?Vt.value:Vt.textContent,r=n.length;for(e=0;e<s&&a[e]===n[e];e++);var i=s-e;for(t=1;t<=i&&a[s-t]===n[r-t];t++);return Gt=n.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function $t(){return!1}function Qt(e){function t(t,a,s,n,r){for(var i in this._reactName=t,this._targetInst=s,this.type=a,this.nativeEvent=n,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Jt:$t,this.isPropagationStopped=$t,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Xt,Zt,ea,ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=Qt(ta),sa=h({},ta,{view:0,detail:0}),na=Qt(sa),ra=h({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ea&&(ea&&"mousemove"===e.type?(Xt=e.screenX-ea.screenX,Zt=e.screenY-ea.screenY):Zt=Xt=0,ea=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),ia=Qt(ra),la=Qt(h({},ra,{dataTransfer:0})),oa=Qt(h({},sa,{relatedTarget:0})),ca=Qt(h({},ta,{animationName:0,elapsedTime:0,pseudoElement:0})),da=Qt(h({},ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ua=Qt(h({},ta,{data:0})),ma={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xa(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pa[e])&&!!t[e]}function fa(){return xa}var ga=Qt(h({},sa,{key:function(e){if(e.key){var t=ma[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ha[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),va=Qt(h({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ba=Qt(h({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa})),ya=Qt(h({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0})),ja=Qt(h({},ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Na=Qt(h({},ta,{newState:0,oldState:0})),wa=[9,13,27,32],Sa=Ut&&"CompositionEvent"in window,_a=null;Ut&&"documentMode"in document&&(_a=document.documentMode);var ka=Ut&&"TextEvent"in window&&!_a,Ca=Ut&&(!Sa||_a&&8<_a&&11>=_a),Ea=String.fromCharCode(32),Aa=!1;function Pa(e,t){switch(e){case"keyup":return-1!==wa.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oa(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ma=!1;var Ta={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ta[e.type]:"textarea"===t}function Ia(e,t,a,s){It?Rt?Rt.push(s):Rt=[s]:It=s,0<(t=su(t,"onChange")).length&&(a=new aa("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Ra=null,La=null;function Fa(e){Jd(e,0)}function za(e){if(pt(Xe(e)))return e}function Ba(e,t){if("change"===e)return t}var Ua=!1;if(Ut){var Ha;if(Ut){var qa="oninput"in document;if(!qa){var Va=document.createElement("div");Va.setAttribute("oninput","return;"),qa="function"===typeof Va.oninput}Ha=qa}else Ha=!1;Ua=Ha&&(!document.documentMode||9<document.documentMode)}function Wa(){Ra&&(Ra.detachEvent("onpropertychange",Ga),La=Ra=null)}function Ga(e){if("value"===e.propertyName&&za(La)){var t=[];Ia(t,La,e,Dt(e)),zt(Fa,t)}}function Ka(e,t,a){"focusin"===e?(Wa(),La=a,(Ra=t).attachEvent("onpropertychange",Ga)):"focusout"===e&&Wa()}function Ya(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return za(La)}function Ja(e,t){if("click"===e)return za(t)}function $a(e,t){if("input"===e||"change"===e)return za(t)}var Qa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xa(e,t){if(Qa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!se.call(t,n)||!Qa(e[n],t[n]))return!1}return!0}function Za(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function es(e,t){var a,s=Za(e);for(e=0;s;){if(3===s.nodeType){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Za(s)}}function ts(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ts(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function as(e){for(var t=xt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var a="string"===typeof t.contentWindow.location.href}catch(s){a=!1}if(!a)break;t=xt((e=t.contentWindow).document)}return t}function ss(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ns=Ut&&"documentMode"in document&&11>=document.documentMode,rs=null,is=null,ls=null,os=!1;function cs(e,t,a){var s=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;os||null==rs||rs!==xt(s)||("selectionStart"in(s=rs)&&ss(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ls&&Xa(ls,s)||(ls=s,0<(s=su(is,"onSelect")).length&&(t=new aa("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=rs)))}function ds(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var us={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},ms={},hs={};function ps(e){if(ms[e])return ms[e];if(!us[e])return e;var t,a=us[e];for(t in a)if(a.hasOwnProperty(t)&&t in hs)return ms[e]=a[t];return e}Ut&&(hs=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);var xs=ps("animationend"),fs=ps("animationiteration"),gs=ps("animationstart"),vs=ps("transitionrun"),bs=ps("transitionstart"),ys=ps("transitioncancel"),js=ps("transitionend"),Ns=new Map,ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(e,t){Ns.set(e,t),st(t,[e])}ws.push("scrollEnd");var _s="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},ks=[],Cs=0,Es=0;function As(){for(var e=Cs,t=Es=Cs=0;t<e;){var a=ks[t];ks[t++]=null;var s=ks[t];ks[t++]=null;var n=ks[t];ks[t++]=null;var r=ks[t];if(ks[t++]=null,null!==s&&null!==n){var i=s.pending;null===i?n.next=n:(n.next=i.next,i.next=n),s.pending=n}0!==r&&Ts(a,n,r)}}function Ps(e,t,a,s){ks[Cs++]=e,ks[Cs++]=t,ks[Cs++]=a,ks[Cs++]=s,Es|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Os(e,t,a,s){return Ps(e,t,a,s),Ds(e)}function Ms(e,t){return Ps(e,null,null,t),Ds(e)}function Ts(e,t,a){e.lanes|=a;var s=e.alternate;null!==s&&(s.lanes|=a);for(var n=!1,r=e.return;null!==r;)r.childLanes|=a,null!==(s=r.alternate)&&(s.childLanes|=a),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(n=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,n&&null!==t&&(n=31-ye(a),null===(s=(e=r.hiddenUpdates)[n])?e[n]=[t]:s.push(t),t.lane=536870912|a),r):null}function Ds(e){if(50<Vc)throw Vc=0,Wc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Is={};function Rs(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(e,t,a,s){return new Rs(e,t,a,s)}function Fs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zs(e,t){var a=e.alternate;return null===a?((a=Ls(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=65011712&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Bs(e,t){e.flags&=65011714;var a=e.alternate;return null===a?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Us(e,t,a,s,n,r){var l=0;if(s=e,"function"===typeof e)Fs(e)&&(l=1);else if("string"===typeof e)l=function(e,t,a){if(1===a||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,a,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Ls(31,a,t,n)).elementType=C,e.lanes=r,e;case g:return Hs(a.children,n,r,t);case v:l=8,n|=24;break;case b:return(e=Ls(12,a,t,2|n)).elementType=b,e.lanes=r,e;case w:return(e=Ls(13,a,t,n)).elementType=w,e.lanes=r,e;case S:return(e=Ls(19,a,t,n)).elementType=S,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:l=10;break e;case y:l=9;break e;case N:l=11;break e;case _:l=14;break e;case k:l=16,s=null;break e}l=29,a=Error(i(130,null===e?"null":typeof e,"")),s=null}return(t=Ls(l,a,t,n)).elementType=e,t.type=s,t.lanes=r,t}function Hs(e,t,a,s){return(e=Ls(7,e,s,t)).lanes=a,e}function qs(e,t,a){return(e=Ls(6,e,null,t)).lanes=a,e}function Vs(e){var t=Ls(18,null,null,0);return t.stateNode=e,t}function Ws(e,t,a){return(t=Ls(4,null!==e.children?e.children:[],e.key,t)).lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gs=new WeakMap;function Ks(e,t){if("object"===typeof e&&null!==e){var a=Gs.get(e);return void 0!==a?a:(t={value:e,source:t,stack:ae(t)},Gs.set(e,t),t)}return{value:e,source:t,stack:ae(t)}}var Ys=[],Js=0,$s=null,Qs=0,Xs=[],Zs=0,en=null,tn=1,an="";function sn(e,t){Ys[Js++]=Qs,Ys[Js++]=$s,$s=e,Qs=t}function nn(e,t,a){Xs[Zs++]=tn,Xs[Zs++]=an,Xs[Zs++]=en,en=e;var s=tn;e=an;var n=32-ye(s)-1;s&=~(1<<n),a+=1;var r=32-ye(t)+n;if(30<r){var i=n-n%5;r=(s&(1<<i)-1).toString(32),s>>=i,n-=i,tn=1<<32-ye(t)+n|a<<n|s,an=r+e}else tn=1<<r|a<<n|s,an=e}function rn(e){null!==e.return&&(sn(e,1),nn(e,1,0))}function ln(e){for(;e===$s;)$s=Ys[--Js],Ys[Js]=null,Qs=Ys[--Js],Ys[Js]=null;for(;e===en;)en=Xs[--Zs],Xs[Zs]=null,an=Xs[--Zs],Xs[Zs]=null,tn=Xs[--Zs],Xs[Zs]=null}function on(e,t){Xs[Zs++]=tn,Xs[Zs++]=an,Xs[Zs++]=en,tn=t.id,an=t.overflow,en=e}var cn=null,dn=null,un=!1,mn=null,hn=!1,pn=Error(i(519));function xn(e){throw jn(Ks(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pn}function fn(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Ue]=e,t[He]=s,a){case"dialog":$d("cancel",t),$d("close",t);break;case"iframe":case"object":case"embed":$d("load",t);break;case"video":case"audio":for(a=0;a<Kd.length;a++)$d(Kd[a],t);break;case"source":$d("error",t);break;case"img":case"image":case"link":$d("error",t),$d("load",t);break;case"details":$d("toggle",t);break;case"input":$d("invalid",t),bt(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":$d("invalid",t);break;case"textarea":$d("invalid",t),wt(t,s.value,s.defaultValue,s.children)}"string"!==typeof(a=s.children)&&"number"!==typeof a&&"bigint"!==typeof a||t.textContent===""+a||!0===s.suppressHydrationWarning||cu(t.textContent,a)?(null!=s.popover&&($d("beforetoggle",t),$d("toggle",t)),null!=s.onScroll&&$d("scroll",t),null!=s.onScrollEnd&&$d("scrollend",t),null!=s.onClick&&(t.onclick=Mt),t=!0):t=!1,t||xn(e,!0)}function gn(e){for(cn=e.return;cn;)switch(cn.tag){case 5:case 31:case 13:return void(hn=!1);case 27:case 3:return void(hn=!0);default:cn=cn.return}}function vn(e){if(e!==cn)return!1;if(!un)return gn(e),un=!0,!1;var t,a=e.tag;if((t=3!==a&&27!==a)&&((t=5===a)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bu(e.type,e.memoizedProps)),t=!t),t&&dn&&xn(e),gn(e),13===a){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));dn=Iu(e)}else if(31===a){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));dn=Iu(e)}else 27===a?(a=dn,ku(e.type)?(e=Du,Du=null,dn=e):dn=a):dn=cn?Tu(e.stateNode.nextSibling):null;return!0}function bn(){dn=cn=null,un=!1}function yn(){var e=mn;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),mn=null),e}function jn(e){null===mn?mn=[e]:mn.push(e)}var Nn=z(null),wn=null,Sn=null;function _n(e,t,a){U(Nn,t._currentValue),t._currentValue=a}function kn(e){e._currentValue=Nn.current,B(Nn)}function Cn(e,t,a){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function En(e,t,a,s){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var r=n.dependencies;if(null!==r){var l=n.child;r=r.firstContext;e:for(;null!==r;){var o=r;r=n;for(var c=0;c<t.length;c++)if(o.context===t[c]){r.lanes|=a,null!==(o=r.alternate)&&(o.lanes|=a),Cn(r.return,a,e),s||(l=null);break e}r=o.next}}else if(18===n.tag){if(null===(l=n.return))throw Error(i(341));l.lanes|=a,null!==(r=l.alternate)&&(r.lanes|=a),Cn(l,a,e),l=null}else l=n.child;if(null!==l)l.return=n;else for(l=n;null!==l;){if(l===e){l=null;break}if(null!==(n=l.sibling)){n.return=l.return,l=n;break}l=l.return}n=l}}function An(e,t,a,s){e=null;for(var n=t,r=!1;null!==n;){if(!r)if(0!==(524288&n.flags))r=!0;else if(0!==(262144&n.flags))break;if(10===n.tag){var l=n.alternate;if(null===l)throw Error(i(387));if(null!==(l=l.memoizedProps)){var o=n.type;Qa(n.pendingProps.value,l.value)||(null!==e?e.push(o):e=[o])}}else if(n===K.current){if(null===(l=n.alternate))throw Error(i(387));l.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(dm):e=[dm])}n=n.return}null!==e&&En(t,e,a,s),t.flags|=262144}function Pn(e){for(e=e.firstContext;null!==e;){if(!Qa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function On(e){wn=e,Sn=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Mn(e){return Dn(wn,e)}function Tn(e,t){return null===wn&&On(e),Dn(e,t)}function Dn(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},null===Sn){if(null===e)throw Error(i(308));Sn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Sn=Sn.next=t;return a}var In="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Rn=s.unstable_scheduleCallback,Ln=s.unstable_NormalPriority,Fn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zn(){return{controller:new In,data:new Map,refCount:0}}function Bn(e){e.refCount--,0===e.refCount&&Rn(Ln,function(){e.controller.abort()})}var Un=null,Hn=0,qn=0,Vn=null;function Wn(){if(0===--Hn&&null!==Un){null!==Vn&&(Vn.status="fulfilled");var e=Un;Un=null,qn=0,Vn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gn=D.S;D.S=function(e,t){Tc=oe(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Un){var a=Un=[];Hn=0,qn=Hd(),Vn={status:"pending",value:void 0,then:function(e){a.push(e)}}}Hn++,t.then(Wn,Wn)}(0,t),null!==Gn&&Gn(e,t)};var Kn=z(null);function Yn(){var e=Kn.current;return null!==e?e:pc.pooledCache}function Jn(e,t){U(Kn,null===t?Kn.current:t.pool)}function $n(){var e=Yn();return null===e?null:{parent:Fn._currentValue,pool:e}}var Qn=Error(i(460)),Xn=Error(i(474)),Zn=Error(i(542)),er={then:function(){}};function tr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ar(e,t,a){switch(void 0===(a=e[a])?e.push(t):a!==t&&(t.then(Mt,Mt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw ir(e=t.reason),e;default:if("string"===typeof t.status)t.then(Mt,Mt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var a=t;a.status="fulfilled",a.value=e}},function(e){if("pending"===t.status){var a=t;a.status="rejected",a.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ir(e=t.reason),e}throw nr=t,Qn}}function sr(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw nr=t,Qn;throw t}}var nr=null;function rr(){if(null===nr)throw Error(i(459));var e=nr;return nr=null,e}function ir(e){if(e===Qn||e===Zn)throw Error(i(483))}var lr=null,or=0;function cr(e){var t=or;return or+=1,null===lr&&(lr=[]),ar(lr,e,t)}function dr(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ur(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mr(e){function t(t,a){if(e){var s=t.deletions;null===s?(t.deletions=[a],t.flags|=16):s.push(a)}}function a(a,s){if(!e)return null;for(;null!==s;)t(a,s),s=s.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=zs(e,t)).index=0,e.sibling=null,e}function r(t,a,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<a?(t.flags|=67108866,a):s:(t.flags|=67108866,a):(t.flags|=1048576,a)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,a,s){return null===t||6!==t.tag?((t=qs(a,e.mode,s)).return=e,t):((t=n(t,a)).return=e,t)}function c(e,t,a,s){var r=a.type;return r===g?u(e,t,a.props.children,s,a.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===k&&sr(r)===t.type)?(dr(t=n(t,a.props),a),t.return=e,t):(dr(t=Us(a.type,a.key,a.props,null,e.mode,s),a),t.return=e,t)}function d(e,t,a,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=Ws(a,e.mode,s)).return=e,t):((t=n(t,a.children||[])).return=e,t)}function u(e,t,a,s,r){return null===t||7!==t.tag?((t=Hs(a,e.mode,s,r)).return=e,t):((t=n(t,a)).return=e,t)}function m(e,t,a){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qs(""+t,e.mode,a)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return dr(a=Us(t.type,t.key,t.props,null,e.mode,a),t),a.return=e,a;case f:return(t=Ws(t,e.mode,a)).return=e,t;case k:return m(e,t=sr(t),a)}if(T(t)||P(t))return(t=Hs(t,e.mode,a,null)).return=e,t;if("function"===typeof t.then)return m(e,cr(t),a);if(t.$$typeof===j)return m(e,Tn(e,t),a);ur(e,t)}return null}function h(e,t,a,s){var n=null!==t?t.key:null;if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return null!==n?null:o(e,t,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case x:return a.key===n?c(e,t,a,s):null;case f:return a.key===n?d(e,t,a,s):null;case k:return h(e,t,a=sr(a),s)}if(T(a)||P(a))return null!==n?null:u(e,t,a,s,null);if("function"===typeof a.then)return h(e,t,cr(a),s);if(a.$$typeof===j)return h(e,t,Tn(e,a),s);ur(e,a)}return null}function p(e,t,a,s,n){if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return o(t,e=e.get(a)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case x:return c(t,e=e.get(null===s.key?a:s.key)||null,s,n);case f:return d(t,e=e.get(null===s.key?a:s.key)||null,s,n);case k:return p(e,t,a,s=sr(s),n)}if(T(s)||P(s))return u(t,e=e.get(a)||null,s,n,null);if("function"===typeof s.then)return p(e,t,a,cr(s),n);if(s.$$typeof===j)return p(e,t,a,Tn(t,s),n);ur(t,s)}return null}function v(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case x:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===g){if(7===c.tag){a(o,c.sibling),(u=n(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===k&&sr(b)===c.type){a(o,c.sibling),dr(u=n(c,d.props),d),u.return=o,o=u;break e}a(o,c);break}t(o,c),c=c.sibling}d.type===g?((u=Hs(d.props.children,o.mode,u,d.key)).return=o,o=u):(dr(u=Us(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return l(o);case f:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){a(o,c.sibling),(u=n(c,d.children||[])).return=o,o=u;break e}a(o,c);break}t(o,c),c=c.sibling}(u=Ws(d,o.mode,u)).return=o,o=u}return l(o);case k:return v(o,c,d=sr(d),u)}if(T(d))return function(n,i,l,o){for(var c=null,d=null,u=i,x=i=0,f=null;null!==u&&x<l.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=h(n,u,l[x],o);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(n,u),i=r(g,i,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===l.length)return a(n,u),un&&sn(n,x),c;if(null===u){for(;x<l.length;x++)null!==(u=m(n,l[x],o))&&(i=r(u,i,x),null===d?c=u:d.sibling=u,d=u);return un&&sn(n,x),c}for(u=s(u);x<l.length;x++)null!==(f=p(u,n,x,l[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),i=r(f,i,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(n,e)}),un&&sn(n,x),c}(o,c,d,u);if(P(d)){if("function"!==typeof(b=P(d)))throw Error(i(150));return function(n,l,o,c){if(null==o)throw Error(i(151));for(var d=null,u=null,x=l,f=l=0,g=null,v=o.next();null!==x&&!v.done;f++,v=o.next()){x.index>f?(g=x,x=null):g=x.sibling;var b=h(n,x,v.value,c);if(null===b){null===x&&(x=g);break}e&&x&&null===b.alternate&&t(n,x),l=r(b,l,f),null===u?d=b:u.sibling=b,u=b,x=g}if(v.done)return a(n,x),un&&sn(n,f),d;if(null===x){for(;!v.done;f++,v=o.next())null!==(v=m(n,v.value,c))&&(l=r(v,l,f),null===u?d=v:u.sibling=v,u=v);return un&&sn(n,f),d}for(x=s(x);!v.done;f++,v=o.next())null!==(v=p(x,n,f,v.value,c))&&(e&&null!==v.alternate&&x.delete(null===v.key?f:v.key),l=r(v,l,f),null===u?d=v:u.sibling=v,u=v);return e&&x.forEach(function(e){return t(n,e)}),un&&sn(n,f),d}(o,c,d=b.call(d),u)}if("function"===typeof d.then)return v(o,c,cr(d),u);if(d.$$typeof===j)return v(o,c,Tn(o,d),u);ur(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(a(o,c.sibling),(u=n(c,d)).return=o,o=u):(a(o,c),(u=qs(d,o.mode,u)).return=o,o=u),l(o)):a(o,c)}return function(e,t,a,s){try{or=0;var n=v(e,t,a,s);return lr=null,n}catch(i){if(i===Qn||i===Zn)throw i;var r=Ls(29,i,null,e.mode);return r.lanes=s,r.return=e,r}}}var hr=mr(!0),pr=mr(!1),xr=!1;function fr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function br(e,t,a){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&hc)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=Ds(e),Ts(e,null,a),t}return Ps(e,s,t,a),Ds(e)}function yr(e,t,a){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&a))){var s=t.lanes;a|=s&=e.pendingLanes,t.lanes=a,De(e,a)}}function jr(e,t){var a=e.updateQueue,s=e.alternate;if(null!==s&&a===(s=s.updateQueue)){var n=null,r=null;if(null!==(a=a.firstBaseUpdate)){do{var i={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};null===r?n=r=i:r=r.next=i,a=a.next}while(null!==a);null===r?n=r=t:r=r.next=t}else n=r=t;return a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=a)}null===(e=a.lastBaseUpdate)?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Nr=!1;function wr(){if(Nr){if(null!==Vn)throw Vn}}function Sr(e,t,a,s){Nr=!1;var n=e.updateQueue;xr=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(null!==l){n.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?r=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=n.baseState;for(i=0,d=c=o=null,l=r;;){var m=-536870913&l.lane,p=m!==l.lane;if(p?(fc&m)===m:(s&m)===m){0!==m&&m===qn&&(Nr=!0),null!==d&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var x=e,f=l;m=t;var g=a;switch(f.tag){case 1:if("function"===typeof(x=f.payload)){u=x.call(g,u,m);break e}u=x;break e;case 3:x.flags=-65537&x.flags|128;case 0:if(null===(m="function"===typeof(x=f.payload)?x.call(g,u,m):x)||void 0===m)break e;u=h({},u,m);break e;case 2:xr=!0}}null!==(m=l.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=n.callbacks)?n.callbacks=[m]:p.push(m))}else p={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=p,o=u):d=d.next=p,i|=m;if(null===(l=l.next)){if(null===(l=n.shared.pending))break;l=(p=l).next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}null===d&&(o=u),n.baseState=o,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null===r&&(n.shared.lanes=0),Sc|=i,e.lanes=i,e.memoizedState=u}}function _r(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function kr(e,t){var a=e.callbacks;if(null!==a)for(e.callbacks=null,e=0;e<a.length;e++)_r(a[e],t)}var Cr=z(null),Er=z(0);function Ar(e,t){U(Er,e=Nc),U(Cr,t),Nc=e|t.baseLanes}function Pr(){U(Er,Nc),U(Cr,Cr.current)}function Or(){Nc=Er.current,B(Cr),B(Er)}var Mr=z(null),Tr=null;function Dr(e){var t=e.alternate;U(zr,1&zr.current),U(Mr,e),null===Tr&&(null===t||null!==Cr.current||null!==t.memoizedState)&&(Tr=e)}function Ir(e){U(zr,zr.current),U(Mr,e),null===Tr&&(Tr=e)}function Rr(e){22===e.tag?(U(zr,zr.current),U(Mr,e),null===Tr&&(Tr=e)):Lr()}function Lr(){U(zr,zr.current),U(Mr,Mr.current)}function Fr(e){B(Mr),Tr===e&&(Tr=null),B(zr)}var zr=z(0);function Br(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||Ou(a)||Mu(a)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ur=0,Hr=null,qr=null,Vr=null,Wr=!1,Gr=!1,Kr=!1,Yr=0,Jr=0,$r=null,Qr=0;function Xr(){throw Error(i(321))}function Zr(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Qa(e[a],t[a]))return!1;return!0}function ei(e,t,a,s,n,r){return Ur=r,Hr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?xl:fl,Kr=!1,r=a(s,n),Kr=!1,Gr&&(r=ai(t,a,s,n)),ti(e),r}function ti(e){D.H=pl;var t=null!==qr&&null!==qr.next;if(Ur=0,Vr=qr=Hr=null,Wr=!1,Jr=0,$r=null,t)throw Error(i(300));null===e||Ml||null!==(e=e.dependencies)&&Pn(e)&&(Ml=!0)}function ai(e,t,a,s){Hr=e;var n=0;do{if(Gr&&($r=null),Jr=0,Gr=!1,25<=n)throw Error(i(301));if(n+=1,Vr=qr=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}D.H=gl,r=t(a,s)}while(Gr);return r}function si(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?ci(t):t,e=e.useState()[0],(null!==qr?qr.memoizedState:null)!==e&&(Hr.flags|=1024),t}function ni(){var e=0!==Yr;return Yr=0,e}function ri(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ii(e){if(Wr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wr=!1}Ur=0,Vr=qr=Hr=null,Gr=!1,Jr=Yr=0,$r=null}function li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vr?Hr.memoizedState=Vr=e:Vr=Vr.next=e,Vr}function oi(){if(null===qr){var e=Hr.alternate;e=null!==e?e.memoizedState:null}else e=qr.next;var t=null===Vr?Hr.memoizedState:Vr.next;if(null!==t)Vr=t,qr=e;else{if(null===e){if(null===Hr.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(qr=e).memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},null===Vr?Hr.memoizedState=Vr=e:Vr=Vr.next=e}return Vr}function ci(e){var t=Jr;return Jr+=1,null===$r&&($r=[]),e=ar($r,e,t),t=Hr,null===(null===Vr?t.memoizedState:Vr.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?xl:fl),e}function di(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ci(e);if(e.$$typeof===j)return Mn(e)}throw Error(i(438,String(e)))}function ui(e){var t=null,a=Hr.updateQueue;if(null!==a&&(t=a.memoCache),null==t){var s=Hr.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===a&&(a={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=a),a.memoCache=t,void 0===(a=t.data[t.index]))for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=E;return t.index++,a}function mi(e,t){return"function"===typeof t?t(e):t}function hi(e){return pi(oi(),qr,e)}function pi(e,t,a){var s=e.queue;if(null===s)throw Error(i(311));s.lastRenderedReducer=a;var n=e.baseQueue,r=s.pending;if(null!==r){if(null!==n){var l=n.next;n.next=r.next,r.next=l}t.baseQueue=n=r,s.pending=null}if(r=e.baseState,null===n)e.memoizedState=r;else{var o=l=null,c=null,d=t=n.next,u=!1;do{var m=-536870913&d.lane;if(m!==d.lane?(fc&m)===m:(Ur&m)===m){var h=d.revertLane;if(0===h)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===qn&&(u=!0);else{if((Ur&h)===h){d=d.next,h===qn&&(u=!0);continue}m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,l=r):c=c.next=m,Hr.lanes|=h,Sc|=h}m=d.action,Kr&&a(r,m),r=d.hasEagerState?d.eagerState:a(r,m)}else h={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=h,l=r):c=c.next=h,Hr.lanes|=m,Sc|=m;d=d.next}while(null!==d&&d!==t);if(null===c?l=r:c.next=o,!Qa(r,e.memoizedState)&&(Ml=!0,u&&null!==(a=Vn)))throw a;e.memoizedState=r,e.baseState=l,e.baseQueue=c,s.lastRenderedState=r}return null===n&&(s.lanes=0),[e.memoizedState,s.dispatch]}function xi(e){var t=oi(),a=t.queue;if(null===a)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,r=t.memoizedState;if(null!==n){a.pending=null;var l=n=n.next;do{r=e(r,l.action),l=l.next}while(l!==n);Qa(r,t.memoizedState)||(Ml=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),a.lastRenderedState=r}return[r,s]}function fi(e,t,a){var s=Hr,n=oi(),r=un;if(r){if(void 0===a)throw Error(i(407));a=a()}else a=t();var l=!Qa((qr||n).memoizedState,a);if(l&&(n.memoizedState=a,Ml=!0),n=n.queue,Ui(bi.bind(null,s,n,e),[e]),n.getSnapshot!==t||l||null!==Vr&&1&Vr.memoizedState.tag){if(s.flags|=2048,Ri(9,{destroy:void 0},vi.bind(null,s,n,a,t),null),null===pc)throw Error(i(349));r||0!==(127&Ur)||gi(s,t,a)}return a}function gi(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},null===(t=Hr.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=t,t.stores=[e]):null===(a=t.stores)?t.stores=[e]:a.push(e)}function vi(e,t,a,s){t.value=a,t.getSnapshot=s,yi(t)&&ji(e)}function bi(e,t,a){return a(function(){yi(t)&&ji(e)})}function yi(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Qa(e,a)}catch(s){return!0}}function ji(e){var t=Ms(e,2);null!==t&&Yc(t,e,2)}function Ni(e){var t=li();if("function"===typeof e){var a=e;if(e=a(),Kr){be(!0);try{a()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:e},t}function wi(e,t,a,s){return e.baseState=a,pi(e,qr,"function"===typeof s?s:mi)}function Si(e,t,a,s,n){if(ul(e))throw Error(i(485));if(null!==(e=t.action)){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==D.T?a(!0):r.isTransition=!1,s(r),null===(a=t.pending)?(r.next=t.pending=r,_i(t,r)):(r.next=a.next,t.pending=a.next=r)}}function _i(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var r=D.T,i={};D.T=i;try{var l=a(n,s),o=D.S;null!==o&&o(i,l),ki(e,t,l)}catch(c){Ei(e,t,c)}finally{null!==r&&null!==i.types&&(r.types=i.types),D.T=r}}else try{ki(e,t,r=a(n,s))}catch(d){Ei(e,t,d)}}function ki(e,t,a){null!==a&&"object"===typeof a&&"function"===typeof a.then?a.then(function(a){Ci(e,t,a)},function(a){return Ei(e,t,a)}):Ci(e,t,a)}function Ci(e,t,a){t.status="fulfilled",t.value=a,Ai(t),e.state=a,null!==(t=e.pending)&&((a=t.next)===t?e.pending=null:(a=a.next,t.next=a,_i(e,a)))}function Ei(e,t,a){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=a,Ai(t),t=t.next}while(t!==s)}e.action=null}function Ai(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pi(e,t){return t}function Oi(e,t){if(un){var a=pc.formState;if(null!==a){e:{var s=Hr;if(un){if(dn){t:{for(var n=dn,r=hn;8!==n.nodeType;){if(!r){n=null;break t}if(null===(n=Tu(n.nextSibling))){n=null;break t}}n="F!"===(r=n.data)||"F"===r?n:null}if(n){dn=Tu(n.nextSibling),s="F!"===n.data;break e}}xn(s)}s=!1}s&&(t=a[0])}}return(a=li()).memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:t},a.queue=s,a=ol.bind(null,Hr,s),s.dispatch=a,s=Ni(!1),r=dl.bind(null,Hr,!1,s.queue),n={state:t,dispatch:null,action:e,pending:null},(s=li()).queue=n,a=Si.bind(null,Hr,n,r,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function Mi(e){return Ti(oi(),qr,e)}function Ti(e,t,a){if(t=pi(e,t,Pi)[0],e=hi(mi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var s=ci(t)}catch(i){if(i===Qn)throw Zn;throw i}else s=t;var n=(t=oi()).queue,r=n.dispatch;return a!==t.memoizedState&&(Hr.flags|=2048,Ri(9,{destroy:void 0},Di.bind(null,n,a),null)),[s,r,e]}function Di(e,t){e.action=t}function Ii(e){var t=oi(),a=qr;if(null!==a)return Ti(t,a,e);oi(),t=t.memoizedState;var s=(a=oi()).queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ri(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},null===(t=Hr.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=t),null===(a=t.lastEffect)?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Li(){return oi().memoizedState}function Fi(e,t,a,s){var n=li();Hr.flags|=e,n.memoizedState=Ri(1|t,{destroy:void 0},a,void 0===s?null:s)}function zi(e,t,a,s){var n=oi();s=void 0===s?null:s;var r=n.memoizedState.inst;null!==qr&&null!==s&&Zr(s,qr.memoizedState.deps)?n.memoizedState=Ri(t,r,a,s):(Hr.flags|=e,n.memoizedState=Ri(1|t,r,a,s))}function Bi(e,t){Fi(8390656,8,e,t)}function Ui(e,t){zi(2048,8,e,t)}function Hi(e){var t=oi().memoizedState;return function(e){Hr.flags|=4;var t=Hr.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Hr.updateQueue=t,t.events=[e];else{var a=t.events;null===a?t.events=[e]:a.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&hc))throw Error(i(440));return t.impl.apply(void 0,arguments)}}function qi(e,t){return zi(4,2,e,t)}function Vi(e,t){return zi(4,4,e,t)}function Wi(e,t){if("function"===typeof t){e=e();var a=t(e);return function(){"function"===typeof a?a():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Gi(e,t,a){a=null!==a&&void 0!==a?a.concat([e]):null,zi(4,4,Wi.bind(null,t,e),a)}function Ki(){}function Yi(e,t){var a=oi();t=void 0===t?null:t;var s=a.memoizedState;return null!==t&&Zr(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Ji(e,t){var a=oi();t=void 0===t?null:t;var s=a.memoizedState;if(null!==t&&Zr(t,s[1]))return s[0];if(s=e(),Kr){be(!0);try{e()}finally{be(!1)}}return a.memoizedState=[s,t],s}function $i(e,t,a){return void 0===a||0!==(1073741824&Ur)&&0===(261930&fc)?e.memoizedState=t:(e.memoizedState=a,e=Kc(),Hr.lanes|=e,Sc|=e,a)}function Qi(e,t,a,s){return Qa(a,t)?a:null!==Cr.current?(e=$i(e,a,s),Qa(e,t)||(Ml=!0),e):0===(42&Ur)||0!==(1073741824&Ur)&&0===(261930&fc)?(Ml=!0,e.memoizedState=a):(e=Kc(),Hr.lanes|=e,Sc|=e,t)}function Xi(e,t,a,s,n){var r=I.p;I.p=0!==r&&8>r?r:8;var i=D.T,l={};D.T=l,dl(e,!1,t,a);try{var o=n(),c=D.S;if(null!==c&&c(l,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)cl(e,t,function(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(e){a.push(e)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var e=0;e<a.length;e++)(0,a[e])(t)},function(e){for(s.status="rejected",s.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),s}(o,s),Gc());else cl(e,t,s,Gc())}catch(d){cl(e,t,{then:function(){},status:"rejected",reason:d},Gc())}finally{I.p=r,null!==i&&null!==l.types&&(i.types=l.types),D.T=i}}function Zi(){}function el(e,t,a,s){if(5!==e.tag)throw Error(i(476));var n=tl(e).queue;Xi(e,n,t,R,null===a?Zi:function(){return al(e),a(s)})}function tl(e){var t=e.memoizedState;if(null!==t)return t;var a={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:R},next:null}).next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:a},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function al(e){var t=tl(e);null===t.next&&(t=e.alternate.memoizedState),cl(e,t.next.queue,{},Gc())}function sl(){return Mn(dm)}function nl(){return oi().memoizedState}function rl(){return oi().memoizedState}function il(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var a=Gc(),s=br(t,e=vr(a),a);return null!==s&&(Yc(s,t,a),yr(s,t,a)),t={cache:zn()},void(e.payload=t)}t=t.return}}function ll(e,t,a){var s=Gc();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ul(e)?ml(t,a):null!==(a=Os(e,t,a,s))&&(Yc(a,e,s),hl(a,t,s))}function ol(e,t,a){cl(e,t,a,Gc())}function cl(e,t,a,s){var n={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ul(e))ml(t,n);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=r(i,a);if(n.hasEagerState=!0,n.eagerState=l,Qa(l,i))return Ps(e,t,n,0),null===pc&&As(),!1}catch(o){}if(null!==(a=Os(e,t,n,s)))return Yc(a,e,s),hl(a,t,s),!0}return!1}function dl(e,t,a,s){if(s={lane:2,revertLane:Hd(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ul(e)){if(t)throw Error(i(479))}else null!==(t=Os(e,a,s,2))&&Yc(t,e,2)}function ul(e){var t=e.alternate;return e===Hr||null!==t&&t===Hr}function ml(e,t){Gr=Wr=!0;var a=e.pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function hl(e,t,a){if(0!==(4194048&a)){var s=t.lanes;a|=s&=e.pendingLanes,t.lanes=a,De(e,a)}}var pl={readContext:Mn,use:di,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useLayoutEffect:Xr,useInsertionEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useSyncExternalStore:Xr,useId:Xr,useHostTransitionStatus:Xr,useFormState:Xr,useActionState:Xr,useOptimistic:Xr,useMemoCache:Xr,useCacheRefresh:Xr};pl.useEffectEvent=Xr;var xl={readContext:Mn,use:di,useCallback:function(e,t){return li().memoizedState=[e,void 0===t?null:t],e},useContext:Mn,useEffect:Bi,useImperativeHandle:function(e,t,a){a=null!==a&&void 0!==a?a.concat([e]):null,Fi(4194308,4,Wi.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Fi(4194308,4,e,t)},useInsertionEffect:function(e,t){Fi(4,2,e,t)},useMemo:function(e,t){var a=li();t=void 0===t?null:t;var s=e();if(Kr){be(!0);try{e()}finally{be(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=li();if(void 0!==a){var n=a(t);if(Kr){be(!0);try{a(t)}finally{be(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=ll.bind(null,Hr,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},li().memoizedState=e},useState:function(e){var t=(e=Ni(e)).queue,a=ol.bind(null,Hr,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Ki,useDeferredValue:function(e,t){return $i(li(),e,t)},useTransition:function(){var e=Ni(!1);return e=Xi.bind(null,Hr,e.queue,!0,!1),li().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=Hr,n=li();if(un){if(void 0===a)throw Error(i(407));a=a()}else{if(a=t(),null===pc)throw Error(i(349));0!==(127&fc)||gi(s,t,a)}n.memoizedState=a;var r={value:a,getSnapshot:t};return n.queue=r,Bi(bi.bind(null,s,r,e),[e]),s.flags|=2048,Ri(9,{destroy:void 0},vi.bind(null,s,r,a,t),null),a},useId:function(){var e=li(),t=pc.identifierPrefix;if(un){var a=an;t="_"+t+"R_"+(a=(tn&~(1<<32-ye(tn)-1)).toString(32)+a),0<(a=Yr++)&&(t+="H"+a.toString(32)),t+="_"}else t="_"+t+"r_"+(a=Qr++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:sl,useFormState:Oi,useActionState:Oi,useOptimistic:function(e){var t=li();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=dl.bind(null,Hr,!0,a),a.dispatch=t,[e,t]},useMemoCache:ui,useCacheRefresh:function(){return li().memoizedState=il.bind(null,Hr)},useEffectEvent:function(e){var t=li(),a={impl:e};return t.memoizedState=a,function(){if(0!==(2&hc))throw Error(i(440));return a.impl.apply(void 0,arguments)}}},fl={readContext:Mn,use:di,useCallback:Yi,useContext:Mn,useEffect:Ui,useImperativeHandle:Gi,useInsertionEffect:qi,useLayoutEffect:Vi,useMemo:Ji,useReducer:hi,useRef:Li,useState:function(){return hi(mi)},useDebugValue:Ki,useDeferredValue:function(e,t){return Qi(oi(),qr.memoizedState,e,t)},useTransition:function(){var e=hi(mi)[0],t=oi().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:fi,useId:nl,useHostTransitionStatus:sl,useFormState:Mi,useActionState:Mi,useOptimistic:function(e,t){return wi(oi(),0,e,t)},useMemoCache:ui,useCacheRefresh:rl};fl.useEffectEvent=Hi;var gl={readContext:Mn,use:di,useCallback:Yi,useContext:Mn,useEffect:Ui,useImperativeHandle:Gi,useInsertionEffect:qi,useLayoutEffect:Vi,useMemo:Ji,useReducer:xi,useRef:Li,useState:function(){return xi(mi)},useDebugValue:Ki,useDeferredValue:function(e,t){var a=oi();return null===qr?$i(a,e,t):Qi(a,qr.memoizedState,e,t)},useTransition:function(){var e=xi(mi)[0],t=oi().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:fi,useId:nl,useHostTransitionStatus:sl,useFormState:Ii,useActionState:Ii,useOptimistic:function(e,t){var a=oi();return null!==qr?wi(a,0,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ui,useCacheRefresh:rl};function vl(e,t,a,s){a=null===(a=a(s,t=e.memoizedState))||void 0===a?t:h({},t,a),e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}gl.useEffectEvent=Hi;var bl={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Gc(),n=vr(s);n.payload=t,void 0!==a&&null!==a&&(n.callback=a),null!==(t=br(e,n,s))&&(Yc(t,e,s),yr(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Gc(),n=vr(s);n.tag=1,n.payload=t,void 0!==a&&null!==a&&(n.callback=a),null!==(t=br(e,n,s))&&(Yc(t,e,s),yr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Gc(),s=vr(a);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=br(e,s,a))&&(Yc(t,e,a),yr(t,e,a))}};function yl(e,t,a,s,n,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!Xa(a,s)||!Xa(n,r))}function jl(e,t,a,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&bl.enqueueReplaceState(t,t.state,null)}function Nl(e,t){var a=t;if("ref"in t)for(var s in a={},t)"ref"!==s&&(a[s]=t[s]);if(e=e.defaultProps)for(var n in a===t&&(a=h({},a)),e)void 0===a[n]&&(a[n]=e[n]);return a}function wl(e){_s(e)}function Sl(e){console.error(e)}function _l(e){_s(e)}function kl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Cl(e,t,a){try{(0,e.onCaughtError)(a.value,{componentStack:a.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function El(e,t,a){return(a=vr(a)).tag=3,a.payload={element:null},a.callback=function(){kl(e,t)},a}function Al(e){return(e=vr(e)).tag=3,e}function Pl(e,t,a,s){var n=a.type.getDerivedStateFromError;if("function"===typeof n){var r=s.value;e.payload=function(){return n(r)},e.callback=function(){Cl(t,a,s)}}var i=a.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){Cl(t,a,s),"function"!==typeof n&&(null===Rc?Rc=new Set([this]):Rc.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}var Ol=Error(i(461)),Ml=!1;function Tl(e,t,a,s){t.child=null===e?pr(t,null,a,s):hr(t,e.child,a,s)}function Dl(e,t,a,s,n){a=a.render;var r=t.ref;if("ref"in s){var i={};for(var l in s)"ref"!==l&&(i[l]=s[l])}else i=s;return On(t),s=ei(e,t,a,i,r,n),l=ni(),null===e||Ml?(un&&l&&rn(t),t.flags|=1,Tl(e,t,s,n),t.child):(ri(e,t,n),so(e,t,n))}function Il(e,t,a,s,n){if(null===e){var r=a.type;return"function"!==typeof r||Fs(r)||void 0!==r.defaultProps||null!==a.compare?((e=Us(a.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Rl(e,t,r,s,n))}if(r=e.child,!no(e,n)){var i=r.memoizedProps;if((a=null!==(a=a.compare)?a:Xa)(i,s)&&e.ref===t.ref)return so(e,t,n)}return t.flags|=1,(e=zs(r,s)).ref=t.ref,e.return=t,t.child=e}function Rl(e,t,a,s,n){if(null!==e){var r=e.memoizedProps;if(Xa(r,s)&&e.ref===t.ref){if(Ml=!1,t.pendingProps=s=r,!no(e,n))return t.lanes=e.lanes,so(e,t,n);0!==(131072&e.flags)&&(Ml=!0)}}return ql(e,t,a,s,n)}function Ll(e,t,a,s){var n=s.children,r=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===s.mode){if(0!==(128&t.flags)){if(r=null!==r?r.baseLanes|a:a,null!==e){for(s=t.child=e.child,n=0;null!==s;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~r}else s=0,t.child=null;return zl(e,t,r,a,s)}if(0===(536870912&a))return s=t.lanes=536870912,zl(e,t,null!==r?r.baseLanes|a:a,a,s);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Jn(0,null!==r?r.cachePool:null),null!==r?Ar(t,r):Pr(),Rr(t)}else null!==r?(Jn(0,r.cachePool),Ar(t,r),Lr(),t.memoizedState=null):(null!==e&&Jn(0,null),Pr(),Lr());return Tl(e,t,n,a),t.child}function Fl(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zl(e,t,a,s,n){var r=Yn();return r=null===r?null:{parent:Fn._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},null!==e&&Jn(0,null),Pr(),Rr(t),null!==e&&An(e,t,s,!0),t.childLanes=n,null}function Bl(e,t){return(t=Xl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ul(e,t,a){return hr(t,e.child,null,a),(e=Bl(t,t.pendingProps)).flags|=2,Fr(t),t.memoizedState=null,e}function Hl(e,t){var a=t.ref;if(null===a)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof a&&"object"!==typeof a)throw Error(i(284));null!==e&&e.ref===a||(t.flags|=4194816)}}function ql(e,t,a,s,n){return On(t),a=ei(e,t,a,s,void 0,n),s=ni(),null===e||Ml?(un&&s&&rn(t),t.flags|=1,Tl(e,t,a,n),t.child):(ri(e,t,n),so(e,t,n))}function Vl(e,t,a,s,n,r){return On(t),t.updateQueue=null,a=ai(t,s,a,n),ti(e),s=ni(),null===e||Ml?(un&&s&&rn(t),t.flags|=1,Tl(e,t,a,r),t.child):(ri(e,t,r),so(e,t,r))}function Wl(e,t,a,s,n){if(On(t),null===t.stateNode){var r=Is,i=a.contextType;"object"===typeof i&&null!==i&&(r=Mn(i)),r=new a(s,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=bl,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=s,r.state=t.memoizedState,r.refs={},fr(t),i=a.contextType,r.context="object"===typeof i&&null!==i?Mn(i):Is,r.state=t.memoizedState,"function"===typeof(i=a.getDerivedStateFromProps)&&(vl(t,a,i,s),r.state=t.memoizedState),"function"===typeof a.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(i=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),i!==r.state&&bl.enqueueReplaceState(r,r.state,null),Sr(t,s,r,n),wr(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){r=t.stateNode;var l=t.memoizedProps,o=Nl(a,l);r.props=o;var c=r.context,d=a.contextType;i=Is,"object"===typeof d&&null!==d&&(i=Mn(d));var u=a.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,l=t.pendingProps!==l,d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(l||c!==i)&&jl(t,r,s,i),xr=!1;var m=t.memoizedState;r.state=m,Sr(t,s,r,n),wr(),c=t.memoizedState,l||m!==c||xr?("function"===typeof u&&(vl(t,a,u,s),c=t.memoizedState),(o=xr||yl(t,a,o,s,m,c,i))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),r.props=s,r.state=c,r.context=i,s=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,gr(e,t),d=Nl(a,i=t.memoizedProps),r.props=d,u=t.pendingProps,m=r.context,c=a.contextType,o=Is,"object"===typeof c&&null!==c&&(o=Mn(c)),(c="function"===typeof(l=a.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(i!==u||m!==o)&&jl(t,r,s,o),xr=!1,m=t.memoizedState,r.state=m,Sr(t,s,r,n),wr();var h=t.memoizedState;i!==u||m!==h||xr||null!==e&&null!==e.dependencies&&Pn(e.dependencies)?("function"===typeof l&&(vl(t,a,l,s),h=t.memoizedState),(d=xr||yl(t,a,d,s,m,h,o)||null!==e&&null!==e.dependencies&&Pn(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(s,h,o),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,h,o)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),r.props=s,r.state=h,r.context=o,s=d):("function"!==typeof r.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Hl(e,t),s=0!==(128&t.flags),r||s?(r=t.stateNode,a=s&&"function"!==typeof a.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&s?(t.child=hr(t,e.child,null,n),t.child=hr(t,null,a,n)):Tl(e,t,a,n),t.memoizedState=r.state,e=t.child):e=so(e,t,n),e}function Gl(e,t,a,s){return bn(),t.flags|=256,Tl(e,t,a,s),t.child}var Kl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yl(e){return{baseLanes:e,cachePool:$n()}}function Jl(e,t,a){return e=null!==e?e.childLanes&~a:0,t&&(e|=Cc),e}function $l(e,t,a){var s,n=t.pendingProps,r=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&zr.current)),s&&(r=!0,t.flags&=-129),s=0!==(32&t.flags),t.flags&=-33,null===e){if(un){if(r?Dr(t):Lr(),(e=dn)?null!==(e=null!==(e=Pu(e,hn))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==en?{id:tn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},(a=Vs(e)).return=t,t.child=a,cn=t,dn=null):e=null,null===e)throw xn(t);return Mu(e)?t.lanes=32:t.lanes=536870912,null}var o=n.children;return n=n.fallback,r?(Lr(),o=Xl({mode:"hidden",children:o},r=t.mode),n=Hs(n,r,a,null),o.return=t,n.return=t,o.sibling=n,t.child=o,(n=t.child).memoizedState=Yl(a),n.childLanes=Jl(e,s,a),t.memoizedState=Kl,Fl(null,n)):(Dr(t),Ql(t,o))}var c=e.memoizedState;if(null!==c&&null!==(o=c.dehydrated)){if(l)256&t.flags?(Dr(t),t.flags&=-257,t=Zl(e,t,a)):null!==t.memoizedState?(Lr(),t.child=e.child,t.flags|=128,t=null):(Lr(),o=n.fallback,r=t.mode,n=Xl({mode:"visible",children:n.children},r),(o=Hs(o,r,a,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,hr(t,e.child,null,a),(n=t.child).memoizedState=Yl(a),n.childLanes=Jl(e,s,a),t.memoizedState=Kl,t=Fl(null,n));else if(Dr(t),Mu(o)){if(s=o.nextSibling&&o.nextSibling.dataset)var d=s.dgst;s=d,(n=Error(i(419))).stack="",n.digest=s,jn({value:n,source:null,stack:null}),t=Zl(e,t,a)}else if(Ml||An(e,t,a,!1),s=0!==(a&e.childLanes),Ml||s){if(null!==(s=pc)&&(0!==(n=Ie(s,a))&&n!==c.retryLane))throw c.retryLane=n,Ms(e,n),Yc(s,e,n),Ol;Ou(o)||id(),t=Zl(e,t,a)}else Ou(o)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,dn=Tu(o.nextSibling),cn=t,un=!0,mn=null,hn=!1,null!==e&&on(t,e),(t=Ql(t,n.children)).flags|=4096);return t}return r?(Lr(),o=n.fallback,r=t.mode,d=(c=e.child).sibling,(n=zs(c,{mode:"hidden",children:n.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?o=zs(d,o):(o=Hs(o,r,a,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,Fl(null,n),n=t.child,null===(o=e.child.memoizedState)?o=Yl(a):(null!==(r=o.cachePool)?(c=Fn._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=$n(),o={baseLanes:o.baseLanes|a,cachePool:r}),n.memoizedState=o,n.childLanes=Jl(e,s,a),t.memoizedState=Kl,Fl(e.child,n)):(Dr(t),e=(a=e.child).sibling,(a=zs(a,{mode:"visible",children:n.children})).return=t,a.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a)}function Ql(e,t){return(t=Xl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Xl(e,t){return(e=Ls(22,e,null,t)).lanes=0,e}function Zl(e,t,a){return hr(t,e.child,null,a),(e=Ql(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function eo(e,t,a){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Cn(e.return,t,a)}function to(e,t,a,s,n,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=a,i.tailMode=n,i.treeForkCount=r)}function ao(e,t,a){var s=t.pendingProps,n=s.revealOrder,r=s.tail;s=s.children;var i=zr.current,l=0!==(2&i);if(l?(i=1&i|2,t.flags|=128):i&=1,U(zr,i),Tl(e,t,s,a),s=un?Qs:0,!l&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&eo(e,a,t);else if(19===e.tag)eo(e,a,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(a=t.child,n=null;null!==a;)null!==(e=a.alternate)&&null===Br(e)&&(n=a),a=a.sibling;null===(a=n)?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),to(t,!1,n,a,r,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===Br(e)){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}to(t,!0,a,null,r,s);break;case"together":to(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function so(e,t,a){if(null!==e&&(t.dependencies=e.dependencies),Sc|=t.lanes,0===(a&t.childLanes)){if(null===e)return null;if(An(e,t,a,!1),0===(a&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(a=zs(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=zs(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function no(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pn(e))}function ro(e,t,a){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ml=!0;else{if(!no(e,a)&&0===(128&t.flags))return Ml=!1,function(e,t,a){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),_n(0,Fn,e.memoizedState.cache),bn();break;case 27:case 5:$(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:_n(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ir(t),null;break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(Dr(t),t.flags|=128,null):0!==(a&t.child.childLanes)?$l(e,t,a):(Dr(t),null!==(e=so(e,t,a))?e.sibling:null);Dr(t);break;case 19:var n=0!==(128&e.flags);if((s=0!==(a&t.childLanes))||(An(e,t,a,!1),s=0!==(a&t.childLanes)),n){if(s)return ao(e,t,a);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),U(zr,zr.current),s)break;return null;case 22:return t.lanes=0,Ll(e,t,a,t.pendingProps);case 24:_n(0,Fn,e.memoizedState.cache)}return so(e,t,a)}(e,t,a);Ml=0!==(131072&e.flags)}else Ml=!1,un&&0!==(1048576&t.flags)&&nn(t,Qs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=sr(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var n=e.$$typeof;if(n===N){t.tag=11,t=Dl(null,t,e,s,a);break e}if(n===_){t.tag=14,t=Il(null,t,e,s,a);break e}}throw t=M(e)||e,Error(i(306,t,""))}Fs(e)?(s=Nl(e,s),t.tag=1,t=Wl(null,t,e,s,a)):(t.tag=0,t=ql(null,t,e,s,a))}return t;case 0:return ql(e,t,t.type,t.pendingProps,a);case 1:return Wl(e,t,s=t.type,n=Nl(s,t.pendingProps),a);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(i(387));s=t.pendingProps;var r=t.memoizedState;n=r.element,gr(e,t),Sr(t,s,null,a);var l=t.memoizedState;if(s=l.cache,_n(0,Fn,s),s!==r.cache&&En(t,[Fn],a,!0),wr(),s=l.element,r.isDehydrated){if(r={element:s,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Gl(e,t,s,a);break e}if(s!==n){jn(n=Ks(Error(i(424)),t)),t=Gl(e,t,s,a);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(dn=Tu(e.firstChild),cn=t,un=!0,mn=null,hn=!0,a=pr(t,null,s,a),t.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(bn(),s===n){t=so(e,t,a);break e}Tl(e,t,s,a)}t=t.child}return t;case 26:return Hl(e,t),null===e?(a=Wu(t.type,null,t.pendingProps,null))?t.memoizedState=a:un||(a=t.type,e=t.pendingProps,(s=fu(G.current).createElement(a))[Ue]=t,s[He]=e,mu(s,a,e),et(s),t.stateNode=s):t.memoizedState=Wu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&un&&(s=t.stateNode=Lu(t.type,t.pendingProps,G.current),cn=t,hn=!0,n=dn,ku(t.type)?(Du=n,dn=Tu(s.firstChild)):dn=n),Tl(e,t,t.pendingProps.children,a),Hl(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&un&&((n=s=dn)&&(null!==(s=function(e,t,a,s){for(;1===e.nodeType;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(s){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===r)return e}if(null===(e=Tu(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,hn))?(t.stateNode=s,cn=t,dn=Tu(s.firstChild),hn=!1,n=!0):n=!1),n||xn(t)),$(t),n=t.type,r=t.pendingProps,l=null!==e?e.memoizedProps:null,s=r.children,bu(n,r)?s=null:null!==l&&bu(n,l)&&(t.flags|=32),null!==t.memoizedState&&(n=ei(e,t,si,null,null,a),dm._currentValue=n),Hl(e,t),Tl(e,t,s,a),t.child;case 6:return null===e&&un&&((e=a=dn)&&(null!==(a=function(e,t,a){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!a)return null;if(null===(e=Tu(e.nextSibling)))return null}return e}(a,t.pendingProps,hn))?(t.stateNode=a,cn=t,dn=null,e=!0):e=!1),e||xn(t)),null;case 13:return $l(e,t,a);case 4:return Y(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=hr(t,null,s,a):Tl(e,t,s,a),t.child;case 11:return Dl(e,t,t.type,t.pendingProps,a);case 7:return Tl(e,t,t.pendingProps,a),t.child;case 8:case 12:return Tl(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,_n(0,t.type,s.value),Tl(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,On(t),s=s(n=Mn(n)),t.flags|=1,Tl(e,t,s,a),t.child;case 14:return Il(e,t,t.type,t.pendingProps,a);case 15:return Rl(e,t,t.type,t.pendingProps,a);case 19:return ao(e,t,a);case 31:return function(e,t,a){var s=t.pendingProps,n=0!==(128&t.flags);if(t.flags&=-129,null===e){if(un){if("hidden"===s.mode)return e=Bl(t,s),t.lanes=536870912,Fl(null,e);if(Ir(t),(e=dn)?null!==(e=null!==(e=Pu(e,hn))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==en?{id:tn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},(a=Vs(e)).return=t,t.child=a,cn=t,dn=null):e=null,null===e)throw xn(t);return t.lanes=536870912,null}return Bl(t,s)}var r=e.memoizedState;if(null!==r){var l=r.dehydrated;if(Ir(t),n)if(256&t.flags)t.flags&=-257,t=Ul(e,t,a);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Ml||An(e,t,a,!1),n=0!==(a&e.childLanes),Ml||n){if(null!==(s=pc)&&0!==(l=Ie(s,a))&&l!==r.retryLane)throw r.retryLane=l,Ms(e,l),Yc(s,e,l),Ol;id(),t=Ul(e,t,a)}else e=r.treeContext,dn=Tu(l.nextSibling),cn=t,un=!0,mn=null,hn=!1,null!==e&&on(t,e),(t=Bl(t,s)).flags|=4096;return t}return(e=zs(e.child,{mode:s.mode,children:s.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,a);case 22:return Ll(e,t,a,t.pendingProps);case 24:return On(t),s=Mn(Fn),null===e?(null===(n=Yn())&&(n=pc,r=zn(),n.pooledCache=r,r.refCount++,null!==r&&(n.pooledCacheLanes|=a),n=r),t.memoizedState={parent:s,cache:n},fr(t),_n(0,Fn,n)):(0!==(e.lanes&a)&&(gr(e,t),Sr(t,null,null,a),wr()),n=e.memoizedState,r=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),_n(0,Fn,s)):(s=r.cache,_n(0,Fn,s),s!==n.cache&&En(t,[Fn],a,!0))),Tl(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function io(e){e.flags|=4}function lo(e,t,a,s,n){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&n)===n)if(e.stateNode.complete)e.flags|=8192;else{if(!sd())throw nr=er,Xn;e.flags|=8192}}else e.flags&=-16777217}function oo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!nm(t)){if(!sd())throw nr=er,Xn;e.flags|=8192}}function co(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Ec|=t)}function uo(e,t){if(!un)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;null!==a;)null!==a.alternate&&(s=a),a=a.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function mo(e){var t=null!==e.alternate&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;null!==n;)a|=n.lanes|n.childLanes,s|=65011712&n.subtreeFlags,s|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function ho(e,t,a){var s=t.pendingProps;switch(ln(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return mo(t),null;case 3:return a=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),kn(Fn),J(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(vn(t)?io(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,yn())),mo(t),null;case 26:var n=t.type,r=t.memoizedState;return null===e?(io(t),null!==r?(mo(t),oo(t,r)):(mo(t),lo(t,n,0,0,a))):r?r!==e.memoizedState?(io(t),mo(t),oo(t,r)):(mo(t),t.flags&=-16777217):((e=e.memoizedProps)!==s&&io(t),mo(t),lo(t,n,0,0,a)),null;case 27:if(Q(t),a=G.current,n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&io(t);else{if(!s){if(null===t.stateNode)throw Error(i(166));return mo(t),null}e=V.current,vn(t)?fn(t):(e=Lu(n,s,a),t.stateNode=e,io(t))}return mo(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&io(t);else{if(!s){if(null===t.stateNode)throw Error(i(166));return mo(t),null}if(r=V.current,vn(t))fn(t);else{var l=fu(G.current);switch(r){case 1:r=l.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=l.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(r=l.createElement("div")).innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r="string"===typeof s.is?l.createElement("select",{is:s.is}):l.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r="string"===typeof s.is?l.createElement(n,{is:s.is}):l.createElement(n)}}r[Ue]=t,r[He]=s;e:for(l=t.child;null!==l;){if(5===l.tag||6===l.tag)r.appendChild(l.stateNode);else if(4!==l.tag&&27!==l.tag&&null!==l.child){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;null===l.sibling;){if(null===l.return||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=r;e:switch(mu(r,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&io(t)}}return mo(t),lo(t,t.type,null===e||e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&io(t);else{if("string"!==typeof s&&null===t.stateNode)throw Error(i(166));if(e=G.current,vn(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,null!==(n=cn))switch(n.tag){case 27:case 5:s=n.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===a||null!==s&&!0===s.suppressHydrationWarning||cu(e.nodeValue,a)))||xn(t,!0)}else(e=fu(e).createTextNode(s))[Ue]=t,t.stateNode=e}return mo(t),null;case 31:if(a=t.memoizedState,null===e||null!==e.memoizedState){if(s=vn(t),null!==a){if(null===e){if(!s)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[Ue]=t}else bn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mo(t),e=!1}else a=yn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return 256&t.flags?(Fr(t),t):(Fr(t),null);if(0!==(128&t.flags))throw Error(i(558))}return mo(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=vn(t),null!==s&&null!==s.dehydrated){if(null===e){if(!n)throw Error(i(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(i(317));n[Ue]=t}else bn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mo(t),n=!1}else n=yn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(Fr(t),t):(Fr(t),null)}return Fr(t),0!==(128&t.flags)?(t.lanes=a,t):(a=null!==s,e=null!==e&&null!==e.memoizedState,a&&(n=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(n=s.alternate.memoizedState.cachePool.pool),r=null,null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),co(t,t.updateQueue),mo(t),null);case 4:return J(),null===e&&Zd(t.stateNode.containerInfo),mo(t),null;case 10:return kn(t.type),mo(t),null;case 19:if(B(zr),null===(s=t.memoizedState))return mo(t),null;if(n=0!==(128&t.flags),null===(r=s.rendering))if(n)uo(s,!1);else{if(0!==wc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=Br(e))){for(t.flags|=128,uo(s,!1),e=r.updateQueue,t.updateQueue=e,co(t,e),t.subtreeFlags=0,e=a,a=t.child;null!==a;)Bs(a,e),a=a.sibling;return U(zr,1&zr.current|2),un&&sn(t,s.treeForkCount),t.child}e=e.sibling}null!==s.tail&&oe()>Dc&&(t.flags|=128,n=!0,uo(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Br(r))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,co(t,e),uo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!r.alternate&&!un)return mo(t),null}else 2*oe()-s.renderingStartTime>Dc&&536870912!==a&&(t.flags|=128,n=!0,uo(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=s.last)?e.sibling=r:t.child=r,s.last=r)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=oe(),e.sibling=null,a=zr.current,U(zr,n?1&a|2:1&a),un&&sn(t,s.treeForkCount),e):(mo(t),null);case 22:case 23:return Fr(t),Or(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?0!==(536870912&a)&&0===(128&t.flags)&&(mo(t),6&t.subtreeFlags&&(t.flags|=8192)):mo(t),null!==(a=t.updateQueue)&&co(t,a.retryQueue),a=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(a=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),null!==e&&B(Kn),null;case 24:return a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),kn(Fn),mo(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function po(e,t){switch(ln(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return kn(Fn),J(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 31:if(null!==t.memoizedState){if(Fr(t),null===t.alternate)throw Error(i(340));bn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fr(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));bn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(zr),null;case 4:return J(),null;case 10:return kn(t.type),null;case 22:case 23:return Fr(t),Or(),null!==e&&B(Kn),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return kn(Fn),null;default:return null}}function xo(e,t){switch(ln(t),t.tag){case 3:kn(Fn),J();break;case 26:case 27:case 5:Q(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Fr(t);break;case 13:Fr(t);break;case 19:B(zr);break;case 10:kn(t.type);break;case 22:case 23:Fr(t),Or(),null!==e&&B(Kn);break;case 24:kn(Fn)}}function fo(e,t){try{var a=t.updateQueue,s=null!==a?a.lastEffect:null;if(null!==s){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var r=a.create,i=a.inst;s=r(),i.destroy=s}a=a.next}while(a!==n)}}catch(l){wd(t,t.return,l)}}function go(e,t,a){try{var s=t.updateQueue,n=null!==s?s.lastEffect:null;if(null!==n){var r=n.next;s=r;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(void 0!==l){i.destroy=void 0,n=t;var o=a,c=l;try{c()}catch(d){wd(n,o,d)}}}s=s.next}while(s!==r)}}catch(d){wd(t,t.return,d)}}function vo(e){var t=e.updateQueue;if(null!==t){var a=e.stateNode;try{kr(t,a)}catch(s){wd(e,e.return,s)}}}function bo(e,t,a){a.props=Nl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){wd(e,t,s)}}function yo(e,t){try{var a=e.ref;if(null!==a){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;default:s=e.stateNode}"function"===typeof a?e.refCleanup=a(s):a.current=s}}catch(n){wd(e,t,n)}}function jo(e,t){var a=e.ref,s=e.refCleanup;if(null!==a)if("function"===typeof s)try{s()}catch(n){wd(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof a)try{a(null)}catch(r){wd(e,t,r)}else a.current=null}function No(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){wd(e,e.return,n)}}function wo(e,t,a){try{var s=e.stateNode;!function(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,l=null,o=null,c=null,d=null,u=null;for(p in a){var m=a[p];if(a.hasOwnProperty(p)&&null!=m)switch(p){case"checked":case"value":break;case"defaultValue":c=m;default:s.hasOwnProperty(p)||du(e,t,p,null,s,m)}}for(var h in s){var p=s[h];if(m=a[h],s.hasOwnProperty(h)&&(null!=p||null!=m))switch(h){case"type":r=p;break;case"name":n=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":l=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:p!==m&&du(e,t,h,p,s,m)}}return void vt(e,l,o,c,d,u,r,n);case"select":for(r in p=l=o=h=null,a)if(c=a[r],a.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:s.hasOwnProperty(r)||du(e,t,r,null,s,c)}for(n in s)if(r=s[n],c=a[n],s.hasOwnProperty(n)&&(null!=r||null!=c))switch(n){case"value":h=r;break;case"defaultValue":o=r;break;case"multiple":l=r;default:r!==c&&du(e,t,n,r,s,c)}return t=o,a=l,s=p,void(null!=h?jt(e,!!a,h,!1):!!s!==!!a&&(null!=t?jt(e,!!a,t,!0):jt(e,!!a,a?[]:"",!1)));case"textarea":for(o in p=h=null,a)if(n=a[o],a.hasOwnProperty(o)&&null!=n&&!s.hasOwnProperty(o))switch(o){case"value":case"children":break;default:du(e,t,o,null,s,n)}for(l in s)if(n=s[l],r=a[l],s.hasOwnProperty(l)&&(null!=n||null!=r))switch(l){case"value":h=n;break;case"defaultValue":p=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(i(91));break;default:n!==r&&du(e,t,l,n,s,r)}return void Nt(e,h,p);case"option":for(var x in a)if(h=a[x],a.hasOwnProperty(x)&&null!=h&&!s.hasOwnProperty(x))if("selected"===x)e.selected=!1;else du(e,t,x,null,s,h);for(c in s)if(h=s[c],p=a[c],s.hasOwnProperty(c)&&h!==p&&(null!=h||null!=p))if("selected"===c)e.selected=h&&"function"!==typeof h&&"symbol"!==typeof h;else du(e,t,c,h,s,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var f in a)h=a[f],a.hasOwnProperty(f)&&null!=h&&!s.hasOwnProperty(f)&&du(e,t,f,null,s,h);for(d in s)if(h=s[d],p=a[d],s.hasOwnProperty(d)&&h!==p&&(null!=h||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(i(137,t));break;default:du(e,t,d,h,s,p)}return;default:if(Et(t)){for(var g in a)h=a[g],a.hasOwnProperty(g)&&void 0!==h&&!s.hasOwnProperty(g)&&uu(e,t,g,void 0,s,h);for(u in s)h=s[u],p=a[u],!s.hasOwnProperty(u)||h===p||void 0===h&&void 0===p||uu(e,t,u,h,s,p);return}}for(var v in a)h=a[v],a.hasOwnProperty(v)&&null!=h&&!s.hasOwnProperty(v)&&du(e,t,v,null,s,h);for(m in s)h=s[m],p=a[m],!s.hasOwnProperty(m)||h===p||null==h&&null==p||du(e,t,m,h,s,p)}(s,e.type,a,t),s[He]=t}catch(n){wd(e,e.return,n)}}function So(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ku(e.type)||4===e.tag}function _o(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||So(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ku(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ko(e,t,a){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?(9===a.nodeType?a.body:"HTML"===a.nodeName?a.ownerDocument.body:a).insertBefore(e,t):((t=9===a.nodeType?a.body:"HTML"===a.nodeName?a.ownerDocument.body:a).appendChild(e),null!==(a=a._reactRootContainer)&&void 0!==a||null!==t.onclick||(t.onclick=Mt));else if(4!==s&&(27===s&&ku(e.type)&&(a=e.stateNode,t=null),null!==(e=e.child)))for(ko(e,t,a),e=e.sibling;null!==e;)ko(e,t,a),e=e.sibling}function Co(e,t,a){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(4!==s&&(27===s&&ku(e.type)&&(a=e.stateNode),null!==(e=e.child)))for(Co(e,t,a),e=e.sibling;null!==e;)Co(e,t,a),e=e.sibling}function Eo(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);mu(t,s,a),t[Ue]=e,t[He]=a}catch(r){wd(e,e.return,r)}}var Ao=!1,Po=!1,Oo=!1,Mo="function"===typeof WeakSet?WeakSet:Set,To=null;function Do(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Yo(e,a),4&s&&fo(5,a);break;case 1:if(Yo(e,a),4&s)if(e=a.stateNode,null===t)try{e.componentDidMount()}catch(i){wd(a,a.return,i)}else{var n=Nl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){wd(a,a.return,l)}}64&s&&vo(a),512&s&&yo(a,a.return);break;case 3:if(Yo(e,a),64&s&&null!==(e=a.updateQueue)){if(t=null,null!==a.child)switch(a.child.tag){case 27:case 5:case 1:t=a.child.stateNode}try{kr(e,t)}catch(i){wd(a,a.return,i)}}break;case 27:null===t&&4&s&&Eo(a);case 26:case 5:Yo(e,a),null===t&&4&s&&No(a),512&s&&yo(a,a.return);break;case 12:Yo(e,a);break;case 31:Yo(e,a),4&s&&Bo(e,a);break;case 13:Yo(e,a),4&s&&Uo(e,a),64&s&&(null!==(e=a.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var a=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==a.readyState)t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}(e,a=Cd.bind(null,a))));break;case 22:if(!(s=null!==a.memoizedState||Ao)){t=null!==t&&null!==t.memoizedState||Po,n=Ao;var r=Po;Ao=s,(Po=t)&&!r?$o(e,a,0!==(8772&a.subtreeFlags)):Yo(e,a),Ao=n,Po=r}break;case 30:break;default:Yo(e,a)}}function Io(e){var t=e.alternate;null!==t&&(e.alternate=null,Io(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ro=null,Lo=!1;function Fo(e,t,a){for(a=a.child;null!==a;)zo(e,t,a),a=a.sibling}function zo(e,t,a){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ge,a)}catch(r){}switch(a.tag){case 26:Po||jo(a,t),Fo(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode).parentNode.removeChild(a);break;case 27:Po||jo(a,t);var s=Ro,n=Lo;ku(a.type)&&(Ro=a.stateNode,Lo=!1),Fo(e,t,a),Fu(a.stateNode),Ro=s,Lo=n;break;case 5:Po||jo(a,t);case 6:if(s=Ro,n=Lo,Ro=null,Fo(e,t,a),Lo=n,null!==(Ro=s))if(Lo)try{(9===Ro.nodeType?Ro.body:"HTML"===Ro.nodeName?Ro.ownerDocument.body:Ro).removeChild(a.stateNode)}catch(i){wd(a,t,i)}else try{Ro.removeChild(a.stateNode)}catch(i){wd(a,t,i)}break;case 18:null!==Ro&&(Lo?(Cu(9===(e=Ro).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,a.stateNode),Vm(e)):Cu(Ro,a.stateNode));break;case 4:s=Ro,n=Lo,Ro=a.stateNode.containerInfo,Lo=!0,Fo(e,t,a),Ro=s,Lo=n;break;case 0:case 11:case 14:case 15:go(2,a,t),Po||go(4,a,t),Fo(e,t,a);break;case 1:Po||(jo(a,t),"function"===typeof(s=a.stateNode).componentWillUnmount&&bo(a,t,s)),Fo(e,t,a);break;case 21:Fo(e,t,a);break;case 22:Po=(s=Po)||null!==a.memoizedState,Fo(e,t,a),Po=s;break;default:Fo(e,t,a)}}function Bo(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Vm(e)}catch(a){wd(t,t.return,a)}}}function Uo(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Vm(e)}catch(a){wd(t,t.return,a)}}function Ho(e,t){var a=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Mo),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Mo),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!a.has(t)){a.add(t);var s=Ed.bind(null,e,t);t.then(s,s)}})}function qo(e,t){var a=t.deletions;if(null!==a)for(var s=0;s<a.length;s++){var n=a[s],r=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 27:if(ku(o.type)){Ro=o.stateNode,Lo=!1;break e}break;case 5:Ro=o.stateNode,Lo=!1;break e;case 3:case 4:Ro=o.stateNode.containerInfo,Lo=!0;break e}o=o.return}if(null===Ro)throw Error(i(160));zo(r,l,n),Ro=null,Lo=!1,null!==(r=n.alternate)&&(r.return=null),n.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wo(t,e),t=t.sibling}var Vo=null;function Wo(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qo(t,e),Go(e),4&s&&(go(3,e,e.return),fo(3,e),go(5,e,e.return));break;case 1:qo(t,e),Go(e),512&s&&(Po||null===a||jo(a,a.return)),64&s&&Ao&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===a?s:a.concat(s))));break;case 26:var n=Vo;if(qo(t,e),Go(e),512&s&&(Po||null===a||jo(a,a.return)),4&s){var r=null!==a?a.memoizedState:null;if(s=e.memoizedState,null===a)if(null===s)if(null===e.stateNode){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":(!(r=n.getElementsByTagName("title")[0])||r[Ye]||r[Ue]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=n.createElement(s),n.head.insertBefore(r,n.querySelector("head > title"))),mu(r,s,a),r[Ue]=e,et(r),s=r;break e;case"link":var l=am("link","href",n).get(s+(a.href||""));if(l)for(var o=0;o<l.length;o++)if((r=l[o]).getAttribute("href")===(null==a.href||""===a.href?null:a.href)&&r.getAttribute("rel")===(null==a.rel?null:a.rel)&&r.getAttribute("title")===(null==a.title?null:a.title)&&r.getAttribute("crossorigin")===(null==a.crossOrigin?null:a.crossOrigin)){l.splice(o,1);break t}mu(r=n.createElement(s),s,a),n.head.appendChild(r);break;case"meta":if(l=am("meta","content",n).get(s+(a.content||"")))for(o=0;o<l.length;o++)if((r=l[o]).getAttribute("content")===(null==a.content?null:""+a.content)&&r.getAttribute("name")===(null==a.name?null:a.name)&&r.getAttribute("property")===(null==a.property?null:a.property)&&r.getAttribute("http-equiv")===(null==a.httpEquiv?null:a.httpEquiv)&&r.getAttribute("charset")===(null==a.charSet?null:a.charSet)){l.splice(o,1);break t}mu(r=n.createElement(s),s,a),n.head.appendChild(r);break;default:throw Error(i(468,s))}r[Ue]=e,et(r),s=r}e.stateNode=s}else sm(n,e.type,e.stateNode);else e.stateNode=Qu(n,s,e.memoizedProps);else r!==s?(null===r?null!==a.stateNode&&(a=a.stateNode).parentNode.removeChild(a):r.count--,null===s?sm(n,e.type,e.stateNode):Qu(n,s,e.memoizedProps)):null===s&&null!==e.stateNode&&wo(e,e.memoizedProps,a.memoizedProps)}break;case 27:qo(t,e),Go(e),512&s&&(Po||null===a||jo(a,a.return)),null!==a&&4&s&&wo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(qo(t,e),Go(e),512&s&&(Po||null===a||jo(a,a.return)),32&e.flags){n=e.stateNode;try{St(n,"")}catch(x){wd(e,e.return,x)}}4&s&&null!=e.stateNode&&wo(e,n=e.memoizedProps,null!==a?a.memoizedProps:n),1024&s&&(Oo=!0);break;case 6:if(qo(t,e),Go(e),4&s){if(null===e.stateNode)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(x){wd(e,e.return,x)}}break;case 3:if(tm=null,n=Vo,Vo=Uu(t.containerInfo),qo(t,e),Vo=n,Go(e),4&s&&null!==a&&a.memoizedState.isDehydrated)try{Vm(t.containerInfo)}catch(x){wd(e,e.return,x)}Oo&&(Oo=!1,Ko(e));break;case 4:s=Vo,Vo=Uu(e.stateNode.containerInfo),qo(t,e),Go(e),Vo=s;break;case 12:default:qo(t,e),Go(e);break;case 31:case 19:qo(t,e),Go(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Ho(e,s)));break;case 13:qo(t,e),Go(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==a&&null!==a.memoizedState)&&(Mc=oe()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Ho(e,s)));break;case 22:n=null!==e.memoizedState;var c=null!==a&&null!==a.memoizedState,d=Ao,u=Po;if(Ao=d||n,Po=u||c,qo(t,e),Po=u,Ao=d,Go(e),8192&s)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===a||c||Ao||Po||Jo(e)),a=null,t=e;;){if(5===t.tag||26===t.tag){if(null===a){c=a=t;try{if(r=c.stateNode,n)"function"===typeof(l=r.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{o=c.stateNode;var m=c.memoizedProps.style,h=void 0!==m&&null!==m&&m.hasOwnProperty("display")?m.display:null;o.style.display=null==h||"boolean"===typeof h?"":(""+h).trim()}}catch(x){wd(c,c.return,x)}}}else if(6===t.tag){if(null===a){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(x){wd(c,c.return,x)}}}else if(18===t.tag){if(null===a){c=t;try{var p=c.stateNode;n?Eu(p,!0):Eu(c.stateNode,!1)}catch(x){wd(c,c.return,x)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(a=s.retryQueue)&&(s.retryQueue=null,Ho(e,a))));case 30:case 21:}}function Go(e){var t=e.flags;if(2&t){try{for(var a,s=e.return;null!==s;){if(So(s)){a=s;break}s=s.return}if(null==a)throw Error(i(160));switch(a.tag){case 27:var n=a.stateNode;Co(e,_o(e),n);break;case 5:var r=a.stateNode;32&a.flags&&(St(r,""),a.flags&=-33),Co(e,_o(e),r);break;case 3:case 4:var l=a.stateNode.containerInfo;ko(e,_o(e),l);break;default:throw Error(i(161))}}catch(o){wd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ko(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ko(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yo(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Do(e,t.alternate,t),t=t.sibling}function Jo(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:go(4,t,t.return),Jo(t);break;case 1:jo(t,t.return);var a=t.stateNode;"function"===typeof a.componentWillUnmount&&bo(t,t.return,a),Jo(t);break;case 27:Fu(t.stateNode);case 26:case 5:jo(t,t.return),Jo(t);break;case 22:null===t.memoizedState&&Jo(t);break;default:Jo(t)}e=e.sibling}}function $o(e,t,a){for(a=a&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,n=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:$o(n,r,a),fo(4,r);break;case 1:if($o(n,r,a),"function"===typeof(n=(s=r).stateNode).componentDidMount)try{n.componentDidMount()}catch(c){wd(s,s.return,c)}if(null!==(n=(s=r).updateQueue)){var l=s.stateNode;try{var o=n.shared.hiddenCallbacks;if(null!==o)for(n.shared.hiddenCallbacks=null,n=0;n<o.length;n++)_r(o[n],l)}catch(c){wd(s,s.return,c)}}a&&64&i&&vo(r),yo(r,r.return);break;case 27:Eo(r);case 26:case 5:$o(n,r,a),a&&null===s&&4&i&&No(r),yo(r,r.return);break;case 12:$o(n,r,a);break;case 31:$o(n,r,a),a&&4&i&&Bo(n,r);break;case 13:$o(n,r,a),a&&4&i&&Uo(n,r);break;case 22:null===r.memoizedState&&$o(n,r,a),yo(r,r.return);break;case 30:break;default:$o(n,r,a)}t=t.sibling}}function Qo(e,t){var a=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(a=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==a&&(null!=e&&e.refCount++,null!=a&&Bn(a))}function Xo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bn(e))}function Zo(e,t,a,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,a,s),t=t.sibling}function ec(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Zo(e,t,a,s),2048&n&&fo(9,t);break;case 1:case 31:case 13:default:Zo(e,t,a,s);break;case 3:Zo(e,t,a,s),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bn(e)));break;case 12:if(2048&n){Zo(e,t,a,s),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,l=r.onPostCommit;"function"===typeof l&&l(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){wd(t,t.return,o)}}else Zo(e,t,a,s);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,null!==t.memoizedState?2&r._visibility?Zo(e,t,a,s):ac(e,t):2&r._visibility?Zo(e,t,a,s):(r._visibility|=2,tc(e,t,a,s,0!==(10256&t.subtreeFlags)||!1)),2048&n&&Qo(i,t);break;case 24:Zo(e,t,a,s),2048&n&&Xo(t.alternate,t)}}function tc(e,t,a,s,n){for(n=n&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var r=e,i=t,l=a,o=s,c=i.flags;switch(i.tag){case 0:case 11:case 15:tc(r,i,l,o,n),fo(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?tc(r,i,l,o,n):ac(r,i):(d._visibility|=2,tc(r,i,l,o,n)),n&&2048&c&&Qo(i.alternate,i);break;case 24:tc(r,i,l,o,n),n&&2048&c&&Xo(i.alternate,i);break;default:tc(r,i,l,o,n)}t=t.sibling}}function ac(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:ac(a,s),2048&n&&Qo(s.alternate,s);break;case 24:ac(a,s),2048&n&&Xo(s.alternate,s);break;default:ac(a,s)}t=t.sibling}}var sc=8192;function nc(e,t,a){if(e.subtreeFlags&sc)for(e=e.child;null!==e;)rc(e,t,a),e=e.sibling}function rc(e,t,a){switch(e.tag){case 26:nc(e,t,a),e.flags&sc&&null!==e.memoizedState&&function(e,t,a,s){if("stylesheet"===a.type&&("string"!==typeof s.media||!1!==matchMedia(s.media).matches)&&0===(4&a.state.loading)){if(null===a.instance){var n=Gu(s.href),r=t.querySelector(Ku(n));if(r)return null!==(t=r._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=im.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=r,void et(r);r=t.ownerDocument||t,s=Yu(s),(n=zu.get(n))&&Zu(s,n),et(r=r.createElement("link"));var i=r;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),mu(r,"link",s),a.instance=r}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&0===(3&a.state.loading)&&(e.count++,a=im.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}(a,Vo,e.memoizedState,e.memoizedProps);break;case 5:default:nc(e,t,a);break;case 3:case 4:var s=Vo;Vo=Uu(e.stateNode.containerInfo),nc(e,t,a),Vo=s;break;case 22:null===e.memoizedState&&(null!==(s=e.alternate)&&null!==s.memoizedState?(s=sc,sc=16777216,nc(e,t,a),sc=s):nc(e,t,a))}}function ic(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var a=0;a<t.length;a++){var s=t[a];To=s,dc(s,e)}ic(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)oc(e),e=e.sibling}function oc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&go(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):lc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var a=0;a<t.length;a++){var s=t[a];To=s,dc(s,e)}ic(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:go(8,t,t.return),cc(t);break;case 22:2&(a=t.stateNode)._visibility&&(a._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function dc(e,t){for(;null!==To;){var a=To;switch(a.tag){case 0:case 11:case 15:go(8,a,t);break;case 23:case 22:if(null!==a.memoizedState&&null!==a.memoizedState.cachePool){var s=a.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:Bn(a.memoizedState.cache)}if(null!==(s=a.child))s.return=a,To=s;else e:for(a=e;null!==To;){var n=(s=To).sibling,r=s.return;if(Io(s),s===a){To=null;break e}if(null!==n){n.return=r,To=n;break e}To=r}}}var uc={getCacheForType:function(e){var t=Mn(Fn),a=t.data.get(e);return void 0===a&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Mn(Fn).controller.signal}},mc="function"===typeof WeakMap?WeakMap:Map,hc=0,pc=null,xc=null,fc=0,gc=0,vc=null,bc=!1,yc=!1,jc=!1,Nc=0,wc=0,Sc=0,_c=0,kc=0,Cc=0,Ec=0,Ac=null,Pc=null,Oc=!1,Mc=0,Tc=0,Dc=1/0,Ic=null,Rc=null,Lc=0,Fc=null,zc=null,Bc=0,Uc=0,Hc=null,qc=null,Vc=0,Wc=null;function Gc(){return 0!==(2&hc)&&0!==fc?fc&-fc:null!==D.T?Hd():Fe()}function Kc(){if(0===Cc)if(0===(536870912&fc)||un){var e=Se;0===(3932160&(Se<<=1))&&(Se=262144),Cc=e}else Cc=536870912;return null!==(e=Mr.current)&&(e.flags|=32),Cc}function Yc(e,t,a){(e!==pc||2!==gc&&9!==gc)&&null===e.cancelPendingCommit||(td(e,0),Xc(e,fc,Cc,!1)),Me(e,a),0!==(2&hc)&&e===pc||(e===pc&&(0===(2&hc)&&(_c|=a),4===wc&&Xc(e,fc,Cc,!1)),Id(e))}function Jc(e,t,a){if(0!==(6&hc))throw Error(i(327));for(var s=!a&&0===(127&t)&&0===(t&e.expiredLanes)||Ee(e,t),n=s?function(e,t){var a=hc;hc|=2;var s=nd(),n=rd();pc!==e||fc!==t?(Ic=null,Dc=oe()+500,td(e,t)):yc=Ee(e,t);e:for(;;)try{if(0!==gc&&null!==xc){t=xc;var r=vc;t:switch(gc){case 1:gc=0,vc=null,md(e,t,r,1);break;case 2:case 9:if(tr(r)){gc=0,vc=null,ud(t);break}t=function(){2!==gc&&9!==gc||pc!==e||(gc=7),Id(e)},r.then(t,t);break e;case 3:gc=7;break e;case 4:gc=5;break e;case 7:tr(r)?(gc=0,vc=null,ud(t)):(gc=0,vc=null,md(e,t,r,7));break;case 5:var l=null;switch(xc.tag){case 26:l=xc.memoizedState;case 5:case 27:var o=xc;if(l?nm(l):o.stateNode.complete){gc=0,vc=null;var c=o.sibling;if(null!==c)xc=c;else{var d=o.return;null!==d?(xc=d,hd(d)):xc=null}break t}}gc=0,vc=null,md(e,t,r,5);break;case 6:gc=0,vc=null,md(e,t,r,6);break;case 8:ed(),wc=6;break e;default:throw Error(i(462))}}cd();break}catch(u){ad(e,u)}return Sn=wn=null,D.H=s,D.A=n,hc=a,null!==xc?0:(pc=null,fc=0,As(),wc)}(e,t):ld(e,t,!0),r=s;;){if(0===n){yc&&!s&&Xc(e,t,0,!1);break}if(a=e.current.alternate,!r||Qc(a)){if(2===n){if(r=t,e.errorRecoveryDisabledLanes&r)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var o=e;n=Ac;var c=o.current.memoizedState.isDehydrated;if(c&&(td(o,l).flags|=256),2!==(l=ld(o,l,!1))){if(jc&&!c){o.errorRecoveryDisabledLanes|=r,_c|=r,n=4;break e}r=Pc,Pc=n,null!==r&&(null===Pc?Pc=r:Pc.push.apply(Pc,r))}n=l}if(r=!1,2!==n)continue}}if(1===n){td(e,0),Xc(e,t,0,!0);break}e:{switch(s=e,r=n){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Xc(s,t,Cc,!bc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(n=Mc+300-oe())){if(Xc(s,t,Cc,!bc),0!==Ce(s,0,!0))break e;Bc=t,s.timeoutHandle=ju($c.bind(null,s,a,Pc,Ic,Oc,t,Cc,_c,Ec,bc,r,"Throttled",-0,0),n)}else $c(s,a,Pc,Ic,Oc,t,Cc,_c,Ec,bc,r,null,-0,0)}break}n=ld(e,t,!1),r=!1}Id(e)}function $c(e,t,a,s,n,r,i,l,o,c,d,u,m,h){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){rc(t,r,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mt});var p=(62914560&r)===r?Mc-oe():(4194048&r)===r?Tc-oe():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&om(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&om(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===rm&&(rm=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var n=a[s],r=n.transferSize,i=n.initiatorType,l=n.duration;if(r&&l&&hu(i)){for(i=0,l=n.responseEnd,s+=1;s<a.length;s++){var o=a[s],c=o.startTime;if(c>l)break;var d=o.transferSize,u=o.initiatorType;d&&hu(u)&&(i+=d*((o=o.responseEnd)<l?1:(l-c)/(o-c)))}if(--s,t+=8*(r+i)/(n.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var n=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&om(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>rm?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}(u,p)))return Bc=r,e.cancelPendingCommit=p(xd.bind(null,e,t,r,a,s,n,i,l,o,d,u,null,m,h)),void Xc(e,r,i,!c)}xd(e,t,r,a,s,n,i,l,o)}function Qc(e){for(var t=e;;){var a=t.tag;if((0===a||11===a||15===a)&&16384&t.flags&&(null!==(a=t.updateQueue)&&null!==(a=a.stores)))for(var s=0;s<a.length;s++){var n=a[s],r=n.getSnapshot;n=n.value;try{if(!Qa(r(),n))return!1}catch(i){return!1}}if(a=t.child,16384&t.subtreeFlags&&null!==a)a.return=t,t=a;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xc(e,t,a,s){t&=~kc,t&=~_c,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var r=31-ye(n),i=1<<r;s[r]=-1,n&=~i}0!==a&&Te(e,a,t)}function Zc(){return 0!==(6&hc)||(Rd(0,!1),!1)}function ed(){if(null!==xc){if(0===gc)var e=xc.return;else Sn=wn=null,ii(e=xc),lr=null,or=0,e=xc;for(;null!==e;)xo(e.alternate,e),e=e.return;xc=null}}function td(e,t){var a=e.timeoutHandle;-1!==a&&(e.timeoutHandle=-1,Nu(a)),null!==(a=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,a()),Bc=0,ed(),pc=e,xc=a=zs(e.current,null),fc=t,gc=0,vc=null,bc=!1,yc=Ee(e,t),jc=!1,Ec=Cc=kc=_c=Sc=wc=0,Pc=Ac=null,Oc=!1,0!==(8&t)&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var n=31-ye(s),r=1<<n;t|=e[n],s&=~r}return Nc=t,As(),a}function ad(e,t){Hr=null,D.H=pl,t===Qn||t===Zn?(t=rr(),gc=3):t===Xn?(t=rr(),gc=4):gc=t===Ol?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===xc&&(wc=1,kl(e,Ks(t,e.current)))}function sd(){var e=Mr.current;return null===e||((4194048&fc)===fc?null===Tr:((62914560&fc)===fc||0!==(536870912&fc))&&e===Tr)}function nd(){var e=D.H;return D.H=pl,null===e?pl:e}function rd(){var e=D.A;return D.A=uc,e}function id(){wc=4,bc||(4194048&fc)!==fc&&null!==Mr.current||(yc=!0),0===(134217727&Sc)&&0===(134217727&_c)||null===pc||Xc(pc,fc,Cc,!1)}function ld(e,t,a){var s=hc;hc|=2;var n=nd(),r=rd();pc===e&&fc===t||(Ic=null,td(e,t)),t=!1;var i=wc;e:for(;;)try{if(0!==gc&&null!==xc){var l=xc,o=vc;switch(gc){case 8:ed(),i=6;break e;case 3:case 2:case 9:case 6:null===Mr.current&&(t=!0);var c=gc;if(gc=0,vc=null,md(e,l,o,c),a&&yc){i=0;break e}break;default:c=gc,gc=0,vc=null,md(e,l,o,c)}}od(),i=wc;break}catch(d){ad(e,d)}return t&&e.shellSuspendCounter++,Sn=wn=null,hc=s,D.H=n,D.A=r,null===xc&&(pc=null,fc=0,As()),i}function od(){for(;null!==xc;)dd(xc)}function cd(){for(;null!==xc&&!ie();)dd(xc)}function dd(e){var t=ro(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?hd(e):xc=t}function ud(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Vl(a,t,t.pendingProps,t.type,void 0,fc);break;case 11:t=Vl(a,t,t.pendingProps,t.type.render,t.ref,fc);break;case 5:ii(t);default:xo(a,t),t=ro(a,t=xc=Bs(t,Nc),Nc)}e.memoizedProps=e.pendingProps,null===t?hd(e):xc=t}function md(e,t,a,s){Sn=wn=null,ii(t),lr=null,or=0;var n=t.return;try{if(function(e,t,a,s,n){if(a.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){if(null!==(t=a.alternate)&&An(t,a,n,!0),null!==(a=Mr.current)){switch(a.tag){case 31:case 13:return null===Tr?id():null===a.alternate&&0===wc&&(wc=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===er?a.flags|=16384:(null===(t=a.updateQueue)?a.updateQueue=new Set([s]):t.add(s),Sd(e,s,n)),!1;case 22:return a.flags|=65536,s===er?a.flags|=16384:(null===(t=a.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):null===(a=t.retryQueue)?t.retryQueue=new Set([s]):a.add(s),Sd(e,s,n)),!1}throw Error(i(435,a.tag))}return Sd(e,s,n),id(),!1}if(un)return null!==(t=Mr.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==pn&&jn(Ks(e=Error(i(422),{cause:s}),a))):(s!==pn&&jn(Ks(t=Error(i(423),{cause:s}),a)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,s=Ks(s,a),jr(e,n=El(e.stateNode,s,n)),4!==wc&&(wc=2)),!1;var r=Error(i(520),{cause:s});if(r=Ks(r,a),null===Ac?Ac=[r]:Ac.push(r),4!==wc&&(wc=2),null===t)return!0;s=Ks(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,jr(a,e=El(a.stateNode,s,e)),!1;case 1:if(t=a.type,r=a.stateNode,0===(128&a.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Rc||!Rc.has(r))))return a.flags|=65536,n&=-n,a.lanes|=n,Pl(n=Al(n),e,a,s),jr(a,n),!1}a=a.return}while(null!==a);return!1}(e,n,t,a,fc))return wc=1,kl(e,Ks(a,e.current)),void(xc=null)}catch(r){if(null!==n)throw xc=n,r;return wc=1,kl(e,Ks(a,e.current)),void(xc=null)}32768&t.flags?(un||1===s?e=!0:yc||0!==(536870912&fc)?e=!1:(bc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=Mr.current)&&13===s.tag&&(s.flags|=16384))),pd(t,e)):hd(t)}function hd(e){var t=e;do{if(0!==(32768&t.flags))return void pd(t,bc);e=t.return;var a=ho(t.alternate,t,Nc);if(null!==a)return void(xc=a);if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===wc&&(wc=5)}function pd(e,t){do{var a=po(e.alternate,e);if(null!==a)return a.flags&=32767,void(xc=a);if(null!==(a=e.return)&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&null!==(e=e.sibling))return void(xc=e);xc=e=a}while(null!==e);wc=6,xc=null}function xd(e,t,a,s,n,r,l,o,c){e.cancelPendingCommit=null;do{yd()}while(0!==Lc);if(0!==(6&hc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(r=t.lanes|t.childLanes,function(e,t,a,s,n,r){var i=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(a=i&~a;0<a;){var d=31-ye(a),u=1<<d;l[d]=0,o[d]=-1;var m=c[d];if(null!==m)for(c[d]=null,d=0;d<m.length;d++){var h=m[d];null!==h&&(h.lane&=-536870913)}a&=~u}0!==s&&Te(e,s,0),0!==r&&0===n&&0!==e.tag&&(e.suspendedLanes|=r&~(i&~t))}(e,a,r|=Es,l,o,c),e===pc&&(xc=pc=null,fc=0),zc=t,Fc=e,Bc=a,Uc=r,Hc=n,qc=s,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ne(me,function(){return jd(),null})):(e.callbackNode=null,e.callbackPriority=0),s=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||s){s=D.T,D.T=null,n=I.p,I.p=2,l=hc,hc|=4;try{!function(e,t){if(e=e.containerInfo,pu=bm,ss(e=as(e))){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(s&&0!==s.rangeCount){a=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{a.nodeType,r.nodeType}catch(f){a=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==a||0!==n&&3!==m.nodeType||(o=l+n),m!==r||0!==s&&3!==m.nodeType||(c=l+s),3===m.nodeType&&(l+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break t;if(h===a&&++d===n&&(o=l),h===r&&++u===s&&(c=l),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}a=-1===o||-1===c?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(xu={focusedElem:e,selectionRange:a},bm=!1,To=t;null!==To;)if(e=(t=To).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,To=e;else for(;null!==To;){switch(r=(t=To).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(a=0;a<e.length;a++)(n=e[a]).ref.impl=n.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,a=t,n=r.memoizedProps,r=r.memoizedState,s=a.stateNode;try{var x=Nl(a.type,n);e=s.getSnapshotBeforeUpdate(x,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(g){wd(a,a.return,g)}}break;case 3:if(0!==(1024&e))if(9===(a=(e=t.stateNode.containerInfo).nodeType))Au(e);else if(1===a)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Au(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,To=e;break}To=t.return}}(e,t)}finally{hc=l,I.p=n,D.T=s}}Lc=1,fd(),gd(),vd()}}function fd(){if(1===Lc){Lc=0;var e=Fc,t=zc,a=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||a){a=D.T,D.T=null;var s=I.p;I.p=2;var n=hc;hc|=4;try{Wo(t,e);var r=xu,i=as(e.containerInfo),l=r.focusedElem,o=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&ts(l.ownerDocument.documentElement,l)){if(null!==o&&ss(l)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var u=l.ownerDocument||document,m=u&&u.defaultView||window;if(m.getSelection){var h=m.getSelection(),p=l.textContent.length,x=Math.min(o.start,p),f=void 0===o.end?x:Math.min(o.end,p);!h.extend&&x>f&&(i=f,f=x,x=i);var g=es(l,x),v=es(l,f);if(g&&v&&(1!==h.rangeCount||h.anchorNode!==g.node||h.anchorOffset!==g.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var b=u.createRange();b.setStart(g.node,g.offset),h.removeAllRanges(),x>f?(h.addRange(b),h.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),h.addRange(b))}}}}for(u=[],h=l;h=h.parentNode;)1===h.nodeType&&u.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"===typeof l.focus&&l.focus(),l=0;l<u.length;l++){var y=u[l];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}bm=!!pu,xu=pu=null}finally{hc=n,I.p=s,D.T=a}}e.current=t,Lc=2}}function gd(){if(2===Lc){Lc=0;var e=Fc,t=zc,a=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||a){a=D.T,D.T=null;var s=I.p;I.p=2;var n=hc;hc|=4;try{Do(e,t.alternate,t)}finally{hc=n,I.p=s,D.T=a}}Lc=3}}function vd(){if(4===Lc||3===Lc){Lc=0,le();var e=Fc,t=zc,a=Bc,s=qc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Lc=5:(Lc=0,zc=Fc=null,bd(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Rc=null),Le(a),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ge,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==s){t=D.T,n=I.p,I.p=2,D.T=null;try{for(var r=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];r(l.value,{componentStack:l.stack})}}finally{D.T=t,I.p=n}}0!==(3&Bc)&&yd(),Id(e),n=e.pendingLanes,0!==(261930&a)&&0!==(42&n)?e===Wc?Vc++:(Vc=0,Wc=e):Vc=0,Rd(0,!1)}}function bd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bn(t)))}function yd(){return fd(),gd(),vd(),jd()}function jd(){if(5!==Lc)return!1;var e=Fc,t=Uc;Uc=0;var a=Le(Bc),s=D.T,n=I.p;try{I.p=32>a?32:a,D.T=null,a=Hc,Hc=null;var r=Fc,l=Bc;if(Lc=0,zc=Fc=null,Bc=0,0!==(6&hc))throw Error(i(331));var o=hc;if(hc|=4,oc(r.current),ec(r,r.current,l,a),hc=o,Rd(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ge,r)}catch(c){}return!0}finally{I.p=n,D.T=s,bd(e,t)}}function Nd(e,t,a){t=Ks(a,t),null!==(e=br(e,t=El(e.stateNode,t,2),2))&&(Me(e,2),Id(e))}function wd(e,t,a){if(3===e.tag)Nd(e,e,a);else for(;null!==t;){if(3===t.tag){Nd(t,e,a);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Rc||!Rc.has(s))){e=Ks(a,e),null!==(s=br(t,a=Al(2),2))&&(Pl(a,s,t,e),Me(s,2),Id(s));break}}t=t.return}}function Sd(e,t,a){var s=e.pingCache;if(null===s){s=e.pingCache=new mc;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(a)||(jc=!0,n.add(a),e=_d.bind(null,e,t,a),t.then(e,e))}function _d(e,t,a){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,pc===e&&(fc&a)===a&&(4===wc||3===wc&&(62914560&fc)===fc&&300>oe()-Mc?0===(2&hc)&&td(e,0):kc|=a,Ec===fc&&(Ec=0)),Id(e)}function kd(e,t){0===t&&(t=Pe()),null!==(e=Ms(e,t))&&(Me(e,t),Id(e))}function Cd(e){var t=e.memoizedState,a=0;null!==t&&(a=t.retryLane),kd(e,a)}function Ed(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==s&&s.delete(t),kd(e,a)}var Ad=null,Pd=null,Od=!1,Md=!1,Td=!1,Dd=0;function Id(e){e!==Pd&&null===e.next&&(null===Pd?Ad=Pd=e:Pd=Pd.next=e),Md=!0,Od||(Od=!0,Su(function(){0!==(6&hc)?ne(de,Ld):Fd()}))}function Rd(e,t){if(!Td&&Md){Td=!0;do{for(var a=!1,s=Ad;null!==s;){if(!t)if(0!==e){var n=s.pendingLanes;if(0===n)var r=0;else{var i=s.suspendedLanes,l=s.pingedLanes;r=(1<<31-ye(42|e)+1)-1,r=201326741&(r&=n&~(i&~l))?201326741&r|1:r?2|r:0}0!==r&&(a=!0,Ud(s,r))}else r=fc,0===(3&(r=Ce(s,s===pc?r:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||Ee(s,r)||(a=!0,Ud(s,r));s=s.next}}while(a);Td=!1}}function Ld(){Fd()}function Fd(){Md=Od=!1;var e=0;0!==Dd&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==yu&&(yu=e,!0);return yu=null,!1}()&&(e=Dd);for(var t=oe(),a=null,s=Ad;null!==s;){var n=s.next,r=zd(s,t);0===r?(s.next=null,null===a?Ad=n:a.next=n,null===n&&(Pd=a)):(a=s,(0!==e||0!==(3&r))&&(Md=!0)),s=n}0!==Lc&&5!==Lc||Rd(e,!1),0!==Dd&&(Dd=0)}function zd(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var i=31-ye(r),l=1<<i,o=n[i];-1===o?0!==(l&a)&&0===(l&s)||(n[i]=Ae(l,t)):o<=t&&(e.expiredLanes|=l),r&=~l}if(a=fc,a=Ce(e,e===(t=pc)?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),s=e.callbackNode,0===a||e===t&&(2===gc||9===gc)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&re(s),e.callbackNode=null,e.callbackPriority=0;if(0===(3&a)||Ee(e,a)){if((t=a&-a)===e.callbackPriority)return t;switch(null!==s&&re(s),Le(a)){case 2:case 8:a=ue;break;case 32:default:a=me;break;case 268435456:a=pe}return s=Bd.bind(null,e),a=ne(a,s),e.callbackPriority=t,e.callbackNode=a,t}return null!==s&&null!==s&&re(s),e.callbackPriority=2,e.callbackNode=null,2}function Bd(e,t){if(0!==Lc&&5!==Lc)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(yd()&&e.callbackNode!==a)return null;var s=fc;return 0===(s=Ce(e,e===pc?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,s,t),zd(e,oe()),null!=e.callbackNode&&e.callbackNode===a?Bd.bind(null,e):null)}function Ud(e,t){if(yd())return null;Jc(e,t,!0)}function Hd(){if(0===Dd){var e=qn;0===e&&(e=we,0===(261888&(we<<=1))&&(we=256)),Dd=e}return Dd}function qd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ot(""+e)}function Vd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}for(var Wd=0;Wd<ws.length;Wd++){var Gd=ws[Wd];Ss(Gd.toLowerCase(),"on"+(Gd[0].toUpperCase()+Gd.slice(1)))}Ss(xs,"onAnimationEnd"),Ss(fs,"onAnimationIteration"),Ss(gs,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(vs,"onTransitionRun"),Ss(bs,"onTransitionStart"),Ss(ys,"onTransitionCancel"),Ss(js,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kd));function Jd(e,t){t=0!==(4&t);for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==r&&n.isPropagationStopped())break e;r=l,n.currentTarget=c;try{r(n)}catch(d){_s(d)}n.currentTarget=null,r=o}else for(i=0;i<s.length;i++){if(o=(l=s[i]).instance,c=l.currentTarget,l=l.listener,o!==r&&n.isPropagationStopped())break e;r=l,n.currentTarget=c;try{r(n)}catch(d){_s(d)}n.currentTarget=null,r=o}}}}function $d(e,t){var a=t[Ve];void 0===a&&(a=t[Ve]=new Set);var s=e+"__bubble";a.has(s)||(eu(t,e,2,!1),a.add(s))}function Qd(e,t,a){var s=0;t&&(s|=4),eu(a,e,s,t)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[Xd]){e[Xd]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yd.has(t)||Qd(t,!1,e),Qd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xd]||(t[Xd]=!0,Qd("selectionchange",!1,t))}}function eu(e,t,a,s){switch(km(t)){case 2:var n=ym;break;case 8:n=jm;break;default:n=Nm}a=n.bind(null,t,a,e),n=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):void 0!==n?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function tu(e,t,a,s,n){var r=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var l=s.stateNode.containerInfo;if(l===n)break;if(4===i)for(i=s.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===n)return;i=i.return}for(;null!==l;){if(null===(i=$e(l)))return;if(5===(c=i.tag)||6===c||26===c||27===c){s=r=i;continue e}l=l.parentNode}}s=s.return}zt(function(){var s=r,n=Dt(a),i=[];e:{var l=Ns.get(e);if(void 0!==l){var c=aa,d=e;switch(e){case"keypress":if(0===Yt(a))break e;case"keydown":case"keyup":c=ga;break;case"focusin":d="focus",c=oa;break;case"focusout":d="blur",c=oa;break;case"beforeblur":case"afterblur":c=oa;break;case"click":if(2===a.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=la;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=ba;break;case xs:case fs:case gs:c=ca;break;case js:c=ya;break;case"scroll":case"scrollend":c=na;break;case"wheel":c=ja;break;case"copy":case"cut":case"paste":c=da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=va;break;case"toggle":case"beforetoggle":c=Na}var u=0!==(4&t),m=!u&&("scroll"===e||"scrollend"===e),h=u?null!==l?l+"Capture":null:l;u=[];for(var p,x=s;null!==x;){var f=x;if(p=f.stateNode,5!==(f=f.tag)&&26!==f&&27!==f||null===p||null===h||null!=(f=Bt(x,h))&&u.push(au(x,f,p)),m)break;x=x.return}0<u.length&&(l=new c(l,d,null,a,n),i.push({event:l,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||a===Tt||!(d=a.relatedTarget||a.fromElement)||!$e(d)&&!d[qe])&&(c||l)&&(l=n.window===n?n:(l=n.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=s,null!==(d=(d=a.relatedTarget||a.toElement)?$e(d):null)&&(m=o(d),u=d.tag,d!==m||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=s),c!==d)){if(u=ia,f="onMouseLeave",h="onMouseEnter",x="mouse","pointerout"!==e&&"pointerover"!==e||(u=va,f="onPointerLeave",h="onPointerEnter",x="pointer"),m=null==c?l:Xe(c),p=null==d?l:Xe(d),(l=new u(f,x+"leave",c,a,n)).target=m,l.relatedTarget=p,f=null,$e(n)===s&&((u=new u(h,x+"enter",d,a,n)).target=p,u.relatedTarget=m,f=u),m=f,c&&d)e:{for(u=nu,x=d,p=0,f=h=c;f;f=u(f))p++;f=0;for(var g=x;g;g=u(g))f++;for(;0<p-f;)h=u(h),p--;for(;0<f-p;)x=u(x),f--;for(;p--;){if(h===x||null!==x&&h===x.alternate){u=h;break e}h=u(h),x=u(x)}u=null}else u=null;null!==c&&ru(i,l,c,u,!1),null!==d&&null!==m&&ru(i,m,d,u,!0)}if("select"===(c=(l=s?Xe(s):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var v=Ba;else if(Da(l))if(Ua)v=$a;else{v=Ya;var b=Ka}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?s&&Et(s.elementType)&&(v=Ba):v=Ja;switch(v&&(v=v(e,s))?Ia(i,v,a,n):(b&&b(e,l,s),"focusout"===e&&s&&"number"===l.type&&null!=s.memoizedProps.value&&yt(l,"number",l.value)),b=s?Xe(s):window,e){case"focusin":(Da(b)||"true"===b.contentEditable)&&(rs=b,is=s,ls=null);break;case"focusout":ls=is=rs=null;break;case"mousedown":os=!0;break;case"contextmenu":case"mouseup":case"dragend":os=!1,cs(i,a,n);break;case"selectionchange":if(ns)break;case"keydown":case"keyup":cs(i,a,n)}var y;if(Sa)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ma?Pa(e,a)&&(j="onCompositionEnd"):"keydown"===e&&229===a.keyCode&&(j="onCompositionStart");j&&(Ca&&"ko"!==a.locale&&(Ma||"onCompositionStart"!==j?"onCompositionEnd"===j&&Ma&&(y=Kt()):(Wt="value"in(Vt=n)?Vt.value:Vt.textContent,Ma=!0)),0<(b=su(s,j)).length&&(j=new ua(j,e,null,a,n),i.push({event:j,listeners:b}),y?j.data=y:null!==(y=Oa(a))&&(j.data=y))),(y=ka?function(e,t){switch(e){case"compositionend":return Oa(t);case"keypress":return 32!==t.which?null:(Aa=!0,Ea);case"textInput":return(e=t.data)===Ea&&Aa?null:e;default:return null}}(e,a):function(e,t){if(Ma)return"compositionend"===e||!Sa&&Pa(e,t)?(e=Kt(),Gt=Wt=Vt=null,Ma=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ca&&"ko"!==t.locale?null:t.data}}(e,a))&&(0<(j=su(s,"onBeforeInput")).length&&(b=new ua("onBeforeInput","beforeinput",null,a,n),i.push({event:b,listeners:j}),b.data=y)),function(e,t,a,s,n){if("submit"===t&&a&&a.stateNode===n){var r=qd((n[He]||null).action),i=s.submitter;i&&null!==(t=(t=i[He]||null)?qd(t.formAction):i.getAttribute("formAction"))&&(r=t,i=null);var l=new aa("action","action",null,s,n);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==Dd){var e=i?Vd(n,i):new FormData(n);el(a,{pending:!0,data:e,method:n.method,action:r},null,e)}}else"function"===typeof r&&(l.preventDefault(),e=i?Vd(n,i):new FormData(n),el(a,{pending:!0,data:e,method:n.method,action:r},r,e))},currentTarget:n}]})}}(i,e,s,a,n)}Jd(i,t)})}function au(e,t,a){return{instance:e,listener:t,currentTarget:a}}function su(e,t){for(var a=t+"Capture",s=[];null!==e;){var n=e,r=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===r||(null!=(n=Bt(e,a))&&s.unshift(au(e,n,r)),null!=(n=Bt(e,t))&&s.push(au(e,n,r))),3===e.tag)return s;e=e.return}return[]}function nu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ru(e,t,a,s,n){for(var r=t._reactName,i=[];null!==a&&a!==s;){var l=a,o=l.alternate,c=l.stateNode;if(l=l.tag,null!==o&&o===s)break;5!==l&&26!==l&&27!==l||null===c||(o=c,n?null!=(c=Bt(a,r))&&i.unshift(au(a,c,o)):n||null!=(c=Bt(a,r))&&i.push(au(a,c,o))),a=a.return}0!==i.length&&e.push({event:t,listeners:i})}var iu=/\r\n?/g,lu=/\u0000|\uFFFD/g;function ou(e){return("string"===typeof e?e:""+e).replace(iu,"\n").replace(lu,"")}function cu(e,t){return t=ou(t),ou(e)===t}function du(e,t,a,s,n,r){switch(a){case"children":"string"===typeof s?"body"===t||"textarea"===t&&""===s||St(e,s):("number"===typeof s||"bigint"===typeof s)&&"body"!==t&&St(e,""+s);break;case"className":ct(e,"class",s);break;case"tabIndex":ct(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,a,s);break;case"style":Ct(e,s,r);break;case"data":if("object"!==t){ct(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==a)){e.removeAttribute(a);break}if(null==s||"function"===typeof s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(a);break}s=Ot(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if("function"===typeof s){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===a?("input"!==t&&du(e,t,"name",n.name,n,null),du(e,t,"formEncType",n.formEncType,n,null),du(e,t,"formMethod",n.formMethod,n,null),du(e,t,"formTarget",n.formTarget,n,null)):(du(e,t,"encType",n.encType,n,null),du(e,t,"method",n.method,n,null),du(e,t,"target",n.target,n,null))),null==s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(a);break}s=Ot(""+s),e.setAttribute(a,s);break;case"onClick":null!=s&&(e.onclick=Mt);break;case"onScroll":null!=s&&$d("scroll",e);break;case"onScrollEnd":null!=s&&$d("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(i(61));if(null!=(a=s.__html)){if(null!=n.children)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"muted":e.muted=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"===typeof s||"boolean"===typeof s||"symbol"===typeof s){e.removeAttribute("xlink:href");break}a=Ot(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":!0===s?e.setAttribute(a,""):!1!==s&&null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":null==s||"function"===typeof s||"symbol"===typeof s||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":$d("beforetoggle",e),$d("toggle",e),ot(e,"popover",s);break;case"xlinkActuate":dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":dt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":dt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":dt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":dt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ot(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&ot(e,a=At.get(a)||a,s)}}function uu(e,t,a,s,n,r){switch(a){case"style":Ct(e,s,r);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(i(61));if(null!=(a=s.__html)){if(null!=n.children)throw Error(i(60));e.innerHTML=a}}break;case"children":"string"===typeof s?St(e,s):("number"===typeof s||"bigint"===typeof s)&&St(e,""+s);break;case"onScroll":null!=s&&$d("scroll",e);break;case"onScrollEnd":null!=s&&$d("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Mt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:at.hasOwnProperty(a)||("o"!==a[0]||"n"!==a[1]||(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),"function"===typeof(r=null!=(r=e[He]||null)?r[a]:null)&&e.removeEventListener(t,r,n),"function"!==typeof s)?a in e?e[a]=s:!0===s?e.setAttribute(a,""):ot(e,a,s):("function"!==typeof r&&null!==r&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n)))}}function mu(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$d("error",e),$d("load",e);var s,n=!1,r=!1;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];if(null!=l)switch(s){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:du(e,t,s,l,a,null)}}return r&&du(e,t,"srcSet",a.srcSet,a,null),void(n&&du(e,t,"src",a.src,a,null));case"input":$d("invalid",e);var o=s=l=r=null,c=null,d=null;for(n in a)if(a.hasOwnProperty(n)){var u=a[n];if(null!=u)switch(n){case"name":r=u;break;case"type":l=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":s=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(i(137,t));break;default:du(e,t,n,u,a,null)}}return void bt(e,s,o,c,d,l,r,!1);case"select":for(r in $d("invalid",e),n=l=s=null,a)if(a.hasOwnProperty(r)&&null!=(o=a[r]))switch(r){case"value":s=o;break;case"defaultValue":l=o;break;case"multiple":n=o;default:du(e,t,r,o,a,null)}return t=s,a=l,e.multiple=!!n,void(null!=t?jt(e,!!n,t,!1):null!=a&&jt(e,!!n,a,!0));case"textarea":for(l in $d("invalid",e),s=r=n=null,a)if(a.hasOwnProperty(l)&&null!=(o=a[l]))switch(l){case"value":n=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:du(e,t,l,o,a,null)}return void wt(e,n,r,s);case"option":for(c in a)if(a.hasOwnProperty(c)&&null!=(n=a[c]))if("selected"===c)e.selected=n&&"function"!==typeof n&&"symbol"!==typeof n;else du(e,t,c,n,a,null);return;case"dialog":$d("beforetoggle",e),$d("toggle",e),$d("cancel",e),$d("close",e);break;case"iframe":case"object":$d("load",e);break;case"video":case"audio":for(n=0;n<Kd.length;n++)$d(Kd[n],e);break;case"image":$d("error",e),$d("load",e);break;case"details":$d("toggle",e);break;case"embed":case"source":case"link":$d("error",e),$d("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&null!=(n=a[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:du(e,t,d,n,a,null)}return;default:if(Et(t)){for(u in a)a.hasOwnProperty(u)&&(void 0!==(n=a[u])&&uu(e,t,u,n,a,void 0));return}}for(o in a)a.hasOwnProperty(o)&&(null!=(n=a[o])&&du(e,t,o,n,a,null))}function hu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pu=null,xu=null;function fu(e){return 9===e.nodeType?e:e.ownerDocument}function gu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yu=null;var ju="function"===typeof setTimeout?setTimeout:void 0,Nu="function"===typeof clearTimeout?clearTimeout:void 0,wu="function"===typeof Promise?Promise:void 0,Su="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof wu?function(e){return wu.resolve(null).then(e).catch(_u)}:ju;function _u(e){setTimeout(function(){throw e})}function ku(e){return"head"===e}function Cu(e,t){var a=t,s=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&8===n.nodeType)if("/$"===(a=n.data)||"/&"===a){if(0===s)return e.removeChild(n),void Vm(t);s--}else if("$"===a||"$?"===a||"$~"===a||"$!"===a||"&"===a)s++;else if("html"===a)Fu(e.ownerDocument.documentElement);else if("head"===a){Fu(a=e.ownerDocument.head);for(var r=a.firstChild;r;){var i=r.nextSibling,l=r.nodeName;r[Ye]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===r.rel.toLowerCase()||a.removeChild(r),r=i}}else"body"===a&&Fu(e.ownerDocument.body);a=n}while(a);Vm(t)}function Eu(e,t){var a=e;e=0;do{var s=a.nextSibling;if(1===a.nodeType?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",""===a.getAttribute("style")&&a.removeAttribute("style")):3===a.nodeType&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&8===s.nodeType)if("/$"===(a=s.data)){if(0===e)break;e--}else"$"!==a&&"$?"!==a&&"$~"!==a&&"$!"!==a||e++;a=s}while(a)}function Au(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Au(a),Je(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===a.rel.toLowerCase())continue}e.removeChild(a)}}function Pu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Tu(e.nextSibling)))return null}return e}function Ou(e){return"$?"===e.data||"$~"===e.data}function Mu(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Tu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Du=null;function Iu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("/$"===a||"/&"===a){if(0===t)return Tu(e.nextSibling);t--}else"$"!==a&&"$!"!==a&&"$?"!==a&&"$~"!==a&&"&"!==a||t++}e=e.nextSibling}return null}function Ru(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("$"===a||"$!"===a||"$?"===a||"$~"===a||"&"===a){if(0===t)return e;t--}else"/$"!==a&&"/&"!==a||t++}e=e.previousSibling}return null}function Lu(e,t,a){switch(t=fu(a),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Fu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var zu=new Map,Bu=new Set;function Uu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hu=I.d;I.d={f:function(){var e=Hu.f(),t=Zc();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?al(t):Hu.r(e)},D:function(e){Hu.D(e),Vu("dns-prefetch",e,null)},C:function(e,t){Hu.C(e,t),Vu("preconnect",e,t)},L:function(e,t,a){Hu.L(e,t,a);var s=qu;if(s&&e&&t){var n='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&a&&a.imageSrcSet?(n+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',"string"===typeof a.imageSizes&&(n+='[imagesizes="'+gt(a.imageSizes)+'"]')):n+='[href="'+gt(e)+'"]';var r=n;switch(t){case"style":r=Gu(e);break;case"script":r=Ju(e)}zu.has(r)||(e=h({rel:"preload",href:"image"===t&&a&&a.imageSrcSet?void 0:e,as:t},a),zu.set(r,e),null!==s.querySelector(n)||"style"===t&&s.querySelector(Ku(r))||"script"===t&&s.querySelector($u(r))||(mu(t=s.createElement("link"),"link",e),et(t),s.head.appendChild(t)))}},m:function(e,t){Hu.m(e,t);var a=qu;if(a&&e){var s=t&&"string"===typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+gt(s)+'"][href="'+gt(e)+'"]',r=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ju(e)}if(!zu.has(r)&&(e=h({rel:"modulepreload",href:e},t),zu.set(r,e),null===a.querySelector(n))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($u(r)))return}mu(s=a.createElement("link"),"link",e),et(s),a.head.appendChild(s)}}},X:function(e,t){Hu.X(e,t);var a=qu;if(a&&e){var s=Ze(a).hoistableScripts,n=Ju(e),r=s.get(n);r||((r=a.querySelector($u(n)))||(e=h({src:e,async:!0},t),(t=zu.get(n))&&em(e,t),et(r=a.createElement("script")),mu(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}},S:function(e,t,a){Hu.S(e,t,a);var s=qu;if(s&&e){var n=Ze(s).hoistableStyles,r=Gu(e);t=t||"default";var i=n.get(r);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(Ku(r)))l.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},a),(a=zu.get(r))&&Zu(e,a);var o=i=s.createElement("link");et(o),mu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Xu(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},n.set(r,i)}}},M:function(e,t){Hu.M(e,t);var a=qu;if(a&&e){var s=Ze(a).hoistableScripts,n=Ju(e),r=s.get(n);r||((r=a.querySelector($u(n)))||(e=h({src:e,async:!0,type:"module"},t),(t=zu.get(n))&&em(e,t),et(r=a.createElement("script")),mu(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}};var qu="undefined"===typeof document?null:document;function Vu(e,t,a){var s=qu;if(s&&"string"===typeof t&&t){var n=gt(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"===typeof a&&(n+='[crossorigin="'+a+'"]'),Bu.has(n)||(Bu.add(n),e={rel:e,crossOrigin:a,href:t},null===s.querySelector(n)&&(mu(t=s.createElement("link"),"link",e),et(t),s.head.appendChild(t)))}}function Wu(e,t,a,s){var n,r,l,o,c=(c=G.current)?Uu(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof a.precedence&&"string"===typeof a.href?(t=Gu(a.href),(s=(a=Ze(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===a.rel&&"string"===typeof a.href&&"string"===typeof a.precedence){e=Gu(a.href);var d=Ze(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Ku(e)))&&!d._p&&(u.instance=d,u.state.loading=5),zu.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zu.set(e,a),d||(n=c,r=e,l=a,o=u.state,n.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=n.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),mu(r,"link",l),et(r),n.head.appendChild(r))))),t&&null===s)throw Error(i(528,""));return u}if(t&&null!==s)throw Error(i(529,""));return null;case"script":return t=a.async,"string"===typeof(a=a.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ju(a),(s=(a=Ze(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Gu(e){return'href="'+gt(e)+'"'}function Ku(e){return'link[rel="stylesheet"]['+e+"]"}function Yu(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Ju(e){return'[src="'+gt(e)+'"]'}function $u(e){return"script[async]"+e}function Qu(e,t,a){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+gt(a.href)+'"]');if(s)return t.instance=s,et(s),s;var n=h({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return et(s=(e.ownerDocument||e).createElement("style")),mu(s,"style",n),Xu(s,a.precedence,e),t.instance=s;case"stylesheet":n=Gu(a.href);var r=e.querySelector(Ku(n));if(r)return t.state.loading|=4,t.instance=r,et(r),r;s=Yu(a),(n=zu.get(n))&&Zu(s,n),et(r=(e.ownerDocument||e).createElement("link"));var l=r;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),mu(r,"link",s),t.state.loading|=4,Xu(r,a.precedence,e),t.instance=r;case"script":return r=Ju(a.src),(n=e.querySelector($u(r)))?(t.instance=n,et(n),n):(s=a,(n=zu.get(r))&&em(s=h({},a),n),et(n=(e=e.ownerDocument||e).createElement("script")),mu(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,Xu(s,a.precedence,e));return t.instance}function Xu(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,r=n,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)r=l;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===a.nodeType?a.head:a).insertBefore(e,t.firstChild)}function Zu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function em(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var tm=null;function am(e,t,a){if(null===tm){var s=new Map,n=tm=new Map;n.set(a,s)}else(s=(n=tm).get(a))||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var r=a[n];if(!(r[Ye]||r[Ue]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var i=r.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(r):s.set(i,[r])}}return s}function sm(e,t,a){(e=e.ownerDocument||e).head.insertBefore(a,"title"===t?e.querySelector("head > title"):null)}function nm(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var rm=0;function im(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)om(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lm=null;function om(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lm=new Map,t.forEach(cm,e),lm=null,im.call(e))}function cm(e,t){if(!(4&t.state.loading)){var a=lm.get(e);if(a)var s=a.get(null);else{a=new Map,lm.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var i=n[r];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(a.set(i.dataset.precedence,i),s=i)}s&&a.set(null,s)}i=(n=t.instance).getAttribute("data-precedence"),(r=a.get(i)||s)===s&&a.set(null,n),a.set(i,n),this.count++,s=im.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),r?r.parentNode.insertBefore(n,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}var dm={$$typeof:j,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function um(e,t,a,s,n,r,i,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function mm(e,t,a,s,n,r,i,l,o,c,d,u){return e=new um(e,t,a,i,o,c,d,u,l),t=1,!0===r&&(t|=24),r=Ls(3,null,null,t),e.current=r,r.stateNode=e,(t=zn()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:a,cache:t},fr(r),e}function hm(e){return e?e=Is:Is}function pm(e,t,a,s,n,r){n=hm(n),null===s.context?s.context=n:s.pendingContext=n,(s=vr(t)).payload={element:a},null!==(r=void 0===r?null:r)&&(s.callback=r),null!==(a=br(e,s,t))&&(Yc(a,0,t),yr(a,e,t))}function xm(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var a=e.retryLane;e.retryLane=0!==a&&a<t?a:t}}function fm(e,t){xm(e,t),(e=e.alternate)&&xm(e,t)}function gm(e){if(13===e.tag||31===e.tag){var t=Ms(e,67108864);null!==t&&Yc(t,0,67108864),fm(e,67108864)}}function vm(e){if(13===e.tag||31===e.tag){var t=Gc(),a=Ms(e,t=Re(t));null!==a&&Yc(a,0,t),fm(e,t)}}var bm=!0;function ym(e,t,a,s){var n=D.T;D.T=null;var r=I.p;try{I.p=2,Nm(e,t,a,s)}finally{I.p=r,D.T=n}}function jm(e,t,a,s){var n=D.T;D.T=null;var r=I.p;try{I.p=8,Nm(e,t,a,s)}finally{I.p=r,D.T=n}}function Nm(e,t,a,s){if(bm){var n=wm(s);if(null===n)tu(e,t,s,Sm,a),Im(e,s);else if(function(e,t,a,s,n){switch(t){case"focusin":return Em=Rm(Em,e,t,a,s,n),!0;case"dragenter":return Am=Rm(Am,e,t,a,s,n),!0;case"mouseover":return Pm=Rm(Pm,e,t,a,s,n),!0;case"pointerover":var r=n.pointerId;return Om.set(r,Rm(Om.get(r)||null,e,t,a,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Mm.set(r,Rm(Mm.get(r)||null,e,t,a,s,n)),!0}return!1}(n,e,t,a,s))s.stopPropagation();else if(Im(e,s),4&t&&-1<Dm.indexOf(e)){for(;null!==n;){var r=Qe(n);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var i=ke(r.pendingLanes);if(0!==i){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var o=1<<31-ye(i);l.entanglements[1]|=o,i&=~o}Id(r),0===(6&hc)&&(Dc=oe()+500,Rd(0,!1))}}break;case 31:case 13:null!==(l=Ms(r,2))&&Yc(l,0,2),Zc(),fm(r,2)}if(null===(r=wm(s))&&tu(e,t,s,Sm,a),r===n)break;n=r}null!==n&&s.stopPropagation()}else tu(e,t,s,null,a)}}function wm(e){return _m(e=Dt(e))}var Sm=null;function _m(e){if(Sm=null,null!==(e=$e(e))){var t=o(e);if(null===t)e=null;else{var a=t.tag;if(13===a){if(null!==(e=c(t)))return e;e=null}else if(31===a){if(null!==(e=d(t)))return e;e=null}else if(3===a){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sm=e,null}function km(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case ue:return 8;case me:case he:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Cm=!1,Em=null,Am=null,Pm=null,Om=new Map,Mm=new Map,Tm=[],Dm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Im(e,t){switch(e){case"focusin":case"focusout":Em=null;break;case"dragenter":case"dragleave":Am=null;break;case"mouseover":case"mouseout":Pm=null;break;case"pointerover":case"pointerout":Om.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mm.delete(t.pointerId)}}function Rm(e,t,a,s,n,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},null!==t&&(null!==(t=Qe(t))&&gm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Lm(e){var t=$e(e.target);if(null!==t){var a=o(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=c(a)))return e.blockedOn=t,void ze(e.priority,function(){vm(a)})}else if(31===t){if(null!==(t=d(a)))return e.blockedOn=t,void ze(e.priority,function(){vm(a)})}else if(3===t&&a.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===a.tag?a.stateNode.containerInfo:null)}e.blockedOn=null}function Fm(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var a=wm(e.nativeEvent);if(null!==a)return null!==(t=Qe(a))&&gm(t),e.blockedOn=a,!1;var s=new(a=e.nativeEvent).constructor(a.type,a);Tt=s,a.target.dispatchEvent(s),Tt=null,t.shift()}return!0}function zm(e,t,a){Fm(e)&&a.delete(t)}function Bm(){Cm=!1,null!==Em&&Fm(Em)&&(Em=null),null!==Am&&Fm(Am)&&(Am=null),null!==Pm&&Fm(Pm)&&(Pm=null),Om.forEach(zm),Mm.forEach(zm)}function Um(e,t){e.blockedOn===t&&(e.blockedOn=null,Cm||(Cm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bm)))}var Hm=null;function qm(e){Hm!==e&&(Hm=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hm===e&&(Hm=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if("function"!==typeof s){if(null===_m(s||a))continue;break}var r=Qe(a);null!==r&&(e.splice(t,3),t-=3,el(r,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function Vm(e){function t(t){return Um(t,e)}null!==Em&&Um(Em,e),null!==Am&&Um(Am,e),null!==Pm&&Um(Pm,e),Om.forEach(t),Mm.forEach(t);for(var a=0;a<Tm.length;a++){var s=Tm[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Tm.length&&null===(a=Tm[0]).blockedOn;)Lm(a),null===a.blockedOn&&Tm.shift();if(null!=(a=(e.ownerDocument||e).$$reactFormReplay))for(s=0;s<a.length;s+=3){var n=a[s],r=a[s+1],i=n[He]||null;if("function"===typeof r)i||qm(a);else if(i){var l=null;if(r&&r.hasAttribute("formAction")){if(n=r,i=r[He]||null)l=i.formAction;else if(null!==_m(n))continue}else l=i.action;"function"===typeof l?a[s+1]=l:(a.splice(s,3),s-=3),qm(a)}}}function Wm(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return n=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==n&&(n(),n=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==n&&(n(),n=null)}}}function Gm(e){this._internalRoot=e}function Km(e){this._internalRoot=e}Km.prototype.render=Gm.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));pm(t.current,Gc(),e,t,null,null)},Km.prototype.unmount=Gm.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pm(e.current,2,null,e,null,null),Zc(),t[qe]=null}},Km.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Tm.length&&0!==t&&t<Tm[a].priority;a++);Tm.splice(a,0,e),0===a&&Lm(e)}};var Ym=n.version;if("19.2.4"!==Ym)throw Error(i(527,Ym,"19.2.4"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(null===n)break;var r=n.alternate;if(null===r){if(null!==(s=n.return)){a=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===a)return u(n),e;if(r===s)return u(n),t;r=r.sibling}throw Error(i(188))}if(a.return!==s.return)a=n,s=r;else{for(var l=!1,c=n.child;c;){if(c===a){l=!0,a=n,s=r;break}if(c===s){l=!0,s=n,a=r;break}c=c.sibling}if(!l){for(c=r.child;c;){if(c===a){l=!0,a=r,s=n;break}if(c===s){l=!0,s=r,a=n;break}c=c.sibling}if(!l)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(3!==a.tag)throw Error(i(188));return a.stateNode.current===a?e:t}(t),e=null===(e=null!==e?m(e):null)?null:e.stateNode};var Jm={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$m.isDisabled&&$m.supportsFiber)try{ge=$m.inject(Jm),ve=$m}catch(Xm){}}t.createRoot=function(e,t){if(!l(e))throw Error(i(299));var a=!1,s="",n=wl,r=Sl,o=_l;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(n=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=mm(e,1,!1,null,0,a,s,null,n,r,o,Wm),e[qe]=t.current,Zd(e),new Gm(t)},t.hydrateRoot=function(e,t,a){if(!l(e))throw Error(i(299));var s=!1,n="",r=wl,o=Sl,c=_l,d=null;return null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(s=!0),void 0!==a.identifierPrefix&&(n=a.identifierPrefix),void 0!==a.onUncaughtError&&(r=a.onUncaughtError),void 0!==a.onCaughtError&&(o=a.onCaughtError),void 0!==a.onRecoverableError&&(c=a.onRecoverableError),void 0!==a.formState&&(d=a.formState)),(t=mm(e,1,!0,t,0,s,n,d,r,o,c,Wm)).context=hm(null),a=t.current,(n=vr(s=Re(s=Gc()))).callback=null,br(a,n,s),a=s,t.current.lanes=a,Me(t,a),Id(t),e[qe]=t.current,Zd(e),new Km(t)},t.version="19.2.4"},1863(e,t,a){"use strict";var s=a(9950);function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");var o=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,a){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==s?null:""+s,children:e,containerInfo:t,implementation:a}}(e,t,null,a)},t.flushSync=function(e){var t=o.T,a=i.p;try{if(o.T=null,i.p=2,e)return e()}finally{o.T=t,i.p=a,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var a=t.as,s=c(a,t.crossOrigin),n="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===a?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:r}):"script"===a&&i.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var a=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var a=t.as,s=c(a,t.crossOrigin);i.d.L(e,a,{crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var a=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,a){return o.H.useFormState(e,t,a)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.2.4"},1352(e,t,a){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(1085)},7119(e,t,a){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(1863)},8577(e,t){"use strict";var a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103,n=a?Symbol.for("react.portal"):60106,r=a?Symbol.for("react.fragment"):60107,i=a?Symbol.for("react.strict_mode"):60108,l=a?Symbol.for("react.profiler"):60114,o=a?Symbol.for("react.provider"):60109,c=a?Symbol.for("react.context"):60110,d=a?Symbol.for("react.async_mode"):60111,u=a?Symbol.for("react.concurrent_mode"):60111,m=a?Symbol.for("react.forward_ref"):60112,h=a?Symbol.for("react.suspense"):60113,p=a?Symbol.for("react.suspense_list"):60120,x=a?Symbol.for("react.memo"):60115,f=a?Symbol.for("react.lazy"):60116,g=a?Symbol.for("react.block"):60121,v=a?Symbol.for("react.fundamental"):60117,b=a?Symbol.for("react.responder"):60118,y=a?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case s:switch(e=e.type){case d:case u:case r:case l:case i:case h:return e;default:switch(e=e&&e.$$typeof){case c:case m:case f:case x:case o:return e;default:return t}}case n:return t}}}function N(e){return j(e)===u}t.isFragment=function(e){return j(e)===r}},6429(e,t,a){"use strict";e.exports=a(8577)},5520(e,t,a){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,s,n)}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useRazorpay=void 0;const l=r(a(9950)),o=i(a(4540));t.useRazorpay=()=>{const[e,t]=l.useState(!1),[a,s]=l.useState(),n="undefined"!==typeof window;return l.useEffect(()=>{var e;n&&(t(!0),n&&"Razorpay"in window||(e="https://checkout.razorpay.com/v1/checkout.js",new Promise((t,a)=>{const s=window.document.createElement("script");s.src=e,s.onload=function(){t()},s.onerror=function(e){a(e.toString())},document.body.appendChild(s)})).then(()=>{s(void 0)}).catch(e=>{e instanceof Error?s(e.message):s("Unknown Error")}).finally(()=>t(!1)))},[]),{error:a,isLoading:e,Razorpay:o.default}}},4540(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.instance=void 0,this.options=e,"undefined"!==typeof window&&(this.instance=new window.Razorpay(this.options))}on(e,t){if(!this.instance)throw new Error("Razorpay Instance in not ready");this.instance.on(e,t)}open(){if(!this.instance)throw new Error("Razorpay Instance in not ready");this.instance.open()}}},5418(e,t,a){var s;"undefined"!=typeof self&&self,e.exports=(s=a(9950),function(){"use strict";var e={155:function(e){e.exports=s}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};a.r(n),a.d(n,{useReactToPrint:function(){return x}});var r=a(155);const i="printWindow";function l(e){let{level:t="error",messages:a,suppressErrors:s=!1}=e;s||("error"===t?console.error(a):"warning"===t?console.warn(a):console.debug(a))}function o(e,t){if(t||!e){const e=document.getElementById(i);e&&document.body.removeChild(e)}}function c(e){return e instanceof Error?e:new Error("Unknown Error")}function d(e,t){const{documentTitle:a,onAfterPrint:s,onPrintError:n,preserveAfterPrint:r,print:i,suppressErrors:d}=t;setTimeout(()=>{var t,u;if(e.contentWindow){function m(){null==s||s(),o(r)}if(e.contentWindow.focus(),i)i(e).then(m).catch(e=>{n?n("print",c(e)):l({messages:["An error was thrown by the specified `print` function"],suppressErrors:d})});else{if(e.contentWindow.print){const h=null!==(u=null===(t=e.contentDocument)||void 0===t?void 0:t.title)&&void 0!==u?u:"",p=e.ownerDocument.title;a&&(e.ownerDocument.title=a,e.contentDocument&&(e.contentDocument.title=a)),e.contentWindow.print(),a&&(e.ownerDocument.title=p,e.contentDocument&&(e.contentDocument.title=h))}else l({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:d});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>{var t,a;return(null!==(a=null!==(t=navigator.userAgent)&&void 0!==t?t:navigator.vendor)&&void 0!==a?a:"opera"in window&&window.opera).match(e)})?setTimeout(m,500):m()}}else l({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:d})},500)}function u(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let s=a.nextNode();for(;s;)t.push(s),s=a.nextNode();return t}function m(e,t,a){const s=u(e),n=u(t);if(s.length===n.length)for(let r=0;r<s.length;r++){const e=s[r],t=n[r],i=e.shadowRoot;if(null!==i){const e=t.attachShadow({mode:i.mode});e.innerHTML=i.innerHTML,m(i,e,a)}}else l({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:a})}const h='\n    @page {\n        /* Remove browser default header (title) and footer (url) */\n        margin: 0;\n    }\n    @media print {\n        body {\n            /* Tell browsers to print background colors */\n            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */\n            print-color-adjust: exact; /* Firefox/Safari */\n            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n        }\n    }\n';function p(e,t,a,s){var n,r,i,o,u;const{contentNode:p,clonedContentNode:x,clonedImgNodes:f,clonedVideoNodes:g,numResourcesToLoad:v,originalCanvasNodes:b}=a,{bodyClass:y,fonts:j,ignoreGlobalStyles:N,pageStyle:w,nonce:S,suppressErrors:_,copyShadowRoots:k}=s;e.onload=null;const C=null!==(n=e.contentDocument)&&void 0!==n?n:null===(r=e.contentWindow)||void 0===r?void 0:r.document;if(C){const a=C.body.appendChild(x);k&&m(p,a,!!_),j&&((null===(i=e.contentDocument)||void 0===i?void 0:i.fonts)&&(null===(o=e.contentWindow)||void 0===o?void 0:o.FontFace)?j.forEach(a=>{const s=new FontFace(a.family,a.source,{weight:a.weight,style:a.style});e.contentDocument.fonts.add(s),s.loaded.then(()=>{t(s)}).catch(e=>{t(s,["Failed loading the font:",s,"Load error:",c(e)])})}):(j.forEach(e=>{t(e)}),l({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:_})));const s=null!=w?w:h,n=C.createElement("style");S&&(n.setAttribute("nonce",S),C.head.setAttribute("nonce",S)),n.appendChild(C.createTextNode(s)),C.head.appendChild(n),y&&C.body.classList.add(...y.split(" "));const r=C.querySelectorAll("canvas");for(let e=0;e<b.length;++e){const t=b[e],a=r[e];if(void 0===a){l({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",t],suppressErrors:_});continue}const s=a.getContext("2d");s&&s.drawImage(t,0,0)}for(let e=0;e<f.length;e++){const a=f[e],s=a.getAttribute("src");if(s){const e=new Image;e.onload=()=>{t(a)},e.onerror=(e,s,n,r,i)=>{t(a,["Error loading <img>",a,"Error",i])},e.src=s}else t(a,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',a])}for(let e=0;e<g.length;e++){const a=g[e];a.preload="auto";const s=a.getAttribute("poster");if(s){const e=new Image;e.onload=()=>{t(a)},e.onerror=(e,n,r,i,l)=>{t(a,["Error loading video poster",s,"for video",a,"Error:",l])},e.src=s}else a.readyState>=2?t(a):a.src?(a.onloadeddata=()=>{t(a)},a.onerror=(e,s,n,r,i)=>{t(a,["Error loading video",a,"Error",i])},a.onstalled=()=>{t(a,["Loading video stalled, skipping",a])}):t(a,["Error loading video, `src` is empty",a])}const d="select",v=p.querySelectorAll(d),E=C.querySelectorAll(d);for(let e=0;e<v.length;e++)E[e].value=v[e].value;if(!N){const a=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let s=0,n=a.length;s<n;++s){const n=a[s];if("style"===n.tagName.toLowerCase()){const t=C.createElement(n.tagName),a=n.sheet;if(a){let r="";try{const e=a.cssRules.length;for(let t=0;t<e;++t)"string"==typeof a.cssRules[t].cssText&&(r+="".concat(a.cssRules[t].cssText,"\r\n"))}catch(e){l({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",n,"Original error: ".concat(c(e).message)],level:"warning"})}t.setAttribute("id","react-to-print-".concat(s)),S&&t.setAttribute("nonce",S),t.appendChild(C.createTextNode(r)),C.head.appendChild(t)}}else if(n.getAttribute("href"))if(n.hasAttribute("disabled"))l({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",n],level:"warning"}),t(n);else{const e=C.createElement(n.tagName);for(let t=0,a=n.attributes.length;t<a;++t){const a=n.attributes[t];a&&e.setAttribute(a.nodeName,null!==(u=a.nodeValue)&&void 0!==u?u:"")}e.onload=()=>{t(e)},e.onerror=(a,s,n,r,i)=>{t(e,["Failed to load",e,"Error:",i])},S&&e.setAttribute("nonce",S),C.head.appendChild(e)}else l({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",n],level:"warning"}),t(n)}}}0===v&&d(e,s)}function x(e){let{bodyClass:t,contentRef:a,copyShadowRoots:s,documentTitle:n,fonts:u,ignoreGlobalStyles:m,nonce:h,onAfterPrint:x,onBeforePrint:f,onPrintError:g,pageStyle:v,preserveAfterPrint:b,print:y,printIframeProps:j,suppressErrors:N}=e;const w=(0,r.useCallback)(e=>{function r(){const r={bodyClass:t,contentRef:a,copyShadowRoots:s,documentTitle:n,fonts:u,ignoreGlobalStyles:m,nonce:h,onAfterPrint:x,onBeforePrint:f,onPrintError:g,pageStyle:v,preserveAfterPrint:b,print:y,printIframeProps:j,suppressErrors:N},o=function(e){const t=document.createElement("iframe");return t.width="".concat(document.documentElement.clientWidth,"px"),t.height="".concat(document.documentElement.clientHeight,"px"),t.style.position="absolute",t.style.top="-".concat(document.documentElement.clientHeight+100,"px"),t.style.left="-".concat(document.documentElement.clientWidth+100,"px"),t.id=i,t.srcdoc="<!DOCTYPE html>",e&&(e.allow&&(t.allow=e.allow),void 0!==e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),void 0!==e.sandbox&&(t.sandbox=e.sandbox)),t}(j),c=function(e,t){const{contentRef:a,fonts:s,ignoreGlobalStyles:n,suppressErrors:r}=t,i=function(e){let{contentRef:t,optionalContent:a,suppressErrors:s}=e;return a&&"function"==typeof a?(t&&l({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),a()):t?t.current:void l({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:s})}({contentRef:a,optionalContent:e,suppressErrors:r});if(!i)return;const o=i.cloneNode(!0),c=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),d=o.querySelectorAll("img"),u=o.querySelectorAll("video"),m=s?s.length:0;return{contentNode:i,clonedContentNode:o,clonedImgNodes:d,clonedVideoNodes:u,numResourcesToLoad:(n?0:c.length)+d.length+u.length+m,originalCanvasNodes:i.querySelectorAll("canvas")}}(e,r);if(!c)return void l({messages:["There is nothing to print"],suppressErrors:N});const w=function(e,t,a){const{suppressErrors:s}=e,n=[],r=[];return function(i,o){n.includes(i)?l({level:"debug",messages:["Tried to mark a resource that has already been handled",i],suppressErrors:s}):(o?(l({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...o],suppressErrors:s}),r.push(i)):n.push(i),n.length+r.length===t&&d(a,e))}}(r,c.numResourcesToLoad,o);!function(e,t,a,s){e.onload=()=>{p(e,t,a,s)},document.body.appendChild(e)}(o,w,c,r)}o(b,!0),f?f().then(()=>{r()}).catch(e=>{null==g||g("onBeforePrint",c(e))}):r()},[t,a,s,n,u,m,h,x,f,g,v,b,y,N]);return w}return n}())},3916(e,t){"use strict";var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(e,t,s){var n=null;if(void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),"key"in t)for(var r in s={},t)"key"!==r&&(s[r]=t[r]);else s=t;return t=s.ref,{$$typeof:a,type:e,key:n,ref:void 0!==t?t:null,props:s}}t.Fragment=s,t.jsx=n,t.jsxs=n},1983(e,t){"use strict";var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||x}function b(){}function y(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||x}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var j=y.prototype=new b;j.constructor=y,f(j,v.prototype),j.isPureReactComponent=!0;var N=Array.isArray;function w(){}var S={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function k(e,t,s){var n=s.ref;return{$$typeof:a,type:e,key:t,ref:void 0!==n?n:null,props:s}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,n,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(l){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case a:case s:d=!0;break;case m:return P((d=e._init)(e._payload),t,n,r,i)}}if(d)return i=i(e),d=""===r?"."+A(e,0):r,N(i)?(n="",null!=d&&(n=d.replace(E,"$&/")+"/"),P(i,t,n,"",function(e){return e})):null!=i&&(C(i)&&(o=i,c=n+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+d,i=k(o.type,c,o.props)),t.push(i)),1;d=0;var u,h=""===r?".":r+":";if(N(e))for(var x=0;x<e.length;x++)d+=P(r=e[x],t,n,l=h+A(r,x),i);else if("function"===typeof(x=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=x.call(e),x=0;!(r=e.next()).done;)d+=P(r=r.value,t,n,l=h+A(r,x++),i);else if("object"===l){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,r,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function O(e,t,a){if(null==e)return e;var s=[],n=0;return P(e,s,"","",function(e){return t.call(a,e,n++)}),s}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:O,forEach:function(e,t,a){O(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=h,t.Children=D,t.Component=v,t.Fragment=n,t.Profiler=i,t.PureComponent=y,t.StrictMode=r,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var s=f({},e.props),n=e.key;if(null!=t)for(r in void 0!==t.key&&(n=""+t.key),t)!_.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(s[r]=t[r]);var r=arguments.length-2;if(1===r)s.children=a;else if(1<r){for(var i=Array(r),l=0;l<r;l++)i[l]=arguments[l+2];s.children=i}return k(e.type,n,s)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,a){var s,n={},r=null;if(null!=t)for(s in void 0!==t.key&&(r=""+t.key),t)_.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(n[s]=t[s]);var i=arguments.length-2;if(1===i)n.children=a;else if(1<i){for(var l=Array(i),o=0;o<i;o++)l[o]=arguments[o+2];n.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps)void 0===n[s]&&(n[s]=i[s]);return k(e,r,n)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,a={};S.T=a;try{var s=e(),n=S.S;null!==n&&n(a,s),"object"===typeof s&&null!==s&&"function"===typeof s.then&&s.then(w,T)}catch(r){T(r)}finally{null!==t&&null!==a.types&&(t.types=a.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,a){return S.H.useActionState(e,t,a)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,a){return S.H.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,a){return S.H.useReducer(e,t,a)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,a){return S.H.useSyncExternalStore(e,t,a)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.4"},9950(e,t,a){"use strict";e.exports=a(1983)},4414(e,t,a){"use strict";e.exports=a(3916)},9487(e,t){"use strict";function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var s=a-1>>>1,n=e[s];if(!(0<r(n,t)))break e;e[s]=t,e[a]=n,a=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var s=0,n=e.length,i=n>>>1;s<i;){var l=2*(s+1)-1,o=e[l],c=l+1,d=e[c];if(0>r(o,a))c<n&&0>r(d,o)?(e[s]=d,e[c]=a,s=c):(e[s]=o,e[l]=a,s=l);else{if(!(c<n&&0>r(d,a)))break e;e[s]=d,e[c]=a,s=c}}}return t}function r(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,p=!1,x=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=s(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,a(c,t)}t=s(d)}}function N(e){if(f=!1,j(e),!x)if(null!==s(c))x=!0,S||(S=!0,w());else{var t=s(d);null!==t&&M(N,t.startTime-e)}}var w,S=!1,_=-1,k=5,C=-1;function E(){return!!g||!(t.unstable_now()-C<k)}function A(){if(g=!1,S){var e=t.unstable_now();C=e;var a=!0;try{e:{x=!1,f&&(f=!1,b(_),_=-1),p=!0;var r=h;try{t:{for(j(e),m=s(c);null!==m&&!(m.expirationTime>e&&E());){var i=m.callback;if("function"===typeof i){m.callback=null,h=m.priorityLevel;var l=i(m.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof l){m.callback=l,j(e),a=!0;break t}m===s(c)&&n(c),j(e)}else n(c);m=s(c)}if(null!==m)a=!0;else{var o=s(d);null!==o&&M(N,o.startTime-e),a=!1}}break e}finally{m=null,h=r,p=!1}a=void 0}}finally{a?w():S=!1}}}if("function"===typeof y)w=function(){y(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,w=function(){O.postMessage(null)}}else w=function(){v(A,0)};function M(e,a){_=v(function(){e(t.unstable_now())},a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var a=h;h=t;try{return e()}finally{h=a}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=h;h=e;try{return t()}finally{h=a}},t.unstable_scheduleCallback=function(e,n,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,a(d,e),null===s(c)&&e===s(d)&&(f?(b(_),_=-1):f=!0,M(N,r-i))):(e.sortIndex=l,a(c,e),x||p||(x=!0,S||(S=!0,w()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=h;return function(){var a=h;h=t;try{return e.apply(this,arguments)}finally{h=a}}}},5340(e,t,a){"use strict";e.exports=a(9487)},759(e,t,a){"use strict";var s=a(9950);var n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=s.useState,i=s.useEffect,l=s.useLayoutEffect,o=s.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!n(e,a)}catch(s){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),s=r({inst:{value:a,getSnapshot:t}}),n=s[0].inst,d=s[1];return l(function(){n.value=a,n.getSnapshot=t,c(n)&&d({inst:n})},[e,a,t]),i(function(){return c(n)&&d({inst:n}),e(function(){c(n)&&d({inst:n})})},[e]),o(a),a};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:d},9940(e,t,a){"use strict";var s=a(9950),n=a(6538);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=n.useSyncExternalStore,l=s.useRef,o=s.useEffect,c=s.useMemo,d=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,s,n){var u=l(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=c(function(){function e(e){if(!o){if(o=!0,i=e,e=s(e),void 0!==n&&m.hasValue){var t=m.value;if(n(t,e))return l=t}return l=e}if(t=l,r(i,e))return t;var a=s(e);return void 0!==n&&n(t,a)?(i=e,t):(i=e,l=a)}var i,l,o=!1,c=void 0===a?null:a;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,a,s,n]);var h=i(e,u[0],u[1]);return o(function(){m.hasValue=!0,m.value=h},[h]),d(h),h}},7254(e,t,a){"use strict";var s=a(9950);var n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=s.useSyncExternalStore,i=s.useRef,l=s.useEffect,o=s.useMemo,c=s.useDebugValue},6538(e,t,a){"use strict";e.exports=a(759)},3044(e,t,a){"use strict";e.exports=a(9940)},7256(e,t,a){"use strict";a(7254)},7413(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},3693(e,t,a){var s=a(7736);e.exports=function(e,t,a){return(t=s(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},2897(e,t,a){var s=a(3693);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}e.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){s(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},9045(e,t,a){var s=a(3738).default;e.exports=function(e,t){if("object"!=s(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736(e,t,a){var s=a(3738).default,n=a(9045);e.exports=function(e){var t=n(e,"string");return"symbol"==s(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738(e){function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(s,n){if(1&n&&(s=this(s)),8&n)return s;if("object"===typeof s&&s){if(4&n&&s.__esModule)return s;if(16&n&&"function"===typeof s.then)return s}var r=Object.create(null);a.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&s;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>s[e]);return i.default=()=>s,a.d(r,i),r}})(),a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,s)=>(a.f[s](e,t),t),[])),a.u=e=>"static/js/"+e+".1b8f7b85.chunk.js",a.miniCssF=e=>{},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";a.l=(s,n,r,i)=>{if(e[s])e[s].push(n);else{var l,o;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+r){l=u;break}}l||(o=!0,(l=document.createElement("script")).charset="utf-8",a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+r),l.src=s),e[s]=[n];var m=(t,a)=>{l.onerror=l.onload=null,clearTimeout(h);var n=e[s];if(delete e[s],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(e=>e(a)),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),o&&document.head.appendChild(l)}}})(),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",(()=>{var e={792:0};a.f.j=(t,s)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var r=new Promise((a,s)=>n=e[t]=[a,s]);s.push(n[2]=r);var i=a.p+a.u(t),l=new Error;a.l(i,s=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}},"chunk-"+t,t)}};var t=(t,s)=>{var n,r,[i,l,o]=s,c=0;if(i.some(t=>0!==e[t])){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(o)o(a)}for(t&&t(s);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=self.webpackChunkfrontend=self.webpackChunkfrontend||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),a.nc=void 0,(()=>{"use strict";var e={};a.r(e),a.d(e,{hasBrowserEnv:()=>kn,hasStandardBrowserEnv:()=>En,hasStandardBrowserWebWorkerEnv:()=>An,navigator:()=>Cn,origin:()=>Pn});var t={};a.r(t),a.d(t,{scaleBand:()=>Jb,scaleDiverging:()=>qS,scaleDivergingLog:()=>VS,scaleDivergingPow:()=>GS,scaleDivergingSqrt:()=>KS,scaleDivergingSymlog:()=>WS,scaleIdentity:()=>Lj,scaleImplicit:()=>Kb,scaleLinear:()=>Rj,scaleLog:()=>Gj,scaleOrdinal:()=>Yb,scalePoint:()=>Qb,scalePow:()=>tN,scaleQuantile:()=>hN,scaleQuantize:()=>pN,scaleRadial:()=>nN,scaleSequential:()=>RS,scaleSequentialLog:()=>LS,scaleSequentialPow:()=>zS,scaleSequentialQuantile:()=>US,scaleSequentialSqrt:()=>BS,scaleSequentialSymlog:()=>FS,scaleSqrt:()=>aN,scaleSymlog:()=>$j,scaleThreshold:()=>xN,scaleTime:()=>MS,scaleUtc:()=>TS,tickFormat:()=>Dj});var s=a(9950),n=a.t(s,2),r=a(1352);function i(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=l(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function c(e,t,a){return(t=o(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach(function(t){c(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const m=["sri"],h=["page"],p=["page","matches"],x=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],f=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var v="popstate";function b(){return k(function(e,t){let{pathname:a,search:s,hash:n}=e.location;return w("",{pathname:a,search:s,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:S(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function j(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(a){}}}function N(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_(t):t),{},{state:a,key:t&&t.key||s||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:a="",hash:s=""}=e;return a&&"?"!==a&&(t+="?"===a.charAt(0)?a:"?"+a),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function _(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function k(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:n=document.defaultView,v5Compat:r=!1}=s,i=n.history,l="POP",o=null,c=d();function d(){return(i.state||{idx:null}).idx}function m(){l="POP";let e=d(),t=null==e?null:e-c;c=e,o&&o({action:l,location:p.location,delta:t})}function h(e){return C(e)}null==c&&(c=0,i.replaceState(u(u({},i.state),{},{idx:c}),""));let p={get action(){return l},get location(){return e(n,i)},listen(e){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(v,m),o=e,()=>{n.removeEventListener(v,m),o=null}},createHref:e=>t(n,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let s=w(p.location,e,t);a&&a(s,e),c=d()+1;let u=N(s,c),m=p.createHref(s);try{i.pushState(u,"",m)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;n.location.assign(m)}r&&o&&o({action:l,location:p.location,delta:1})},replace:function(e,t){l="REPLACE";let s=w(p.location,e,t);a&&a(s,e),c=d();let n=N(s,c),u=p.createHref(s);i.replaceState(n,"",u),r&&o&&o({action:l,location:p.location,delta:0})},go:e=>i.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="http://localhost";"undefined"!==typeof window&&(a="null"!==window.location.origin?window.location.origin:window.location.href),y(a,"No window.location.(origin|href) available to create URL");let s="string"===typeof e?e:S(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}new WeakMap;function E(e,t){return A(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function A(e,t,a,s){let n=V(("string"===typeof t?_(t):t).pathname||"/",a);if(null==n)return null;let r=P(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let a=e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a]);return a?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let l=0;null==i&&l<r.length;++l){let e=q(n);i=B(r[l],e,s)}return i}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,l=arguments.length>3?arguments[3]:void 0,o={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(o.relativePath.startsWith("/")){if(!o.relativePath.startsWith(s)&&i)return;y(o.relativePath.startsWith(s),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(s,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(s.length)}let c=Q([s,o.relativePath]),d=a.concat(o);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,d,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:z(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var a;if(""!==e.path&&null!==(a=e.path)&&void 0!==a&&a.includes("?"))for(let s of O(e.path))r(e,t,!0,s);else r(e,t)}),t}function O(e){let t=e.split("/");if(0===t.length)return[];let[a,...s]=t,n=a.endsWith("?"),r=a.replace(/\?$/,"");if(0===s.length)return n?[r,""]:[r];let i=O(s.join("/")),l=[];return l.push(...i.map(e=>""===e?r:[r,e].join("/"))),n&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}var M=/^:[\w-]+$/,T=3,D=2,I=1,R=10,L=-2,F=e=>"*"===e;function z(e,t){let a=e.split("/"),s=a.length;return a.some(F)&&(s+=L),t&&(s+=D),a.filter(e=>!F(e)).reduce((e,t)=>e+(M.test(t)?T:""===t?I:R),s)}function B(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:s}=e,n={},r="/",i=[];for(let l=0;l<s.length;++l){let e=s[l],o=l===s.length-1,c="/"===r?t:t.slice(r.length)||"/",d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&a&&!s[s.length-1].route.index&&(d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:Q([r,d.pathname]),pathnameBase:X(Q([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=Q([r,d.pathnameBase]))}return i}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=H(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let r=n[0],i=r.replace(/(.)\/+$/,"$1"),l=n.slice(1),o=s.reduce((e,t,a)=>{let{paramName:s,isOptional:n}=t;if("*"===s){let e=l[a]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[a];return e[s]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:r,pathnameBase:i,pattern:e}}function H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];j("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(s.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function q(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return j(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&"/"!==s?null:e.slice(a)||"/"}var W=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function G(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}function K(e,t,a,s){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(s),"].  Please separate it out to the `to.").concat(a,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Y(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function J(e){let t=Y(e);return t.map((e,a)=>a===t.length-1?e.pathname:e.pathnameBase)}function $(e,t,a){let s,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?s=_(e):(s=u({},e),y(!s.pathname||!s.pathname.includes("?"),K("?","pathname","search",s)),y(!s.pathname||!s.pathname.includes("#"),K("#","pathname","hash",s)),y(!s.search||!s.search.includes("#"),K("#","search","hash",s)));let r,i=""===e||""===s.pathname,l=i?"/":s.pathname;if(null==l)r=a;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}r=e>=0?t[e]:"/"}let o=function(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:s,search:n="",hash:r=""}="string"===typeof e?_(e):e;return s?(s=s.replace(/\/\/+/g,"/"),t=s.startsWith("/")?G(s.substring(1),"/"):G(s,a)):t=a,{pathname:t,search:Z(n),hash:ee(r)}}(s,r),c=l&&"/"!==l&&l.endsWith("/"),d=(i||"."===l)&&a.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),X=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ee=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var te=class{constructor(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function ae(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function se(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function re(e,t){let a=e;if("string"!==typeof a||!W.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,n=!1;if(ne)try{let e=new URL(window.location.href),s=a.startsWith("//")?new URL(e.protocol+a):new URL(a),r=V(s.pathname,t);s.origin===e.origin&&null!=r?a=r+s.search+s.hash:n=!0}catch(r){j(!1,'<Link to="'.concat(a,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:s,isExternal:n,to:a}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ie=["POST","PUT","PATCH","DELETE"],le=(new Set(ie),["GET",...ie]);new Set(le),Symbol("ResetLoaderData");var oe=s.createContext(null);oe.displayName="DataRouter";var ce=s.createContext(null);ce.displayName="DataRouterState";var de=s.createContext(!1);function ue(){return s.useContext(de)}var me=s.createContext({isTransitioning:!1});me.displayName="ViewTransition";var he=s.createContext(new Map);he.displayName="Fetchers";var pe=s.createContext(null);pe.displayName="Await";var xe=s.createContext(null);xe.displayName="Navigation";var fe=s.createContext(null);fe.displayName="Location";var ge=s.createContext({outlet:null,matches:[],isDataRoute:!1});ge.displayName="Route";var ve=s.createContext(null);ve.displayName="RouteError";var be="REACT_ROUTER_ERROR";function ye(){return null!=s.useContext(fe)}function je(){return y(ye(),"useLocation() may be used only in the context of a <Router> component."),s.useContext(fe).location}var Ne="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function we(e){s.useContext(xe).static||s.useLayoutEffect(e)}function Se(){let{isDataRoute:e}=s.useContext(ge);return e?function(){let{router:e}=Le("useNavigate"),t=ze("useNavigate"),a=s.useRef(!1);we(()=>{a.current=!0});let n=s.useCallback(async function(s){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(a.current,Ne),a.current&&("number"===typeof s?await e.navigate(s):await e.navigate(s,u({fromRouteId:t},n)))},[e,t]);return n}():function(){y(ye(),"useNavigate() may be used only in the context of a <Router> component.");let e=s.useContext(oe),{basename:t,navigator:a}=s.useContext(xe),{matches:n}=s.useContext(ge),{pathname:r}=je(),i=JSON.stringify(J(n)),l=s.useRef(!1);we(()=>{l.current=!0});let o=s.useCallback(function(s){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(j(l.current,Ne),!l.current)return;if("number"===typeof s)return void a.go(s);let o=$(s,JSON.parse(i),r,"path"===n.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:Q([t,o.pathname])),(n.replace?a.replace:a.push)(o,n.state,n)},[t,a,i,r,e]);return o}()}var _e=s.createContext(null);function ke(){let{matches:e}=s.useContext(ge),t=e[e.length-1];return t?t.params:{}}function Ce(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:a}=s.useContext(ge),{pathname:n}=je(),r=JSON.stringify(J(a));return s.useMemo(()=>$(e,JSON.parse(r),n,"path"===t),[e,r,n,t])}function Ee(e,t,a,n,r){y(ye(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=s.useContext(xe),{matches:l}=s.useContext(ge),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",m=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";He(d,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,x=je();if(t){var f;let e="string"===typeof t?_(t):t;y("/"===m||(null===(f=e.pathname)||void 0===f?void 0:f.startsWith(m)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(m,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=x;let g=p.pathname||"/",v=g;if("/"!==m){let e=m.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=E(e,{pathname:v});j(h||null!=b,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),j(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=Ie(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Q([m,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:Q([m,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,a,n,r);return t&&N?s.createElement(fe.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},N):N}function Ae(){let e=Be(),t=ae(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=s.createElement(s.Fragment,null,s.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),s.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.createElement("code",{style:i},"ErrorBoundary")," or"," ",s.createElement("code",{style:i},"errorElement")," prop on your route.")),s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),a?s.createElement("pre",{style:r},a):null,l)}var Pe=s.createElement(Ae,null),Oe=class extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(be,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new te(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?s.createElement(ge.Provider,{value:this.props.routeContext},s.createElement(ve.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?s.createElement(Te,{error:e},t):t}};Oe.contextType=de;var Me=new WeakMap;function Te(e){let{children:t,error:a}=e,{basename:n}=s.useContext(xe);if("object"===typeof a&&a&&"digest"in a&&"string"===typeof a.digest){let e=function(e){if(e.startsWith("".concat(be,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(a.digest);if(e){let t=Me.get(a);if(t)throw t;let r=re(e.location,n);if(ne&&!Me.get(a)){if(!r.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:e.replace}));throw Me.set(a,t),t}window.location.href=r.absoluteURL||r.to}return s.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(r.absoluteURL||r.to)})}}return t}function De(e){let{routeContext:t,match:a,children:n}=e,r=s.useContext(oe);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),s.createElement(ge.Provider,{value:t},n)}function Ie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!a)return null;if(a.errors)e=a.matches;else{if(0!==t.length||a.initialized||!(a.matches.length>0))return null;e=a.matches}}let r=e,i=null===a||void 0===a?void 0:a.errors;if(null!=i){let e=r.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let l=!1,o=-1;if(a)for(let s=0;s<r.length;s++){let e=r[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=s),e.route.id){let{loaderData:t,errors:s}=a,n=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!s||void 0===s[e.route.id]);if(e.route.lazy||n){l=!0,r=o>=0?r.slice(0,o+1):[r[0]];break}}}let c=a&&n?(e,t)=>{var s,r;n(e,{location:a.location,params:null!==(s=null===(r=a.matches)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.params)&&void 0!==s?s:{},unstable_pattern:se(a.matches),errorInfo:t})}:void 0;return r.reduceRight((e,n,d)=>{let u,m=!1,h=null,p=null;a&&(u=i&&n.route.id?i[n.route.id]:void 0,h=n.route.errorElement||Pe,l&&(o<0&&0===d?(He("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,p=null):o===d&&(m=!0,p=n.route.hydrateFallbackElement||null)));let x=t.concat(r.slice(0,d+1)),f=()=>{let t;return t=u?h:m?p:n.route.Component?s.createElement(n.route.Component,null):n.route.element?n.route.element:e,s.createElement(De,{match:n,routeContext:{outlet:e,matches:x,isDataRoute:null!=a},children:t})};return a&&(n.route.ErrorBoundary||n.route.errorElement||0===d)?s.createElement(Oe,{location:a.location,revalidation:a.revalidation,component:h,error:u,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:c}):f()},null)}function Re(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Le(e){let t=s.useContext(oe);return y(t,Re(e)),t}function Fe(e){let t=s.useContext(ce);return y(t,Re(e)),t}function ze(e){let t=function(e){let t=s.useContext(ge);return y(t,Re(e)),t}(e),a=t.matches[t.matches.length-1];return y(a.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),a.route.id}function Be(){var e;let t=s.useContext(ve),a=Fe("useRouteError"),n=ze("useRouteError");return void 0!==t?t:null===(e=a.errors)||void 0===e?void 0:e[n]}var Ue={};function He(e,t,a){t||Ue[e]||(Ue[e]=!0,j(!1,a))}var qe={};function Ve(e,t){e||qe[t]||(qe[t]=!0,console.warn(t))}n.useOptimistic;s.memo(function(e){let{routes:t,future:a,state:s,onError:n}=e;return Ee(t,void 0,s,n,a)});function We(e){let{to:t,replace:a,state:n,relative:r}=e;y(ye(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=s.useContext(xe);j(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=s.useContext(ge),{pathname:o}=je(),c=Se(),d=$(t,J(l),o,"path"===r),u=JSON.stringify(d);return s.useEffect(()=>{c(JSON.parse(u),{replace:a,state:n,relative:r})},[c,u,r,a,n]),null}function Ge(e){return function(e){let t=s.useContext(ge).outlet;return s.useMemo(()=>t&&s.createElement(_e.Provider,{value:e},t),[t,e])}(e.context)}function Ke(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ye(e){let{basename:t="/",children:a=null,location:n,navigationType:r="POP",navigator:i,static:l=!1,unstable_useTransitions:o}=e;y(!ye(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=s.useMemo(()=>({basename:c,navigator:i,static:l,unstable_useTransitions:o,future:{}}),[c,i,l,o]);"string"===typeof n&&(n=_(n));let{pathname:u="/",search:m="",hash:h="",state:p=null,key:x="default"}=n,f=s.useMemo(()=>{let e=V(u,c);return null==e?null:{location:{pathname:e,search:m,hash:h,state:p,key:x},navigationType:r}},[c,u,m,h,p,x,r]);return j(null!=f,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(u).concat(m).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:s.createElement(xe.Provider,{value:d},s.createElement(fe.Provider,{children:a,value:f}))}function Je(e){let{children:t,location:a}=e;return Ee($e(t),a)}s.Component;function $e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return s.Children.forEach(e,(e,n)=>{if(!s.isValidElement(e))return;let r=[...t,n];if(e.type===s.Fragment)return void a.push.apply(a,$e(e.props.children,r));y(e.type===Ke,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=$e(e.props.children,r)),a.push(i)}),a}var Qe="get",Xe="application/x-www-form-urlencoded";function Ze(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var et=null;var tt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function at(e){return null==e||tt.has(e)?e:(j(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Xe,'"')),null)}function st(e,t){let a,s,n,r,i;if(function(e){return Ze(e)&&"form"===e.tagName.toLowerCase()}(e)){let i=e.getAttribute("action");s=i?V(i,t):null,a=e.getAttribute("method")||Qe,n=at(e.getAttribute("enctype"))||Xe,r=new FormData(e)}else if(function(e){return Ze(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ze(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||i.getAttribute("action");if(s=l?V(l,t):null,a=e.getAttribute("formmethod")||i.getAttribute("method")||Qe,n=at(e.getAttribute("formenctype"))||at(i.getAttribute("enctype"))||Xe,r=new FormData(i,e),!function(){if(null===et)try{new FormData(document.createElement("form"),0),et=!1}catch(e){et=!0}return et}()){let{name:t,type:a,value:s}=e;if("image"===a){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,s)}}else{if(Ze(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Qe,s=null,n=Xe,i=e}return r&&"text/plain"===n&&(i=r,r=void 0),{action:s,method:a.toLowerCase(),encType:n,formData:r,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function nt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function rt(e,t,a,s){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return a?n.pathname.endsWith("/")?n.pathname="".concat(n.pathname,"_.").concat(s):n.pathname="".concat(n.pathname,".").concat(s):"/"===n.pathname?n.pathname="_root.".concat(s):t&&"/"===V(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(s):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(s),n}async function it(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lt(e){return null!=e&&"string"===typeof e.page}function ot(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ct(e,t,a,s,n,r){let i=(e,t)=>!a[t]||e.route.id!==a[t].route.id,l=(e,t)=>{var s;return a[t].pathname!==e.pathname||(null===(s=a[t].route.path)||void 0===s?void 0:s.endsWith("*"))&&a[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter((e,t)=>i(e,t)||l(e,t)):"data"===r?t.filter((t,r)=>{let o=s.routes[t.route.id];if(!o||!o.hasLoader)return!1;if(i(t,r)||l(t,r))return!0;if(t.route.shouldRevalidate){var c;let s=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:(null===(c=a[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof s)return s}return!0}):[]}function dt(e,t){let{includeHydrateFallback:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s=e.map(e=>{let s=t.routes[e.route.id];if(!s)return[];let n=[s.module];return s.clientActionModule&&(n=n.concat(s.clientActionModule)),s.clientLoaderModule&&(n=n.concat(s.clientLoaderModule)),a&&s.hydrateFallbackModule&&(n=n.concat(s.hydrateFallbackModule)),s.imports&&(n=n.concat(s.imports)),n}).flat(1),[...new Set(s)];var s}function ut(e,t){let a=new Set,s=new Set(t);return e.reduce((e,n)=>{if(t&&!lt(n)&&"script"===n.as&&n.href&&s.has(n.href))return e;let r=JSON.stringify(function(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}(n));return a.has(r)||(a.add(r),e.push({key:r,link:n})),e},[])}function mt(e,t){return"lazy"===e.mode&&!0===t}function ht(){let e=s.useContext(oe);return nt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pt(){let e=s.useContext(ce);return nt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var xt=s.createContext(void 0);function ft(){let e=s.useContext(xt);return nt(e,"You must render this element inside a <HydratedRouter> element"),e}function gt(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function vt(e,t,a){if(a&&!Nt)return[e[0]];if(t){let a=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,a+1)}return e}xt.displayName="FrameworkContext";function bt(e){let{page:t}=e,a=i(e,h),{router:n}=ht(),r=s.useMemo(()=>E(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?s.createElement(jt,u({page:t,matches:r},a)):null}function yt(e){let{manifest:t,routeModules:a}=ft(),[n,r]=s.useState([]);return s.useEffect(()=>{let s=!1;return async function(e,t,a){return ut((await Promise.all(e.map(async e=>{let s=t.routes[e.route.id];if(s){let e=await it(s,a);return e.links?e.links():[]}return[]}))).flat(1).filter(ot).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,a).then(e=>{s||r(e)}),()=>{s=!0}},[e,t,a]),n}function jt(e){let{page:t,matches:a}=e,n=i(e,p),r=je(),{future:l,manifest:o,routeModules:c}=ft(),{basename:d}=ht(),{loaderData:m,matches:h}=pt(),x=s.useMemo(()=>ct(t,a,h,o,r,"data"),[t,a,h,o,r]),f=s.useMemo(()=>ct(t,a,h,o,r,"assets"),[t,a,h,o,r]),g=s.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let e=new Set,s=!1;if(a.forEach(t=>{var a;let n=o.routes[t.route.id];n&&n.hasLoader&&(!x.some(e=>e.route.id===t.route.id)&&t.route.id in m&&null!==(a=c[t.route.id])&&void 0!==a&&a.shouldRevalidate||n.hasClientLoader?s=!0:e.add(t.route.id))}),0===e.size)return[];let n=rt(t,d,l.unstable_trailingSlashAwareDataRequests,"data");return s&&e.size>0&&n.searchParams.set("_routes",a.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[n.pathname+n.search]},[d,l.unstable_trailingSlashAwareDataRequests,m,r,o,x,a,t,c]),v=s.useMemo(()=>dt(f,o),[f,o]),b=yt(f);return s.createElement(s.Fragment,null,g.map(e=>s.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},n))),v.map(e=>s.createElement("link",u({key:e,rel:"modulepreload",href:e},n))),b.map(e=>{var t;let{key:a,link:r}=e;return s.createElement("link",u(u({key:a,nonce:n.nonce},r),{},{crossOrigin:null!==(t=r.crossOrigin)&&void 0!==t?t:n.crossOrigin}))}))}var Nt=!1;function wt(e){let{manifest:t,serverHandoffString:a,isSpaMode:n,renderMeta:r,routeDiscovery:l,ssr:o}=ft(),{router:c,static:d,staticContext:h}=ht(),{matches:p}=pt(),x=ue(),f=mt(l,o);r&&(r.didRenderScripts=!0);let g=vt(p,null,n);s.useEffect(()=>{0},[]);let v=s.useMemo(()=>{var n;if(x)return null;let r=h?"window.__reactRouterContext = ".concat(a,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",l=d?"".concat(null!==t.hmr&&void 0!==n&&n.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,a)=>{let s="route".concat(a),n=t.routes[e.route.id];nt(n,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:i,clientMiddlewareModule:l,hydrateFallbackModule:o,module:c}=n,d=[...r?[{module:r,varName:"".concat(s,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(s,"_clientLoader")}]:[],...l?[{module:l,varName:"".concat(s,"_clientMiddleware")}]:[],...o?[{module:o,varName:"".concat(s,"_HydrateFallback")}]:[],{module:c,varName:"".concat(s,"_main")}];return 1===d.length?"import * as ".concat(s," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(s," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:a}=e,s=i(e,m),n=new Set(t.state.matches.map(e=>e.route.id)),r=t.state.location.pathname.split("/").filter(Boolean),l=["/"];for(r.pop();r.length>0;)l.push("/".concat(r.join("/"))),r.pop();l.forEach(e=>{let a=E(t.routes,e,t.basename);a&&a.forEach(e=>n.add(e.route.id))});let o=[...n].reduce((e,t)=>Object.assign(e,{[t]:s.routes[t]}),{});return u(u({},s),{},{routes:o,sri:!!a||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return s.createElement(s.Fragment,null,s.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:r},type:void 0})),s.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:"module",async:!0})))},[]),b=Nt||x?[]:function(e){return[...new Set(e)]}(t.entry.imports.concat(dt(g,t,{includeHydrateFallback:!0}))),y="object"===typeof t.sri?t.sri:{};return Ve(!x,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Nt||x?null:s.createElement(s.Fragment,null,"object"===typeof t.sri?s.createElement("script",u(u({},e),{},{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:y})}})):null,f?null:s.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:y[t.url],suppressHydrationWarning:!0}),s.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:y[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>s.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:y[t],suppressHydrationWarning:!0})),v)}function St(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}s.Component;function _t(e){let{error:t,isOutsideRemixApp:a}=e;console.error(t);let n,r=s.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ae(t))return s.createElement(kt,{title:"Unhandled Thrown Response!"},s.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return s.createElement(kt,{title:"Application Error!",isOutsideRemixApp:a},s.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),s.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},n.stack),r)}function kt(e){var t;let{title:a,renderScripts:n,isOutsideRemixApp:r,children:i}=e,{routeModules:l}=ft();return null!==l.root&&void 0!==t&&t.Layout&&!r?i:s.createElement("html",{lang:"en"},s.createElement("head",null,s.createElement("meta",{charSet:"utf-8"}),s.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),s.createElement("title",null,a)),s.createElement("body",null,s.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,n?s.createElement(wt,null):null)))}var Ct="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Ct&&(window.__reactRouterVersion="7.13.0")}catch(J1){}function Et(e){let{basename:t,children:a,unstable_useTransitions:n,window:r}=e,i=s.useRef();null==i.current&&(i.current=b({window:r,v5Compat:!0}));let l=i.current,[o,c]=s.useState({action:l.action,location:l.location}),d=s.useCallback(e=>{!1===n?c(e):s.startTransition(()=>c(e))},[n]);return s.useLayoutEffect(()=>l.listen(d),[l,d]),s.createElement(Ye,{basename:t,children:a,location:o.location,navigationType:o.action,navigator:l,unstable_useTransitions:n})}var At=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pt=s.forwardRef(function(e,t){let{onClick:a,discover:n="render",prefetch:r="none",relative:l,reloadDocument:o,replace:c,state:d,target:m,to:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:g}=e,v=i(e,x),{basename:b,unstable_useTransitions:j}=s.useContext(xe),N="string"===typeof h&&At.test(h),w=re(h,b);h=w.to;let _=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(ye(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=s.useContext(xe),{hash:r,pathname:i,search:l}=Ce(e,{relative:t}),o=i;return"/"!==a&&(o="/"===i?a:Q([a,i])),n.createHref({pathname:o,search:l,hash:r})}(h,{relative:l}),[k,C,E]=function(e,t){let a=s.useContext(xt),[n,r]=s.useState(!1),[i,l]=s.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=t,h=s.useRef(null);s.useEffect(()=>{if("render"===e&&l(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{l(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),s.useEffect(()=>{if(n){let e=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(e)}}},[n]);let p=()=>{r(!0)},x=()=>{r(!1),l(!1)};return a?"intent"!==e?[i,h,{}]:[i,h,{onFocus:gt(o,p),onBlur:gt(c,x),onMouseEnter:gt(d,p),onMouseLeave:gt(u,x),onTouchStart:gt(m,p)}]:[!1,h,{}]}(r,v),A=function(e){let{target:t,replace:a,state:n,preventScrollReset:r,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=Se(),u=je(),m=Ce(e,{relative:i});return s.useCallback(h=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(h,t)){h.preventDefault();let t=void 0!==a?a:S(u)===S(m),p=()=>d(e,{replace:t,state:n,preventScrollReset:r,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:o});c?s.startTransition(()=>p()):p()}},[u,d,m,a,n,t,e,r,i,l,o,c])}(h,{replace:c,state:d,target:m,preventScrollReset:p,relative:l,viewTransition:f,unstable_defaultShouldRevalidate:g,unstable_useTransitions:j});let P=s.createElement("a",u(u(u({},v),E),{},{href:w.absoluteURL||_,onClick:w.isExternal||o?a:function(e){a&&a(e),e.defaultPrevented||A(e)},ref:St(t,C),target:m,"data-discover":N||"render"!==n?void 0:"true"}));return k&&!N?s.createElement(s.Fragment,null,P,s.createElement(bt,{page:_})):P});Pt.displayName="Link";var Ot=s.forwardRef(function(e,t){let{"aria-current":a="page",caseSensitive:n=!1,className:r="",end:l=!1,style:o,to:c,viewTransition:d,children:m}=e,h=i(e,f),p=Ce(c,{relative:h.relative}),x=je(),g=s.useContext(ce),{navigator:v,basename:b}=s.useContext(xe),j=null!=g&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s.useContext(me);y(null!=a,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Dt("useViewTransitionState"),r=Ce(e,{relative:t});if(!a.isTransitioning)return!1;let i=V(a.currentLocation.pathname,n)||a.currentLocation.pathname,l=V(a.nextLocation.pathname,n)||a.nextLocation.pathname;return null!=U(r.pathname,l)||null!=U(r.pathname,i)}(p)&&!0===d,N=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,w=x.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(w=w.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&b&&(S=V(S,b)||S);const _="/"!==N&&N.endsWith("/")?N.length-1:N.length;let k,C=w===N||!l&&w.startsWith(N)&&"/"===w.charAt(_),E=null!=S&&(S===N||!l&&S.startsWith(N)&&"/"===S.charAt(N.length)),A={isActive:C,isPending:E,isTransitioning:j},P=C?a:void 0;k="function"===typeof r?r(A):[r,C?"active":null,E?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O="function"===typeof o?o(A):o;return s.createElement(Pt,u(u({},h),{},{"aria-current":P,className:k,ref:t,style:O,to:c,viewTransition:d}),"function"===typeof m?m(A):m)});Ot.displayName="NavLink";var Mt=s.forwardRef((e,t)=>{let{discover:a="render",fetcherKey:n,navigate:r,reloadDocument:l,replace:o,state:c,method:d=Qe,action:m,onSubmit:h,relative:p,preventScrollReset:x,viewTransition:f,unstable_defaultShouldRevalidate:v}=e,b=i(e,g),{unstable_useTransitions:j}=s.useContext(xe),N=Lt(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:a}=s.useContext(xe),n=s.useContext(ge);y(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i=u({},Ce(e||".",{relative:t})),l=je();if(null==e){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let a=e.toString();i.search=a?"?".concat(a):""}}e&&"."!==e||!r.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==a&&(i.pathname="/"===i.pathname?a:Q([a,i.pathname]));return S(i)}(m,{relative:p}),_="get"===d.toLowerCase()?"get":"post",k="string"===typeof m&&At.test(m);return s.createElement("form",u(u({ref:t,method:_,action:w,onSubmit:l?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,a=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d,i=()=>N(t||e.currentTarget,{fetcherKey:n,method:a,navigate:r,replace:o,state:c,relative:p,preventScrollReset:x,viewTransition:f,unstable_defaultShouldRevalidate:v});j&&!1!==r?s.startTransition(()=>i()):i()}},b),{},{"data-discover":k||"render"!==a?void 0:"true"}))});function Tt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Dt(e){let t=s.useContext(oe);return y(t,Tt(e)),t}Mt.displayName="Form";var It=0,Rt=()=>"__".concat(String(++It),"__");function Lt(){let{router:e}=Dt("useSubmit"),{basename:t}=s.useContext(xe),a=ze("useRouteId"),n=e.fetch,r=e.navigate;return s.useCallback(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:l,encType:o,formData:c,body:d}=st(e,t);if(!1===s.navigate){let e=s.fetcherKey||Rt();await n(e,a,s.action||i,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||l,formEncType:s.encType||o,flushSync:s.flushSync})}else await r(s.action||i,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||l,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:a,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,r,t,a])}var Ft=a(7119);const zt=["message"];const Bt=Array(12).fill(0),Ut=e=>{let{visible:t,className:a}=e;return s.createElement("div",{className:["sonner-loading-wrapper",a].filter(Boolean).join(" "),"data-visible":t},s.createElement("div",{className:"sonner-spinner"},Bt.map((e,t)=>s.createElement("div",{className:"sonner-loading-bar",key:"spinner-bar-".concat(t)}))))},Ht=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qt=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Vt=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Wt=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Gt=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},s.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let Kt=1;const Yt=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:a}=e,s=i(e,zt),n="number"===typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Kt++,r=this.toasts.find(e=>e.id===n),l=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),r?this.toasts=this.toasts.map(t=>t.id===n?(this.publish(u(u(u({},t),e),{},{id:n,title:a})),u(u(u({},t),e),{},{id:n,dismissible:l,title:a})):t):this.addToast(u(u({title:a},s),{},{dismissible:l,id:n})),n},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create(u(u({},t),{},{message:e})),this.error=(e,t)=>this.create(u(u({},t),{},{message:e,type:"error"})),this.success=(e,t)=>this.create(u(u({},t),{},{type:"success",message:e})),this.info=(e,t)=>this.create(u(u({},t),{},{type:"info",message:e})),this.warning=(e,t)=>this.create(u(u({},t),{},{type:"warning",message:e})),this.loading=(e,t)=>this.create(u(u({},t),{},{type:"loading",message:e})),this.promise=(e,t)=>{if(!t)return;let a;void 0!==t.loading&&(a=this.create(u(u({},t),{},{promise:e,type:"loading",message:t.loading,description:"function"!==typeof t.description?t.description:void 0})));const n=Promise.resolve(e instanceof Function?e():e);let r,i=void 0!==a;const l=n.then(async e=>{r=["resolve",e];if(s.isValidElement(e))i=!1,this.create({id:a,type:"default",message:e});else if(Jt(e)&&!e.ok){i=!1;const n="function"===typeof t.error?await t.error("HTTP error! status: ".concat(e.status)):t.error,r="function"===typeof t.description?await t.description("HTTP error! status: ".concat(e.status)):t.description,l="object"===typeof n&&!s.isValidElement(n)?n:{message:n};this.create(u({id:a,type:"error",description:r},l))}else if(e instanceof Error){i=!1;const n="function"===typeof t.error?await t.error(e):t.error,r="function"===typeof t.description?await t.description(e):t.description,l="object"===typeof n&&!s.isValidElement(n)?n:{message:n};this.create(u({id:a,type:"error",description:r},l))}else if(void 0!==t.success){i=!1;const n="function"===typeof t.success?await t.success(e):t.success,r="function"===typeof t.description?await t.description(e):t.description,l="object"===typeof n&&!s.isValidElement(n)?n:{message:n};this.create(u({id:a,type:"success",description:r},l))}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){i=!1;const n="function"===typeof t.error?await t.error(e):t.error,r="function"===typeof t.description?await t.description(e):t.description,l="object"===typeof n&&!s.isValidElement(n)?n:{message:n};this.create(u({id:a,type:"error",description:r},l))}}).finally(()=>{i&&(this.dismiss(a),a=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>l.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!==typeof a&&"number"!==typeof a?{unwrap:o}:Object.assign(a,{unwrap:o})},this.custom=(e,t)=>{const a=(null==t?void 0:t.id)||Kt++;return this.create(u({jsx:e(a),id:a},t)),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Jt=e=>e&&"object"===typeof e&&"ok"in e&&"boolean"===typeof e.ok&&"status"in e&&"number"===typeof e.status,$t=(e,t)=>{const a=(null==t?void 0:t.id)||Kt++;return Yt.addToast(u(u({title:e},t),{},{id:a})),a},Qt=Object.assign($t,{success:Yt.success,info:Yt.info,warning:Yt.warning,error:Yt.error,custom:Yt.custom,message:Yt.message,promise:Yt.promise,dismiss:Yt.dismiss,loading:Yt.loading},{getHistory:()=>Yt.toasts,getToasts:()=>Yt.getActiveToasts()});function Xt(e){return void 0!==e.label}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Zt=3,ea=14;function ta(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}const aa=e=>{var t,a,n,r,i,l,o,c,d;const{invert:m,toast:h,unstyled:p,interacting:x,setHeights:f,visibleToasts:g,heights:v,index:b,toasts:y,expanded:j,removeToast:N,defaultRichColors:w,closeButton:S,style:_,cancelButtonStyle:k,actionButtonStyle:C,className:E="",descriptionClassName:A="",duration:P,position:O,gap:M,expandByDefault:T,classNames:D,icons:I,closeButtonAriaLabel:R="Close toast"}=e,[L,F]=s.useState(null),[z,B]=s.useState(null),[U,H]=s.useState(!1),[q,V]=s.useState(!1),[W,G]=s.useState(!1),[K,Y]=s.useState(!1),[J,$]=s.useState(!1),[Q,X]=s.useState(0),[Z,ee]=s.useState(0),te=s.useRef(h.duration||P||4e3),ae=s.useRef(null),se=s.useRef(null),ne=0===b,re=b+1<=g,ie=h.type,le=!1!==h.dismissible,oe=h.className||"",ce=h.descriptionClassName||"",de=s.useMemo(()=>v.findIndex(e=>e.toastId===h.id)||0,[v,h.id]),ue=s.useMemo(()=>{var e;return null!=(e=h.closeButton)?e:S},[h.closeButton,S]),me=s.useMemo(()=>h.duration||P||4e3,[h.duration,P]),he=s.useRef(0),pe=s.useRef(0),xe=s.useRef(0),fe=s.useRef(null),[ge,ve]=O.split("-"),be=s.useMemo(()=>v.reduce((e,t,a)=>a>=de?e:e+t.height,0),[v,de]),ye=(()=>{const[e,t]=s.useState(document.hidden);return s.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),je=h.invert||m,Ne="loading"===ie;pe.current=s.useMemo(()=>de*M+be,[de,be]),s.useEffect(()=>{te.current=me},[me]),s.useEffect(()=>{H(!0)},[]),s.useEffect(()=>{const e=se.current;if(e){const t=e.getBoundingClientRect().height;return ee(t),f(e=>[{toastId:h.id,height:t,position:h.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==h.id))}},[f,h.id]),s.useLayoutEffect(()=>{if(!U)return;const e=se.current,t=e.style.height;e.style.height="auto";const a=e.getBoundingClientRect().height;e.style.height=t,ee(a),f(e=>e.find(e=>e.toastId===h.id)?e.map(e=>e.toastId===h.id?u(u({},e),{},{height:a}):e):[{toastId:h.id,height:a,position:h.position},...e])},[U,h.title,h.description,f,h.id,h.jsx,h.action,h.cancel]);const we=s.useCallback(()=>{V(!0),X(pe.current),f(e=>e.filter(e=>e.toastId!==h.id)),setTimeout(()=>{N(h)},200)},[h,N,f,pe]);s.useEffect(()=>{if(h.promise&&"loading"===ie||h.duration===1/0||"loading"===h.type)return;let e;return j||x||ye?(()=>{if(xe.current<he.current){const e=(new Date).getTime()-he.current;te.current=te.current-e}xe.current=(new Date).getTime()})():te.current!==1/0&&(he.current=(new Date).getTime(),e=setTimeout(()=>{null==h.onAutoClose||h.onAutoClose.call(h,h),we()},te.current)),()=>clearTimeout(e)},[j,x,h,ie,ye,we]),s.useEffect(()=>{h.delete&&(we(),null==h.onDismiss||h.onDismiss.call(h,h))},[we,h.delete]);const Se=h.icon||(null==I?void 0:I[ie])||(e=>{switch(e){case"success":return Ht;case"info":return Vt;case"warning":return qt;case"error":return Wt;default:return null}})(ie);var _e,ke;return s.createElement("li",{tabIndex:0,ref:se,className:ta(E,oe,null==D?void 0:D.toast,null==h||null==(t=h.classNames)?void 0:t.toast,null==D?void 0:D.default,null==D?void 0:D[ie],null==h||null==(a=h.classNames)?void 0:a[ie]),"data-sonner-toast":"","data-rich-colors":null!=(_e=h.richColors)?_e:w,"data-styled":!Boolean(h.jsx||h.unstyled||p),"data-mounted":U,"data-promise":Boolean(h.promise),"data-swiped":J,"data-removed":q,"data-visible":re,"data-y-position":ge,"data-x-position":ve,"data-index":b,"data-front":ne,"data-swiping":W,"data-dismissible":le,"data-type":ie,"data-invert":je,"data-swipe-out":K,"data-swipe-direction":z,"data-expanded":Boolean(j||T&&U),"data-testid":h.testId,style:u(u({"--index":b,"--toasts-before":b,"--z-index":y.length-b,"--offset":"".concat(q?Q:pe.current,"px"),"--initial-height":T?"auto":"".concat(Z,"px")},_),h.style),onDragEnd:()=>{G(!1),F(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!Ne&&le&&(ae.current=new Date,X(pe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(G(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,a;if(K||!le)return;fe.current=null;const s=Number((null==(e=se.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),n=Number((null==(t=se.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),r=(new Date).getTime()-(null==(a=ae.current)?void 0:a.getTime()),i="x"===L?s:n,l=Math.abs(i)/r;if(Math.abs(i)>=45||l>.11)return X(pe.current),null==h.onDismiss||h.onDismiss.call(h,h),B("x"===L?s>0?"right":"left":n>0?"down":"up"),we(),void Y(!0);var o,c;null==(o=se.current)||o.style.setProperty("--swipe-amount-x","0px"),null==(c=se.current)||c.style.setProperty("--swipe-amount-y","0px"),$(!1),G(!1),F(null)},onPointerMove:t=>{var a,s,n;if(!fe.current||!le)return;if((null==(a=window.getSelection())?void 0:a.toString().length)>0)return;const r=t.clientY-fe.current.y,i=t.clientX-fe.current.x;var l;const o=null!=(l=e.swipeDirections)?l:function(e){const[t,a]=e.split("-"),s=[];return t&&s.push(t),a&&s.push(a),s}(O);!L&&(Math.abs(i)>1||Math.abs(r)>1)&&F(Math.abs(i)>Math.abs(r)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===L){if(o.includes("top")||o.includes("bottom"))if(o.includes("top")&&r<0||o.includes("bottom")&&r>0)c.y=r;else{const e=r*d(r);c.y=Math.abs(e)<Math.abs(r)?e:r}}else if("x"===L&&(o.includes("left")||o.includes("right")))if(o.includes("left")&&i<0||o.includes("right")&&i>0)c.x=i;else{const e=i*d(i);c.x=Math.abs(e)<Math.abs(i)?e:i}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&$(!0),null==(s=se.current)||s.style.setProperty("--swipe-amount-x","".concat(c.x,"px")),null==(n=se.current)||n.style.setProperty("--swipe-amount-y","".concat(c.y,"px"))}},ue&&!h.jsx&&"loading"!==ie?s.createElement("button",{"aria-label":R,"data-disabled":Ne,"data-close-button":!0,onClick:Ne||!le?()=>{}:()=>{we(),null==h.onDismiss||h.onDismiss.call(h,h)},className:ta(null==D?void 0:D.closeButton,null==h||null==(n=h.classNames)?void 0:n.closeButton)},null!=(ke=null==I?void 0:I.close)?ke:Gt):null,(ie||h.icon||h.promise)&&null!==h.icon&&(null!==(null==I?void 0:I[ie])||h.icon)?s.createElement("div",{"data-icon":"",className:ta(null==D?void 0:D.icon,null==h||null==(r=h.classNames)?void 0:r.icon)},h.promise||"loading"===h.type&&!h.icon?h.icon||function(){var e,t;return(null==I?void 0:I.loading)?s.createElement("div",{className:ta(null==D?void 0:D.loader,null==h||null==(t=h.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===ie},I.loading):s.createElement(Ut,{className:ta(null==D?void 0:D.loader,null==h||null==(e=h.classNames)?void 0:e.loader),visible:"loading"===ie})}():null,"loading"!==h.type?Se:null):null,s.createElement("div",{"data-content":"",className:ta(null==D?void 0:D.content,null==h||null==(i=h.classNames)?void 0:i.content)},s.createElement("div",{"data-title":"",className:ta(null==D?void 0:D.title,null==h||null==(l=h.classNames)?void 0:l.title)},h.jsx?h.jsx:"function"===typeof h.title?h.title():h.title),h.description?s.createElement("div",{"data-description":"",className:ta(A,ce,null==D?void 0:D.description,null==h||null==(o=h.classNames)?void 0:o.description)},"function"===typeof h.description?h.description():h.description):null),s.isValidElement(h.cancel)?h.cancel:h.cancel&&Xt(h.cancel)?s.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||k,onClick:e=>{Xt(h.cancel)&&le&&(null==h.cancel.onClick||h.cancel.onClick.call(h.cancel,e),we())},className:ta(null==D?void 0:D.cancelButton,null==h||null==(c=h.classNames)?void 0:c.cancelButton)},h.cancel.label):null,s.isValidElement(h.action)?h.action:h.action&&Xt(h.action)?s.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||C,onClick:e=>{Xt(h.action)&&(null==h.action.onClick||h.action.onClick.call(h.action,e),e.defaultPrevented||we())},className:ta(null==D?void 0:D.actionButton,null==h||null==(d=h.classNames)?void 0:d.actionButton)},h.action.label):null)};function sa(){if("undefined"===typeof window)return"ltr";if("undefined"===typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function na(e,t){const a={};return[e,t].forEach((e,t)=>{const s=1===t,n=s?"--mobile-offset":"--offset",r=s?"16px":"24px";function i(e){["top","right","bottom","left"].forEach(t=>{a["".concat(n,"-").concat(t)]="number"===typeof e?"".concat(e,"px"):e})}"number"===typeof e||"string"===typeof e?i(e):"object"===typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?a["".concat(n,"-").concat(t)]=r:a["".concat(n,"-").concat(t)]="number"===typeof e[t]?"".concat(e[t],"px"):e[t]}):i(r)}),a}const ra=s.forwardRef(function(e,t){const{id:a,invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:o,className:c,offset:d,mobileOffset:m,theme:h="light",richColors:p,duration:x,style:f,visibleToasts:g=Zt,toastOptions:v,dir:b=sa(),gap:y=ea,icons:j,containerAriaLabel:N="Notifications"}=e,[w,S]=s.useState([]),_=s.useMemo(()=>a?w.filter(e=>e.toasterId===a):w.filter(e=>!e.toasterId),[w,a]),k=s.useMemo(()=>Array.from(new Set([r].concat(_.filter(e=>e.position).map(e=>e.position)))),[_,r]),[C,E]=s.useState([]),[A,P]=s.useState(!1),[O,M]=s.useState(!1),[T,D]=s.useState("system"!==h?h:"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=s.useRef(null),R=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=s.useRef(null),F=s.useRef(!1),z=s.useCallback(e=>{S(t=>{var a;return(null==(a=t.find(t=>t.id===e.id))?void 0:a.delete)||Yt.dismiss(e.id),t.filter(t=>{let{id:a}=t;return a!==e.id})})},[]);return s.useEffect(()=>Yt.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{S(t=>t.map(t=>t.id===e.id?u(u({},t),{},{delete:!0}):t))}):setTimeout(()=>{Ft.flushSync(()=>{S(t=>{const a=t.findIndex(t=>t.id===e.id);return-1!==a?[...t.slice(0,a),u(u({},t[a]),e),...t.slice(a+1)]:[e,...t]})})})}),[w]),s.useEffect(()=>{if("system"!==h)return void D(h);if("system"===h&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),"undefined"===typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",e=>{let{matches:t}=e;D(t?"dark":"light")})}catch(t){e.addListener(e=>{let{matches:t}=e;try{D(t?"dark":"light")}catch(J1){console.error(J1)}})}},[h]),s.useEffect(()=>{w.length<=1&&P(!1)},[w]),s.useEffect(()=>{const e=e=>{var t;var a;i.every(t=>e[t]||e.code===t)&&(P(!0),null==(a=I.current)||a.focus());"Escape"!==e.code||document.activeElement!==I.current&&!(null==(t=I.current)?void 0:t.contains(document.activeElement))||P(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),s.useEffect(()=>{if(I.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,F.current=!1)}},[I.current]),s.createElement("section",{ref:t,"aria-label":"".concat(N," ").concat(R),tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,a)=>{var r;const[i,h]=t.split("-");return _.length?s.createElement("ol",{key:t,dir:"auto"===b?sa():b,tabIndex:-1,ref:I,className:c,"data-sonner-toaster":!0,"data-sonner-theme":T,"data-y-position":i,"data-x-position":h,style:u(u({"--front-toast-height":"".concat((null==(r=C[0])?void 0:r.height)||0,"px"),"--width":"".concat(356,"px"),"--gap":"".concat(y,"px")},f),na(d,m)),onBlur:e=>{F.current&&!e.currentTarget.contains(e.relatedTarget)&&(F.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||F.current||(F.current=!0,L.current=e.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{O||P(!1)},onDragEnd:()=>P(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||M(!0)},onPointerUp:()=>M(!1)},_.filter(e=>!e.position&&0===a||e.position===t).map((a,r)=>{var i,c;return s.createElement(aa,{key:a.id,icons:j,index:r,toast:a,defaultRichColors:p,duration:null!=(i=null==v?void 0:v.duration)?i:x,className:null==v?void 0:v.className,descriptionClassName:null==v?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:null!=(c=null==v?void 0:v.closeButton)?c:o,interacting:O,position:t,style:null==v?void 0:v.style,unstyled:null==v?void 0:v.unstyled,classNames:null==v?void 0:v.classNames,cancelButtonStyle:null==v?void 0:v.cancelButtonStyle,actionButtonStyle:null==v?void 0:v.actionButtonStyle,closeButtonAriaLabel:null==v?void 0:v.closeButtonAriaLabel,removeToast:z,toasts:_.filter(e=>e.position==a.position),heights:C.filter(e=>e.position==a.position),setHeights:E,expandByDefault:l,gap:y,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),ia=e=>"string"===typeof e,la=()=>{let e,t;const a=new Promise((a,s)=>{e=a,t=s});return a.resolve=e,a.reject=t,a},oa=e=>null==e?"":""+e,ca=/###/g,da=e=>e&&e.indexOf("###")>-1?e.replace(ca,"."):e,ua=e=>!e||ia(e),ma=(e,t,a)=>{const s=ia(t)?t.split("."):t;let n=0;for(;n<s.length-1;){if(ua(e))return{};const t=da(s[n]);!e[t]&&a&&(e[t]=new a),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++n}return ua(e)?{}:{obj:e,k:da(s[n])}},ha=(e,t,a)=>{const{obj:s,k:n}=ma(e,t,Object);if(void 0!==s||1===t.length)return void(s[n]=a);let r=t[t.length-1],i=t.slice(0,t.length-1),l=ma(e,i,Object);for(;void 0===l.obj&&i.length;){var o;r="".concat(i[i.length-1],".").concat(r),i=i.slice(0,i.length-1),l=ma(e,i,Object),null!==(o=l)&&void 0!==o&&o.obj&&"undefined"!==typeof l.obj["".concat(l.k,".").concat(r)]&&(l.obj=void 0)}l.obj["".concat(l.k,".").concat(r)]=a},pa=(e,t)=>{const{obj:a,k:s}=ma(e,t);if(a&&Object.prototype.hasOwnProperty.call(a,s))return a[s]},xa=(e,t,a)=>{for(const s in t)"__proto__"!==s&&"constructor"!==s&&(s in e?ia(e[s])||e[s]instanceof String||ia(t[s])||t[s]instanceof String?a&&(e[s]=t[s]):xa(e[s],t[s],a):e[s]=t[s]);return e},fa=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ga={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const va=e=>ia(e)?e.replace(/[&<>"'\/]/g,e=>ga[e]):e;const ba=[" ",",","?","!",";"],ya=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const a=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,a),this.regExpQueue.push(e),a}}(20),ja=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const s=t.split(a);let n=e;for(let r=0;r<s.length;){if(!n||"object"!==typeof n)return;let e,t="";for(let i=r;i<s.length;++i)if(i!==r&&(t+=a),t+=s[i],e=n[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&i<s.length-1)continue;r+=i-r+1;break}n=e}return n},Na=e=>null===e||void 0===e?void 0:e.replace("_","-"),wa={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var a,s;null===(a=console)||void 0===a||null===(a=a[e])||void 0===a||null===(s=a.apply)||void 0===s||s.call(a,console,t)}};class Sa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||wa,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,a,s){return s&&!this.debug?null:(ia(e[0])&&(e[0]="".concat(a).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new Sa(this.logger,u(u({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Sa(this.logger,e)}}var _a=new Sa;class ka{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const a=this.observers[e].get(t)||0;this.observers[e].set(t,a+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,s]=e;for(let n=0;n<s;n++)t(...a)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[s,n]=t;for(let r=0;r<n;r++)s.apply(s,[e,...a])})}}}class Ca extends ka{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,a){var s;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,i=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],a&&(Array.isArray(a)?l.push(...a):ia(a)&&r?l.push(...a.split(r)):l.push(a)));const o=pa(this.data,l);return!o&&!t&&!a&&e.indexOf(".")>-1&&(e=l[0],t=l[1],a=l.slice(2).join(".")),!o&&i&&ia(a)?ja(null===(s=this.data)||void 0===s||null===(s=s[e])||void 0===s?void 0:s[t],a,r):o}addResource(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let i=[e,t];a&&(i=i.concat(r?a.split(r):a)),e.indexOf(".")>-1&&(i=e.split("."),s=t,t=i[1]),this.addNamespaces(t),ha(this.data,i,s),n.silent||this.emit("added",e,t,a,s)}addResources(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const n in a)(ia(a[n])||Array.isArray(a[n]))&&this.addResource(e,t,n,a[n],{silent:!0});s.silent||this.emit("added",e,t,a)}addResourceBundle(e,t,a,s,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),s=a,a=t,t=i[1]),this.addNamespaces(t);let l=pa(this.data,i)||{};r.skipCopy||(a=JSON.parse(JSON.stringify(a))),s?xa(l,a,n):l=u(u({},l),a),ha(this.data,i,l),r.silent||this.emit("added",e,t,a)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var Ea={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,a,s,n){return e.forEach(e=>{var r,i;t=null!==(r=null===(i=this.processors[e])||void 0===i?void 0:i.process(t,a,s,n))&&void 0!==r?r:t}),t}};const Aa=Symbol("i18next/PATH_KEY");function Pa(e,t){var a;const{[Aa]:s}=e(function(){const e=[],t=Object.create(null);let a;return t.get=(s,n)=>{var r,i;return null===(r=a)||void 0===r||null===(i=r.revoke)||void 0===i||i.call(r),n===Aa?e:(e.push(n),a=Proxy.revocable(s,t),a.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return s.join(null!==(a=null===t||void 0===t?void 0:t.keySeparator)&&void 0!==a?a:".")}const Oa={},Ma=e=>!ia(e)&&"boolean"!==typeof e&&"number"!==typeof e;class Ta extends ka{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,a)=>{e.forEach(e=>{t[e]&&(a[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=_a.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){const t=u({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}});if(null==e)return!1;const a=this.resolve(e,t);if(void 0===(null===a||void 0===a?void 0:a.res))return!1;const s=Ma(a.res);return!1!==t.returnObjects||!s}extractFromKey(e,t){let a=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===a&&(a=":");const s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const r=a&&e.indexOf(a)>-1,i=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,a)=>{t=t||"",a=a||"";const s=ba.filter(e=>t.indexOf(e)<0&&a.indexOf(e)<0);if(0===s.length)return!0;const n=ya.getRegExp("(".concat(s.map(e=>"?"===e?"\\?":e).join("|"),")"));let r=!n.test(e);if(!r){const t=e.indexOf(a);t>0&&!n.test(e.substring(0,t))&&(r=!0)}return r})(e,a,s);if(r&&!i){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:ia(n)?[n]:n};const r=e.split(a);(a!==s||a===s&&this.options.ns.indexOf(r[0])>-1)&&(n=r.shift()),e=r.join(s)}return{key:e,namespaces:ia(n)?[n]:n}}translate(e,t,a){let s="object"===typeof t?u({},t):t;if("object"!==typeof s&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof s&&(s=u({},s)),s||(s={}),null==e)return"";"function"===typeof e&&(e=Pa(e,u(u({},this.options),s))),Array.isArray(e)||(e=[String(e)]);const n=void 0!==s.returnDetails?s.returnDetails:this.options.returnDetails,r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,{key:i,namespaces:l}=this.extractFromKey(e[e.length-1],s),o=l[l.length-1];let c=void 0!==s.nsSeparator?s.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const d=s.lng||this.language,m=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null===d||void 0===d?void 0:d.toLowerCase()))return m?n?{res:"".concat(o).concat(c).concat(i),usedKey:i,exactUsedKey:i,usedLng:d,usedNS:o,usedParams:this.getUsedParamsDetails(s)}:"".concat(o).concat(c).concat(i):n?{res:i,usedKey:i,exactUsedKey:i,usedLng:d,usedNS:o,usedParams:this.getUsedParamsDetails(s)}:i;const h=this.resolve(e,s);let p=null===h||void 0===h?void 0:h.res;const x=(null===h||void 0===h?void 0:h.usedKey)||i,f=(null===h||void 0===h?void 0:h.exactUsedKey)||i,g=void 0!==s.joinArrays?s.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,b=void 0!==s.count&&!ia(s.count),y=Ta.hasDefaultValue(s),j=b?this.pluralResolver.getSuffix(d,s.count,s):"",N=s.ordinal&&b?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",w=b&&!s.ordinal&&0===s.count,S=w&&s["defaultValue".concat(this.options.pluralSeparator,"zero")]||s["defaultValue".concat(j)]||s["defaultValue".concat(N)]||s.defaultValue;let _=p;v&&!p&&y&&(_=S);const k=Ma(_),C=Object.prototype.toString.apply(_);if(!(v&&_&&k&&["[object Number]","[object Function]","[object RegExp]"].indexOf(C)<0)||ia(g)&&Array.isArray(_))if(v&&ia(g)&&Array.isArray(p))p=p.join(g),p&&(p=this.extendTranslation(p,e,s,a));else{let t=!1,n=!1;!this.isValidLookup(p)&&y&&(t=!0,p=S),this.isValidLookup(p)||(n=!0,p=i);const l=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&n?void 0:p,m=y&&S!==p&&this.options.updateMissing;if(n||t||m){if(this.logger.log(m?"updateKey":"missingKey",d,o,i,m?S:p),r){const e=this.resolve(i,u(u({},s),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let s=0;s<t.length;s++)e.push(t[s]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(s.lng||this.language):e.push(s.lng||this.language);const a=(e,t,a)=>{var n;const r=y&&a!==p?a:l;this.options.missingKeyHandler?this.options.missingKeyHandler(e,o,t,r,m,s):null!==(n=this.backendConnector)&&void 0!==n&&n.saveMissing&&this.backendConnector.saveMissing(e,o,t,r,m,s),this.emit("missingKey",e,o,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,s);w&&s["defaultValue".concat(this.options.pluralSeparator,"zero")]&&t.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&t.push("".concat(this.options.pluralSeparator,"zero")),t.forEach(t=>{a([e],i+t,s["defaultValue".concat(t)]||S)})}):a(e,i,S))}p=this.extendTranslation(p,e,s,h,a),n&&p===i&&this.options.appendNamespaceToMissingKey&&(p="".concat(o).concat(c).concat(i)),(n||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(o).concat(c).concat(i):i,t?p:void 0,s))}else{if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,_,u(u({},s),{},{ns:l})):"key '".concat(i," (").concat(this.language,")' returned an object instead of string.");return n?(h.res=e,h.usedParams=this.getUsedParamsDetails(s),h):e}if(r){const e=Array.isArray(_),t=e?[]:{},a=e?f:x;for(const n in _)if(Object.prototype.hasOwnProperty.call(_,n)){const e="".concat(a).concat(r).concat(n);t[n]=y&&!p?this.translate(e,u(u({},s),{},{defaultValue:Ma(S)?S[n]:void 0},{joinArrays:!1,ns:l})):this.translate(e,u(u({},s),{joinArrays:!1,ns:l})),t[n]===e&&(t[n]=_[n])}p=t}}return n?(h.res=p,h.usedParams=this.getUsedParamsDetails(s),h):p}extendTranslation(e,t,a,s,n){var r,i=this;if(null!==(r=this.i18nFormat)&&void 0!==r&&r.parse)e=this.i18nFormat.parse(e,u(u({},this.options.interpolation.defaultVariables),a),a.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!a.skipInterpolation){var l;a.interpolation&&this.interpolator.init(u(u({},a),{interpolation:u(u({},this.options.interpolation),a.interpolation)}));const r=ia(e)&&(void 0!==(null===a||void 0===a||null===(l=a.interpolation)||void 0===l?void 0:l.skipOnVariables)?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(r){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let c=a.replace&&!ia(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(c=u(u({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,a.lng||this.language||s.usedLng,a),r){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(a.nest=!1)}!a.lng&&s&&s.res&&(a.lng=this.language||s.usedLng),!1!==a.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return(null===n||void 0===n?void 0:n[0])!==s[0]||a.context?i.translate(...s,t):(i.logger.warn("It seems you are nesting recursively key: ".concat(s[0]," in key: ").concat(t[0])),null)},a)),a.interpolation&&this.interpolator.reset()}const o=a.postProcess||this.options.postProcess,c=ia(o)?[o]:o;return null!=e&&null!==c&&void 0!==c&&c.length&&!1!==a.applyPostProcessor&&(e=Ea.handle(c,e,t,this.options&&this.options.postProcessPassResolved?u({i18nResolved:u(u({},s),{},{usedParams:this.getUsedParamsDetails(a)})},a):a,this)),e}resolve(e){let t,a,s,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ia(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const l=this.extractFromKey(e,i),o=l.key;a=o;let c=l.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==i.count&&!ia(i.count),u=d&&!i.ordinal&&0===i.count,m=void 0!==i.context&&(ia(i.context)||"number"===typeof i.context)&&""!==i.context,h=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);c.forEach(e=>{var l,c;this.isValidLookup(t)||(r=e,Oa["".concat(h[0],"-").concat(e)]||null===(l=this.utils)||void 0===l||!l.hasLoadedNamespace||null!==(c=this.utils)&&void 0!==c&&c.hasLoadedNamespace(r)||(Oa["".concat(h[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(a,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(r,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(a=>{var r;if(this.isValidLookup(t))return;n=a;const l=[o];if(null!==(r=this.i18nFormat)&&void 0!==r&&r.addLookupKeys)this.i18nFormat.addLookupKeys(l,o,a,e,i);else{let e;d&&(e=this.pluralResolver.getSuffix(a,i.count,i));const t="".concat(this.options.pluralSeparator,"zero"),s="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(d&&(i.ordinal&&0===e.indexOf(s)&&l.push(o+e.replace(s,this.options.pluralSeparator)),l.push(o+e),u&&l.push(o+t)),m){const a="".concat(o).concat(this.options.contextSeparator||"_").concat(i.context);l.push(a),d&&(i.ordinal&&0===e.indexOf(s)&&l.push(a+e.replace(s,this.options.pluralSeparator)),l.push(a+e),u&&l.push(a+t))}}let c;for(;c=l.pop();)this.isValidLookup(t)||(s=c,t=this.getResource(a,e,c,i))}))})}),{res:t,usedKey:a,exactUsedKey:s,usedLng:n,usedNS:r}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,a){var s;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!==(s=this.i18nFormat)&&void 0!==s&&s.getResource?this.i18nFormat.getResource(e,t,a,n):this.resourceStore.getResource(e,t,a,n)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=e.replace&&!ia(e.replace);let s=a?e.replace:e;if(a&&"undefined"!==typeof e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s=u(u({},this.options.interpolation.defaultVariables),s)),!a){s=u({},s);for(const e of t)delete s[e]}return s}static hasDefaultValue(e){const t="defaultValue";for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t===a.substring(0,12)&&void 0!==e[a])return!0;return!1}}class Da{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=_a.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Na(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Na(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ia(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(J1){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const a=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(a)||(t=a)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const a=this.getScriptPartFromCode(e);if(this.isSupportedCode(a))return t=a;const s=this.getLanguagePartFromCode(e);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(e=>e===s?e:e.indexOf("-")<0&&s.indexOf("-")<0?void 0:e.indexOf("-")>0&&s.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===s||0===e.indexOf(s)&&s.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),ia(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let a=e[t];return a||(a=e[this.getScriptPartFromCode(t)]),a||(a=e[this.formatLanguageCode(t)]),a||(a=e[this.getLanguagePartFromCode(t)]),a||(a=e.default),a||[]}toResolveHierarchy(e,t){const a=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),s=[],n=e=>{e&&(this.isSupportedCode(e)?s.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return ia(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&n(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(e))):ia(e)&&n(this.formatLanguageCode(e)),a.forEach(e=>{s.indexOf(e)<0&&n(this.formatLanguageCode(e))}),s}}const Ia={zero:0,one:1,two:2,few:3,many:4,other:5},Ra={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class La{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=_a.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Na("dev"===e?"en":e),s=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:a,type:s});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let r;try{r=new Intl.PluralRules(a,{type:s})}catch(i){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Ra;if(!e.match(/-|_/))return Ra;const a=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(a,t)}return this.pluralRulesCache[n]=r,r}needsPlural(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getRule(e,a);return s||(s=this.getRule("dev",a)),(null===(t=s)||void 0===t?void 0:t.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,a).map(e=>"".concat(t).concat(e))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.getRule(e,t);return a||(a=this.getRule("dev",t)),a?a.resolvedOptions().pluralCategories.sort((e,t)=>Ia[e]-Ia[t]).map(e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e)):[]}getSuffix(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getRule(e,a);return s?"".concat(this.options.prepend).concat(a.ordinal?"ordinal".concat(this.options.prepend):"").concat(s.select(t)):(this.logger.warn("no plural rule found for: ".concat(e)),this.getSuffix("dev",t,a))}}const Fa=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,a)=>{const s=pa(e,a);return void 0!==s?s:pa(t,a)})(e,t,a);return!r&&n&&ia(a)&&(r=ja(e,a,s),void 0===r&&(r=ja(t,a,s))),r},za=e=>e.replace(/\$/g,"$$$$");class Ba{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=_a.create("interpolator"),this.options=t,this.format=(null===t||void 0===t||null===(e=t.interpolation)||void 0===e?void 0:e.format)||(e=>e),this.init(t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:a,useRawValueToEscape:s,prefix:n,prefixEscaped:r,suffix:i,suffixEscaped:l,formatSeparator:o,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:m,nestingSuffix:h,nestingSuffixEscaped:p,nestingOptionsSeparator:x,maxReplaces:f,alwaysFormat:g}=e.interpolation;this.escape=void 0!==t?t:va,this.escapeValue=void 0===a||a,this.useRawValueToEscape=void 0!==s&&s,this.prefix=n?fa(n):r||"{{",this.suffix=i?fa(i):l||"}}",this.formatSeparator=o||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?fa(u):m||fa("$t("),this.nestingSuffix=h?fa(h):p||fa(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==g&&g,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null===e||void 0===e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"((?:[^()\"']+|\"[^\"]*\"|'[^']*'|\\((?:[^()]|\"[^\"]*\"|'[^']*')*\\))*?)").concat(this.nestingSuffix))}interpolate(e,t,a,s){var n;let r,i,l;const o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const n=Fa(t,o,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(n,void 0,a,u(u(u({},s),t),{},{interpolationkey:e})):n}const n=e.split(this.formatSeparator),r=n.shift().trim(),i=n.join(this.formatSeparator).trim();return this.format(Fa(t,o,r,this.options.keySeparator,this.options.ignoreJSONStructure),i,a,u(u(u({},s),t),{},{interpolationkey:r}))};this.resetRegExp();const d=(null===s||void 0===s?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,m=void 0!==(null===s||void 0===s||null===(n=s.interpolation)||void 0===n?void 0:n.skipOnVariables)?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>za(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?za(this.escape(e)):za(e)}].forEach(t=>{for(l=0;r=t.regex.exec(e);){const a=r[1].trim();if(i=c(a),void 0===i)if("function"===typeof d){const t=d(e,r,s);i=ia(t)?t:""}else if(s&&Object.prototype.hasOwnProperty.call(s,a))i="";else{if(m){i=r[0];continue}this.logger.warn("missed to pass in variable ".concat(a," for interpolating ").concat(e)),i=""}else ia(i)||this.useRawValueToEscape||(i=oa(i));const n=t.safeValue(i);if(e=e.replace(r[0],n),m?(t.regex.lastIndex+=i.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let a,s,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(e,t)=>{var a;const s=this.nestingOptionsSeparator;if(e.indexOf(s)<0)return e;const r=e.split(new RegExp("".concat(s,"[ ]*{")));let i="{".concat(r[1]);e=r[0],i=this.interpolate(i,n);const l=i.match(/'/g),o=i.match(/"/g);((null!==(a=null===l||void 0===l?void 0:l.length)&&void 0!==a?a:0)%2===0&&!o||o.length%2!==0)&&(i=i.replace(/'/g,'"'));try{n=JSON.parse(i),t&&(n=u(u({},t),n))}catch(J1){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),J1),"".concat(e).concat(s).concat(i)}return n.defaultValue&&n.defaultValue.indexOf(this.prefix)>-1&&delete n.defaultValue,e};for(;a=this.nestingRegexp.exec(e);){let l=[];n=u({},r),n=n.replace&&!ia(n.replace)?n.replace:n,n.applyPostProcessor=!1,delete n.defaultValue;const o=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(-1!==o&&(l=a[1].slice(o).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),a[1]=a[1].slice(0,o)),s=t(i.call(this,a[1].trim(),n),n),s&&a[0]===e&&!ia(s))return s;ia(s)||(s=oa(s)),s||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(e)),s=""),l.length&&(s=l.reduce((e,t)=>this.format(e,t,r.lng,u(u({},r),{},{interpolationkey:a[1].trim()})),s.trim())),e=e.replace(a[0],s),this.regexp.lastIndex=0}return e}}const Ua=e=>{const t={};return(a,s,n)=>{let r=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(r=u(u({},r),{},{[n.interpolationkey]:void 0}));const i=s+JSON.stringify(r);let l=t[i];return l||(l=e(Na(s),n),t[i]=l),l(a)}},Ha=e=>(t,a,s)=>e(Na(a),s)(t);class qa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=_a.create("formatter"),this.options=e,this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||",";const a=t.cacheInBuiltFormats?Ua:Ha;this.formats={number:a((e,t)=>{const a=new Intl.NumberFormat(e,u({},t));return e=>a.format(e)}),currency:a((e,t)=>{const a=new Intl.NumberFormat(e,u(u({},t),{},{style:"currency"}));return e=>a.format(e)}),datetime:a((e,t)=>{const a=new Intl.DateTimeFormat(e,u({},t));return e=>a.format(e)}),relativetime:a((e,t)=>{const a=new Intl.RelativeTimeFormat(e,u({},t));return e=>a.format(e,t.range||"day")}),list:a((e,t)=>{const a=new Intl.ListFormat(e,u({},t));return e=>a.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Ua(t)}format(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find(e=>e.indexOf(")")>-1)){const e=n.findIndex(e=>e.indexOf(")")>-1);n[0]=[n[0],...n.splice(1,e)].join(this.formatSeparator)}return n.reduce((e,t)=>{const{formatName:n,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);"currency"===t&&n.indexOf(":")<0?a.currency||(a.currency=n.trim()):"relativetime"===t&&n.indexOf(":")<0?a.range||(a.range=n.trim()):n.split(";").forEach(e=>{if(e){const[t,...s]=e.split(":"),n=s.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();a[r]||(a[r]=n),"false"===n&&(a[r]=!1),"true"===n&&(a[r]=!0),isNaN(n)||(a[r]=parseInt(n,10))}})}return{formatName:t,formatOptions:a}})(t);if(this.formats[n]){let t=e;try{var i;const l=(null===s||void 0===s||null===(i=s.formatParams)||void 0===i?void 0:i[s.interpolationkey])||{},o=l.locale||l.lng||s.locale||s.lng||a;t=this.formats[n](e,o,u(u(u({},r),s),l))}catch(l){this.logger.warn(l)}return t}return this.logger.warn("there was no format function for ".concat(n)),e},e)}}class Va extends ka{constructor(e,t,a){var s,n;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=a,this.languageUtils=a.languageUtils,this.options=r,this.logger=_a.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null===(s=this.backend)||void 0===s||null===(n=s.init)||void 0===n||n.call(s,a,r.backend,r)}queueLoad(e,t,a,s){const n={},r={},i={},l={};return e.forEach(e=>{let s=!0;t.forEach(t=>{const i="".concat(e,"|").concat(t);!a.reload&&this.store.hasResourceBundle(e,t)?this.state[i]=2:this.state[i]<0||(1===this.state[i]?void 0===r[i]&&(r[i]=!0):(this.state[i]=1,s=!1,void 0===r[i]&&(r[i]=!0),void 0===n[i]&&(n[i]=!0),void 0===l[t]&&(l[t]=!0)))}),s||(i[e]=!0)}),(Object.keys(n).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(n),pending:Object.keys(r),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(l)}}loaded(e,t,a){const s=e.split("|"),n=s[0],r=s[1];t&&this.emit("failedLoading",n,r,t),!t&&a&&this.store.addResourceBundle(n,r,a,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&a&&(this.state[e]=0);const i={};this.queue.forEach(a=>{((e,t,a)=>{const{obj:s,k:n}=ma(e,t,Object);s[n]=s[n]||[],s[n].push(a)})(a.loaded,[n],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(a,e),t&&a.errors.push(t),0!==a.pendingCount||a.done||(Object.keys(a.loaded).forEach(e=>{i[e]||(i[e]={});const t=a.loaded[e];t.length&&t.forEach(t=>{void 0===i[e][t]&&(i[e][t]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(e=>!e.done)}read(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:a,tried:s,wait:n,callback:r});this.readingCalls++;const i=(i,l)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}i&&l&&s<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,a,s+1,2*n,r)},n):r(i,l)},l=this.backend[a].bind(this.backend);if(2!==l.length)return l(e,t,i);try{const a=l(e,t);a&&"function"===typeof a.then?a.then(e=>i(null,e)).catch(i):i(null,a)}catch(o){i(o)}}prepareLoading(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ia(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ia(t)&&(t=[t]);const n=this.queueLoad(e,t,a,s);if(!n.toLoad.length)return n.pending.length||s(),null;n.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,a){this.prepareLoading(e,t,{},a)}reload(e,t,a){this.prepareLoading(e,t,{reload:!0},a)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const a=e.split("|"),s=a[0],n=a[1];this.read(s,n,"read",void 0,void 0,(a,r)=>{a&&this.logger.warn("".concat(t,"loading namespace ").concat(n," for language ").concat(s," failed"),a),!a&&r&&this.logger.log("".concat(t,"loaded namespace ").concat(n," for language ").concat(s),r),this.loaded(e,a,r)})}saveMissing(e,t,a,s,n){var r,i,l;let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(null===(r=this.services)||void 0===r||null===(r=r.utils)||void 0===r||!r.hasLoadedNamespace||null!==(i=this.services)&&void 0!==i&&null!==(i=i.utils)&&void 0!==i&&i.hasLoadedNamespace(t)){if(void 0!==a&&null!==a&&""!==a){if(null!==(l=this.backend)&&void 0!==l&&l.create){const r=u(u({},o),{},{isUpdate:n}),i=this.backend.create.bind(this.backend);if(i.length<6)try{let n;n=5===i.length?i(e,t,a,s,r):i(e,t,a,s),n&&"function"===typeof n.then?n.then(e=>c(null,e)).catch(c):c(null,n)}catch(d){c(d)}else i(e,t,a,s,c,r)}e&&e[0]&&this.store.addResource(e[0],t,a,s)}}else this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const Wa=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),ia(e[1])&&(t.defaultValue=e[1]),ia(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const a=e[3]||e[2];Object.keys(a).forEach(e=>{t[e]=a[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Ga=e=>{var t,a;return ia(e.ns)&&(e.ns=[e.ns]),ia(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ia(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null===(t=e.supportedLngs)||void 0===t||null===(a=t.indexOf)||void 0===a?void 0:a.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"===typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},Ka=()=>{};class Ya extends ka{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var a;if(super(),this.options=Ga(e),this.services={},this.logger=_a,this.modules={external:[]},a=this,Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(e=>{"function"===typeof a[e]&&(a[e]=a[e].bind(a))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(a=t,t={}),null==t.defaultNS&&t.ns&&(ia(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=Wa();this.options=u(u(u({},s),this.options),Ga(t)),this.options.interpolation=u(u({},s.interpolation),this.options.interpolation),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),"function"!==typeof this.options.overloadTranslationOptionHandler&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler),!1===this.options.showSupportNotice||(e=>{var t,a,s;return(null===e||void 0===e||null===(t=e.modules)||void 0===t||null===(t=t.backend)||void 0===t||null===(t=t.name)||void 0===t?void 0:t.indexOf("Locize"))>0||(null===e||void 0===e||null===(a=e.modules)||void 0===a||null===(a=a.backend)||void 0===a||null===(a=a.constructor)||void 0===a||null===(a=a.name)||void 0===a?void 0:a.indexOf("Locize"))>0||!(null===e||void 0===e||null===(s=e.options)||void 0===s||null===(s=s.backend)||void 0===s||!s.backends||!e.options.backend.backends.some(e=>{var t,a;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.indexOf("Locize"))>0||(null===e||void 0===e||null===(a=e.constructor)||void 0===a||null===(a=a.name)||void 0===a?void 0:a.indexOf("Locize"))>0}))})(this)||"undefined"!==typeof console&&"undefined"!==typeof console.info&&console.info("\ud83c\udf10 i18next is maintained with support from locize.com \u2014 consider powering your project with managed localization (AI, CDN, integrations): https://locize.com \ud83d\udc99");const n=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?_a.init(n(this.modules.logger),this.options):_a.init(null,this.options),t=this.modules.formatter?this.modules.formatter:qa;const a=new Da(this.options);this.store=new Ca(this.options.resources,this.options);const r=this.services;r.logger=_a,r.resourceStore=this.store,r.languageUtils=a,r.pluralResolver=new La(a,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!t||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(r.formatter=n(t),r.formatter.init&&r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new Ba(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new Va(n(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];e.emit(t,...s)}),this.modules.languageDetector&&(r.languageDetector=n(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=n(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new Ta(this.services,this.options),this.translator.on("*",function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];e.emit(t,...s)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Ka),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const r=la(),i=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(t),a(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),r}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ka;const a=ia(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){var s,n;if("cimode"===(null===a||void 0===a?void 0:a.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(a)r(a);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>r(e))}null===(s=this.options.preload)||void 0===s||null===(n=s.forEach)||void 0===n||n.call(s,e=>r(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,a){const s=la();return"function"===typeof e&&(a=e,e=void 0),"function"===typeof t&&(a=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),a||(a=Ka),this.services.backendConnector.reload(e,t,e=>{s.resolve(),a(e)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Ea.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var a=this;this.isLanguageChangingTo=e;const s=la();this.emit("languageChanging",e);const n=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},r=(r,i)=>{i?this.isLanguageChangingTo===e&&(n(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,s.resolve(function(){return a.t(...arguments)}),t&&t(r,function(){return a.t(...arguments)})},i=t=>{e||t||!this.services.languageDetector||(t=[]);const a=ia(t)?t:t&&t[0],s=this.store.hasLanguageSomeTranslations(a)?a:this.services.languageUtils.getBestMatchFromCodes(ia(t)?[t]:t);var i,l;s&&(this.language||n(s),this.translator.language||this.translator.changeLanguage(s),null===(i=this.services.languageDetector)||void 0===i||null===(l=i.cacheUserLanguage)||void 0===l||l.call(i,s));this.loadResources(s,e=>{r(e,s)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),s}getFixedT(e,t,a){var s=this;const n=function(e,t){let r;if("object"!==typeof t){for(var i=arguments.length,l=new Array(i>2?i-2:0),o=2;o<i;o++)l[o-2]=arguments[o];r=s.options.overloadTranslationOptionHandler([e,t].concat(l))}else r=u({},t);r.lng=r.lng||n.lng,r.lngs=r.lngs||n.lngs,r.ns=r.ns||n.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||a||n.keyPrefix);const c=s.options.keySeparator||".";let d;return r.keyPrefix&&Array.isArray(e)?d=e.map(e=>("function"===typeof e&&(e=Pa(e,u(u({},s.options),t))),"".concat(r.keyPrefix).concat(c).concat(e))):("function"===typeof e&&(e=Pa(e,u(u({},s.options),t))),d=r.keyPrefix?"".concat(r.keyPrefix).concat(c).concat(e):e),s.t(d,r)};return ia(e)?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=a,n}t(){for(var e,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return null===(e=this.translator)||void 0===e?void 0:e.translate(...a)}exists(){for(var e,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return null===(e=this.translator)||void 0===e?void 0:e.exists(...a)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=t.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===a.toLowerCase())return!0;const r=(e,t)=>{const a=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===a||0===a||2===a};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!!this.hasResourceBundle(a,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!r(a,e)||s&&!r(n,e)))}loadNamespaces(e,t){const a=la();return this.options.ns?(ia(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{a.resolve(),t&&t(e)}),a):(t&&t(),Promise.resolve())}loadLanguages(e,t){const a=la();ia(e)&&(e=[e]);const s=this.options.preload||[],n=e.filter(e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return n.length?(this.options.preload=s.concat(n),this.loadResources(e=>{a.resolve(),t&&t(e)}),a):(t&&t(),Promise.resolve())}dir(e){var t,a;if(e||(e=this.resolvedLanguage||((null===(t=this.languages)||void 0===t?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(J1){}const s=(null===(a=this.services)||void 0===a?void 0:a.languageUtils)||new Da(Wa());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){const e=new Ya(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0);return e.createInstance=Ya.createInstance,e}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ka;const a=e.forkResourceStore;a&&delete e.forkResourceStore;const s=u(u(u({},this.options),e),{isClone:!0}),n=new Ya(s);void 0===e.debug&&void 0===e.prefix||(n.logger=n.logger.clone(e));if(["store","services","language"].forEach(e=>{n[e]=this[e]}),n.services=u({},this.services),n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},a){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]=u({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce((a,s)=>(a[s]=u({},e[t][s]),a),e[t]),e),{});n.store=new Ca(e,s),n.services.resourceStore=n.store}if(e.interpolation){const t=u(u(u({},Wa().interpolation),this.options.interpolation),e.interpolation),a=u(u({},s),{},{interpolation:t});n.services.interpolator=new Ba(a)}return n.translator=new Ta(n.services,s),n.translator.on("*",function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];n.emit(e,...a)}),n.init(s,t),n.translator.options=s,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ja=Ya.createInstance();Ja.createInstance,Ja.dir,Ja.init,Ja.loadResources,Ja.reloadResources,Ja.use,Ja.changeLanguage,Ja.getFixedT,Ja.t,Ja.exists,Ja.setDefaultNamespace,Ja.hasLoadedNamespace,Ja.loadNamespaces,Ja.loadLanguages;a(7413);Object.create(null);const $a=(e,t,a,s)=>{var n,r,i;const l=[a,u({code:t},s||{})];if(null!==e&&void 0!==e&&null!==(n=e.services)&&void 0!==n&&null!==(n=n.logger)&&void 0!==n&&n.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);as(l[0])&&(l[0]="react-i18next:: ".concat(l[0])),null!==e&&void 0!==e&&null!==(r=e.services)&&void 0!==r&&null!==(r=r.logger)&&void 0!==r&&r.warn?e.services.logger.warn(...l):null!==(i=console)&&void 0!==i&&i.warn&&console.warn(...l)},Qa={},Xa=(e,t,a,s)=>{as(a)&&Qa[a]||(as(a)&&(Qa[a]=new Date),$a(e,t,a,s))},Za=(e,t)=>()=>{if(e.isInitialized)t();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),t()};e.on("initialized",a)}},es=(e,t,a)=>{e.loadNamespaces(t,Za(e,a))},ts=(e,t,a,s)=>{if(as(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(t)>-1)return es(e,a,s);a.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,Za(e,s))},as=e=>"string"===typeof e,ss=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ns={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},rs=e=>ns[e];let is={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(ss,rs),transDefaultProps:void 0};let ls;const os=()=>ls,cs={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};is=u(u({},is),e)}(e.options.react),(e=>{ls=e})(e)}};const ds=(0,s.createContext)();class us{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}class ms extends Error{constructor(e,t,a){super(e),this.name="TranslationParserError",this.position=t,this.translationString=a,Error.captureStackTrace&&Error.captureStackTrace(this,ms)}}const hs={"&nbsp;":"\xa0","&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&copy;":"\xa9","&reg;":"\xae","&trade;":"\u2122","&hellip;":"\u2026","&ndash;":"\u2013","&mdash;":"\u2014","&lsquo;":"\u2018","&rsquo;":"\u2019","&sbquo;":"\u201a","&ldquo;":"\u201c","&rdquo;":"\u201d","&bdquo;":"\u201e","&dagger;":"\u2020","&Dagger;":"\u2021","&bull;":"\u2022","&prime;":"\u2032","&Prime;":"\u2033","&lsaquo;":"\u2039","&rsaquo;":"\u203a","&sect;":"\xa7","&para;":"\xb6","&middot;":"\xb7","&ensp;":"\u2002","&emsp;":"\u2003","&thinsp;":"\u2009","&euro;":"\u20ac","&pound;":"\xa3","&yen;":"\xa5","&cent;":"\xa2","&curren;":"\xa4","&times;":"\xd7","&divide;":"\xf7","&minus;":"\u2212","&plusmn;":"\xb1","&ne;":"\u2260","&le;":"\u2264","&ge;":"\u2265","&asymp;":"\u2248","&equiv;":"\u2261","&infin;":"\u221e","&int;":"\u222b","&sum;":"\u2211","&prod;":"\u220f","&radic;":"\u221a","&part;":"\u2202","&permil;":"\u2030","&deg;":"\xb0","&micro;":"\xb5","&larr;":"\u2190","&uarr;":"\u2191","&rarr;":"\u2192","&darr;":"\u2193","&harr;":"\u2194","&crarr;":"\u21b5","&lArr;":"\u21d0","&uArr;":"\u21d1","&rArr;":"\u21d2","&dArr;":"\u21d3","&hArr;":"\u21d4","&alpha;":"\u03b1","&beta;":"\u03b2","&gamma;":"\u03b3","&delta;":"\u03b4","&epsilon;":"\u03b5","&zeta;":"\u03b6","&eta;":"\u03b7","&theta;":"\u03b8","&iota;":"\u03b9","&kappa;":"\u03ba","&lambda;":"\u03bb","&mu;":"\u03bc","&nu;":"\u03bd","&xi;":"\u03be","&omicron;":"\u03bf","&pi;":"\u03c0","&rho;":"\u03c1","&sigma;":"\u03c3","&tau;":"\u03c4","&upsilon;":"\u03c5","&phi;":"\u03c6","&chi;":"\u03c7","&psi;":"\u03c8","&omega;":"\u03c9","&Alpha;":"\u0391","&Beta;":"\u0392","&Gamma;":"\u0393","&Delta;":"\u0394","&Epsilon;":"\u0395","&Zeta;":"\u0396","&Eta;":"\u0397","&Theta;":"\u0398","&Iota;":"\u0399","&Kappa;":"\u039a","&Lambda;":"\u039b","&Mu;":"\u039c","&Nu;":"\u039d","&Xi;":"\u039e","&Omicron;":"\u039f","&Pi;":"\u03a0","&Rho;":"\u03a1","&Sigma;":"\u03a3","&Tau;":"\u03a4","&Upsilon;":"\u03a5","&Phi;":"\u03a6","&Chi;":"\u03a7","&Psi;":"\u03a8","&Omega;":"\u03a9","&Agrave;":"\xc0","&Aacute;":"\xc1","&Acirc;":"\xc2","&Atilde;":"\xc3","&Auml;":"\xc4","&Aring;":"\xc5","&AElig;":"\xc6","&Ccedil;":"\xc7","&Egrave;":"\xc8","&Eacute;":"\xc9","&Ecirc;":"\xca","&Euml;":"\xcb","&Igrave;":"\xcc","&Iacute;":"\xcd","&Icirc;":"\xce","&Iuml;":"\xcf","&ETH;":"\xd0","&Ntilde;":"\xd1","&Ograve;":"\xd2","&Oacute;":"\xd3","&Ocirc;":"\xd4","&Otilde;":"\xd5","&Ouml;":"\xd6","&Oslash;":"\xd8","&Ugrave;":"\xd9","&Uacute;":"\xda","&Ucirc;":"\xdb","&Uuml;":"\xdc","&Yacute;":"\xdd","&THORN;":"\xde","&szlig;":"\xdf","&agrave;":"\xe0","&aacute;":"\xe1","&acirc;":"\xe2","&atilde;":"\xe3","&auml;":"\xe4","&aring;":"\xe5","&aelig;":"\xe6","&ccedil;":"\xe7","&egrave;":"\xe8","&eacute;":"\xe9","&ecirc;":"\xea","&euml;":"\xeb","&igrave;":"\xec","&iacute;":"\xed","&icirc;":"\xee","&iuml;":"\xef","&eth;":"\xf0","&ntilde;":"\xf1","&ograve;":"\xf2","&oacute;":"\xf3","&ocirc;":"\xf4","&otilde;":"\xf5","&ouml;":"\xf6","&oslash;":"\xf8","&ugrave;":"\xf9","&uacute;":"\xfa","&ucirc;":"\xfb","&uuml;":"\xfc","&yacute;":"\xfd","&thorn;":"\xfe","&yuml;":"\xff","&iexcl;":"\xa1","&iquest;":"\xbf","&fnof;":"\u0192","&circ;":"\u02c6","&tilde;":"\u02dc","&OElig;":"\u0152","&oelig;":"\u0153","&Scaron;":"\u0160","&scaron;":"\u0161","&Yuml;":"\u0178","&ordf;":"\xaa","&ordm;":"\xba","&macr;":"\xaf","&acute;":"\xb4","&cedil;":"\xb8","&sup1;":"\xb9","&sup2;":"\xb2","&sup3;":"\xb3","&frac14;":"\xbc","&frac12;":"\xbd","&frac34;":"\xbe","&spades;":"\u2660","&clubs;":"\u2663","&hearts;":"\u2665","&diams;":"\u2666","&loz;":"\u25ca","&oline;":"\u203e","&frasl;":"\u2044","&weierp;":"\u2118","&image;":"\u2111","&real;":"\u211c","&alefsym;":"\u2135"},ps=new RegExp(Object.keys(hs).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),"g"),xs=["children"],fs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];const a=(e=>{const t=[];let a=0,s="";const n=()=>{s&&(t.push({type:"Text",value:s,position:a-s.length}),s="")};for(;a<e.length;){const r=e[a];if("<"===r){const i=e.slice(a).match(/^<(\d+)>/);if(i)n(),t.push({type:"TagOpen",value:i[0],position:a,tagNumber:parseInt(i[1],10)}),a+=i[0].length;else{const i=e.slice(a).match(/^<\/(\d+)>/);i?(n(),t.push({type:"TagClose",value:i[0],position:a,tagNumber:parseInt(i[1],10)}),a+=i[0].length):(s+=r,a+=1)}}else s+=r,a+=1}return n(),t})(e),n=[],r=[],l=new Set;if(a.forEach(a=>{switch(a.type){case"Text":{const e=a.value.replace(ps,e=>hs[e]).replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(parseInt(t,10))).replace(/&#x([0-9a-fA-F]+);/g,(e,t)=>String.fromCharCode(parseInt(t,16)));(r.length>0?r[r.length-1].children:n).push(e)}break;case"TagOpen":{const{tagNumber:e}=a,s=(()=>{var e;if(0===r.length)return t;const a=r[r.length-1];return null!==(e=a.declaration.props)&&void 0!==e&&e.children&&Array.isArray(a.declaration.props.children)?a.declaration.props.children:a.declarations})(),i=s[e];if(!i){l.add(e);const t="<".concat(e,">");(r.length>0?r[r.length-1].children:n).push(t);break}r.push({tagNumber:e,children:[],position:a.position,declaration:i,declarations:s})}break;case"TagClose":{const{tagNumber:t}=a;if(l.has(t)){const e="</".concat(t,">");(r.length>0?r[r.length-1].children:n).push(e),l.delete(t);break}if(0===r.length)throw new ms("Unexpected closing tag </".concat(t,"> at position ").concat(a.position),a.position,e);const o=r.pop();if(o.tagNumber!==t)throw new ms("Mismatched tags: expected </".concat(o.tagNumber,"> but got </").concat(t,"> at position ").concat(a.position),a.position,e);const c=((e,t,a)=>{const{type:n,props:r={}}=e;if(r.children&&Array.isArray(r.children)&&a){const{children:e}=r,a=i(r,xs);return s.createElement(n,a,...t)}return 0===t.length?s.createElement(n,r):1===t.length?s.createElement(n,r,t[0]):s.createElement(n,r,...t)})(o.declaration,o.children,o.declarations);(r.length>0?r[r.length-1].children:n).push(c)}}}),r.length>0){const t=r[r.length-1];throw new ms("Unclosed tag <".concat(t.tagNumber,"> at position ").concat(t.position),t.position,e)}return n};function gs(e){var t,a,n;let{i18nKey:r,defaultTranslation:i,content:l,ns:o,values:c={},i18n:d,t:m}=e;const h=d||os();if(!h)return Xa(h,"NO_I18NEXT_INSTANCE","IcuTrans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),s.createElement(s.Fragment,{},i);const p=m||(null===(t=h.t)||void 0===t?void 0:t.bind(h))||(e=>e);let x=o||p.ns||(null===(a=h.options)||void 0===a?void 0:a.defaultNS);x=as(x)?[x]:x||["translation"];let f=c;null!==(n=h.options)&&void 0!==n&&null!==(n=n.interpolation)&&void 0!==n&&n.defaultVariables&&(f=c&&Object.keys(c).length>0?u(u({},c),h.options.interpolation.defaultVariables):u({},h.options.interpolation.defaultVariables));const g=p(r,u(u({defaultValue:i},f),{},{ns:x}));try{const e=fs(g,l);return s.createElement(s.Fragment,{},...e)}catch(v){return $a(h,"ICU_TRANS_RENDER_ERROR",'IcuTrans component error for key "'.concat(r,'": ').concat(v.message),{i18nKey:r,error:v}),s.createElement(s.Fragment,{},g)}}gs.displayName="IcuTransWithoutContext";var vs=a(6538);const bs={t:(e,t)=>{return as(t)?t:"object"===typeof(a=t)&&null!==a&&as(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var a},ready:!1},ys=()=>()=>{},js=function(e){var t,a,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:i}=r,{i18n:l,defaultNS:o}=(0,s.useContext)(ds)||{},c=i||l||os();c&&!c.reportNamespaces&&(c.reportNamespaces=new us),c||Xa(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const d=(0,s.useMemo)(()=>{var e;return u(u(u({},is),null===c||void 0===c||null===(e=c.options)||void 0===e?void 0:e.react),r)},[c,r]),{useSuspense:m,keyPrefix:h}=d,p=e||o||(null===c||void 0===c||null===(t=c.options)||void 0===t?void 0:t.defaultNS),x=as(p)?[p]:p||["translation"],f=(0,s.useMemo)(()=>x,x);null===c||void 0===c||null===(a=c.reportNamespaces)||void 0===a||null===(n=a.addUsedNamespaces)||void 0===n||n.call(a,f);const g=(0,s.useRef)(0),v=(0,s.useCallback)(e=>{if(!c)return ys;const{bindI18n:t,bindI18nStore:a}=d,s=()=>{g.current+=1,e()};return t&&c.on(t,s),a&&c.store.on(a,s),()=>{t&&t.split(" ").forEach(e=>c.off(e,s)),a&&a.split(" ").forEach(e=>c.store.off(e,s))}},[c,d]),b=(0,s.useRef)(),y=(0,s.useCallback)(()=>{if(!c)return bs;const e=!(!c.isInitialized&&!c.initializedStoreOnce)&&f.every(e=>function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:a.lng,precheck:(t,s)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e))return!1}}):(Xa(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,c,d)),t=r.lng||c.language,a=g.current,s=b.current;if(s&&s.ready===e&&s.lng===t&&s.keyPrefix===h&&s.revision===a)return s;const n={t:c.getFixedT(t,"fallback"===d.nsMode?f:f[0],h),ready:e,lng:t,keyPrefix:h,revision:a};return b.current=n,n},[c,f,h,d,r.lng]),[j,N]=(0,s.useState)(0),{t:w,ready:S}=(0,vs.useSyncExternalStore)(v,y,y);(0,s.useEffect)(()=>{if(c&&!S&&!m){const e=()=>N(e=>e+1);r.lng?ts(c,r.lng,f,e):es(c,f,e)}},[c,r.lng,f,S,m,j]);const _=c||{},k=(0,s.useRef)(null),C=(0,s.useRef)(),E=e=>{const t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;const a=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(a,"__original"))try{Object.defineProperty(a,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(s){}return a},A=(0,s.useMemo)(()=>{const e=_,t=null===e||void 0===e?void 0:e.language;let a=e;e&&(k.current&&k.current.__original===e?C.current!==t?(a=E(e),k.current=a,C.current=t):a=k.current:(a=E(e),k.current=a,C.current=t));const s=[w,a,S];return s.t=w,s.i18n=a,s.ready=S,s},[w,_,S,_.resolvedLanguage,_.language,_.languages]);if(c&&m&&!S)throw new Promise(e=>{const t=()=>e();r.lng?ts(c,r.lng,f,t):es(c,f,t)});return A};Ja.use(cs).init({resources:{en:{translation:{app_name:"Schooltino",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",add:"Add",search:"Search",filter:"Filter",actions:"Actions",status:"Status",loading:"Loading...",no_data:"No data found",success:"Success",error:"Error",confirm:"Confirm",back:"Back",view:"View",download:"Download",print:"Print",this_month:"This Month",quick_actions:"Quick Actions",ai_tools:"AI Tools",infrastructure:"Infrastructure",login:"Login",logout:"Logout",email:"Email",password:"Password",remember_me:"Remember me",forgot_password:"Forgot password?",welcome_back:"Welcome back",login_subtitle:"Sign in to manage your school",dashboard:"Dashboard",home:"Home",director_ai:"Director AI",tino_brain:"Tino Brain",users:"Users",students:"Students",staff:"Staff",classes:"Classes",attendance:"Attendance",leave_management:"Leave",fees:"Fees",notices:"Notices",ai_paper:"AI Paper",ai_content:"AI Content",ai_history:"AI History",voice_assistant:"Voice Assistant",gallery:"Gallery",sms_center:"SMS Center",front_office:"Front Office",transport:"Transport",health_module:"Health",biometric:"Biometric",timetable:"Timetable",cctv_dashboard:"CCTV",cctv_management:"CCTV Management",storage_backup:"Storage & Backup",activity_dashboard:"Activity Dashboard",website_integration:"Website",teachtino:"TeachTino",school_analytics:"Analytics",permissions:"Permissions",zoom_meetings:"Meetings",online_exams:"Online Exams",ai_accountant:"AI Accountant",payment_settings:"Payment Settings",fee_structure:"Fee Structure",previous_year_fees:"Previous Year Fees",salary:"Salary",salary_management:"Salary Management",staff_directory:"Staff Directory",add_school:"Add School",setup_wizard:"Setup Wizard",subscription:"Subscription",settings:"Settings",audit_logs:"Audit Logs",academic:"Academic",good_morning:"Good Morning",good_afternoon:"Good Afternoon",good_evening:"Good Evening",total_students:"Total Students",total_staff:"Total Staff",total_classes:"Total Classes",attendance_today:"Today's Attendance",fee_collected:"Fee Collected",pending_fees:"Pending Fees",recent_notices:"Recent Notices",recent_activities:"Recent Activities",present:"Present",absent:"Absent",late:"Late",add_student:"Add Student",student_name:"Student Name",admission_no:"Admission No.",class_section:"Class/Section",father_name:"Father's Name",mother_name:"Mother's Name",dob:"Date of Birth",gender:"Gender",male:"Male",female:"Female",other:"Other",address:"Address",mobile:"Mobile",blood_group:"Blood Group",add_staff:"Add Staff",employee_id:"Employee ID",designation:"Designation",department:"Department",qualification:"Qualification",joining_date:"Joining Date",salary:"Salary",add_class:"Add Class",class_name:"Class Name",section:"Section",class_teacher:"Class Teacher",student_count:"Student Count",mark_attendance:"Mark Attendance",select_class:"Select Class",select_date:"Select Date",all_present:"Mark All Present",all_absent:"Mark All Absent",attendance_stats:"Attendance Statistics",fee_plans:"Fee Plans",invoices:"Invoices",payments:"Payments",create_invoice:"Create Invoice",record_payment:"Record Payment",amount:"Amount",due_date:"Due Date",paid:"Paid",pending:"Pending",overdue:"Overdue",partial:"Partial",discount:"Discount",payment_mode:"Payment Mode",cash:"Cash",online:"Online",cheque:"Cheque",create_notice:"Create Notice",title:"Title",content:"Content",priority:"Priority",urgent:"Urgent",high:"High",normal:"Normal",low:"Low",target_audience:"Target Audience",all:"All",teachers:"Teachers",parents:"Parents",generate_paper:"Generate Paper",subject:"Subject",chapter:"Chapter/Topic",difficulty:"Difficulty",easy:"Easy",medium:"Medium",hard:"Hard",mixed:"Mixed",question_types:"Question Types",mcq:"Multiple Choice",short_answer:"Short Answer",long_answer:"Long Answer",fill_blanks:"Fill in the Blanks",total_marks:"Total Marks",duration:"Duration (minutes)",generating:"Generating paper...",paper_ready:"Your paper is ready!",user:"User",action:"Action",module:"Module",timestamp:"Timestamp",details:"Details",director:"Director",principal:"Principal",vice_principal:"Vice Principal",teacher:"Teacher",accountant:"Accountant",exam_controller:"Exam Controller",saved_successfully:"Saved successfully",deleted_successfully:"Deleted successfully",something_went_wrong:"Something went wrong",confirm_delete:"Are you sure you want to delete this?",no_permission:"You don't have permission for this action"}},hi:{translation:{app_name:"\u0938\u094d\u0915\u0942\u0932\u091f\u0940\u0928\u094b",save:"\u0938\u0939\u0947\u091c\u0947\u0902",cancel:"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902",delete:"\u0939\u091f\u093e\u090f\u0902",edit:"\u0938\u0902\u092a\u093e\u0926\u093f\u0924 \u0915\u0930\u0947\u0902",add:"\u091c\u094b\u0921\u093c\u0947\u0902",search:"\u0916\u094b\u091c\u0947\u0902",filter:"\u092b\u093c\u093f\u0932\u094d\u091f\u0930",actions:"\u0915\u093e\u0930\u094d\u0930\u0935\u093e\u0908",status:"\u0938\u094d\u0925\u093f\u0924\u093f",loading:"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...",no_data:"\u0915\u094b\u0908 \u0921\u0947\u091f\u093e \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e",success:"\u0938\u092b\u0932",error:"\u0924\u094d\u0930\u0941\u091f\u093f",confirm:"\u092a\u0941\u0937\u094d\u091f\u093f \u0915\u0930\u0947\u0902",back:"\u0935\u093e\u092a\u0938",view:"\u0926\u0947\u0916\u0947\u0902",download:"\u0921\u093e\u0909\u0928\u0932\u094b\u0921",print:"\u092a\u094d\u0930\u093f\u0902\u091f",this_month:"\u0907\u0938 \u092e\u0939\u0940\u0928\u0947",quick_actions:"\u0924\u094d\u0935\u0930\u093f\u0924 \u0915\u093e\u0930\u094d\u092f",ai_tools:"AI \u091f\u0942\u0932\u094d\u0938",infrastructure:"\u0907\u0902\u092b\u094d\u0930\u093e\u0938\u094d\u091f\u094d\u0930\u0915\u094d\u091a\u0930",login:"\u0932\u0949\u0917\u093f\u0928",logout:"\u0932\u0949\u0917\u0906\u0909\u091f",email:"\u0908\u092e\u0947\u0932",password:"\u092a\u093e\u0938\u0935\u0930\u094d\u0921",remember_me:"\u092e\u0941\u091d\u0947 \u092f\u093e\u0926 \u0930\u0916\u0947\u0902",forgot_password:"\u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u092d\u0942\u0932 \u0917\u090f?",welcome_back:"\u0935\u093e\u092a\u0938\u0940 \u092a\u0930 \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948",login_subtitle:"\u0905\u092a\u0928\u0947 \u0938\u094d\u0915\u0942\u0932 \u0915\u094b \u092a\u094d\u0930\u092c\u0902\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0938\u093e\u0907\u0928 \u0907\u0928 \u0915\u0930\u0947\u0902",dashboard:"\u0921\u0948\u0936\u092c\u094b\u0930\u094d\u0921",home:"\u0939\u094b\u092e",director_ai:"\u0921\u093e\u092f\u0930\u0947\u0915\u094d\u091f\u0930 AI",tino_brain:"\u091f\u0940\u0928\u094b \u092c\u094d\u0930\u0947\u0928",users:"\u092f\u0942\u091c\u0930\u094d\u0938",students:"\u091b\u093e\u0924\u094d\u0930",staff:"\u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940",classes:"\u0915\u0915\u094d\u0937\u093e\u090f\u0902",attendance:"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f",leave_management:"\u091b\u0941\u091f\u094d\u091f\u0940",fees:"\u0936\u0941\u0932\u094d\u0915",notices:"\u0938\u0942\u091a\u0928\u093e\u090f\u0902",ai_paper:"AI \u092a\u0947\u092a\u0930",ai_content:"AI \u0915\u0902\u091f\u0947\u0902\u091f",ai_history:"AI \u0939\u093f\u0938\u094d\u091f\u094d\u0930\u0940",voice_assistant:"\u0935\u0949\u0907\u0938 \u0905\u0938\u093f\u0938\u094d\u091f\u0947\u0902\u091f",gallery:"\u0917\u0948\u0932\u0930\u0940",sms_center:"SMS \u0938\u0947\u0902\u091f\u0930",front_office:"\u092b\u094d\u0930\u0902\u091f \u0911\u092b\u093f\u0938",transport:"\u091f\u094d\u0930\u093e\u0902\u0938\u092a\u094b\u0930\u094d\u091f",health_module:"\u0939\u0947\u0932\u094d\u0925",biometric:"\u092c\u093e\u092f\u094b\u092e\u0947\u091f\u094d\u0930\u093f\u0915",timetable:"\u091f\u093e\u0907\u092e\u091f\u0947\u092c\u0932",cctv_dashboard:"CCTV",cctv_management:"CCTV \u092a\u094d\u0930\u092c\u0902\u0927\u0928",storage_backup:"\u0938\u094d\u091f\u094b\u0930\u0947\u091c \u0914\u0930 \u092c\u0948\u0915\u0905\u092a",activity_dashboard:"\u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940",website_integration:"\u0935\u0947\u092c\u0938\u093e\u0907\u091f",teachtino:"\u091f\u0940\u091a\u091f\u0940\u0928\u094b",school_analytics:"\u090f\u0928\u093e\u0932\u093f\u091f\u093f\u0915\u094d\u0938",permissions:"\u0905\u0928\u0941\u092e\u0924\u093f\u092f\u093e\u0902",zoom_meetings:"\u092e\u0940\u091f\u093f\u0902\u0917\u094d\u0938",online_exams:"\u0911\u0928\u0932\u093e\u0907\u0928 \u092a\u0930\u0940\u0915\u094d\u0937\u093e",ai_accountant:"AI \u0905\u0915\u093e\u0909\u0902\u091f\u0947\u0902\u091f",payment_settings:"\u092a\u0947\u092e\u0947\u0902\u091f \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938",fee_structure:"\u092b\u0940\u0938 \u0938\u094d\u091f\u094d\u0930\u0915\u094d\u091a\u0930",previous_year_fees:"\u092a\u093f\u091b\u0932\u0947 \u0938\u093e\u0932 \u0915\u0940 \u092b\u0940\u0938",salary:"\u0938\u0948\u0932\u0930\u0940",salary_management:"\u0938\u0948\u0932\u0930\u0940 \u091f\u094d\u0930\u0948\u0915\u093f\u0902\u0917",staff_directory:"\u0938\u094d\u091f\u093e\u092b \u0921\u093e\u092f\u0930\u0947\u0915\u094d\u091f\u0930\u0940",add_school:"\u0938\u094d\u0915\u0942\u0932 \u091c\u094b\u0921\u093c\u0947\u0902",setup_wizard:"\u0938\u0947\u091f\u0905\u092a \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921",subscription:"\u0938\u092c\u094d\u0938\u0915\u094d\u0930\u093f\u092a\u094d\u0936\u0928",settings:"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938",audit_logs:"\u0911\u0921\u093f\u091f \u0932\u0949\u0917",academic:"\u092a\u0922\u093c\u093e\u0908",good_morning:"\u0938\u0941\u092a\u094d\u0930\u092d\u093e\u0924",good_afternoon:"\u0928\u092e\u0938\u094d\u0924\u0947",good_evening:"\u0936\u0941\u092d \u0938\u0902\u0927\u094d\u092f\u093e",total_students:"\u0915\u0941\u0932 \u091b\u093e\u0924\u094d\u0930",total_staff:"\u0915\u0941\u0932 \u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940",total_classes:"\u0915\u0941\u0932 \u0915\u0915\u094d\u0937\u093e\u090f\u0902",attendance_today:"\u0906\u091c \u0915\u0940 \u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f",fee_collected:"\u0935\u0938\u0942\u0932 \u0936\u0941\u0932\u094d\u0915",pending_fees:"\u092c\u0915\u093e\u092f\u093e \u0936\u0941\u0932\u094d\u0915",recent_notices:"\u0939\u093e\u0932 \u0915\u0940 \u0938\u0942\u091a\u0928\u093e\u090f\u0902",recent_activities:"\u0939\u093e\u0932 \u0915\u0940 \u0917\u0924\u093f\u0935\u093f\u0927\u093f\u092f\u093e\u0902",present:"\u0909\u092a\u0938\u094d\u0925\u093f\u0924",absent:"\u0905\u0928\u0941\u092a\u0938\u094d\u0925\u093f\u0924",late:"\u0926\u0947\u0930 \u0938\u0947",add_student:"\u091b\u093e\u0924\u094d\u0930 \u091c\u094b\u0921\u093c\u0947\u0902",student_name:"\u091b\u093e\u0924\u094d\u0930 \u0915\u093e \u0928\u093e\u092e",admission_no:"\u092a\u094d\u0930\u0935\u0947\u0936 \u0938\u0902\u0916\u094d\u092f\u093e",class_section:"\u0915\u0915\u094d\u0937\u093e/\u0905\u0928\u0941\u092d\u093e\u0917",father_name:"\u092a\u093f\u0924\u093e \u0915\u093e \u0928\u093e\u092e",mother_name:"\u092e\u093e\u0924\u093e \u0915\u093e \u0928\u093e\u092e",dob:"\u091c\u0928\u094d\u092e \u0924\u093f\u0925\u093f",gender:"\u0932\u093f\u0902\u0917",male:"\u092a\u0941\u0930\u0941\u0937",female:"\u092e\u0939\u093f\u0932\u093e",other:"\u0905\u0928\u094d\u092f",address:"\u092a\u0924\u093e",mobile:"\u092e\u094b\u092c\u093e\u0907\u0932",blood_group:"\u0930\u0915\u094d\u0924 \u0938\u092e\u0942\u0939",add_staff:"\u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940 \u091c\u094b\u0921\u093c\u0947\u0902",employee_id:"\u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940 \u0906\u0908\u0921\u0940",designation:"\u092a\u0926\u0928\u093e\u092e",department:"\u0935\u093f\u092d\u093e\u0917",qualification:"\u092f\u094b\u0917\u094d\u092f\u0924\u093e",joining_date:"\u0936\u093e\u092e\u093f\u0932 \u0939\u094b\u0928\u0947 \u0915\u0940 \u0924\u093e\u0930\u0940\u0916",salary:"\u0935\u0947\u0924\u0928",add_class:"\u0915\u0915\u094d\u0937\u093e \u091c\u094b\u0921\u093c\u0947\u0902",class_name:"\u0915\u0915\u094d\u0937\u093e \u0915\u093e \u0928\u093e\u092e",section:"\u0905\u0928\u0941\u092d\u093e\u0917",class_teacher:"\u0915\u094d\u0932\u093e\u0938 \u091f\u0940\u091a\u0930",student_count:"\u091b\u093e\u0924\u094d\u0930 \u0938\u0902\u0916\u094d\u092f\u093e",mark_attendance:"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902",select_class:"\u0915\u0915\u094d\u0937\u093e \u091a\u0941\u0928\u0947\u0902",select_date:"\u0924\u093e\u0930\u0940\u0916 \u091a\u0941\u0928\u0947\u0902",all_present:"\u0938\u092d\u0940 \u0909\u092a\u0938\u094d\u0925\u093f\u0924",all_absent:"\u0938\u092d\u0940 \u0905\u0928\u0941\u092a\u0938\u094d\u0925\u093f\u0924",attendance_stats:"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f \u0906\u0902\u0915\u0921\u093c\u0947",fee_plans:"\u0936\u0941\u0932\u094d\u0915 \u092f\u094b\u091c\u0928\u093e\u090f\u0902",invoices:"\u092c\u093f\u0932",payments:"\u092d\u0941\u0917\u0924\u093e\u0928",create_invoice:"\u092c\u093f\u0932 \u092c\u0928\u093e\u090f\u0902",record_payment:"\u092d\u0941\u0917\u0924\u093e\u0928 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902",amount:"\u0930\u093e\u0936\u093f",due_date:"\u0926\u0947\u092f \u0924\u093f\u0925\u093f",paid:"\u092d\u0941\u0917\u0924\u093e\u0928",pending:"\u092c\u0915\u093e\u092f\u093e",overdue:"\u0905\u0924\u093f\u0926\u0947\u092f",partial:"\u0906\u0902\u0936\u093f\u0915",discount:"\u091b\u0942\u091f",payment_mode:"\u092d\u0941\u0917\u0924\u093e\u0928 \u092e\u094b\u0921",cash:"\u0928\u0915\u0926",online:"\u0911\u0928\u0932\u093e\u0907\u0928",cheque:"\u091a\u0947\u0915",create_notice:"\u0938\u0942\u091a\u0928\u093e \u092c\u0928\u093e\u090f\u0902",title:"\u0936\u0940\u0930\u094d\u0937\u0915",content:"\u0938\u093e\u092e\u0917\u094d\u0930\u0940",priority:"\u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e",urgent:"\u0905\u0924\u094d\u092f\u093e\u0935\u0936\u094d\u092f\u0915",high:"\u0909\u091a\u094d\u091a",normal:"\u0938\u093e\u092e\u093e\u0928\u094d\u092f",low:"\u0928\u093f\u092e\u094d\u0928",target_audience:"\u0932\u0915\u094d\u0937\u093f\u0924 \u0926\u0930\u094d\u0936\u0915",all:"\u0938\u092d\u0940",teachers:"\u0936\u093f\u0915\u094d\u0937\u0915",parents:"\u0905\u092d\u093f\u092d\u093e\u0935\u0915",generate_paper:"\u092a\u0947\u092a\u0930 \u092c\u0928\u093e\u090f\u0902",subject:"\u0935\u093f\u0937\u092f",chapter:"\u0905\u0927\u094d\u092f\u093e\u092f/\u091f\u0949\u092a\u093f\u0915",difficulty:"\u0915\u0920\u093f\u0928\u093e\u0908 \u0938\u094d\u0924\u0930",easy:"\u0906\u0938\u093e\u0928",medium:"\u092e\u0927\u094d\u092f\u092e",hard:"\u0915\u0920\u093f\u0928",mixed:"\u092e\u093f\u0936\u094d\u0930\u093f\u0924",question_types:"\u092a\u094d\u0930\u0936\u094d\u0928 \u092a\u094d\u0930\u0915\u093e\u0930",mcq:"\u092c\u0939\u0941\u0935\u093f\u0915\u0932\u094d\u092a\u0940",short_answer:"\u0932\u0918\u0941 \u0909\u0924\u094d\u0924\u0930",long_answer:"\u0926\u0940\u0930\u094d\u0918 \u0909\u0924\u094d\u0924\u0930",fill_blanks:"\u0930\u093f\u0915\u094d\u0924 \u0938\u094d\u0925\u093e\u0928 \u092d\u0930\u0947\u0902",total_marks:"\u0915\u0941\u0932 \u0905\u0902\u0915",duration:"\u0938\u092e\u092f (\u092e\u093f\u0928\u091f)",generating:"\u092a\u0947\u092a\u0930 \u092c\u0928 \u0930\u0939\u093e \u0939\u0948...",paper_ready:"\u0906\u092a\u0915\u093e \u092a\u0947\u092a\u0930 \u0924\u0948\u092f\u093e\u0930 \u0939\u0948!",user:"\u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e",action:"\u0915\u093e\u0930\u094d\u0930\u0935\u093e\u0908",module:"\u092e\u0949\u0921\u094d\u092f\u0942\u0932",timestamp:"\u0938\u092e\u092f",details:"\u0935\u093f\u0935\u0930\u0923",director:"\u0928\u093f\u0926\u0947\u0936\u0915",principal:"\u092a\u094d\u0930\u093e\u091a\u093e\u0930\u094d\u092f",vice_principal:"\u0909\u092a \u092a\u094d\u0930\u093e\u091a\u093e\u0930\u094d\u092f",teacher:"\u0936\u093f\u0915\u094d\u0937\u0915",accountant:"\u0932\u0947\u0916\u093e\u0915\u093e\u0930",exam_controller:"\u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u0915",saved_successfully:"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u0938\u0939\u0947\u091c\u093e \u0917\u092f\u093e",deleted_successfully:"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u0939\u091f\u093e\u092f\u093e \u0917\u092f\u093e",something_went_wrong:"\u0915\u0941\u091b \u0917\u0932\u0924 \u0939\u094b \u0917\u092f\u093e",confirm_delete:"\u0915\u094d\u092f\u093e \u0906\u092a \u0907\u0938\u0947 \u0939\u091f\u093e\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?",no_permission:"\u0907\u0938 \u0915\u093e\u0930\u094d\u0930\u0935\u093e\u0908 \u0915\u0947 \u0932\u093f\u090f \u0905\u0928\u0941\u092e\u0924\u093f \u0928\u0939\u0940\u0902 \u0939\u0948"}},hinglish:{translation:{app_name:"Schooltino",save:"Save karo",cancel:"Cancel",delete:"Delete karo",edit:"Edit karo",add:"Add karo",search:"Search karo",filter:"Filter",actions:"Actions",status:"Status",loading:"Load ho raha hai...",no_data:"Koi data nahi mila",success:"Ho gaya!",error:"Error aa gaya",confirm:"Confirm karo",back:"Back jao",view:"Dekho",download:"Download karo",print:"Print karo",login:"Login karo",logout:"Logout",email:"Email",password:"Password",remember_me:"Mujhe yaad rakho",forgot_password:"Password bhul gaye?",welcome_back:"Wapas aane par swagat hai",login_subtitle:"Apne school ko manage karo",dashboard:"Dashboard",home:"Home",director_ai:"Director AI",tino_brain:"Tino Brain",users:"Users",students:"Students",staff:"Staff",classes:"Classes",attendance:"Attendance",leave_management:"Leave",fees:"Fees",notices:"Notices",ai_paper:"AI Paper",ai_content:"AI Content",ai_history:"AI History",voice_assistant:"Voice Assistant",gallery:"Gallery",sms_center:"SMS Center",front_office:"Front Office",transport:"Transport",health_module:"Health",biometric:"Biometric",timetable:"Timetable",cctv_dashboard:"CCTV",settings:"Settings",school_analytics:"Analytics",permissions:"Permissions",website_integration:"Website",zoom_meetings:"Meetings",ai_accountant:"AI Accountant",fee_structure:"Fee Structure",salary:"Salary",academic:"Academic",good_morning:"Good Morning",good_afternoon:"Good Afternoon",good_evening:"Good Evening",total_students:"Total Students",total_staff:"Total Staff",total_classes:"Total Classes",attendance_today:"Aaj ki Attendance",fee_collected:"Fee Collect",pending_fees:"Pending Fees",recent_notices:"Recent Notices",present:"Present",absent:"Absent",late:"Late",add_student:"Student add karo",student_name:"Student ka naam",admission_no:"Admission No.",class_section:"Class/Section",father_name:"Father ka naam",mother_name:"Mother ka naam",dob:"Date of Birth",gender:"Gender",male:"Male",female:"Female",other:"Other",address:"Address",mobile:"Mobile",add_staff:"Staff add karo",employee_id:"Employee ID",designation:"Designation",department:"Department",joining_date:"Joining Date",salary:"Salary",add_class:"Class add karo",class_name:"Class ka naam",section:"Section",class_teacher:"Class Teacher",student_count:"Students",mark_attendance:"Attendance lagao",select_class:"Class chuno",select_date:"Date chuno",all_present:"Sab Present",all_absent:"Sab Absent",fee_plans:"Fee Plans",invoices:"Invoices",payments:"Payments",create_invoice:"Invoice banao",record_payment:"Payment likho",amount:"Amount",due_date:"Due Date",paid:"Paid",pending:"Pending",overdue:"Overdue",discount:"Discount",create_notice:"Notice banao",title:"Title",content:"Content",priority:"Priority",urgent:"Urgent",high:"High",normal:"Normal",low:"Low",all:"Sab",teachers:"Teachers",parents:"Parents",generate_paper:"Paper banao",subject:"Subject",chapter:"Chapter",difficulty:"Difficulty",easy:"Easy",medium:"Medium",hard:"Hard",mixed:"Mixed",question_types:"Question Types",mcq:"MCQ",short_answer:"Short Answer",long_answer:"Long Answer",fill_blanks:"Fill Blanks",total_marks:"Total Marks",duration:"Time (minutes)",generating:"Paper ban raha hai...",paper_ready:"Paper ready hai!",director:"Director",principal:"Principal",vice_principal:"Vice Principal",teacher:"Teacher",accountant:"Accountant",saved_successfully:"Save ho gaya",deleted_successfully:"Delete ho gaya",something_went_wrong:"Kuch gadbad ho gayi",confirm_delete:"Kya aap ise delete karna chahte ho?",no_permission:"Permission nahi hai"}}},lng:localStorage.getItem("language")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});function Ns(e,t){return function(){return e.apply(t,arguments)}}const{toString:ws}=Object.prototype,{getPrototypeOf:Ss}=Object,{iterator:_s,toStringTag:ks}=Symbol,Cs=(Es=Object.create(null),e=>{const t=ws.call(e);return Es[t]||(Es[t]=t.slice(8,-1).toLowerCase())});var Es;const As=e=>(e=e.toLowerCase(),t=>Cs(t)===e),Ps=e=>t=>typeof t===e,{isArray:Os}=Array,Ms=Ps("undefined");function Ts(e){return null!==e&&!Ms(e)&&null!==e.constructor&&!Ms(e.constructor)&&Rs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ds=As("ArrayBuffer");const Is=Ps("string"),Rs=Ps("function"),Ls=Ps("number"),Fs=e=>null!==e&&"object"===typeof e,zs=e=>{if("object"!==Cs(e))return!1;const t=Ss(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(ks in e)&&!(_s in e)},Bs=As("Date"),Us=As("File"),Hs=As("Blob"),qs=As("FileList"),Vs=As("URLSearchParams"),[Ws,Gs,Ks,Ys]=["ReadableStream","Request","Response","Headers"].map(As);function Js(e,t){let a,s,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Os(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{if(Ts(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let i;for(a=0;a<r;a++)i=s[a],t.call(null,e[i],i,e)}}function $s(e,t){if(Ts(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s,n=a.length;for(;n-- >0;)if(s=a[n],t===s.toLowerCase())return s;return null}const Qs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:a.g,Xs=e=>!Ms(e)&&e!==Qs;const Zs=(en="undefined"!==typeof Uint8Array&&Ss(Uint8Array),e=>en&&e instanceof en);var en;const tn=As("HTMLFormElement"),an=(e=>{let{hasOwnProperty:t}=e;return(e,a)=>t.call(e,a)})(Object.prototype),sn=As("RegExp"),nn=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};Js(a,(a,n)=>{let r;!1!==(r=t(a,n,e))&&(s[n]=r||a)}),Object.defineProperties(e,s)};const rn=As("AsyncFunction"),ln=((e,t)=>{return e?setImmediate:t?(a="axios@".concat(Math.random()),s=[],Qs.addEventListener("message",e=>{let{source:t,data:n}=e;t===Qs&&n===a&&s.length&&s.shift()()},!1),e=>{s.push(e),Qs.postMessage(a,"*")}):e=>setTimeout(e);var a,s})("function"===typeof setImmediate,Rs(Qs.postMessage)),on="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Qs):"undefined"!==typeof process&&process.nextTick||ln,cn={isArray:Os,isArrayBuffer:Ds,isBuffer:Ts,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Rs(e.append)&&("formdata"===(t=Cs(e))||"object"===t&&Rs(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ds(e.buffer),t},isString:Is,isNumber:Ls,isBoolean:e=>!0===e||!1===e,isObject:Fs,isPlainObject:zs,isEmptyObject:e=>{if(!Fs(e)||Ts(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(J1){return!1}},isReadableStream:Ws,isRequest:Gs,isResponse:Ks,isHeaders:Ys,isUndefined:Ms,isDate:Bs,isFile:Us,isBlob:Hs,isRegExp:sn,isFunction:Rs,isStream:e=>Fs(e)&&Rs(e.pipe),isURLSearchParams:Vs,isTypedArray:Zs,isFileList:qs,forEach:Js,merge:function e(){const{caseless:t,skipUndefined:a}=Xs(this)&&this||{},s={},n=(n,r)=>{const i=t&&$s(s,r)||r;zs(s[i])&&zs(n)?s[i]=e(s[i],n):zs(n)?s[i]=e({},n):Os(n)?s[i]=n.slice():a&&Ms(n)||(s[i]=n)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Js(arguments[r],n);return s},extend:function(e,t,a){let{allOwnKeys:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Js(t,(t,s)=>{a&&Rs(t)?Object.defineProperty(e,s,{value:Ns(t,a),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,s,{value:t,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject:(e,t,a,s)=>{let n,r,i;const l={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)i=n[r],s&&!s(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==a&&Ss(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},kindOf:Cs,kindOfTest:As,endsWith:(e,t,a)=>{e=String(e),(void 0===a||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return-1!==s&&s===a},toArray:e=>{if(!e)return null;if(Os(e))return e;let t=e.length;if(!Ls(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},forEachEntry:(e,t)=>{const a=(e&&e[_s]).call(e);let s;for(;(s=a.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let a;const s=[];for(;null!==(a=e.exec(t));)s.push(a);return s},isHTMLForm:tn,hasOwnProperty:an,hasOwnProp:an,reduceDescriptors:nn,freezeMethods:e=>{nn(e,(t,a)=>{if(Rs(e)&&-1!==["arguments","caller","callee"].indexOf(a))return!1;const s=e[a];Rs(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")}))})},toObjectSet:(e,t)=>{const a={},s=e=>{e.forEach(e=>{a[e]=!0})};return Os(e)?s(e):s(String(e).split(t)),a},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,a){return t.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:$s,global:Qs,isContextDefined:Xs,isSpecCompliantForm:function(e){return!!(e&&Rs(e.append)&&"FormData"===e[ks]&&e[_s])},toJSONObject:e=>{const t=new Array(10),a=(e,s)=>{if(Fs(e)){if(t.indexOf(e)>=0)return;if(Ts(e))return e;if(!("toJSON"in e)){t[s]=e;const n=Os(e)?[]:{};return Js(e,(e,t)=>{const r=a(e,s+1);!Ms(r)&&(n[t]=r)}),t[s]=void 0,n}}return e};return a(e,0)},isAsyncFn:rn,isThenable:e=>e&&(Fs(e)||Rs(e))&&Rs(e.then)&&Rs(e.catch),setImmediate:ln,asap:on,isIterable:e=>null!=e&&Rs(e[_s])};class dn extends Error{static from(e,t,a,s,n,r){const i=new dn(e.message,t||e.code,a,s,n);return i.cause=e,i.name=e.name,r&&Object.assign(i,r),i}constructor(e,t,a,s,n){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),n&&(this.response=n,this.status=n.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:cn.toJSONObject(this.config),code:this.code,status:this.status}}}dn.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",dn.ERR_BAD_OPTION="ERR_BAD_OPTION",dn.ECONNABORTED="ECONNABORTED",dn.ETIMEDOUT="ETIMEDOUT",dn.ERR_NETWORK="ERR_NETWORK",dn.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",dn.ERR_DEPRECATED="ERR_DEPRECATED",dn.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",dn.ERR_BAD_REQUEST="ERR_BAD_REQUEST",dn.ERR_CANCELED="ERR_CANCELED",dn.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",dn.ERR_INVALID_URL="ERR_INVALID_URL";const un=dn;function mn(e){return cn.isPlainObject(e)||cn.isArray(e)}function hn(e){return cn.endsWith(e,"[]")?e.slice(0,-2):e}function pn(e,t,a){return e?e.concat(t).map(function(e,t){return e=hn(e),!a&&t?"["+e+"]":e}).join(a?".":""):t}const xn=cn.toFlatObject(cn,{},null,function(e){return/^is[A-Z]/.test(e)});const fn=function(e,t,a){if(!cn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(a=cn.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!cn.isUndefined(t[e])})).metaTokens,n=a.visitor||c,r=a.dots,i=a.indexes,l=(a.Blob||"undefined"!==typeof Blob&&Blob)&&cn.isSpecCompliantForm(t);if(!cn.isFunction(n))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(cn.isDate(e))return e.toISOString();if(cn.isBoolean(e))return e.toString();if(!l&&cn.isBlob(e))throw new un("Blob is not supported. Use a Buffer instead.");return cn.isArrayBuffer(e)||cn.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,a,n){let l=e;if(e&&!n&&"object"===typeof e)if(cn.endsWith(a,"{}"))a=s?a:a.slice(0,-2),e=JSON.stringify(e);else if(cn.isArray(e)&&function(e){return cn.isArray(e)&&!e.some(mn)}(e)||(cn.isFileList(e)||cn.endsWith(a,"[]"))&&(l=cn.toArray(e)))return a=hn(a),l.forEach(function(e,s){!cn.isUndefined(e)&&null!==e&&t.append(!0===i?pn([a],s,r):null===i?a:a+"[]",o(e))}),!1;return!!mn(e)||(t.append(pn(n,a,r),o(e)),!1)}const d=[],u=Object.assign(xn,{defaultVisitor:c,convertValue:o,isVisitable:mn});if(!cn.isObject(e))throw new TypeError("data must be an object");return function e(a,s){if(!cn.isUndefined(a)){if(-1!==d.indexOf(a))throw Error("Circular reference detected in "+s.join("."));d.push(a),cn.forEach(a,function(a,r){!0===(!(cn.isUndefined(a)||null===a)&&n.call(t,a,cn.isString(r)?r.trim():r,s,u))&&e(a,s?s.concat(r):[r])}),d.pop()}}(e),t};function gn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function vn(e,t){this._pairs=[],e&&fn(e,this,t)}const bn=vn.prototype;bn.append=function(e,t){this._pairs.push([e,t])},bn.toString=function(e){const t=e?function(t){return e.call(this,t,gn)}:gn;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const yn=vn;function jn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Nn(e,t,a){if(!t)return e;const s=a&&a.encode||jn,n=cn.isFunction(a)?{serialize:a}:a,r=n&&n.serialize;let i;if(i=r?r(t,n):cn.isURLSearchParams(t)?t.toString():new yn(t,n).toString(s),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const wn=class{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!a&&a.synchronous,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){cn.forEach(this.handlers,function(t){null!==t&&e(t)})}},Sn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_n={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:yn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},kn="undefined"!==typeof window&&"undefined"!==typeof document,Cn="object"===typeof navigator&&navigator||void 0,En=kn&&(!Cn||["ReactNative","NativeScript","NS"].indexOf(Cn.product)<0),An="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Pn=kn&&window.location.href||"http://localhost",On=u(u({},e),_n);const Mn=function(e){function t(e,a,s,n){let r=e[n++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),l=n>=e.length;if(r=!r&&cn.isArray(s)?s.length:r,l)return cn.hasOwnProp(s,r)?s[r]=[s[r],a]:s[r]=a,!i;s[r]&&cn.isObject(s[r])||(s[r]=[]);return t(e,a,s[r],n)&&cn.isArray(s[r])&&(s[r]=function(e){const t={},a=Object.keys(e);let s;const n=a.length;let r;for(s=0;s<n;s++)r=a[s],t[r]=e[r];return t}(s[r])),!i}if(cn.isFormData(e)&&cn.isFunction(e.entries)){const a={};return cn.forEachEntry(e,(e,s)=>{t(function(e){return cn.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,a,0)}),a}return null};const Tn={transitional:Sn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",s=a.indexOf("application/json")>-1,n=cn.isObject(e);n&&cn.isHTMLForm(e)&&(e=new FormData(e));if(cn.isFormData(e))return s?JSON.stringify(Mn(e)):e;if(cn.isArrayBuffer(e)||cn.isBuffer(e)||cn.isStream(e)||cn.isFile(e)||cn.isBlob(e)||cn.isReadableStream(e))return e;if(cn.isArrayBufferView(e))return e.buffer;if(cn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(n){if(a.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return fn(e,new On.classes.URLSearchParams,u({visitor:function(e,t,a,s){return On.isNode&&cn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=cn.isFileList(e))||a.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return fn(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||s?(t.setContentType("application/json",!1),function(e,t,a){if(cn.isString(e))try{return(t||JSON.parse)(e),cn.trim(e)}catch(J1){if("SyntaxError"!==J1.name)throw J1}return(a||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Tn.transitional,a=t&&t.forcedJSONParsing,s="json"===this.responseType;if(cn.isResponse(e)||cn.isReadableStream(e))return e;if(e&&cn.isString(e)&&(a&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(J1){if(a){if("SyntaxError"===J1.name)throw un.from(J1,un.ERR_BAD_RESPONSE,this,null,this.response);throw J1}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:On.classes.FormData,Blob:On.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};cn.forEach(["delete","get","head","post","put","patch"],e=>{Tn.headers[e]={}});const Dn=Tn,In=cn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rn=Symbol("internals");function Ln(e){return e&&String(e).trim().toLowerCase()}function Fn(e){return!1===e||null==e?e:cn.isArray(e)?e.map(Fn):String(e)}function zn(e,t,a,s,n){return cn.isFunction(s)?s.call(this,t,a):(n&&(t=a),cn.isString(t)?cn.isString(s)?-1!==t.indexOf(s):cn.isRegExp(s)?s.test(t):void 0:void 0)}class Bn{constructor(e){e&&this.set(e)}set(e,t,a){const s=this;function n(e,t,a){const n=Ln(t);if(!n)throw new Error("header name must be a non-empty string");const r=cn.findKey(s,n);(!r||void 0===s[r]||!0===a||void 0===a&&!1!==s[r])&&(s[r||t]=Fn(e))}const r=(e,t)=>cn.forEach(e,(e,a)=>n(e,a,t));if(cn.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(cn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let a,s,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),a=e.substring(0,n).trim().toLowerCase(),s=e.substring(n+1).trim(),!a||t[a]&&In[a]||("set-cookie"===a?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t})(e),t);else if(cn.isObject(e)&&cn.isIterable(e)){let a,s,n={};for(const t of e){if(!cn.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[s=t[0]]=(a=n[s])?cn.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}r(n,t)}else null!=e&&n(t,e,a);return this}get(e,t){if(e=Ln(e)){const a=cn.findKey(this,e);if(a){const e=this[a];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}(e);if(cn.isFunction(t))return t.call(this,e,a);if(cn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ln(e)){const a=cn.findKey(this,e);return!(!a||void 0===this[a]||t&&!zn(0,this[a],a,t))}return!1}delete(e,t){const a=this;let s=!1;function n(e){if(e=Ln(e)){const n=cn.findKey(a,e);!n||t&&!zn(0,a[n],n,t)||(delete a[n],s=!0)}}return cn.isArray(e)?e.forEach(n):n(e),s}clear(e){const t=Object.keys(this);let a=t.length,s=!1;for(;a--;){const n=t[a];e&&!zn(0,this[n],n,e,!0)||(delete this[n],s=!0)}return s}normalize(e){const t=this,a={};return cn.forEach(this,(s,n)=>{const r=cn.findKey(a,n);if(r)return t[r]=Fn(s),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}(n):String(n).trim();i!==n&&delete t[n],t[i]=Fn(s),a[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return cn.forEach(this,(a,s)=>{null!=a&&!1!==a&&(t[s]=e&&cn.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,a]=e;return t+": "+a}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return s.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Rn]=this[Rn]={accessors:{}}).accessors,a=this.prototype;function s(e){const s=Ln(e);t[s]||(!function(e,t){const a=cn.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(e,a,n){return this[s].call(this,t,e,a,n)},configurable:!0})})}(a,e),t[s]=!0)}return cn.isArray(e)?e.forEach(s):s(e),this}}Bn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),cn.reduceDescriptors(Bn.prototype,(e,t)=>{let{value:a}=e,s=t[0].toUpperCase()+t.slice(1);return{get:()=>a,set(e){this[s]=e}}}),cn.freezeMethods(Bn);const Un=Bn;function Hn(e,t){const a=this||Dn,s=t||a,n=Un.from(s.headers);let r=s.data;return cn.forEach(e,function(e){r=e.call(a,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function qn(e){return!(!e||!e.__CANCEL__)}const Vn=class extends un{constructor(e,t,a){super(null==e?"canceled":e,un.ERR_CANCELED,t,a),this.name="CanceledError",this.__CANCEL__=!0}};function Wn(e,t,a){const s=a.config.validateStatus;a.status&&s&&!s(a.status)?t(new un("Request failed with status code "+a.status,[un.ERR_BAD_REQUEST,un.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a)):e(a)}const Gn=function(e,t){e=e||10;const a=new Array(e),s=new Array(e);let n,r=0,i=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=s[i];n||(n=o),a[r]=l,s[r]=o;let d=i,u=0;for(;d!==r;)u+=a[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),o-n<t)return;const m=c&&o-c;return m?Math.round(1e3*u/m):void 0}};const Kn=function(e,t){let a,s,n=0,r=1e3/t;const i=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=r,a=null,s&&(clearTimeout(s),s=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=r?i(o,e):(a=o,s||(s=setTimeout(()=>{s=null,i(a)},r-t)))},()=>a&&i(a)]},Yn=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=0;const n=Gn(50,250);return Kn(a=>{const r=a.loaded,i=a.lengthComputable?a.total:void 0,l=r-s,o=n(l);s=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&r<=i?(i-r)/o:void 0,event:a,lengthComputable:null!=i,[t?"download":"upload"]:!0})},a)},Jn=(e,t)=>{const a=null!=e;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},$n=e=>function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return cn.asap(()=>e(...a))},Qn=On.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,On.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(On.origin),On.navigator&&/(msie|trident)/i.test(On.navigator.userAgent)):()=>!0,Xn=On.hasStandardBrowserEnv?{write(e,t,a,s,n,r,i){if("undefined"===typeof document)return;const l=["".concat(e,"=").concat(encodeURIComponent(t))];cn.isNumber(a)&&l.push("expires=".concat(new Date(a).toUTCString())),cn.isString(s)&&l.push("path=".concat(s)),cn.isString(n)&&l.push("domain=".concat(n)),!0===r&&l.push("secure"),cn.isString(i)&&l.push("SameSite=".concat(i)),document.cookie=l.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Zn(e,t,a){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==a)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const er=e=>e instanceof Un?u({},e):e;function tr(e,t){t=t||{};const a={};function s(e,t,a,s){return cn.isPlainObject(e)&&cn.isPlainObject(t)?cn.merge.call({caseless:s},e,t):cn.isPlainObject(t)?cn.merge({},t):cn.isArray(t)?t.slice():t}function n(e,t,a,n){return cn.isUndefined(t)?cn.isUndefined(e)?void 0:s(void 0,e,0,n):s(e,t,0,n)}function r(e,t){if(!cn.isUndefined(t))return s(void 0,t)}function i(e,t){return cn.isUndefined(t)?cn.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function l(a,n,r){return r in t?s(a,n):r in e?s(void 0,a):void 0}const o={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,a)=>n(er(e),er(t),0,!0)};return cn.forEach(Object.keys(u(u({},e),t)),function(s){const r=o[s]||n,i=r(e[s],t[s],s);cn.isUndefined(i)&&r!==l||(a[s]=i)}),a}const ar=e=>{const t=tr({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:r,headers:i,auth:l}=t;if(t.headers=i=Un.from(i),t.url=Nn(Zn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),cn.isFormData(a))if(On.hasStandardBrowserEnv||On.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(cn.isFunction(a.getHeaders)){const e=a.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[a,s]=e;t.includes(a.toLowerCase())&&i.set(a,s)})}if(On.hasStandardBrowserEnv&&(s&&cn.isFunction(s)&&(s=s(t)),s||!1!==s&&Qn(t.url))){const e=n&&r&&Xn.read(r);e&&i.set(n,e)}return t},sr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,a){const s=ar(e);let n=s.data;const r=Un.from(s.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:h}=s;function p(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(i),s.signal&&s.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function f(){if(!x)return;const s=Un.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());Wn(function(e){t(e),p()},function(e){a(e),p()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:s,config:e,request:x}),x=null}x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(a(new un("Request aborted",un.ECONNABORTED,e,x)),x=null)},x.onerror=function(t){const s=t&&t.message?t.message:"Network Error",n=new un(s,un.ERR_NETWORK,e,x);n.event=t||null,a(n),x=null},x.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const n=s.transitional||Sn;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),a(new un(t,n.clarifyTimeoutError?un.ETIMEDOUT:un.ECONNABORTED,e,x)),x=null},void 0===n&&r.setContentType(null),"setRequestHeader"in x&&cn.forEach(r.toJSON(),function(e,t){x.setRequestHeader(t,e)}),cn.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),u&&"json"!==u&&(x.responseType=s.responseType),h&&([o,d]=Yn(h,!0),x.addEventListener("progress",o)),m&&x.upload&&([l,c]=Yn(m),x.upload.addEventListener("progress",l),x.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(i=t=>{x&&(a(!t||t.type?new Vn(null,e,x):t),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(i),s.signal&&(s.signal.aborted?i():s.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);g&&-1===On.protocols.indexOf(g)?a(new un("Unsupported protocol "+g+":",un.ERR_BAD_REQUEST,e)):x.send(n||null)})},nr=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let a,s=new AbortController;const n=function(e){if(!a){a=!0,i();const t=e instanceof Error?e:this.reason;s.abort(t instanceof un?t:new Vn(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,n(new un("timeout of ".concat(t,"ms exceeded"),un.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:l}=s;return l.unsubscribe=()=>cn.asap(i),l}};function rr(e,t){this.v=e,this.k=t}function ir(e){return function(){return new lr(e.apply(this,arguments))}}function lr(e){var t,a;function s(t,a){try{var r=e[t](a),i=r.value,l=i instanceof rr;Promise.resolve(l?i.v:i).then(function(a){if(l){var o="return"===t?"return":"next";if(!i.k||a.done)return s(o,a);a=e[o](a).value}n(r.done?"return":"normal",a)},function(e){s("throw",e)})}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?s(t.key,t.arg):a=null}this._invoke=function(e,n){return new Promise(function(r,i){var l={key:e,arg:n,resolve:r,reject:i,next:null};a?a=a.next=l:(t=a=l,s(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function or(e){return new rr(e,0)}function cr(e){var t={},a=!1;function s(t,s){return a=!0,s=new Promise(function(a){a(e[t](s))}),{done:!1,value:new rr(s,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return a?(a=!1,e):s("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(a)throw a=!1,e;return s("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return a?(a=!1,e):s("return",e)}),t}function dr(e){var t,a,s,n=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,s=Symbol.iterator);n--;){if(a&&null!=(t=e[a]))return t.call(e);if(s&&null!=(t=e[s]))return new ur(t.call(e));a="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function ur(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return ur=function(e){this.s=e,this.n=e.next},ur.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new ur(e)}lr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},lr.prototype.next=function(e){return this._invoke("next",e)},lr.prototype.throw=function(e){return this._invoke("throw",e)},lr.prototype.return=function(e){return this._invoke("return",e)};const mr=function*(e,t){let a=e.byteLength;if(!t||a<t)return void(yield e);let s,n=0;for(;n<a;)s=n+t,yield e.slice(n,s),n=s},hr=function(){var e=ir(function*(e,t){var a,s=!1,n=!1;try{for(var r,i=dr(pr(e));s=!(r=yield or(i.next())).done;s=!1){const e=r.value;yield*cr(dr(mr(e,t)))}}catch(l){n=!0,a=l}finally{try{s&&null!=i.return&&(yield or(i.return()))}finally{if(n)throw a}}});return function(t,a){return e.apply(this,arguments)}}(),pr=function(){var e=ir(function*(e){if(e[Symbol.asyncIterator])return void(yield*cr(dr(e)));const t=e.getReader();try{for(;;){const{done:e,value:a}=yield or(t.read());if(e)break;yield a}}finally{yield or(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),xr=(e,t,a,s)=>{const n=hr(e,t);let r,i=0,l=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await n.next();if(t)return l(),void e.close();let r=s.byteLength;if(a){let e=i+=r;a(e)}e.enqueue(new Uint8Array(s))}catch(t){throw l(t),t}},cancel:e=>(l(e),n.return())},{highWaterMark:2})},{isFunction:fr}=cn,gr=(e=>{let{Request:t,Response:a}=e;return{Request:t,Response:a}})(cn.global),{ReadableStream:vr,TextEncoder:br}=cn.global,yr=function(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return!!e(...a)}catch(J1){return!1}},jr=e=>{e=cn.merge.call({skipUndefined:!0},gr,e);const{fetch:t,Request:a,Response:s}=e,n=t?fr(t):"function"===typeof fetch,r=fr(a),i=fr(s);if(!n)return!1;const l=n&&fr(vr),o=n&&("function"===typeof br?(c=new br,e=>c.encode(e)):async e=>new Uint8Array(await new a(e).arrayBuffer()));var c;const d=r&&l&&yr(()=>{let e=!1;const t=new a(On.origin,{body:new vr,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),m=i&&l&&yr(()=>cn.isReadableStream(new s("").body)),h={stream:m&&(e=>e.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,a)=>{let s=t&&t[e];if(s)return s.call(t);throw new un("Response type '".concat(e,"' is not supported"),un.ERR_NOT_SUPPORT,a)})});const p=async(e,t)=>{const s=cn.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(cn.isBlob(e))return e.size;if(cn.isSpecCompliantForm(e)){const t=new a(On.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return cn.isArrayBufferView(e)||cn.isArrayBuffer(e)?e.byteLength:(cn.isURLSearchParams(e)&&(e+=""),cn.isString(e)?(await o(e)).byteLength:void 0)})(t):s};return async e=>{let{url:n,method:i,data:l,signal:o,cancelToken:c,timeout:x,onDownloadProgress:f,onUploadProgress:g,responseType:v,headers:b,withCredentials:y="same-origin",fetchOptions:j}=ar(e),N=t||fetch;v=v?(v+"").toLowerCase():"text";let w=nr([o,c&&c.toAbortSignal()],x),S=null;const _=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let k;try{if(g&&d&&"get"!==i&&"head"!==i&&0!==(k=await p(b,l))){let e,t=new a(n,{method:"POST",body:l,duplex:"half"});if(cn.isFormData(l)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,a]=Jn(k,Yn($n(g)));l=xr(t.body,65536,e,a)}}cn.isString(y)||(y=y?"include":"omit");const t=r&&"credentials"in a.prototype,o=u(u({},j),{},{signal:w,method:i.toUpperCase(),headers:b.normalize().toJSON(),body:l,duplex:"half",credentials:t?y:void 0});S=r&&new a(n,o);let c=await(r?N(S,j):N(n,o));const x=m&&("stream"===v||"response"===v);if(m&&(f||x&&_)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=cn.toFiniteNumber(c.headers.get("content-length")),[a,n]=f&&Jn(t,Yn($n(f),!0))||[];c=new s(xr(c.body,65536,a,()=>{n&&n(),_&&_()}),e)}v=v||"text";let C=await h[cn.findKey(h,v)||"text"](c,e);return!x&&_&&_(),await new Promise((t,a)=>{Wn(t,a,{data:C,headers:Un.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:S})})}catch(C){if(_&&_(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new un("Network Error",un.ERR_NETWORK,e,S),{cause:C.cause||C});throw un.from(C,C&&C.code,e,S)}}},Nr=new Map,wr=e=>{let t=e&&e.env||{};const{fetch:a,Request:s,Response:n}=t,r=[s,n,a];let i,l,o=r.length,c=Nr;for(;o--;)i=r[o],l=c.get(i),void 0===l&&c.set(i,l=o?new Map:jr(t)),c=l;return l},Sr=(wr(),{http:null,xhr:sr,fetch:{get:wr}});cn.forEach(Sr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(J1){}Object.defineProperty(e,"adapterName",{value:t})}});const _r=e=>"- ".concat(e),kr=e=>cn.isFunction(e)||null===e||!1===e;const Cr={getAdapter:function(e,t){e=cn.isArray(e)?e:[e];const{length:a}=e;let s,n;const r={};for(let i=0;i<a;i++){let a;if(s=e[i],n=s,!kr(s)&&(n=Sr[(a=String(s)).toLowerCase()],void 0===n))throw new un("Unknown adapter '".concat(a,"'"));if(n&&(cn.isFunction(n)||(n=n.get(t))))break;r[a||"#"+i]=n}if(!n){const e=Object.entries(r).map(e=>{let[t,a]=e;return"adapter ".concat(t," ")+(!1===a?"is not supported by the environment":"is not available in the build")});let t=a?e.length>1?"since :\n"+e.map(_r).join("\n"):" "+_r(e[0]):"as no adapter specified";throw new un("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return n},adapters:Sr};function Er(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vn(null,e)}function Ar(e){Er(e),e.headers=Un.from(e.headers),e.data=Hn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Cr.getAdapter(e.adapter||Dn.adapter,e)(e).then(function(t){return Er(e),t.data=Hn.call(e,e.transformResponse,t),t.headers=Un.from(t.headers),t},function(t){return qn(t)||(Er(e),t&&t.response&&(t.response.data=Hn.call(e,e.transformResponse,t.response),t.response.headers=Un.from(t.response.headers))),Promise.reject(t)})}const Pr="1.13.4",Or={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Or[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const Mr={};Or.transitional=function(e,t,a){function s(e,t){return"[Axios v"+Pr+"] Transitional option '"+e+"'"+t+(a?". "+a:"")}return(a,n,r)=>{if(!1===e)throw new un(s(n," has been removed"+(t?" in "+t:"")),un.ERR_DEPRECATED);return t&&!Mr[n]&&(Mr[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(a,n,r)}},Or.spelling=function(e){return(t,a)=>(console.warn("".concat(a," is likely a misspelling of ").concat(e)),!0)};const Tr={assertOptions:function(e,t,a){if("object"!==typeof e)throw new un("options must be an object",un.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const r=s[n],i=t[r];if(i){const t=e[r],a=void 0===t||i(t,r,e);if(!0!==a)throw new un("option "+r+" must be "+a,un.ERR_BAD_OPTION_VALUE);continue}if(!0!==a)throw new un("Unknown option "+r,un.ERR_BAD_OPTION)}},validators:Or},Dr=Tr.validators;class Ir{constructor(e){this.defaults=e||{},this.interceptors={request:new wn,response:new wn}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{a.stack?t&&!String(a.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(a.stack+="\n"+t):a.stack=t}catch(J1){}}throw a}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=tr(this.defaults,t);const{transitional:a,paramsSerializer:s,headers:n}=t;void 0!==a&&Tr.assertOptions(a,{silentJSONParsing:Dr.transitional(Dr.boolean),forcedJSONParsing:Dr.transitional(Dr.boolean),clarifyTimeoutError:Dr.transitional(Dr.boolean)},!1),null!=s&&(cn.isFunction(s)?t.paramsSerializer={serialize:s}:Tr.assertOptions(s,{encode:Dr.function,serialize:Dr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Tr.assertOptions(t,{baseUrl:Dr.spelling("baseURL"),withXsrfToken:Dr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=n&&cn.merge(n.common,n[t.method]);n&&cn.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=Un.concat(r,n);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[Ar.bind(this),void 0];for(e.unshift(...i),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=t;for(;u<d;){const e=i[u++],t=i[u++];try{m=e(m)}catch(h){t.call(this,h);break}}try{c=Ar.call(this,m)}catch(h){return Promise.reject(h)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return Nn(Zn((e=tr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}cn.forEach(["delete","get","head","options"],function(e){Ir.prototype[e]=function(t,a){return this.request(tr(a||{},{method:e,url:t,data:(a||{}).data}))}}),cn.forEach(["post","put","patch"],function(e){function t(t){return function(a,s,n){return this.request(tr(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Ir.prototype[e]=t(),Ir.prototype[e+"Form"]=t(!0)});const Rr=Ir;class Lr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const a=this;this.promise.then(e=>{if(!a._listeners)return;let t=a._listeners.length;for(;t-- >0;)a._listeners[t](e);a._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{a.subscribe(e),t=e}).then(e);return s.cancel=function(){a.unsubscribe(t)},s},e(function(e,s,n){a.reason||(a.reason=new Vn(e,s,n),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Lr(function(t){e=t});return{token:t,cancel:e}}}const Fr=Lr;const zr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(zr).forEach(e=>{let[t,a]=e;zr[a]=t});const Br=zr;const Ur=function e(t){const a=new Rr(t),s=Ns(Rr.prototype.request,a);return cn.extend(s,Rr.prototype,a,{allOwnKeys:!0}),cn.extend(s,a,null,{allOwnKeys:!0}),s.create=function(a){return e(tr(t,a))},s}(Dn);Ur.Axios=Rr,Ur.CanceledError=Vn,Ur.CancelToken=Fr,Ur.isCancel=qn,Ur.VERSION=Pr,Ur.toFormData=fn,Ur.AxiosError=un,Ur.Cancel=Ur.CanceledError,Ur.all=function(e){return Promise.all(e)},Ur.spread=function(e){return function(t){return e.apply(null,t)}},Ur.isAxiosError=function(e){return cn.isObject(e)&&!0===e.isAxiosError},Ur.mergeConfig=tr,Ur.AxiosHeaders=Un,Ur.formToJSON=e=>Mn(cn.isHTMLForm(e)?new FormData(e):e),Ur.getAdapter=Cr.getAdapter,Ur.HttpStatusCode=Br,Ur.default=Ur;const Hr=Ur;var qr=a(4414);const Vr=(0,s.createContext)(null),Wr="".concat("","/api"),Gr=e=>{let{children:t}=e;const[a,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(localStorage.getItem("token")),[l,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(localStorage.getItem("schoolId")||null),[m,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{r?(Hr.defaults.headers.common.Authorization="Bearer ".concat(r),p()):o(!1)},[r]);const p=async()=>{try{const e=await Hr.get("".concat(Wr,"/auth/me"));if(n(e.data),e.data.school_id){d(e.data.school_id),localStorage.setItem("schoolId",e.data.school_id);try{const t=await Hr.get("".concat(Wr,"/schools/").concat(e.data.school_id));h(t.data)}catch(J1){console.error("Failed to fetch school data:",J1)}}}catch(e){console.error("Failed to fetch user:",e),x()}finally{o(!1)}},x=()=>{localStorage.removeItem("token"),localStorage.removeItem("schoolId"),delete Hr.defaults.headers.common.Authorization,i(null),n(null),d(null)};return(0,qr.jsx)(Vr.Provider,{value:{user:a,setUser:n,token:r,setToken:i,loading:l,schoolId:c,schoolData:m,login:async(e,t)=>{const a=await Hr.post("".concat(Wr,"/auth/login"),{email:e,password:t}),{access_token:s,user:r}=a.data;if(localStorage.setItem("token",s),Hr.defaults.headers.common.Authorization="Bearer ".concat(s),i(s),n(r),r.school_id){d(r.school_id),localStorage.setItem("schoolId",r.school_id);try{const e=await Hr.get("".concat(Wr,"/schools/").concat(r.school_id));h(e.data)}catch(J1){console.error("Failed to fetch school data:",J1)}}return r},studentLogin:async(e,t)=>{const a=await Hr.post("".concat(Wr,"/students/login?student_id=").concat(encodeURIComponent(e),"&password=").concat(encodeURIComponent(t))),{access_token:s,student:r}=a.data;localStorage.setItem("token",s),Hr.defaults.headers.common.Authorization="Bearer ".concat(s);const l=u(u({},r),{},{role:"student"});return i(s),n(l),r.school_id&&(d(r.school_id),localStorage.setItem("schoolId",r.school_id)),l},setupDirector:async e=>{const t=await Hr.post("".concat(Wr,"/auth/setup-director"),e),{access_token:a,user:s}=t.data;return localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(s)),Hr.defaults.headers.common.Authorization="Bearer ".concat(a),i(a),n(s),s},logout:x,selectSchool:e=>{d(e),localStorage.setItem("schoolId",e)},hasPermission:e=>!!a&&e.includes(a.role),isAuthenticated:!!r&&!!a},children:t})},Kr=()=>{const e=(0,s.useContext)(Vr);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},Yr=(0,s.createContext)(null),Jr=e=>{let{children:t}=e;const{i18n:a}=js(),[n,r]=(0,s.useState)(localStorage.getItem("language")||"en"),i=e=>{a.changeLanguage(e),r(e),localStorage.setItem("language",e)};return(0,qr.jsx)(Yr.Provider,{value:{language:n,changeLanguage:i,toggleLanguage:()=>{i("en"===n?"hi":"en")},isHindi:"hi"===n},children:t})},$r=()=>{const e=(0,s.useContext)(Yr);if(!e)throw new Error("useLanguage must be used within LanguageProvider");return e};function Qr(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Xr(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{let a=!1;const s=t.map(t=>{const s=Qr(t,e);return a||"function"!=typeof s||(a=!0),s});if(a)return()=>{for(let e=0;e<s.length;e++){const a=s[e];"function"==typeof a?a():Qr(t[e],null)}}}}function Zr(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return s.useCallback(Xr(...t),t)}const ei=["children"],ti=["children"];var ai=Symbol.for("react.lazy"),si=n[" use ".trim().toString()];function ni(e){return null!=e&&"object"===typeof e&&"$$typeof"in e&&e.$$typeof===ai&&"_payload"in e&&function(e){return"object"===typeof e&&null!==e&&"then"in e}(e._payload)}function ri(e){const t=li(e),a=s.forwardRef((e,a)=>{let{children:n}=e,r=i(e,ei);ni(n)&&"function"===typeof si&&(n=si(n._payload));const l=s.Children.toArray(n),o=l.find(ci);if(o){const e=o.props.children,n=l.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null}))}return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:n}))});return a.displayName="".concat(e,".Slot"),a}var ii=ri("Slot");function li(e){const t=s.forwardRef((e,t)=>{let{children:a}=e,n=i(e,ti);if(ni(a)&&"function"===typeof si&&(a=si(a._payload)),s.isValidElement(a)){const e=function(e){var t,a;let s=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=s&&"isReactWarning"in s&&s.isReactWarning;if(n)return e.ref;if(s=null===(a=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===a?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a),r=function(e,t){const a=u({},t);for(const s in t){const n=e[s],r=t[s];/^on[A-Z]/.test(s)?n&&r?a[s]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(a[s]=n):"style"===s?a[s]=u(u({},n),r):"className"===s&&(a[s]=[n,r].filter(Boolean).join(" "))}return u(u({},e),a)}(n,a.props);return a.type!==s.Fragment&&(r.ref=t?Xr(t,e):e),s.cloneElement(a,r)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var oi=Symbol("radix.slottable");function ci(e){return s.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===oi}function di(e){var t,a,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=di(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function ui(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=di(e))&&(s&&(s+=" "),s+=t);return s}const mi=["class","className"],hi=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,pi=ui,xi=(e,t)=>a=>{var s;if(null==(null===t||void 0===t?void 0:t.variants))return pi(e,null===a||void 0===a?void 0:a.class,null===a||void 0===a?void 0:a.className);const{variants:n,defaultVariants:r}=t,l=Object.keys(n).map(e=>{const t=null===a||void 0===a?void 0:a[e],s=null===r||void 0===r?void 0:r[e];if(null===t)return null;const i=hi(t)||hi(s);return n[e][i]}),o=a&&Object.entries(a).reduce((e,t)=>{let[a,s]=t;return void 0===s||(e[a]=s),e},{}),c=null===t||void 0===t||null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:a,className:s}=t,n=i(t,mi);return Object.entries(n).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes(u(u({},r),o)[t]):u(u({},r),o)[t]===a})?[...e,a,s]:e},[]);return pi(e,l,c,null===a||void 0===a?void 0:a.class,null===a||void 0===a?void 0:a.className)},fi=function(){return{nextPart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,validators:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,classGroupId:arguments.length>2?arguments[2]:void 0}},gi="-",vi=[],bi=e=>{const t=Ni(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return ji(e);const a=e.split(gi),s=""===a[0]&&a.length>1?1:0;return yi(a,s,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=s[e],n=a[e];return t?n?((e,t)=>{const a=new Array(e.length+t.length);for(let s=0;s<e.length;s++)a[s]=e[s];for(let s=0;s<t.length;s++)a[e.length+s]=t[s];return a})(n,t):t:n||vi}return a[e]||vi}}},yi=(e,t,a)=>{if(0===e.length-t)return a.classGroupId;const s=e[t],n=a.nextPart.get(s);if(n){const a=yi(e,t+1,n);if(a)return a}const r=a.validators;if(null===r)return;const i=0===t?e.join(gi):e.slice(t).join(gi),l=r.length;for(let o=0;o<l;o++){const e=r[o];if(e.validator(i))return e.classGroupId}},ji=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),a=t.indexOf(":"),s=t.slice(0,a);return s?"arbitrary.."+s:void 0})(),Ni=e=>{const{theme:t,classGroups:a}=e;return wi(a,t)},wi=(e,t)=>{const a=fi();for(const s in e){const n=e[s];Si(n,a,s,t)}return a},Si=(e,t,a,s)=>{const n=e.length;for(let r=0;r<n;r++){const n=e[r];_i(n,t,a,s)}},_i=(e,t,a,s)=>{"string"!==typeof e?"function"!==typeof e?Ei(e,t,a,s):Ci(e,t,a,s):ki(e,t,a)},ki=(e,t,a)=>{(""===e?t:Ai(t,e)).classGroupId=a},Ci=(e,t,a,s)=>{Pi(e)?Si(e(s),t,a,s):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(a,e)))},Ei=(e,t,a,s)=>{const n=Object.entries(e),r=n.length;for(let i=0;i<r;i++){const[e,r]=n[i];Si(r,Ai(t,e),a,s)}},Ai=(e,t)=>{let a=e;const s=t.split(gi),n=s.length;for(let r=0;r<n;r++){const e=s[r];let t=a.nextPart.get(e);t||(t=fi(),a.nextPart.set(e,t)),a=t}return a},Pi=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,Oi=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=Object.create(null),s=Object.create(null);const n=(n,r)=>{a[n]=r,t++,t>e&&(t=0,s=a,a=Object.create(null))};return{get(e){let t=a[e];return void 0!==t?t:void 0!==(t=s[e])?(n(e,t),t):void 0},set(e,t){e in a?a[e]=t:n(e,t)}}},Mi=[],Ti=(e,t,a,s,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:a,maybePostfixModifierPosition:s,isExternal:n}),Di=e=>{const{prefix:t,experimentalParseClassName:a}=e;let s=e=>{const t=[];let a,s=0,n=0,r=0;const i=e.length;for(let d=0;d<i;d++){const i=e[d];if(0===s&&0===n){if(":"===i){t.push(e.slice(r,d)),r=d+1;continue}if("/"===i){a=d;continue}}"["===i?s++:"]"===i?s--:"("===i?n++:")"===i&&n--}const l=0===t.length?e:e.slice(r);let o=l,c=!1;l.endsWith("!")?(o=l.slice(0,-1),c=!0):l.startsWith("!")&&(o=l.slice(1),c=!0);return Ti(t,c,o,a&&a>r?a-r:void 0)};if(t){const e=t+":",a=s;s=t=>t.startsWith(e)?a(t.slice(e.length)):Ti(Mi,!1,t,void 0,!0)}if(a){const e=s;s=t=>a({className:t,parseClassName:e})}return s},Ii=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,a)=>{t.set(e,1e6+a)}),e=>{const a=[];let s=[];for(let n=0;n<e.length;n++){const r=e[n],i="["===r[0],l=t.has(r);i||l?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(r)):s.push(r)}return s.length>0&&(s.sort(),a.push(...s)),a}},Ri=/\s+/,Li=e=>{if("string"===typeof e)return e;let t,a="";for(let s=0;s<e.length;s++)e[s]&&(t=Li(e[s]))&&(a&&(a+=" "),a+=t);return a},Fi=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];let n,r,i,l;const o=e=>{const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:a,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:r}=t,i=[],l=e.trim().split(Ri);let o="";for(let c=l.length-1;c>=0;c-=1){const e=l[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:h}=a(e);if(t){o=e+(o.length>0?" "+o:o);continue}let p=!!h,x=s(p?m.substring(0,h):m);if(!x){if(!p){o=e+(o.length>0?" "+o:o);continue}if(x=s(m),!x){o=e+(o.length>0?" "+o:o);continue}p=!1}const f=0===d.length?"":1===d.length?d[0]:r(d).join(":"),g=u?f+"!":f,v=g+x;if(i.indexOf(v)>-1)continue;i.push(v);const b=n(x,p);for(let a=0;a<b.length;++a){const e=b[a];i.push(g+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return i(e,a),a};return l=t=>{const s=a.reduce((e,t)=>t(e),e());return n=(e=>u({cache:Oi(e.cacheSize),parseClassName:Di(e),sortModifiers:Ii(e)},bi(e)))(s),r=n.cache.get,i=n.cache.set,l=o,o(t)},function(){return l(function(){let e,t,a=0,s="";for(;a<arguments.length;){var n;(e=(n=a++)<0||arguments.length<=n?void 0:arguments[n])&&(t=Li(e))&&(s&&(s+=" "),s+=t)}return s}(...arguments))}},zi=[],Bi=e=>{const t=t=>t[e]||zi;return t.isThemeGetter=!0,t},Ui=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Hi=/^\((?:(\w[\w-]*):)?(.+)\)$/i,qi=/^\d+\/\d+$/,Vi=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wi=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gi=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ki=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Yi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ji=e=>qi.test(e),$i=e=>!!e&&!Number.isNaN(Number(e)),Qi=e=>!!e&&Number.isInteger(Number(e)),Xi=e=>e.endsWith("%")&&$i(e.slice(0,-1)),Zi=e=>Vi.test(e),el=()=>!0,tl=e=>Wi.test(e)&&!Gi.test(e),al=()=>!1,sl=e=>Ki.test(e),nl=e=>Yi.test(e),rl=e=>!ll(e)&&!hl(e),il=e=>yl(e,Sl,al),ll=e=>Ui.test(e),ol=e=>yl(e,_l,tl),cl=e=>yl(e,kl,$i),dl=e=>yl(e,Nl,al),ul=e=>yl(e,wl,nl),ml=e=>yl(e,El,sl),hl=e=>Hi.test(e),pl=e=>jl(e,_l),xl=e=>jl(e,Cl),fl=e=>jl(e,Nl),gl=e=>jl(e,Sl),vl=e=>jl(e,wl),bl=e=>jl(e,El,!0),yl=(e,t,a)=>{const s=Ui.exec(e);return!!s&&(s[1]?t(s[1]):a(s[2]))},jl=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=Hi.exec(e);return!!s&&(s[1]?t(s[1]):a)},Nl=e=>"position"===e||"percentage"===e,wl=e=>"image"===e||"url"===e,Sl=e=>"length"===e||"size"===e||"bg-size"===e,_l=e=>"length"===e,kl=e=>"number"===e,Cl=e=>"family-name"===e,El=e=>"shadow"===e,Al=(Symbol.toStringTag,()=>{const e=Bi("color"),t=Bi("font"),a=Bi("text"),s=Bi("font-weight"),n=Bi("tracking"),r=Bi("leading"),i=Bi("breakpoint"),l=Bi("container"),o=Bi("spacing"),c=Bi("radius"),d=Bi("shadow"),u=Bi("inset-shadow"),m=Bi("text-shadow"),h=Bi("drop-shadow"),p=Bi("blur"),x=Bi("perspective"),f=Bi("aspect"),g=Bi("ease"),v=Bi("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",hl,ll],y=()=>[hl,ll,o],j=()=>[Ji,"full","auto",...y()],N=()=>[Qi,"none","subgrid",hl,ll],w=()=>["auto",{span:["full",Qi,hl,ll]},Qi,hl,ll],S=()=>[Qi,"auto",hl,ll],_=()=>["auto","min","max","fr",hl,ll],k=()=>["auto",...y()],C=()=>[Ji,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],E=()=>[e,hl,ll],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",fl,dl,{position:[hl,ll]}],P=()=>["auto","cover","contain",gl,il,{size:[hl,ll]}],O=()=>[Xi,pl,ol],M=()=>["","none","full",c,hl,ll],T=()=>["",$i,pl,ol],D=()=>[$i,Xi,fl,dl],I=()=>["","none",p,hl,ll],R=()=>["none",$i,hl,ll],L=()=>["none",$i,hl,ll],F=()=>[$i,hl,ll],z=()=>[Ji,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Zi],breakpoint:[Zi],color:[el],container:[Zi],"drop-shadow":[Zi],ease:["in","out","in-out"],font:[rl],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Zi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Zi],shadow:[Zi],spacing:["px",$i],text:[Zi],"text-shadow":[Zi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ji,ll,hl,f]}],container:["container"],columns:[{columns:[$i,ll,hl,l]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Qi,"auto",hl,ll]}],basis:[{basis:[Ji,"full","auto",l,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$i,Ji,"auto","initial","none",ll]}],grow:[{grow:["",$i,hl,ll]}],shrink:[{shrink:["",$i,hl,ll]}],order:[{order:[Qi,"first","last","none",hl,ll]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:w()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:w()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_()}],"auto-rows":[{"auto-rows":_()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:k()}],mx:[{mx:k()}],my:[{my:k()}],ms:[{ms:k()}],me:[{me:k()}],mt:[{mt:k()}],mr:[{mr:k()}],mb:[{mb:k()}],ml:[{ml:k()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[l,"screen",...C()]}],"min-w":[{"min-w":[l,"screen","none",...C()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...C()]}],h:[{h:["screen","lh",...C()]}],"min-h":[{"min-h":["screen","lh","none",...C()]}],"max-h":[{"max-h":["screen","lh",...C()]}],"font-size":[{text:["base",a,pl,ol]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,hl,cl]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Xi,ll]}],"font-family":[{font:[xl,ll,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,hl,ll]}],"line-clamp":[{"line-clamp":[$i,"none",hl,cl]}],leading:[{leading:[r,...y()]}],"list-image":[{"list-image":["none",hl,ll]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",hl,ll]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[$i,"from-font","auto",hl,ol]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[$i,"auto",hl,ll]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",hl,ll]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",hl,ll]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:A()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qi,hl,ll],radial:["",hl,ll],conic:[Qi,hl,ll]},vl,ul]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:M()}],"rounded-s":[{"rounded-s":M()}],"rounded-e":[{"rounded-e":M()}],"rounded-t":[{"rounded-t":M()}],"rounded-r":[{"rounded-r":M()}],"rounded-b":[{"rounded-b":M()}],"rounded-l":[{"rounded-l":M()}],"rounded-ss":[{"rounded-ss":M()}],"rounded-se":[{"rounded-se":M()}],"rounded-ee":[{"rounded-ee":M()}],"rounded-es":[{"rounded-es":M()}],"rounded-tl":[{"rounded-tl":M()}],"rounded-tr":[{"rounded-tr":M()}],"rounded-br":[{"rounded-br":M()}],"rounded-bl":[{"rounded-bl":M()}],"border-w":[{border:T()}],"border-w-x":[{"border-x":T()}],"border-w-y":[{"border-y":T()}],"border-w-s":[{"border-s":T()}],"border-w-e":[{"border-e":T()}],"border-w-t":[{"border-t":T()}],"border-w-r":[{"border-r":T()}],"border-w-b":[{"border-b":T()}],"border-w-l":[{"border-l":T()}],"divide-x":[{"divide-x":T()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":T()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[$i,hl,ll]}],"outline-w":[{outline:["",$i,pl,ol]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",d,bl,ml]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",u,bl,ml]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[$i,ol]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":T()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",m,bl,ml]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[$i,hl,ll]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$i]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[hl,ll]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[$i]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:A()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",hl,ll]}],filter:[{filter:["","none",hl,ll]}],blur:[{blur:I()}],brightness:[{brightness:[$i,hl,ll]}],contrast:[{contrast:[$i,hl,ll]}],"drop-shadow":[{"drop-shadow":["","none",h,bl,ml]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",$i,hl,ll]}],"hue-rotate":[{"hue-rotate":[$i,hl,ll]}],invert:[{invert:["",$i,hl,ll]}],saturate:[{saturate:[$i,hl,ll]}],sepia:[{sepia:["",$i,hl,ll]}],"backdrop-filter":[{"backdrop-filter":["","none",hl,ll]}],"backdrop-blur":[{"backdrop-blur":I()}],"backdrop-brightness":[{"backdrop-brightness":[$i,hl,ll]}],"backdrop-contrast":[{"backdrop-contrast":[$i,hl,ll]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$i,hl,ll]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$i,hl,ll]}],"backdrop-invert":[{"backdrop-invert":["",$i,hl,ll]}],"backdrop-opacity":[{"backdrop-opacity":[$i,hl,ll]}],"backdrop-saturate":[{"backdrop-saturate":[$i,hl,ll]}],"backdrop-sepia":[{"backdrop-sepia":["",$i,hl,ll]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",hl,ll]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$i,"initial",hl,ll]}],ease:[{ease:["linear","initial",g,hl,ll]}],delay:[{delay:[$i,hl,ll]}],animate:[{animate:["none",v,hl,ll]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,hl,ll]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:R()}],"rotate-x":[{"rotate-x":R()}],"rotate-y":[{"rotate-y":R()}],"rotate-z":[{"rotate-z":R()}],scale:[{scale:L()}],"scale-x":[{"scale-x":L()}],"scale-y":[{"scale-y":L()}],"scale-z":[{"scale-z":L()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[hl,ll,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",hl,ll]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",hl,ll]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[$i,pl,ol,cl]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),Pl=Fi(Al);function Ol(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Pl(ui(t))}const Ml=["className","variant","size","asChild"],Tl=xi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Dl=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:r=!1}=e,l=i(e,Ml);const o=r?ii:"button";return(0,qr.jsx)(o,u({className:Ol(Tl({variant:s,size:n,className:a})),ref:t},l))});Dl.displayName="Button";const Il=["className","type"],Rl=s.forwardRef((e,t)=>{let{className:a,type:s}=e,n=i(e,Il);return(0,qr.jsx)("input",u({type:s,className:Ol("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t},n))});Rl.displayName="Input";const Ll=["asChild"];var Fl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const a=ri("Primitive.".concat(t)),n=s.forwardRef((e,s)=>{const{asChild:n}=e,r=i(e,Ll),l=n?a:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,qr.jsx)(l,u(u({},r),{},{ref:s}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});var zl=s.forwardRef((e,t)=>(0,qr.jsx)(Fl.label,u(u({},e),{},{ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));zl.displayName="Label";var Bl=zl;const Ul=["className"],Hl=xi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ql=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Ul);return(0,qr.jsx)(Bl,u({ref:t,className:Ol(Hl(),a)},s))});ql.displayName=Bl.displayName;"undefined"===typeof window||!window.document||window.document.createElement;function Vl(e,t){let{checkForDefaultPrevented:a=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(s){if(null===e||void 0===e||e(s),!1===a||!s.defaultPrevented)return null===t||void 0===t?void 0:t(s)}}const Wl=["children"],Gl=["scope","children"];function Kl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];const n=()=>{const t=a.map(e=>s.createContext(e));return function(a){const n=(null===a||void 0===a?void 0:a[e])||t;return s.useMemo(()=>({["__scope".concat(e)]:u(u({},a),{},{[e]:n})}),[a,n])}};return n.scopeName=e,[function(t,n){const r=s.createContext(n),l=a.length;a=[...a,n];const o=t=>{var a;const{scope:n,children:o}=t,c=i(t,Gl),d=(null===n||void 0===n||null===(a=n[e])||void 0===a?void 0:a[l])||r,u=s.useMemo(()=>c,Object.values(c));return(0,qr.jsx)(d.Provider,{value:u,children:o})};return o.displayName=t+"Provider",[o,function(a,i){var o;const c=(null===i||void 0===i||null===(o=i[e])||void 0===o?void 0:o[l])||r,d=s.useContext(c);if(d)return d;if(void 0!==n)return n;throw new Error("`".concat(a,"` must be used within `").concat(t,"`"))}]},Yl(n,...t)]}function Yl(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];const n=t[0];if(1===t.length)return n;const r=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const a=e.reduce((e,a)=>{let{useScope:s,scopeName:n}=a;const r=s(t)["__scope".concat(n)];return u(u({},e),r)},{});return s.useMemo(()=>({["__scope".concat(n.scopeName)]:a}),[a])}};return r.scopeName=n.scopeName,r}function Jl(e,t,a){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,a)}function $l(e,t,a){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:a;throw new TypeError("Private element is not present on this object")}function Ql(e,t){return e.get($l(e,t))}function Xl(e,t,a){return e.set($l(e,t),a),a}const Zl=["children"],eo=["children"];function to(e){const t=ao(e),a=s.forwardRef((e,a)=>{const{children:n}=e,r=i(e,Zl),l=s.Children.toArray(n),o=l.find(ro);if(o){const e=o.props.children,n=l.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null}))}return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:n}))});return a.displayName="".concat(e,".Slot"),a}function ao(e){const t=s.forwardRef((e,t)=>{const{children:a}=e,n=i(e,eo);if(s.isValidElement(a)){const e=function(e){var t,a;let s=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=s&&"isReactWarning"in s&&s.isReactWarning;if(n)return e.ref;if(s=null===(a=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===a?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a),r=function(e,t){const a=u({},t);for(const s in t){const n=e[s],r=t[s];/^on[A-Z]/.test(s)?n&&r?a[s]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(a[s]=n):"style"===s?a[s]=u(u({},n),r):"className"===s&&(a[s]=[n,r].filter(Boolean).join(" "))}return u(u({},e),a)}(n,a.props);return a.type!==s.Fragment&&(r.ref=t?Xr(t,e):e),s.cloneElement(a,r)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var so=Symbol("radix.slottable");var no;function ro(e){return s.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===so}const io=["scope","children"];function lo(e){const t=e+"CollectionProvider",[a,n]=Kl(t),[r,l]=a(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:a}=e,n=s.useRef(null),i=s.useRef(new Map).current;return(0,qr.jsx)(r,{scope:t,itemMap:i,collectionRef:n,children:a})};o.displayName=t;const c=e+"CollectionSlot",d=to(c),m=s.forwardRef((e,t)=>{const{scope:a,children:s}=e,n=Zr(t,l(c,a).collectionRef);return(0,qr.jsx)(d,{ref:n,children:s})});m.displayName=c;const h=e+"CollectionItemSlot",p="data-radix-collection-item",x=to(h),f=s.forwardRef((e,t)=>{const{scope:a,children:n}=e,r=i(e,io),o=s.useRef(null),c=Zr(t,o),d=l(h,a);return s.useEffect(()=>(d.itemMap.set(o,u({ref:o},r)),()=>{d.itemMap.delete(o)})),(0,qr.jsx)(x,u(u({},{[p]:""}),{},{ref:c,children:n}))});return f.displayName=h,[{Provider:o,Slot:m,ItemSlot:f},function(t){const a=l(e+"CollectionConsumer",t),n=s.useCallback(()=>{const e=a.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]"))),s=Array.from(a.itemMap.values()).sort((e,a)=>t.indexOf(e.ref.current)-t.indexOf(a.ref.current));return s},[a.collectionRef,a.itemMap]);return n},n]}var oo=new WeakMap;no=new WeakMap,Map;function co(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const a=function(e,t){const a=e.length,s=uo(t),n=s>=0?s:a+s;return n<0||n>=a?-1:n}(e,t);return-1===a?void 0:e[a]}function uo(e){return e!==e||0===e?0:Math.trunc(e)}var mo=null!==globalThis&&void 0!==globalThis&&globalThis.document?s.useLayoutEffect:()=>{},ho=n[" useId ".trim().toString()]||(()=>{}),po=0;function xo(e){const[t,a]=s.useState(ho());return mo(()=>{e||a(e=>null!==e&&void 0!==e?e:String(po++))},[e]),e||(t?"radix-".concat(t):"")}const fo=["children"],go=["children"];function vo(e){const t=bo(e),a=s.forwardRef((e,a)=>{const{children:n}=e,r=i(e,fo),l=s.Children.toArray(n),o=l.find(jo);if(o){const e=o.props.children,n=l.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null}))}return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:n}))});return a.displayName="".concat(e,".Slot"),a}function bo(e){const t=s.forwardRef((e,t)=>{const{children:a}=e,n=i(e,go);if(s.isValidElement(a)){const e=function(e){var t,a;let s=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=s&&"isReactWarning"in s&&s.isReactWarning;if(n)return e.ref;if(s=null===(a=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===a?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a),r=function(e,t){const a=u({},t);for(const s in t){const n=e[s],r=t[s];/^on[A-Z]/.test(s)?n&&r?a[s]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(a[s]=n):"style"===s?a[s]=u(u({},n),r):"className"===s&&(a[s]=[n,r].filter(Boolean).join(" "))}return u(u({},e),a)}(n,a.props);return a.type!==s.Fragment&&(r.ref=t?Xr(t,e):e),s.cloneElement(a,r)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var yo=Symbol("radix.slottable");function jo(e){return s.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===yo}const No=["asChild"];var wo=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const a=vo("Primitive.".concat(t)),n=s.forwardRef((e,s)=>{const{asChild:n}=e,r=i(e,No),l=n?a:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,qr.jsx)(l,u(u({},r),{},{ref:s}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});function So(e,t){e&&Ft.flushSync(()=>e.dispatchEvent(t))}function _o(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>function(){for(var e,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return null===(e=t.current)||void 0===e?void 0:e.call(t,...s)},[])}var ko=n[" useInsertionEffect ".trim().toString()]||mo;function Co(e){let{prop:t,defaultProp:a,onChange:n=()=>{},caller:r}=e;const[i,l,o]=function(e){let{defaultProp:t,onChange:a}=e;const[n,r]=s.useState(t),i=s.useRef(n),l=s.useRef(a);return ko(()=>{l.current=a},[a]),s.useEffect(()=>{var e;i.current!==n&&(null===(e=l.current)||void 0===e||e.call(l,n),i.current=n)},[n,i]),[n,r,l]}({defaultProp:a,onChange:n}),c=void 0!==t,d=c?t:i;{const e=s.useRef(void 0!==t);s.useEffect(()=>{const t=e.current;if(t!==c){const e=t?"controlled":"uncontrolled",a=c?"controlled":"uncontrolled";console.warn("".concat(r," is changing from ").concat(e," to ").concat(a,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}e.current=c},[c,r])}const u=s.useCallback(e=>{if(c){const s=function(e){return"function"===typeof e}(e)?e(t):e;var a;if(s!==t)null===(a=o.current)||void 0===a||a.call(o,s)}else l(e)},[c,t,l,o]);return[d,u]}Symbol("RADIX:SYNC_STATE");var Eo=s.createContext(void 0);function Ao(e){const t=s.useContext(Eo);return e||t||"ltr"}const Po=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],Oo=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var Mo="rovingFocusGroup.onEntryFocus",To={bubbles:!1,cancelable:!0},Do="RovingFocusGroup",[Io,Ro,Lo]=lo(Do),[Fo,zo]=Kl(Do,[Lo]),[Bo,Uo]=Fo(Do),Ho=s.forwardRef((e,t)=>(0,qr.jsx)(Io.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,qr.jsx)(Io.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,qr.jsx)(qo,u(u({},e),{},{ref:t}))})}));Ho.displayName=Do;var qo=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:n,loop:r=!1,dir:l,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:m,preventScrollOnEntryFocus:h=!1}=e,p=i(e,Po),x=s.useRef(null),f=Zr(t,x),g=Ao(l),[v,b]=Co({prop:o,defaultProp:null!==c&&void 0!==c?c:null,onChange:d,caller:Do}),[y,j]=s.useState(!1),N=_o(m),w=Ro(a),S=s.useRef(!1),[_,k]=s.useState(0);return s.useEffect(()=>{const e=x.current;if(e)return e.addEventListener(Mo,N),()=>e.removeEventListener(Mo,N)},[N]),(0,qr.jsx)(Bo,{scope:a,orientation:n,dir:g,loop:r,currentTabStopId:v,onItemFocus:s.useCallback(e=>b(e),[b]),onItemShiftTab:s.useCallback(()=>j(!0),[]),onFocusableItemAdd:s.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>k(e=>e-1),[]),children:(0,qr.jsx)(wo.div,u(u({tabIndex:y||0===_?-1:0,"data-orientation":n},p),{},{ref:f,style:u({outline:"none"},e.style),onMouseDown:Vl(e.onMouseDown,()=>{S.current=!0}),onFocus:Vl(e.onFocus,e=>{const t=!S.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(Mo,To);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter(e=>e.focusable);Ko([e.find(e=>e.active),e.find(e=>e.id===v),...e].filter(Boolean).map(e=>e.ref.current),h)}}S.current=!1}),onBlur:Vl(e.onBlur,()=>j(!1))}))})}),Vo="RovingFocusGroupItem",Wo=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:n=!0,active:r=!1,tabStopId:l,children:o}=e,c=i(e,Oo),d=xo(),m=l||d,h=Uo(Vo,a),p=h.currentTabStopId===m,x=Ro(a),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:v}=h;return s.useEffect(()=>{if(n)return f(),()=>g()},[n,f,g]),(0,qr.jsx)(Io.ItemSlot,{scope:a,id:m,focusable:n,active:r,children:(0,qr.jsx)(wo.span,u(u({tabIndex:p?0:-1,"data-orientation":h.orientation},c),{},{ref:t,onMouseDown:Vl(e.onMouseDown,e=>{n?h.onItemFocus(m):e.preventDefault()}),onFocus:Vl(e.onFocus,()=>h.onItemFocus(m)),onKeyDown:Vl(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,a){const s=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,a);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(s)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)?void 0:Go[s]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=x().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const s=a.indexOf(e.currentTarget);a=h.loop?function(e,t){return e.map((a,s)=>e[(t+s)%e.length])}(a,s+1):a.slice(s+1)}setTimeout(()=>Ko(a))}}),children:"function"===typeof o?o({isCurrentTabStop:p,hasTabStop:null!=v}):o}))})});Wo.displayName=Vo;var Go={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ko(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=document.activeElement;for(const s of e){if(s===a)return;if(s.focus({preventScroll:t}),document.activeElement!==a)return}}var Yo=Ho,Jo=Wo;var $o=e=>{const{present:t,children:a}=e,n=function(e){const[t,a]=s.useState(),n=s.useRef(null),r=s.useRef(e),i=s.useRef("none"),l=e?"mounted":"unmounted",[o,c]=function(e,t){return s.useReducer((e,a)=>{const s=t[e][a];return null!==s&&void 0!==s?s:e},e)}(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const e=Qo(n.current);i.current="mounted"===o?e:"none"},[o]),mo(()=>{const t=n.current,a=r.current;if(a!==e){const s=i.current,n=Qo(t);if(e)c("MOUNT");else if("none"===n||"none"===(null===t||void 0===t?void 0:t.display))c("UNMOUNT");else{c(a&&s!==n?"ANIMATION_OUT":"UNMOUNT")}r.current=e}},[e,c]),mo(()=>{if(t){var e;let a;const s=null!==(e=t.ownerDocument.defaultView)&&void 0!==e?e:window,l=e=>{const i=Qo(n.current).includes(CSS.escape(e.animationName));if(e.target===t&&i&&(c("ANIMATION_END"),!r.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",a=s.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},o=e=>{e.target===t&&(i.current=Qo(n.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{s.clearTimeout(a),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:s.useCallback(e=>{n.current=e?getComputedStyle(e):null,a(e)},[])}}(t),r="function"===typeof a?a({present:n.isPresent}):s.Children.only(a),i=Zr(n.ref,function(e){var t,a;let s=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=s&&"isReactWarning"in s&&s.isReactWarning;if(n)return e.ref;if(s=null===(a=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===a?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(r));return"function"===typeof a||n.isPresent?s.cloneElement(r,{ref:i}):null};function Qo(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}$o.displayName="Presence";const Xo=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],Zo=["__scopeTabs","loop"],ec=["__scopeTabs","value","disabled"],tc=["__scopeTabs","value","forceMount","children"];var ac="Tabs",[sc,nc]=Kl(ac,[zo]),rc=zo(),[ic,lc]=sc(ac),oc=s.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,onValueChange:n,defaultValue:r,orientation:l="horizontal",dir:o,activationMode:c="automatic"}=e,d=i(e,Xo),m=Ao(o),[h,p]=Co({prop:s,onChange:n,defaultProp:null!==r&&void 0!==r?r:"",caller:ac});return(0,qr.jsx)(ic,{scope:a,baseId:xo(),value:h,onValueChange:p,orientation:l,dir:m,activationMode:c,children:(0,qr.jsx)(wo.div,u(u({dir:m,"data-orientation":l},d),{},{ref:t}))})});oc.displayName=ac;var cc="TabsList",dc=s.forwardRef((e,t)=>{const{__scopeTabs:a,loop:s=!0}=e,n=i(e,Zo),r=lc(cc,a),l=rc(a);return(0,qr.jsx)(Yo,u(u({asChild:!0},l),{},{orientation:r.orientation,dir:r.dir,loop:s,children:(0,qr.jsx)(wo.div,u(u({role:"tablist","aria-orientation":r.orientation},n),{},{ref:t}))}))});dc.displayName=cc;var uc="TabsTrigger",mc=s.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,disabled:n=!1}=e,r=i(e,ec),l=lc(uc,a),o=rc(a),c=xc(l.baseId,s),d=fc(l.baseId,s),m=s===l.value;return(0,qr.jsx)(Jo,u(u({asChild:!0},o),{},{focusable:!n,active:m,children:(0,qr.jsx)(wo.button,u(u({type:"button",role:"tab","aria-selected":m,"aria-controls":d,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c},r),{},{ref:t,onMouseDown:Vl(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(s)}),onKeyDown:Vl(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(s)}),onFocus:Vl(e.onFocus,()=>{const e="manual"!==l.activationMode;m||n||!e||l.onValueChange(s)})}))}))});mc.displayName=uc;var hc="TabsContent",pc=s.forwardRef((e,t)=>{const{__scopeTabs:a,value:n,forceMount:r,children:l}=e,o=i(e,tc),c=lc(hc,a),d=xc(c.baseId,n),m=fc(c.baseId,n),h=n===c.value,p=s.useRef(h);return s.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,qr.jsx)($o,{present:r||h,children:a=>{let{present:s}=a;return(0,qr.jsx)(wo.div,u(u({"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:m,tabIndex:0},o),{},{ref:t,style:u(u({},e.style),{},{animationDuration:p.current?"0s":void 0}),children:s&&l}))}})});function xc(e,t){return"".concat(e,"-trigger-").concat(t)}function fc(e,t){return"".concat(e,"-content-").concat(t)}pc.displayName=hc;var gc=dc,vc=mc,bc=pc;const yc=["className"],jc=["className"],Nc=["className"],wc=oc,Sc=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,yc);return(0,qr.jsx)(gc,u({ref:t,className:Ol("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a)},s))});Sc.displayName=gc.displayName;const _c=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,jc);return(0,qr.jsx)(vc,u({ref:t,className:Ol("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a)},s))});_c.displayName=vc.displayName;const kc=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Nc);return(0,qr.jsx)(bc,u({ref:t,className:Ol("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a)},s))});kc.displayName=bc.displayName;const Cc=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ec=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ac=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var Pc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Oc=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Mc=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:o="",children:c,iconNode:d}=e,m=i(e,Oc);return(0,s.createElement)("svg",u(u(u({ref:t},Pc),{},{width:n,height:n,stroke:a,strokeWidth:l?24*Number(r)/Number(n):r,className:Ac("lucide",o)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"}),m),[...d.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),Tc=["className"],Dc=(e,t)=>{const a=(0,s.forwardRef)((a,n)=>{let{className:r}=a,l=i(a,Tc);return(0,s.createElement)(Mc,u({ref:n,iconNode:t,className:Ac("lucide-".concat(Cc(Ec(e))),"lucide-".concat(e),r)},l))});return a.displayName=Ec(e),a},Ic=Dc("school",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Rc=Dc("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Lc=Dc("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Fc=Dc("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),zc=Dc("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Bc=Dc("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Uc=Dc("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Hc=Dc("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qc=Dc("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function Vc(){const{t:e}=js(),t=Se(),{login:a,setUser:n,setToken:r}=Kr(),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!0),[g,v]=(0,s.useState)("admin"),[b,y]=(0,s.useState)(0),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)({email:"",password:""}),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)({email:"",password:"",name:""}),[A,P]=(0,s.useState)({student_id:"",password:"",mobile:"",dob:""}),[O,M]=(0,s.useState)("id"),T=()=>{const e=b+1;y(e),e>=5&&(N(!0),y(0)),setTimeout(()=>y(0),3e3)};(0,s.useEffect)(()=>{D()},[]);const D=async()=>{try{const e=await Hr.get("".concat("","/api/auth/check-setup"));p(e.data.setup_required)}catch(e){console.error("Setup check failed")}finally{f(!1)}},I=async e=>{e.preventDefault(),c(""),l(!0);try{const e=(e=>{switch(e){case"teacher":case"admission_staff":case"clerk":case"staff":return"/teacher-dashboard";case"student":return"/student-dashboard";default:return"/dashboard"}})((await a(C.email,C.password)).role);t(e)}catch(r){var s,n;c((null===(s=r.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail)||"Login failed. Check credentials.")}finally{l(!1)}},R=e=>{E(t=>u(u({},t),{},{[e.target.name]:e.target.value}))},L=e=>{P(t=>u(u({},t),{},{[e.target.name]:e.target.value}))};return x?(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,qr.jsx)("div",{className:"spinner w-12 h-12"})}):(0,qr.jsxs)("div",{className:"min-h-screen flex","data-testid":"login-page",children:[(0,qr.jsxs)("div",{className:"hidden lg:flex lg:w-1/2 relative",children:[(0,qr.jsx)("img",{src:"https://images.unsplash.com/photo-1580582932707-520aed937b7b?crop=entropy&cs=srgb&fm=jpg&q=85&w=1920",alt:"Modern School",className:"absolute inset-0 w-full h-full object-cover"}),(0,qr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900/90 via-purple-900/80 to-indigo-900/90"}),(0,qr.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMiIvPjwvZz48L2c+PC9zdmc+')] opacity-30"}),(0,qr.jsxs)("div",{className:"relative z-10 flex flex-col justify-center p-12",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-8 cursor-pointer",onClick:T,children:[(0,qr.jsx)("div",{className:"w-14 h-14 bg-white/20 backdrop-blur rounded-2xl flex items-center justify-center shadow-lg",children:(0,qr.jsx)(Ic,{className:"w-8 h-8 text-white"})}),(0,qr.jsx)("h1",{className:"text-4xl font-bold text-white font-heading",children:"Schooltino"})]}),(0,qr.jsxs)("h2",{className:"text-5xl font-bold text-white mb-6 font-heading leading-tight",children:["Smart School",(0,qr.jsx)("br",{}),"Management System"]}),(0,qr.jsx)("p",{className:"text-slate-300 text-xl max-w-md mb-8",children:"AI + CCTV + Apps - Complete automation for modern schools."}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4 text-white/90",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-600/30 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Rc,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:"Schooltino Admin"}),(0,qr.jsx)("p",{className:"text-sm text-slate-400",children:"For Directors & Principals"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 text-white/90",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-600/30 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:"TeachTino"}),(0,qr.jsx)("p",{className:"text-sm text-slate-400",children:"For Teachers & Staff"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 text-white/90",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-600/30 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Fc,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:"StudyTino"}),(0,qr.jsx)("p",{className:"text-sm text-slate-400",children:"For Students & Parents"})]})]})]})]})]}),(0,qr.jsx)("div",{className:"flex-1 flex items-center justify-center p-6 bg-gradient-to-b from-slate-50 to-white",children:(0,qr.jsxs)("div",{className:"w-full max-w-md",children:[(0,qr.jsxs)("div",{className:"lg:hidden flex items-center gap-3 mb-8 justify-center cursor-pointer",onClick:T,children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ic,{className:"w-7 h-7 text-white"})}),(0,qr.jsx)("h1",{className:"text-2xl font-bold font-heading",children:"Schooltino"})]}),j&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-2xl w-full max-w-sm shadow-2xl border border-amber-500/30",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-6 justify-center",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(zc,{className:"w-6 h-6 text-white"})}),(0,qr.jsx)("h2",{className:"text-xl font-bold text-white",children:"Platform Owner"})]}),(0,qr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),k(!0),c("");try{const e=await Hr.post("".concat("","/api/owner-console-x7k9m2/login"),w);localStorage.setItem("ownerToken",e.data.access_token),t("/owner-x7k9m2")}catch(a){c("Invalid credentials")}finally{k(!1)}},className:"space-y-4",children:[(0,qr.jsx)(Rl,{type:"email",placeholder:"Owner Email",value:w.email,onChange:e=>S(u(u({},w),{},{email:e.target.value})),className:"bg-white/10 border-white/20 text-white placeholder:text-white/50"}),(0,qr.jsx)(Rl,{type:"password",placeholder:"Password",value:w.password,onChange:e=>S(u(u({},w),{},{password:e.target.value})),className:"bg-white/10 border-white/20 text-white placeholder:text-white/50"}),o&&(0,qr.jsx)("p",{className:"text-red-400 text-sm text-center",children:o}),(0,qr.jsx)(Dl,{type:"submit",className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600",disabled:_,children:_?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):"Access Control Panel"}),(0,qr.jsx)(Dl,{type:"button",variant:"ghost",className:"w-full text-white/60 hover:text-white",onClick:()=>{N(!1),c("")},children:"Cancel"})]})]})}),h?(0,qr.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100",children:[(0,qr.jsxs)("div",{className:"text-center mb-6",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,qr.jsx)(Rc,{className:"w-8 h-8 text-indigo-600"})}),(0,qr.jsx)("h2",{className:"text-2xl font-bold font-heading text-slate-900",children:"Initial Setup"}),(0,qr.jsx)("p",{className:"text-slate-500 mt-2",children:"Create your Director account to get started"})]}),o&&(0,qr.jsx)("div",{className:"mb-6 p-4 bg-rose-50 border border-rose-200 rounded-xl text-rose-700 text-sm","data-testid":"auth-error",children:o}),(0,qr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(""),l(!0);try{const e=await Hr.post("".concat("","/api/auth/setup-director"),{email:C.email,password:C.password,name:C.name,role:"director"});localStorage.setItem("token",e.data.access_token),localStorage.setItem("user",JSON.stringify(e.data.user)),r(e.data.access_token),n(e.data.user),Hr.defaults.headers.common.Authorization="Bearer ".concat(e.data.access_token),t("/dashboard")}catch(i){var a,s;c((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Setup failed")}finally{l(!1)}},className:"space-y-5",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Full Name"}),(0,qr.jsx)(Rl,{name:"name",value:C.name,onChange:R,placeholder:"Director Name",required:!0,className:"h-12","data-testid":"setup-name"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Email"}),(0,qr.jsx)(Rl,{name:"email",type:"email",value:C.email,onChange:R,placeholder:"director@school.com",required:!0,className:"h-12","data-testid":"setup-email"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{name:"password",type:d?"text":"password",value:C.password,onChange:R,placeholder:"Create a strong password",required:!0,className:"h-12 pr-10","data-testid":"setup-password"}),(0,qr.jsx)("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:d?(0,qr.jsx)(Uc,{className:"w-5 h-5"}):(0,qr.jsx)(Hc,{className:"w-5 h-5"})})]})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full h-12 btn-primary",disabled:i,"data-testid":"setup-btn",children:[i?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin mr-2"}):null,"Create Director Account"]})]}),(0,qr.jsx)("div",{className:"mt-6 p-4 bg-amber-50 rounded-xl border border-amber-200",children:(0,qr.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,qr.jsx)("strong",{children:"Note:"})," This setup can only be done once. You'll use this account to create all other staff accounts."]})})]}):(0,qr.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100",children:[(0,qr.jsxs)("div",{className:"text-center mb-6",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold font-heading text-slate-900",children:"Welcome Back"}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Select your portal and login"})]}),(0,qr.jsxs)(wc,{value:g,onValueChange:v,className:"space-y-6",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-3 h-auto p-1 bg-slate-100",children:[(0,qr.jsxs)(_c,{value:"admin",className:"py-3 data-[state=active]:bg-indigo-600 data-[state=active]:text-white",children:[(0,qr.jsx)(Rc,{className:"w-4 h-4 mr-1.5"}),"Admin"]}),(0,qr.jsxs)(_c,{value:"teacher",className:"py-3 data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4 mr-1.5"}),"Teacher"]}),(0,qr.jsxs)(_c,{value:"student",className:"py-3 data-[state=active]:bg-amber-600 data-[state=active]:text-white",children:[(0,qr.jsx)(Fc,{className:"w-4 h-4 mr-1.5"}),"Student"]})]}),o&&(0,qr.jsx)("div",{className:"p-4 bg-rose-50 border border-rose-200 rounded-xl text-rose-700 text-sm","data-testid":"auth-error",children:o}),(0,qr.jsx)(kc,{value:"admin",className:"space-y-5",children:(0,qr.jsxs)("form",{onSubmit:I,className:"space-y-5",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Email"}),(0,qr.jsx)(Rl,{name:"email",type:"email",value:C.email,onChange:R,placeholder:"admin@school.com",required:!0,className:"h-12","data-testid":"admin-email"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{name:"password",type:d?"text":"password",value:C.password,onChange:R,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"h-12 pr-10","data-testid":"admin-password"}),(0,qr.jsx)("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:d?(0,qr.jsx)(Uc,{className:"w-5 h-5"}):(0,qr.jsx)(Hc,{className:"w-5 h-5"})})]})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full h-12 bg-indigo-600 hover:bg-indigo-700",disabled:i,"data-testid":"admin-login-btn",children:[i?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin mr-2"}):null,"Login to Schooltino",(0,qr.jsx)(qc,{className:"w-5 h-5 ml-2"})]})]})}),(0,qr.jsx)(kc,{value:"teacher",className:"space-y-5",children:(0,qr.jsxs)("form",{onSubmit:I,className:"space-y-5",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Email"}),(0,qr.jsx)(Rl,{name:"email",type:"email",value:C.email,onChange:R,placeholder:"teacher@school.com",required:!0,className:"h-12","data-testid":"teacher-email"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{name:"password",type:d?"text":"password",value:C.password,onChange:R,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"h-12 pr-10","data-testid":"teacher-password"}),(0,qr.jsx)("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:d?(0,qr.jsx)(Uc,{className:"w-5 h-5"}):(0,qr.jsx)(Hc,{className:"w-5 h-5"})})]})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full h-12 bg-emerald-600 hover:bg-emerald-700",disabled:i,"data-testid":"teacher-login-btn",children:[i?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin mr-2"}):null,"Login to TeachTino",(0,qr.jsx)(qc,{className:"w-5 h-5 ml-2"})]})]})}),(0,qr.jsxs)(kc,{value:"student",className:"space-y-5",children:[(0,qr.jsxs)("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-lg",children:[(0,qr.jsx)("button",{type:"button",onClick:()=>M("id"),className:"flex-1 py-2 text-sm font-medium rounded-md transition-all ".concat("id"===O?"bg-white shadow text-amber-700":"text-slate-600"),children:"Student ID + Password"}),(0,qr.jsx)("button",{type:"button",onClick:()=>M("mobile"),className:"flex-1 py-2 text-sm font-medium rounded-md transition-all ".concat("mobile"===O?"bg-white shadow text-amber-700":"text-slate-600"),children:"Mobile + DOB"})]}),(0,qr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(""),l(!0);try{let e={};e="id"===O?{student_id:A.student_id,password:A.password}:{mobile:A.mobile,dob:A.dob};const a=await Hr.post("".concat("","/api/students/login"),null,{params:e});localStorage.setItem("token",a.data.access_token),localStorage.setItem("user",JSON.stringify(u(u({},a.data.student),{},{role:"student"}))),r(a.data.access_token),n(u(u({},a.data.student),{},{role:"student"})),Hr.defaults.headers.common.Authorization="Bearer ".concat(a.data.access_token),t("/student-dashboard")}catch(i){var a,s;c((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Login failed")}finally{l(!1)}},className:"space-y-5",children:["id"===O?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Student ID"}),(0,qr.jsx)(Rl,{name:"student_id",value:A.student_id,onChange:L,placeholder:"STD-2025-XXXXXX",required:!0,className:"h-12 font-mono","data-testid":"student-id"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{name:"password",type:d?"text":"password",value:A.password,onChange:L,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"h-12 pr-10","data-testid":"student-password"}),(0,qr.jsx)("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:d?(0,qr.jsx)(Uc,{className:"w-5 h-5"}):(0,qr.jsx)(Hc,{className:"w-5 h-5"})})]})]})]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Parent Mobile Number"}),(0,qr.jsx)(Rl,{name:"mobile",value:A.mobile,onChange:L,placeholder:"7879967616",required:!0,className:"h-12","data-testid":"student-mobile"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Date of Birth"}),(0,qr.jsx)(Rl,{name:"dob",type:"date",value:A.dob,onChange:L,required:!0,className:"h-12","data-testid":"student-dob"})]})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full h-12 bg-amber-600 hover:bg-amber-700",disabled:i,"data-testid":"student-login-btn",children:[i?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin mr-2"}):null,"Login to StudyTino",(0,qr.jsx)(qc,{className:"w-5 h-5 ml-2"})]})]})]})]}),(0,qr.jsx)("div",{className:"mt-6 p-4 bg-slate-50 rounded-xl border border-slate-200",children:(0,qr.jsxs)("p",{className:"text-xs text-slate-600",children:["admin"===g&&"Director, Principal, Vice Principal - Login here","teacher"===g&&"Teachers & Staff - Get credentials from your school admin","student"===g&&"Students - Use credentials provided during admission"]})})]})]})})]})}const Wc=["className"],Gc=["className"],Kc=["className"],Yc=["className"],Jc=["className"],$c=["className"],Qc=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Wc);return(0,qr.jsx)("div",u({ref:t,className:Ol("rounded-xl border bg-card text-card-foreground shadow",a)},s))});Qc.displayName="Card";const Xc=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Gc);return(0,qr.jsx)("div",u({ref:t,className:Ol("flex flex-col space-y-1.5 p-6",a)},s))});Xc.displayName="CardHeader";const Zc=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Kc);return(0,qr.jsx)("div",u({ref:t,className:Ol("font-semibold leading-none tracking-tight",a)},s))});Zc.displayName="CardTitle";const ed=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Yc);return(0,qr.jsx)("div",u({ref:t,className:Ol("text-sm text-muted-foreground",a)},s))});ed.displayName="CardDescription";const td=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Jc);return(0,qr.jsx)("div",u({ref:t,className:Ol("p-6 pt-0",a)},s))});td.displayName="CardContent";s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,$c);return(0,qr.jsx)("div",u({ref:t,className:Ol("flex items-center p-6 pt-0",a)},s))}).displayName="CardFooter";const ad=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var sd,nd="dismissableLayer.update",rd="dismissableLayer.pointerDownOutside",id="dismissableLayer.focusOutside",ld=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),od=s.forwardRef((e,t)=>{var a;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:l,onFocusOutside:o,onInteractOutside:c,onDismiss:d}=e,m=i(e,ad),h=s.useContext(ld),[p,x]=s.useState(null),f=null!==(a=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==a?a:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,g]=s.useState({}),v=Zr(t,e=>x(e)),b=Array.from(h.layers),[y]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),j=b.indexOf(y),N=p?b.indexOf(p):-1,w=h.layersWithOutsidePointerEventsDisabled.size>0,S=N>=j,_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const a=_o(e),n=s.useRef(!1),r=s.useRef(()=>{});return s.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let s=function(){ud(rd,a,n,{discrete:!0})};const n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=s,t.addEventListener("click",r.current,{once:!0})):s()}else t.removeEventListener("click",r.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}},[t,a]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,a=[...h.branches].some(e=>e.contains(t));S&&!a&&(null===l||void 0===l||l(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())},f),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const a=_o(e),n=s.useRef(!1);return s.useEffect(()=>{const e=e=>{if(e.target&&!n.current){ud(id,a,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,a]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...h.branches].some(e=>e.contains(t))||(null===o||void 0===o||o(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())},f);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const a=_o(e);s.useEffect(()=>{const e=e=>{"Escape"===e.key&&a(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[a,t])}(e=>{N===h.layers.size-1&&(null===r||void 0===r||r(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},f),s.useEffect(()=>{if(p)return n&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(sd=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),dd(),()=>{n&&1===h.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=sd)}},[p,f,n,h]),s.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),dd())},[p,h]),s.useEffect(()=>{const e=()=>g({});return document.addEventListener(nd,e),()=>document.removeEventListener(nd,e)},[]),(0,qr.jsx)(wo.div,u(u({},m),{},{ref:v,style:u({pointerEvents:w?S?"auto":"none":void 0},e.style),onFocusCapture:Vl(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Vl(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Vl(e.onPointerDownCapture,_.onPointerDownCapture)}))});od.displayName="DismissableLayer";var cd=s.forwardRef((e,t)=>{const a=s.useContext(ld),n=s.useRef(null),r=Zr(t,n);return s.useEffect(()=>{const e=n.current;if(e)return a.branches.add(e),()=>{a.branches.delete(e)}},[a.branches]),(0,qr.jsx)(wo.div,u(u({},e),{},{ref:r}))});function dd(){const e=new CustomEvent(nd);document.dispatchEvent(e)}function ud(e,t,a,s){let{discrete:n}=s;const r=a.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&r.addEventListener(e,t,{once:!0}),n?So(r,i):r.dispatchEvent(i)}cd.displayName="DismissableLayerBranch";const md=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var hd="focusScope.autoFocusOnMount",pd="focusScope.autoFocusOnUnmount",xd={bubbles:!1,cancelable:!0},fd=s.forwardRef((e,t)=>{const{loop:a=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:l}=e,o=i(e,md),[c,d]=s.useState(null),m=_o(r),h=_o(l),p=s.useRef(null),x=Zr(t,e=>d(e)),f=s.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;s.useEffect(()=>{if(n){let e=function(e){if(f.paused||!c)return;const t=e.target;c.contains(t)?p.current=t:yd(p.current,{select:!0})},t=function(e){if(f.paused||!c)return;const t=e.relatedTarget;null!==t&&(c.contains(t)||yd(p.current,{select:!0}))},a=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&yd(c)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const s=new MutationObserver(a);return c&&s.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),s.disconnect()}}},[n,c,f.paused]),s.useEffect(()=>{if(c){jd.add(f);const t=document.activeElement;if(!c.contains(t)){const a=new CustomEvent(hd,xd);c.addEventListener(hd,m),c.dispatchEvent(a),a.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=document.activeElement;for(const s of e)if(yd(s,{select:t}),document.activeElement!==a)return}((e=gd(c),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&yd(c))}return()=>{c.removeEventListener(hd,m),setTimeout(()=>{const e=new CustomEvent(pd,xd);c.addEventListener(pd,h),c.dispatchEvent(e),e.defaultPrevented||yd(null!==t&&void 0!==t?t:document.body,{select:!0}),c.removeEventListener(pd,h),jd.remove(f)},0)}}var e},[c,m,h,f]);const g=s.useCallback(e=>{if(!a&&!n)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[n,r]=function(e){const t=gd(e),a=vd(t,e),s=vd(t.reverse(),e);return[a,s]}(t);n&&r?e.shiftKey||s!==r?e.shiftKey&&s===n&&(e.preventDefault(),a&&yd(r,{select:!0})):(e.preventDefault(),a&&yd(n,{select:!0})):s===t&&e.preventDefault()}},[a,n,f.paused]);return(0,qr.jsx)(wo.div,u(u({tabIndex:-1},o),{},{ref:x,onKeyDown:g}))});function gd(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function vd(e,t){for(const a of e)if(!bd(a,{upTo:t}))return a}function bd(e,t){let{upTo:a}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==a&&e===a)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function yd(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}fd.displayName="FocusScope";var jd=function(){let e=[];return{add(t){const a=e[0];t!==a&&(null===a||void 0===a||a.pause()),e=Nd(e,t),e.unshift(t)},remove(t){var a;e=Nd(e,t),null===(a=e[0])||void 0===a||a.resume()}}}();function Nd(e,t){const a=[...e],s=a.indexOf(t);return-1!==s&&a.splice(s,1),a}const wd=["container"];var Sd=s.forwardRef((e,t)=>{var a;const{container:n}=e,r=i(e,wd),[l,o]=s.useState(!1);mo(()=>o(!0),[]);const c=n||l&&(null===globalThis||void 0===globalThis||null===(a=globalThis.document)||void 0===a?void 0:a.body);return c?Ft.createPortal((0,qr.jsx)(wo.div,u(u({},r),{},{ref:t})),c):null});Sd.displayName="Portal";var _d=0;function kd(){s.useEffect(()=>{var e,t;const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=a[0])&&void 0!==e?e:Cd()),document.body.insertAdjacentElement("beforeend",null!==(t=a[1])&&void 0!==t?t:Cd()),_d++,()=>{1===_d&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_d--}},[])}function Cd(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ed=function(){return Ed=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Ed.apply(this,arguments)};function Ad(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}Object.create;function Pd(e,t,a){if(a||2===arguments.length)for(var s,n=0,r=t.length;n<r;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Od="right-scroll-bar-position",Md="width-before-scroll-bar";function Td(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var Dd="undefined"!==typeof window?s.useLayoutEffect:s.useEffect,Id=new WeakMap;function Rd(e,t){var a=function(e,t){var a=(0,s.useState)(function(){return{value:e,callback:t,facade:{get current(){return a.value},set current(e){var t=a.value;t!==e&&(a.value=e,a.callback(e,t))}}}})[0];return a.callback=t,a.facade}(t||null,function(t){return e.forEach(function(e){return Td(e,t)})});return Dd(function(){var t=Id.get(a);if(t){var s=new Set(t),n=new Set(e),r=a.current;s.forEach(function(e){n.has(e)||Td(e,null)}),n.forEach(function(e){s.has(e)||Td(e,r)})}Id.set(a,e)},[e]),a}function Ld(e){return e}function Fd(e,t){void 0===t&&(t=Ld);var a=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(e){var n=t(e,s);return a.push(n),function(){a=a.filter(function(e){return e!==n})}},assignSyncMedium:function(e){for(s=!0;a.length;){var t=a;a=[],t.forEach(e)}a={push:function(t){return e(t)},filter:function(){return a}}},assignMedium:function(e){s=!0;var t=[];if(a.length){var n=a;a=[],n.forEach(e),t=a}var r=function(){var a=t;t=[],a.forEach(e)},i=function(){return Promise.resolve().then(r)};i(),a={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),a}}}};return n}var zd=function(e){void 0===e&&(e={});var t=Fd(null);return t.options=Ed({async:!0,ssr:!1},e),t}(),Bd=function(){},Ud=s.forwardRef(function(e,t){var a=s.useRef(null),n=s.useState({onScrollCapture:Bd,onWheelCapture:Bd,onTouchMoveCapture:Bd}),r=n[0],i=n[1],l=e.forwardProps,o=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,h=e.sideCar,p=e.noRelative,x=e.noIsolation,f=e.inert,g=e.allowPinchZoom,v=e.as,b=void 0===v?"div":v,y=e.gapMode,j=Ad(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,w=Rd([a,t]),S=Ed(Ed({},j),r);return s.createElement(s.Fragment,null,u&&s.createElement(N,{sideCar:zd,removeScrollBar:d,shards:m,noRelative:p,noIsolation:x,inert:f,setCallbacks:i,allowPinchZoom:!!g,lockRef:a,gapMode:y}),l?s.cloneElement(s.Children.only(o),Ed(Ed({},S),{ref:w})):s.createElement(b,Ed({},S,{className:c,ref:w}),o))});Ud.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Ud.classNames={fullWidth:Md,zeroRight:Od};var Hd,qd=function(e){var t=e.sideCar,a=Ad(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return s.createElement(n,Ed({},a))};qd.isSideCarExport=!0;function Vd(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Hd||a.nc;return t&&e.setAttribute("nonce",t),e}var Wd=function(){var e=0,t=null;return{add:function(a){var s,n;0==e&&(t=Vd())&&(n=a,(s=t).styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Gd=function(){var e=function(){var e=Wd();return function(t,a){s.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}}();return function(t){var a=t.styles,s=t.dynamic;return e(a,s),null}},Kd={left:0,top:0,right:0,gap:0},Yd=function(e){return parseInt(e||"",10)||0},Jd=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Kd;var t=function(e){var t=window.getComputedStyle(document.body),a=t["padding"===e?"paddingLeft":"marginLeft"],s=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[Yd(a),Yd(s),Yd(n)]}(e),a=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-a+t[2]-t[0])}},$d=Gd(),Qd="data-scroll-locked",Xd=function(e,t,a,s){var n=e.left,r=e.top,i=e.right,l=e.gap;return void 0===a&&(a="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(s,";\n   padding-right: ").concat(l,"px ").concat(s,";\n  }\n  body[").concat(Qd,"] {\n    overflow: hidden ").concat(s,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(s,";"),"margin"===a&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(r,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(l,"px ").concat(s,";\n    "),"padding"===a&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Od," {\n    right: ").concat(l,"px ").concat(s,";\n  }\n  \n  .").concat(Md," {\n    margin-right: ").concat(l,"px ").concat(s,";\n  }\n  \n  .").concat(Od," .").concat(Od," {\n    right: 0 ").concat(s,";\n  }\n  \n  .").concat(Md," .").concat(Md," {\n    margin-right: 0 ").concat(s,";\n  }\n  \n  body[").concat(Qd,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(l,"px;\n  }\n")},Zd=function(){var e=parseInt(document.body.getAttribute(Qd)||"0",10);return isFinite(e)?e:0},eu=function(e){var t=e.noRelative,a=e.noImportant,n=e.gapMode,r=void 0===n?"margin":n;s.useEffect(function(){return document.body.setAttribute(Qd,(Zd()+1).toString()),function(){var e=Zd()-1;e<=0?document.body.removeAttribute(Qd):document.body.setAttribute(Qd,e.toString())}},[]);var i=s.useMemo(function(){return Jd(r)},[r]);return s.createElement($d,{styles:Xd(i,!t,r,a?"":"!important")})},tu=!1;if("undefined"!==typeof window)try{var au=Object.defineProperty({},"passive",{get:function(){return tu=!0,!0}});window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch($1){tu=!1}var su=!!tu&&{passive:!1},nu=function(e,t){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return"hidden"!==a[t]&&!(a.overflowY===a.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===a[t])},ru=function(e,t){var a=t.ownerDocument,s=t;do{if("undefined"!==typeof ShadowRoot&&s instanceof ShadowRoot&&(s=s.host),iu(e,s)){var n=lu(e,s);if(n[1]>n[2])return!0}s=s.parentNode}while(s&&s!==a.body);return!1},iu=function(e,t){return"v"===e?function(e){return nu(e,"overflowY")}(t):function(e){return nu(e,"overflowX")}(t)},lu=function(e,t){return"v"===e?[(a=t).scrollTop,a.scrollHeight,a.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var a},ou=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},cu=function(e){return[e.deltaX,e.deltaY]},du=function(e){return e&&"current"in e?e.current:e},uu=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},mu=0,hu=[];function pu(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xu=(fu=function(e){var t=s.useRef([]),a=s.useRef([0,0]),n=s.useRef(),r=s.useState(mu++)[0],i=s.useState(Gd)[0],l=s.useRef(e);s.useEffect(function(){l.current=e},[e]),s.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=Pd([e.lockRef.current],(e.shards||[]).map(du),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var o=s.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!l.current.allowPinchZoom;var s,r=ou(e),i=a.current,o="deltaX"in e?e.deltaX:i[0]-r[0],c="deltaY"in e?e.deltaY:i[1]-r[1],d=e.target,u=Math.abs(o)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=window.getSelection(),h=m&&m.anchorNode;if(h&&(h===d||h.contains(d)))return!1;var p=ru(u,d);if(!p)return!0;if(p?s=u:(s="v"===u?"h":"v",p=ru(u,d)),!p)return!1;if(!n.current&&"changedTouches"in e&&(o||c)&&(n.current=s),!s)return!0;var x=n.current||s;return function(e,t,a,s,n){var r=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=r*s,l=a.target,o=t.contains(l),c=!1,d=i>0,u=0,m=0;do{if(!l)break;var h=lu(e,l),p=h[0],x=h[1]-h[2]-r*p;(p||x)&&iu(e,l)&&(u+=x,m+=p);var f=l.parentNode;l=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!o&&l!==document.body||o&&(t.contains(l)||t===l));return(d&&(n&&Math.abs(u)<1||!n&&i>u)||!d&&(n&&Math.abs(m)<1||!n&&-i>m))&&(c=!0),c}(x,t,e,"h"===x?o:c,!0)},[]),c=s.useCallback(function(e){var a=e;if(hu.length&&hu[hu.length-1]===i){var s="deltaY"in a?cu(a):ou(a),n=t.current.filter(function(e){return e.name===a.type&&(e.target===a.target||a.target===e.shadowParent)&&(t=e.delta,n=s,t[0]===n[0]&&t[1]===n[1]);var t,n})[0];if(n&&n.should)a.cancelable&&a.preventDefault();else if(!n){var r=(l.current.shards||[]).map(du).filter(Boolean).filter(function(e){return e.contains(a.target)});(r.length>0?o(a,r[0]):!l.current.noIsolation)&&a.cancelable&&a.preventDefault()}}},[]),d=s.useCallback(function(e,a,s,n){var r={name:e,delta:a,target:s,should:n,shadowParent:pu(s)};t.current.push(r),setTimeout(function(){t.current=t.current.filter(function(e){return e!==r})},1)},[]),u=s.useCallback(function(e){a.current=ou(e),n.current=void 0},[]),m=s.useCallback(function(t){d(t.type,cu(t),t.target,o(t,e.lockRef.current))},[]),h=s.useCallback(function(t){d(t.type,ou(t),t.target,o(t,e.lockRef.current))},[]);s.useEffect(function(){return hu.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,su),document.addEventListener("touchmove",c,su),document.addEventListener("touchstart",u,su),function(){hu=hu.filter(function(e){return e!==i}),document.removeEventListener("wheel",c,su),document.removeEventListener("touchmove",c,su),document.removeEventListener("touchstart",u,su)}},[]);var p=e.removeScrollBar,x=e.inert;return s.createElement(s.Fragment,null,x?s.createElement(i,{styles:uu(r)}):null,p?s.createElement(eu,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},zd.useMedium(fu),qd);var fu,gu=s.forwardRef(function(e,t){return s.createElement(Ud,Ed({},e,{ref:t,sideCar:xu}))});gu.classNames=Ud.classNames;const vu=gu;var bu=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},yu=new WeakMap,ju=new WeakMap,Nu={},wu=0,Su=function(e){return e&&(e.host||Su(e.parentNode))},_u=function(e,t,a,s){var n=function(e,t){return t.map(function(t){if(e.contains(t))return t;var a=Su(t);return a&&e.contains(a)?a:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Nu[a]||(Nu[a]=new WeakMap);var r=Nu[a],i=[],l=new Set,o=new Set(n),c=function(e){e&&!l.has(e)&&(l.add(e),c(e.parentNode))};n.forEach(c);var d=function(e){e&&!o.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(l.has(e))d(e);else try{var t=e.getAttribute(s),n=null!==t&&"false"!==t,o=(yu.get(e)||0)+1,c=(r.get(e)||0)+1;yu.set(e,o),r.set(e,c),i.push(e),1===o&&n&&ju.set(e,!0),1===c&&e.setAttribute(a,"true"),n||e.setAttribute(s,"true")}catch(J1){console.error("aria-hidden: cannot operate on ",e,J1)}})};return d(t),l.clear(),wu++,function(){i.forEach(function(e){var t=yu.get(e)-1,n=r.get(e)-1;yu.set(e,t),r.set(e,n),t||(ju.has(e)||e.removeAttribute(s),ju.delete(e)),n||e.removeAttribute(a)}),--wu||(yu=new WeakMap,yu=new WeakMap,ju=new WeakMap,Nu={})}},ku=function(e,t,a){void 0===a&&(a="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),n=t||bu(e);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),_u(s,n,a,"aria-hidden")):function(){return null}};const Cu=["children"],Eu=["children"];function Au(e){const t=Pu(e),a=s.forwardRef((e,a)=>{const{children:n}=e,r=i(e,Cu),l=s.Children.toArray(n),o=l.find(Mu);if(o){const e=o.props.children,n=l.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null}))}return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:n}))});return a.displayName="".concat(e,".Slot"),a}function Pu(e){const t=s.forwardRef((e,t)=>{const{children:a}=e,n=i(e,Eu);if(s.isValidElement(a)){const e=function(e){var t,a;let s=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=s&&"isReactWarning"in s&&s.isReactWarning;if(n)return e.ref;if(s=null===(a=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===a?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a),r=function(e,t){const a=u({},t);for(const s in t){const n=e[s],r=t[s];/^on[A-Z]/.test(s)?n&&r?a[s]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(a[s]=n):"style"===s?a[s]=u(u({},n),r):"className"===s&&(a[s]=[n,r].filter(Boolean).join(" "))}return u(u({},e),a)}(n,a.props);return a.type!==s.Fragment&&(r.ref=t?Xr(t,e):e),s.cloneElement(a,r)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var Ou=Symbol("radix.slottable");function Mu(e){return s.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Ou}const Tu=["__scopeDialog"],Du=["forceMount"],Iu=["__scopeDialog"],Ru=["forceMount"],Lu=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],Fu=["__scopeDialog"],zu=["__scopeDialog"],Bu=["__scopeDialog"];var Uu="Dialog",[Hu,qu]=Kl(Uu),[Vu,Wu]=Hu(Uu),Gu=e=>{const{__scopeDialog:t,children:a,open:n,defaultOpen:r,onOpenChange:i,modal:l=!0}=e,o=s.useRef(null),c=s.useRef(null),[d,u]=Co({prop:n,defaultProp:null!==r&&void 0!==r&&r,onChange:i,caller:Uu});return(0,qr.jsx)(Vu,{scope:t,triggerRef:o,contentRef:c,contentId:xo(),titleId:xo(),descriptionId:xo(),open:d,onOpenChange:u,onOpenToggle:s.useCallback(()=>u(e=>!e),[u]),modal:l,children:a})};Gu.displayName=Uu;var Ku="DialogTrigger",Yu=s.forwardRef((e,t)=>{const{__scopeDialog:a}=e,s=i(e,Tu),n=Wu(Ku,a),r=Zr(t,n.triggerRef);return(0,qr.jsx)(wo.button,u(u({type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":pm(n.open)},s),{},{ref:r,onClick:Vl(e.onClick,n.onOpenToggle)}))});Yu.displayName=Ku;var Ju="DialogPortal",[$u,Qu]=Hu(Ju,{forceMount:void 0}),Xu=e=>{const{__scopeDialog:t,forceMount:a,children:n,container:r}=e,i=Wu(Ju,t);return(0,qr.jsx)($u,{scope:t,forceMount:a,children:s.Children.map(n,e=>(0,qr.jsx)($o,{present:a||i.open,children:(0,qr.jsx)(Sd,{asChild:!0,container:r,children:e})}))})};Xu.displayName=Ju;var Zu="DialogOverlay",em=s.forwardRef((e,t)=>{const a=Qu(Zu,e.__scopeDialog),{forceMount:s=a.forceMount}=e,n=i(e,Du),r=Wu(Zu,e.__scopeDialog);return r.modal?(0,qr.jsx)($o,{present:s||r.open,children:(0,qr.jsx)(am,u(u({},n),{},{ref:t}))}):null});em.displayName=Zu;var tm=Au("DialogOverlay.RemoveScroll"),am=s.forwardRef((e,t)=>{const{__scopeDialog:a}=e,s=i(e,Iu),n=Wu(Zu,a);return(0,qr.jsx)(vu,{as:tm,allowPinchZoom:!0,shards:[n.contentRef],children:(0,qr.jsx)(wo.div,u(u({"data-state":pm(n.open)},s),{},{ref:t,style:u({pointerEvents:"auto"},s.style)}))})}),sm="DialogContent",nm=s.forwardRef((e,t)=>{const a=Qu(sm,e.__scopeDialog),{forceMount:s=a.forceMount}=e,n=i(e,Ru),r=Wu(sm,e.__scopeDialog);return(0,qr.jsx)($o,{present:s||r.open,children:r.modal?(0,qr.jsx)(rm,u(u({},n),{},{ref:t})):(0,qr.jsx)(im,u(u({},n),{},{ref:t}))})});nm.displayName=sm;var rm=s.forwardRef((e,t)=>{const a=Wu(sm,e.__scopeDialog),n=s.useRef(null),r=Zr(t,a.contentRef,n);return s.useEffect(()=>{const e=n.current;if(e)return ku(e)},[]),(0,qr.jsx)(lm,u(u({},e),{},{ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vl(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=a.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Vl(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:Vl(e.onFocusOutside,e=>e.preventDefault())}))}),im=s.forwardRef((e,t)=>{const a=Wu(sm,e.__scopeDialog),n=s.useRef(!1),r=s.useRef(!1);return(0,qr.jsx)(lm,u(u({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,i;(null===(s=e.onCloseAutoFocus)||void 0===s||s.call(e,t),t.defaultPrevented)||(n.current||null===(i=a.triggerRef.current)||void 0===i||i.focus(),t.preventDefault());n.current=!1,r.current=!1},onInteractOutside:t=>{var s,i;null===(s=e.onInteractOutside)||void 0===s||s.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const l=t.target;(null===(i=a.triggerRef.current)||void 0===i?void 0:i.contains(l))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}}))}),lm=s.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:l}=e,o=i(e,Lu),c=Wu(sm,a),d=s.useRef(null),m=Zr(t,d);return kd(),(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(fd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:l,children:(0,qr.jsx)(od,u(u({role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":pm(c.open)},o),{},{ref:m,onDismiss:()=>c.onOpenChange(!1)}))}),(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(vm,{titleId:c.titleId}),(0,qr.jsx)(bm,{contentRef:d,descriptionId:c.descriptionId})]})]})}),om="DialogTitle",cm=s.forwardRef((e,t)=>{const{__scopeDialog:a}=e,s=i(e,Fu),n=Wu(om,a);return(0,qr.jsx)(wo.h2,u(u({id:n.titleId},s),{},{ref:t}))});cm.displayName=om;var dm="DialogDescription",um=s.forwardRef((e,t)=>{const{__scopeDialog:a}=e,s=i(e,zu),n=Wu(dm,a);return(0,qr.jsx)(wo.p,u(u({id:n.descriptionId},s),{},{ref:t}))});um.displayName=dm;var mm="DialogClose",hm=s.forwardRef((e,t)=>{const{__scopeDialog:a}=e,s=i(e,Bu),n=Wu(mm,a);return(0,qr.jsx)(wo.button,u(u({type:"button"},s),{},{ref:t,onClick:Vl(e.onClick,()=>n.onOpenChange(!1))}))});function pm(e){return e?"open":"closed"}hm.displayName=mm;var xm="DialogTitleWarning",[fm,gm]=function(e,t){const a=s.createContext(t),n=e=>{const{children:t}=e,n=i(e,Wl),r=s.useMemo(()=>n,Object.values(n));return(0,qr.jsx)(a.Provider,{value:r,children:t})};return n.displayName=e+"Provider",[n,function(n){const r=s.useContext(a);if(r)return r;if(void 0!==t)return t;throw new Error("`".concat(n,"` must be used within `").concat(e,"`"))}]}(xm,{contentName:sm,titleName:om,docsSlug:"dialog"}),vm=e=>{let{titleId:t}=e;const a=gm(xm),n="`".concat(a.contentName,"` requires a `").concat(a.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(a.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(a.docsSlug);return s.useEffect(()=>{if(t){document.getElementById(t)||console.error(n)}},[n,t]),null},bm=e=>{let{contentRef:t,descriptionId:a}=e;const n=gm("DialogDescriptionWarning"),r="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(n.contentName,"}.");return s.useEffect(()=>{var e;const s=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(a&&s){document.getElementById(a)||console.warn(r)}},[r,t,a]),null},ym=Gu,jm=Yu,Nm=Xu,wm=em,Sm=nm,_m=cm,km=um,Cm=hm;const Em=Dc("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Am=["className"],Pm=["className","children"],Om=["className"],Mm=["className"],Tm=["className"],Dm=["className"],Im=ym,Rm=jm,Lm=Nm,Fm=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Am);return(0,qr.jsx)(wm,u({ref:t,className:Ol("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},s))});Fm.displayName=wm.displayName;const zm=s.forwardRef((e,t)=>{let{className:a,children:s}=e,n=i(e,Pm);return(0,qr.jsxs)(Lm,{children:[(0,qr.jsx)(Fm,{}),(0,qr.jsxs)(Sm,u(u({ref:t,className:Ol("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},n),{},{children:[s,(0,qr.jsxs)(Cm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,qr.jsx)(Em,{className:"h-4 w-4"}),(0,qr.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});zm.displayName=Sm.displayName;const Bm=e=>{let{className:t}=e,a=i(e,Om);return(0,qr.jsx)("div",u({className:Ol("flex flex-col space-y-1.5 text-center sm:text-left",t)},a))};Bm.displayName="DialogHeader";const Um=e=>{let{className:t}=e,a=i(e,Mm);return(0,qr.jsx)("div",u({className:Ol("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},a))};Um.displayName="DialogFooter";const Hm=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Tm);return(0,qr.jsx)(_m,u({ref:t,className:Ol("text-lg font-semibold leading-none tracking-tight",a)},s))});Hm.displayName=_m.displayName;const qm=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,Dm);return(0,qr.jsx)(km,u({ref:t,className:Ol("text-sm text-muted-foreground",a)},s))});qm.displayName=km.displayName;const Vm=Dc("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Wm=Dc("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Gm=Dc("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Km=Dc("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ym=Dc("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Jm=Dc("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),$m=Dc("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function Qm(e){let{isOpen:t,onClose:a,onSuccess:n}=e;const[r,i]=(0,s.useState)(1),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)("email"),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[x,f]=(0,s.useState)(""),[g,v]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(""),[_,k]=(0,s.useState)(""),[C,E]=(0,s.useState)(""),A=async()=>{if(u){o(!0);try{const e={};"email"===c?e.email=u:"mobile"===c?e.mobile=u:e.student_id=u;const t=await fetch("".concat("","/api/password-reset/forgot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?(Qt.success(a.message||"OTP sent successfully!"),S(a.demo_otp||""),k(a.user_name||""),E(a.user_type||""),i(2)):Qt.error(a.detail||"Failed to send OTP")}catch(e){Qt.error("Network error. Please try again.")}finally{o(!1)}}else Qt.error("Please enter your email, mobile or student ID")},P=()=>{i(1),m(""),p(""),f(""),v(""),y(""),S(""),a()};return(0,qr.jsx)(Im,{open:t,onOpenChange:P,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Vm,{className:"w-5 h-5 text-indigo-600"}),1===r&&"Forgot Password",2===r&&"Enter OTP",3===r&&"Set New Password"]})}),1===r&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-600",children:"Enter your registered email, mobile number or student ID to receive OTP"}),(0,qr.jsx)("div",{className:"flex gap-2",children:[{id:"email",icon:Wm,label:"Email"},{id:"mobile",icon:Gm,label:"Mobile"},{id:"student_id",icon:Fc,label:"Student ID"}].map(e=>(0,qr.jsxs)("button",{onClick:()=>{d(e.id),m("")},className:"flex-1 p-3 rounded-lg border-2 transition-all ".concat(c===e.id?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"),children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5 mx-auto mb-1 ".concat(c===e.id?"text-indigo-600":"text-slate-400")}),(0,qr.jsx)("p",{className:"text-xs font-medium ".concat(c===e.id?"text-indigo-700":"text-slate-600"),children:e.label})]},e.id))}),(0,qr.jsx)("div",{children:(0,qr.jsx)(Rl,{value:u,onChange:e=>m(e.target.value),placeholder:"email"===c?"Enter your email address":"mobile"===c?"Enter your mobile number":"Enter your Student ID",type:"email"===c?"email":"text"})}),(0,qr.jsxs)(Dl,{onClick:A,disabled:l||!u,className:"w-full bg-indigo-600 hover:bg-indigo-700",children:[l?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(Wm,{className:"w-4 h-4 mr-2"}),"Send OTP"]})]}),2===r&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-4 text-center",children:[(0,qr.jsx)(Km,{className:"w-8 h-8 text-emerald-600 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-emerald-800",children:"OTP Sent!"}),_&&(0,qr.jsxs)("p",{className:"text-sm text-emerald-600",children:["Hi ",_]})]}),w&&(0,qr.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[(0,qr.jsx)("p",{className:"text-xs text-amber-700 font-medium",children:"Demo Mode - OTP:"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-amber-800 tracking-widest",children:w}),(0,qr.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Production mein yeh SMS/Email se aayega"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Enter 6-Digit OTP"}),(0,qr.jsx)(Rl,{value:h,onChange:e=>p(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"text-center text-2xl tracking-widest font-mono",maxLength:6})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>i(1),className:"flex-1",children:[(0,qr.jsx)(Ym,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(h&&6===h.length){o(!0);try{const e={otp:h};"email"===c?e.email=u:"mobile"===c?e.mobile=u:e.student_id=u;const t=await fetch("".concat("","/api/password-reset/verify-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok&&a.success?(Qt.success("OTP verified!"),f(a.reset_token),i(3)):Qt.error(a.detail||"Invalid OTP")}catch(e){Qt.error("Verification failed. Please try again.")}finally{o(!1)}}else Qt.error("Please enter valid 6-digit OTP")},disabled:l||6!==h.length,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:[l?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(Jm,{className:"w-4 h-4 mr-2"}),"Verify OTP"]})]}),(0,qr.jsx)("button",{onClick:A,className:"w-full text-sm text-indigo-600 hover:underline",children:"Resend OTP"})]}),3===r&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-4 text-center",children:[(0,qr.jsx)(Jm,{className:"w-8 h-8 text-emerald-600 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-emerald-800",children:"OTP Verified!"}),(0,qr.jsx)("p",{className:"text-sm text-emerald-600",children:"Ab naya password set karein"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"New Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{type:j?"text":"password",value:g,onChange:e=>v(e.target.value),placeholder:"Enter new password"}),(0,qr.jsx)("button",{type:"button",onClick:()=>N(!j),className:"absolute right-3 top-1/2 -translate-y-1/2",children:j?(0,qr.jsx)(Uc,{className:"w-4 h-4 text-slate-400"}):(0,qr.jsx)(Hc,{className:"w-4 h-4 text-slate-400"})})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Confirm Password"}),(0,qr.jsx)(Rl,{type:j?"text":"password",value:b,onChange:e=>y(e.target.value),placeholder:"Confirm new password"})]}),g&&b&&g!==b&&(0,qr.jsx)("p",{className:"text-sm text-red-600",children:"Passwords match nahi ho rahe"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(g===b)if(g.length<6)Qt.error("Password must be at least 6 characters");else{o(!0);try{const e=await fetch("".concat("","/api/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reset_token:x,new_password:g,confirm_password:b})}),t=await e.json();e.ok&&t.success?(Qt.success("Password reset successfully! \ud83c\udf89"),null===n||void 0===n||n(),P()):Qt.error(t.detail||"Failed to reset password")}catch(e){Qt.error("Reset failed. Please try again.")}finally{o(!1)}}else Qt.error("Passwords do not match")},disabled:l||!g||g!==b,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:[l?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)($m,{className:"w-4 h-4 mr-2"}),"Reset Password"]})]})]})})}const Xm=Dc("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Zm=Dc("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),eh=Dc("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),th=Dc("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),ah=Dc("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),sh=Dc("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),nh=Dc("bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]),rh=Dc("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ih=Dc("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),lh=Dc("fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]),oh=Dc("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ch=Dc("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),dh=Dc("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),uh=Dc("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),mh=Dc("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),hh=Dc("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),ph=Dc("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),xh=Dc("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);let fh=null;const gh=new Set;"undefined"!==typeof window&&(window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),fh=e,console.log("[PWA] Install prompt captured!"),gh.forEach(t=>t(e))}),window.addEventListener("appinstalled",()=>{console.log("[PWA] App installed successfully!"),fh=null}));function vh(){const e=(0,s.useMemo)(()=>"undefined"!==typeof window&&(window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone),[]),t=(0,s.useMemo)(()=>(()=>{if("undefined"===typeof window)return!1;const e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)&&!window.MSStream})(),[]),[a,n]=(0,s.useState)(!!fh),[r,i]=(0,s.useState)(e),[l]=(0,s.useState)(t);(0,s.useEffect)(()=>{fh&&n(!0);const e=()=>n(!0);gh.add(e);const t=()=>{i(!0),n(!1)};return window.addEventListener("appinstalled",t),()=>{gh.delete(e),window.removeEventListener("appinstalled",t)}},[]);return{canInstall:a,isInstalled:r,isIOS:l,install:(0,s.useCallback)(async()=>{if(!fh)return{success:!1,reason:"no_prompt"};try{await fh.prompt();const{outcome:e}=await fh.userChoice;return"accepted"===e?(fh=null,n(!1),{success:!0}):{success:!1,reason:"dismissed"}}catch($1){return console.error("[PWA] Install error:",$1),{success:!1,reason:"error"}}},[])}}function bh(){const{canInstall:e,isInstalled:t,isIOS:a,install:n}=vh(),[r,i]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(()=>"undefined"!==typeof window&&"true"===sessionStorage.getItem("pwa_dismissed"));return t||u?null:l?(0,qr.jsx)("div",{className:"fixed bottom-4 right-4 z-50 animate-in slide-in-from-bottom",children:(0,qr.jsxs)("div",{className:"bg-green-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-2",children:[(0,qr.jsx)(ph,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"font-medium",children:"App Installed! \ud83c\udf89"})]})}):c?(0,qr.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden animate-in zoom-in-95",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(dh,{className:"w-7 h-7"}),(0,qr.jsx)("h3",{className:"font-bold",children:"iOS \u092a\u0930 Install \u0915\u0930\u0947\u0902"})]}),(0,qr.jsx)("button",{onClick:()=>d(!1),className:"p-1 hover:bg-white/20 rounded-full",children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]})}),(0,qr.jsxs)("div",{className:"p-5 space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold shrink-0",children:"1"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Safari \u092e\u0947\u0902 Share button tap \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("p",{className:"text-xs text-gray-500",children:"\u0928\u0940\u091a\u0947 \u25a1\u2191 icon \u092a\u0930 click \u0915\u0930\u0947\u0902"})]})]}),(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold shrink-0",children:"2"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"\u201cAdd to Home Screen\u201d select \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("p",{className:"text-xs text-gray-500",children:"Scroll \u0915\u0930\u0915\u0947 find \u0915\u0930\u0947\u0902"})]})]}),(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold shrink-0",children:"3"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"\u201cAdd\u201d tap \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("p",{className:"text-xs text-gray-500",children:"App install \u0939\u094b \u091c\u093e\u090f\u0917\u0940! \ud83c\udf89"})]})]}),(0,qr.jsx)(Dl,{onClick:()=>d(!1),className:"w-full bg-indigo-600 hover:bg-indigo-700",children:"\u0938\u092e\u091d \u0917\u092f\u093e!"})]})]})}):e||a?(0,qr.jsx)("div",{className:"fixed bottom-20 right-4 z-50 animate-in slide-in-from-right duration-500",children:(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("button",{onClick:()=>{m(!0),sessionStorage.setItem("pwa_dismissed","true")},className:"absolute -top-2 -right-2 w-6 h-6 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center shadow-md",children:(0,qr.jsx)(Em,{className:"w-3 h-3 text-gray-600"})}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(a)return void d(!0);if(!e)return;i(!0);const t=await n();i(!1),t.success&&(o(!0),setTimeout(()=>o(!1),3e3))},disabled:r,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white shadow-xl rounded-full pl-4 pr-5 py-6 flex items-center gap-2","data-testid":"pwa-install-fab",children:[r?(0,qr.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,qr.jsx)(xh,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"font-semibold",children:"Install App"})]})]})}):null}function yh(e){let{className:t="",variant:a="default"}=e;const{canInstall:n,isInstalled:r,isIOS:i,install:l}=vh(),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1);return r?null:n||i?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)(Dl,{onClick:async()=>{i?u(!0):n&&(c(!0),await l(),c(!1))},disabled:o,variant:a,className:"gap-2 ".concat(t),"data-testid":"pwa-install-btn",children:[o?(0,qr.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,qr.jsx)(xh,{className:"w-4 h-4"}),(0,qr.jsx)("span",{children:"Install"})]}),d&&(0,qr.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(dh,{className:"w-6 h-6"}),(0,qr.jsx)("h3",{className:"font-bold text-sm",children:"iOS Install Instructions"})]}),(0,qr.jsx)("button",{onClick:()=>u(!1),className:"p-1 hover:bg-white/20 rounded-full",children:(0,qr.jsx)(Em,{className:"w-4 h-4"})})]})}),(0,qr.jsxs)("div",{className:"p-4 space-y-3 text-sm",children:[(0,qr.jsxs)("p",{children:[(0,qr.jsx)("strong",{children:"1."})," Tap Safari's Share button (\u25a1\u2191)"]}),(0,qr.jsxs)("p",{children:[(0,qr.jsx)("strong",{children:"2."})," Select \u201cAdd to Home Screen\u201d"]}),(0,qr.jsxs)("p",{children:[(0,qr.jsx)("strong",{children:"3."})," Tap \u201cAdd\u201d - Done!"]}),(0,qr.jsx)(Dl,{onClick:()=>u(!1),className:"w-full mt-2 bg-indigo-600 hover:bg-indigo-700",size:"sm",children:"Got it!"})]})]})})]}):null}const jh="".concat("","/api");function Nh(){const{user:e,login:t}=Kr(),a=Se(),[n,r]=(0,s.useState)("login"),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)({name:"",email:"",mobile:"",school_name:""}),[x,f]=(0,s.useState)({email:"",password:""});(0,s.useEffect)(()=>{e&&a("/app/dashboard")},[e,a]);const g=e=>{var t;null===(t=document.getElementById(e))||void 0===t||t.scrollIntoView({behavior:"smooth"})},v=[{icon:Lc,title:"Student Management",desc:"Complete student lifecycle from admission to alumni",color:"bg-blue-500"},{icon:Xm,title:"Staff & HR",desc:"Salary, attendance, leave management",color:"bg-emerald-500"},{icon:Zm,title:"Fee Management",desc:"Online payments, receipts, defaulter tracking",color:"bg-amber-500"},{icon:eh,title:"Attendance",desc:"Biometric, CCTV, manual - all integrated",color:"bg-purple-500"},{icon:th,title:"AI Assistant",desc:"Voice commands, paper generation, insights",color:"bg-rose-500"},{icon:ah,title:"CCTV Integration",desc:"Auto attendance, security alerts, monitoring",color:"bg-indigo-500"},{icon:sh,title:"Exam System",desc:"Online exams, AI paper generation, results",color:"bg-cyan-500"},{icon:nh,title:"Transport",desc:"Route management, GPS tracking, fee collection",color:"bg-orange-500"},{icon:rh,title:"Health Module",desc:"Medical records, vaccinations, health checkups",color:"bg-pink-500"},{icon:ih,title:"Communication",desc:"SMS, notices, parent portal, meetings",color:"bg-teal-500"},{icon:lh,title:"Biometric",desc:"Fingerprint & face recognition attendance",color:"bg-violet-500"},{icon:oh,title:"Analytics",desc:"Reports, insights, performance tracking",color:"bg-lime-500"}],[b,y]=(0,s.useState)("yearly"),j=[{name:"Basic ERP",monthlyPrice:"999",yearlyPrice:"9,999",perStudentPrice:"10",period:"monthly"===b?"/month":"/year",desc:"Small Schools (upto 200 students)",features:["Student & Staff Management","Fee Collection & Receipts","Attendance (Manual/Biometric)","SMS/WhatsApp Alerts","Reports & Analytics","Mobile App Access"],popular:!1,savings:"\u20b91,989/year"},{name:"AI Powered",monthlyPrice:"1,999",yearlyPrice:"17,999",perStudentPrice:"20",period:"monthly"===b?"/month":"/year",desc:"Medium Schools (200-500 students)",features:["Everything in Basic","Tino Brain AI Assistant \ud83e\udde0","AI Paper Generator","Voice Commands (Hindi/English)","Smart Reports & Insights","Parent Portal"],popular:!0,savings:"\u20b95,989/year"},{name:"Enterprise",monthlyPrice:"2,999",yearlyPrice:"27,999",perStudentPrice:"30",period:"monthly"===b?"/month":"/year",desc:"Large Schools (500+ students)",features:["Everything in AI","CCTV Integration \ud83d\udcf9","Face Recognition Attendance","GPS Bus Tracking \ud83d\ude8c","Multi-Branch Support","Priority Support"],popular:!1,savings:"\u20b97,989/year"}];return(0,qr.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,qr.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-sm border-b border-slate-100",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ic,{className:"w-6 h-6 text-white"})}),(0,qr.jsx)("span",{className:"text-xl font-bold text-slate-900",children:"Schooltino"})]}),(0,qr.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[(0,qr.jsx)("button",{onClick:()=>g("features"),className:"text-slate-600 hover:text-indigo-600 text-sm font-medium",children:"Features"}),(0,qr.jsx)("button",{onClick:()=>g("pricing"),className:"text-slate-600 hover:text-indigo-600 text-sm font-medium",children:"Pricing"}),(0,qr.jsx)("a",{href:"/teachtino",className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"TeachTino"}),(0,qr.jsx)("a",{href:"/studytino",className:"text-amber-600 hover:text-amber-700 text-sm font-medium",children:"StudyTino"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(yh,{className:"hidden sm:flex bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white"}),(0,qr.jsx)(Dl,{onClick:()=>g("register"),className:"bg-indigo-600 hover:bg-indigo-700",children:"Get Started"})]})]})})}),(0,qr.jsx)("section",{className:"pt-24 pb-16 bg-gradient-to-b from-indigo-50 to-white",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,qr.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-indigo-100 rounded-full text-indigo-700 text-sm font-medium mb-6",children:[(0,qr.jsx)(ch,{className:"w-4 h-4"}),"1 Month FREE Trial"]}),(0,qr.jsxs)("h1",{className:"text-4xl sm:text-5xl font-bold text-slate-900 leading-tight mb-6",children:["Smart School",(0,qr.jsx)("span",{className:"block text-indigo-600",children:"Management System"})]}),(0,qr.jsxs)("p",{className:"text-lg text-slate-600 mb-8",children:[(0,qr.jsx)("strong",{children:"AI + CCTV + Apps"})," - Complete automation for modern schools. Manage students, staff, fees, attendance - all in one platform."]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{icon:th,text:"AI Powered"},{icon:ah,text:"CCTV Ready"},{icon:dh,text:"Mobile Apps"},{icon:Rc,text:"100% Secure"}].map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(e.icon,{className:"w-4 h-4 text-indigo-600"})}),(0,qr.jsx)("span",{className:"text-sm font-medium text-slate-700",children:e.text})]},t))}),(0,qr.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,qr.jsxs)(Dl,{size:"lg",onClick:()=>g("register"),className:"bg-indigo-600 hover:bg-indigo-700",children:["Start Free Trial",(0,qr.jsx)(uh,{className:"w-4 h-4 ml-2"})]}),(0,qr.jsxs)(Dl,{size:"lg",variant:"outline",onClick:()=>g("features"),children:[(0,qr.jsx)(mh,{className:"w-4 h-4 mr-2"}),"See Features"]})]})]}),(0,qr.jsx)("div",{id:"register",children:(0,qr.jsx)(Qc,{className:"shadow-xl border-0",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsxs)("div",{className:"flex mb-6 bg-slate-100 rounded-lg p-1",children:[(0,qr.jsx)("button",{onClick:()=>r("login"),className:"flex-1 py-2 text-sm font-medium rounded-md transition-all ".concat("login"===n?"bg-white text-indigo-600 shadow-sm":"text-slate-600"),children:"Login"}),(0,qr.jsx)("button",{onClick:()=>r("register"),className:"flex-1 py-2 text-sm font-medium rounded-md transition-all ".concat("register"===n?"bg-white text-indigo-600 shadow-sm":"text-slate-600"),children:"Register"})]}),"login"===n?(0,qr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{await t(x.email,x.password),Qt.success("Welcome to Schooltino!"),a("/app/dashboard")}catch(s){Qt.error("Invalid credentials")}finally{l(!1)}},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Email"}),(0,qr.jsx)(Rl,{type:"email",placeholder:"director@school.com",value:x.email,onChange:e=>f(t=>u(u({},t),{},{email:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{type:o?"text":"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:x.password,onChange:e=>f(t=>u(u({},t),{},{password:e.target.value}))}),(0,qr.jsx)("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:o?(0,qr.jsx)(Uc,{className:"w-4 h-4"}):(0,qr.jsx)(Hc,{className:"w-4 h-4"})})]})]}),(0,qr.jsx)(Dl,{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700",disabled:i,children:i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):"Login"}),(0,qr.jsx)("button",{type:"button",onClick:()=>m(!0),className:"text-sm text-indigo-600 hover:text-indigo-700 w-full text-center",children:"Forgot Password?"})]}):(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h.name&&h.email&&h.school_name){l(!0);try{const e=await Hr.post("".concat(jh,"/auth/create-director"),null,{params:h});Qt.success("Account created successfully!"),alert("\u2705 Registration Successful!\n\nEmail: ".concat(e.data.email,"\nPassword: ").concat(e.data.temporary_password,"\n\n\u26a0\ufe0f Please save these credentials!")),r("login"),f({email:e.data.email,password:""})}catch(s){var t,a;Qt.error((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Registration failed")}finally{l(!1)}}else Qt.error("Please fill all required fields")},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Your Name *"}),(0,qr.jsx)(Rl,{placeholder:"Enter your name",value:h.name,onChange:e=>p(t=>u(u({},t),{},{name:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"School Name *"}),(0,qr.jsx)(Rl,{placeholder:"Enter school name",value:h.school_name,onChange:e=>p(t=>u(u({},t),{},{school_name:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Email *"}),(0,qr.jsx)(Rl,{type:"email",placeholder:"your@email.com",value:h.email,onChange:e=>p(t=>u(u({},t),{},{email:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Mobile"}),(0,qr.jsx)(Rl,{placeholder:"+91 98765 43210",value:h.mobile,onChange:e=>p(t=>u(u({},t),{},{mobile:e.target.value}))})]}),(0,qr.jsx)(Dl,{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700",disabled:i,children:i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):"Start Free Trial"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 text-center",children:"By registering, you agree to our Terms & Privacy Policy"})]}),(0,qr.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500 text-center mb-3",children:"Quick Access"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,qr.jsxs)("a",{href:"/teachtino",className:"flex items-center justify-center gap-2 p-3 bg-emerald-50 text-emerald-700 rounded-lg hover:bg-emerald-100 transition-colors",children:[(0,qr.jsx)(Fc,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"text-sm font-medium",children:"TeachTino"})]}),(0,qr.jsxs)("a",{href:"/studytino",className:"flex items-center justify-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg hover:bg-amber-100 transition-colors",children:[(0,qr.jsx)(sh,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"text-sm font-medium",children:"StudyTino"})]})]})]})]})})})]})})}),(0,qr.jsx)("section",{className:"py-12 bg-indigo-600",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[{value:"500+",label:"Schools"},{value:"50,000+",label:"Students"},{value:"99.9%",label:"Uptime"},{value:"24/7",label:"Support"}].map((e,t)=>(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-3xl font-bold text-white",children:e.value}),(0,qr.jsx)("p",{className:"text-indigo-200 text-sm",children:e.label})]},t))})})}),(0,qr.jsx)("section",{id:"features",className:"py-20 bg-slate-50",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,qr.jsxs)("div",{className:"text-center mb-12",children:[(0,qr.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything You Need"}),(0,qr.jsx)("p",{className:"text-slate-600 max-w-2xl mx-auto",children:"40+ modules to manage every aspect of your school efficiently"})]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:v.map((e,t)=>(0,qr.jsx)(Qc,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:(0,qr.jsxs)(td,{className:"p-4",children:[(0,qr.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center mb-3"),children:(0,qr.jsx)(e.icon,{className:"w-5 h-5 text-white"})}),(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 mb-1",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.desc})]})},t))})]})}),(0,qr.jsx)("section",{className:"py-20 bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,qr.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/20 rounded-full text-sm font-medium mb-6",children:[(0,qr.jsx)(hh,{className:"w-4 h-4"}),"AI-Powered"]}),(0,qr.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Meet Tino AI - Your School's Smart Assistant"}),(0,qr.jsx)("p",{className:"text-indigo-100 mb-8",children:"Voice commands, instant insights, automated paper generation, and smart predictions. Tino AI understands your school and helps you make better decisions."}),(0,qr.jsx)("div",{className:"space-y-4",children:["Generate exam papers in seconds","Voice commands in Hindi & English","Smart attendance insights","Fee defaulter predictions","Student performance analysis"].map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(ph,{className:"w-5 h-5 text-emerald-400"}),(0,qr.jsx)("span",{children:e})]},t))})]}),(0,qr.jsx)("div",{className:"relative",children:(0,qr.jsxs)("div",{className:"bg-white/10 rounded-2xl p-8 backdrop-blur-sm",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:(0,qr.jsx)(th,{className:"w-6 h-6 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:"Tino AI"}),(0,qr.jsx)("p",{className:"text-sm text-indigo-200",children:"Your AI Assistant"})]})]}),(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsx)("div",{className:"bg-white/10 rounded-lg p-3",children:(0,qr.jsx)("p",{className:"text-sm",children:'"Class 10 ka Science paper generate karo"'})}),(0,qr.jsx)("div",{className:"bg-indigo-500/50 rounded-lg p-3 ml-8",children:(0,qr.jsx)("p",{className:"text-sm",children:"\u2705 Paper generated with 50 marks, 25 questions covering all chapters..."})})]})]})})]})})}),(0,qr.jsx)("section",{className:"py-16 bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,qr.jsx)("h2",{className:"text-3xl font-bold text-center mb-12",children:"\ud83c\udfaf Schooltino Kyu Choose Karein?"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[(0,qr.jsxs)("div",{className:"p-4",children:[(0,qr.jsx)("div",{className:"text-4xl font-bold mb-2",children:"500+"}),(0,qr.jsx)("div",{className:"text-indigo-200",children:"Schools Trust Us"})]}),(0,qr.jsxs)("div",{className:"p-4",children:[(0,qr.jsx)("div",{className:"text-4xl font-bold mb-2",children:"50%"}),(0,qr.jsx)("div",{className:"text-indigo-200",children:"Sasta Than Competitors"})]}),(0,qr.jsxs)("div",{className:"p-4",children:[(0,qr.jsx)("div",{className:"text-4xl font-bold mb-2",children:"24/7"}),(0,qr.jsx)("div",{className:"text-indigo-200",children:"AI Support"})]}),(0,qr.jsxs)("div",{className:"p-4",children:[(0,qr.jsx)("div",{className:"text-4xl font-bold mb-2",children:"100%"}),(0,qr.jsx)("div",{className:"text-indigo-200",children:"Hindi Support"})]})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-12",children:[(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[(0,qr.jsx)("div",{className:"text-3xl mb-3",children:"\ud83e\udde0"}),(0,qr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Tino Brain AI"}),(0,qr.jsx)("p",{className:"text-indigo-200 text-sm",children:'Hindi mein baat karo - "Aaj kitne bachhe absent hain?" AI turant jawab dega!'})]}),(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[(0,qr.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udcf9"}),(0,qr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"CCTV + Biometric"}),(0,qr.jsx)("p",{className:"text-indigo-200 text-sm",children:"Face recognition se automatic attendance - No proxy possible!"})]}),(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[(0,qr.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\ude8c"}),(0,qr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"GPS Bus Tracking"}),(0,qr.jsx)("p",{className:"text-indigo-200 text-sm",children:'Parents ko real-time bus location dikhe - "Bus late hai" notification automatic!'})]}),(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[(0,qr.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udcdd"}),(0,qr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"AI Paper Generator"}),(0,qr.jsx)("p",{className:"text-indigo-200 text-sm",children:"Chapter select karo, AI paper bana dega - NCERT syllabus ke according!"})]}),(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[(0,qr.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udcb0"}),(0,qr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Fee Management"}),(0,qr.jsx)("p",{className:"text-indigo-200 text-sm",children:"Online + Cash payment - Receipt turant student app mein!"})]}),(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[(0,qr.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udcf1"}),(0,qr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Parent App"}),(0,qr.jsx)("p",{className:"text-indigo-200 text-sm",children:"Parents ko sab kuch phone par - Attendance, Fees, Results, Bus Location!"})]})]})]})}),(0,qr.jsx)("section",{id:"pricing",className:"py-20 bg-white",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,qr.jsxs)("div",{className:"text-center mb-12",children:[(0,qr.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Simple, Affordable Pricing"}),(0,qr.jsx)("p",{className:"text-slate-600 mb-6",children:"50% cheaper than competitors with 3x more features"}),(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-8",children:[(0,qr.jsx)("span",{className:"text-sm font-medium ".concat("monthly"===b?"text-indigo-600":"text-slate-500"),children:"Monthly"}),(0,qr.jsx)("button",{onClick:()=>y("monthly"===b?"yearly":"monthly"),className:"relative w-14 h-7 rounded-full transition-colors ".concat("yearly"===b?"bg-indigo-600":"bg-slate-300"),children:(0,qr.jsx)("span",{className:"absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ".concat("yearly"===b?"translate-x-8":"translate-x-1")})}),(0,qr.jsx)("span",{className:"text-sm font-medium ".concat("yearly"===b?"text-indigo-600":"text-slate-500"),children:"Yearly"}),"yearly"===b&&(0,qr.jsx)("span",{className:"bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded-full",children:"Save upto \u20b97,989/year"})]}),(0,qr.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 max-w-2xl mx-auto mb-8",children:(0,qr.jsxs)("p",{className:"text-amber-800 text-sm",children:[(0,qr.jsx)("strong",{children:"\ud83d\udca1 Per-Student Pricing bhi available hai!"}),(0,qr.jsx)("br",{}),"Large schools ke liye: \u20b910-30/student/month - Jitne students, utna pay karo"]})})]}),(0,qr.jsx)("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:j.map((e,t)=>(0,qr.jsxs)(Qc,{className:"relative overflow-hidden ".concat(e.popular?"border-indigo-600 border-2 shadow-xl scale-105":"border-slate-200"),children:[e.popular&&(0,qr.jsx)("div",{className:"absolute top-0 right-0 bg-indigo-600 text-white text-xs font-medium px-3 py-1 rounded-bl-lg",children:"\u2b50 Most Popular"}),"yearly"===b&&(0,qr.jsxs)("div",{className:"absolute top-0 left-0 bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-br-lg",children:["Save ",e.savings]}),(0,qr.jsxs)(td,{className:"p-6 pt-8",children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-1",children:e.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:e.desc}),(0,qr.jsxs)("div",{className:"flex items-baseline gap-1 mb-2",children:[(0,qr.jsx)("span",{className:"text-slate-400 text-sm",children:"\u20b9"}),(0,qr.jsx)("span",{className:"text-4xl font-bold text-slate-900",children:"monthly"===b?e.monthlyPrice:e.yearlyPrice}),(0,qr.jsx)("span",{className:"text-slate-500",children:e.period})]}),(0,qr.jsxs)("p",{className:"text-xs text-slate-400 mb-4",children:["\u092f\u093e \u20b9",e.perStudentPrice,"/student/month"]}),(0,qr.jsx)("ul",{className:"space-y-3 mb-6",children:e.features.map((e,t)=>(0,qr.jsxs)("li",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,qr.jsx)(ph,{className:"w-4 h-4 text-emerald-500 flex-shrink-0"}),e]},t))}),(0,qr.jsx)(Dl,{className:"w-full ".concat(e.popular?"bg-indigo-600 hover:bg-indigo-700":""),variant:e.popular?"default":"outline",onClick:()=>g("register"),children:"Start Free Trial"})]})]},t))}),(0,qr.jsx)("p",{className:"text-center text-slate-500 text-sm mt-8",children:"All plans include 1 month FREE trial \u2022 No credit card required"})]})}),(0,qr.jsx)("section",{className:"py-16 bg-slate-900",children:(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[(0,qr.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Transform Your School?"}),(0,qr.jsx)("p",{className:"text-slate-400 mb-8",children:"Join 500+ schools already using Schooltino"}),(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[(0,qr.jsxs)(Dl,{size:"lg",onClick:()=>g("register"),className:"bg-indigo-600 hover:bg-indigo-700",children:["Start Your Free Trial",(0,qr.jsx)(uh,{className:"w-4 h-4 ml-2"})]}),(0,qr.jsxs)("a",{href:"https://wa.me/917879967616?text=Hi%20Schooltino!%20I%20want%20to%20know%20more%20about%20your%20school%20management%20system.",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-medium px-6 py-3 rounded-lg transition-colors",children:[(0,qr.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,qr.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp: +91 78799 67616"]})]}),(0,qr.jsx)("p",{className:"text-slate-500 text-sm mt-4",children:"\ud83d\udcde Call/WhatsApp for demo \u2022 Free school visit available"})]})}),(0,qr.jsx)("a",{href:"https://wa.me/917879967616?text=Hi%20Schooltino!%20I%20want%20demo%20for%20my%20school.",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 z-50 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg transition-all hover:scale-110",title:"Chat on WhatsApp",children:(0,qr.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,qr.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),(0,qr.jsx)("footer",{className:"py-12 bg-slate-950",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,qr.jsxs)("div",{className:"grid md:grid-cols-4 gap-8",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ic,{className:"w-5 h-5 text-white"})}),(0,qr.jsx)("span",{className:"text-lg font-bold text-white",children:"Schooltino"})]}),(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"AI-Powered School Management System for modern schools."})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"text-white font-semibold mb-4",children:"Product"}),(0,qr.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,qr.jsx)("li",{children:(0,qr.jsx)("a",{href:"#features",className:"hover:text-white",children:"Features"})}),(0,qr.jsx)("li",{children:(0,qr.jsx)("a",{href:"#pricing",className:"hover:text-white",children:"Pricing"})}),(0,qr.jsx)("li",{children:(0,qr.jsx)("a",{href:"/teachtino",className:"hover:text-white",children:"TeachTino"})}),(0,qr.jsx)("li",{children:(0,qr.jsx)("a",{href:"/studytino",className:"hover:text-white",children:"StudyTino"})})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"text-white font-semibold mb-4",children:"Support"}),(0,qr.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,qr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Gm,{className:"w-4 h-4"}),"+91 7879967616"]}),(0,qr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Wm,{className:"w-4 h-4"}),"support@schooltino.in"]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"text-white font-semibold mb-4",children:"Legal"}),(0,qr.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,qr.jsx)("li",{children:(0,qr.jsx)("a",{href:"#",className:"hover:text-white",children:"Privacy Policy"})}),(0,qr.jsx)("li",{children:(0,qr.jsx)("a",{href:"#",className:"hover:text-white",children:"Terms of Service"})})]})]})]}),(0,qr.jsx)("div",{className:"border-t border-slate-800 mt-8 pt-8 text-center text-slate-400 text-sm",children:"\xa9 2026 Schooltino. All rights reserved."})]})}),d&&(0,qr.jsx)(Qm,{isOpen:d,onClose:()=>m(!1),portalType:"admin"})]})}const wh=Dc("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Sh=Dc("indian-rupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),_h=Dc("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),kh=Dc("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ch=Dc("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Eh=Dc("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Ah=Dc("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ph=Dc("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Oh=Dc("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Mh=Dc("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Th=Dc("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var Dh=a(6135),Ih=a.n(Dh),Rh=a(4879),Lh=a.n(Rh);function Fh(e){var t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),a=Math.round(e*t)/t;return Object.is(a,-0)?0:a}function zh(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((e,t,s)=>{var n=a[s-1];return"string"===typeof n?e+n+t:void 0!==n?e+Fh(n)+t:e+t},"")}var Bh=e=>0===e?0:e>0?1:-1,Uh=e=>"number"==typeof e&&e!=+e,Hh=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,qh=e=>("number"===typeof e||e instanceof Number)&&!Uh(e),Vh=e=>qh(e)||"string"===typeof e,Wh=0,Gh=e=>{var t=++Wh;return"".concat(e||"").concat(t)},Kh=function(e,t){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!qh(e)&&"string"!==typeof e)return s;if(Hh(e)){if(null==t)return s;var r=e.indexOf("%");a=t*parseFloat(e.slice(0,r))/100}else a=+e;return Uh(a)&&(a=s),n&&null!=t&&a>t&&(a=t),a},Yh=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++){if(a[String(e[s])])return!0;a[String(e[s])]=!0}return!1};function Jh(e,t,a){return qh(e)&&qh(t)?Fh(e+a*(t-e)):t}var $h=e=>null===e||"undefined"===typeof e,Qh=e=>$h(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Xh(e){return null!=e}function Zh(){}var ep=function(e,t){for(var a=arguments.length,s=new Array(a>2?a-2:0),n=2;n<a;n++)s[n-2]=arguments[n];if("undefined"!==typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var r=0;console.warn(t.replace(/%s/g,()=>s[r++]))}},tp={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},ap=(e,t,a)=>{var{width:s=tp.width,height:n=tp.height,aspect:r,maxHeight:i}=a,l=Hh(s)?e:Number(s),o=Hh(n)?t:Number(n);return r&&r>0&&(l?o=l/r:o&&(l=o*r),i&&null!=o&&o>i&&(o=i)),{calculatedWidth:l,calculatedHeight:o}},sp={width:0,height:0,overflow:"visible"},np={width:0,overflowX:"visible"},rp={height:0,overflowY:"visible"},ip={},lp=e=>{var{width:t,height:a}=e,s=Hh(t),n=Hh(a);return s&&n?sp:s?np:n?rp:ip};function op(e){return Number.isFinite(e)}function cp(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dp.apply(null,arguments)}function up(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function mp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?up(Object(a),!0).forEach(function(t){hp(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):up(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function hp(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var pp=(0,s.createContext)(tp.initialDimension);function xp(e){var{children:t,width:a,height:n}=e,r=(0,s.useMemo)(()=>({width:a,height:n}),[a,n]);return function(e){return cp(e.width)&&cp(e.height)}(r)?s.createElement(pp.Provider,{value:r},t):null}var fp=()=>(0,s.useContext)(pp),gp=(0,s.forwardRef)((e,t)=>{var{aspect:a,initialDimension:n=tp.initialDimension,width:r,height:i,minWidth:l=tp.minWidth,minHeight:o,maxHeight:c,children:d,debounce:u=tp.debounce,id:m,className:h,onResize:p,style:x={}}=e,f=(0,s.useRef)(null),g=(0,s.useRef)();g.current=p,(0,s.useImperativeHandle)(t,()=>f.current);var[v,b]=(0,s.useState)({containerWidth:n.width,containerHeight:n.height}),y=(0,s.useCallback)((e,t)=>{b(a=>{var s=Math.round(e),n=Math.round(t);return a.containerWidth===s&&a.containerHeight===n?a:{containerWidth:s,containerHeight:n}})},[]);(0,s.useEffect)(()=>{if(null==f.current||"undefined"===typeof ResizeObserver)return Zh;var e=e=>{var t,a=e[0];if(null!=a){var{width:s,height:n}=a.contentRect;y(s,n),null===(t=g.current)||void 0===t||t.call(g,s,n)}};u>0&&(e=Ih()(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:a,height:s}=f.current.getBoundingClientRect();return y(a,s),t.observe(f.current),()=>{t.disconnect()}},[y,u]);var{containerWidth:j,containerHeight:N}=v;ep(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:w,calculatedHeight:S}=ap(j,N,{width:r,height:i,aspect:a,maxHeight:c});return ep(null!=w&&w>0||null!=S&&S>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",w,S,r,i,l,o,a),s.createElement("div",{id:m?"".concat(m):void 0,className:ui("recharts-responsive-container",h),style:mp(mp({},x),{},{width:r,height:i,minWidth:l,minHeight:o,maxHeight:c}),ref:f},s.createElement("div",{style:lp({width:r,height:i})},s.createElement(xp,{width:w,height:S},d)))}),vp=(0,s.forwardRef)((e,t)=>{var a=fp();if(cp(a.width)&&cp(a.height))return e.children;var{width:n,height:r}=function(e){var{width:t,height:a,aspect:s}=e,n=t,r=a;return void 0===n&&void 0===r?(n=tp.width,r=tp.height):void 0===n?n=s&&s>0?void 0:tp.width:void 0===r&&(r=s&&s>0?void 0:tp.height),{width:n,height:r}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=ap(void 0,void 0,{width:n,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return qh(i)&&qh(l)?s.createElement(xp,{width:i,height:l},e.children):s.createElement(gp,dp({},e,{width:n,height:r,ref:t}))}),bp=Symbol.for("immer-nothing"),yp=Symbol.for("immer-draftable"),jp=Symbol.for("immer-state");function Np(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var wp=Object,Sp=wp.getPrototypeOf,_p="constructor",kp="prototype",Cp="configurable",Ep="enumerable",Ap="writable",Pp="value",Op=e=>!!e&&!!e[jp];function Mp(e){var t;return!!e&&(Ip(e)||Up(e)||!!e[yp]||!(null===(t=e[_p])||void 0===t||!t[yp])||Hp(e)||qp(e))}var Tp=wp[kp][_p].toString(),Dp=new WeakMap;function Ip(e){if(!e||!Vp(e))return!1;const t=Sp(e);if(null===t||t===wp[kp])return!0;const a=wp.hasOwnProperty.call(t,_p)&&t[_p];if(a===Object)return!0;if(!Wp(a))return!1;let s=Dp.get(a);return void 0===s&&(s=Function.toString.call(a),Dp.set(a,s)),s===Tp}function Rp(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===Lp(e)){(a?Reflect.ownKeys(e):wp.keys(e)).forEach(a=>{t(a,e[a],e)})}else e.forEach((a,s)=>t(s,a,e))}function Lp(e){const t=e[jp];return t?t.type_:Up(e)?1:Hp(e)?2:qp(e)?3:0}var Fp=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lp(e))?e.has(t):wp[kp].hasOwnProperty.call(e,t)},zp=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lp(e))?e.get(t):e[t]},Bp=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Lp(e);2===s?e.set(t,a):3===s?e.add(a):e[t]=a};var Up=Array.isArray,Hp=e=>e instanceof Map,qp=e=>e instanceof Set,Vp=e=>"object"===typeof e,Wp=e=>"function"===typeof e,Gp=e=>"boolean"===typeof e;var Kp=e=>e.copy_||e.base_,Yp=e=>e.modified_?e.copy_:e.base_;function Jp(e,t){if(Hp(e))return new Map(e);if(qp(e))return new Set(e);if(Up(e))return Array[kp].slice.call(e);const a=Ip(e);if(!0===t||"class_only"===t&&!a){const t=wp.getOwnPropertyDescriptors(e);delete t[jp];let a=Reflect.ownKeys(t);for(let s=0;s<a.length;s++){const n=a[s],r=t[n];!1===r[Ap]&&(r[Ap]=!0,r[Cp]=!0),(r.get||r.set)&&(t[n]={[Cp]:!0,[Ap]:!0,[Ep]:r[Ep],[Pp]:e[n]})}return wp.create(Sp(e),t)}{const t=Sp(e);if(null!==t&&a)return u({},e);const s=wp.create(t);return wp.assign(s,e)}}function $p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xp(e)||Op(e)||!Mp(e)||(Lp(e)>1&&wp.defineProperties(e,{set:Qp,add:Qp,clear:Qp,delete:Qp}),wp.freeze(e),t&&Rp(e,(e,t)=>{$p(t,!0)},!1)),e}var Qp={[Pp]:function(){Np(2)}};function Xp(e){return null===e||!Vp(e)||wp.isFrozen(e)}var Zp="MapSet",ex="Patches",tx="ArrayMethods",ax={};function sx(e){const t=ax[e];return t||Np(0),t}var nx,rx=e=>!!ax[e];var ix=()=>nx;function lx(e,t){t&&(e.patchPlugin_=sx(ex),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ox(e){cx(e),e.drafts_.forEach(ux),e.drafts_=null}function cx(e){e===nx&&(nx=e.parent_)}var dx=e=>nx={drafts_:[],parent_:nx,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:rx(Zp)?sx(Zp):void 0,arrayMethodsPlugin_:rx(tx)?sx(tx):void 0};function ux(e){const t=e[jp];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function mx(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(void 0!==e&&e!==a){a[jp].modified_&&(ox(t),Np(4)),Mp(e)&&(e=hx(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(a[jp].base_,e,t)}else e=hx(t,a);return function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$p(t,a)}(t,e,!0),ox(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bp?e:void 0}function hx(e,t){if(Xp(t))return t;const a=t[jp];if(!a){return yx(t,e.handledSet_,e)}if(!xx(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:t}=a;if(t)for(;t.length>0;){t.pop()(e)}vx(a,e)}return a.copy_}function px(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var xx=(e,t)=>e.scope_===t,fx=[];function gx(e,t,a,s){var n;const r=Kp(e),i=e.type_;if(void 0!==s){if(zp(r,s,i)===t)return void Bp(r,s,a,i)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;Rp(r,(e,a)=>{if(Op(a)){const s=t.get(a)||[];s.push(e),t.set(a,s)}})}const l=null!==(n=e.draftLocations_.get(t))&&void 0!==n?n:fx;for(const o of l)Bp(r,o,a,i)}function vx(e,t){var a,s;if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(null!==(a=null===(s=e.assigned_)||void 0===s?void 0:s.size)&&void 0!==a?a:0)>0)){const{patchPlugin_:a}=t;if(a){const s=a.getPath(e);s&&a.generatePatches_(e,s,t)}px(e)}}function bx(e,t,a){const{scope_:s}=e;if(Op(a)){const n=a[jp];xx(n,s)&&n.callbacks_.push(function(){kx(e);const s=Yp(n);gx(e,a,s,t)})}else Mp(a)&&e.callbacks_.push(function(){const n=Kp(e);var r;3===e.type_?n.has(a)&&yx(a,s.handledSet_,s):zp(n,t,e.type_)===a&&s.drafts_.length>1&&!0===(null!==(r=e.assigned_.get(t))&&void 0!==r&&r)&&e.copy_&&yx(zp(e.copy_,t,e.type_),s.handledSet_,s)})}function yx(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Op(e)||t.has(e)||!Mp(e)||Xp(e)||(t.add(e),Rp(e,(s,n)=>{if(Op(n)){const t=n[jp];if(xx(t,a)){const a=Yp(t);Bp(e,s,a,e.type_),px(t)}}else Mp(n)&&yx(n,t,a)})),e}var jx={get(e,t){if(t===jp)return e;let a=e.scope_.arrayMethodsPlugin_;const s=1===e.type_&&"string"===typeof t;if(s&&null!==a&&void 0!==a&&a.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const n=Kp(e);if(!Fp(n,t,e.type_))return function(e,t,a){var s;const n=Sx(t,a);return n?Pp in n?n[Pp]:null===(s=n.get)||void 0===s?void 0:s.call(e.draft_):void 0}(e,n,t);const r=n[t];if(e.finalized_||!Mp(r))return r;if(s&&e.operationMethod&&null!==a&&void 0!==a&&a.isMutatingArrayMethod(e.operationMethod)&&function(e){const t=+e;return Number.isInteger(t)&&String(t)===e}(t))return r;if(r===wx(e.base_,t)){kx(e);const a=1===e.type_?+t:t,s=Cx(e.scope_,r,e,a);return e.copy_[a]=s}return r},has:(e,t)=>t in Kp(e),ownKeys:e=>Reflect.ownKeys(Kp(e)),set(e,t,a){const s=Sx(Kp(e),t);if(null!==s&&void 0!==s&&s.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const s=wx(Kp(e),t),i=null===s||void 0===s?void 0:s[jp];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(((n=a)===(r=s)?0!==n||1/n===1/r:n!==n&&r!==r)&&(void 0!==a||Fp(e.base_,t,e.type_)))return!0;kx(e),_x(e)}var n,r;return e.copy_[t]===a&&(void 0!==a||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),bx(e,t,a)),!0},deleteProperty:(e,t)=>(kx(e),void 0!==wx(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),_x(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const a=Kp(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s?{[Ap]:!0,[Cp]:1!==e.type_||"length"!==t,[Ep]:s[Ep],[Pp]:a[t]}:s},defineProperty(){Np(11)},getPrototypeOf:e=>Sp(e.base_),setPrototypeOf(){Np(12)}},Nx={};for(let a in jx){let e=jx[a];Nx[a]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}function wx(e,t){const a=e[jp];return(a?Kp(a):e)[t]}function Sx(e,t){if(!(t in e))return;let a=Sp(e);for(;a;){const e=Object.getOwnPropertyDescriptor(a,t);if(e)return e;a=Sp(a)}}function _x(e){e.modified_||(e.modified_=!0,e.parent_&&_x(e.parent_))}function kx(e){e.copy_||(e.assigned_=new Map,e.copy_=Jp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Nx.deleteProperty=function(e,t){return Nx.set.call(this,e,t,void 0)},Nx.set=function(e,t,a){return jx.set.call(this,e[0],t,a,e[0])};function Cx(e,t,a,s){var n,r;const[i,l]=Hp(t)?sx(Zp).proxyMap_(t,a):qp(t)?sx(Zp).proxySet_(t,a):function(e,t){const a=Up(e),s={type_:a?1:0,scope_:t?t.scope_:ix(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let n=s,r=jx;a&&(n=[s],r=Nx);const{revoke:i,proxy:l}=Proxy.revocable(n,r);return s.draft_=l,s.revoke_=i,[l,s]}(t,a);return(null!==(n=null===a||void 0===a?void 0:a.scope_)&&void 0!==n?n:ix()).drafts_.push(i),l.callbacks_=null!==(r=null===a||void 0===a?void 0:a.callbacks_)&&void 0!==r?r:[],l.key_=s,a&&void 0!==s?function(e,t,a){e.callbacks_.push(function(s){var n,r;const i=t;if(!i||!xx(i,s))return;null===(n=s.mapSetPlugin_)||void 0===n||n.fixSetContents(i);const l=Yp(i);gx(e,null!==(r=i.draft_)&&void 0!==r?r:i,l,a),vx(i,s)})}(a,l,s):l.callbacks_.push(function(e){var t;null===(t=e.mapSetPlugin_)||void 0===t||t.fixSetContents(l);const{patchPlugin_:a}=e;l.modified_&&a&&a.generatePatches_(l,[],e)}),i}function Ex(e){return Op(e)||Np(10),Ax(e)}function Ax(e){if(!Mp(e)||Xp(e))return e;const t=e[jp];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=Jp(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=Jp(e,!0);return Rp(a,(e,t)=>{Bp(a,e,Ax(t))},s),t&&(t.finalized_=!1),a}var Px=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(Wp(e)&&!Wp(t)){const a=t;t=e;const s=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return s.produce(e,e=>t.call(this,e,...r))}}let s;if(Wp(t)||Np(6),void 0===a||Wp(a)||Np(7),Mp(e)){const n=dx(this),r=Cx(n,e,void 0);let i=!0;try{s=t(r),i=!1}finally{i?ox(n):cx(n)}return lx(n,a),mx(s,n)}if(!e||!Vp(e)){if(s=t(e),void 0===s&&(s=e),s===bp&&(s=void 0),this.autoFreeze_&&$p(s,!0),a){const t=[],n=[];sx(ex).generateReplacementPatches_(e,s,{patches_:t,inversePatches_:n}),a(t,n)}return s}Np(1)},this.produceWithPatches=(e,a)=>{if(Wp(e))return function(a){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return t.produceWithPatches(a,t=>e(t,...n))};let s,n;return[this.produce(e,a,(e,t)=>{s=e,n=t}),s,n]},Gp(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Gp(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Gp(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Mp(e)||Np(8),Op(e)&&(e=Ex(e));const t=dx(this),a=Cx(t,e,void 0);return a[jp].isManual_=!0,cx(t),a}finishDraft(e,t){const a=e&&e[jp];a&&a.isManual_||Np(9);const{scope_:s}=a;return lx(s,t),mx(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const s=t[a];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}a>-1&&(t=t.slice(a+1));const s=sx(ex).applyPatches_;return Op(e)?s(e,t):this.produce(e,e=>s(e,t))}},Ox=Px.produce;function Mx(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Tx=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Dx=()=>Math.random().toString(36).substring(7).split("").join("."),Ix={INIT:"@@redux/INIT".concat(Dx()),REPLACE:"@@redux/REPLACE".concat(Dx()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Dx())};function Rx(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Lx(e,t,a){if("function"!==typeof e)throw new Error(Mx(2));if("function"===typeof t&&"function"===typeof a||"function"===typeof a&&"function"===typeof arguments[3])throw new Error(Mx(0));if("function"===typeof t&&"undefined"===typeof a&&(a=t,t=void 0),"undefined"!==typeof a){if("function"!==typeof a)throw new Error(Mx(1));return a(Lx)(e,t)}let s=e,n=t,r=new Map,i=r,l=0,o=!1;function c(){i===r&&(i=new Map,r.forEach((e,t)=>{i.set(t,e)}))}function d(){if(o)throw new Error(Mx(3));return n}function u(e){if("function"!==typeof e)throw new Error(Mx(4));if(o)throw new Error(Mx(5));let t=!0;c();const a=l++;return i.set(a,e),function(){if(t){if(o)throw new Error(Mx(6));t=!1,c(),i.delete(a),r=null}}}function m(e){if(!Rx(e))throw new Error(Mx(7));if("undefined"===typeof e.type)throw new Error(Mx(8));if("string"!==typeof e.type)throw new Error(Mx(17));if(o)throw new Error(Mx(9));try{o=!0,n=s(n,e)}finally{o=!1}return(r=i).forEach(e=>{e()}),e}m({type:Ix.INIT});return{dispatch:m,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Mx(10));s=e,m({type:Ix.REPLACE})},[Tx]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Mx(11));function a(){const e=t;e.next&&e.next(d())}a();return{unsubscribe:e(a)}},[Tx](){return this}}}}}function Fx(e){const t=Object.keys(e),a={};for(let r=0;r<t.length;r++){const s=t[r];0,"function"===typeof e[s]&&(a[s]=e[s])}const s=Object.keys(a);let n;try{!function(e){Object.keys(e).forEach(t=>{const a=e[t];if("undefined"===typeof a(void 0,{type:Ix.INIT}))throw new Error(Mx(12));if("undefined"===typeof a(void 0,{type:Ix.PROBE_UNKNOWN_ACTION()}))throw new Error(Mx(13))})}(a)}catch(J1){n=J1}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(n)throw n;let r=!1;const i={};for(let n=0;n<s.length;n++){const l=s[n],o=a[l],c=e[l],d=o(c,t);if("undefined"===typeof d){t&&t.type;throw new Error(Mx(14))}i[l]=d,r=r||d!==c}return r=r||s.length!==Object.keys(e).length,r?i:e}}function zx(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function Bx(e){return Rx(e)&&"type"in e&&"string"===typeof e.type}function Ux(e){return t=>{let{dispatch:a,getState:s}=t;return t=>n=>"function"===typeof n?n(a,s,e):t(n)}}var Hx=Ux(),qx=Ux;const Vx=["reducerPath"];var Wx="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?zx:zx.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Gx(e,t){function a(){if(t){let a=t(...arguments);if(!a)throw new Error(Uf(0));return u(u({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return a.toString=()=>"".concat(e),a.type=e,a.match=t=>Bx(t)&&t.type===e,a}var Kx=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return 1===a.length&&Array.isArray(a[0])?new e(...a[0].concat(this)):new e(...a.concat(this))}};function Yx(e){return Mp(e)?Ox(e,()=>{}):e}function Jx(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}var $x="RTK_autoBatch",Qx=()=>e=>({payload:e,meta:{[$x]:!0}}),Xx=e=>t=>{setTimeout(t,e)},Zx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const a=t(...arguments);let s=!0,n=!1,r=!1;const i=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Xx(10):"callback"===e.type?e.queueNotification:Xx(e.timeout),o=()=>{r=!1,n&&(n=!1,i.forEach(e=>e()))};return Object.assign({},a,{subscribe(e){const t=a.subscribe(()=>s&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{var t;return s=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[$x]),n=!s,n&&(r||(r=!0,l(o))),a.dispatch(e)}finally{s=!0}}})}};function ef(e){const t=function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:n=!0}=null!==e&&void 0!==e?e:{};let r=new Kx;return t&&("boolean"===typeof t?r.push(Hx):r.push(qx(t.extraArgument))),r},{reducer:a,middleware:s,devTools:n=!0,duplicateMiddlewareCheck:r=!0,preloadedState:i,enhancers:l}=e||{};let o,c;if("function"===typeof a)o=a;else{if(!Rx(a))throw new Error(Uf(1));o=Fx(a)}c="function"===typeof s?s(t):t();let d=zx;n&&(d=Wx(u({trace:!1},"object"===typeof n&&n)));const m=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>(a,s)=>{const n=e(a,s);let r=()=>{throw new Error(Mx(15))};const i={getState:n.getState,dispatch:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return r(e,...a)}},l=t.map(e=>e(i));return r=zx(...l)(n.dispatch),u(u({},n),{},{dispatch:r})}}(...c),h=(e=>function(t){const{autoBatch:a=!0}=null!==t&&void 0!==t?t:{};let s=new Kx(e);return a&&s.push(Zx("object"===typeof a?a:void 0)),s})(m);return Lx(o,i,d(..."function"===typeof l?l(h):h()))}function tf(e){const t={},a=[];let s;const n={addCase(e,a){const s="string"===typeof e?e:e.type;if(!s)throw new Error(Uf(28));if(s in t)throw new Error(Uf(29));return t[s]=a,n},addAsyncThunk:(e,s)=>(s.pending&&(t[e.pending.type]=s.pending),s.rejected&&(t[e.rejected.type]=s.rejected),s.fulfilled&&(t[e.fulfilled.type]=s.fulfilled),s.settled&&a.push({matcher:e.settled,reducer:s.settled}),n),addMatcher:(e,t)=>(a.push({matcher:e,reducer:t}),n),addDefaultCase:e=>(s=e,n)};return e(n),[t,a,s]}var af=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var sf=Symbol.for("rtk-slice-createasyncthunk");function nf(e,t){return"".concat(e,"/").concat(t)}function rf(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[sf];return function(e){const{name:t,reducerPath:s=t}=e;if(!t)throw new Error(Uf(11));const n=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return u({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},r=Object.keys(n),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const a="string"===typeof e?e:e.type;if(!a)throw new Error(Uf(12));if(a in l.sliceCaseReducersByType)throw new Error(Uf(13));return l.sliceCaseReducersByType[a]=t,o},addMatcher:(e,t)=>(l.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(l.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(l.sliceCaseReducersByName[e]=t,o)};function c(){const[t={},a=[],s]="function"===typeof e.extraReducers?tf(e.extraReducers):[e.extraReducers],n=u(u({},t),l.sliceCaseReducersByType);return function(e,t){let a,[s,n,r]=tf(t);if("function"===typeof e)a=()=>Yx(e());else{const t=Yx(e);a=()=>t}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a(),t=arguments.length>1?arguments[1]:void 0,i=[s[t.type],...n.filter(e=>{let{matcher:a}=e;return a(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===i.filter(e=>!!e).length&&(i=[r]),i.reduce((e,a)=>{if(a){if(Op(e)){const s=a(e,t);return void 0===s?e:s}if(Mp(e))return Ox(e,e=>a(e,t));{const s=a(e,t);if(void 0===s){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return s}}return e},e)}return i.getInitialState=a,i}(e.initialState,e=>{for(let t in n)e.addCase(t,n[t]);for(let t of l.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of a)e.addMatcher(t.matcher,t.reducer);s&&e.addDefaultCase(s)})}r.forEach(s=>{const r=n[s],i={reducerName:s,type:nf(t,s),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(r)?function(e,t,a){let s,n,{type:r,reducerName:i,createNotation:l}=e;if("reducer"in t){if(l&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Uf(17));s=t.reducer,n=t.prepare}else s=t;a.addCase(r,s).exposeCaseReducer(i,s).exposeAction(i,n?Gx(r,n):Gx(r))}(i,r,o):function(e,t,a,s){let{type:n,reducerName:r}=e;if(!s)throw new Error(Uf(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:c,settled:d,options:u}=t,m=s(n,i,u);a.exposeAction(r,m),l&&a.addCase(m.fulfilled,l);o&&a.addCase(m.pending,o);c&&a.addCase(m.rejected,c);d&&a.addMatcher(m.settled,d);a.exposeCaseReducer(r,{fulfilled:l||cf,pending:o||cf,rejected:c||cf,settled:d||cf})}(i,r,o,a)});const d=e=>e,m=new Map,h=new WeakMap;let p;function x(e,t){return p||(p=c()),p(e,t)}function f(){return p||(p=c()),p.getInitialState()}function g(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function s(e){let n=e[t];return"undefined"===typeof n&&a&&(n=Jx(h,s,f)),n}function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const s=Jx(m,a,()=>new WeakMap);return Jx(s,t,()=>{const s={};for(const[r,i]of Object.entries(null!==(n=e.selectors)&&void 0!==n?n:{})){var n;s[r]=lf(i,t,()=>Jx(h,t,f),a)}return s})}return{reducerPath:t,getSelectors:n,get selectors(){return n(s)},selectSlice:s}}const v=u(u({name:t,reducer:x,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:f},g(s)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:a}=t,n=i(t,Vx);const r=null!==a&&void 0!==a?a:s;return e.inject({reducerPath:r,reducer:x},n),u(u({},v),g(r,!0))}});return v}}function lf(e,t,a,s){function n(n){let r=t(n);"undefined"===typeof r&&s&&(r=a());for(var i=arguments.length,l=new Array(i>1?i-1:0),o=1;o<i;o++)l[o-1]=arguments[o];return e(r,...l)}return n.unwrapped=e,n}var of=rf();function cf(){}var df="listener",uf="completed",mf="cancelled",hf="task-".concat(mf),pf="task-".concat(uf),xf="".concat(df,"-").concat(mf),ff="".concat(df,"-").concat(uf),gf=class{constructor(e){c(this,"name","TaskAbortError"),c(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(mf," (reason: ").concat(e,")")}},vf=(e,t)=>{if("function"!==typeof e)throw new TypeError(Uf(32))},bf=()=>{},yf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bf;return e.catch(t),e},jf=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Nf=e=>{if(e.aborted)throw new gf(e.reason)};function wf(e,t){let a=bf;return new Promise((s,n)=>{const r=()=>n(new gf(e.reason));e.aborted?r():(a=jf(e,r),t.finally(()=>a()).then(s,n))}).finally(()=>{a=bf})}var Sf=e=>t=>yf(wf(e,t).then(t=>(Nf(e),t))),_f=e=>{const t=Sf(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:kf}=Object,Cf={},Ef="listenerMiddleware",Af=(e,t)=>(a,s)=>{vf(a);const n=new AbortController;var r;r=n,jf(e,()=>r.abort(e.reason));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof gf?"cancelled":"rejected",error:a}}finally{null===t||void 0===t||t()}})(async()=>{Nf(e),Nf(n.signal);const t=await a({pause:Sf(n.signal),delay:_f(n.signal),signal:n.signal});return Nf(n.signal),t},()=>n.abort(pf));return null!==s&&void 0!==s&&s.autoJoin&&t.push(i.catch(bf)),{result:Sf(e)(i),cancel(){n.abort(hf)}}},Pf=(e,t)=>(a,s)=>yf((async(a,s)=>{Nf(t);let n=()=>{};const r=[new Promise((t,s)=>{let r=e({predicate:a,effect:(e,a)=>{a.unsubscribe(),t([e,a.getState(),a.getOriginalState()])}});n=()=>{r(),s()}})];null!=s&&r.push(new Promise(e=>setTimeout(e,s,null)));try{const e=await wf(t,Promise.race(r));return Nf(t),e}finally{n()}})(a,s)),Of=e=>{let{type:t,actionCreator:a,matcher:s,predicate:n,effect:r}=e;if(t)n=Gx(t).match;else if(a)t=a.type,n=a.match;else if(s)n=s;else if(!n)throw new Error(Uf(21));return vf(r),{predicate:n,type:t,effect:r}},Mf=kf(e=>{const{type:t,predicate:a,effect:s}=Of(e);return{id:af(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Uf(22))}}},{withTypes:()=>Mf}),Tf=(e,t)=>{const{type:a,effect:s,predicate:n}=Of(t);return Array.from(e.values()).find(e=>("string"===typeof a?e.type===a:e.predicate===n)&&e.effect===s)},Df=e=>{e.pending.forEach(e=>{e.abort(xf)})},If=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},Rf=kf(Gx("".concat(Ef,"/add")),{withTypes:()=>Rf}),Lf=Gx("".concat(Ef,"/removeAll")),Ff=kf(Gx("".concat(Ef,"/remove")),{withTypes:()=>Ff}),zf=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.error("".concat(Ef,"/error"),...t)},Bf=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,a=new Map,{extra:s,onError:n=zf}=e;vf(n);const r=e=>{var a;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&Df(e)}))(null!==(a=Tf(t,e))&&void 0!==a?a:Mf(e))};kf(r,{withTypes:()=>r});const i=e=>{const a=Tf(t,e);return a&&(a.unsubscribe(),e.cancelActive&&Df(a)),!!a};kf(i,{withTypes:()=>i});const l=async(e,i,l,o)=>{const c=new AbortController,d=Pf(r,c.signal),u=[];try{e.pending.add(c),(e=>{var t;const s=null!==(t=a.get(e))&&void 0!==t?t:0;a.set(e,s+1)})(e),await Promise.resolve(e.effect(i,kf({},l,{getOriginalState:o,condition:(e,t)=>d(e,t).then(Boolean),take:d,delay:_f(c.signal),pause:Sf(c.signal),extra:s,signal:c.signal,fork:Af(c.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,a)=>{e!==c&&(e.abort(xf),a.delete(e))})},cancel:()=>{c.abort(xf),e.pending.delete(c)},throwIfCancelled:()=>{Nf(c.signal)}})))}catch(m){m instanceof gf||If(n,m,{raisedBy:"effect"})}finally{await Promise.all(u),c.abort(ff),(e=>{var t;const s=null!==(t=a.get(e))&&void 0!==t?t:1;1===s?a.delete(e):a.set(e,s-1)})(e),e.pending.delete(c)}},o=((e,t)=>()=>{for(const e of t.keys())Df(e);e.clear()})(t,a);return{middleware:e=>a=>s=>{if(!Bx(s))return a(s);if(Rf.match(s))return r(s.payload);if(Lf.match(s))return void o();if(Ff.match(s))return i(s.payload);let c=e.getState();const d=()=>{if(c===Cf)throw new Error(Uf(23));return c};let u;try{if(u=a(s),t.size>0){const a=e.getState(),r=Array.from(t.values());for(const t of r){let r=!1;try{r=t.predicate(s,a,c)}catch(m){r=!1,If(n,m,{raisedBy:"predicate"})}r&&l(t,s,e,d)}}}finally{c=Cf}return u},startListening:r,stopListening:i,clearListeners:o}};Symbol.for("rtk-state-proxy-original");function Uf(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Hf=(e,t)=>{if(t&&Array.isArray(e)){var a=Number.parseInt(t,10);if(!Uh(a))return e[a]}},qf=of({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Vf=qf.reducer,{createEventEmitter:Wf}=qf.actions;a(7256);function Gf(e){e()}var Kf={notify(){},get:()=>[]};function Yf(e,t){let a,s=Kf,n=0,r=!1;function i(){c.onStateChange&&c.onStateChange()}function l(){n++,a||(a=t?t.addNestedSub(i):e.subscribe(i),s=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Gf(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=e;for(;a;)t.push(a),a=a.next;return t},subscribe(a){let s=!0;const n=t={callback:a,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){s&&null!==e&&(s=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}())}function o(){n--,a&&0===n&&(a(),a=void 0,s.clear(),s=Kf)}const c={addNestedSub:function(e){l();const t=s.subscribe(e);let a=!1;return()=>{a||(a=!0,t(),o())}},notifyNestedSubs:function(){s.notify()},handleChangeWrapper:i,isSubscribed:function(){return r},trySubscribe:function(){r||(r=!0,l())},tryUnsubscribe:function(){r&&(r=!1,o())},getListeners:()=>s};return c}var Jf=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),$f=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),Qf=(()=>Jf||$f?s.useLayoutEffect:s.useEffect)();function Xf(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Zf(e,t){if(Xf(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let n=0;n<a.length;n++)if(!Object.prototype.hasOwnProperty.call(t,a[n])||!Xf(e[a[n]],t[a[n]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var eg=Symbol.for("react-redux-context"),tg="undefined"!==typeof globalThis?globalThis:{};function ag(){var e;if(!s.createContext)return{};const t=null!==(e=tg[eg])&&void 0!==e?e:tg[eg]=new Map;let a=t.get(s.createContext);return a||(a=s.createContext(null),t.set(s.createContext,a)),a}var sg=ag();var ng=function(e){const{children:t,context:a,serverState:n,store:r}=e,i=s.useMemo(()=>{const e=Yf(r);return{store:r,subscription:e,getServerState:n?()=>n:void 0}},[r,n]),l=s.useMemo(()=>r.getState(),[r]);Qf(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,l]);const o=a||sg;return s.createElement(o.Provider,{value:i},t)};var rg=Symbol.for("immer-nothing"),ig=Symbol.for("immer-draftable"),lg=Symbol.for("immer-state");function og(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var cg=Object.getPrototypeOf;function dg(e){return!!e&&!!e[lg]}function ug(e){var t;return!!e&&(pg(e)||Array.isArray(e)||!!e[ig]||!(null===(t=e.constructor)||void 0===t||!t[ig])||bg(e)||yg(e))}var mg=Object.prototype.constructor.toString(),hg=new WeakMap;function pg(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if("function"!==typeof a)return!1;let s=hg.get(a);return void 0===s&&(s=Function.toString.call(a),hg.set(a,s)),s===mg}function xg(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===fg(e)){(a?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)})}else e.forEach((a,s)=>t(s,a,e))}function fg(e){const t=e[lg];return t?t.type_:Array.isArray(e)?1:bg(e)?2:yg(e)?3:0}function gg(e,t){return 2===fg(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vg(e,t,a){const s=fg(e);2===s?e.set(t,a):3===s?e.add(a):e[t]=a}function bg(e){return e instanceof Map}function yg(e){return e instanceof Set}function jg(e){return e.copy_||e.base_}function Ng(e,t){if(bg(e))return new Map(e);if(yg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=pg(e);if(!0===t||"class_only"===t&&!a){const t=Object.getOwnPropertyDescriptors(e);delete t[lg];let a=Reflect.ownKeys(t);for(let s=0;s<a.length;s++){const n=a[s],r=t[n];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[n]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[n]})}return Object.create(cg(e),t)}{const t=cg(e);if(null!==t&&a)return u({},e);const s=Object.create(t);return Object.assign(s,e)}}function wg(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _g(e)||dg(e)||!ug(e)||(fg(e)>1&&Object.defineProperties(e,{set:Sg,add:Sg,clear:Sg,delete:Sg}),Object.freeze(e),t&&Object.values(e).forEach(e=>wg(e,!0))),e}var Sg={value:function(){og(2)}};function _g(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var kg,Cg={};function Eg(e){const t=Cg[e];return t||og(0),t}function Ag(){return kg}function Pg(e,t){t&&(Eg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Og(e){Mg(e),e.drafts_.forEach(Dg),e.drafts_=null}function Mg(e){e===kg&&(kg=e.parent_)}function Tg(e){return kg={drafts_:[],parent_:kg,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Dg(e){const t=e[lg];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Ig(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return void 0!==e&&e!==a?(a[lg].modified_&&(Og(t),og(4)),ug(e)&&(e=Rg(t,e),t.parent_||Fg(t,e)),t.patches_&&Eg("Patches").generateReplacementPatches_(a[lg].base_,e,t.patches_,t.inversePatches_)):e=Rg(t,a,[]),Og(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==rg?e:void 0}function Rg(e,t,a){if(_g(t))return t;const s=e.immer_.shouldUseStrictIteration(),n=t[lg];if(!n)return xg(t,(s,r)=>Lg(e,n,t,s,r,a),s),t;if(n.scope_!==e)return t;if(!n.modified_)return Fg(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let r=t,i=!1;3===n.type_&&(r=new Set(t),t.clear(),i=!0),xg(r,(s,r)=>Lg(e,n,t,s,r,a,i),s),Fg(e,t,!1),a&&e.patches_&&Eg("Patches").generatePatches_(n,a,e.patches_,e.inversePatches_)}return n.copy_}function Lg(e,t,a,s,n,r,i){if(null==n)return;if("object"!==typeof n&&!i)return;const l=_g(n);if(!l||i){if(dg(n)){const i=Rg(e,n,r&&t&&3!==t.type_&&!gg(t.assigned_,s)?r.concat(s):void 0);if(vg(a,s,i),!dg(i))return;e.canAutoFreeze_=!1}else i&&a.add(n);if(ug(n)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[s]===n&&l)return;Rg(e,n),t&&t.scope_.parent_||"symbol"===typeof s||!(bg(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))||Fg(e,n)}}}function Fg(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wg(t,a)}var zg={get(e,t){if(t===lg)return e;const a=jg(e);if(!gg(a,t))return function(e,t,a){var s;const n=Hg(t,a);return n?"value"in n?n.value:null===(s=n.get)||void 0===s?void 0:s.call(e.draft_):void 0}(e,a,t);const s=a[t];return e.finalized_||!ug(s)?s:s===Ug(e.base_,t)?(Vg(e),e.copy_[t]=Wg(s,e)):s},has:(e,t)=>t in jg(e),ownKeys:e=>Reflect.ownKeys(jg(e)),set(e,t,a){const s=Hg(jg(e),t);if(null!==s&&void 0!==s&&s.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const s=Ug(jg(e),t),i=null===s||void 0===s?void 0:s[lg];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(((n=a)===(r=s)?0!==n||1/n===1/r:n!==n&&r!==r)&&(void 0!==a||gg(e.base_,t)))return!0;Vg(e),qg(e)}var n,r;return e.copy_[t]===a&&(void 0!==a||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Ug(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Vg(e),qg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const a=jg(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:s.enumerable,value:a[t]}:s},defineProperty(){og(11)},getPrototypeOf:e=>cg(e.base_),setPrototypeOf(){og(12)}},Bg={};function Ug(e,t){const a=e[lg];return(a?jg(a):e)[t]}function Hg(e,t){if(!(t in e))return;let a=cg(e);for(;a;){const e=Object.getOwnPropertyDescriptor(a,t);if(e)return e;a=cg(a)}}function qg(e){e.modified_||(e.modified_=!0,e.parent_&&qg(e.parent_))}function Vg(e){e.copy_||(e.copy_=Ng(e.base_,e.scope_.immer_.useStrictShallowCopy_))}xg(zg,(e,t)=>{Bg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Bg.deleteProperty=function(e,t){return Bg.set.call(this,e,t,void 0)},Bg.set=function(e,t,a){return zg.set.call(this,e[0],t,a,e[0])};function Wg(e,t){const a=bg(e)?Eg("MapSet").proxyMap_(e,t):yg(e)?Eg("MapSet").proxySet_(e,t):function(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:Ag(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=s,r=zg;a&&(n=[s],r=Bg);const{revoke:i,proxy:l}=Proxy.revocable(n,r);return s.draft_=l,s.revoke_=i,l}(e,t);return(t?t.scope_:Ag()).drafts_.push(a),a}function Gg(e){if(!ug(e)||_g(e))return e;const t=e[lg];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=Ng(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=Ng(e,!0);return xg(a,(e,t)=>{vg(a,e,Gg(t))},s),t&&(t.finalized_=!1),a}var Kg=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,a)=>{if("function"===typeof e&&"function"!==typeof t){const a=t;t=e;const s=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return s.produce(e,e=>t.call(this,e,...r))}}let s;if("function"!==typeof t&&og(6),void 0!==a&&"function"!==typeof a&&og(7),ug(e)){const n=Tg(this),r=Wg(e,void 0);let i=!0;try{s=t(r),i=!1}finally{i?Og(n):Mg(n)}return Pg(n,a),Ig(s,n)}if(!e||"object"!==typeof e){if(s=t(e),void 0===s&&(s=e),s===rg&&(s=void 0),this.autoFreeze_&&wg(s,!0),a){const t=[],n=[];Eg("Patches").generateReplacementPatches_(e,s,t,n),a(t,n)}return s}og(1)},this.produceWithPatches=(e,a)=>{if("function"===typeof e)return function(a){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return t.produceWithPatches(a,t=>e(t,...n))};let s,n;return[this.produce(e,a,(e,t)=>{s=e,n=t}),s,n]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ug(e)||og(8),dg(e)&&(e=function(e){dg(e)||og(10);return Gg(e)}(e));const t=Tg(this),a=Wg(e,void 0);return a[lg].isManual_=!0,Mg(t),a}finishDraft(e,t){const a=e&&e[lg];a&&a.isManual_||og(9);const{scope_:s}=a;return Pg(s,t),Ig(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const s=t[a];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}a>-1&&(t=t.slice(a+1));const s=Eg("Patches").applyPatches_;return dg(e)?s(e,t):this.produce(e,e=>s(e,t))}};Kg.produce;var Yg={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Jg=of({name:"tooltip",initialState:{itemInteraction:{click:Yg,hover:Yg},axisInteraction:{click:Yg,hover:Yg},keyboardInteraction:Yg,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Qx()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,n=Ex(e).tooltipItemPayloads.indexOf(a);n>-1&&(e.tooltipItemPayloads[n]=s)},prepare:Qx()},removeTooltipEntrySettings:{reducer(e,t){var a=Ex(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:Qx()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:$g,replaceTooltipEntrySettings:Qg,removeTooltipEntrySettings:Xg,setTooltipSettingsState:Zg,setActiveMouseOverItemIndex:ev,mouseLeaveItem:tv,mouseLeaveChart:av,setActiveClickItemIndex:sv,setMouseOverAxisIndex:nv,setMouseClickAxisIndex:rv,setSyncInteraction:iv,setKeyboardInteraction:lv}=Jg.actions,ov=Jg.reducer,cv=of({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;null!=a&&(e.dataStartIndex=a),null!=s&&(e.dataEndIndex=s)}}}),{setChartData:dv,setDataStartEndIndexes:uv,setComputedData:mv}=cv.actions,hv=cv.reducer,pv=of({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,n,r;e.margin.top=null!==(a=t.payload.top)&&void 0!==a?a:0,e.margin.right=null!==(s=t.payload.right)&&void 0!==s?s:0,e.margin.bottom=null!==(n=t.payload.bottom)&&void 0!==n?n:0,e.margin.left=null!==(r=t.payload.left)&&void 0!==r?r:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:xv,setLayout:fv,setChartSize:gv,setScale:vv}=pv.actions,bv=pv.reducer;function yv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var jv=e=>Array.isArray(e)?e:[e];function Nv(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const a=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(a,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var wv="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Sv(){return{s:0,v:void 0,o:null,p:null}}function _v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:s}=t;let n,r=0;function i(){let t=a;const{length:i}=arguments;for(let e=0,a=i;e<a;e++){const a=arguments[e];if("function"===typeof a||"object"===typeof a&&null!==a){let e=t.o;null===e&&(t.o=e=new WeakMap);const s=e.get(a);void 0===s?(t=Sv(),e.set(a,t)):t=s}else{let e=t.p;null===e&&(t.p=e=new Map);const s=e.get(a);void 0===s?(t=Sv(),e.set(a,t)):t=s}}const l=t;let o;if(1===t.s)o=t.v;else if(o=e.apply(null,arguments),r++,s){var c,d,u;const e=null!==(c=null===(d=n)||void 0===d||null===(u=d.deref)||void 0===u?void 0:u.call(d))&&void 0!==c?c:n;null!=e&&s(e,o)&&(o=e,0!==r&&r--);n="object"===typeof o&&null!==o||"function"===typeof o?new wv(o):o}return l.s=1,l.v=o,o}return i.clearCache=()=>{a={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>r,i.resetResultsCount=()=>{r=0},i}function kv(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];const n="function"===typeof e?{memoize:e,memoizeOptions:a}:e,r=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];let s,r=0,i=0,l={},o=t.pop();"object"===typeof o&&(l=o,o=t.pop()),yv(o,"createSelector expects an output function after the inputs, but received: [".concat(typeof o,"]"));const c=u(u({},n),l),{memoize:d,memoizeOptions:m=[],argsMemoize:h=_v,argsMemoizeOptions:p=[],devModeChecks:x={}}=c,f=jv(m),g=jv(p),v=Nv(t),b=d(function(){return r++,o.apply(null,arguments)},...f);const y=h(function(){i++;const e=function(e,t){const a=[],{length:s}=e;for(let n=0;n<s;n++)a.push(e[n].apply(null,t));return a}(v,arguments);return s=b.apply(null,e),s},...g);return Object.assign(y,{resultFunc:o,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>s,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Cv=kv(_v),Ev=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cv;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const a=Object.keys(e),s=t(a.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.reduce((e,t,s)=>(e[a[s]]=t,e),{})});return s},{withTypes:()=>Ev}),Av=a(3044),Pv=(0,s.createContext)(null),Ov=e=>e,Mv=()=>{var e=(0,s.useContext)(Pv);return e?e.store.dispatch:Ov},Tv=()=>{},Dv=()=>Tv,Iv=(e,t)=>e===t;function Rv(e){var t=(0,s.useContext)(Pv),a=(0,s.useMemo)(()=>t?t=>{if(null!=t)return e(t)}:Tv,[t,e]);return(0,Av.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:Dv,t?t.store.getState:Tv,t?t.store.getState:Tv,a,Iv)}var Lv=a(830),Fv=a.n(Lv),zv=e=>e.legend.settings;Cv([e=>e.legend.payload,zv],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?Fv()(s,a):s});function Bv(e,t){if((n=e.length)>1)for(var a,s,n,r=1,i=e[t[0]],l=i.length;r<n;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}Array.prototype.slice;function Uv(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Hv(e){return function(){return e}}function qv(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function Vv(e,t){return e[t]}function Wv(e){const t=[];return t.key=e,t}function Gv(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function Kv(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function Yv(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kv(Object(a),!0).forEach(function(t){Jv(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kv(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Jv(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $v(e,t,a){return $h(e)||$h(t)?a:Vh(t)?Lh()(e,t,a):"function"===typeof t?t(e):a}var Qv=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Xv=(e,t,a,s)=>{if(s)return e.map(e=>e.coordinate);var n,r,i=e.map(e=>(e.coordinate===t&&(n=!0),e.coordinate===a&&(r=!0),e.coordinate));return n||i.push(t),r||i.push(a),i},Zv=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:n,range:r,scale:i,realScaleType:l,isCategorical:o,categoricalDomain:c,tickCount:d,ticks:u,niceTicks:m,axisType:h}=e;if(!i)return null;var p="scaleBand"===l&&i.bandwidth?i.bandwidth()/2:2,x=(t||a)&&"category"===n&&i.bandwidth?i.bandwidth()/p:0;if(x="angleAxis"===h&&r&&r.length>=2?2*Bh(r[0]-r[1])*x:x,t&&(u||m)){var f=(u||m||[]).map((e,t)=>{var a=s?s.indexOf(e):e,n=i.map(a);return op(n)?{coordinate:n+x,value:e,offset:x,index:t}:null}).filter(Xh);return f}return o&&c?c.map((e,t)=>{var a=i.map(e);return op(a)?{coordinate:a+x,value:e,index:t,offset:x}:null}).filter(Xh):i.ticks&&!a&&null!=d?i.ticks(d).map((e,t)=>{var a=i.map(e);return op(a)?{coordinate:a+x,value:e,index:t,offset:x}:null}).filter(Xh):i.domain().map((e,t)=>{var a=i.map(e);return op(a)?{coordinate:a+x,value:s?s[e]:e,index:t,offset:x}:null}).filter(Xh)},eb={sign:e=>{var t,a=e.length;if(!(a<=0)){var s=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==s||s<=0))for(var n=0;n<s;++n)for(var r=0,i=0,l=0;l<a;++l){var o=e[l],c=null===o||void 0===o?void 0:o[n];if(null!=c){var d=c[1],u=c[0],m=Uh(d)?u:d;m>=0?(c[0]=r,r+=m,c[1]=r):(c[0]=i,i+=m,c[1]=i)}}}},expand:function(e,t){if((s=e.length)>0){for(var a,s,n,r=0,i=e[0].length;r<i;++r){for(n=a=0;a<s;++a)n+=e[a][r][1]||0;if(n)for(a=0;a<s;++a)e[a][r][1]/=n}Bv(e,t)}},none:Bv,silhouette:function(e,t){if((a=e.length)>0){for(var a,s=0,n=e[t[0]],r=n.length;s<r;++s){for(var i=0,l=0;i<a;++i)l+=e[i][s][1]||0;n[s][1]+=n[s][0]=-l/2}Bv(e,t)}},wiggle:function(e,t){if((n=e.length)>0&&(s=(a=e[t[0]]).length)>0){for(var a,s,n,r=0,i=1;i<s;++i){for(var l=0,o=0,c=0;l<n;++l){for(var d=e[t[l]],u=d[i][1]||0,m=(u-(d[i-1][1]||0))/2,h=0;h<l;++h){var p=e[t[h]];m+=(p[i][1]||0)-(p[i-1][1]||0)}o+=u,c+=m*u}a[i-1][1]+=a[i-1][0]=r,o&&(r-=c/o)}a[i-1][1]+=a[i-1][0]=r,Bv(e,t)}},positive:e=>{var t,a=e.length;if(!(a<=0)){var s=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==s||s<=0))for(var n=0;n<s;++n)for(var r=0,i=0;i<a;++i){var l=e[i],o=null===l||void 0===l?void 0:l[n];if(null!=o){var c=Uh(o[1])?o[0]:o[1];c>=0?(o[0]=r,r+=c,o[1]=r):(o[0]=0,o[1]=0)}}}}},tb=(e,t,a)=>{var s,n=null!==(s=eb[a])&&void 0!==s?s:Bv,r=function(){var e=Hv([]),t=qv,a=Bv,s=Vv;function n(n){var r,i,l=Array.from(e.apply(this,arguments),Wv),o=l.length,c=-1;for(const e of n)for(r=0,++c;r<o;++r)(l[r][c]=[0,+s(e,l[r].key,c,n)]).data=e;for(r=0,i=Uv(t(l));r<o;++r)l[i[r]].index=r;return a(l,i),l}return n.keys=function(t){return arguments.length?(e="function"===typeof t?t:Hv(Array.from(t)),n):e},n.value=function(e){return arguments.length?(s="function"===typeof e?e:Hv(+e),n):s},n.order=function(e){return arguments.length?(t=null==e?qv:"function"===typeof e?e:Hv(Array.from(e)),n):t},n.offset=function(e){return arguments.length?(a=null==e?Bv:e,n):a},n}().keys(t).value((e,t)=>Number($v(e,t,0))).order(qv).offset(n),i=r(e);return i.forEach((a,s)=>{a.forEach((a,n)=>{var r=$v(e[n],t[s],0);Array.isArray(r)&&2===r.length&&qh(r[0])&&qh(r[1])&&(a[0]=r[0],a[1]=r[1])})}),i};var ab=e=>{var{axis:t,ticks:a,offset:s,bandSize:n,entry:r,index:i}=e;if("category"===t.type)return a[i]?a[i].coordinate+s:null;var l=$v(r,t.dataKey,t.scale.domain()[i]);if($h(l))return null;var o=t.scale.map(l);return qh(o)?o-n/2+s:null},sb=(e,t,a)=>{var s;if(null!=e)return s=Object.keys(e).reduce((s,n)=>{var r=e[n];if(!r)return s;var{stackedData:i}=r,l=i.reduce((e,s)=>{var n=(e=>{var t=e.flat(2).filter(qh);return[Math.min(...t),Math.max(...t)]})(Gv(s,t,a));return op(n[0])&&op(n[1])?[Math.min(e[0],n[0]),Math.max(e[1],n[1])]:e},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]),[s[0]===1/0?0:s[0],s[1]===-1/0?0:s[1]]},nb=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rb=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ib=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var n=Fv()(t,e=>e.coordinate),r=1/0,i=1,l=n.length;i<l;i++){var o=n[i],c=n[i-1];r=Math.min(((null===o||void 0===o?void 0:o.coordinate)||0)-((null===c||void 0===c?void 0:c.coordinate)||0),r)}return r===1/0?0:r}return a?void 0:0};function lb(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:n,name:r}=e;return Yv(Yv({},t),{},{dataKey:a,payload:s,value:n,name:r})}function ob(e,t){return e?String(e):"string"===typeof t?t:void 0}var cb=e=>e.layout.width,db=e=>e.layout.height,ub=e=>e.layout.scale,mb=e=>e.layout.margin,hb=Cv(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),pb=Cv(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),xb="data-recharts-item-index",fb="data-recharts-item-id";function gb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function vb(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gb(Object(a),!0).forEach(function(t){bb(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gb(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function bb(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var yb=Cv([cb,db,mb,e=>e.brush.height,function(e){return pb(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return pb(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return hb(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return hb(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},zv,e=>e.legend.size],(e,t,a,s,n,r,i,l,o,c)=>{var d={left:(a.left||0)+n,right:(a.right||0)+r},u=vb(vb({},{top:(a.top||0)+i,bottom:(a.bottom||0)+l}),d),m=u.bottom;u.bottom+=s,u=((e,t,a)=>{if(t&&a){var{width:s,height:n}=a,{align:r,verticalAlign:i,layout:l}=t;if(("vertical"===l||"horizontal"===l&&"middle"===i)&&"center"!==r&&qh(e[r]))return Yv(Yv({},e),{},{[r]:e[r]+(s||0)});if(("horizontal"===l||"vertical"===l&&"center"===r)&&"middle"!==i&&qh(e[i]))return Yv(Yv({},e),{},{[i]:e[i]+(n||0)})}return e})(u,o,c);var h=e-u.left-u.right,p=t-u.top-u.bottom;return vb(vb({brushBottom:m},u),{},{width:Math.max(h,0),height:Math.max(p,0)})}),jb=Cv(yb,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Nb=Cv(cb,db,(e,t)=>({x:0,y:0,width:e,height:t})),wb=(0,s.createContext)(null),Sb=()=>null!=(0,s.useContext)(wb),_b=e=>e.brush,kb=Cv([_b,yb,mb],(e,t,a)=>({height:e.height,x:qh(e.x)?e.x:t.left,y:qh(e.y)?e.y:t.top+t.height+t.brushBottom-((null===a||void 0===a?void 0:a.bottom)||0),width:qh(e.width)?e.width:t.width}));function Cb(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Eb=()=>{var e,t=Sb(),a=Rv(jb),s=Rv(kb),n=null===(e=Rv(_b))||void 0===e?void 0:e.padding;return t&&s&&n?{width:s.width-n.left-n.right,height:s.height-n.top-n.bottom,x:n.left,y:n.top}:a},Ab={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Pb=()=>{var e;return null!==(e=Rv(yb))&&void 0!==e?e:Ab},Ob=()=>Rv(cb),Mb=()=>Rv(db),Tb=e=>e.layout.layoutType,Db=()=>Rv(Tb),Ib=()=>{var e=Db();if("horizontal"===e||"vertical"===e)return e},Rb=e=>{var t=e.layout.layoutType;if("centric"===t||"radial"===t)return t},Lb=e=>{var t=Mv(),a=Sb(),{width:n,height:r}=e,i=fp(),l=n,o=r;return i&&(l=i.width>0?i.width:n,o=i.height>0?i.height:r),(0,s.useEffect)(()=>{!a&&cp(l)&&cp(o)&&t(gv({width:l,height:o}))},[t,a,l,o]),null},Fb=a(8354),zb=a.n(Fb);function Bb(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Ub(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class Hb extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gb;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[a,s]of e)this.set(a,s)}get(e){return super.get(qb(this,e))}has(e){return super.has(qb(this,e))}set(e,t){return super.set(Vb(this,e),t)}delete(e){return super.delete(Wb(this,e))}}Set;function qb(e,t){let{_intern:a,_key:s}=e;const n=s(t);return a.has(n)?a.get(n):t}function Vb(e,t){let{_intern:a,_key:s}=e;const n=s(t);return a.has(n)?a.get(n):(a.set(n,t),t)}function Wb(e,t){let{_intern:a,_key:s}=e;const n=s(t);return a.has(n)&&(t=a.get(n),a.delete(n)),t}function Gb(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Kb=Symbol("implicit");function Yb(){var e=new Hb,t=[],a=[],s=Kb;function n(n){let r=e.get(n);if(void 0===r){if(s!==Kb)return s;e.set(n,r=t.push(n)-1)}return a[r%a.length]}return n.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Hb;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return n},n.range=function(e){return arguments.length?(a=Array.from(e),n):a.slice()},n.unknown=function(e){return arguments.length?(s=e,n):s},n.copy=function(){return Yb(t,a).unknown(s)},Bb.apply(n,arguments),n}function Jb(){var e,t,a=Yb().unknown(void 0),s=a.domain,n=a.range,r=0,i=1,l=!1,o=0,c=0,d=.5;function u(){var a=s().length,u=i<r,m=u?i:r,h=u?r:i;e=(h-m)/Math.max(1,a-o+2*c),l&&(e=Math.floor(e)),m+=(h-m-e*(a-o))*d,t=e*(1-o),l&&(m=Math.round(m),t=Math.round(t));var p=function(e,t,a){e=+e,t=+t,a=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+a;for(var s=-1,n=0|Math.max(0,Math.ceil((t-e)/a)),r=new Array(n);++s<n;)r[s]=e+s*a;return r}(a).map(function(t){return m+e*t});return n(u?p.reverse():p)}return delete a.unknown,a.domain=function(e){return arguments.length?(s(e),u()):s()},a.range=function(e){return arguments.length?([r,i]=e,r=+r,i=+i,u()):[r,i]},a.rangeRound=function(e){return[r,i]=e,r=+r,i=+i,l=!0,u()},a.bandwidth=function(){return t},a.step=function(){return e},a.round=function(e){return arguments.length?(l=!!e,u()):l},a.padding=function(e){return arguments.length?(o=Math.min(1,c=+e),u()):o},a.paddingInner=function(e){return arguments.length?(o=Math.min(1,e),u()):o},a.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},a.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},a.copy=function(){return Jb(s(),[r,i]).round(l).paddingInner(o).paddingOuter(c).align(d)},Bb.apply(u(),arguments)}function $b(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $b(t())},e}function Qb(){return $b(Jb.apply(null,arguments).paddingInner(1))}const Xb=Math.sqrt(50),Zb=Math.sqrt(10),ey=Math.sqrt(2);function ty(e,t,a){const s=(t-e)/Math.max(0,a),n=Math.floor(Math.log10(s)),r=s/Math.pow(10,n),i=r>=Xb?10:r>=Zb?5:r>=ey?2:1;let l,o,c;return n<0?(c=Math.pow(10,-n)/i,l=Math.round(e*c),o=Math.round(t*c),l/c<e&&++l,o/c>t&&--o,c=-c):(c=Math.pow(10,n)*i,l=Math.round(e/c),o=Math.round(t/c),l*c<e&&++l,o*c>t&&--o),o<l&&.5<=a&&a<2?ty(e,t,2*a):[l,o,c]}function ay(e,t,a){if(!((a=+a)>0))return[];if((e=+e)===(t=+t))return[e];const s=t<e,[n,r,i]=s?ty(t,e,a):ty(e,t,a);if(!(r>=n))return[];const l=r-n+1,o=new Array(l);if(s)if(i<0)for(let c=0;c<l;++c)o[c]=(r-c)/-i;else for(let c=0;c<l;++c)o[c]=(r-c)*i;else if(i<0)for(let c=0;c<l;++c)o[c]=(n+c)/-i;else for(let c=0;c<l;++c)o[c]=(n+c)*i;return o}function sy(e,t,a){return ty(e=+e,t=+t,a=+a)[2]}function ny(e,t,a){a=+a;const s=(t=+t)<(e=+e),n=s?sy(t,e,a):sy(e,t,a);return(s?-1:1)*(n<0?1/-n:n)}function ry(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iy(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ly(e){let t,a,s;function n(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(n<r){if(0!==t(s,s))return r;do{const t=n+r>>>1;a(e[t],s)<0?n=t+1:r=t}while(n<r)}return n}return 2!==e.length?(t=ry,a=(t,a)=>ry(e(t),a),s=(t,a)=>e(t)-a):(t=e===ry||e===iy?e:oy,a=e,s=e),{left:n,center:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=n(e,t,a,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return r>a&&s(e[r-1],t)>-s(e[r],t)?r-1:r},right:function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(n<r){if(0!==t(s,s))return r;do{const t=n+r>>>1;a(e[t],s)<=0?n=t+1:r=t}while(n<r)}return n}}}function oy(){return 0}function cy(e){return null===e?NaN:+e}const dy=ly(ry),uy=dy.right,my=(dy.left,ly(cy).center,uy);function hy(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function py(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function xy(){}var fy=.7,gy=1/fy,vy="\\s*([+-]?\\d+)\\s*",by="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jy=/^#([0-9a-f]{3,8})$/,Ny=new RegExp("^rgb\\(".concat(vy,",").concat(vy,",").concat(vy,"\\)$")),wy=new RegExp("^rgb\\(".concat(yy,",").concat(yy,",").concat(yy,"\\)$")),Sy=new RegExp("^rgba\\(".concat(vy,",").concat(vy,",").concat(vy,",").concat(by,"\\)$")),_y=new RegExp("^rgba\\(".concat(yy,",").concat(yy,",").concat(yy,",").concat(by,"\\)$")),ky=new RegExp("^hsl\\(".concat(by,",").concat(yy,",").concat(yy,"\\)$")),Cy=new RegExp("^hsla\\(".concat(by,",").concat(yy,",").concat(yy,",").concat(by,"\\)$")),Ey={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ay(){return this.rgb().formatHex()}function Py(){return this.rgb().formatRgb()}function Oy(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=jy.exec(e))?(a=t[1].length,t=parseInt(t[1],16),6===a?My(t):3===a?new Iy(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===a?Ty(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===a?Ty(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ny.exec(e))?new Iy(t[1],t[2],t[3],1):(t=wy.exec(e))?new Iy(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Sy.exec(e))?Ty(t[1],t[2],t[3],t[4]):(t=_y.exec(e))?Ty(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ky.exec(e))?Uy(t[1],t[2]/100,t[3]/100,1):(t=Cy.exec(e))?Uy(t[1],t[2]/100,t[3]/100,t[4]):Ey.hasOwnProperty(e)?My(Ey[e]):"transparent"===e?new Iy(NaN,NaN,NaN,0):null}function My(e){return new Iy(e>>16&255,e>>8&255,255&e,1)}function Ty(e,t,a,s){return s<=0&&(e=t=a=NaN),new Iy(e,t,a,s)}function Dy(e,t,a,s){return 1===arguments.length?((n=e)instanceof xy||(n=Oy(n)),n?new Iy((n=n.rgb()).r,n.g,n.b,n.opacity):new Iy):new Iy(e,t,a,null==s?1:s);var n}function Iy(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}function Ry(){return"#".concat(By(this.r)).concat(By(this.g)).concat(By(this.b))}function Ly(){const e=Fy(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(zy(this.r),", ").concat(zy(this.g),", ").concat(zy(this.b)).concat(1===e?")":", ".concat(e,")"))}function Fy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zy(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function By(e){return((e=zy(e))<16?"0":"")+e.toString(16)}function Uy(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new qy(e,t,a,s)}function Hy(e){if(e instanceof qy)return new qy(e.h,e.s,e.l,e.opacity);if(e instanceof xy||(e=Oy(e)),!e)return new qy;if(e instanceof qy)return e;var t=(e=e.rgb()).r/255,a=e.g/255,s=e.b/255,n=Math.min(t,a,s),r=Math.max(t,a,s),i=NaN,l=r-n,o=(r+n)/2;return l?(i=t===r?(a-s)/l+6*(a<s):a===r?(s-t)/l+2:(t-a)/l+4,l/=o<.5?r+n:2-r-n,i*=60):l=o>0&&o<1?0:i,new qy(i,l,o,e.opacity)}function qy(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}function Vy(e){return(e=(e||0)%360)<0?e+360:e}function Wy(e){return Math.max(0,Math.min(1,e||0))}function Gy(e,t,a){return 255*(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)}function Ky(e,t,a,s,n){var r=e*e,i=r*e;return((1-3*e+3*r-i)*t+(4-6*r+3*i)*a+(1+3*e+3*r-3*i)*s+i*n)/6}hy(xy,Oy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ay,formatHex:Ay,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Hy(this).formatHsl()},formatRgb:Py,toString:Py}),hy(Iy,Dy,py(xy,{brighter(e){return e=null==e?gy:Math.pow(gy,e),new Iy(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?fy:Math.pow(fy,e),new Iy(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Iy(zy(this.r),zy(this.g),zy(this.b),Fy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ry,formatHex:Ry,formatHex8:function(){return"#".concat(By(this.r)).concat(By(this.g)).concat(By(this.b)).concat(By(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Ly,toString:Ly})),hy(qy,function(e,t,a,s){return 1===arguments.length?Hy(e):new qy(e,t,a,null==s?1:s)},py(xy,{brighter(e){return e=null==e?gy:Math.pow(gy,e),new qy(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?fy:Math.pow(fy,e),new qy(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,n=2*a-s;return new Iy(Gy(e>=240?e-240:e+120,n,s),Gy(e,n,s),Gy(e<120?e+240:e-120,n,s),this.opacity)},clamp(){return new qy(Vy(this.h),Wy(this.s),Wy(this.l),Fy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Fy(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Vy(this.h),", ").concat(100*Wy(this.s),"%, ").concat(100*Wy(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Yy=e=>()=>e;function Jy(e,t){return function(a){return e+a*t}}function $y(e){return 1===(e=+e)?Qy:function(t,a){return a-t?function(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}(t,a,e):Yy(isNaN(t)?a:t)}}function Qy(e,t){var a=t-e;return a?Jy(e,a):Yy(isNaN(e)?t:e)}const Xy=function e(t){var a=$y(t);function s(e,t){var s=a((e=Dy(e)).r,(t=Dy(t)).r),n=a(e.g,t.g),r=a(e.b,t.b),i=Qy(e.opacity,t.opacity);return function(t){return e.r=s(t),e.g=n(t),e.b=r(t),e.opacity=i(t),e+""}}return s.gamma=e,s}(1);function Zy(e){return function(t){var a,s,n=t.length,r=new Array(n),i=new Array(n),l=new Array(n);for(a=0;a<n;++a)s=Dy(t[a]),r[a]=s.r||0,i[a]=s.g||0,l[a]=s.b||0;return r=e(r),i=e(i),l=e(l),s.opacity=1,function(e){return s.r=r(e),s.g=i(e),s.b=l(e),s+""}}}Zy(function(e){var t=e.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,t-1):Math.floor(a*t),n=e[s],r=e[s+1],i=s>0?e[s-1]:2*n-r,l=s<t-1?e[s+2]:2*r-n;return Ky((a-s/t)*t,i,n,r,l)}}),Zy(function(e){var t=e.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*t),n=e[(s+t-1)%t],r=e[s%t],i=e[(s+1)%t],l=e[(s+2)%t];return Ky((a-s/t)*t,n,r,i,l)}});function ej(e,t){var a,s=t?t.length:0,n=e?Math.min(s,e.length):0,r=new Array(n),i=new Array(s);for(a=0;a<n;++a)r[a]=oj(e[a],t[a]);for(;a<s;++a)i[a]=t[a];return function(e){for(a=0;a<n;++a)i[a]=r[a](e);return i}}function tj(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function aj(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function sj(e,t){var a,s={},n={};for(a in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)a in e?s[a]=oj(e[a],t[a]):n[a]=t[a];return function(e){for(a in s)n[a]=s[a](e);return n}}var nj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rj=new RegExp(nj.source,"g");function ij(e,t){var a,s,n,r=nj.lastIndex=rj.lastIndex=0,i=-1,l=[],o=[];for(e+="",t+="";(a=nj.exec(e))&&(s=rj.exec(t));)(n=s.index)>r&&(n=t.slice(r,n),l[i]?l[i]+=n:l[++i]=n),(a=a[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,o.push({i:i,x:aj(a,s)})),r=rj.lastIndex;return r<t.length&&(n=t.slice(r),l[i]?l[i]+=n:l[++i]=n),l.length<2?o[0]?function(e){return function(t){return e(t)+""}}(o[0].x):function(e){return function(){return e}}(t):(t=o.length,function(e){for(var a,s=0;s<t;++s)l[(a=o[s]).i]=a.x(e);return l.join("")})}function lj(e,t){t||(t=[]);var a,s=e?Math.min(t.length,e.length):0,n=t.slice();return function(r){for(a=0;a<s;++a)n[a]=e[a]*(1-r)+t[a]*r;return n}}function oj(e,t){var a,s,n=typeof t;return null==t||"boolean"===n?Yy(t):("number"===n?aj:"string"===n?(a=Oy(t))?(t=a,Xy):ij:t instanceof Oy?Xy:t instanceof Date?tj:(s=t,!ArrayBuffer.isView(s)||s instanceof DataView?Array.isArray(t)?ej:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?sj:aj:lj))(e,t)}function cj(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function dj(e){return+e}var uj=[0,1];function mj(e){return e}function hj(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:(a=isNaN(t)?NaN:.5,function(){return a});var a}function pj(e,t,a){var s=e[0],n=e[1],r=t[0],i=t[1];return n<s?(s=hj(n,s),r=a(i,r)):(s=hj(s,n),r=a(r,i)),function(e){return r(s(e))}}function xj(e,t,a){var s=Math.min(e.length,t.length)-1,n=new Array(s),r=new Array(s),i=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<s;)n[i]=hj(e[i],e[i+1]),r[i]=a(t[i],t[i+1]);return function(t){var a=my(e,t,1,s)-1;return r[a](n[a](t))}}function fj(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gj(){var e,t,a,s,n,r,i=uj,l=uj,o=oj,c=mj;function d(){var e=Math.min(i.length,l.length);return c!==mj&&(c=function(e,t){var a;return e>t&&(a=e,e=t,t=a),function(a){return Math.max(e,Math.min(t,a))}}(i[0],i[e-1])),s=e>2?xj:pj,n=r=null,u}function u(t){return null==t||isNaN(t=+t)?a:(n||(n=s(i.map(e),l,o)))(e(c(t)))}return u.invert=function(a){return c(t((r||(r=s(l,i.map(e),aj)))(a)))},u.domain=function(e){return arguments.length?(i=Array.from(e,dj),d()):i.slice()},u.range=function(e){return arguments.length?(l=Array.from(e),d()):l.slice()},u.rangeRound=function(e){return l=Array.from(e),o=cj,d()},u.clamp=function(e){return arguments.length?(c=!!e||mj,d()):c!==mj},u.interpolate=function(e){return arguments.length?(o=e,d()):o},u.unknown=function(e){return arguments.length?(a=e,u):a},function(a,s){return e=a,t=s,d()}}function vj(){return gj()(mj,mj)}var bj,yj=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jj(e){if(!(t=yj.exec(e)))throw new Error("invalid format: "+e);var t;return new Nj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Nj(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function wj(e,t){if(!isFinite(e)||0===e)return null;var a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function Sj(e){return(e=wj(Math.abs(e)))?e[1]:NaN}function _j(e,t){var a=wj(e,t);if(!a)return e+"";var s=a[0],n=a[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}jj.prototype=Nj.prototype,Nj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const kj={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_j(100*e,t),r:_j,s:function(e,t){var a=wj(e,t);if(!a)return bj=void 0,e.toPrecision(t);var s=a[0],n=a[1],r=n-(bj=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,i=s.length;return r===i?s:r>i?s+new Array(r-i+1).join("0"):r>0?s.slice(0,r)+"."+s.slice(r):"0."+new Array(1-r).join("0")+wj(e,Math.max(0,t+r-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cj(e){return e}var Ej,Aj,Pj,Oj=Array.prototype.map,Mj=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Tj(e){var t,a,s=void 0===e.grouping||void 0===e.thousands?Cj:(t=Oj.call(e.grouping,Number),a=e.thousands+"",function(e,s){for(var n=e.length,r=[],i=0,l=t[0],o=0;n>0&&l>0&&(o+l+1>s&&(l=Math.max(1,s-o)),r.push(e.substring(n-=l,n+l)),!((o+=l+1)>s));)l=t[i=(i+1)%t.length];return r.reverse().join(a)}),n=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?Cj:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Oj.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e,t){var a=(e=jj(e)).fill,u=e.align,m=e.sign,h=e.symbol,p=e.zero,x=e.width,f=e.comma,g=e.precision,v=e.trim,b=e.type;"n"===b?(f=!0,b="g"):kj[b]||(void 0===g&&(g=12),v=!0,b="g"),(p||"0"===a&&"="===u)&&(p=!0,a="0",u="=");var y=(t&&void 0!==t.prefix?t.prefix:"")+("$"===h?n:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():""),j=("$"===h?r:/[%p]/.test(b)?o:"")+(t&&void 0!==t.suffix?t.suffix:""),N=kj[b],w=/[defgprs%]/.test(b);function S(e){var t,n,r,o=y,h=j;if("c"===b)h=N(e)+h,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:N(Math.abs(e),g),v&&(e=function(e){e:for(var t,a=e.length,s=1,n=-1;s<a;++s)switch(e[s]){case".":n=t=s;break;case"0":0===n&&(n=s),t=s;break;default:if(!+e[s])break e;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==m&&(S=!1),o=(S?"("===m?m:c:"-"===m||"("===m?"":m)+o,h=("s"!==b||isNaN(e)||void 0===bj?"":Mj[8+bj/3])+h+(S&&"("===m?")":""),w)for(t=-1,n=e.length;++t<n;)if(48>(r=e.charCodeAt(t))||r>57){h=(46===r?i+e.slice(t+1):e.slice(t))+h,e=e.slice(0,t);break}}f&&!p&&(e=s(e,1/0));var _=o.length+e.length+h.length,k=_<x?new Array(x-_+1).join(a):"";switch(f&&p&&(e=s(k+e,k.length?x-h.length:1/0),k=""),u){case"<":e=o+e+h+k;break;case"=":e=o+k+e+h;break;case"^":e=k.slice(0,_=k.length>>1)+o+e+h+k.slice(_);break;default:e=k+o+e+h}return l(e)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:u,formatPrefix:function(e,t){var a=3*Math.max(-8,Math.min(8,Math.floor(Sj(t)/3))),s=Math.pow(10,-a),n=u(((e=jj(e)).type="f",e),{suffix:Mj[8+a/3]});return function(e){return n(s*e)}}}}function Dj(e,t,a,s){var n,r=ny(e,t,a);switch((s=jj(null==s?",f":s)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=s.precision||isNaN(n=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sj(t)/3)))-Sj(Math.abs(e)))}(r,i))||(s.precision=n),Pj(s,i);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(n=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sj(t)-Sj(e))+1}(r,Math.max(Math.abs(e),Math.abs(t))))||(s.precision=n-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(n=function(e){return Math.max(0,-Sj(Math.abs(e)))}(r))||(s.precision=n-2*("%"===s.type))}return Aj(s)}function Ij(e){var t=e.domain;return e.ticks=function(e){var a=t();return ay(a[0],a[a.length-1],null==e?10:e)},e.tickFormat=function(e,a){var s=t();return Dj(s[0],s[s.length-1],null==e?10:e,a)},e.nice=function(a){null==a&&(a=10);var s,n,r=t(),i=0,l=r.length-1,o=r[i],c=r[l],d=10;for(c<o&&(n=o,o=c,c=n,n=i,i=l,l=n);d-- >0;){if((n=sy(o,c,a))===s)return r[i]=o,r[l]=c,t(r);if(n>0)o=Math.floor(o/n)*n,c=Math.ceil(c/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,c=Math.floor(c*n)/n}s=n}return e},e}function Rj(){var e=vj();return e.copy=function(){return fj(e,Rj())},Bb.apply(e,arguments),Ij(e)}function Lj(e){var t;function a(e){return null==e||isNaN(e=+e)?t:e}return a.invert=a,a.domain=a.range=function(t){return arguments.length?(e=Array.from(t,dj),a):e.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return Lj(e).unknown(t)},e=arguments.length?Array.from(e,dj):[0,1],Ij(a)}function Fj(e,t){var a,s=0,n=(e=e.slice()).length-1,r=e[s],i=e[n];return i<r&&(a=s,s=n,n=a,a=r,r=i,i=a),e[s]=t.floor(r),e[n]=t.ceil(i),e}function zj(e){return Math.log(e)}function Bj(e){return Math.exp(e)}function Uj(e){return-Math.log(-e)}function Hj(e){return-Math.exp(-e)}function qj(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vj(e){return(t,a)=>-e(-t,a)}function Wj(e){const t=e(zj,Bj),a=t.domain;let s,n,r=10;function i(){return s=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(r),n=function(e){return 10===e?qj:e===Math.E?Math.exp:t=>Math.pow(e,t)}(r),a()[0]<0?(s=Vj(s),n=Vj(n),e(Uj,Hj)):e(zj,Bj),t}return t.base=function(e){return arguments.length?(r=+e,i()):r},t.domain=function(e){return arguments.length?(a(e),i()):a()},t.ticks=e=>{const t=a();let i=t[0],l=t[t.length-1];const o=l<i;o&&([i,l]=[l,i]);let c,d,u=s(i),m=s(l);const h=null==e?10:+e;let p=[];if(!(r%1)&&m-u<h){if(u=Math.floor(u),m=Math.ceil(m),i>0){for(;u<=m;++u)for(c=1;c<r;++c)if(d=u<0?c/n(-u):c*n(u),!(d<i)){if(d>l)break;p.push(d)}}else for(;u<=m;++u)for(c=r-1;c>=1;--c)if(d=u>0?c/n(-u):c*n(u),!(d<i)){if(d>l)break;p.push(d)}2*p.length<h&&(p=ay(i,l,h))}else p=ay(u,m,Math.min(m-u,h)).map(n);return o?p.reverse():p},t.tickFormat=(e,a)=>{if(null==e&&(e=10),null==a&&(a=10===r?"s":","),"function"!==typeof a&&(r%1||null!=(a=jj(a)).precision||(a.trim=!0),a=Aj(a)),e===1/0)return a;const i=Math.max(1,r*e/t.ticks().length);return e=>{let t=e/n(Math.round(s(e)));return t*r<r-.5&&(t*=r),t<=i?a(e):""}},t.nice=()=>a(Fj(a(),{floor:e=>n(Math.floor(s(e))),ceil:e=>n(Math.ceil(s(e)))})),t}function Gj(){const e=Wj(gj()).domain([1,10]);return e.copy=()=>fj(e,Gj()).base(e.base()),Bb.apply(e,arguments),e}function Kj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Yj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Jj(e){var t=1,a=e(Kj(t),Yj(t));return a.constant=function(a){return arguments.length?e(Kj(t=+a),Yj(t)):t},Ij(a)}function $j(){var e=Jj(gj());return e.copy=function(){return fj(e,$j()).constant(e.constant())},Bb.apply(e,arguments)}function Qj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Xj(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Zj(e){return e<0?-e*e:e*e}function eN(e){var t=e(mj,mj),a=1;return t.exponent=function(t){return arguments.length?1===(a=+t)?e(mj,mj):.5===a?e(Xj,Zj):e(Qj(a),Qj(1/a)):a},Ij(t)}function tN(){var e=eN(gj());return e.copy=function(){return fj(e,tN()).exponent(e.exponent())},Bb.apply(e,arguments),e}function aN(){return tN.apply(null,arguments).exponent(.5)}function sN(e){return Math.sign(e)*e*e}function nN(){var e,t=vj(),a=[0,1],s=!1;function n(a){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(a));return isNaN(n)?e:s?Math.round(n):n}return n.invert=function(e){return t.invert(sN(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain()},n.range=function(e){return arguments.length?(t.range((a=Array.from(e,dj)).map(sN)),n):a.slice()},n.rangeRound=function(e){return n.range(e).round(!0)},n.round=function(e){return arguments.length?(s=!!e,n):s},n.clamp=function(e){return arguments.length?(t.clamp(e),n):t.clamp()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return nN(t.domain(),a).round(s).clamp(t.clamp()).unknown(e)},Bb.apply(n,arguments),Ij(n)}function rN(e,t){let a;if(void 0===t)for(const s of e)null!=s&&(a<s||void 0===a&&s>=s)&&(a=s);else{let s=-1;for(let n of e)null!=(n=t(n,++s,e))&&(a<n||void 0===a&&n>=n)&&(a=n)}return a}function iN(e,t){let a;if(void 0===t)for(const s of e)null!=s&&(a>s||void 0===a&&s>=s)&&(a=s);else{let s=-1;for(let n of e)null!=(n=t(n,++s,e))&&(a>n||void 0===a&&n>=n)&&(a=n)}return a}function lN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ry;if(e===ry)return oN;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,a)=>{const s=e(t,a);return s||0===s?s:(0===e(a,a))-(0===e(t,t))}}function oN(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function cN(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,n=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),a=Math.floor(Math.max(0,a)),s=Math.floor(Math.min(e.length-1,s)),!(a<=t&&t<=s))return e;for(n=void 0===n?oN:lN(n);s>a;){if(s-a>600){const r=s-a+1,i=t-a+1,l=Math.log(r),o=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*o*(r-o)/r)*(i-r/2<0?-1:1);cN(e,t,Math.max(a,Math.floor(t-i*o/r+c)),Math.min(s,Math.floor(t+(r-i)*o/r+c)),n)}const r=e[t];let i=a,l=s;for(dN(e,a,t),n(e[s],r)>0&&dN(e,a,s);i<l;){for(dN(e,i,l),++i,--l;n(e[i],r)<0;)++i;for(;n(e[l],r)>0;)--l}0===n(e[a],r)?dN(e,a,l):(++l,dN(e,l,s)),l<=t&&(a=l+1),t<=l&&(s=l-1)}return e}function dN(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function uN(e,t,a){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let a of e)null!=a&&(a=+a)>=a&&(yield a);else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(yield s)}}(e,a)),(s=e.length)&&!isNaN(t=+t)){if(t<=0||s<2)return iN(e);if(t>=1)return rN(e);var s,n=(s-1)*t,r=Math.floor(n),i=rN(cN(e,r).subarray(0,r+1));return i+(iN(e.subarray(r+1))-i)*(n-r)}}function mN(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cy;if((s=e.length)&&!isNaN(t=+t)){if(t<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,n=(s-1)*t,r=Math.floor(n),i=+a(e[r],r,e);return i+(+a(e[r+1],r+1,e)-i)*(n-r)}}function hN(){var e,t=[],a=[],s=[];function n(){var e=0,n=Math.max(1,a.length);for(s=new Array(n-1);++e<n;)s[e-1]=mN(t,e/n);return r}function r(t){return null==t||isNaN(t=+t)?e:a[my(s,t)]}return r.invertExtent=function(e){var n=a.indexOf(e);return n<0?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let a of e)null==a||isNaN(a=+a)||t.push(a);return t.sort(ry),n()},r.range=function(e){return arguments.length?(a=Array.from(e),n()):a.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.quantiles=function(){return s.slice()},r.copy=function(){return hN().domain(t).range(a).unknown(e)},Bb.apply(r,arguments)}function pN(){var e,t=0,a=1,s=1,n=[.5],r=[0,1];function i(t){return null!=t&&t<=t?r[my(n,t,0,s)]:e}function l(){var e=-1;for(n=new Array(s);++e<s;)n[e]=((e+1)*a-(e-s)*t)/(s+1);return i}return i.domain=function(e){return arguments.length?([t,a]=e,t=+t,a=+a,l()):[t,a]},i.range=function(e){return arguments.length?(s=(r=Array.from(e)).length-1,l()):r.slice()},i.invertExtent=function(e){var i=r.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,n[0]]:i>=s?[n[s-1],a]:[n[i-1],n[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return n.slice()},i.copy=function(){return pN().domain([t,a]).range(r).unknown(e)},Bb.apply(Ij(i),arguments)}function xN(){var e,t=[.5],a=[0,1],s=1;function n(n){return null!=n&&n<=n?a[my(t,n,0,s)]:e}return n.domain=function(e){return arguments.length?(t=Array.from(e),s=Math.min(t.length,a.length-1),n):t.slice()},n.range=function(e){return arguments.length?(a=Array.from(e),s=Math.min(t.length,a.length-1),n):a.slice()},n.invertExtent=function(e){var s=a.indexOf(e);return[t[s-1],t[s]]},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return xN().domain(t).range(a).unknown(e)},Bb.apply(n,arguments)}Ej=Tj({thousands:",",grouping:[3],currency:["$",""]}),Aj=Ej.format,Pj=Ej.formatPrefix;const fN=1e3,gN=6e4,vN=36e5,bN=864e5,yN=6048e5,jN=2592e6,NN=31536e6,wN=new Date,SN=new Date;function _N(e,t,a,s){function n(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return n.floor=t=>(e(t=new Date(+t)),t),n.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),n.round=e=>{const t=n(e),a=n.ceil(e);return e-t<a-e?t:a},n.offset=(e,a)=>(t(e=new Date(+e),null==a?1:Math.floor(a)),e),n.range=(a,s,r)=>{const i=[];if(a=n.ceil(a),r=null==r?1:Math.floor(r),!(a<s)||!(r>0))return i;let l;do{i.push(l=new Date(+a)),t(a,r),e(a)}while(l<a&&a<s);return i},n.filter=a=>_N(t=>{if(t>=t)for(;e(t),!a(t);)t.setTime(t-1)},(e,s)=>{if(e>=e)if(s<0)for(;++s<=0;)for(;t(e,-1),!a(e););else for(;--s>=0;)for(;t(e,1),!a(e););}),a&&(n.count=(t,s)=>(wN.setTime(+t),SN.setTime(+s),e(wN),e(SN),Math.floor(a(wN,SN))),n.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?n.filter(s?t=>s(t)%e===0:t=>n.count(0,t)%e===0):n:null)),n}const kN=_N(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);kN.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?_N(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):kN:null);kN.range;const CN=_N(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fN)},(e,t)=>(t-e)/fN,e=>e.getUTCSeconds()),EN=(CN.range,_N(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fN)},(e,t)=>{e.setTime(+e+t*gN)},(e,t)=>(t-e)/gN,e=>e.getMinutes())),AN=(EN.range,_N(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*gN)},(e,t)=>(t-e)/gN,e=>e.getUTCMinutes())),PN=(AN.range,_N(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fN-e.getMinutes()*gN)},(e,t)=>{e.setTime(+e+t*vN)},(e,t)=>(t-e)/vN,e=>e.getHours())),ON=(PN.range,_N(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*vN)},(e,t)=>(t-e)/vN,e=>e.getUTCHours())),MN=(ON.range,_N(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gN)/bN,e=>e.getDate()-1)),TN=(MN.range,_N(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bN,e=>e.getUTCDate()-1)),DN=(TN.range,_N(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bN,e=>Math.floor(e/bN)));DN.range;function IN(e){return _N(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gN)/yN)}const RN=IN(0),LN=IN(1),FN=IN(2),zN=IN(3),BN=IN(4),UN=IN(5),HN=IN(6);RN.range,LN.range,FN.range,zN.range,BN.range,UN.range,HN.range;function qN(e){return _N(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/yN)}const VN=qN(0),WN=qN(1),GN=qN(2),KN=qN(3),YN=qN(4),JN=qN(5),$N=qN(6),QN=(VN.range,WN.range,GN.range,KN.range,YN.range,JN.range,$N.range,_N(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),XN=(QN.range,_N(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),ZN=(XN.range,_N(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));ZN.every=e=>isFinite(e=Math.floor(e))&&e>0?_N(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)}):null;ZN.range;const ew=_N(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ew.every=e=>isFinite(e=Math.floor(e))&&e>0?_N(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)}):null;ew.range;function tw(e,t,a,s,n,r){const i=[[CN,1,fN],[CN,5,5e3],[CN,15,15e3],[CN,30,3e4],[r,1,gN],[r,5,3e5],[r,15,9e5],[r,30,18e5],[n,1,vN],[n,3,108e5],[n,6,216e5],[n,12,432e5],[s,1,bN],[s,2,1728e5],[a,1,yN],[t,1,jN],[t,3,7776e6],[e,1,NN]];function l(t,a,s){const n=Math.abs(a-t)/s,r=ly(e=>{let[,,t]=e;return t}).right(i,n);if(r===i.length)return e.every(ny(t/NN,a/NN,s));if(0===r)return kN.every(Math.max(ny(t,a,s),1));const[l,o]=i[n/i[r-1][2]<i[r][2]/n?r-1:r];return l.every(o)}return[function(e,t,a){const s=t<e;s&&([e,t]=[t,e]);const n=a&&"function"===typeof a.range?a:l(e,t,a),r=n?n.range(e,+t+1):[];return s?r.reverse():r},l]}const[aw,sw]=tw(ew,XN,VN,DN,ON,AN),[nw,rw]=tw(ZN,QN,RN,MN,PN,EN);function iw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ow(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}var cw,dw,uw,mw={"-":"",_:" ",0:"0"},hw=/^\s*\d+/,pw=/^%/,xw=/[\\^$*+?|[\]().{}]/g;function fw(e,t,a){var s=e<0?"-":"",n=(s?-e:e)+"",r=n.length;return s+(r<a?new Array(a-r+1).join(t)+n:n)}function gw(e){return e.replace(xw,"\\$&")}function vw(e){return new RegExp("^(?:"+e.map(gw).join("|")+")","i")}function bw(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function yw(e,t,a){var s=hw.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function jw(e,t,a){var s=hw.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function Nw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function ww(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function Sw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function _w(e,t,a){var s=hw.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function kw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Cw(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function Ew(e,t,a){var s=hw.exec(t.slice(a,a+1));return s?(e.q=3*s[0]-3,a+s[0].length):-1}function Aw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function Pw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function Ow(e,t,a){var s=hw.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function Mw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function Tw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function Dw(e,t,a){var s=hw.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function Iw(e,t,a){var s=hw.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Rw(e,t,a){var s=hw.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function Lw(e,t,a){var s=pw.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function Fw(e,t,a){var s=hw.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function zw(e,t,a){var s=hw.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function Bw(e,t){return fw(e.getDate(),t,2)}function Uw(e,t){return fw(e.getHours(),t,2)}function Hw(e,t){return fw(e.getHours()%12||12,t,2)}function qw(e,t){return fw(1+MN.count(ZN(e),e),t,3)}function Vw(e,t){return fw(e.getMilliseconds(),t,3)}function Ww(e,t){return Vw(e,t)+"000"}function Gw(e,t){return fw(e.getMonth()+1,t,2)}function Kw(e,t){return fw(e.getMinutes(),t,2)}function Yw(e,t){return fw(e.getSeconds(),t,2)}function Jw(e){var t=e.getDay();return 0===t?7:t}function $w(e,t){return fw(RN.count(ZN(e)-1,e),t,2)}function Qw(e){var t=e.getDay();return t>=4||0===t?BN(e):BN.ceil(e)}function Xw(e,t){return e=Qw(e),fw(BN.count(ZN(e),e)+(4===ZN(e).getDay()),t,2)}function Zw(e){return e.getDay()}function eS(e,t){return fw(LN.count(ZN(e)-1,e),t,2)}function tS(e,t){return fw(e.getFullYear()%100,t,2)}function aS(e,t){return fw((e=Qw(e)).getFullYear()%100,t,2)}function sS(e,t){return fw(e.getFullYear()%1e4,t,4)}function nS(e,t){var a=e.getDay();return fw((e=a>=4||0===a?BN(e):BN.ceil(e)).getFullYear()%1e4,t,4)}function rS(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fw(t/60|0,"0",2)+fw(t%60,"0",2)}function iS(e,t){return fw(e.getUTCDate(),t,2)}function lS(e,t){return fw(e.getUTCHours(),t,2)}function oS(e,t){return fw(e.getUTCHours()%12||12,t,2)}function cS(e,t){return fw(1+TN.count(ew(e),e),t,3)}function dS(e,t){return fw(e.getUTCMilliseconds(),t,3)}function uS(e,t){return dS(e,t)+"000"}function mS(e,t){return fw(e.getUTCMonth()+1,t,2)}function hS(e,t){return fw(e.getUTCMinutes(),t,2)}function pS(e,t){return fw(e.getUTCSeconds(),t,2)}function xS(e){var t=e.getUTCDay();return 0===t?7:t}function fS(e,t){return fw(VN.count(ew(e)-1,e),t,2)}function gS(e){var t=e.getUTCDay();return t>=4||0===t?YN(e):YN.ceil(e)}function vS(e,t){return e=gS(e),fw(YN.count(ew(e),e)+(4===ew(e).getUTCDay()),t,2)}function bS(e){return e.getUTCDay()}function yS(e,t){return fw(WN.count(ew(e)-1,e),t,2)}function jS(e,t){return fw(e.getUTCFullYear()%100,t,2)}function NS(e,t){return fw((e=gS(e)).getUTCFullYear()%100,t,2)}function wS(e,t){return fw(e.getUTCFullYear()%1e4,t,4)}function SS(e,t){var a=e.getUTCDay();return fw((e=a>=4||0===a?YN(e):YN.ceil(e)).getUTCFullYear()%1e4,t,4)}function _S(){return"+0000"}function kS(){return"%"}function CS(e){return+e}function ES(e){return Math.floor(+e/1e3)}function AS(e){return new Date(e)}function PS(e){return e instanceof Date?+e:+new Date(+e)}function OS(e,t,a,s,n,r,i,l,o,c){var d=vj(),u=d.invert,m=d.domain,h=c(".%L"),p=c(":%S"),x=c("%I:%M"),f=c("%I %p"),g=c("%a %d"),v=c("%b %d"),b=c("%B"),y=c("%Y");function j(e){return(o(e)<e?h:l(e)<e?p:i(e)<e?x:r(e)<e?f:s(e)<e?n(e)<e?g:v:a(e)<e?b:y)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?m(Array.from(e,PS)):m().map(AS)},d.ticks=function(t){var a=m();return e(a[0],a[a.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var a=m();return e&&"function"===typeof e.range||(e=t(a[0],a[a.length-1],null==e?10:e)),e?m(Fj(a,e)):d},d.copy=function(){return fj(d,OS(e,t,a,s,n,r,i,l,o,c))},d}function MS(){return Bb.apply(OS(nw,rw,ZN,QN,RN,MN,PN,EN,CN,dw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function TS(){return Bb.apply(OS(aw,sw,ew,XN,VN,TN,ON,AN,CN,uw).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function DS(){var e,t,a,s,n,r=0,i=1,l=mj,o=!1;function c(t){return null==t||isNaN(t=+t)?n:l(0===a?.5:(t=(s(t)-e)*a,o?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var a,s;return arguments.length?([a,s]=t,l=e(a,s),c):[l(0),l(1)]}}return c.domain=function(n){return arguments.length?([r,i]=n,e=s(r=+r),t=s(i=+i),a=e===t?0:1/(t-e),c):[r,i]},c.clamp=function(e){return arguments.length?(o=!!e,c):o},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.range=d(oj),c.rangeRound=d(cj),c.unknown=function(e){return arguments.length?(n=e,c):n},function(n){return s=n,e=n(r),t=n(i),a=e===t?0:1/(t-e),c}}function IS(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function RS(){var e=Ij(DS()(mj));return e.copy=function(){return IS(e,RS())},Ub.apply(e,arguments)}function LS(){var e=Wj(DS()).domain([1,10]);return e.copy=function(){return IS(e,LS()).base(e.base())},Ub.apply(e,arguments)}function FS(){var e=Jj(DS());return e.copy=function(){return IS(e,FS()).constant(e.constant())},Ub.apply(e,arguments)}function zS(){var e=eN(DS());return e.copy=function(){return IS(e,zS()).exponent(e.exponent())},Ub.apply(e,arguments)}function BS(){return zS.apply(null,arguments).exponent(.5)}function US(){var e=[],t=mj;function a(a){if(null!=a&&!isNaN(a=+a))return t((my(e,a,1)-1)/(e.length-1))}return a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let a of t)null==a||isNaN(a=+a)||e.push(a);return e.sort(ry),a},a.interpolator=function(e){return arguments.length?(t=e,a):t},a.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},a.quantiles=function(t){return Array.from({length:t+1},(a,s)=>uN(e,s/t))},a.copy=function(){return US(t).domain(e)},Ub.apply(a,arguments)}function HS(){var e,t,a,s,n,r,i,l=0,o=.5,c=1,d=1,u=mj,m=!1;function h(e){return isNaN(e=+e)?i:(e=.5+((e=+r(e))-t)*(d*e<d*t?s:n),u(m?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var a,s,n;return arguments.length?([a,s,n]=t,u=function(e,t){void 0===t&&(t=e,e=oj);for(var a=0,s=t.length-1,n=t[0],r=new Array(s<0?0:s);a<s;)r[a]=e(n,n=t[++a]);return function(e){var t=Math.max(0,Math.min(s-1,Math.floor(e*=s)));return r[t](e-t)}}(e,[a,s,n]),h):[u(0),u(.5),u(1)]}}return h.domain=function(i){return arguments.length?([l,o,c]=i,e=r(l=+l),t=r(o=+o),a=r(c=+c),s=e===t?0:.5/(t-e),n=t===a?0:.5/(a-t),d=t<e?-1:1,h):[l,o,c]},h.clamp=function(e){return arguments.length?(m=!!e,h):m},h.interpolator=function(e){return arguments.length?(u=e,h):u},h.range=p(oj),h.rangeRound=p(cj),h.unknown=function(e){return arguments.length?(i=e,h):i},function(i){return r=i,e=i(l),t=i(o),a=i(c),s=e===t?0:.5/(t-e),n=t===a?0:.5/(a-t),d=t<e?-1:1,h}}function qS(){var e=Ij(HS()(mj));return e.copy=function(){return IS(e,qS())},Ub.apply(e,arguments)}function VS(){var e=Wj(HS()).domain([.1,1,10]);return e.copy=function(){return IS(e,VS()).base(e.base())},Ub.apply(e,arguments)}function WS(){var e=Jj(HS());return e.copy=function(){return IS(e,WS()).constant(e.constant())},Ub.apply(e,arguments)}function GS(){var e=eN(HS());return e.copy=function(){return IS(e,GS()).exponent(e.exponent())},Ub.apply(e,arguments)}function KS(){return GS.apply(null,arguments).exponent(.5)}!function(e){cw=function(e){var t=e.dateTime,a=e.date,s=e.time,n=e.periods,r=e.days,i=e.shortDays,l=e.months,o=e.shortMonths,c=vw(n),d=bw(n),u=vw(r),m=bw(r),h=vw(i),p=bw(i),x=vw(l),f=bw(l),g=vw(o),v=bw(o),b={a:function(e){return i[e.getDay()]},A:function(e){return r[e.getDay()]},b:function(e){return o[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:Bw,e:Bw,f:Ww,g:aS,G:nS,H:Uw,I:Hw,j:qw,L:Vw,m:Gw,M:Kw,p:function(e){return n[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:CS,s:ES,S:Yw,u:Jw,U:$w,V:Xw,w:Zw,W:eS,x:null,X:null,y:tS,Y:sS,Z:rS,"%":kS},y={a:function(e){return i[e.getUTCDay()]},A:function(e){return r[e.getUTCDay()]},b:function(e){return o[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:iS,e:iS,f:uS,g:NS,G:SS,H:lS,I:oS,j:cS,L:dS,m:mS,M:hS,p:function(e){return n[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:CS,s:ES,S:pS,u:xS,U:fS,V:vS,w:bS,W:yS,x:null,X:null,y:jS,Y:wS,Z:_S,"%":kS},j={a:function(e,t,a){var s=h.exec(t.slice(a));return s?(e.w=p.get(s[0].toLowerCase()),a+s[0].length):-1},A:function(e,t,a){var s=u.exec(t.slice(a));return s?(e.w=m.get(s[0].toLowerCase()),a+s[0].length):-1},b:function(e,t,a){var s=g.exec(t.slice(a));return s?(e.m=v.get(s[0].toLowerCase()),a+s[0].length):-1},B:function(e,t,a){var s=x.exec(t.slice(a));return s?(e.m=f.get(s[0].toLowerCase()),a+s[0].length):-1},c:function(e,a,s){return S(e,t,a,s)},d:Pw,e:Pw,f:Rw,g:kw,G:_w,H:Mw,I:Mw,j:Ow,L:Iw,m:Aw,M:Tw,p:function(e,t,a){var s=c.exec(t.slice(a));return s?(e.p=d.get(s[0].toLowerCase()),a+s[0].length):-1},q:Ew,Q:Fw,s:zw,S:Dw,u:jw,U:Nw,V:ww,w:yw,W:Sw,x:function(e,t,s){return S(e,a,t,s)},X:function(e,t,a){return S(e,s,t,a)},y:kw,Y:_w,Z:Cw,"%":Lw};function N(e,t){return function(a){var s,n,r,i=[],l=-1,o=0,c=e.length;for(a instanceof Date||(a=new Date(+a));++l<c;)37===e.charCodeAt(l)&&(i.push(e.slice(o,l)),null!=(n=mw[s=e.charAt(++l)])?s=e.charAt(++l):n="e"===s?" ":"0",(r=t[s])&&(s=r(a,n)),i.push(s),o=l+1);return i.push(e.slice(o,l)),i.join("")}}function w(e,t){return function(a){var s,n,r=ow(1900,void 0,1);if(S(r,e,a+="",0)!=a.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(t&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(n=(s=lw(ow(r.y,0,1))).getUTCDay(),s=n>4||0===n?WN.ceil(s):WN(s),s=TN.offset(s,7*(r.V-1)),r.y=s.getUTCFullYear(),r.m=s.getUTCMonth(),r.d=s.getUTCDate()+(r.w+6)%7):(n=(s=iw(ow(r.y,0,1))).getDay(),s=n>4||0===n?LN.ceil(s):LN(s),s=MN.offset(s,7*(r.V-1)),r.y=s.getFullYear(),r.m=s.getMonth(),r.d=s.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?lw(ow(r.y,0,1)).getUTCDay():iw(ow(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,lw(r)):iw(r)}}function S(e,t,a,s){for(var n,r,i=0,l=t.length,o=a.length;i<l;){if(s>=o)return-1;if(37===(n=t.charCodeAt(i++))){if(n=t.charAt(i++),!(r=j[n in mw?t.charAt(i++):n])||(s=r(e,a,s))<0)return-1}else if(n!=a.charCodeAt(s++))return-1}return s}return b.x=N(a,b),b.X=N(s,b),b.c=N(t,b),y.x=N(a,y),y.X=N(s,y),y.c=N(t,y),{format:function(e){var t=N(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=N(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}(e),dw=cw.format,cw.parse,uw=cw.utcFormat,cw.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var YS=e=>e.chartData,JS=Cv([YS],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),$S=(e,t,a,s)=>s?JS(e):YS(e);function QS(e){if(Array.isArray(e)&&2===e.length){var[t,a]=e;if(op(t)&&op(a))return!0}return!1}function XS(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function ZS(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var a,s,[n,r]=e;if(op(n))a=n;else if("function"===typeof n)return;if(op(r))s=r;else if("function"===typeof r)return;var i=[a,s];if(QS(i))return i}}var e_=a(4441),t_=a.n(e_);function a_(e){return 0===e?1:Math.floor(new(t_())(e).abs().log(10).toNumber())+1}function s_(e,t,a){for(var s=new(t_())(e),n=0,r=[];s.lt(t)&&n<1e5;)r.push(s.toNumber()),s=s.add(a),n++;return r}var n_=e=>{var[t,a]=e,[s,n]=[t,a];return t>a&&([s,n]=[a,t]),[s,n]},r_=(e,t,a)=>{if(e.lte(0))return new(t_())(0);var s=a_(e.toNumber()),n=new(t_())(10).pow(s),r=e.div(n),i=1!==s?.05:.1,l=new(t_())(Math.ceil(r.div(i).toNumber())).add(a).mul(i).mul(n);return t?new(t_())(l.toNumber()):new(t_())(Math.ceil(l.toNumber()))},i_=function(e,t,a,s){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(a-1)))return{step:new(t_())(0),tickMin:new(t_())(0),tickMax:new(t_())(0)};var r,i=r_(new(t_())(t).sub(e).div(a-1),s,n);r=e<=0&&t>=0?new(t_())(0):(r=new(t_())(e).add(t).div(2)).sub(new(t_())(r).mod(i));var l=Math.ceil(r.sub(e).div(i).toNumber()),o=Math.ceil(new(t_())(t).sub(r).div(i).toNumber()),c=l+o+1;return c>a?i_(e,t,a,s,n+1):(c<a&&(o=t>0?o+(a-c):o,l=t>0?l:l+(a-c)),{step:i,tickMin:r.sub(new(t_())(l).mul(i)),tickMax:r.add(new(t_())(o).mul(i))})},l_=function(e){var[t,a]=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Math.max(s,2),[i,l]=n_([t,a]);if(i===-1/0||l===1/0){var o=l===1/0?[i,...Array(s-1).fill(1/0)]:[...Array(s-1).fill(-1/0),l];return t>a?o.reverse():o}if(i===l)return((e,t,a)=>{var s=new(t_())(1),n=new(t_())(e);if(!n.isint()&&a){var r=Math.abs(e);r<1?(s=new(t_())(10).pow(a_(e)-1),n=new(t_())(Math.floor(n.div(s).toNumber())).mul(s)):r>1&&(n=new(t_())(Math.floor(e)))}else 0===e?n=new(t_())(Math.floor((t-1)/2)):a||(n=new(t_())(Math.floor(e)));for(var i=Math.floor((t-1)/2),l=[],o=0;o<t;o++)l.push(n.add(new(t_())(o-i).mul(s)).toNumber());return l})(i,s,n);var{step:c,tickMin:d,tickMax:u}=i_(i,l,r,n,0),m=s_(d,u.add(new(t_())(.1).mul(c)),c);return t>a?m.reverse():m},o_=e=>e.rootProps.maxBarSize,c_=e=>e.rootProps.barCategoryGap,d_=e=>e.rootProps.stackOffset,u_=e=>e.rootProps.reverseStackOrder,m_=e=>e.options.chartName,h_=e=>e.rootProps.syncId,p_=e=>e.rootProps.syncMethod,x_=e=>e.options.eventEmitter;function f_(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function g_(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f_(Object(a),!0).forEach(function(t){v_(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function v_(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var b_=Math.PI/180,y_=e=>180*e/Math.PI,j_=(e,t,a,s)=>({x:e+Math.cos(-b_*s)*a,y:t+Math.sin(-b_*s)*a}),N_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(t-(a.top||0)-(a.bottom||0)))/2},w_=(e,t)=>{var{x:a,y:s}=e,{cx:n,cy:r}=t,i=((e,t)=>{var{x:a,y:s}=e,{x:n,y:r}=t;return Math.sqrt((a-n)**2+(s-r)**2)})({x:a,y:s},{x:n,y:r});if(i<=0)return{radius:i,angle:0};var l=(a-n)/i,o=Math.acos(l);return s>r&&(o=2*Math.PI-o),{radius:i,angle:y_(o),angleInRadian:o}},S_=(e,t)=>{var{startAngle:a,endAngle:s}=t,n=Math.floor(a/360),r=Math.floor(s/360);return e+360*Math.min(n,r)},__=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:n,angle:r}=w_({x:a,y:s},t),{innerRadius:i,outerRadius:l}=t;if(n<i||n>l)return null;if(0===n)return null;var o,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),n=Math.floor(a/360),r=Math.min(s,n);return{startAngle:t-360*r,endAngle:a-360*r}})(t),u=r;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;o=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;o=u>=d&&u<=c}return o?g_(g_({},t),{},{radius:n,angle:S_(u,t)}):null},k_={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},C_=(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t};function E_(e,t,a){return"auto"!==a?a:null!=e?Qv(e,t)?"category":"number":void 0}function A_(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function P_(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A_(Object(a),!0).forEach(function(t){O_(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function O_(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var M_={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:"auto",tick:!0,tickCount:void 0,ticks:void 0,type:"auto",unit:void 0},T_={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:"auto",tick:!0,tickCount:5,ticks:void 0,type:"auto",unit:void 0},D_=Cv([(e,t)=>{if(null!=t)return e.polarAxis.angleAxis[t]},Rb],(e,t)=>{var a;if(null!=e)return e;var s=null!==(a=E_(t,"angleAxis",M_.type))&&void 0!==a?a:"category";return P_(P_({},M_),{},{type:s})}),I_=Cv([(e,t)=>e.polarAxis.radiusAxis[t],Rb],(e,t)=>{var a;if(null!=e)return e;var s=null!==(a=E_(t,"radiusAxis",T_.type))&&void 0!==a?a:"category";return P_(P_({},T_),{},{type:s})}),R_=e=>e.polarOptions,L_=Cv([cb,db,yb],N_),F_=Cv([R_,L_],(e,t)=>{if(null!=e)return Kh(e.innerRadius,t,0)}),z_=Cv([R_,L_],(e,t)=>{if(null!=e)return Kh(e.outerRadius,t,.8*t)}),B_=Cv([R_],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]}),U_=(Cv([D_,B_],C_),Cv([L_,F_,z_],(e,t,a)=>{if(null!=e&&null!=t&&null!=a)return[t,a]})),H_=(Cv([I_,U_],C_),Cv([Tb,R_,F_,z_,cb,db],(e,t,a,s,n,r)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=a&&null!=s){var{cx:i,cy:l,startAngle:o,endAngle:c}=t;return{cx:Kh(i,n,n/2),cy:Kh(l,r,r/2),innerRadius:a,outerRadius:s,startAngle:o,endAngle:c,clockWise:!1}}})),q_=(e,t)=>t,V_=(e,t,a)=>a;function W_(e){return null===e||void 0===e?void 0:e.id}function G_(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:n,dataKey:r}=a,i=new Map;return e.forEach(e=>{var t,a=null!==(t=e.data)&&void 0!==t?t:s;if(null!=a&&0!==a.length){var l=W_(e);a.forEach((t,a)=>{var s,o=null==r||n?a:String($v(t,r,null)),c=$v(t,e.dataKey,0);s=i.has(o)?i.get(o):{},Object.assign(s,{[l]:c}),i.set(o,s)})}}),Array.from(i.values())}function K_(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var Y_=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function J_(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var $_=e=>{var t=Tb(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},Q_=e=>e.tooltip.settings.axisId;function X_(e){var t=e.ticks,a=e.bandwidth,s=e.range(),n=[Math.min(...s),Math.max(...s)];return{domain:()=>e.domain(),range:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(()=>n),rangeMin:()=>n[0],rangeMax:()=>n[1],isInRange(e){var t=n[0],a=n[1];return t<=a?e>=t&&e<=a:e>=a&&e<=t},bandwidth:a?()=>a.call(e):void 0,ticks:t?a=>t.call(e,a):void 0,map:(t,a)=>{var s=e(t);if(null!=s){if(e.bandwidth&&null!==a&&void 0!==a&&a.position){var n=e.bandwidth();switch(a.position){case"middle":s+=n/2;break;case"end":s+=n}}return s}}}}function Z_(e,a,s){if("function"===typeof e)return X_(e.copy().domain(a).range(s));if(null!=e){var n=function(e){if(e in t)return t[e]();var a="scale".concat(Qh(e));return a in t?t[a]():void 0}(e);if(null!=n)return n.domain(a).range(s),X_(n)}}var ek=(e,t)=>{if(null!=t){if("linear"===e){if(!QS(t)){for(var a,s,n=0;n<t.length;n++){var r=t[n];op(r)&&((void 0===a||r<a)&&(a=r),(void 0===s||r>s)&&(s=r))}return void 0!==a&&void 0!==s?[a,s]:void 0}return t}return t}};function tk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function ak(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(a),!0).forEach(function(t){sk(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tk(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function sk(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var nk=[0,"auto"],rk={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ik=(e,t)=>e.cartesianAxis.xAxis[t],lk=(e,t)=>{var a=ik(e,t);return null==a?rk:a},ok={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},ck=(e,t)=>e.cartesianAxis.yAxis[t],dk=(e,t)=>{var a=ck(e,t);return null==a?ok:a},uk={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},mk=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return null==a?uk:a},hk=(e,t,a)=>{switch(t){case"xAxis":return lk(e,a);case"yAxis":return dk(e,a);case"zAxis":return mk(e,a);case"angleAxis":return D_(e,a);case"radiusAxis":return I_(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},pk=(e,t,a)=>{switch(t){case"xAxis":return lk(e,a);case"yAxis":return dk(e,a);case"angleAxis":return D_(e,a);case"radiusAxis":return I_(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},xk=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function fk(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var gk=e=>e.graphicalItems.cartesianItems,vk=Cv([q_,V_],fk),bk=(e,t,a)=>e.filter(a).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),yk=Cv([gk,hk,vk],bk,{memoizeOptions:{resultEqualityCheck:J_}}),jk=Cv([yk],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(K_)),Nk=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),wk=Cv([yk],Nk),Sk=e=>e.map(e=>e.data).filter(Boolean).flat(1),_k=Cv([yk],Sk,{memoizeOptions:{resultEqualityCheck:J_}}),kk=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:n}=t;return e.length>0?e:a.slice(s,n+1)},Ck=Cv([_k,$S],kk),Ek=(e,t,a)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:$v(e,t.dataKey)})):a.length>0?a.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:$v(e,t)}))):e.map(e=>({value:e})),Ak=Cv([Ck,hk,yk],Ek);function Pk(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function Ok(e){if(Vh(e)||e instanceof Date){var t=Number(e);if(op(t))return t}}function Mk(e){if(Array.isArray(e)){var t=[Ok(e[0]),Ok(e[1])];return QS(t)?t:void 0}var a=Ok(e);if(null!=a)return[a,a]}function Tk(e){return e.map(Ok).filter(Xh)}var Dk=e=>{var t=$_(e),a=Q_(e);return pk(e,t,a)},Ik=Cv([Dk],e=>null===e||void 0===e?void 0:e.dataKey),Rk=Cv([jk,$S,Dk],G_),Lk=(e,t,a,s)=>{var n=t.reduce((e,t)=>{if(null==t.stackId)return e;var a=e[t.stackId];return null==a&&(a=[]),a.push(t),e[t.stackId]=a,e},{});return Object.fromEntries(Object.entries(n).map(t=>{var[n,r]=t,i=s?[...r].reverse():r,l=i.map(W_);return[n,{stackedData:tb(e,l,a),graphicalItems:i}]}))},Fk=Cv([Rk,jk,d_,u_],Lk),zk=(e,t,a,s)=>{var{dataStartIndex:n,dataEndIndex:r}=t;if(null==s&&"zAxis"!==a){var i=sb(e,n,r);if(null==i||0!==i[0]||0!==i[1])return i}},Bk=Cv([hk],e=>e.allowDataOverflow),Uk=e=>{var t;if(null==e||!("domain"in e))return nk;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var a=Tk(e.ticks);return[Math.min(...a),Math.max(...a)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:nk},Hk=Cv([hk],Uk),qk=Cv([Hk,Bk],ZS),Vk=Cv([Fk,YS,q_,qk],zk,{memoizeOptions:{resultEqualityCheck:Y_}}),Wk=e=>e.errorBars,Gk=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var s=t.filter(Boolean);if(0!==s.length){var n=s.flat();return[Math.min(...n),Math.max(...n)]}},Kk=(e,t,a,s,n)=>{var r,i;if(a.length>0&&e.forEach(e=>{a.forEach(a=>{var l,o,c=null===(l=s[a.id])||void 0===l?void 0:l.filter(e=>Pk(n,e)),d=$v(e,null!==(o=t.dataKey)&&void 0!==o?o:a.dataKey),u=function(e,t,a){return!a||"number"!==typeof t||Uh(t)?[]:a.length?Tk(a.flatMap(a=>{var s,n,r=$v(e,a.dataKey);if(Array.isArray(r)?[s,n]=r:s=n=r,op(s)&&op(n))return[t-s,t+n]})):[]}(e,d,c);if(u.length>=2){var m=Math.min(...u),h=Math.max(...u);(null==r||m<r)&&(r=m),(null==i||h>i)&&(i=h)}var p=Mk(d);null!=p&&(r=null==r?p[0]:Math.min(r,p[0]),i=null==i?p[1]:Math.max(i,p[1]))})}),null!=(null===t||void 0===t?void 0:t.dataKey)&&e.forEach(e=>{var a=Mk($v(e,t.dataKey));null!=a&&(r=null==r?a[0]:Math.min(r,a[0]),i=null==i?a[1]:Math.max(i,a[1]))}),op(r)&&op(i))return[r,i]},Yk=Cv([Ck,hk,wk,Wk,q_],Kk,{memoizeOptions:{resultEqualityCheck:Y_}});function Jk(e){var{value:t}=e;if(Vh(t)||t instanceof Date)return t}var $k=e=>e.referenceElements.dots,Qk=(e,t,a)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===a:e.yAxisId===a),Xk=Cv([$k,q_,V_],Qk),Zk=e=>e.referenceElements.areas,eC=Cv([Zk,q_,V_],Qk),tC=e=>e.referenceElements.lines,aC=Cv([tC,q_,V_],Qk),sC=(e,t)=>{if(null!=e){var a=Tk(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==a.length)return[Math.min(...a),Math.max(...a)]}},nC=Cv(Xk,q_,sC),rC=(e,t)=>{if(null!=e){var a=Tk(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==a.length)return[Math.min(...a),Math.max(...a)]}},iC=Cv([eC,q_],rC);var lC=(e,t)=>{if(null!=e){var a=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return Tk([e.x]);var a=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==a||0===a.length?[]:Tk(a)}(e):function(e){var t;if(null!=e.y)return Tk([e.y]);var a=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==a||0===a.length?[]:Tk(a)}(e));if(0!==a.length)return[Math.min(...a),Math.max(...a)]}},oC=Cv([aC,q_],lC),cC=Cv(nC,oC,iC,(e,t,a)=>Gk(e,a,t)),dC=(e,t,a,s,n,r,i,l)=>null!=a?a:function(e,t,a){if(a||null!=t){if("function"===typeof e&&null!=t)try{var s=e(t,a);if(QS(s))return XS(s,t,a)}catch(h){}if(Array.isArray(e)&&2===e.length){var n,r,[i,l]=e;if("auto"===i)null!=t&&(n=Math.min(...t));else if(qh(i))n=i;else if("function"===typeof i)try{null!=t&&(n=i(null===t||void 0===t?void 0:t[0]))}catch(p){}else if("string"===typeof i&&nb.test(i)){var o=nb.exec(i);if(null==o||null==o[1]||null==t)n=void 0;else{var c=+o[1];n=t[0]-c}}else n=null===t||void 0===t?void 0:t[0];if("auto"===l)null!=t&&(r=Math.max(...t));else if(qh(l))r=l;else if("function"===typeof l)try{null!=t&&(r=l(null===t||void 0===t?void 0:t[1]))}catch(x){}else if("string"===typeof l&&rb.test(l)){var d=rb.exec(l);if(null==d||null==d[1]||null==t)r=void 0;else{var u=+d[1];r=t[1]+u}}else r=null===t||void 0===t?void 0:t[1];var m=[n,r];if(QS(m))return null==t?m:XS(m,t,a)}}}(t,"vertical"===i&&"xAxis"===l||"horizontal"===i&&"yAxis"===l?Gk(s,r,n):Gk(r,n),e.allowDataOverflow),uC=Cv([hk,Hk,qk,Vk,Yk,cC,Tb,q_],dC,{memoizeOptions:{resultEqualityCheck:Y_}}),mC=[0,1],hC=(e,t,a,s,n,r,i)=>{if(null!=e&&null!=a&&0!==a.length||void 0!==i){var l,{dataKey:o,type:c}=e,d=Qv(t,r);return d&&null==o?zb()(0,null!==(l=null===a||void 0===a?void 0:a.length)&&void 0!==l?l:0):"category"===c?((e,t,a)=>{var s=e.map(Jk).filter(e=>null!=e);return a&&(null==t.dataKey||t.allowDuplicatedCategory&&Yh(s))?zb()(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))})(s,e,d):"expand"===n?mC:i}},pC=Cv([hk,Tb,Ck,Ak,d_,q_,uC],hC);var xC=(e,a,s)=>{if(null!=e){var{scale:n,type:r}=e;if("auto"===n)return"category"===r&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":"category"===r?"band":"linear";if("string"===typeof n){var i="scale".concat(Qh(n));return function(e){return e in t}(i)?i:"point"}}},fC=Cv([hk,xk,m_],xC);function gC(e,t,a,s){if(null!=a&&null!=s)return"function"===typeof e.scale?Z_(e.scale,a,s):Z_(t,a,s)}var vC=(e,t,a)=>{var s=Uk(t);if("auto"===a||"linear"===a)return null!=t&&t.tickCount&&Array.isArray(s)&&("auto"===s[0]||"auto"===s[1])&&QS(e)?l_(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&QS(e)?function(e,t){var[a,s]=e,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[r,i]=n_([a,s]);if(r===-1/0||i===1/0)return[a,s];if(r===i)return[r];var l=Math.max(t,2),o=r_(new(t_())(i).sub(r).div(l-1),n,0),c=[...s_(new(t_())(r),new(t_())(i),o),i];return!1===n&&(c=c.map(e=>Math.round(e))),a>s?c.reverse():c}(e,t.tickCount,t.allowDecimals):void 0},bC=Cv([pC,pk,fC],vC),yC=(e,t,a,s)=>{if("angleAxis"!==s&&"number"===(null===e||void 0===e?void 0:e.type)&&QS(t)&&Array.isArray(a)&&a.length>0){var n,r,i=t[0],l=null!==(n=a[0])&&void 0!==n?n:0,o=t[1],c=null!==(r=a[a.length-1])&&void 0!==r?r:0;return[Math.min(i,l),Math.max(o,c)]}return t},jC=Cv([hk,pC,bC,q_],yC),NC=Cv(Ak,hk,(e,t)=>{if(t&&"number"===t.type){var a=1/0,s=Array.from(Tk(e.map(e=>e.value))).sort((e,t)=>e-t),n=s[0],r=s[s.length-1];if(null==n||null==r)return 1/0;var i=r-n;if(0===i)return 1/0;for(var l=0;l<s.length-1;l++){var o=s[l],c=s[l+1];if(null!=o&&null!=c){var d=c-o;a=Math.min(a,d)}}return a/i}}),wC=Cv(NC,Tb,c_,yb,(e,t,a,s,n)=>n,(e,t,a,s,n)=>{if(!op(e))return 0;var r="vertical"===t?s.height:s.width;if("gap"===n)return e*r/2;if("no-gap"===n){var i=Kh(a,e*r),l=e*r/2;return l-i-(l-i)/r*i}return 0}),SC=Cv(lk,(e,t,a)=>{var s=lk(e,t);return null==s||"string"!==typeof s.padding?0:wC(e,"xAxis",t,a,s.padding)},(e,t)=>{var a,s;if(null==e)return{left:0,right:0};var{padding:n}=e;return"string"===typeof n?{left:t,right:t}:{left:(null!==(a=n.left)&&void 0!==a?a:0)+t,right:(null!==(s=n.right)&&void 0!==s?s:0)+t}}),_C=Cv(dk,(e,t,a)=>{var s=dk(e,t);return null==s||"string"!==typeof s.padding?0:wC(e,"yAxis",t,a,s.padding)},(e,t)=>{var a,s;if(null==e)return{top:0,bottom:0};var{padding:n}=e;return"string"===typeof n?{top:t,bottom:t}:{top:(null!==(a=n.top)&&void 0!==a?a:0)+t,bottom:(null!==(s=n.bottom)&&void 0!==s?s:0)+t}}),kC=Cv([yb,SC,kb,_b,(e,t,a)=>a],(e,t,a,s,n)=>{var{padding:r}=s;return n?[r.left,a.width-r.right]:[e.left+t.left,e.left+e.width-t.right]}),CC=Cv([yb,Tb,_C,kb,_b,(e,t,a)=>a],(e,t,a,s,n,r)=>{var{padding:i}=n;return r?[s.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),EC=(e,t,a,s)=>{var n;switch(t){case"xAxis":return kC(e,a,s);case"yAxis":return CC(e,a,s);case"zAxis":return null===(n=mk(e,a))||void 0===n?void 0:n.range;case"angleAxis":return B_(e);case"radiusAxis":return U_(e,a);default:return}},AC=Cv([hk,EC],C_),PC=Cv([fC,jC],ek),OC=Cv([hk,fC,PC,AC],gC);Cv([yk,Wk,q_],(e,t,a)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>Pk(a,e)));function MC(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var TC=(e,t)=>t,DC=(e,t,a)=>a,IC=Cv(hb,TC,DC,(e,t,a)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===a).sort(MC)),RC=Cv(pb,TC,DC,(e,t,a)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===a).sort(MC)),LC=(e,t)=>({width:e.width,height:t.height}),FC=Cv(yb,lk,LC),zC=Cv(db,yb,IC,TC,DC,(e,t,a,s,n)=>{var r,i={};return a.forEach(a=>{var l=LC(t,a);null==r&&(r=((e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}})(t,s,e));var o="top"===s&&!n||"bottom"===s&&n;i[a.id]=r-Number(o)*l.height,r+=(o?-1:1)*l.height}),i}),BC=Cv(cb,yb,RC,TC,DC,(e,t,a,s,n)=>{var r,i={};return a.forEach(a=>{var l=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,a);null==r&&(r=((e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}})(t,s,e));var o="left"===s&&!n||"right"===s&&n;i[a.id]=r-Number(o)*l.width,r+=(o?-1:1)*l.width}),i}),UC=Cv([yb,lk,(e,t)=>{var a=lk(e,t);if(null!=a)return zC(e,a.orientation,a.mirror)},(e,t)=>t],(e,t,a,s)=>{if(null!=t){var n=null===a||void 0===a?void 0:a[s];return null==n?{x:e.left,y:0}:{x:e.left,y:n}}}),HC=Cv([yb,dk,(e,t)=>{var a=dk(e,t);if(null!=a)return BC(e,a.orientation,a.mirror)},(e,t)=>t],(e,t,a,s)=>{if(null!=t){var n=null===a||void 0===a?void 0:a[s];return null==n?{x:0,y:e.top}:{x:n,y:e.top}}}),qC=Cv(yb,dk,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),VC=(e,t,a)=>{switch(t){case"xAxis":return FC(e,a).width;case"yAxis":return qC(e,a).height;default:return}},WC=(e,t,a,s)=>{if(null!=a){var{allowDuplicatedCategory:n,type:r,dataKey:i}=a,l=Qv(e,s),o=t.map(e=>e.value);return i&&l&&"category"===r&&n&&Yh(o)?o:void 0}},GC=Cv([Tb,Ak,hk,q_],WC),KC=(e,t,a,s)=>{if(null!=a&&null!=a.dataKey){var{type:n,scale:r}=a;return!Qv(e,s)||"number"!==n&&"auto"===r?void 0:t.map(e=>e.value)}},YC=Cv([Tb,Ak,pk,q_],KC),JC=Cv([Tb,(e,t,a)=>{switch(t){case"xAxis":return lk(e,a);case"yAxis":return dk(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},fC,OC,GC,YC,EC,bC,q_],(e,t,a,s,n,r,i,l,o)=>{if(null!=t){var c=Qv(e,o);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:o,categoricalDomain:r,duplicateDomain:n,isCategorical:c,niceTicks:l,range:i,realScaleType:a,scale:s}}}),$C=Cv([Tb,pk,fC,OC,bC,EC,GC,YC,q_],(e,t,a,s,n,r,i,l,o)=>{if(null!=t&&null!=s){var c=Qv(e,o),{type:d,ticks:u,tickCount:m}=t,h="scaleBand"===a&&"function"===typeof s.bandwidth?s.bandwidth()/2:2,p="category"===d&&s.bandwidth?s.bandwidth()/h:0;p="angleAxis"===o&&null!=r&&r.length>=2?2*Bh(r[0]-r[1])*p:p;var x=u||n;return x?x.map((e,t)=>{var a=i?i.indexOf(e):e,n=s.map(a);return op(n)?{index:t,coordinate:n+p,value:e,offset:p}:null}).filter(Xh):c&&l?l.map((e,t)=>{var a=s.map(e);return op(a)?{coordinate:a+p,value:e,index:t,offset:p}:null}).filter(Xh):s.ticks?s.ticks(m).map((e,t)=>{var a=s.map(e);return op(a)?{coordinate:a+p,value:e,index:t,offset:p}:null}).filter(Xh):s.domain().map((e,t)=>{var a=s.map(e);return op(a)?{coordinate:a+p,value:i?i[e]:e,index:t,offset:p}:null}).filter(Xh)}}),QC=Cv([Tb,pk,OC,EC,GC,YC,q_],(e,t,a,s,n,r,i)=>{if(null!=t&&null!=a&&null!=s&&s[0]!==s[1]){var l=Qv(e,i),{tickCount:o}=t,c=0;return c="angleAxis"===i&&(null===s||void 0===s?void 0:s.length)>=2?2*Bh(s[0]-s[1])*c:c,l&&r?r.map((e,t)=>{var s=a.map(e);return op(s)?{coordinate:s+c,value:e,index:t,offset:c}:null}).filter(Xh):a.ticks?a.ticks(o).map((e,t)=>{var s=a.map(e);return op(s)?{coordinate:s+c,value:e,index:t,offset:c}:null}).filter(Xh):a.domain().map((e,t)=>{var s=a.map(e);return op(s)?{coordinate:s+c,value:n?n[e]:e,index:t,offset:c}:null}).filter(Xh)}}),XC=Cv(hk,OC,(e,t)=>{if(null!=e&&null!=t)return ak(ak({},e),{},{scale:t})}),ZC=Cv([hk,fC,pC,AC],gC),eE=(Cv((e,t,a)=>mk(e,a),ZC,(e,t)=>{if(null!=e&&null!=t)return ak(ak({},e),{},{scale:t})}),Cv([Tb,hb,pb],(e,t,a)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),tE=e=>e.options.defaultTooltipEventType,aE=e=>e.options.validateTooltipEventTypes;function sE(e,t,a){if(null==e)return t;var s=e?"axis":"item";return null==a?t:a.includes(s)?s:t}function nE(e,t){return sE(t,tE(e),aE(e))}var rE=(e,t)=>{var a,s=Number(t);if(!Uh(s)&&null!=t)return s>=0?null===e||void 0===e||null===(a=e[s])||void 0===a?void 0:a.value:void 0};function iE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function lE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?iE(Object(a),!0).forEach(function(t){oE(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iE(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function oE(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var cE=(e,t,a,s)=>{if(null==t)return Yg;var n=function(e,t,a){return"axis"===t?"click"===a?e.axisInteraction.click:e.axisInteraction.hover:"click"===a?e.itemInteraction.click:e.itemInteraction.hover}(e,t,a);if(null==n)return Yg;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var r=!0===e.settings.active;if(null!=n.index){if(r)return lE(lE({},n),{},{active:!0})}else if(null!=s)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return lE(lE({},Yg),{},{coordinate:n.coordinate})};function dE(e,t){var a=function(e){if("number"===typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}(e),s=t[0],n=t[1];if(void 0===a)return!1;var r=Math.min(s,n),i=Math.max(s,n);return a>=r&&a<=i}var uE=(e,t,a,s)=>{var n=null===e||void 0===e?void 0:e.index;if(null==n)return null;var r=Number(n);if(!op(r))return n;var i=1/0;t.length>0&&(i=t.length-1);var l=Math.max(0,Math.min(r,i)),o=t[l];return null==o||function(e,t,a){if(null==a||null==t)return!0;var s=$v(e,t);return null==s||!QS(a)||dE(s,a)}(o,a,s)?String(l):null},mE=(e,t,a,s,n,r,i)=>{if(null!=r){var l=i[0],o=null===l||void 0===l?void 0:l.getPosition(r);if(null!=o)return o;var c=null===n||void 0===n?void 0:n[Number(r)];if(c)return"horizontal"===a?{x:c.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:c.coordinate}}},hE=(e,t,a,s)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];var n;if(null==(n="hover"===a?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=s){var r=e.tooltipItemPayloads[0];return null!=r?[r]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.graphicalItemId)===n})},pE=e=>e.options.tooltipPayloadSearcher,xE=e=>e.tooltip;function fE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function gE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fE(Object(a),!0).forEach(function(t){vE(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fE(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function vE(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var bE=(e,t,a,s,n,r,i)=>{if(null!=t&&null!=r){var{chartData:l,computedData:o,dataStartIndex:c,dataEndIndex:d}=a;return e.reduce((e,a)=>{var u,m,h,{dataDefinedOnItem:p,settings:x}=a,f=function(e,t){return null!=e?e:t}(p,l),g=Array.isArray(f)?Gv(f,c,d):f,v=null!==(u=null===x||void 0===x?void 0:x.dataKey)&&void 0!==u?u:s,b=null===x||void 0===x?void 0:x.nameKey;(m=s&&Array.isArray(g)&&!Array.isArray(g[0])&&"axis"===i?function(e,t,a){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):Lh()(e,t))===a)}(g,s,n):r(g,t,o,b),Array.isArray(m))?m.forEach(t=>{var a=gE(gE({},x),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(lb({tooltipEntrySettings:a,dataKey:t.dataKey,payload:t.payload,value:$v(t.payload,t.dataKey),name:t.name}))}):e.push(lb({tooltipEntrySettings:x,dataKey:v,payload:m,value:$v(m,v),name:null!==(h=$v(m,b))&&void 0!==h?h:null===x||void 0===x?void 0:x.name}));return e},[])}},yE=Cv([Dk,xk,m_],xC),jE=Cv([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),NE=Cv([$_,Q_],fk),wE=Cv([jE,Dk,NE],bk,{memoizeOptions:{resultEqualityCheck:J_}}),SE=Cv([wE],e=>e.filter(K_)),_E=Cv([wE],Sk,{memoizeOptions:{resultEqualityCheck:J_}}),kE=Cv([_E,YS],kk),CE=Cv([SE,YS,Dk],G_),EE=Cv([kE,Dk,wE],Ek),AE=Cv([Dk],Uk),PE=Cv([Dk],e=>e.allowDataOverflow),OE=Cv([AE,PE],ZS),ME=Cv([wE],e=>e.filter(K_)),TE=Cv([CE,ME,d_,u_],Lk),DE=Cv([TE,YS,$_,OE],zk),IE=Cv([wE],Nk),RE=Cv([kE,Dk,IE,Wk,$_],Kk,{memoizeOptions:{resultEqualityCheck:Y_}}),LE=Cv([$k,$_,Q_],Qk),FE=Cv([LE,$_],sC),zE=Cv([Zk,$_,Q_],Qk),BE=Cv([zE,$_],rC),UE=Cv([tC,$_,Q_],Qk),HE=Cv([UE,$_],lC),qE=Cv([FE,HE,BE],Gk),VE=Cv([Dk,AE,OE,DE,RE,qE,Tb,$_],dC),WE=Cv([Dk,Tb,kE,EE,d_,$_,VE],hC),GE=Cv([WE,Dk,yE],vC),KE=Cv([Dk,WE,GE,$_],yC),YE=e=>{var t=$_(e),a=Q_(e);return EC(e,t,a,!1)},JE=Cv([Dk,YE],C_),$E=Cv([Dk,yE,KE,JE],gC),QE=Cv([Tb,EE,Dk,$_],WC),XE=Cv([Tb,EE,Dk,$_],KC),ZE=Cv([Tb,Dk,yE,$E,YE,QE,XE,$_],(e,t,a,s,n,r,i,l)=>{if(t){var{type:o}=t,c=Qv(e,l);if(s){var d="scaleBand"===a&&s.bandwidth?s.bandwidth()/2:2,u="category"===o&&s.bandwidth?s.bandwidth()/d:0;return u="angleAxis"===l&&null!=n&&(null===n||void 0===n?void 0:n.length)>=2?2*Bh(n[0]-n[1])*u:u,c&&i?i.map((e,t)=>{var a=s.map(e);return op(a)?{coordinate:a+u,value:e,index:t,offset:u}:null}).filter(Xh):s.domain().map((e,t)=>{var a=s.map(e);return op(a)?{coordinate:a+u,value:r?r[e]:e,index:t,offset:u}:null}).filter(Xh)}}}),eA=Cv([tE,aE,e=>e.tooltip.settings],(e,t,a)=>sE(a.shared,e,t)),tA=e=>e.tooltip.settings.trigger,aA=e=>e.tooltip.settings.defaultIndex,sA=Cv([xE,eA,tA,aA],cE),nA=Cv([sA,kE,Ik,WE],uE),rA=Cv([ZE,nA],rE),iA=Cv([sA],e=>{if(e)return e.dataKey}),lA=Cv([sA],e=>{if(e)return e.graphicalItemId}),oA=Cv([xE,eA,tA,aA],hE),cA=Cv([cb,db,Tb,yb,ZE,aA,oA],mE),dA=Cv([sA,cA],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),uA=Cv([sA],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.active)&&void 0!==t&&t}),mA=Cv([oA,nA,YS,Ik,rA,pE,eA],bE);Cv([mA],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function hA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function pA(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hA(Object(a),!0).forEach(function(t){xA(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hA(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function xA(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fA=(e,t,a,s,n)=>{var r,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0;if(i<=1||null==e)return 0;if("angleAxis"===s&&null!=n&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var l=0;l<i;l++){var o,c,d,u,m,h=l>0?null===(o=a[l-1])||void 0===o?void 0:o.coordinate:null===(c=a[i-1])||void 0===c?void 0:c.coordinate,p=null===(d=a[l])||void 0===d?void 0:d.coordinate,x=l>=i-1?null===(u=a[0])||void 0===u?void 0:u.coordinate:null===(m=a[l+1])||void 0===m?void 0:m.coordinate,f=void 0;if(null!=h&&null!=p&&null!=x)if(Bh(p-h)!==Bh(x-p)){var g=[];if(Bh(x-p)===Bh(n[1]-n[0])){f=x;var v=p+n[1]-n[0];g[0]=Math.min(v,(v+h)/2),g[1]=Math.max(v,(v+h)/2)}else{f=h;var b=x+n[1]-n[0];g[0]=Math.min(p,(b+p)/2),g[1]=Math.max(p,(b+p)/2)}var y,j=[Math.min(p,(f+p)/2),Math.max(p,(f+p)/2)];if(e>j[0]&&e<=j[1]||e>=g[0]&&e<=g[1])return null===(y=a[l])||void 0===y?void 0:y.index}else{var N,w=Math.min(h,x),S=Math.max(h,x);if(e>(w+p)/2&&e<=(S+p)/2)return null===(N=a[l])||void 0===N?void 0:N.index}}else if(t)for(var _=0;_<i;_++){var k=t[_];if(null!=k){var C=t[_+1],E=t[_-1];if(0===_&&null!=C&&e<=(k.coordinate+C.coordinate)/2)return k.index;if(_===i-1&&null!=E&&e>(k.coordinate+E.coordinate)/2)return k.index;if(_>0&&_<i-1&&null!=E&&null!=C&&e>(k.coordinate+E.coordinate)/2&&e<=(k.coordinate+C.coordinate)/2)return k.index}}return-1},gA=(e,t)=>t,vA=(e,t,a)=>a,bA=(e,t,a,s)=>s,yA=Cv(ZE,e=>Fv()(e,e=>e.coordinate)),jA=Cv([xE,gA,vA,bA],cE),NA=Cv([jA,kE,Ik,WE],uE),wA=Cv([xE,gA,vA,bA],hE),SA=Cv([cb,db,Tb,yb,ZE,bA,wA],mE),_A=Cv([jA,SA],(e,t)=>{var a;return null!==(a=e.coordinate)&&void 0!==a?a:t}),kA=Cv([ZE,NA],rE),CA=Cv([wA,NA,YS,Ik,kA,pE,gA],bE),EA=Cv([jA,NA],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),AA=(e,t,a,s,n,r,i)=>{if(e&&s&&n&&r&&a){var l=__(e,a);if(l){var o=((e,t)=>"centric"===t?e.angle:e.radius)(l,t),c=fA(o,i,r,s,n),d=((e,t,a,s)=>{var n=t.find(e=>e&&e.index===a);if(n){if("centric"===e){var r=n.coordinate,{radius:i}=s;return pA(pA(pA({},s),j_(s.cx,s.cy,i,r)),{},{angle:r,radius:i})}var l=n.coordinate,{angle:o}=s;return pA(pA(pA({},s),j_(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,r,c,l);return{activeIndex:String(c),activeCoordinate:d}}}},PA=Cv([(e,t)=>t,Tb,H_,$_,JE,ZE,yA,yb],(e,t,a,s,n,r,i,l)=>{if(e&&t&&s&&n&&r)return"horizontal"===t||"vertical"===t?((e,t,a,s,n,r,i)=>{if(e&&a&&s&&n&&function(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}(e,i)){var l=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),o=fA(l,r,n,a,s),c=((e,t,a,s)=>{var n=t.find(e=>e&&e.index===a);if(n){if("horizontal"===e)return{x:n.coordinate,y:s.chartY};if("vertical"===e)return{x:s.chartX,y:n.coordinate}}return{x:0,y:0}})(t,n,o,e);return{activeIndex:String(o),activeCoordinate:c}}})(e,t,s,n,r,i,l):AA(e,t,a,s,n,r,i)}),OA=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},MA=Gx("mouseClick"),TA=Bf();TA.startListening({actionCreator:MA,effect:(e,t)=>{var a=e.payload,s=PA(t.getState(),OA(a));null!=(null===s||void 0===s?void 0:s.activeIndex)&&t.dispatch(rv({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var DA=Gx("mouseMove"),IA=Bf(),RA=null;function LA(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"===typeof t&&null!==t?"<<CHILDREN>>":t}function FA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function zA(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?FA(Object(a),!0).forEach(function(t){BA(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FA(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function BA(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}IA.startListening({actionCreator:DA,effect:(e,t)=>{var a=e.payload;null!==RA&&cancelAnimationFrame(RA);var s=OA(a);RA=requestAnimationFrame(()=>{var e=t.getState();if("axis"===nE(e,e.tooltip.settings.shared)){var a=PA(e,s);null!=(null===a||void 0===a?void 0:a.activeIndex)?t.dispatch(nv({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(av())}RA=null})}});var UA=of({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Qx()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;void 0!==e.xAxis[a.id]&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:Qx()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Qx()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Qx()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;void 0!==e.yAxis[a.id]&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:Qx()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Qx()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Qx()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;void 0!==e.zAxis[a.id]&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:Qx()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Qx()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,n=e.yAxis[a];if(n){var r,i=n.widthHistory||[];if(3===i.length&&i[0]===i[2]&&s===i[1]&&s!==n.width&&Math.abs(s-(null!==(r=i[0])&&void 0!==r?r:0))<=1)return;var l=[...i,s].slice(-3);e.yAxis[a]=zA(zA({},n),{},{width:s,widthHistory:l})}}}}),{addXAxis:HA,replaceXAxis:qA,removeXAxis:VA,addYAxis:WA,replaceYAxis:GA,removeYAxis:KA,addZAxis:YA,replaceZAxis:JA,removeZAxis:$A,updateYAxisWidth:QA}=UA.actions,XA=UA.reducer,ZA=of({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Qx()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,n=Ex(e).cartesianItems.indexOf(a);n>-1&&(e.cartesianItems[n]=s)},prepare:Qx()},removeCartesianGraphicalItem:{reducer(e,t){var a=Ex(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:Qx()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Qx()},removePolarGraphicalItem:{reducer(e,t){var a=Ex(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:Qx()}}}),{addCartesianGraphicalItem:eP,replaceCartesianGraphicalItem:tP,removeCartesianGraphicalItem:aP,addPolarGraphicalItem:sP,removePolarGraphicalItem:nP}=ZA.actions,rP=ZA.reducer,iP=of({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=Ex(e).dots.findIndex(e=>e===t.payload);-1!==a&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=Ex(e).areas.findIndex(e=>e===t.payload);-1!==a&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=Ex(e).lines.findIndex(e=>e===t.payload);-1!==a&&e.lines.splice(a,1)}}}),{addDot:lP,removeDot:oP,addArea:cP,removeArea:dP,addLine:uP,removeLine:mP}=iP.actions,hP=iP.reducer,pP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xP=of({name:"brush",initialState:pP,reducers:{setBrushSettings:(e,t)=>null==t.payload?pP:t.payload}}),{setBrushSettings:fP}=xP.actions,gP=xP.reducer,vP=of({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Qx()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,n=Ex(e).payload.indexOf(a);n>-1&&(e.payload[n]=s)},prepare:Qx()},removeLegendPayload:{reducer(e,t){var a=Ex(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:Qx()}}}),{setLegendSize:bP,setLegendSettings:yP,addLegendPayload:jP,replaceLegendPayload:NP,removeLegendPayload:wP}=vP.actions,SP=vP.reducer,_P={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},kP=of({name:"rootProps",initialState:_P,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(a=t.payload.barGap)&&void 0!==a?a:_P.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),CP=kP.reducer,{updateOptions:EP}=kP.actions,AP=of({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:PP,removeRadiusAxis:OP,addAngleAxis:MP,removeAngleAxis:TP}=AP.actions,DP=AP.reducer,IP=of({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:RP}=IP.actions,LP=IP.reducer,FP=Gx("keyDown"),zP=Gx("focus"),BP=Bf();BP.startListening({actionCreator:FP,effect:(e,t)=>{var a=t.getState();if(!1!==a.rootProps.accessibilityLayer){var{keyboardInteraction:s}=a.tooltip,n=e.payload;if("ArrowRight"===n||"ArrowLeft"===n||"Enter"===n){var r=uE(s,kE(a),Ik(a),WE(a)),i=null==r?-1:Number(r);if(Number.isFinite(i)&&!(i<0)){var l=ZE(a);if("Enter"!==n){var o=i+("ArrowRight"===n?1:-1)*("left-to-right"===eE(a)?1:-1);if(!(null==l||o>=l.length||o<0)){var c=SA(a,"axis","hover",String(o));t.dispatch(lv({active:!0,activeIndex:o.toString(),activeCoordinate:c}))}}else{var d=SA(a,"axis","hover",String(s.index));t.dispatch(lv({active:!s.active,activeIndex:s.index,activeCoordinate:d}))}}}}}}),BP.startListening({actionCreator:zP,effect:(e,t)=>{var a=t.getState();if(!1!==a.rootProps.accessibilityLayer){var{keyboardInteraction:s}=a.tooltip;if(!s.active&&null==s.index){var n=SA(a,"axis","hover",String("0"));t.dispatch(lv({active:!0,activeIndex:"0",activeCoordinate:n}))}}}});var UP=Gx("externalEvent"),HP=Bf(),qP=new Map;HP.startListening({actionCreator:UP,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(null!=a){s.persist();var n=s.type,r=qP.get(n);void 0!==r&&cancelAnimationFrame(r);var i=requestAnimationFrame(()=>{try{var e=t.getState(),r={activeCoordinate:dA(e),activeDataKey:iA(e),activeIndex:nA(e),activeLabel:rA(e),activeTooltipIndex:nA(e),isTooltipActive:uA(e)};a(r,s)}finally{qP.delete(n)}});qP.set(n,i)}}});var VP=Cv([xE],e=>e.tooltipItemPayloads),WP=Cv([VP,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>{if(null!=t){var s=e.find(e=>e.settings.graphicalItemId===a);if(null!=s){var{getPosition:n}=s;if(null!=n)return n(t)}}}),GP=Gx("touchMove"),KP=Bf();KP.startListening({actionCreator:GP,effect:(e,t)=>{var a=e.payload;if(null!=a.touches&&0!==a.touches.length){var s=t.getState(),n=nE(s,s.tooltip.settings.shared);if("axis"===n){var r=a.touches[0];if(null==r)return;var i=PA(s,OA({clientX:r.clientX,clientY:r.clientY,currentTarget:a.currentTarget}));null!=(null===i||void 0===i?void 0:i.activeIndex)&&t.dispatch(nv({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if("item"===n){var l,o=a.touches[0];if(null==document.elementFromPoint||null==o)return;var c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(xb),u=null!==(l=c.getAttribute(fb))&&void 0!==l?l:void 0,m=wE(s).find(e=>e.id===u);if(null==d||null==m||null==u)return;var{dataKey:h}=m,p=WP(s,d,u);t.dispatch(ev({activeDataKey:h,activeIndex:d,activeCoordinate:p,activeGraphicalItemId:u}))}}}});var YP=of({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:n}=t.payload;e[a]&&(e[a]=e[a].map(e=>e.dataKey===s.dataKey&&e.direction===s.direction?n:e))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(e=>e.dataKey!==s.dataKey||e.direction!==s.direction))}}}),{addErrorBar:JP,replaceErrorBar:$P,removeErrorBar:QP}=YP.actions,XP=YP.reducer,ZP=!0,eO=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function tO(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function aO(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(a),!0).forEach(function(t){sO(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tO(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function sO(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var nO={zIndexMap:Object.values(k_).reduce((e,t)=>aO(aO({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},rO=new Set(Object.values(k_));var iO=of({name:"zIndex",initialState:nO,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Qx()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!function(e){return rO.has(e)}(a)&&delete e.zIndexMap[a])},prepare:Qx()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:n}=t.payload;e.zIndexMap[a]?n?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:n?void 0:s,panoramaElement:n?s:void 0}},prepare:Qx()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:Qx()}}}),{registerZIndexPortal:lO,unregisterZIndexPortal:oO,registerZIndexPortalElement:cO,unregisterZIndexPortalElement:dO}=iO.actions,uO=Fx({brush:gP,cartesianAxis:XA,chartData:hv,errorBars:XP,graphicalItems:rP,layout:bv,legend:SP,options:Vf,polarAxis:DP,polarOptions:LP,referenceElements:hP,rootProps:CP,tooltip:ov,zIndex:iO.reducer});function mO(e){var{preloadedState:t,children:a,reduxStoreName:n}=e,r=Sb(),i=(0,s.useRef)(null);if(r)return a;null==i.current&&(i.current=function(e){return ef({reducer:uO,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([TA.middleware,IA.middleware,BP.middleware,HP.middleware,KP.middleware]),enhancers:e=>{var t=e;return"function"===typeof e&&(t=e()),t.concat(Zx({type:"raf"}))},devTools:ZP&&{serialize:{replacer:LA},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,n));var l=Pv;return s.createElement(ng,{context:l,store:i.current},a)}var hO=e=>{var{chartData:t}=e,a=Mv(),n=Sb();return(0,s.useEffect)(()=>n?()=>{}:(a(dv(t)),()=>{a(dv(void 0))}),[t,a,n]),null},pO=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function xO(e,t){return null==e&&null==t||("number"===typeof e&&"number"===typeof t?e===t||e!==e&&t!==t:e===t)}function fO(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(pO.has(s)){if(null==e[s]&&null==t[s])continue;if(!Zf(e[s],t[s]))return!1}else if(!xO(e[s],t[s]))return!1;return!0}function gO(e){var{layout:t,margin:a}=e,n=Mv(),r=Sb();return(0,s.useEffect)(()=>{r||(n(fv(t)),n(xv(a)))},[n,r,t,a]),null}var vO=(0,s.memo)(gO,fO);function bO(e){var t=Mv();return(0,s.useEffect)(()=>{t(EP(e))},[t,e]),null}var yO=()=>{var e;return null===(e=Rv(e=>e.rootProps.accessibilityLayer))||void 0===e||e},jO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function NO(e){return"string"===typeof e&&jO.includes(e)}var wO=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function SO(e){return"string"===typeof e&&wO.has(e)}function _O(e){return"string"===typeof e&&e.startsWith("data-")}function kO(e){if("object"!==typeof e||null===e)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(SO(a)||_O(a))&&(t[a]=e[a]);return t}function CO(e){return null==e?null:(0,s.isValidElement)(e)&&"object"===typeof e.props&&null!==e.props?kO(e.props):"object"!==typeof e||Array.isArray(e)?null:kO(e)}function EO(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(SO(a)||_O(a)||NO(a))&&(t[a]=e[a]);return t}var AO=["children","width","height","viewBox","className","style","title","desc"];function PO(){return PO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},PO.apply(null,arguments)}var OO=(0,s.forwardRef)((e,t)=>{var{children:a,width:n,height:r,viewBox:i,className:l,style:o,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,AO),m=i||{width:n,height:r,x:0,y:0},h=ui("recharts-surface",l);return s.createElement("svg",PO({},EO(u),{className:h,width:n,height:r,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),s.createElement("title",null,c),s.createElement("desc",null,d),a)}),MO=Cv(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(null!=t){var s=e[t];if(null!=s)return a?s.panoramaElement:s.element}}),TO=Cv(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(k_));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}}});function DO(e){var{zIndex:t,isPanorama:a}=e,n=(0,s.useRef)(null),r=Mv();return(0,s.useLayoutEffect)(()=>(n.current&&r(cO({zIndex:t,element:n.current,isPanorama:a})),()=>{r(dO({zIndex:t,isPanorama:a}))}),[r,t,a]),s.createElement("g",{tabIndex:-1,ref:n})}function IO(e){var{children:t,isPanorama:a}=e,n=Rv(TO);if(!n||0===n.length)return t;var r=n.filter(e=>e<0),i=n.filter(e=>e>0);return s.createElement(s.Fragment,null,r.map(e=>s.createElement(DO,{key:e,zIndex:e,isPanorama:a})),t,i.map(e=>s.createElement(DO,{key:e,zIndex:e,isPanorama:a})))}var RO=["children"];function LO(){return LO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},LO.apply(null,arguments)}var FO={width:"100%",height:"100%",display:"block"},zO=(0,s.forwardRef)((e,t)=>{var a=Ob(),n=Mb(),r=yO();if(!cp(a)||!cp(n))return null;var i,l,{children:o,otherAttributes:c,title:d,desc:u}=e;return null!=c&&(i="number"===typeof c.tabIndex?c.tabIndex:r?0:void 0,l="string"===typeof c.role?c.role:r?"application":void 0),s.createElement(OO,LO({},c,{title:d,desc:u,role:l,tabIndex:i,width:a,height:n,style:FO,ref:t}),o)}),BO=e=>{var{children:t}=e,a=Rv(kb);if(!a)return null;var{width:n,height:r,y:i,x:l}=a;return s.createElement(OO,{width:n,height:r,x:l,y:i},t)},UO=(0,s.forwardRef)((e,t)=>{var{children:a}=e,n=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,RO);return Sb()?s.createElement(BO,null,s.createElement(IO,{isPanorama:!0},a)):s.createElement(zO,LO({ref:t},n),s.createElement(IO,{isPanorama:!1},a))});var HO=new(a(5438)),qO="recharts.syncEvent.tooltip",VO="recharts.syncEvent.brush";function WO(e){return e.tooltip.syncInteraction}var GO=["x","y"];function KO(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function YO(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?KO(Object(a),!0).forEach(function(t){JO(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KO(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function JO(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $O(){var e=Rv(h_),t=Rv(x_),a=Mv(),n=Rv(p_),r=Rv(ZE),i=Db(),l=Eb(),o=Rv(e=>e.rootProps.className);(0,s.useEffect)(()=>{if(null==e)return Zh;var s=(s,o,c)=>{var d;if(t!==c&&e===s)if("index"!==n){if(null!=r){var u;if("function"===typeof n){var m={activeTooltipIndex:null==o.payload.index?void 0:Number(o.payload.index),isTooltipActive:o.payload.active,activeIndex:null==o.payload.index?void 0:Number(o.payload.index),activeLabel:o.payload.label,activeDataKey:o.payload.dataKey,activeCoordinate:o.payload.coordinate},h=n(r,m);u=r[h]}else"value"===n&&(u=r.find(e=>String(e.value)===o.payload.label));var{coordinate:p}=o.payload;if(null!=u&&!1!==o.payload.active&&null!=p&&null!=l){var{x:x,y:f}=p,g=Math.min(x,l.x+l.width),v=Math.min(f,l.y+l.height),b={x:"horizontal"===i?u.coordinate:g,y:"horizontal"===i?v:u.coordinate},y=iv({active:o.payload.active,coordinate:b,dataKey:o.payload.dataKey,index:String(u.index),label:o.payload.label,sourceViewBox:o.payload.sourceViewBox,graphicalItemId:o.payload.graphicalItemId});a(y)}else a(iv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}))}}else if(l&&null!==o&&void 0!==o&&null!==(d=o.payload)&&void 0!==d&&d.coordinate&&o.payload.sourceViewBox){var j=o.payload.coordinate,{x:N,y:w}=j,S=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(j,GO),{x:_,y:k,width:C,height:E}=o.payload.sourceViewBox,A=YO(YO({},S),{},{x:l.x+(C?(N-_)/C:0)*l.width,y:l.y+(E?(w-k)/E:0)*l.height});a(YO(YO({},o),{},{payload:YO(YO({},o.payload),{},{coordinate:A})}))}else a(o)};return HO.on(qO,s),()=>{HO.off(qO,s)}},[o,a,t,e,n,r,i,l])}function QO(){var e=Mv();(0,s.useEffect)(()=>{e(Wf())},[e]),$O(),function(){var e=Rv(h_),t=Rv(x_),a=Mv();(0,s.useEffect)(()=>{if(null==e)return Zh;var s=(s,n,r)=>{t!==r&&e===s&&a(uv(n))};return HO.on(VO,s),()=>{HO.off(VO,s)}},[a,t,e])}()}function XO(e,t,a,n,r,i){var l=Rv(a=>((e,t,a)=>{if(null!=t){var s=xE(e);return"axis"===t?"hover"===a?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:"hover"===a?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}})(a,e,t)),o=Rv(x_),c=Rv(h_),d=Rv(p_),u=Rv(WO),m=null===u||void 0===u?void 0:u.active,h=Eb();(0,s.useEffect)(()=>{if(!m&&null!=c&&null!=o){var e=iv({active:i,coordinate:a,dataKey:l,index:r,label:"number"===typeof n?String(n):n,sourceViewBox:h,graphicalItemId:void 0});HO.emit(qO,c,e,o)}},[m,a,l,r,n,o,c,d,i,h])}var ZO=(0,s.createContext)(null),eM=(0,s.createContext)(null);function tM(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function aM(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tM(Object(a),!0).forEach(function(t){sM(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tM(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function sM(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nM(){return nM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nM.apply(null,arguments)}var rM=()=>(QO(),null);function iM(e){if("number"===typeof e)return e;if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var lM=(0,s.forwardRef)((e,t)=>{var a,n,r=(0,s.useRef)(null),[i,l]=(0,s.useState)({containerWidth:iM(null===(a=e.style)||void 0===a?void 0:a.width),containerHeight:iM(null===(n=e.style)||void 0===n?void 0:n.height)}),o=(0,s.useCallback)((e,t)=>{l(a=>{var s=Math.round(e),n=Math.round(t);return a.containerWidth===s&&a.containerHeight===n?a:{containerWidth:s,containerHeight:n}})},[]),c=(0,s.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e&&"undefined"!==typeof ResizeObserver){var{width:a,height:s}=e.getBoundingClientRect();o(a,s);var n=new ResizeObserver(e=>{var t=e[0];if(null!=t){var{width:a,height:s}=t.contentRect;o(a,s)}});n.observe(e),r.current=n}},[t,o]);return(0,s.useEffect)(()=>()=>{var e=r.current;null!=e&&e.disconnect()},[o]),s.createElement(s.Fragment,null,s.createElement(Lb,{width:i.containerWidth,height:i.containerHeight}),s.createElement("div",nM({ref:c},e)))}),oM=(0,s.forwardRef)((e,t)=>{var{width:a,height:n}=e,[r,i]=(0,s.useState)({containerWidth:iM(a),containerHeight:iM(n)}),l=(0,s.useCallback)((e,t)=>{i(a=>{var s=Math.round(e),n=Math.round(t);return a.containerWidth===s&&a.containerHeight===n?a:{containerWidth:s,containerHeight:n}})},[]),o=(0,s.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e){var{width:a,height:s}=e.getBoundingClientRect();l(a,s)}},[t,l]);return s.createElement(s.Fragment,null,s.createElement(Lb,{width:r.containerWidth,height:r.containerHeight}),s.createElement("div",nM({ref:o},e)))}),cM=(0,s.forwardRef)((e,t)=>{var{width:a,height:n}=e;return s.createElement(s.Fragment,null,s.createElement(Lb,{width:a,height:n}),s.createElement("div",nM({ref:t},e)))}),dM=(0,s.forwardRef)((e,t)=>{var{width:a,height:n}=e;return"string"===typeof a||"string"===typeof n?s.createElement(oM,nM({},e,{ref:t})):"number"===typeof a&&"number"===typeof n?s.createElement(cM,nM({},e,{width:a,height:n,ref:t})):s.createElement(s.Fragment,null,s.createElement(Lb,{width:a,height:n}),s.createElement("div",nM({ref:t},e)))});var uM=(0,s.forwardRef)((e,t)=>{var{children:a,className:n,height:r,onClick:i,onContextMenu:l,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:m,onMouseUp:h,onTouchEnd:p,onTouchMove:x,onTouchStart:f,style:g,width:v,responsive:b,dispatchTouchEvents:y=!0}=e,j=(0,s.useRef)(null),N=Mv(),[w,S]=(0,s.useState)(null),[_,k]=(0,s.useState)(null),C=function(){var e=Mv(),[t,a]=(0,s.useState)(null),n=Rv(ub);return(0,s.useEffect)(()=>{if(null!=t){var a=t.getBoundingClientRect().width/t.offsetWidth;op(a)&&a!==n&&e(vv(a))}},[t,e,n]),a}(),E=fp(),A=(null===E||void 0===E?void 0:E.width)>0?E.width:v,P=(null===E||void 0===E?void 0:E.height)>0?E.height:r,O=(0,s.useCallback)(e=>{C(e),"function"===typeof t&&t(e),S(e),k(e),null!=e&&(j.current=e)},[C,t,S,k]),M=(0,s.useCallback)(e=>{N(MA(e)),N(UP({handler:i,reactEvent:e}))},[N,i]),T=(0,s.useCallback)(e=>{N(DA(e)),N(UP({handler:d,reactEvent:e}))},[N,d]),D=(0,s.useCallback)(e=>{N(av()),N(UP({handler:u,reactEvent:e}))},[N,u]),I=(0,s.useCallback)(e=>{N(DA(e)),N(UP({handler:m,reactEvent:e}))},[N,m]),R=(0,s.useCallback)(()=>{N(zP())},[N]),L=(0,s.useCallback)(e=>{N(FP(e.key))},[N]),F=(0,s.useCallback)(e=>{N(UP({handler:l,reactEvent:e}))},[N,l]),z=(0,s.useCallback)(e=>{N(UP({handler:o,reactEvent:e}))},[N,o]),B=(0,s.useCallback)(e=>{N(UP({handler:c,reactEvent:e}))},[N,c]),U=(0,s.useCallback)(e=>{N(UP({handler:h,reactEvent:e}))},[N,h]),H=(0,s.useCallback)(e=>{N(UP({handler:f,reactEvent:e}))},[N,f]),q=(0,s.useCallback)(e=>{y&&N(GP(e)),N(UP({handler:x,reactEvent:e}))},[N,y,x]),V=(0,s.useCallback)(e=>{N(UP({handler:p,reactEvent:e}))},[N,p]),W=function(e){return e?lM:dM}(b);return s.createElement(ZO.Provider,{value:w},s.createElement(eM.Provider,{value:_},s.createElement(W,{width:null!==A&&void 0!==A?A:null===g||void 0===g?void 0:g.width,height:null!==P&&void 0!==P?P:null===g||void 0===g?void 0:g.height,className:ui("recharts-wrapper",n),style:aM({position:"relative",cursor:"default",width:A,height:P},g),onClick:M,onContextMenu:F,onDoubleClick:z,onFocus:R,onKeyDown:L,onMouseDown:B,onMouseEnter:T,onMouseLeave:D,onMouseMove:I,onMouseUp:U,onTouchEnd:V,onTouchMove:q,onTouchStart:H,ref:O},s.createElement(rM,null),a)))}),mM=Cv([yb],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),hM=Cv([mM,cb,db],(e,t,a)=>{if(e&&null!=t&&null!=a)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),pM=()=>Rv(hM),xM=(0,s.createContext)(void 0),fM=e=>{var{children:t}=e,[a]=(0,s.useState)("".concat(Gh("recharts"),"-clip")),n=pM();if(null==n)return null;var{x:r,y:i,width:l,height:o}=n;return s.createElement(xM.Provider,{value:a},s.createElement("defs",null,s.createElement("clipPath",{id:a},s.createElement("rect",{x:r,y:i,height:o,width:l}))),t)},gM=["width","height","responsive","children","className","style","compact","title","desc"];var vM=(0,s.forwardRef)((e,t)=>{var{width:a,height:n,responsive:r,children:i,className:l,style:o,compact:c,title:d,desc:u}=e,m=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,gM),h=kO(m);return c?s.createElement(s.Fragment,null,s.createElement(Lb,{width:a,height:n}),s.createElement(UO,{otherAttributes:h,title:d,desc:u},i)):s.createElement(uM,{className:l,style:o,width:a,height:n,responsive:null!==r&&void 0!==r&&r,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},s.createElement(UO,{otherAttributes:h,title:d,desc:u,ref:t},s.createElement(fM,null,i)))});function bM(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function yM(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jM(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bM(Object(a),!0).forEach(function(t){yM(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bM(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e),s=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==s[t]&&(e[t]=s[t]),e),a)}function NM(){return NM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},NM.apply(null,arguments)}var wM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},SM=(0,s.forwardRef)(function(e,t){var a,n=jM(e.categoricalChartProps,wM),{chartName:r,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:o,categoricalChartProps:c}=e,d={chartName:r,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:o,eventEmitter:void 0};return s.createElement(mO,{preloadedState:{options:d},reduxStoreName:null!==(a=c.id)&&void 0!==a?a:r},s.createElement(hO,{chartData:c.data}),s.createElement(vO,{layout:n.layout,margin:n.margin}),s.createElement(bO,{baseValue:n.baseValue,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),s.createElement(vM,NM({},n,{ref:t})))}),_M=["axis","item"],kM=(0,s.forwardRef)((e,t)=>s.createElement(SM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_M,tooltipPayloadSearcher:Hf,categoricalChartProps:e,ref:t}));function CM(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function EM(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function AM(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?EM(Object(a),!0).forEach(function(t){PM(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):EM(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function PM(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var OM=AM({},{cacheSize:2e3,enableCache:!0}),MM=new class{constructor(e){CM(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;null!=a&&this.cache.delete(a)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(OM.cacheSize),TM={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DM="recharts_measurement_span";var IM=(e,t)=>{try{var a=document.getElementById(DM);a||((a=document.createElement("span")).setAttribute("id",DM),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,TM,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch(n){return{width:0,height:0}}},RM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||eO)return{width:0,height:0};if(!OM.enableCache)return IM(e,t);var a=function(e,t){var a=t.fontSize||"",s=t.fontFamily||"",n=t.fontWeight||"",r=t.fontStyle||"",i=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(l)}(e,t),s=MM.get(a);if(s)return s;var n=IM(e,t);return MM.set(a,n),n};function LM(e,t){if(t<1)return[];if(1===t)return e;for(var a=[],s=0;s<e.length;s+=t){var n=e[s];void 0!==n&&a.push(n)}return a}function FM(e,t,a){return function(e){var{width:t,height:a}=e,s=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=s*Math.PI/180,r=Math.atan(a/t),i=n>r&&n<Math.PI-r?a/Math.sin(n):t/Math.cos(n);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},a)}function zM(e,t,a,s,n){if(e*t<e*s||e*t>e*n)return!1;var r=a();return e*(t-e*r/2-s)>=0&&e*(t+e*r/2-n)<=0}function BM(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function UM(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?BM(Object(a),!0).forEach(function(t){HM(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BM(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function HM(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qM(e,t,a){var s,{tick:n,ticks:r,viewBox:i,minTickGap:l,orientation:o,interval:c,tickFormatter:d,unit:u,angle:m}=e;if(!r||!r.length||!n)return[];if(qh(c)||eO)return null!==(s=function(e,t){return LM(e,t+1)}(r,qh(c)?c:0))&&void 0!==s?s:[];var h=[],p="top"===o||"bottom"===o?"width":"height",x=u&&"width"===p?RM(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},f=(e,s)=>{var n="function"===typeof d?d(e.value,s):e.value;return"width"===p?FM(RM(n,{fontSize:t,letterSpacing:a}),x,m):RM(n,{fontSize:t,letterSpacing:a})[p]},g=r[0],v=r[1],b=r.length>=2&&null!=g&&null!=v?Bh(v.coordinate-g.coordinate):1,y=function(e,t,a){var s="width"===a,{x:n,y:r,width:i,height:l}=e;return 1===t?{start:s?n:r,end:s?n+i:r+l}:{start:s?n+i:r+l,end:s?n:r}}(i,b,p);return"equidistantPreserveStart"===c?function(e,t,a,s,n){for(var r,i=(s||[]).slice(),{start:l,end:o}=t,c=0,d=1,u=l,m=function(){var t=null===s||void 0===s?void 0:s[c];if(void 0===t)return{v:LM(s,d)};var r,i=c,m=()=>(void 0===r&&(r=a(t,i)),r),h=t.coordinate,p=0===c||zM(e,h,m,u,o);p||(c=0,u=l,d+=1),p&&(u=h+e*(m()/2+n),c+=d)};d<=i.length;)if(r=m())return r.v;return[]}(b,y,f,r,l):"equidistantPreserveEnd"===c?function(e,t,a,s,n){var r=(s||[]).slice().length;if(0===r)return[];for(var{start:i,end:l}=t,o=1;o<=r;o++){for(var c,d=(r-1)%o,u=i,m=!0,h=function(){var t=s[p];if(null==t)return 0;var r,i=p,o=()=>(void 0===r&&(r=a(t,i)),r),c=t.coordinate,h=p===d||zM(e,c,o,u,l);if(!h)return m=!1,1;h&&(u=c+e*(o()/2+n))},p=d;p<r&&(0===(c=h())||1!==c);p+=o);if(m){for(var x=[],f=d;f<r;f+=o){var g=s[f];null!=g&&x.push(g)}return x}}return[]}(b,y,f,r,l):(h="preserveStart"===c||"preserveStartEnd"===c?function(e,t,a,s,n,r){var i=(s||[]).slice(),l=i.length,{start:o,end:c}=t;if(r){var d=s[l-1];if(null!=d){var u=a(d,l-1),m=e*(d.coordinate+e*u/2-c);i[l-1]=d=UM(UM({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate}),null!=d.tickCoord&&zM(e,d.tickCoord,()=>u,o,c)&&(c=d.tickCoord-e*(u/2+n),i[l-1]=UM(UM({},d),{},{isShow:!0}))}}for(var h=r?l-1:l,p=function(t){var s=i[t];if(null==s)return 1;var r,l=s,d=()=>(void 0===r&&(r=a(s,t)),r);if(0===t){var u=e*(l.coordinate-e*d()/2-o);i[t]=l=UM(UM({},l),{},{tickCoord:u<0?l.coordinate-u*e:l.coordinate})}else i[t]=l=UM(UM({},l),{},{tickCoord:l.coordinate});null!=l.tickCoord&&zM(e,l.tickCoord,d,o,c)&&(o=l.tickCoord+e*(d()/2+n),i[t]=UM(UM({},l),{},{isShow:!0}))},x=0;x<h;x++)p(x);return i}(b,y,f,r,l,"preserveStartEnd"===c):function(e,t,a,s,n){for(var r=(s||[]).slice(),i=r.length,{start:l}=t,{end:o}=t,c=function(t){var s=r[t];if(null==s)return 1;var c,d=s,u=()=>(void 0===c&&(c=a(s,t)),c);if(t===i-1){var m=e*(d.coordinate+e*u()/2-o);r[t]=d=UM(UM({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate})}else r[t]=d=UM(UM({},d),{},{tickCoord:d.coordinate});null!=d.tickCoord&&zM(e,d.tickCoord,u,l,o)&&(o=d.tickCoord-e*(u()/2+n),r[t]=UM(UM({},d),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return r}(b,y,f,r,l),h.filter(e=>e.isShow))}var VM=["children","className"];function WM(){return WM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},WM.apply(null,arguments)}var GM=s.forwardRef((e,t)=>{var{children:a,className:n}=e,r=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,VM),i=ui("recharts-layer",n);return s.createElement("g",WM({className:i},EO(r),{ref:t}),a)});var KM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JM=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$M=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,QM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},XM=["cm","mm","pt","pc","in","Q","px"];var ZM="NaN";class eT{static parse(e){var t,[,a,s]=null!==(t=$M.exec(e))&&void 0!==t?t:[];return null==a?eT.NaN:new eT(parseFloat(a),null!==s&&void 0!==s?s:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Uh(e)&&(this.unit=""),""===t||JM.test(t)||(this.num=NaN,this.unit=""),function(e){return XM.includes(e)}(t)&&(this.num=function(e,t){return e*QM[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new eT(NaN,""):new eT(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new eT(NaN,""):new eT(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new eT(NaN,""):new eT(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new eT(NaN,""):new eT(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Uh(this.num)}}function tT(e){if(null==e||e.includes(ZM))return ZM;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,n,r]=null!==(a=KM.exec(t))&&void 0!==a?a:[],i=eT.parse(null!==s&&void 0!==s?s:""),l=eT.parse(null!==r&&void 0!==r?r:""),o="*"===n?i.multiply(l):i.divide(l);if(o.isNaN())return ZM;t=t.replace(KM,o.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,m]=null!==(c=YM.exec(t))&&void 0!==c?c:[],h=eT.parse(null!==d&&void 0!==d?d:""),p=eT.parse(null!==m&&void 0!==m?m:""),x="+"===u?h.add(p):h.subtract(p);if(x.isNaN())return ZM;t=t.replace(YM,x.toString())}return t}!function(e,t,a){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(eT,"NaN",new eT(NaN,""));var aT=/\(([^()]*)\)/;function sT(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,a=e;null!=(t=aT.exec(a));){var[,s]=t;a=a.replace(aT,tT(s))}return a}(t),t=tT(t)}function nT(e){var t=function(e){try{return sT(e)}catch(t){return ZM}}(e.slice(5,-1));return t===ZM?"":t}var rT=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],iT=["dx","dy","angle","className","breakAll"];function lT(){return lT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lT.apply(null,arguments)}function oT(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var cT=/[ \f\n\r\t\v\u2028\u2029]+/,dT=e=>{var{children:t,breakAll:a,style:s}=e;try{var n=[];return $h(t)||(n=a?t.toString().split(""):t.toString().split(cT)),{wordsWithComputedWidth:n.map(e=>({word:e,width:RM(e,s).width})),spaceWidth:a?0:RM("\xa0",s).width}}catch(r){return null}};function uT(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var mT=(e,t,a,s)=>e.reduce((e,n)=>{var{word:r,width:i}=n,l=e[e.length-1];if(l&&null!=i&&(null==t||s||l.width+i+a<Number(t)))l.words.push(r),l.width+=i+a;else{var o={words:[r],width:i};e.push(o)}return e},[]),hT=e=>e.reduce((e,t)=>e.width>t.width?e:t),pT=(e,t,a,s,n,r,i,l)=>{var o=e.slice(0,t),c=dT({breakAll:a,style:s,children:o+"\u2026"});if(!c)return[!1,[]];var d=mT(c.wordsWithComputedWidth,r,i,l);return[d.length>n||hT(d).width>Number(r),d]},xT=e=>[{words:$h(e)?[]:e.toString().split(cT),width:void 0}],fT=e=>{var{width:t,scaleToFit:a,children:s,style:n,breakAll:r,maxLines:i}=e;if((t||a)&&!eO){var l=dT({breakAll:r,children:s,style:n});if(!l)return xT(s);var{wordsWithComputedWidth:o,spaceWidth:c}=l;return((e,t,a,s,n)=>{var{maxLines:r,children:i,style:l,breakAll:o}=e,c=qh(r),d=String(i),u=mT(t,s,a,n);if(!c||n)return u;if(!(u.length>r||hT(u).width>Number(s)))return u;for(var m,h=0,p=d.length-1,x=0;h<=p&&x<=d.length-1;){var f=Math.floor((h+p)/2),g=f-1,[v,b]=pT(d,g,o,l,r,s,a,n),[y]=pT(d,f,o,l,r,s,a,n);if(v||y||(h=f+1),v&&y&&(p=f-1),!v&&y){m=b;break}x++}return m||u})({breakAll:r,children:s,maxLines:i,style:n},o,c,t,Boolean(a))}return xT(s)},gT="#808080",vT={angle:0,breakAll:!1,capHeight:"0.71em",fill:gT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},bT=(0,s.forwardRef)((e,t)=>{var a=jM(e,vT),{x:n,y:r,lineHeight:i,capHeight:l,fill:o,scaleToFit:c,textAnchor:d,verticalAnchor:u}=a,m=oT(a,rT),h=(0,s.useMemo)(()=>fT({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:c,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,c,m.style,m.width]),{dx:p,dy:x,angle:f,className:g,breakAll:v}=m,b=oT(m,iT);if(!Vh(n)||!Vh(r)||0===h.length)return null;var y,j=Number(n)+(qh(p)?p:0),N=Number(r)+(qh(x)?x:0);if(!op(j)||!op(N))return null;switch(u){case"start":y=nT("calc(".concat(l,")"));break;case"middle":y=nT("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:y=nT("calc(".concat(h.length-1," * -").concat(i,")"))}var w=[],S=h[0];if(c&&null!=S){var _=S.width,{width:k}=m;w.push("scale(".concat(qh(k)&&qh(_)?k/_:1,")"))}return f&&w.push("rotate(".concat(f,", ").concat(j,", ").concat(N,")")),w.length&&(b.transform=w.join(" ")),s.createElement("text",lT({},EO(b),{ref:t,x:j,y:N,className:ui("recharts-text",g),textAnchor:d,fill:o.includes("url")?gT:o}),h.map((e,t)=>{var a=e.words.join(v?"":" ");return s.createElement("tspan",{x:j,dy:0===t?y:i,key:"".concat(a,"-").concat(t)},a)}))});function yT(e){var{zIndex:t,children:a}=e,n=void 0!==Db()&&void 0!==t&&0!==t,r=Sb(),i=Mv();(0,s.useLayoutEffect)(()=>n?(i(lO({zIndex:t})),()=>{i(oO({zIndex:t}))}):Zh,[i,t,n]);var l=Rv(e=>MO(e,t,r));return n?l?(0,Ft.createPortal)(a,l):null:a}function jT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function NT(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jT(Object(a),!0).forEach(function(t){wT(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jT(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function wT(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}bT.displayName="Text";var ST=["labelRef"],_T=["content"];function kT(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function CT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function ET(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?CT(Object(a),!0).forEach(function(t){AT(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CT(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function AT(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function PT(){return PT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},PT.apply(null,arguments)}var OT=(0,s.createContext)(null),MT=e=>{var{x:t,y:a,upperWidth:n,lowerWidth:r,width:i,height:l,children:o}=e,c=(0,s.useMemo)(()=>({x:t,y:a,upperWidth:n,lowerWidth:r,width:i,height:l}),[t,a,n,r,i,l]);return s.createElement(OT.Provider,{value:c},o)},TT=()=>{var e=(0,s.useContext)(OT),t=Eb();return e||(t?Cb(t):void 0)},DT=(0,s.createContext)(null),IT=()=>{var e=(0,s.useContext)(DT),t=Rv(H_);return e||t},RT=e=>null!=e&&"function"===typeof e,LT=(e,t,a,n,r)=>{var i,l,{offset:o,className:c}=e,{cx:d,cy:u,innerRadius:m,outerRadius:h,startAngle:p,endAngle:x,clockWise:f}=r,g=(m+h)/2,v=((e,t)=>Bh(t-e)*Math.min(Math.abs(t-e),360))(p,x),b=v>=0?1:-1;switch(t){case"insideStart":i=p+b*o,l=f;break;case"insideEnd":i=x-b*o,l=!f;break;case"end":i=x+b*o,l=f;break;default:throw new Error("Unsupported position ".concat(t))}l=v<=0?l:!l;var y=j_(d,u,g,i),j=j_(d,u,g,i+359*(l?1:-1)),N="M".concat(y.x,",").concat(y.y,"\n    A").concat(g,",").concat(g,",0,1,").concat(l?0:1,",\n    ").concat(j.x,",").concat(j.y),w=$h(e.id)?Gh("recharts-radial-line-"):e.id;return s.createElement("text",PT({},n,{dominantBaseline:"central",className:ui("recharts-radial-bar-label",c)}),s.createElement("defs",null,s.createElement("path",{id:w,d:N})),s.createElement("textPath",{xlinkHref:"#".concat(w)},a))},FT=e=>null!=e&&"cx"in e&&qh(e.cx),zT={angle:0,offset:5,zIndex:k_.label,position:"middle",textBreakAll:!1};function BT(e){var t,a,n,r=jM(e,zT),{viewBox:i,parentViewBox:l,position:o,value:c,children:d,content:u,className:m="",textBreakAll:h,labelRef:p}=r,x=IT(),f=TT(),g=function(e){if(!FT(e))return e;var{cx:t,cy:a,outerRadius:s}=e,n=2*s;return{x:t-s,y:a-s,width:n,upperWidth:n,lowerWidth:n,height:n}}(t=null==i?"center"===o?f:null!==x&&void 0!==x?x:f:FT(i)?i:Cb(i));if(!t||$h(c)&&$h(d)&&!(0,s.isValidElement)(u)&&"function"!==typeof u)return null;var v=ET(ET({},r),{},{viewBox:t});if((0,s.isValidElement)(u)){var{labelRef:b}=v,y=kT(v,ST);return(0,s.cloneElement)(u,y)}if("function"===typeof u){var{content:j}=v,N=kT(v,_T);if(a=(0,s.createElement)(u,N),(0,s.isValidElement)(a))return a}else a=(e=>{var{value:t,formatter:a}=e,s=$h(e.children)?t:e.children;return"function"===typeof a?a(s):s})(r);var w=EO(r);if(FT(t)){if("insideStart"===o||"insideEnd"===o||"end"===o)return LT(r,o,a,w,t);n=((e,t,a)=>{var{cx:s,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:o}=e,c=(l+o)/2;if("outside"===a){var{x:d,y:u}=j_(s,n,i+t,c);return{x:d,y:u,textAnchor:d>=s?"start":"end",verticalAnchor:"middle"}}if("center"===a)return{x:s,y:n,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===a)return{x:s,y:n,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===a)return{x:s,y:n,textAnchor:"middle",verticalAnchor:"end"};var m=(r+i)/2,{x:h,y:p}=j_(s,n,m,c);return{x:h,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(t,r.offset,r.position)}else{if(!g)return null;var S=(e=>{var{viewBox:t,position:a,offset:s=0,parentViewBox:n,clamp:r}=e,{x:i,y:l,height:o,upperWidth:c,lowerWidth:d}=Cb(t),u=i,m=i+(c-d)/2,h=(u+m)/2,p=(c+d)/2,x=u+c/2,f=o>=0?1:-1,g=f*s,v=f>0?"end":"start",b=f>0?"start":"end",y=c>=0?1:-1,j=y*s,N=y>0?"end":"start",w=y>0?"start":"end",S=n;if("top"===a){var _={x:u+c/2,y:l-g,horizontalAnchor:"middle",verticalAnchor:v};return r&&S&&(_.height=Math.max(l-S.y,0),_.width=c),_}if("bottom"===a){var k={x:m+d/2,y:l+o+g,horizontalAnchor:"middle",verticalAnchor:b};return r&&S&&(k.height=Math.max(S.y+S.height-(l+o),0),k.width=d),k}if("left"===a){var C={x:h-j,y:l+o/2,horizontalAnchor:N,verticalAnchor:"middle"};return r&&S&&(C.width=Math.max(C.x-S.x,0),C.height=o),C}if("right"===a){var E={x:h+p+j,y:l+o/2,horizontalAnchor:w,verticalAnchor:"middle"};return r&&S&&(E.width=Math.max(S.x+S.width-E.x,0),E.height=o),E}var A=r&&S?{width:p,height:o}:{};return"insideLeft"===a?NT({x:h+j,y:l+o/2,horizontalAnchor:w,verticalAnchor:"middle"},A):"insideRight"===a?NT({x:h+p-j,y:l+o/2,horizontalAnchor:N,verticalAnchor:"middle"},A):"insideTop"===a?NT({x:u+c/2,y:l+g,horizontalAnchor:"middle",verticalAnchor:b},A):"insideBottom"===a?NT({x:m+d/2,y:l+o-g,horizontalAnchor:"middle",verticalAnchor:v},A):"insideTopLeft"===a?NT({x:u+j,y:l+g,horizontalAnchor:w,verticalAnchor:b},A):"insideTopRight"===a?NT({x:u+c-j,y:l+g,horizontalAnchor:N,verticalAnchor:b},A):"insideBottomLeft"===a?NT({x:m+j,y:l+o-g,horizontalAnchor:w,verticalAnchor:v},A):"insideBottomRight"===a?NT({x:m+d-j,y:l+o-g,horizontalAnchor:N,verticalAnchor:v},A):a&&"object"===typeof a&&(qh(a.x)||Hh(a.x))&&(qh(a.y)||Hh(a.y))?NT({x:i+Kh(a.x,p),y:l+Kh(a.y,o),horizontalAnchor:"end",verticalAnchor:"end"},A):NT({x:x,y:l+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},A)})({viewBox:g,position:o,offset:r.offset,parentViewBox:FT(l)?void 0:l,clamp:!0});n=ET(ET({x:S.x,y:S.y,textAnchor:S.horizontalAnchor,verticalAnchor:S.verticalAnchor},void 0!==S.width?{width:S.width}:{}),void 0!==S.height?{height:S.height}:{})}return s.createElement(yT,{zIndex:r.zIndex},s.createElement(bT,PT({ref:p,className:ui("recharts-label",m)},w,n,{textAnchor:uT(w.textAnchor)?w.textAnchor:n.textAnchor,breakAll:h}),a))}BT.displayName="Label";var UT=(e,t,a)=>{if(!e)return null;var n={viewBox:t,labelRef:a};return!0===e?s.createElement(BT,PT({key:"label-implicit"},n)):Vh(e)?s.createElement(BT,PT({key:"label-implicit",value:e},n)):(0,s.isValidElement)(e)?e.type===BT?(0,s.cloneElement)(e,ET({key:"label-implicit"},n)):s.createElement(BT,PT({key:"label-implicit",content:e},n)):RT(e)?s.createElement(BT,PT({key:"label-implicit",content:e},n)):e&&"object"===typeof e?s.createElement(BT,PT({},e,{key:"label-implicit"},n)):null};function HT(e){var{label:t,labelRef:a}=e,s=TT();return UT(t,s,a)||null}var qT=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,VT=(e,t,a)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var s=null;return Object.keys(e).forEach(n=>{var r=e[n];NO(n)&&"function"===typeof r&&(s||(s={}),s[n]=((e,t,a)=>s=>(e(t,a,s),null))(r,t,a))}),s};function WT(e){return e&&"object"===typeof e&&"className"in e&&"string"===typeof e.className?e.className:""}var GT=["axisLine","width","height","className","hide","ticks","axisType"];function KT(){return KT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},KT.apply(null,arguments)}function YT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function JT(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?YT(Object(a),!0).forEach(function(t){$T(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):YT(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function $T(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var QT={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:k_.axis};function XT(e){var{x:t,y:a,width:n,height:r,orientation:i,mirror:l,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var d=JT(JT(JT({},c),kO(o)),{},{fill:"none"});if("top"===i||"bottom"===i){var u=+("top"===i&&!l||"bottom"===i&&l);d=JT(JT({},d),{},{x1:t,y1:a+u*r,x2:t+n,y2:a+u*r})}else{var m=+("left"===i&&!l||"right"===i&&l);d=JT(JT({},d),{},{x1:t+m*n,y1:a,x2:t+m*n,y2:a+r})}return s.createElement("line",KT({},d,{className:ui("recharts-cartesian-axis-line",Lh()(o,"className"))}))}function ZT(e){var t,{option:a,tickProps:n,value:r}=e,i=ui(n.className,"recharts-cartesian-axis-tick-value");if(s.isValidElement(a))t=s.cloneElement(a,JT(JT({},n),{},{className:i}));else if("function"===typeof a)t=a(JT(JT({},n),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";"boolean"!==typeof a&&(l=ui(l,WT(a))),t=s.createElement(bT,KT({},n,{className:l}),r)}return t}var eD=(0,s.forwardRef)((e,t)=>{var{ticks:a=[],tick:n,tickLine:r,stroke:i,tickFormatter:l,unit:o,padding:c,tickTextProps:d,orientation:u,mirror:m,x:h,y:p,width:x,height:f,tickSize:g,tickMargin:v,fontSize:b,letterSpacing:y,getTicksConfig:j,events:N,axisType:w}=e,S=qM(JT(JT({},j),{},{ticks:a}),b,y),_=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(u,m),k=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(u,m),C=kO(j),E=CO(n),A={};"object"===typeof r&&(A=r);var P=JT(JT({},C),{},{fill:"none"},A),O=S.map(e=>JT({entry:e},function(e,t,a,s,n,r,i,l,o){var c,d,u,m,h,p,x=l?-1:1,f=e.tickSize||i,g=qh(e.tickCoord)?e.tickCoord:e.coordinate;switch(r){case"top":c=d=e.coordinate,p=(u=(m=a+ +!l*n)-x*f)-x*o,h=g;break;case"left":u=m=e.coordinate,h=(c=(d=t+ +!l*s)-x*f)-x*o,p=g;break;case"right":u=m=e.coordinate,h=(c=(d=t+ +l*s)+x*f)+x*o,p=g;break;default:c=d=e.coordinate,p=(u=(m=a+ +l*n)+x*f)+x*o,h=g}return{line:{x1:c,y1:u,x2:d,y2:m},tick:{x:h,y:p}}}(e,h,p,x,f,u,g,m,v))),M=O.map(e=>{var{entry:t,line:a}=e;return s.createElement(GM,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},r&&s.createElement("line",KT({},P,a,{className:ui("recharts-cartesian-axis-tick-line",Lh()(r,"className"))})))}),T=O.map((e,t)=>{var a,r,{entry:u,tick:m}=e,h=JT(JT(JT(JT({verticalAnchor:k},C),{},{textAnchor:_,stroke:"none",fill:i},m),{},{index:t,payload:u,visibleTicksCount:S.length,tickFormatter:l,padding:c},d),{},{angle:null!==(a=null!==(r=null===d||void 0===d?void 0:d.angle)&&void 0!==r?r:C.angle)&&void 0!==a?a:0}),p=JT(JT({},h),E);return s.createElement(GM,KT({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(u.value,"-").concat(u.coordinate,"-").concat(u.tickCoord)},VT(N,u,t)),n&&s.createElement(ZT,{option:n,tickProps:p,value:"".concat("function"===typeof l?l(u.value,t):u.value).concat(o||"")}))});return s.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(w,"-ticks")},T.length>0&&s.createElement(yT,{zIndex:k_.label},s.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(w,"-tick-labels"),ref:t},T)),M.length>0&&s.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(w,"-tick-lines")},M))}),tD=(0,s.forwardRef)((e,t)=>{var{axisLine:a,width:n,height:r,className:i,hide:l,ticks:o,axisType:c}=e,d=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,GT),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),x=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:n=0,tickMargin:r=0}=e,i=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>i&&(i=t.width)}});var l=a?a.getBoundingClientRect().width:0,o=i+(n+r)+l+(a?s:0);return Math.round(o)}return 0})({ticks:x.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var f=(0,s.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=t;var a=t[0];if(a){var s=window.getComputedStyle(a),n=s.fontSize,r=s.letterSpacing;n===u&&r===h||(m(n),p(r))}}},[u,h]);return l||null!=n&&n<=0||null!=r&&r<=0?null:s.createElement(yT,{zIndex:e.zIndex},s.createElement(GM,{className:ui("recharts-cartesian-axis",i)},s.createElement(XT,{x:e.x,y:e.y,width:n,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:kO(e)}),s.createElement(eD,{ref:f,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),s.createElement(MT,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},s.createElement(HT,{label:e.label,labelRef:e.labelRef}),e.children)))}),aD=s.forwardRef((e,t)=>{var a=jM(e,QT);return s.createElement(tD,KT({},a,{ref:t}))});aD.displayName="CartesianAxis";var sD=["x1","y1","x2","y2","key"],nD=["offset"],rD=["xAxisId","yAxisId"],iD=["xAxisId","yAxisId"];function lD(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function oD(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lD(Object(a),!0).forEach(function(t){cD(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lD(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function cD(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dD(){return dD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dD.apply(null,arguments)}function uD(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var mD=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:a,x:n,y:r,width:i,height:l,ry:o}=e;return s.createElement("rect",{x:n,y:r,ry:o,width:i,height:l,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function hD(e){var t,{option:a,lineItemProps:n}=e;if(s.isValidElement(a))t=s.cloneElement(a,n);else if("function"===typeof a)t=a(n);else{var r,{x1:i,y1:l,x2:o,y2:c,key:d}=n,u=null!==(r=kO(uD(n,sD)))&&void 0!==r?r:{},{offset:m}=u,h=uD(u,nD);t=s.createElement("line",dD({},h,{x1:i,y1:l,x2:o,y2:c,fill:"none",key:d}))}return t}function pD(e){var{x:t,width:a,horizontal:n=!0,horizontalPoints:r}=e;if(!n||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=uD(e,rD),c=r.map((e,r)=>{var i=oD(oD({},o),{},{x1:t,y1:e,x2:t+a,y2:e,key:"line-".concat(r),index:r});return s.createElement(hD,{key:"line-".concat(r),option:n,lineItemProps:i})});return s.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function xD(e){var{y:t,height:a,vertical:n=!0,verticalPoints:r}=e;if(!n||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=uD(e,iD),c=r.map((e,r)=>{var i=oD(oD({},o),{},{x1:e,y1:t,x2:e,y2:t+a,key:"line-".concat(r),index:r});return s.createElement(hD,{option:n,lineItemProps:i,key:"line-".concat(r)})});return s.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function fD(e){var{horizontalFill:t,fillOpacity:a,x:n,y:r,width:i,height:l,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||null==o)return null;var d=o.map(e=>Math.round(e+r-r)).sort((e,t)=>e-t);r!==d[0]&&d.unshift(0);var u=d.map((e,o)=>{var c=d[o+1],u=null==c?r+l-e:c-e;if(u<=0)return null;var m=o%t.length;return s.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:u,width:i,stroke:"none",fill:t[m],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return s.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function gD(e){var{vertical:t=!0,verticalFill:a,fillOpacity:n,x:r,y:i,width:l,height:o,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var d=c.map(e=>Math.round(e+r-r)).sort((e,t)=>e-t);r!==d[0]&&d.unshift(0);var u=d.map((e,t)=>{var c=d[t+1],u=null==c?r+l-e:c-e;if(u<=0)return null;var m=t%a.length;return s.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:u,height:o,stroke:"none",fill:a[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return s.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var vD=(e,t)=>{var{xAxis:a,width:s,height:n,offset:r}=e;return Xv(qM(oD(oD(oD({},QT),a),{},{ticks:Zv(a,!0),viewBox:{x:0,y:0,width:s,height:n}})),r.left,r.left+r.width,t)},bD=(e,t)=>{var{yAxis:a,width:s,height:n,offset:r}=e;return Xv(qM(oD(oD(oD({},QT),a),{},{ticks:Zv(a,!0),viewBox:{x:0,y:0,width:s,height:n}})),r.top,r.top+r.height,t)},yD={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:k_.grid};function jD(e){var t=Ob(),a=Mb(),n=Pb(),r=oD(oD({},jM(e,yD)),{},{x:qh(e.x)?e.x:n.left,y:qh(e.y)?e.y:n.top,width:qh(e.width)?e.width:n.width,height:qh(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:l,x:o,y:c,width:d,height:u,syncWithTicks:m,horizontalValues:h,verticalValues:p}=r,x=Sb(),f=Rv(e=>JC(e,"xAxis",i,x)),g=Rv(e=>JC(e,"yAxis",l,x));if(!cp(d)||!cp(u)||!qh(o)||!qh(c))return null;var v=r.verticalCoordinatesGenerator||vD,b=r.horizontalCoordinatesGenerator||bD,{horizontalPoints:y,verticalPoints:j}=r;if((!y||!y.length)&&"function"===typeof b){var N=h&&h.length,w=b({yAxis:g?oD(oD({},g),{},{ticks:N?h:g.ticks}):void 0,width:null!==t&&void 0!==t?t:d,height:null!==a&&void 0!==a?a:u,offset:n},!!N||m);ep(Array.isArray(w),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof w,"]")),Array.isArray(w)&&(y=w)}if((!j||!j.length)&&"function"===typeof v){var S=p&&p.length,_=v({xAxis:f?oD(oD({},f),{},{ticks:S?p:f.ticks}):void 0,width:null!==t&&void 0!==t?t:d,height:null!==a&&void 0!==a?a:u,offset:n},!!S||m);ep(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(j=_)}return s.createElement(yT,{zIndex:r.zIndex},s.createElement("g",{className:"recharts-cartesian-grid"},s.createElement(mD,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),s.createElement(fD,dD({},r,{horizontalPoints:y})),s.createElement(gD,dD({},r,{verticalPoints:j})),s.createElement(pD,dD({},r,{offset:n,horizontalPoints:y,xAxis:f,yAxis:g})),s.createElement(xD,dD({},r,{offset:n,verticalPoints:j,xAxis:f,yAxis:g}))))}jD.displayName="CartesianGrid";var ND=["domain","range"],wD=["domain","range"];function SD(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _D(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function kD(e,t){if(e===t)return!0;var{domain:a,range:s}=e,n=SD(e,ND),{domain:r,range:i}=t,l=SD(t,wD);return!!_D(a,r)&&(!!_D(s,i)&&fO(n,l))}var CD=["type"],ED=["dangerouslySetInnerHTML","ticks","scale"],AD=["id","scale"];function PD(){return PD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},PD.apply(null,arguments)}function OD(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function MD(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?OD(Object(a),!0).forEach(function(t){TD(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OD(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function TD(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DD(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function ID(e){var t=Mv(),a=(0,s.useRef)(null),n=Ib(),{type:r}=e,i=DD(e,CD),l=E_(n,"xAxis",r),o=(0,s.useMemo)(()=>{if(null!=l)return MD(MD({},i),{},{type:l})},[i,l]);return(0,s.useLayoutEffect)(()=>{null!=o&&(null===a.current?t(HA(o)):a.current!==o&&t(qA({prev:a.current,next:o})),a.current=o)},[o,t]),(0,s.useLayoutEffect)(()=>()=>{a.current&&(t(VA(a.current)),a.current=null)},[t]),null}var RD=e=>{var{xAxisId:t,className:a}=e,n=Rv(Nb),r=Sb(),i="xAxis",l=Rv(e=>$C(e,i,t,r)),o=Rv(e=>FC(e,t)),c=Rv(e=>UC(e,t)),d=Rv(e=>ik(e,t));if(null==o||null==c||null==d)return null;var{dangerouslySetInnerHTML:u,ticks:m,scale:h}=e,p=DD(e,ED),{id:x,scale:f}=d,g=DD(d,AD);return s.createElement(aD,PD({},p,g,{x:c.x,y:c.y,width:o.width,height:o.height,className:ui("recharts-".concat(i," ").concat(i),a),viewBox:n,ticks:l,axisType:i}))},LD={allowDataOverflow:rk.allowDataOverflow,allowDecimals:rk.allowDecimals,allowDuplicatedCategory:rk.allowDuplicatedCategory,angle:rk.angle,axisLine:QT.axisLine,height:rk.height,hide:!1,includeHidden:rk.includeHidden,interval:rk.interval,label:!1,minTickGap:rk.minTickGap,mirror:rk.mirror,orientation:rk.orientation,padding:rk.padding,reversed:rk.reversed,scale:rk.scale,tick:rk.tick,tickCount:rk.tickCount,tickLine:QT.tickLine,tickSize:QT.tickSize,type:rk.type,xAxisId:0},FD=e=>{var t=jM(e,LD);return s.createElement(s.Fragment,null,s.createElement(ID,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),s.createElement(RD,t))},zD=s.memo(FD,kD);zD.displayName="XAxis";var BD=["type"],UD=["dangerouslySetInnerHTML","ticks","scale"],HD=["id","scale"];function qD(){return qD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},qD.apply(null,arguments)}function VD(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function WD(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?VD(Object(a),!0).forEach(function(t){GD(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):VD(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function GD(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function KD(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function YD(e){var t=Mv(),a=(0,s.useRef)(null),n=Ib(),{type:r}=e,i=KD(e,BD),l=E_(n,"yAxis",r),o=(0,s.useMemo)(()=>{if(null!=l)return WD(WD({},i),{},{type:l})},[l,i]);return(0,s.useLayoutEffect)(()=>{null!=o&&(null===a.current?t(WA(o)):a.current!==o&&t(GA({prev:a.current,next:o})),a.current=o)},[o,t]),(0,s.useLayoutEffect)(()=>()=>{a.current&&(t(KA(a.current)),a.current=null)},[t]),null}function JD(e){var{yAxisId:t,className:a,width:n,label:r}=e,i=(0,s.useRef)(null),l=(0,s.useRef)(null),o=Rv(Nb),c=Sb(),d=Mv(),u="yAxis",m=Rv(e=>qC(e,t)),h=Rv(e=>HC(e,t)),p=Rv(e=>$C(e,u,t,c)),x=Rv(e=>ck(e,t));if((0,s.useLayoutEffect)(()=>{if("auto"===n&&m&&!RT(r)&&!(0,s.isValidElement)(r)&&null!=x){var e=i.current;if(e){var a=e.getCalculatedWidth();Math.round(m.width)!==Math.round(a)&&d(QA({id:t,width:a}))}}},[p,m,d,r,t,n,x]),null==m||null==h||null==x)return null;var{dangerouslySetInnerHTML:f,ticks:g,scale:v}=e,b=KD(e,UD),{id:y,scale:j}=x,N=KD(x,HD);return s.createElement(aD,qD({},b,N,{ref:i,labelRef:l,x:h.x,y:h.y,tickTextProps:"auto"===n?{width:void 0}:{width:n},width:m.width,height:m.height,className:ui("recharts-".concat(u," ").concat(u),a),viewBox:o,ticks:p,axisType:u}))}var $D={allowDataOverflow:ok.allowDataOverflow,allowDecimals:ok.allowDecimals,allowDuplicatedCategory:ok.allowDuplicatedCategory,angle:ok.angle,axisLine:QT.axisLine,hide:!1,includeHidden:ok.includeHidden,interval:ok.interval,label:!1,minTickGap:ok.minTickGap,mirror:ok.mirror,orientation:ok.orientation,padding:ok.padding,reversed:ok.reversed,scale:ok.scale,tick:ok.tick,tickCount:ok.tickCount,tickLine:QT.tickLine,tickSize:QT.tickSize,type:ok.type,width:ok.width,yAxisId:0},QD=e=>{var t=jM(e,$D);return s.createElement(s.Fragment,null,s.createElement(YD,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),s.createElement(JD,t))},XD=s.memo(QD,kD);function ZD(){return ZD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ZD.apply(null,arguments)}function eI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function tI(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(a),!0).forEach(function(t){aI(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eI(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function aI(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function sI(e){return Array.isArray(e)&&Vh(e[0])&&Vh(e[1])?e.join(" ~ "):e}XD.displayName="YAxis";var nI={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},rI=e=>{var{separator:t=nI.separator,contentStyle:a,itemStyle:n,labelStyle:r=nI.labelStyle,payload:i,formatter:l,itemSorter:o,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:m,accessibilityLayer:h=nI.accessibilityLayer}=e,p=tI(tI({},nI.contentStyle),a),x=tI({margin:0},r),f=!$h(u),g=f?u:"",v=ui("recharts-default-tooltip",c),b=ui("recharts-tooltip-label",d);f&&m&&void 0!==i&&null!==i&&(g=m(u,i));var y=h?{role:"status","aria-live":"assertive"}:{};return s.createElement("div",ZD({className:v,style:p},y),s.createElement("p",{className:b,style:x},s.isValidElement(g)?g:"".concat(g)),(()=>{if(i&&i.length){var e=(o?Fv()(i,o):i).map((e,a)=>{if("none"===e.type)return null;var r=e.formatter||l||sI,{value:o,name:c}=e,d=o,u=c;if(r){var m=r(o,c,e,a,i);if(Array.isArray(m))[d,u]=m;else{if(null==m)return null;d=m}}var h=tI(tI({},nI.itemStyle),{},{color:e.color||nI.itemStyle.color},n);return s.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(a),style:h},Vh(u)?s.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Vh(u)?s.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,s.createElement("span",{className:"recharts-tooltip-item-value"},d),s.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return s.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},iI="recharts-tooltip-wrapper",lI={visibility:"hidden"};function oI(e){var{coordinate:t,translateX:a,translateY:s}=e;return ui(iI,{["".concat(iI,"-right")]:qh(a)&&t&&qh(t.x)&&a>=t.x,["".concat(iI,"-left")]:qh(a)&&t&&qh(t.x)&&a<t.x,["".concat(iI,"-bottom")]:qh(s)&&t&&qh(t.y)&&s>=t.y,["".concat(iI,"-top")]:qh(s)&&t&&qh(t.y)&&s<t.y})}function cI(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offset:n,position:r,reverseDirection:i,tooltipDimension:l,viewBox:o,viewBoxDimension:c}=e;if(r&&qh(r[s]))return r[s];var d=a[s]-l-(n>0?n:0),u=a[s]+n;if(t[s])return i[s]?d:u;var m=o[s];return null==m?0:i[s]?d<m?Math.max(u,m):Math.max(d,m):null==c?0:u+l>m+c?Math.max(d,m):Math.max(u,m)}function dI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function uI(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dI(Object(a),!0).forEach(function(t){mI(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dI(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function mI(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class hI extends s.PureComponent{constructor(){super(...arguments),mI(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),mI(this,"handleKeyDown",e=>{var t,a,s,n;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(a=this.props.coordinate)||void 0===a?void 0:a.x)&&void 0!==t?t:0,y:null!==(s=null===(n=this.props.coordinate)||void 0===n?void 0:n.y)&&void 0!==s?s:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:a,animationEasing:n,children:r,coordinate:i,hasPayload:l,isAnimationActive:o,offset:c,position:d,reverseDirection:u,useTranslate3d:m,viewBox:h,wrapperStyle:p,lastBoundingBox:x,innerRef:f,hasPortalFromProps:g}=this.props,v="number"===typeof c?c:c.x,b="number"===typeof c?c:c.y,{cssClasses:y,cssProperties:j}=function(e){var t,a,s,{allowEscapeViewBox:n,coordinate:r,offsetTop:i,offsetLeft:l,position:o,reverseDirection:c,tooltipBox:d,useTranslate3d:u,viewBox:m}=e;return t=d.height>0&&d.width>0&&r?function(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}({translateX:a=cI({allowEscapeViewBox:n,coordinate:r,key:"x",offset:l,position:o,reverseDirection:c,tooltipDimension:d.width,viewBox:m,viewBoxDimension:m.width}),translateY:s=cI({allowEscapeViewBox:n,coordinate:r,key:"y",offset:i,position:o,reverseDirection:c,tooltipDimension:d.height,viewBox:m,viewBoxDimension:m.height}),useTranslate3d:u}):lI,{cssProperties:t,cssClasses:oI({translateX:a,translateY:s,coordinate:r})}}({allowEscapeViewBox:t,coordinate:i,offsetLeft:v,offsetTop:b,position:d,reverseDirection:u,tooltipBox:{height:x.height,width:x.width},useTranslate3d:m,viewBox:h}),N=g?{}:uI(uI({transition:o&&e?"transform ".concat(a,"ms ").concat(n):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),w=uI(uI({},N),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},p);return s.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:w,ref:f},r)}}var pI=a(2239),xI=a.n(pI);var fI,gI,vI,bI,yI,jI,NI,wI,SI,_I,kI,CI,EI,AI;function PI(){}function OI(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function MI(e){this._context=e}function TI(e){this._context=e}function DI(e){this._context=e}MI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:OI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:OI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},TI.prototype={areaStart:PI,areaEnd:PI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:OI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},DI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:OI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class II{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function RI(e){this._context=e}function LI(e){this._context=e}function FI(e){return new LI(e)}function zI(e){return e<0?-1:1}function BI(e,t,a){var s=e._x1-e._x0,n=t-e._x1,r=(e._y1-e._y0)/(s||n<0&&-0),i=(a-e._y1)/(n||s<0&&-0),l=(r*n+i*s)/(s+n);return(zI(r)+zI(i))*Math.min(Math.abs(r),Math.abs(i),.5*Math.abs(l))||0}function UI(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function HI(e,t,a){var s=e._x0,n=e._y0,r=e._x1,i=e._y1,l=(r-s)/3;e._context.bezierCurveTo(s+l,n+l*t,r-l,i-l*a,r,i)}function qI(e){this._context=e}function VI(e){this._context=new WI(e)}function WI(e){this._context=e}function GI(e){this._context=e}function KI(e){var t,a,s=e.length-1,n=new Array(s),r=new Array(s),i=new Array(s);for(n[0]=0,r[0]=2,i[0]=e[0]+2*e[1],t=1;t<s-1;++t)n[t]=1,r[t]=4,i[t]=4*e[t]+2*e[t+1];for(n[s-1]=2,r[s-1]=7,i[s-1]=8*e[s-1]+e[s],t=1;t<s;++t)a=n[t]/r[t-1],r[t]-=a,i[t]-=a*i[t-1];for(n[s-1]=i[s-1]/r[s-1],t=s-2;t>=0;--t)n[t]=(i[t]-n[t+1])/r[t];for(r[s-1]=(e[s]+n[s-1])/2,t=0;t<s-1;++t)r[t]=2*e[t+1]-n[t+1];return[n,r]}function YI(e,t){this._context=e,this._t=t}function JI(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}RI.prototype={areaStart:PI,areaEnd:PI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},LI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},qI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HI(this,this._t0,UI(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,HI(this,UI(this,a=BI(this,e,t)),a);break;default:HI(this,this._t0,a=BI(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}},(VI.prototype=Object.create(qI.prototype)).point=function(e,t){qI.prototype.point.call(this,t,e)},WI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,n,r){this._context.bezierCurveTo(t,e,s,a,r,n)}},GI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===a)this._context.lineTo(e[1],t[1]);else for(var s=KI(e),n=KI(t),r=0,i=1;i<a;++r,++i)this._context.bezierCurveTo(s[0][r],n[0][r],s[1][r],n[1][r],e[i],t[i]);(this._line||0!==this._line&&1===a)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},YI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}}this._x=e,this._y=t}};const $I=Math.PI,QI=2*$I,XI=1e-6,ZI=QI-XI;function eR(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}class tR{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?eR:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return eR;const a=10**t;return function(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=Math.round(arguments[t]*a)/a+e[t]}}(e)}moveTo(e,t){this._append(fI||(fI=JI(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(gI||(gI=JI(["Z"]))))}lineTo(e,t){this._append(vI||(vI=JI(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,a,s){this._append(bI||(bI=JI(["Q",",",",",",",""])),+e,+t,this._x1=+a,this._y1=+s)}bezierCurveTo(e,t,a,s,n,r){this._append(yI||(yI=JI(["C",",",",",",",",",",",""])),+e,+t,+a,+s,this._x1=+n,this._y1=+r)}arcTo(e,t,a,s,n){if(e=+e,t=+t,a=+a,s=+s,(n=+n)<0)throw new Error("negative radius: ".concat(n));let r=this._x1,i=this._y1,l=a-e,o=s-t,c=r-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append(jI||(jI=JI(["M",",",""])),this._x1=e,this._y1=t);else if(u>XI)if(Math.abs(d*l-o*c)>XI&&n){let m=a-r,h=s-i,p=l*l+o*o,x=m*m+h*h,f=Math.sqrt(p),g=Math.sqrt(u),v=n*Math.tan(($I-Math.acos((p+u-x)/(2*f*g)))/2),b=v/g,y=v/f;Math.abs(b-1)>XI&&this._append(wI||(wI=JI(["L",",",""])),e+b*c,t+b*d),this._append(SI||(SI=JI(["A",",",",0,0,",",",",",""])),n,n,+(d*m>c*h),this._x1=e+y*l,this._y1=t+y*o)}else this._append(NI||(NI=JI(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,a,s,n,r){if(e=+e,t=+t,r=!!r,(a=+a)<0)throw new Error("negative radius: ".concat(a));let i=a*Math.cos(s),l=a*Math.sin(s),o=e+i,c=t+l,d=1^r,u=r?s-n:n-s;null===this._x1?this._append(_I||(_I=JI(["M",",",""])),o,c):(Math.abs(this._x1-o)>XI||Math.abs(this._y1-c)>XI)&&this._append(kI||(kI=JI(["L",",",""])),o,c),a&&(u<0&&(u=u%QI+QI),u>ZI?this._append(CI||(CI=JI(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),a,a,d,e-i,t-l,a,a,d,this._x1=o,this._y1=c):u>XI&&this._append(EI||(EI=JI(["A",",",",0,",",",",",",",""])),a,a,+(u>=$I),d,this._x1=e+a*Math.cos(n),this._y1=t+a*Math.sin(n)))}rect(e,t,a,s){this._append(AI||(AI=JI(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,a=+a,+s,-a)}toString(){return this._}}function aR(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(null==a)t=null;else{const e=Math.floor(a);if(!(e>=0))throw new RangeError("invalid digits: ".concat(a));t=e}return e},()=>new tR(t)}function sR(e){return e[0]}function nR(e){return e[1]}function rR(e,t){var a=Hv(!0),s=null,n=FI,r=null,i=aR(l);function l(l){var o,c,d,u=(l=Uv(l)).length,m=!1;for(null==s&&(r=n(d=i())),o=0;o<=u;++o)!(o<u&&a(c=l[o],o,l))===m&&((m=!m)?r.lineStart():r.lineEnd()),m&&r.point(+e(c,o,l),+t(c,o,l));if(d)return r=null,d+""||null}return e="function"===typeof e?e:void 0===e?sR:Hv(e),t="function"===typeof t?t:void 0===t?nR:Hv(t),l.x=function(t){return arguments.length?(e="function"===typeof t?t:Hv(+t),l):e},l.y=function(e){return arguments.length?(t="function"===typeof e?e:Hv(+e),l):t},l.defined=function(e){return arguments.length?(a="function"===typeof e?e:Hv(!!e),l):a},l.curve=function(e){return arguments.length?(n=e,null!=s&&(r=n(s)),l):n},l.context=function(e){return arguments.length?(null==e?s=r=null:r=n(s=e),l):s},l}function iR(e,t,a){var s=null,n=Hv(!0),r=null,i=FI,l=null,o=aR(c);function c(c){var d,u,m,h,p,x=(c=Uv(c)).length,f=!1,g=new Array(x),v=new Array(x);for(null==r&&(l=i(p=o())),d=0;d<=x;++d){if(!(d<x&&n(h=c[d],d,c))===f)if(f=!f)u=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=d-1;m>=u;--m)l.point(g[m],v[m]);l.lineEnd(),l.areaEnd()}f&&(g[d]=+e(h,d,c),v[d]=+t(h,d,c),l.point(s?+s(h,d,c):g[d],a?+a(h,d,c):v[d]))}if(p)return l=null,p+""||null}function d(){return rR().defined(n).curve(i).context(r)}return e="function"===typeof e?e:void 0===e?sR:Hv(+e),t="function"===typeof t?t:Hv(void 0===t?0:+t),a="function"===typeof a?a:void 0===a?nR:Hv(+a),c.x=function(t){return arguments.length?(e="function"===typeof t?t:Hv(+t),s=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:Hv(+t),c):e},c.x1=function(e){return arguments.length?(s=null==e?null:"function"===typeof e?e:Hv(+e),c):s},c.y=function(e){return arguments.length?(t="function"===typeof e?e:Hv(+e),a=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:Hv(+e),c):t},c.y1=function(e){return arguments.length?(a=null==e?null:"function"===typeof e?e:Hv(+e),c):a},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(a)},c.lineX1=function(){return d().x(s).y(t)},c.defined=function(e){return arguments.length?(n="function"===typeof e?e:Hv(!!e),c):n},c.curve=function(e){return arguments.length?(i=e,null!=r&&(l=i(r)),c):i},c.context=function(e){return arguments.length?(null==e?r=l=null:l=i(r=e),c):r},c}function lR(){return lR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lR.apply(null,arguments)}function oR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function cR(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oR(Object(a),!0).forEach(function(t){dR(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oR(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function dR(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var uR={curveBasisClosed:function(e){return new TI(e)},curveBasisOpen:function(e){return new DI(e)},curveBasis:function(e){return new MI(e)},curveBumpX:function(e){return new II(e,!0)},curveBumpY:function(e){return new II(e,!1)},curveLinearClosed:function(e){return new RI(e)},curveLinear:FI,curveMonotoneX:function(e){return new qI(e)},curveMonotoneY:function(e){return new VI(e)},curveNatural:function(e){return new GI(e)},curveStep:function(e){return new YI(e,.5)},curveStepAfter:function(e){return new YI(e,1)},curveStepBefore:function(e){return new YI(e,0)}},mR=e=>op(e.x)&&op(e.y),hR=e=>null!=e.base&&mR(e.base)&&mR(e),pR=e=>e.x,xR=e=>e.y,fR={connectNulls:!1,type:"linear"},gR=e=>{var{type:t=fR.type,points:a=[],baseLine:s,layout:n,connectNulls:r=fR.connectNulls}=e,i=((e,t)=>{if("function"===typeof e)return e;var a="curve".concat(Qh(e));if(("curveMonotone"===a||"curveBump"===a)&&t){var s=uR["".concat(a).concat("vertical"===t?"Y":"X")];if(s)return s}return uR[a]||FI})(t,n),l=r?a.filter(mR):a;if(Array.isArray(s)){var o=a.map((e,t)=>cR(cR({},e),{},{base:s[t]}));return("vertical"===n?iR().y(xR).x1(pR).x0(e=>e.base.x):iR().x(pR).y1(xR).y0(e=>e.base.y)).defined(hR).curve(i)(r?o.filter(hR):o)}return("vertical"===n&&qh(s)?iR().y(xR).x1(pR).x0(s):qh(s)?iR().x(pR).y1(xR).y0(s):rR().x(pR).y(xR)).defined(mR).curve(i)(l)},vR=e=>{var{className:t,points:a,path:n,pathRef:r}=e,i=Db();if((!a||!a.length)&&!n)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},o=a&&a.length?gR(l):n;return s.createElement("path",lR({},kO(e),((e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var a=e;if((0,s.isValidElement)(e)&&(a=e.props),"object"!==typeof a&&"function"!==typeof a)return null;var n={};return Object.keys(a).forEach(e=>{NO(e)&&(n[e]=t||(t=>a[e](a,t)))}),n})(e),{className:ui("recharts-curve",t),d:null===o?void 0:o,ref:r}))},bR=["x","y","top","left","width","height","className"];function yR(){return yR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yR.apply(null,arguments)}function jR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function NR(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var wR=(e,t,a,s,n,r)=>"M".concat(e,",").concat(n,"v").concat(s,"M").concat(r,",").concat(t,"h").concat(a),SR=e=>{var{x:t=0,y:a=0,top:n=0,left:r=0,width:i=0,height:l=0,className:o}=e,c=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,bR),d=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jR(Object(a),!0).forEach(function(t){NR(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jR(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({x:t,y:a,top:n,left:r,width:i,height:l},c);return qh(t)&&qh(a)&&qh(i)&&qh(l)&&qh(n)&&qh(r)?s.createElement("path",yR({},EO(d),{className:ui("recharts-cross",o),d:wR(t,a,i,l,n,r)})):null};function _R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function kR(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_R(Object(a),!0).forEach(function(t){CR(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_R(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function CR(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ER=(e,t,a)=>e.map(e=>{return"".concat((s=e,s.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(a);var s}).join(","),AR=(e,t)=>Object.keys(t).reduce((a,s)=>kR(kR({},a),{},{[s]:e(s,t[s])}),{});function PR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function OR(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?PR(Object(a),!0).forEach(function(t){MR(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PR(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function MR(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var TR=(e,t,a)=>e+(t-e)*a,DR=e=>{var{from:t,to:a}=e;return t!==a},IR=(e,t,a)=>{var s=AR((t,a)=>{if(DR(a)){var[s,n]=e(a.from,a.to,a.velocity);return OR(OR({},a),{},{from:s,velocity:n})}return a},t);return a<1?AR((e,t)=>DR(t)&&null!=s[e]?OR(OR({},t),{},{velocity:TR(t.velocity,s[e].velocity,a),from:TR(t.from,s[e].from,a)}):t,t):IR(e,s,a-1)};function RR(e,t,a,s,n,r){var i,l=s.reduce((a,s)=>OR(OR({},a),{},{[s]:{from:e[s],velocity:0,to:t[s]}}),{}),o=null,c=s=>{i||(i=s);var d=(s-i)/a.dt;l=IR(a,l,d),n(OR(OR(OR({},e),t),AR((e,t)=>t.from,l))),i=s,Object.values(l).filter(DR).length&&(o=r.setTimeout(c))};return()=>(o=r.setTimeout(c),()=>{var e;null===(e=o)||void 0===e||e()})}const LR=(e,t,a,s,n,r)=>{var i,l,o=(i=e,l=t,[Object.keys(i),Object.keys(l)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==a?()=>(n(OR(OR({},e),t)),()=>{}):!0===a.isStepper?RR(e,t,a,o,n,r):function(e,t,a,s,n,r,i){var l,o=null,c=n.reduce((a,s)=>{var n=e[s],r=t[s];return null==n||null==r?a:OR(OR({},a),{},{[s]:[n,r]})},{}),d=n=>{l||(l=n);var u=(n-l)/s,m=AR((e,t)=>TR(...t,a(u)),c);if(r(OR(OR(OR({},e),t),m)),u<1)o=i.setTimeout(d);else{var h=AR((e,t)=>TR(...t,a(1)),c);r(OR(OR(OR({},e),t),h))}};return()=>(o=i.setTimeout(d),()=>{var e;null===(e=o)||void 0===e||e()})}(e,t,a,s,o,n,r)};var FR=1e-4,zR=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],BR=(e,t)=>e.map((e,a)=>e*t**a).reduce((e,t)=>e+t),UR=(e,t)=>a=>{var s=zR(e,t);return BR(s,a)},HR=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var s=(e=>{var t,a=e.split("(");if(2!==a.length||"cubic-bezier"!==a[0])return null;var s=null===(t=a[1])||void 0===t||null===(t=t.split(")")[0])||void 0===t?void 0:t.split(",");if(null==s||4!==s.length)return null;var n=s.map(e=>parseFloat(e));return[n[0],n[1],n[2],n[3]]})(t[0]);if(s)return s}return 4===t.length?t:[0,0,1,1]},qR=(e,t,a,s)=>{var n,r,i=UR(e,a),l=UR(t,s),o=(n=e,r=a,e=>{var t=[...zR(n,r).map((e,t)=>e*t).slice(1),0];return BR(t,e)}),c=e=>e>1?1:e<0?0:e,d=e=>{for(var t=e>1?1:e,a=t,s=0;s<8;++s){var n=i(a)-t,r=o(a);if(Math.abs(n-t)<FR||r<FR)return l(a);a=c(a-n/r)}return l(a)};return d.isStepper=!1,d},VR=function(){return qR(...HR(...arguments))},WR=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return VR(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:a=8,dt:s=17}=e,n=(e,n,r)=>{var i=r+(-(e-n)*t-r*a)*s/1e3,l=r*s/1e3+e;return Math.abs(l-n)<FR&&Math.abs(i)<FR?[n,0]:[l,i]};return n.isStepper=!0,n.dt=s,n}();default:if("cubic-bezier"===e.split("(")[0])return VR(e)}return"function"===typeof e?e:null};class GR{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=performance.now(),s=null,n=r=>{r-a>=t?e(r):"function"===typeof requestAnimationFrame&&(s=requestAnimationFrame(n))};return s=requestAnimationFrame(n),()=>{null!=s&&cancelAnimationFrame(s)}}}function KR(){return function(e){var t=()=>null,a=!1,s=null,n=r=>{if(!a){if(Array.isArray(r)){if(!r.length)return;var i=r,[l,...o]=i;return"number"===typeof l?void(s=e.setTimeout(n.bind(null,o),l)):(n(l),void(s=e.setTimeout(n.bind(null,o))))}"string"===typeof r&&t(r),"object"===typeof r&&t(r),"function"===typeof r&&r()}};return{stop:()=>{a=!0},start:e=>{a=!1,s&&(s(),s=null),n(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new GR)}var YR=(0,s.createContext)(KR);var JR={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$R={t:0},QR={t:1};function XR(e){var t=jM(e,JR),{isActive:a,canBegin:n,duration:r,easing:i,begin:l,onAnimationEnd:o,onAnimationStart:c,children:d}=t,u="auto"===a?!eO:a,m=function(e,t){var a=(0,s.useContext)(YR);return(0,s.useMemo)(()=>null!==t&&void 0!==t?t:a(e),[e,t,a])}(t.animationId,t.animationManager),[h,p]=(0,s.useState)(u?$R:QR),x=(0,s.useRef)(null);return(0,s.useEffect)(()=>{u||p(QR)},[u]),(0,s.useEffect)(()=>{if(!u||!n)return Zh;var e=LR($R,QR,WR(i),r,p,m.getTimeoutController());return m.start([c,l,()=>{x.current=e()},r,o]),()=>{m.stop(),x.current&&x.current(),o()}},[u,n,r,i,l,c,o,m]),d(h.t)}function ZR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",a=(0,s.useRef)(Gh(t)),n=(0,s.useRef)(e);return n.current!==e&&(a.current=Gh(t),n.current=e),a.current}var eL,tL,aL,sL,nL,rL,iL,lL,oL,cL,dL=["radius"],uL=["radius"];function mL(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function hL(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mL(Object(a),!0).forEach(function(t){pL(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mL(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function pL(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xL(){return xL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},xL.apply(null,arguments)}function fL(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function gL(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vL,bL,yL,jL,NL,wL,SL,_L=(e,t,a,s,n)=>{var r,i=Fh(a),l=Fh(s),o=Math.min(Math.abs(i)/2,Math.abs(l)/2),c=l>=0?1:-1,d=i>=0?1:-1,u=l>=0&&i>=0||l<0&&i<0?1:0;if(o>0&&Array.isArray(n)){for(var m=[0,0,0,0],h=0;h<4;h++){var p,x=null!==(p=n[h])&&void 0!==p?p:0;m[h]=x>o?o:x}r=zh(eL||(eL=gL(["M",",",""])),e,t+c*m[0]),m[0]>0&&(r+=zh(tL||(tL=gL(["A ",",",",0,0,",",",",",""])),m[0],m[0],u,e+d*m[0],t)),r+=zh(aL||(aL=gL(["L ",",",""])),e+a-d*m[1],t),m[1]>0&&(r+=zh(sL||(sL=gL(["A ",",",",0,0,",",\n        ",",",""])),m[1],m[1],u,e+a,t+c*m[1])),r+=zh(nL||(nL=gL(["L ",",",""])),e+a,t+s-c*m[2]),m[2]>0&&(r+=zh(rL||(rL=gL(["A ",",",",0,0,",",\n        ",",",""])),m[2],m[2],u,e+a-d*m[2],t+s)),r+=zh(iL||(iL=gL(["L ",",",""])),e+d*m[3],t+s),m[3]>0&&(r+=zh(lL||(lL=gL(["A ",",",",0,0,",",\n        ",",",""])),m[3],m[3],u,e,t+s-c*m[3])),r+="Z"}else if(o>0&&n===+n&&n>0){var f=Math.min(o,n);r=zh(oL||(oL=gL(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+c*f,f,f,u,e+d*f,t,e+a-d*f,t,f,f,u,e+a,t+c*f,e+a,t+s-c*f,f,f,u,e+a-d*f,t+s,e+d*f,t+s,f,f,u,e,t+s-c*f)}else r=zh(cL||(cL=gL(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return r},kL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CL=e=>{var t=jM(e,kL),a=(0,s.useRef)(null),[n,r]=(0,s.useState)(-1);(0,s.useEffect)(()=>{if(a.current&&a.current.getTotalLength)try{var e=a.current.getTotalLength();e&&r(e)}catch(t){}},[]);var{x:i,y:l,width:o,height:c,radius:d,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:p,isAnimationActive:x,isUpdateAnimationActive:f}=t,g=(0,s.useRef)(o),v=(0,s.useRef)(c),b=(0,s.useRef)(i),y=(0,s.useRef)(l),j=ZR((0,s.useMemo)(()=>({x:i,y:l,width:o,height:c,radius:d}),[i,l,o,c,d]),"rectangle-");if(i!==+i||l!==+l||o!==+o||c!==+c||0===o||0===c)return null;var N=ui("recharts-rectangle",u);if(!f){var w=EO(t),{radius:S}=w,_=fL(w,dL);return s.createElement("path",xL({},_,{x:Fh(i),y:Fh(l),width:Fh(o),height:Fh(c),radius:"number"===typeof d?d:void 0,className:N,d:_L(i,l,o,c,d)}))}var k=g.current,C=v.current,E=b.current,A=y.current,P="0px ".concat(-1===n?1:n,"px"),O="".concat(n,"px 0px"),M=ER(["strokeDasharray"],h,"string"===typeof m?m:kL.animationEasing);return s.createElement(XR,{animationId:j,key:j,canBegin:n>0,duration:h,easing:m,isActive:f,begin:p},e=>{var n,r=Jh(k,o,e),u=Jh(C,c,e),m=Jh(E,i,e),h=Jh(A,l,e);a.current&&(g.current=r,v.current=u,b.current=m,y.current=h),n=x?e>0?{transition:M,strokeDasharray:O}:{strokeDasharray:P}:{strokeDasharray:O};var p=EO(t),{radius:f}=p,j=fL(p,uL);return s.createElement("path",xL({},j,{radius:"number"===typeof d?d:void 0,className:N,d:_L(m,h,r,u,d),ref:a,style:hL(hL({},n),t.style)}))})};function EL(e){var{cx:t,cy:a,radius:s,startAngle:n,endAngle:r}=e;return{points:[j_(t,a,s,n),j_(t,a,s,r)],cx:t,cy:a,radius:s,startAngle:n,endAngle:r}}function AL(){return AL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},AL.apply(null,arguments)}function PL(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var OL=e=>{var{cx:t,cy:a,radius:s,angle:n,sign:r,isExternal:i,cornerRadius:l,cornerIsExternal:o}=e,c=l*(i?1:-1)+s,d=Math.asin(l/c)/b_,u=o?n:n+r*d,m=o?n-r*d:n;return{center:j_(t,a,c,u),circleTangency:j_(t,a,s,u),lineTangency:j_(t,a,c*Math.cos(d*b_),m),theta:d}},ML=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:n,startAngle:r,endAngle:i}=e,l=((e,t)=>Bh(t-e)*Math.min(Math.abs(t-e),359.999))(r,i),o=r+l,c=j_(t,a,n,r),d=j_(t,a,n,o),u=zh(vL||(vL=PL(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),c.x,c.y,n,n,+(Math.abs(l)>180),+(r>o),d.x,d.y);if(s>0){var m=j_(t,a,s,r),h=j_(t,a,s,o);u+=zh(bL||(bL=PL(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),h.x,h.y,s,s,+(Math.abs(l)>180),+(r<=o),m.x,m.y)}else u+=zh(yL||(yL=PL(["L ",","," Z"])),t,a);return u},TL={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DL=e=>{var t=jM(e,TL),{cx:a,cy:n,innerRadius:r,outerRadius:i,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u,className:m}=t;if(i<r||d===u)return null;var h,p=ui("recharts-sector",m),x=i-r,f=Kh(l,x,0,!0);return h=f>0&&Math.abs(d-u)<360?(e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:n,cornerRadius:r,forceCornerRadius:i,cornerIsExternal:l,startAngle:o,endAngle:c}=e,d=Bh(c-o),{circleTangency:u,lineTangency:m,theta:h}=OL({cx:t,cy:a,radius:n,angle:o,sign:d,cornerRadius:r,cornerIsExternal:l}),{circleTangency:p,lineTangency:x,theta:f}=OL({cx:t,cy:a,radius:n,angle:c,sign:-d,cornerRadius:r,cornerIsExternal:l}),g=l?Math.abs(o-c):Math.abs(o-c)-h-f;if(g<0)return i?zh(jL||(jL=PL(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),m.x,m.y,r,r,2*r,r,r,2*-r):ML({cx:t,cy:a,innerRadius:s,outerRadius:n,startAngle:o,endAngle:c});var v=zh(NL||(NL=PL(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),m.x,m.y,r,r,+(d<0),u.x,u.y,n,n,+(g>180),+(d<0),p.x,p.y,r,r,+(d<0),x.x,x.y);if(s>0){var{circleTangency:b,lineTangency:y,theta:j}=OL({cx:t,cy:a,radius:s,angle:o,sign:d,isExternal:!0,cornerRadius:r,cornerIsExternal:l}),{circleTangency:N,lineTangency:w,theta:S}=OL({cx:t,cy:a,radius:s,angle:c,sign:-d,isExternal:!0,cornerRadius:r,cornerIsExternal:l}),_=l?Math.abs(o-c):Math.abs(o-c)-j-S;if(_<0&&0===r)return"".concat(v,"L").concat(t,",").concat(a,"Z");v+=zh(wL||(wL=PL(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),w.x,w.y,r,r,+(d<0),N.x,N.y,s,s,+(_>180),+(d>0),b.x,b.y,r,r,+(d<0),y.x,y.y)}else v+=zh(SL||(SL=PL(["L",",","Z"])),t,a);return v})({cx:a,cy:n,innerRadius:r,outerRadius:i,cornerRadius:Math.min(f,x/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u}):ML({cx:a,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),s.createElement("path",AL({},EO(t),{className:p,d:h}))};function IL(e,t,a){if("horizontal"===e)return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if("vertical"===e)return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(qT(t)){if("centric"===e){var{cx:s,cy:n,innerRadius:r,outerRadius:i,angle:l}=t,o=j_(s,n,r,l),c=j_(s,n,i,l);return[{x:o.x,y:o.y},{x:c.x,y:c.y}]}return EL(t)}}function RL(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function LL(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?RL(Object(a),!0).forEach(function(t){FL(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RL(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function FL(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var zL=()=>{var e=Rv(Dk),t=Rv(ZE),a=Rv($E);return ib(e&&a?LL(LL({},e),{},{scale:a}):void 0,t)};function BL(){return BL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},BL.apply(null,arguments)}function UL(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function HL(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?UL(Object(a),!0).forEach(function(t){qL(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UL(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function qL(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function VL(e){var{cursor:t,cursorComp:a,cursorProps:n}=e;return(0,s.isValidElement)(t)?(0,s.cloneElement)(t,n):(0,s.createElement)(a,n)}function WL(e){var t,a,n,r,{coordinate:i,payload:l,index:o,offset:c,tooltipAxisBandSize:d,layout:u,cursor:m,tooltipEventType:h,chartName:p}=e,x=i,f=l,g=o;if(!m||!x||"ScatterChart"!==p&&"axis"!==h)return null;if("ScatterChart"===p)a=x,n=SR,r=k_.cursorLine;else if("BarChart"===p)a=function(e,t,a,s){var n=s/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-n:a.left+.5,y:"horizontal"===e?a.top+.5:t.y-n,width:"horizontal"===e?s:a.width-1,height:"horizontal"===e?a.height-1:s}}(u,x,c,d),n=CL,r=k_.cursorRectangle;else if("radial"===u&&qT(x)){var{cx:v,cy:b,radius:y,startAngle:j,endAngle:N}=EL(x);a={cx:v,cy:b,startAngle:j,endAngle:N,innerRadius:y,outerRadius:y},n=DL,r=k_.cursorLine}else a={points:IL(u,x,c)},n=vR,r=k_.cursorLine;var w="object"===typeof m&&"className"in m?m.className:void 0,S=HL(HL(HL(HL({stroke:"#ccc",pointerEvents:"none"},c),a),CO(m)),{},{payload:f,payloadIndex:g,className:ui("recharts-tooltip-cursor",w)});return s.createElement(yT,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:r},s.createElement(VL,{cursor:m,cursorComp:n,cursorProps:S}))}function GL(e){var t=zL(),a=Pb(),n=Db(),r=Rv(m_);return null==t||null==a||null==n||null==r?null:s.createElement(WL,BL({},e,{offset:a,layout:n,tooltipAxisBandSize:t,chartName:r}))}function KL(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function YL(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?KL(Object(a),!0).forEach(function(t){JL(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KL(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function JL(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $L(e){return e.dataKey}var QL=[],XL={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ZL(e){var t,a,n=jM(e,XL),{active:r,allowEscapeViewBox:i,animationDuration:l,animationEasing:o,content:c,filterNull:d,isAnimationActive:u,offset:m,payloadUniqBy:h,position:p,reverseDirection:x,useTranslate3d:f,wrapperStyle:g,cursor:v,shared:b,trigger:y,defaultIndex:j,portal:N,axisId:w}=n,S=Mv(),_="number"===typeof j?String(j):j;(0,s.useEffect)(()=>{S(Zg({shared:b,trigger:y,axisId:w,active:r,defaultIndex:_}))},[S,b,y,w,r,_]);var k=Eb(),C=yO(),E=function(e){return Rv(t=>nE(t,e))}(b),{activeIndex:A,isActive:P}=null!==(t=Rv(e=>EA(e,E,y,_)))&&void 0!==t?t:{},O=Rv(e=>CA(e,E,y,_)),M=Rv(e=>kA(e,E,y,_)),T=Rv(e=>_A(e,E,y,_)),D=O,I=(0,s.useContext)(ZO),R=null!==(a=null!==r&&void 0!==r?r:P)&&void 0!==a&&a,[L,F]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,a]=(0,s.useState)({height:0,left:0,top:0,width:0}),n=(0,s.useCallback)(e=>{if(null!=e){var s=e.getBoundingClientRect(),n={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(n.height-t.height)>1||Math.abs(n.left-t.left)>1||Math.abs(n.top-t.top)>1||Math.abs(n.width-t.width)>1)&&a({height:n.height,left:n.left,top:n.top,width:n.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}([D,R]),z="axis"===E?M:void 0;XO(E,y,T,z,A,R);var B=null!==N&&void 0!==N?N:I;if(null==B||null==k||null==E)return null;var U=null!==D&&void 0!==D?D:QL;R||(U=QL),d&&U.length&&(U=function(e,t,a){return!0===t?xI()(e,a):"function"===typeof t?xI()(e,t):e}(U.filter(e=>null!=e.value&&(!0!==e.hide||n.includeHidden)),h,$L));var H=U.length>0,q=s.createElement(hI,{allowEscapeViewBox:i,animationDuration:l,animationEasing:o,isAnimationActive:u,active:R,coordinate:T,hasPayload:H,offset:m,position:p,reverseDirection:x,useTranslate3d:f,viewBox:k,wrapperStyle:g,lastBoundingBox:L,innerRef:F,hasPortalFromProps:Boolean(N)},function(e,t){return s.isValidElement(e)?s.cloneElement(e,t):"function"===typeof e?s.createElement(e,t):s.createElement(rI,t)}(c,YL(YL({},n),{},{payload:U,label:z,active:R,activeIndex:A,coordinate:T,accessibilityLayer:C})));return s.createElement(s.Fragment,null,(0,Ft.createPortal)(q,B),R&&s.createElement(GL,{cursor:v,tooltipEventType:E,coordinate:T,payload:U,index:A}))}var eF=e=>null;eF.displayName="Cell";var tF=a(6667),aF=a.n(tF),sF=["valueAccessor"],nF=["dataKey","clockWise","id","textBreakAll","zIndex"];function rF(){return rF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},rF.apply(null,arguments)}function iF(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var lF=e=>Array.isArray(e.value)?aF()(e.value):e.value,oF=(0,s.createContext)(void 0),cF=oF.Provider,dF=(0,s.createContext)(void 0),uF=dF.Provider;function mF(e){var{valueAccessor:t=lF}=e,a=iF(e,sF),{dataKey:n,clockWise:r,id:i,textBreakAll:l,zIndex:o}=a,c=iF(a,nF),d=(0,s.useContext)(oF),u=(0,s.useContext)(dF),m=d||u;return m&&m.length?s.createElement(yT,{zIndex:null!==o&&void 0!==o?o:k_.label},s.createElement(GM,{className:"recharts-label-list"},m.map((e,r)=>{var o,d=$h(n)?t(e,r):$v(e.payload,n),u=$h(i)?{}:{id:"".concat(i,"-").concat(r)};return s.createElement(BT,rF({key:"label-".concat(r)},EO(e),c,u,{fill:null!==(o=a.fill)&&void 0!==o?o:e.fill,parentViewBox:e.parentViewBox,value:d,textBreakAll:l,viewBox:e.viewBox,index:r,zIndex:0}))}))):null}function hF(e){var{label:t}=e;return t?!0===t?s.createElement(mF,{key:"labelList-implicit"}):s.isValidElement(t)||RT(t)?s.createElement(mF,{key:"labelList-implicit",content:t}):"object"===typeof t?s.createElement(mF,rF({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}mF.displayName="LabelList";var pF=a(6429),xF=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",fF=null,gF=null,vF=e=>{if(e===fF&&Array.isArray(gF))return gF;var t=[];return s.Children.forEach(e,e=>{$h(e)||((0,pF.isFragment)(e)?t=t.concat(vF(e.props.children)):t.push(e))}),gF=t,fF=e,t};function bF(e,t){var a=[],s=[];return s=Array.isArray(t)?t.map(e=>xF(e)):[xF(t)],vF(e).forEach(e=>{var t=Lh()(e,"type.displayName")||Lh()(e,"type.name");t&&-1!==s.indexOf(t)&&a.push(e)}),a}var yF="Invariant failed";var jF,NF,wF,SF,_F,kF=a(2540),CF=a.n(kF);function EF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function AF(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?EF(Object(a),!0).forEach(function(t){PF(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):EF(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function PF(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},OF.apply(null,arguments)}function MF(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var TF=(e,t,a,s,n)=>{var r,i=a-s;return r=zh(jF||(jF=MF(["M ",",",""])),e,t),r+=zh(NF||(NF=MF(["L ",",",""])),e+a,t),r+=zh(wF||(wF=MF(["L ",",",""])),e+a-i/2,t+n),r+=zh(SF||(SF=MF(["L ",",",""])),e+a-i/2-s,t+n),r+=zh(_F||(_F=MF(["L ",","," Z"])),e,t)},DF={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IF=e=>{var t=jM(e,DF),{x:a,y:n,upperWidth:r,lowerWidth:i,height:l,className:o}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:m}=t,h=(0,s.useRef)(null),[p,x]=(0,s.useState)(-1),f=(0,s.useRef)(r),g=(0,s.useRef)(i),v=(0,s.useRef)(l),b=(0,s.useRef)(a),y=(0,s.useRef)(n),j=ZR(e,"trapezoid-");if((0,s.useEffect)(()=>{if(h.current&&h.current.getTotalLength)try{var e=h.current.getTotalLength();e&&x(e)}catch(t){}},[]),a!==+a||n!==+n||r!==+r||i!==+i||l!==+l||0===r&&0===i||0===l)return null;var N=ui("recharts-trapezoid",o);if(!m)return s.createElement("g",null,s.createElement("path",OF({},EO(t),{className:N,d:TF(a,n,r,i,l)})));var w=f.current,S=g.current,_=v.current,k=b.current,C=y.current,E="0px ".concat(-1===p?1:p,"px"),A="".concat(p,"px 0px"),P=ER(["strokeDasharray"],d,c);return s.createElement(XR,{animationId:j,key:j,canBegin:p>0,duration:d,easing:c,isActive:m,begin:u},e=>{var o=Jh(w,r,e),c=Jh(S,i,e),d=Jh(_,l,e),u=Jh(k,a,e),m=Jh(C,n,e);h.current&&(f.current=o,g.current=c,v.current=d,b.current=u,y.current=m);var p=e>0?{transition:P,strokeDasharray:A}:{strokeDasharray:E};return s.createElement("path",OF({},EO(t),{className:N,d:TF(u,m,o,c,d),ref:h,style:AF(AF({},p),t.style)}))})};Math.abs,Math.atan2;const RF=Math.cos,LF=(Math.max,Math.min,Math.sin),FF=Math.sqrt,zF=Math.PI,BF=2*zF;const UF={draw(e,t){const a=FF(t/zF);e.moveTo(a,0),e.arc(0,0,a,0,BF)}},HF={draw(e,t){const a=FF(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},qF=FF(1/3),VF=2*qF,WF={draw(e,t){const a=FF(t/VF),s=a*qF;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},GF={draw(e,t){const a=FF(t),s=-a/2;e.rect(s,s,a,a)}},KF=LF(zF/10)/LF(7*zF/10),YF=LF(BF/10)*KF,JF=-RF(BF/10)*KF,$F={draw(e,t){const a=FF(.8908130915292852*t),s=YF*a,n=JF*a;e.moveTo(0,-a),e.lineTo(s,n);for(let r=1;r<5;++r){const t=BF*r/5,i=RF(t),l=LF(t);e.lineTo(l*a,-i*a),e.lineTo(i*s-l*n,l*s+i*n)}e.closePath()}},QF=FF(3),XF={draw(e,t){const a=-FF(t/(3*QF));e.moveTo(0,2*a),e.lineTo(-QF*a,-a),e.lineTo(QF*a,-a),e.closePath()}},ZF=-.5,ez=FF(3)/2,tz=1/FF(12),az=3*(tz/2+1),sz={draw(e,t){const a=FF(t/az),s=a/2,n=a*tz,r=s,i=a*tz+a,l=-r,o=i;e.moveTo(s,n),e.lineTo(r,i),e.lineTo(l,o),e.lineTo(ZF*s-ez*n,ez*s+ZF*n),e.lineTo(ZF*r-ez*i,ez*r+ZF*i),e.lineTo(ZF*l-ez*o,ez*l+ZF*o),e.lineTo(ZF*s+ez*n,ZF*n-ez*s),e.lineTo(ZF*r+ez*i,ZF*i-ez*r),e.lineTo(ZF*l+ez*o,ZF*o-ez*l),e.closePath()}};FF(3),FF(3);var nz=["type","size","sizeType"];function rz(){return rz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},rz.apply(null,arguments)}function iz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function lz(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?iz(Object(a),!0).forEach(function(t){oz(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iz(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function oz(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var cz={symbolCircle:UF,symbolCross:HF,symbolDiamond:WF,symbolSquare:GF,symbolStar:$F,symbolTriangle:XF,symbolWye:sz},dz=Math.PI/180,uz=e=>{var{type:t="circle",size:a=64,sizeType:n="area"}=e,r=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,nz),i=lz(lz({},r),{},{type:t,size:a,sizeType:n}),l="circle";"string"===typeof t&&(l=t);var{className:o,cx:c,cy:d}=i,u=EO(i);return qh(c)&&qh(d)&&qh(a)?s.createElement("path",rz({},u,{className:ui("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(d,")"),d:(()=>{var e=(e=>{var t="symbol".concat(Qh(e));return cz[t]||UF})(l),t=function(e,t){let a=null,s=aR(n);function n(){let n;if(a||(a=n=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),n)return a=null,n+""||null}return e="function"===typeof e?e:Hv(e||UF),t="function"===typeof t?t:Hv(void 0===t?64:+t),n.type=function(t){return arguments.length?(e="function"===typeof t?t:Hv(t),n):e},n.size=function(e){return arguments.length?(t="function"===typeof e?e:Hv(+e),n):t},n.context=function(e){return arguments.length?(a=null==e?null:e,n):a},n}().type(e).size(((e,t,a)=>{if("area"===t)return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var s=18*dz;return 1.25*e*e*(Math.tan(s)-Math.tan(2*s)*Math.tan(s)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(a,n,l)),s=t();if(null!==s)return s})()})):null};uz.registerSymbol=(e,t)=>{cz["symbol".concat(Qh(e))]=t};var mz=["option","shapeType","activeClassName"];function hz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function pz(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hz(Object(a),!0).forEach(function(t){xz(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hz(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function xz(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fz(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return s.createElement(CL,a);case"trapezoid":return s.createElement(IF,a);case"sector":return s.createElement(DL,a);case"symbols":if(function(e){return"symbols"===e}(t))return s.createElement(uz,a);break;case"curve":return s.createElement(vR,a);default:return null}}function gz(e){var t,{option:a,shapeType:n,activeClassName:r="recharts-active-shape"}=e,i=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,mz);if((0,s.isValidElement)(a))t=(0,s.cloneElement)(a,pz(pz({},i),function(e){return(0,s.isValidElement)(e)?e.props:e}(a)));else if("function"===typeof a)t=a(i,i.index);else if(CF()(a)&&"boolean"!==typeof a){var l=function(e,t){return pz(pz({},t),e)}(a,i);t=s.createElement(fz,{shapeType:n,elementProps:l})}else{var o=i;t=s.createElement(fz,{shapeType:n,elementProps:o})}return i.isActive?s.createElement(GM,{className:r},t):t}function vz(){return vz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},vz.apply(null,arguments)}function bz(e){return s.createElement(gz,vz({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var yz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(a,s)=>{if(qh(e))return e;var n=qh(a)||$h(a);return n?e(a,s):(n||function(e){if(!e)throw new Error(yF)}(!1,"minPointSize callback function received a value with type of ".concat(typeof a,". Currently only numbers or null/undefined are supported.")),t)}},jz=(e,t,a)=>{var s=Mv();return(n,r)=>i=>{null===e||void 0===e||e(n,r,i),s(ev({activeIndex:String(r),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}},Nz=e=>{var t=Mv();return(a,s)=>n=>{null===e||void 0===e||e(a,s,n),t(tv())}},wz=(e,t,a)=>{var s=Mv();return(n,r)=>i=>{null===e||void 0===e||e(n,r,i),s(sv({activeIndex:String(r),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}};function Sz(e){var{tooltipEntrySettings:t}=e,a=Mv(),n=Sb(),r=(0,s.useRef)(null);return(0,s.useLayoutEffect)(()=>{n||(null===r.current?a($g(t)):r.current!==t&&a(Qg({prev:r.current,next:t})),r.current=t)},[t,a,n]),(0,s.useLayoutEffect)(()=>()=>{r.current&&(a(Xg(r.current)),r.current=null)},[a]),null}var _z=["children"];var kz={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Cz=(0,s.createContext)(kz);function Ez(e){var{children:t}=e,a=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,_z);return s.createElement(Cz.Provider,{value:a},t)}function Az(e,t){var a,s,n=Rv(t=>lk(t,e)),r=Rv(e=>dk(e,t)),i=null!==(a=null===n||void 0===n?void 0:n.allowDataOverflow)&&void 0!==a?a:rk.allowDataOverflow,l=null!==(s=null===r||void 0===r?void 0:r.allowDataOverflow)&&void 0!==s?s:ok.allowDataOverflow;return{needClip:i||l,needClipX:i,needClipY:l}}function Pz(e){var{xAxisId:t,yAxisId:a,clipPathId:n}=e,r=pM(),{needClipX:i,needClipY:l,needClip:o}=Az(t,a);if(!o||!r)return null;var{x:c,y:d,width:u,height:m}=r;return s.createElement("clipPath",{id:"clipPath-".concat(n)},s.createElement("rect",{x:i?c:c-u/2,y:l?d:d-m/2,width:i?u:2*u,height:l?m:2*m}))}var Oz=(e,t,a)=>{var s=null!==a&&void 0!==a?a:e;if(!$h(s))return Kh(s,t,0)};function Mz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function Tz(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mz(Object(a),!0).forEach(function(t){Dz(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mz(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Dz(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Iz(e,t){var a,s;return null!==(a=null===(s=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===s?void 0:s.xAxisId)&&void 0!==a?a:0}function Rz(e,t){var a,s;return null!==(a=null===(s=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===s?void 0:s.yAxisId)&&void 0!==a?a:0}var Lz,Fz=Cv([gk,(e,t)=>t],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),zz=Cv([Fz],e=>null===e||void 0===e?void 0:e.maxBarSize),Bz=Cv([Tb,gk,Iz,Rz,(e,t,a)=>a],(e,t,a,s,n)=>t.filter(t=>"horizontal"===e?t.xAxisId===a:t.yAxisId===s).filter(e=>e.isPanorama===n).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),Uz=Cv([Bz,e=>e.rootProps.barSize,(e,t)=>{var a=Tb(e),s=Iz(e,t),n=Rz(e,t);if(null!=s&&null!=n)return"horizontal"===a?VC(e,"xAxis",s):VC(e,"yAxis",n)}],(e,t,a)=>{var s=e.filter(K_),n=e.filter(e=>null==e.stackId),r=s.reduce((e,t)=>{var a=e[t.stackId];return null==a&&(a=[]),a.push(t),e[t.stackId]=a,e},{}),i=Object.entries(r).map(e=>{var s,[n,r]=e;return{stackId:n,dataKeys:r.map(e=>e.dataKey),barSize:Oz(t,a,null===(s=r[0])||void 0===s?void 0:s.barSize)}});return[...i,...n.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:Oz(t,a,e.barSize)}))]}),Hz=(e,t,a)=>{var s,n,r=Tb(e),i=Iz(e,t),l=Rz(e,t);if(null!=i&&null!=l)return"horizontal"===r?(s=XC(e,"xAxis",i,a),n=QC(e,"xAxis",i,a)):(s=XC(e,"yAxis",l,a),n=QC(e,"yAxis",l,a)),ib(s,n)},qz=Cv([Uz,o_,e=>e.rootProps.barGap,c_,(e,t,a)=>{var s,n,r=Fz(e,t);if(null==r)return 0;var i=Iz(e,t),l=Rz(e,t);if(null==i||null==l)return 0;var o,c,d=Tb(e),u=o_(e),{maxBarSize:m}=r,h=$h(m)?u:m;return"horizontal"===d?(o=XC(e,"xAxis",i,a),c=QC(e,"xAxis",i,a)):(o=XC(e,"yAxis",l,a),c=QC(e,"yAxis",l,a)),null!==(s=null!==(n=ib(o,c,!0))&&void 0!==n?n:h)&&void 0!==s?s:0},Hz,zz],(e,t,a,s,n,r,i)=>{var l=$h(i)?t:i,o=function(e,t,a,s,n){var r,i=s.length;if(!(i<1)){var l,o=Kh(e,a,0,!0),c=[];if(op(null===(r=s[0])||void 0===r?void 0:r.barSize)){var d=!1,u=a/i,m=s.reduce((e,t)=>e+(t.barSize||0),0);(m+=(i-1)*o)>=a&&(m-=(i-1)*o,o=0),m>=a&&u>0&&(d=!0,m=i*(u*=.9));var h={offset:((a-m)/2|0)-o,size:0};l=s.reduce((e,t)=>{var a,s={stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:d?u:null!==(a=t.barSize)&&void 0!==a?a:0}},n=[...e,s];return h=s.position,n},c)}else{var p=Kh(t,a,0,!0);a-2*p-(i-1)*o<=0&&(o=0);var x=(a-2*p-(i-1)*o)/i;x>1&&(x>>=0);var f=op(n)?Math.min(x,n):x;l=s.reduce((e,t,a)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p+(x+o)*a+(x-f)/2,size:f}}],c)}return l}}(a,s,n!==r?n:r,e,l);return n!==r&&null!=o&&(o=o.map(e=>Tz(Tz({},e),{},{position:Tz(Tz({},e.position),{},{offset:e.position.offset-n/2})}))),o}),Vz=Cv([qz,Fz],(e,t)=>{if(null!=e&&null!=t){var a=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=a)return a.position}}),Wz=Cv([(e,t,a)=>{var s=Tb(e),n=Iz(e,t),r=Rz(e,t);if(null!=n&&null!=r)return"horizontal"===s?Fk(e,"yAxis",r,a):Fk(e,"xAxis",n,a)},Fz],(e,t)=>{var a=W_(t);if(e&&null!=a&&null!=t){var{stackId:s}=t;if(null!=s){var n=e[s];if(n){var{stackedData:r}=n;if(r)return r.find(e=>e.key===a)}}}}),Gz=Cv([yb,Nb,(e,t,a)=>{var s=Iz(e,t);if(null!=s)return XC(e,"xAxis",s,a)},(e,t,a)=>{var s=Rz(e,t);if(null!=s)return XC(e,"yAxis",s,a)},(e,t,a)=>{var s=Iz(e,t);if(null!=s)return QC(e,"xAxis",s,a)},(e,t,a)=>{var s=Rz(e,t);if(null!=s)return QC(e,"yAxis",s,a)},Vz,Tb,(e,t,a)=>a?JS(e):YS(e),Hz,Wz,Fz,(e,t,a,s)=>s],(e,t,a,s,n,r,i,l,o,c,d,u,m)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:x}=o;if(null!=u&&null!=i&&null!=t&&("horizontal"===l||"vertical"===l)&&null!=a&&null!=s&&null!=n&&null!=r&&null!=c){var f,{data:g}=u;if(null!=(f=null!=g&&g.length>0?g:null===h||void 0===h?void 0:h.slice(p,x+1)))return function(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:n,bandSize:r,xAxis:i,yAxis:l,xAxisTicks:o,yAxisTicks:c,stackedData:d,displayedData:u,offset:m,cells:h,parentViewBox:p,dataStartIndex:x}=e,f="horizontal"===t?l:i,g=d?f.scale.domain():null,v=(e=>{var{numericAxis:t}=e,a=t.scale.domain();if("number"===t.type){var s=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]);return s<=0&&n>=0?0:n<0?n:s}return a[0]})({numericAxis:f}),b=f.scale.map(v);return u.map((e,u)=>{var f,y,j,N,w,S;if(d){var _=d[u+x];if(null==_)return null;f=((e,t)=>{if(!t||2!==t.length||!qh(t[0])||!qh(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!qh(e[0])||e[0]<a)&&(n[0]=a),(!qh(e[1])||e[1]>s)&&(n[1]=s),n[0]>s&&(n[0]=s),n[1]<a&&(n[1]=a),n})(_,g)}else f=$v(e,a),Array.isArray(f)||(f=[v,f]);var k=yz(s,_B)(f[1],u);if("horizontal"===t){var C,E=l.scale.map(f[0]),A=l.scale.map(f[1]);if(null==E||null==A)return null;y=ab({axis:i,ticks:o,bandSize:r,offset:n.offset,entry:e,index:u}),j=null!==(C=null!==A&&void 0!==A?A:E)&&void 0!==C?C:void 0,N=n.size;var P=E-A;if(w=Uh(P)?0:P,S={x:y,y:m.top,width:N,height:m.height},Math.abs(k)>0&&Math.abs(w)<Math.abs(k)){var O=Bh(w||k)*(Math.abs(k)-Math.abs(w));j-=O,w+=O}}else{var M=i.scale.map(f[0]),T=i.scale.map(f[1]);if(null==M||null==T)return null;if(y=M,j=ab({axis:l,ticks:c,bandSize:r,offset:n.offset,entry:e,index:u}),N=T-M,w=n.size,S={x:m.left,y:j,width:m.width,height:w},Math.abs(k)>0&&Math.abs(N)<Math.abs(k))N+=Bh(N||k)*(Math.abs(k)-Math.abs(N))}return null==y||null==j||null==N||null==w?null:hB(hB({},e),{},{stackedBarStart:b,x:y,y:j,width:N,height:w,value:d?f:f[1],payload:e,background:S,tooltipPosition:{x:y+N/2,y:j+w/2},parentViewBox:p},h&&h[u]&&h[u].props)}).filter(Boolean)}({layout:l,barSettings:u,pos:i,parentViewBox:t,bandSize:c,xAxis:a,yAxis:s,xAxisTicks:n,yAxisTicks:r,stackedData:d,displayedData:f,offset:e,cells:m,dataStartIndex:p})}});function Kz(e){var{legendPayload:t}=e,a=Mv(),n=Sb(),r=(0,s.useRef)(null);return(0,s.useLayoutEffect)(()=>{n||(null===r.current?a(jP(t)):r.current!==t&&a(NP({prev:r.current,next:t})),r.current=t)},[a,n,t]),(0,s.useLayoutEffect)(()=>()=>{r.current&&(a(wP(r.current)),r.current=null)},[a]),null}function Yz(e){var{legendPayload:t}=e,a=Mv(),n=Rv(Tb),r=(0,s.useRef)(null);return(0,s.useLayoutEffect)(()=>{"centric"!==n&&"radial"!==n||(null===r.current?a(jP(t)):r.current!==t&&a(NP({prev:r.current,next:t})),r.current=t)},[a,n,t]),(0,s.useLayoutEffect)(()=>()=>{r.current&&(a(wP(r.current)),r.current=null)},[a]),null}var Jz=null!==(Lz=n["useId".toString()])&&void 0!==Lz?Lz:()=>{var[e]=s.useState(()=>Gh("uid-"));return e};var $z=(0,s.createContext)(void 0),Qz=e=>{var{id:t,type:a,children:n}=e,r=function(e,t){var a=Jz();return t||(e?"".concat(e,"-").concat(a):a)}("recharts-".concat(a),t);return s.createElement($z.Provider,{value:r},n(r))};var Xz=e=>{var t=Mv(),a=(0,s.useRef)(null);return(0,s.useLayoutEffect)(()=>{null===a.current?t(eP(e)):a.current!==e&&t(tP({prev:a.current,next:e})),a.current=e},[t,e]),(0,s.useLayoutEffect)(()=>()=>{a.current&&(t(aP(a.current)),a.current=null)},[t]),null},Zz=(0,s.memo)(Xz);function eB(e){var t=Mv();return(0,s.useLayoutEffect)(()=>(t(sP(e)),()=>{t(nP(e))}),[t,e]),null}var tB=["index"];function aB(){return aB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},aB.apply(null,arguments)}var sB=(0,s.createContext)(void 0),nB=e=>{var t,a=(0,s.useContext)(sB);return null!=a?a.stackId:null!=e?null==(t=e)?void 0:String(t):void 0},rB=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),iB=e=>{var{index:t}=e,a=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,tB),n=(e=>{var t=(0,s.useContext)(sB);if(null!=t){var{stackId:a}=t;return"url(#".concat(rB(a,e),")")}})(t);return s.createElement(GM,aB({className:"recharts-bar-stack-layer",clipPath:n},a))},lB=["onMouseEnter","onMouseLeave","onClick"],oB=["value","background","tooltipPosition"],cB=["id"],dB=["onMouseEnter","onClick","onMouseLeave"];function uB(){return uB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},uB.apply(null,arguments)}function mB(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function hB(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mB(Object(a),!0).forEach(function(t){pB(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mB(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function pB(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xB(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var fB=e=>{var{dataKey:t,name:a,fill:s,legendType:n,hide:r}=e;return[{inactive:r,dataKey:t,type:n,color:s,value:ob(a,t),payload:e}]},gB=s.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:n,fill:r,name:i,hide:l,unit:o,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,getPosition:Zh,settings:{stroke:a,strokeWidth:n,fill:r,dataKey:t,nameKey:void 0,name:ob(i,t),hide:l,type:c,color:r,unit:o,graphicalItemId:d}};return s.createElement(Sz,{tooltipEntrySettings:u})});function vB(e){var t=Rv(nA),{data:a,dataKey:n,background:r,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:c}=i,d=xB(i,lB),u=jz(l,n,i.id),m=Nz(o),h=wz(c,n,i.id);if(!r||null==a)return null;var p,x,f=CO(r);return s.createElement(yT,{zIndex:(p=r,x=k_.barBackground,p&&"object"===typeof p&&"zIndex"in p&&"number"===typeof p.zIndex&&op(p.zIndex)?p.zIndex:x)},a.map((e,a)=>{var{value:i,background:l,tooltipPosition:o}=e,c=xB(e,oB);if(!l)return null;var p=u(e,a),x=m(e,a),g=h(e,a),v=hB(hB(hB(hB(hB({option:r,isActive:String(a)===t},c),{},{fill:"#eee"},l),f),VT(d,e,a)),{},{onMouseEnter:p,onMouseLeave:x,onClick:g,dataKey:n,index:a,className:"recharts-bar-background-rectangle"});return s.createElement(bz,uB({key:"background-bar-".concat(a)},v))}))}function bB(e){var{showLabels:t,children:a,rects:n}=e,r=null===n||void 0===n?void 0:n.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return hB(hB({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return s.createElement(cF,{value:t?r:void 0},a)}function yB(e){var{shape:t,activeBar:a,baseProps:n,entry:r,index:i,dataKey:l}=e,o=Rv(nA),c=Rv(iA),d=a&&String(i)===o&&(null==c||l===c),u=d?a:t;return d?s.createElement(yT,{zIndex:k_.activeBar},s.createElement(iB,{index:i},s.createElement(bz,uB({},n,{name:String(n.name)},r,{isActive:d,option:u,index:i,dataKey:l})))):s.createElement(bz,uB({},n,{name:String(n.name)},r,{isActive:d,option:u,index:i,dataKey:l}))}function jB(e){var{shape:t,baseProps:a,entry:n,index:r,dataKey:i}=e;return s.createElement(bz,uB({},a,{name:String(a.name)},n,{isActive:!1,option:t,index:r,dataKey:i}))}function NB(e){var t,{data:a,props:n}=e,r=null!==(t=kO(n))&&void 0!==t?t:{},{id:i}=r,l=xB(r,cB),{shape:o,dataKey:c,activeBar:d}=n,{onMouseEnter:u,onClick:m,onMouseLeave:h}=n,p=xB(n,dB),x=jz(u,c,i),f=Nz(h),g=wz(m,c,i);return a?s.createElement(s.Fragment,null,a.map((e,t)=>s.createElement(iB,uB({index:t,key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},VT(p,e,t),{onMouseEnter:x(e,t),onMouseLeave:f(e,t),onClick:g(e,t)}),d?s.createElement(yB,{shape:o,activeBar:d,baseProps:l,entry:e,index:t,dataKey:c}):s.createElement(jB,{shape:o,baseProps:l,entry:e,index:t,dataKey:c})))):null}function wB(e){var{props:t,previousRectanglesRef:a}=e,{data:n,layout:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,m=a.current,h=ZR(t,"recharts-bar-"),[p,x]=(0,s.useState)(!1),f=!p,g=(0,s.useCallback)(()=>{"function"===typeof d&&d(),x(!1)},[d]),v=(0,s.useCallback)(()=>{"function"===typeof u&&u(),x(!0)},[u]);return s.createElement(bB,{showLabels:f,rects:n},s.createElement(XR,{animationId:h,begin:l,duration:o,isActive:i,easing:c,onAnimationEnd:g,onAnimationStart:v,key:h},e=>{var i=1===e?n:null===n||void 0===n?void 0:n.map((t,a)=>{var s=m&&m[a];if(s)return hB(hB({},t),{},{x:Jh(s.x,t.x,e),y:Jh(s.y,t.y,e),width:Jh(s.width,t.width,e),height:Jh(s.height,t.height,e)});if("horizontal"===r){var n=Jh(0,t.height,e),i=Jh(t.stackedBarStart,t.y,e);return hB(hB({},t),{},{y:i,height:n})}var l=Jh(0,t.width,e),o=Jh(t.stackedBarStart,t.x,e);return hB(hB({},t),{},{width:l,x:o})});return e>0&&(a.current=null!==i&&void 0!==i?i:null),null==i?null:s.createElement(GM,null,s.createElement(NB,{props:t,data:i}))}),s.createElement(hF,{label:t.label}),t.children)}function SB(e){var t=(0,s.useRef)(null);return s.createElement(wB,{previousRectanglesRef:t,props:e})}var _B=0,kB=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:$v(e,t)}};class CB extends s.PureComponent{render(){var{hide:e,data:t,dataKey:a,className:n,xAxisId:r,yAxisId:i,needClip:l,background:o,id:c}=this.props;if(e||null==t)return null;var d=ui("recharts-bar",n),u=c;return s.createElement(GM,{className:d,id:c},l&&s.createElement("defs",null,s.createElement(Pz,{clipPathId:u,xAxisId:r,yAxisId:i})),s.createElement(GM,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(u,")"):void 0},s.createElement(vB,{data:t,dataKey:a,background:o,allOtherBarProps:this.props}),s.createElement(SB,this.props)))}}var EB={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:_B,xAxisId:0,yAxisId:0,zIndex:k_.bar};function AB(e){var t,{xAxisId:a,yAxisId:n,hide:r,legendType:i,minPointSize:l,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:m}=e,{needClip:h}=Az(a,n),p=Db(),x=Sb(),f=bF(e.children,eF),g=Rv(t=>Gz(t,e.id,x,f));if("vertical"!==p&&"horizontal"!==p)return null;var v=null===g||void 0===g?void 0:g[0];return t=null==v||null==v.height||null==v.width?0:"vertical"===p?v.height/2:v.width/2,s.createElement(Ez,{xAxisId:a,yAxisId:n,data:g,dataPointFormatter:kB,errorBarOffset:t},s.createElement(CB,uB({},e,{layout:p,needClip:h,data:g,xAxisId:a,yAxisId:n,hide:r,legendType:i,minPointSize:l,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:m})))}function PB(e){var t=jM(e,EB),a=nB(t.stackId),n=Sb();return s.createElement(Qz,{id:t.id,type:"bar"},e=>s.createElement(s.Fragment,null,s.createElement(Kz,{legendPayload:fB(t)}),s.createElement(gB,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),s.createElement(Zz,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),s.createElement(yT,{zIndex:t.zIndex},s.createElement(AB,uB({},t,{id:e})))))}var OB=s.memo(PB,fO);function MB(e){var t=Mv();return(0,s.useEffect)(()=>{t(RP(e))},[t,e]),null}OB.displayName="Bar";var TB=["layout"];function DB(){return DB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},DB.apply(null,arguments)}var IB={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},RB=(0,s.forwardRef)(function(e,t){var a,n=jM(e.categoricalChartProps,IB),{layout:r}=n,i=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(n,TB),{chartName:l,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:d}=e,u={chartName:l,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return s.createElement(mO,{preloadedState:{options:u},reduxStoreName:null!==(a=n.id)&&void 0!==a?a:l},s.createElement(hO,{chartData:n.data}),s.createElement(vO,{layout:r,margin:n.margin}),s.createElement(bO,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),s.createElement(MB,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),s.createElement(vM,DB({},i,{ref:t})))});function LB(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function FB(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?LB(Object(a),!0).forEach(function(t){zB(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):LB(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function zB(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var BB=["item"],UB=FB(FB({},IB),{},{layout:"centric",startAngle:0,endAngle:360}),HB=(0,s.forwardRef)((e,t)=>{var a=jM(e,UB);return s.createElement(RB,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:BB,tooltipPayloadSearcher:Hf,categoricalChartProps:a,ref:t})}),qB=e=>e.graphicalItems.polarItems,VB=Cv([q_,V_],fk),WB=Cv([qB,hk,VB],bk),GB=Cv([WB],Sk),KB=Cv([GB,JS],kk),YB=Cv([KB,hk,WB],Ek),JB=(Cv([KB,hk,WB],(e,t,a)=>a.length>0?e.flatMap(e=>a.flatMap(a=>{var s;return{value:$v(e,null!==(s=t.dataKey)&&void 0!==s?s:a.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:$v(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),()=>{}),$B=Cv([KB,hk,WB,Wk,q_],Kk),QB=Cv([hk,Hk,qk,JB,$B,JB,Tb,q_],dC),XB=Cv([hk,Tb,KB,YB,d_,q_,QB],hC),ZB=Cv([XB,pk,fC],vC),eU=Cv([hk,XB,ZB,q_],yC);Cv([fC,eU],ek);function tU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function aU(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tU(Object(a),!0).forEach(function(t){sU(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tU(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function sU(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var nU=Cv([qB,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),rU=[],iU=(e,t,a)=>0===(null===a||void 0===a?void 0:a.length)?rU:a,lU=Cv([JS,nU,iU],(e,t,a)=>{var s,{chartData:n}=e;if(null!=t&&((s=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:n)&&s.length||null==a||(s=a.map(e=>aU(aU({},t.presentationProps),e.props))),null!=s))return s}),oU=Cv([lU,nU,iU],(e,t,a)=>{if(null!=e&&null!=t)return e.map((e,s)=>{var n,r,i=$v(e,t.nameKey,t.name);return r=null!==a&&void 0!==a&&null!==(n=a[s])&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.fill?a[s].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:ob(i,t.dataKey),color:r,payload:e,type:t.legendType}})}),cU=Cv([lU,nU,iU,yb],(e,t,a,s)=>{if(null!=t&&null!=e)return function(e){var t,a,s,{pieSettings:n,displayedData:r,cells:i,offset:l}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:u,nameKey:m,tooltipType:h}=n,p=Math.abs(n.minAngle),x=wU(c,d),f=Math.abs(x),g=r.length<=1?0:null!==(t=n.paddingAngle)&&void 0!==t?t:0,v=r.filter(e=>0!==$v(e,u,0)).length,b=f-v*p-(f>=360?v:v-1)*g,y=r.reduce((e,t)=>{var a=$v(t,u,0);return e+(qh(a)?a:0)},0);y>0&&(a=r.map((e,t)=>{var a,r=$v(e,u,0),d=$v(e,m,t),f=NU(n,l,e),v=(qh(r)?r:0)/y,j=xU(xU({},e),i&&i[t]&&i[t].props),N=(a=t?s.endAngle+Bh(x)*g*(0!==r?1:0):c)+Bh(x)*((0!==r?p:0)+v*b),w=(a+N)/2,S=(f.innerRadius+f.outerRadius)/2,_=[{name:d,value:r,payload:j,dataKey:u,type:h,graphicalItemId:n.id}],k=j_(f.cx,f.cy,S,w);return s=xU(xU(xU(xU({},n.presentationProps),{},{percent:v,cornerRadius:"string"===typeof o?parseFloat(o):o,name:d,tooltipPayload:_,midAngle:w,middleRadius:S,tooltipPosition:k},j),f),{},{value:r,dataKey:u,startAngle:a,endAngle:N,payload:j,paddingAngle:Bh(x)*g})}));return a}({offset:s,pieSettings:t,displayedData:e,cells:a})}),dU=["key"],uU=["onMouseEnter","onClick","onMouseLeave"],mU=["id"],hU=["id"];function pU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function xU(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pU(Object(a),!0).forEach(function(t){fU(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pU(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function fU(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gU(){return gU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gU.apply(null,arguments)}function vU(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function bU(e){var t=(0,s.useMemo)(()=>bF(e.children,eF),[e.children]),a=Rv(a=>oU(a,e.id,t));return null==a?null:s.createElement(Yz,{legendPayload:a})}var yU=s.memo(e=>{var{dataKey:t,nameKey:a,sectors:n,stroke:r,strokeWidth:i,fill:l,name:o,hide:c,tooltipType:d,id:u}=e,m={dataDefinedOnItem:n.map(e=>e.tooltipPayload),getPosition:e=>{var t;return null===(t=n[Number(e)])||void 0===t?void 0:t.tooltipPosition},settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:a,name:ob(o,t),hide:c,type:d,color:l,unit:"",graphicalItemId:u}};return s.createElement(Sz,{tooltipEntrySettings:m})}),jU=(e,t)=>e>t?"start":e<t?"end":"middle",NU=(e,t,a)=>{var{top:s,left:n,width:r,height:i}=t,l=N_(r,i),o=n+Kh(e.cx,r,r/2),c=s+Kh(e.cy,i,i/2),d=Kh(e.innerRadius,l,0),u=((e,t,a)=>Kh("function"===typeof t?t(e):t,a,.8*a))(a,e.outerRadius,l);return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:e.maxRadius||Math.sqrt(r*r+i*i)/2}},wU=(e,t)=>Bh(t-e)*Math.min(Math.abs(t-e),360);function SU(e){var{sectors:t,props:a,showLabels:n}=e,{label:r,labelLine:i,dataKey:l}=a;if(!n||!r||!t)return null;var o=kO(a),c=CO(r),d=CO(i),u="object"===typeof r&&"offsetRadius"in r&&"number"===typeof r.offsetRadius&&r.offsetRadius||20,m=t.map((e,t)=>{var a=(e.startAngle+e.endAngle)/2,n=j_(e.cx,e.cy,e.outerRadius+u,a),m=xU(xU(xU(xU({},o),e),{},{stroke:"none"},c),{},{index:t,textAnchor:jU(n.x,e.cx)},n),h=xU(xU(xU(xU({},o),e),{},{fill:"none",stroke:e.fill},d),{},{index:t,points:[j_(e.cx,e.cy,e.outerRadius,a),n],key:"line"});return s.createElement(yT,{zIndex:k_.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},s.createElement(GM,null,i&&((e,t)=>{if(s.isValidElement(e))return s.cloneElement(e,t);if("function"===typeof e)return e(t);var a=ui("recharts-pie-label-line","boolean"!==typeof e?e.className:""),{key:n}=t,r=vU(t,dU);return s.createElement(vR,gU({},r,{type:"linear",className:a}))})(i,h),((e,t,a)=>{if(s.isValidElement(e))return s.cloneElement(e,t);var n=a;if("function"===typeof e&&(n=e(t),s.isValidElement(n)))return n;var r=ui("recharts-pie-label-text",WT(e));return s.createElement(bT,gU({},t,{alignmentBaseline:"middle",className:r}),n)})(r,m,$v(e,l))))});return s.createElement(GM,{className:"recharts-pie-labels"},m)}function _U(e){var{sectors:t,props:a,showLabels:n}=e,{label:r}=a;return"object"===typeof r&&null!=r&&"position"in r?s.createElement(hF,{label:r}):s.createElement(SU,{sectors:t,props:a,showLabels:n})}function kU(e){var{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:r,shape:i,id:l}=e,o=Rv(nA),c=Rv(iA),d=Rv(lA),{onMouseEnter:u,onClick:m,onMouseLeave:h}=r,p=vU(r,uU),x=jz(u,r.dataKey,l),f=Nz(h),g=wz(m,r.dataKey,l);return null==t||0===t.length?null:s.createElement(s.Fragment,null,t.map((e,u)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==t.length)return null;var m=null==d||d===l,h=String(u)===o&&(null==c||r.dataKey===c)&&m,v=a&&h?a:o?n:null,b=xU(xU({},e),{},{stroke:e.stroke,tabIndex:-1,[xb]:u,[fb]:l});return s.createElement(GM,gU({key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(u),tabIndex:-1,className:"recharts-pie-sector"},VT(p,e,u),{onMouseEnter:x(e,u),onMouseLeave:f(e,u),onClick:g(e,u)}),s.createElement(gz,gU({option:null!==i&&void 0!==i?i:v,index:u,shapeType:"sector",isActive:h},b)))}))}function CU(e){var{showLabels:t,sectors:a,children:n}=e,r=(0,s.useMemo)(()=>t&&a?a.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[a,t]);return s.createElement(uF,{value:t?r:void 0},n)}function EU(e){var{props:t,previousSectorsRef:a,id:n}=e,{sectors:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:m,onAnimationEnd:h}=t,p=ZR(t,"recharts-pie-"),x=a.current,[f,g]=(0,s.useState)(!1),v=(0,s.useCallback)(()=>{"function"===typeof h&&h(),g(!1)},[h]),b=(0,s.useCallback)(()=>{"function"===typeof m&&m(),g(!0)},[m]);return s.createElement(CU,{showLabels:!f,sectors:r},s.createElement(XR,{animationId:p,begin:l,duration:o,isActive:i,easing:c,onAnimationStart:b,onAnimationEnd:v,key:p},e=>{var i,l=[],o=r&&r[0],c=null!==(i=null===o||void 0===o?void 0:o.startAngle)&&void 0!==i?i:0;return null===r||void 0===r||r.forEach((t,a)=>{var s=x&&x[a],n=a>0?Lh()(t,"paddingAngle",0):0;if(s){var r=Jh(s.endAngle-s.startAngle,t.endAngle-t.startAngle,e),i=xU(xU({},t),{},{startAngle:c+n,endAngle:c+r+n});l.push(i),c=i.endAngle}else{var{endAngle:o,startAngle:d}=t,u=Jh(0,o-d,e),m=xU(xU({},t),{},{startAngle:c+n,endAngle:c+u+n});l.push(m),c=m.endAngle}}),a.current=l,s.createElement(GM,null,s.createElement(kU,{sectors:l,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:n}))}),s.createElement(_U,{showLabels:!f,sectors:r,props:t}),t.children)}var AU={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:k_.area};function PU(e){var{id:t}=e,a=vU(e,mU),{hide:n,className:r,rootTabIndex:i}=e,l=(0,s.useMemo)(()=>bF(e.children,eF),[e.children]),o=Rv(e=>cU(e,t,l)),c=(0,s.useRef)(null),d=ui("recharts-pie",r);return n||null==o?(c.current=null,s.createElement(GM,{tabIndex:i,className:d})):s.createElement(yT,{zIndex:e.zIndex},s.createElement(yU,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:o,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),s.createElement(GM,{tabIndex:i,className:d},s.createElement(EU,{props:xU(xU({},a),{},{sectors:o}),previousSectorsRef:c,id:t})))}function OU(e){var t=jM(e,AU),{id:a}=t,n=vU(t,hU),r=kO(n);return s.createElement(Qz,{id:a,type:"pie"},e=>s.createElement(s.Fragment,null,s.createElement(eB,{type:"pie",id:e,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),s.createElement(bU,gU({},n,{id:e})),s.createElement(PU,gU({},n,{id:e}))))}OU.displayName="Pie";const MU="".concat("","/api");function TU(){var e,t,a,n;const r=Se(),{schoolId:i,user:l,schoolData:o}=Kr(),{t:c}=js(),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),[p,x]=(0,s.useState)(""),[f,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{const e=(new Date).getHours();x(e<12?c("good_morning")||"Good Morning":e<17?c("good_afternoon")||"Good Afternoon":c("good_evening")||"Good Evening"),i?v():h(!1)},[i,c]);const v=async()=>{try{const e=await Hr.get("".concat(MU,"/dashboard/stats?school_id=").concat(i));u(e.data),e.data.recent_activities&&g(e.data.recent_activities.slice(0,4).map(e=>({action:e.action||"Activity",name:e.user_name||"User",time:b(e.created_at),type:"student"===e.module?"student":"fee"===e.module?"fee":"attendance"===e.module?"attendance":"notice"})))}catch(e){console.error("Failed to fetch stats:",e)}finally{h(!1)}},b=e=>{if(!e)return"Just now";const t=new Date(e),a=new Date,s=Math.floor((a-t)/1e3);return s<60?"Just now":s<3600?"".concat(Math.floor(s/60)," mins ago"):s<86400?"".concat(Math.floor(s/3600)," hours ago"):"".concat(Math.floor(s/86400)," days ago")},y=d?[{name:"Present",value:(null===(e=d.attendance_today)||void 0===e?void 0:e.present)||0,color:"#10B981"},{name:"Absent",value:(null===(t=d.attendance_today)||void 0===t?void 0:t.absent)||0,color:"#EF4444"},{name:"Leave",value:(null===(a=d.attendance_today)||void 0===a?void 0:a.late)||0,color:"#F59E0B"}]:[{name:"Present",value:0,color:"#10B981"},{name:"Absent",value:0,color:"#EF4444"},{name:"Leave",value:0,color:"#F59E0B"}],j=d?[{month:"This Month",collected:d.fee_collection_month||0,pending:d.pending_fees||0}]:[];if(m)return(0,qr.jsx)("div",{className:"flex items-center justify-center h-96","data-testid":"loading-spinner",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-blue-600"})});if(!i)return(0,qr.jsxs)("div",{className:"text-center py-20","data-testid":"no-school-message",children:[(0,qr.jsx)(Fc,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h2",{className:"text-xl font-semibold text-slate-700 mb-2",children:"No School Selected"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Please create or select a school from Settings."}),(0,qr.jsxs)(Dl,{onClick:()=>r("/app/settings"),className:"mt-4 bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(wh,{className:"w-4 h-4 mr-2"})," Go to Settings"]})]});const N=[{title:"Total Students",titleHi:"\u0915\u0941\u0932 \u091b\u093e\u0924\u094d\u0930",value:(null===d||void 0===d?void 0:d.total_students)||0,icon:Lc,trend:"+12%",trendUp:!0,color:"bg-blue-600",lightBg:"bg-blue-50",textColor:"text-blue-600",path:"/app/students"},{title:"Total Staff",titleHi:"\u0915\u0941\u0932 \u0938\u094d\u091f\u093e\u092b",value:(null===d||void 0===d?void 0:d.total_staff)||0,icon:Xm,trend:"+3%",trendUp:!0,color:"bg-emerald-600",lightBg:"bg-emerald-50",textColor:"text-emerald-600",path:"/app/employee-management"},{title:"Fee Collection",titleHi:"\u092b\u0940\u0938 \u0938\u0902\u0917\u094d\u0930\u0939",value:"\u20b9".concat((((null===d||void 0===d?void 0:d.fee_collection_month)||0)/1e3).toFixed(0),"K"),icon:Sh,trend:"+8%",trendUp:!0,color:"bg-amber-500",lightBg:"bg-amber-50",textColor:"text-amber-600",path:"/app/fees"},{title:"Attendance",titleHi:"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f",value:"".concat((null===d||void 0===d||null===(n=d.attendance_today)||void 0===n?void 0:n.present)||0,"%"),icon:_h,trend:"-2%",trendUp:!1,color:"bg-purple-600",lightBg:"bg-purple-50",textColor:"text-purple-600",path:"/app/attendance"}],w=[{icon:kh,label:"New Admission",labelHi:"\u0928\u092f\u093e \u092a\u094d\u0930\u0935\u0947\u0936",path:"/app/students",color:"bg-blue-600 hover:bg-blue-700"},{icon:_h,label:"Mark Attendance",labelHi:"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902",path:"/app/attendance",color:"bg-emerald-600 hover:bg-emerald-700"},{icon:Ch,label:"Collect Fee",labelHi:"\u092b\u0940\u0938 \u091c\u092e\u093e \u0915\u0930\u0947\u0902",path:"/app/fees",color:"bg-amber-500 hover:bg-amber-600"},{icon:th,label:"Ask Tino AI",labelHi:"Tino AI \u0938\u0947 \u092a\u0942\u091b\u0947\u0902",path:"/app/tino-ai",color:"bg-purple-600 hover:bg-purple-700"}],S=[{icon:Lc,label:"Students",labelHi:"\u091b\u093e\u0924\u094d\u0930",path:"/app/students",color:"text-blue-600",bg:"bg-blue-50"},{icon:Xm,label:"Staff",labelHi:"\u0938\u094d\u091f\u093e\u092b",path:"/app/employee-management",color:"text-emerald-600",bg:"bg-emerald-50"},{icon:_h,label:"Attendance",labelHi:"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f",path:"/app/attendance",color:"text-green-600",bg:"bg-green-50"},{icon:Zm,label:"Fees",labelHi:"\u092b\u0940\u0938",path:"/app/fees",color:"text-amber-600",bg:"bg-amber-50"},{icon:Eh,label:"Exams",labelHi:"\u092a\u0930\u0940\u0915\u094d\u0937\u093e",path:"/app/exams",color:"text-red-600",bg:"bg-red-50"},{icon:sh,label:"Library",labelHi:"\u092a\u0941\u0938\u094d\u0924\u0915\u093e\u0932\u092f",path:"/app/library",color:"text-orange-600",bg:"bg-orange-50"},{icon:Ah,label:"Timetable",labelHi:"\u0938\u092e\u092f \u0938\u093e\u0930\u0923\u0940",path:"/app/timetable",color:"text-purple-600",bg:"bg-purple-50"},{icon:nh,label:"Transport",labelHi:"\u092a\u0930\u093f\u0935\u0939\u0928",path:"/app/transport",color:"text-teal-600",bg:"bg-teal-50"},{icon:Rc,label:"Visitor Pass",labelHi:"\u0935\u093f\u091c\u093f\u091f\u0930 \u092a\u093e\u0938",path:"/app/visitor-pass",color:"text-slate-600",bg:"bg-slate-100"},{icon:Ph,label:"Gallery",labelHi:"\u0917\u0948\u0932\u0930\u0940",path:"/app/gallery",color:"text-pink-600",bg:"bg-pink-50"},{icon:Oh,label:"Notices",labelHi:"\u0938\u0942\u091a\u0928\u093e\u090f\u0902",path:"/app/notices",color:"text-indigo-600",bg:"bg-indigo-50"},{icon:hh,label:"AI Paper",labelHi:"AI \u092a\u0947\u092a\u0930",path:"/app/ai-paper",color:"text-cyan-600",bg:"bg-cyan-50"}];return(0,qr.jsxs)("div",{className:"space-y-6 pb-10","data-testid":"dashboard-page",children:[(0,qr.jsx)("div",{className:"bg-white rounded-lg border border-slate-200 p-6 shadow-sm",children:(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-slate-500 text-sm font-medium",children:[p,","]}),(0,qr.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 mt-1",children:(null===o||void 0===o?void 0:o.name)||"Schooltino Dashboard"}),(0,qr.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"AI-Powered School Management System"})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)(Dl,{onClick:()=>r("/app/tino-ai"),variant:"outline",className:"border-slate-200 text-slate-700 hover:bg-slate-50","data-testid":"ask-tino-btn",children:[(0,qr.jsx)(th,{className:"w-4 h-4 mr-2"})," Ask Tino AI"]}),(0,qr.jsxs)(Dl,{onClick:()=>r("/app/students"),className:"bg-blue-600 hover:bg-blue-700 text-white","data-testid":"new-admission-btn",children:[(0,qr.jsx)(kh,{className:"w-4 h-4 mr-2"})," New Admission"]})]})]})}),(0,qr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map((e,t)=>(0,qr.jsxs)("div",{onClick:()=>r(e.path),className:"bg-white rounded-lg border border-slate-200 p-5 cursor-pointer hover:shadow-md hover:border-blue-200 transition-all group","data-testid":"stat-card-".concat(t),children:[(0,qr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,qr.jsx)("div",{className:"p-3 rounded-lg ".concat(e.lightBg),children:(0,qr.jsx)(e.icon,{className:"w-5 h-5 ".concat(e.textColor)})}),(0,qr.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium ".concat(e.trendUp?"text-emerald-600":"text-red-500"),children:[e.trendUp?(0,qr.jsx)(Mh,{className:"w-3 h-3"}):(0,qr.jsx)(Th,{className:"w-3 h-3"}),e.trend]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-800",children:e.value}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.title}),(0,qr.jsx)("p",{className:"text-xs text-slate-400",children:e.titleHi})]}),(0,qr.jsx)("div",{className:"mt-3 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:(0,qr.jsx)("div",{className:"h-full ".concat(e.color," rounded-full transition-all"),style:{width:"".concat(Math.min(100,"number"===typeof e.value?e.value:75),"%")}})})]},t))}),(0,qr.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6 shadow-sm",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between mb-5",children:(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-800",children:"Quick Actions"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"\u0924\u094d\u0935\u0930\u093f\u0924 \u0915\u093e\u0930\u094d\u092f"})]})}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:w.map((e,t)=>(0,qr.jsxs)("button",{onClick:()=>r(e.path),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-white ".concat(e.color," transition-all shadow-sm hover:shadow-md"),"data-testid":"quick-action-".concat(t),children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-sm font-medium",children:e.label})]},t))})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,qr.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6 shadow-sm",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800",children:"Fee Collection Overview"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"\u092b\u0940\u0938 \u0938\u0902\u0917\u094d\u0930\u0939 \u0935\u093f\u0935\u0930\u0923"})]}),(0,qr.jsxs)("button",{onClick:()=>r("/app/fees"),className:"text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:["View All ",(0,qr.jsx)(qc,{className:"w-3 h-3"})]})]}),(0,qr.jsx)("div",{className:"h-64",children:(0,qr.jsx)(vp,{width:"100%",height:"100%",children:(0,qr.jsxs)(kM,{data:j,children:[(0,qr.jsx)(jD,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,qr.jsx)(zD,{dataKey:"month",tick:{fontSize:12},stroke:"#94a3b8"}),(0,qr.jsx)(XD,{tick:{fontSize:12},stroke:"#94a3b8"}),(0,qr.jsx)(ZL,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,qr.jsx)(OB,{dataKey:"collected",fill:"#2563EB",name:"Collected",radius:[4,4,0,0]}),(0,qr.jsx)(OB,{dataKey:"pending",fill:"#F59E0B",name:"Pending",radius:[4,4,0,0]})]})})})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6 shadow-sm",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between mb-5",children:(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800",children:"All Modules"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"\u0938\u092d\u0940 \u092e\u0949\u0921\u094d\u092f\u0942\u0932"})]})}),(0,qr.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:S.map((e,t)=>(0,qr.jsxs)("button",{onClick:()=>r(e.path),className:"flex flex-col items-center justify-center p-4 rounded-lg border border-slate-100 hover:border-blue-200 hover:shadow-sm transition-all group","data-testid":"module-".concat(t),children:[(0,qr.jsx)("div",{className:"p-2.5 rounded-lg ".concat(e.bg," mb-2 group-hover:scale-110 transition-transform"),children:(0,qr.jsx)(e.icon,{className:"w-5 h-5 ".concat(e.color)})}),(0,qr.jsx)("span",{className:"text-xs font-medium text-slate-700",children:e.label}),(0,qr.jsx)("span",{className:"text-[10px] text-slate-400",children:e.labelHi})]},t))})]})]}),(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-5 shadow-sm",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800",children:"Today's Attendance"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"\u0906\u091c \u0915\u0940 \u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f"})]}),(0,qr.jsx)("span",{className:"text-xs text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:(new Date).toLocaleDateString("hi-IN")})]}),(0,qr.jsx)("div",{className:"h-44",children:(0,qr.jsx)(vp,{width:"100%",height:"100%",children:(0,qr.jsxs)(HB,{children:[(0,qr.jsx)(OU,{data:y,cx:"50%",cy:"50%",innerRadius:50,outerRadius:70,paddingAngle:3,dataKey:"value",children:y.map((e,t)=>(0,qr.jsx)(eF,{fill:e.color},"cell-".concat(t)))}),(0,qr.jsx)(ZL,{})]})})}),(0,qr.jsx)("div",{className:"flex justify-center gap-4 mt-3",children:y.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,qr.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:e.color}}),(0,qr.jsxs)("span",{className:"text-xs text-slate-600",children:[e.name,": ",e.value,"%"]})]},t))})]}),(0,qr.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg p-5 text-white shadow-md",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,qr.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,qr.jsx)(th,{className:"w-6 h-6"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold",children:"Tino AI"}),(0,qr.jsx)("p",{className:"text-xs text-blue-100",children:"AI Assistant"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-blue-100 mb-4",children:"Ask anything about your school. Get instant AI-powered answers."}),(0,qr.jsx)(Dl,{onClick:()=>r("/app/tino-ai"),className:"w-full bg-white text-blue-600 hover:bg-blue-50",children:"Start Chat"})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-5 shadow-sm",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800",children:"Recent Activity"}),(0,qr.jsx)("span",{className:"text-xs text-slate-400",children:"\u0935\u093e\u0938\u094d\u0924\u0935\u093f\u0915 \u0921\u0947\u091f\u093e"})]}),(0,qr.jsx)("div",{className:"space-y-3",children:f.length>0?f.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-2.5 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100",children:[(0,qr.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 ".concat("student"===e.type?"bg-blue-100 text-blue-600":"fee"===e.type?"bg-amber-100 text-amber-600":"attendance"===e.type?"bg-emerald-100 text-emerald-600":"bg-purple-100 text-purple-600"),children:"student"===e.type?(0,qr.jsx)(kh,{className:"w-4 h-4"}):"fee"===e.type?(0,qr.jsx)(Sh,{className:"w-4 h-4"}):"attendance"===e.type?(0,qr.jsx)(_h,{className:"w-4 h-4"}):(0,qr.jsx)(Oh,{className:"w-4 h-4"})}),(0,qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-slate-700 truncate",children:e.action}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.name})]}),(0,qr.jsx)("span",{className:"text-xs text-slate-400 flex-shrink-0",children:e.time})]},t)):(0,qr.jsxs)("div",{className:"text-center py-6 text-slate-400",children:[(0,qr.jsx)(Oh,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{className:"text-sm",children:"\u0915\u094b\u0908 \u0939\u093e\u0932\u093f\u092f\u093e \u0917\u0924\u093f\u0935\u093f\u0927\u093f \u0928\u0939\u0940\u0902"}),(0,qr.jsx)("p",{className:"text-xs",children:"No recent activity"})]})})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-5 shadow-sm",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800",children:"Upcoming Events"}),(0,qr.jsx)(eh,{className:"w-4 h-4 text-slate-400"})]}),(0,qr.jsx)("div",{className:"space-y-3",children:[{event:"Parent-Teacher Meeting",date:"Jan 28",color:"border-l-blue-500"},{event:"Republic Day",date:"Jan 26",color:"border-l-amber-500"},{event:"Annual Sports Day",date:"Feb 5",color:"border-l-emerald-500"}].map((e,t)=>(0,qr.jsxs)("div",{className:"p-3 rounded-lg bg-slate-50 border-l-4 ".concat(e.color),children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-slate-700",children:e.event}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.date})]},t))})]})]})]})]})}const DU=["className"],IU=["className"],RU=["className"],LU=["className"],FU=["className"],zU=["className"],BU=["className"],UU=["className"],HU=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,DU);return(0,qr.jsx)("div",{className:"relative w-full overflow-auto",children:(0,qr.jsx)("table",u({ref:t,className:Ol("w-full caption-bottom text-sm",a)},s))})});HU.displayName="Table";const qU=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,IU);return(0,qr.jsx)("thead",u({ref:t,className:Ol("[&_tr]:border-b",a)},s))});qU.displayName="TableHeader";const VU=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,RU);return(0,qr.jsx)("tbody",u({ref:t,className:Ol("[&_tr:last-child]:border-0",a)},s))});VU.displayName="TableBody";s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,LU);return(0,qr.jsx)("tfoot",u({ref:t,className:Ol("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a)},s))}).displayName="TableFooter";const WU=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,FU);return(0,qr.jsx)("tr",u({ref:t,className:Ol("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a)},s))});WU.displayName="TableRow";const GU=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,zU);return(0,qr.jsx)("th",u({ref:t,className:Ol("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a)},s))});GU.displayName="TableHead";const KU=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,BU);return(0,qr.jsx)("td",u({ref:t,className:Ol("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a)},s))});KU.displayName="TableCell";s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,UU);return(0,qr.jsx)("caption",u({ref:t,className:Ol("mt-4 text-sm text-muted-foreground",a)},s))}).displayName="TableCaption";const YU=Dc("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),JU=Dc("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$U=Dc("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),QU=Dc("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),XU=Dc("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ZU=Dc("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),eH=Dc("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),tH=Dc("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),aH=Dc("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),sH=Dc("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),nH=Dc("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),rH=Dc("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),iH=Dc("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lH=Dc("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),oH=Dc("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),cH=["top","right","bottom","left"],dH=Math.min,uH=Math.max,mH=Math.round,hH=Math.floor,pH=e=>({x:e,y:e}),xH={left:"right",right:"left",bottom:"top",top:"bottom"},fH={start:"end",end:"start"};function gH(e,t,a){return uH(e,dH(t,a))}function vH(e,t){return"function"===typeof e?e(t):e}function bH(e){return e.split("-")[0]}function yH(e){return e.split("-")[1]}function jH(e){return"x"===e?"y":"x"}function NH(e){return"y"===e?"height":"width"}const wH=new Set(["top","bottom"]);function SH(e){return wH.has(bH(e))?"y":"x"}function _H(e){return jH(SH(e))}function kH(e){return e.replace(/start|end/g,e=>fH[e])}const CH=["left","right"],EH=["right","left"],AH=["top","bottom"],PH=["bottom","top"];function OH(e,t,a,s){const n=yH(e);let r=function(e,t,a){switch(e){case"top":case"bottom":return a?t?EH:CH:t?CH:EH;case"left":case"right":return t?AH:PH;default:return[]}}(bH(e),"start"===a,s);return n&&(r=r.map(e=>e+"-"+n),t&&(r=r.concat(r.map(kH)))),r}function MH(e){return e.replace(/left|right|bottom|top/g,e=>xH[e])}function TH(e){return"number"!==typeof e?function(e){return u({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function DH(e){const{x:t,y:a,width:s,height:n}=e;return{width:s,height:n,top:a,left:t,right:t+s,bottom:a+n,x:t,y:a}}const IH=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],RH=["strategy"],LH=["mainAxis","crossAxis","limiter"],FH=["apply"];function zH(e,t,a){let{reference:s,floating:n}=e;const r=SH(t),i=_H(t),l=NH(i),o=bH(t),c="y"===r,d=s.x+s.width/2-n.width/2,u=s.y+s.height/2-n.height/2,m=s[l]/2-n[l]/2;let h;switch(o){case"top":h={x:d,y:s.y-n.height};break;case"bottom":h={x:d,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:u};break;case"left":h={x:s.x-n.width,y:u};break;default:h={x:s.x,y:s.y}}switch(yH(t)){case"start":h[i]-=m*(a&&c?-1:1);break;case"end":h[i]+=m*(a&&c?-1:1)}return h}async function BH(e,t){var a;void 0===t&&(t={});const{x:s,y:n,platform:r,rects:i,elements:l,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=vH(t,e),p=TH(h),x=l[m?"floating"===u?"reference":"floating":u],f=DH(await r.getClippingRect({element:null==(a=await(null==r.isElement?void 0:r.isElement(x)))||a?x:x.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:o})),g="floating"===u?{x:s,y:n,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(l.floating)),b=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},y=DH(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:v,strategy:o}):g);return{top:(f.top-y.top+p.top)/b.y,bottom:(y.bottom-f.bottom+p.bottom)/b.y,left:(f.left-y.left+p.left)/b.x,right:(y.right-f.right+p.right)/b.x}}function UH(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function HH(e){return cH.some(t=>e[t]>=0)}const qH=new Set(["left","top"]);function VH(){return"undefined"!==typeof window}function WH(e){return YH(e)?(e.nodeName||"").toLowerCase():"#document"}function GH(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function KH(e){var t;return null==(t=(YH(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function YH(e){return!!VH()&&(e instanceof Node||e instanceof GH(e).Node)}function JH(e){return!!VH()&&(e instanceof Element||e instanceof GH(e).Element)}function $H(e){return!!VH()&&(e instanceof HTMLElement||e instanceof GH(e).HTMLElement)}function QH(e){return!(!VH()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof GH(e).ShadowRoot)}const XH=new Set(["inline","contents"]);function ZH(e){const{overflow:t,overflowX:a,overflowY:s,display:n}=uq(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+a)&&!XH.has(n)}const eq=new Set(["table","td","th"]);function tq(e){return eq.has(WH(e))}const aq=[":popover-open",":modal"];function sq(e){return aq.some(t=>{try{return e.matches(t)}catch(a){return!1}})}const nq=["transform","translate","scale","rotate","perspective"],rq=["transform","translate","scale","rotate","perspective","filter"],iq=["paint","layout","strict","content"];function lq(e){const t=oq(),a=JH(e)?uq(e):e;return nq.some(e=>!!a[e]&&"none"!==a[e])||!!a.containerType&&"normal"!==a.containerType||!t&&!!a.backdropFilter&&"none"!==a.backdropFilter||!t&&!!a.filter&&"none"!==a.filter||rq.some(e=>(a.willChange||"").includes(e))||iq.some(e=>(a.contain||"").includes(e))}function oq(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const cq=new Set(["html","body","#document"]);function dq(e){return cq.has(WH(e))}function uq(e){return GH(e).getComputedStyle(e)}function mq(e){return JH(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hq(e){if("html"===WH(e))return e;const t=e.assignedSlot||e.parentNode||QH(e)&&e.host||KH(e);return QH(t)?t.host:t}function pq(e){const t=hq(e);return dq(t)?e.ownerDocument?e.ownerDocument.body:e.body:$H(t)&&ZH(t)?t:pq(t)}function xq(e,t,a){var s;void 0===t&&(t=[]),void 0===a&&(a=!0);const n=pq(e),r=n===(null==(s=e.ownerDocument)?void 0:s.body),i=GH(n);if(r){const e=fq(i);return t.concat(i,i.visualViewport||[],ZH(n)?n:[],e&&a?xq(e):[])}return t.concat(n,xq(n,[],a))}function fq(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function gq(e){const t=uq(e);let a=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const n=$H(e),r=n?e.offsetWidth:a,i=n?e.offsetHeight:s,l=mH(a)!==r||mH(s)!==i;return l&&(a=r,s=i),{width:a,height:s,$:l}}function vq(e){return JH(e)?e:e.contextElement}function bq(e){const t=vq(e);if(!$H(t))return pH(1);const a=t.getBoundingClientRect(),{width:s,height:n,$:r}=gq(t);let i=(r?mH(a.width):a.width)/s,l=(r?mH(a.height):a.height)/n;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}const yq=pH(0);function jq(e){const t=GH(e);return oq()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:yq}function Nq(e,t,a,s){void 0===t&&(t=!1),void 0===a&&(a=!1);const n=e.getBoundingClientRect(),r=vq(e);let i=pH(1);t&&(s?JH(s)&&(i=bq(s)):i=bq(e));const l=function(e,t,a){return void 0===t&&(t=!1),!(!a||t&&a!==GH(e))&&t}(r,a,s)?jq(r):pH(0);let o=(n.left+l.x)/i.x,c=(n.top+l.y)/i.y,d=n.width/i.x,u=n.height/i.y;if(r){const e=GH(r),t=s&&JH(s)?GH(s):s;let a=e,n=fq(a);for(;n&&s&&t!==a;){const e=bq(n),t=n.getBoundingClientRect(),s=uq(n),r=t.left+(n.clientLeft+parseFloat(s.paddingLeft))*e.x,i=t.top+(n.clientTop+parseFloat(s.paddingTop))*e.y;o*=e.x,c*=e.y,d*=e.x,u*=e.y,o+=r,c+=i,a=GH(n),n=fq(a)}}return DH({width:d,height:u,x:o,y:c})}function wq(e,t){const a=mq(e).scrollLeft;return t?t.left+a:Nq(KH(e)).left+a}function Sq(e,t){const a=e.getBoundingClientRect();return{x:a.left+t.scrollLeft-wq(e,a),y:a.top+t.scrollTop}}const _q=new Set(["absolute","fixed"]);function kq(e,t,a){let s;if("viewport"===t)s=function(e,t){const a=GH(e),s=KH(e),n=a.visualViewport;let r=s.clientWidth,i=s.clientHeight,l=0,o=0;if(n){r=n.width,i=n.height;const e=oq();(!e||e&&"fixed"===t)&&(l=n.offsetLeft,o=n.offsetTop)}const c=wq(s);if(c<=0){const e=s.ownerDocument,t=e.body,a=getComputedStyle(t),n="CSS1Compat"===e.compatMode&&parseFloat(a.marginLeft)+parseFloat(a.marginRight)||0,i=Math.abs(s.clientWidth-t.clientWidth-n);i<=25&&(r-=i)}else c<=25&&(r+=c);return{width:r,height:i,x:l,y:o}}(e,a);else if("document"===t)s=function(e){const t=KH(e),a=mq(e),s=e.ownerDocument.body,n=uH(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=uH(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-a.scrollLeft+wq(e);const l=-a.scrollTop;return"rtl"===uq(s).direction&&(i+=uH(t.clientWidth,s.clientWidth)-n),{width:n,height:r,x:i,y:l}}(KH(e));else if(JH(t))s=function(e,t){const a=Nq(e,!0,"fixed"===t),s=a.top+e.clientTop,n=a.left+e.clientLeft,r=$H(e)?bq(e):pH(1);return{width:e.clientWidth*r.x,height:e.clientHeight*r.y,x:n*r.x,y:s*r.y}}(t,a);else{const a=jq(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return DH(s)}function Cq(e,t){const a=hq(e);return!(a===t||!JH(a)||dq(a))&&("fixed"===uq(a).position||Cq(a,t))}function Eq(e,t,a){const s=$H(t),n=KH(t),r="fixed"===a,i=Nq(e,!0,r,t);let l={scrollLeft:0,scrollTop:0};const o=pH(0);function c(){o.x=wq(n)}if(s||!s&&!r)if(("body"!==WH(t)||ZH(n))&&(l=mq(t)),s){const e=Nq(t,!0,r,t);o.x=e.x+t.clientLeft,o.y=e.y+t.clientTop}else n&&c();r&&!s&&n&&c();const d=!n||s||r?pH(0):Sq(n,l);return{x:i.left+l.scrollLeft-o.x-d.x,y:i.top+l.scrollTop-o.y-d.y,width:i.width,height:i.height}}function Aq(e){return"static"===uq(e).position}function Pq(e,t){if(!$H(e)||"fixed"===uq(e).position)return null;if(t)return t(e);let a=e.offsetParent;return KH(e)===a&&(a=a.ownerDocument.body),a}function Oq(e,t){const a=GH(e);if(sq(e))return a;if(!$H(e)){let t=hq(e);for(;t&&!dq(t);){if(JH(t)&&!Aq(t))return t;t=hq(t)}return a}let s=Pq(e,t);for(;s&&tq(s)&&Aq(s);)s=Pq(s,t);return s&&dq(s)&&Aq(s)&&!lq(s)?a:s||function(e){let t=hq(e);for(;$H(t)&&!dq(t);){if(lq(t))return t;if(sq(t))return null;t=hq(t)}return null}(e)||a}const Mq={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:a,offsetParent:s,strategy:n}=e;const r="fixed"===n,i=KH(s),l=!!t&&sq(t.floating);if(s===i||l&&r)return a;let o={scrollLeft:0,scrollTop:0},c=pH(1);const d=pH(0),u=$H(s);if((u||!u&&!r)&&(("body"!==WH(s)||ZH(i))&&(o=mq(s)),$H(s))){const e=Nq(s);c=bq(s),d.x=e.x+s.clientLeft,d.y=e.y+s.clientTop}const m=!i||u||r?pH(0):Sq(i,o);return{width:a.width*c.x,height:a.height*c.y,x:a.x*c.x-o.scrollLeft*c.x+d.x+m.x,y:a.y*c.y-o.scrollTop*c.y+d.y+m.y}},getDocumentElement:KH,getClippingRect:function(e){let{element:t,boundary:a,rootBoundary:s,strategy:n}=e;const r="clippingAncestors"===a?sq(t)?[]:function(e,t){const a=t.get(e);if(a)return a;let s=xq(e,[],!1).filter(e=>JH(e)&&"body"!==WH(e)),n=null;const r="fixed"===uq(e).position;let i=r?hq(e):e;for(;JH(i)&&!dq(i);){const t=uq(i),a=lq(i);a||"fixed"!==t.position||(n=null),(r?!a&&!n:!a&&"static"===t.position&&n&&_q.has(n.position)||ZH(i)&&!a&&Cq(e,i))?s=s.filter(e=>e!==i):n=t,i=hq(i)}return t.set(e,s),s}(t,this._c):[].concat(a),i=[...r,s],l=i[0],o=i.reduce((e,a)=>{const s=kq(t,a,n);return e.top=uH(s.top,e.top),e.right=dH(s.right,e.right),e.bottom=dH(s.bottom,e.bottom),e.left=uH(s.left,e.left),e},kq(t,l,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Oq,getElementRects:async function(e){const t=this.getOffsetParent||Oq,a=this.getDimensions,s=await a(e.floating);return{reference:Eq(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:a}=gq(e);return{width:t,height:a}},getScale:bq,isElement:JH,isRTL:function(e){return"rtl"===uq(e).direction}};function Tq(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Dq(e,t,a,s){void 0===s&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:i="function"===typeof ResizeObserver,layoutShift:l="function"===typeof IntersectionObserver,animationFrame:o=!1}=s,c=vq(e),d=n||r?[...c?xq(c):[],...xq(t)]:[];d.forEach(e=>{n&&e.addEventListener("scroll",a,{passive:!0}),r&&e.addEventListener("resize",a)});const m=c&&l?function(e,t){let a,s=null;const n=KH(e);function r(){var e;clearTimeout(a),null==(e=s)||e.disconnect(),s=null}return function i(l,o){void 0===l&&(l=!1),void 0===o&&(o=1),r();const c=e.getBoundingClientRect(),{left:d,top:m,width:h,height:p}=c;if(l||t(),!h||!p)return;const x={rootMargin:-hH(m)+"px "+-hH(n.clientWidth-(d+h))+"px "+-hH(n.clientHeight-(m+p))+"px "+-hH(d)+"px",threshold:uH(0,dH(1,o))||1};let f=!0;function g(t){const s=t[0].intersectionRatio;if(s!==o){if(!f)return i();s?i(!1,s):a=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==s||Tq(c,e.getBoundingClientRect())||i(),f=!1}try{s=new IntersectionObserver(g,u(u({},x),{},{root:n.ownerDocument}))}catch(v){s=new IntersectionObserver(g,x)}s.observe(e)}(!0),r}(c,a):null;let h,p=-1,x=null;i&&(x=new ResizeObserver(e=>{let[s]=e;s&&s.target===c&&x&&(x.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=x)||e.observe(t)})),a()}),c&&!o&&x.observe(c),x.observe(t));let f=o?Nq(e):null;return o&&function t(){const s=Nq(e);f&&!Tq(f,s)&&a();f=s,h=requestAnimationFrame(t)}(),a(),()=>{var e;d.forEach(e=>{n&&e.removeEventListener("scroll",a),r&&e.removeEventListener("resize",a)}),null==m||m(),null==(e=x)||e.disconnect(),x=null,o&&cancelAnimationFrame(h)}}const Iq=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var a,s;const{x:n,y:r,placement:i,middlewareData:l}=t,o=await async function(e,t){const{placement:a,platform:s,elements:n}=e,r=await(null==s.isRTL?void 0:s.isRTL(n.floating)),i=bH(a),l=yH(a),o="y"===SH(a),c=qH.has(i)?-1:1,d=r&&o?-1:1,u=vH(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:p}="number"===typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&"number"===typeof p&&(h="end"===l?-1*p:p),o?{x:h*d,y:m*c}:{x:m*c,y:h*d}}(t,e);return i===(null==(a=l.offset)?void 0:a.placement)&&null!=(s=l.arrow)&&s.alignmentOffset?{}:{x:n+o.x,y:r+o.y,data:u(u({},o),{},{placement:i})}}}},Rq=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:s,placement:n,platform:r}=t,l=vH(e,t),{mainAxis:o=!0,crossAxis:c=!1,limiter:d={fn:e=>{let{x:t,y:a}=e;return{x:t,y:a}}}}=l,m=i(l,LH),h={x:a,y:s},p=await r.detectOverflow(t,m),x=SH(bH(n)),f=jH(x);let g=h[f],v=h[x];if(o){const e="y"===f?"bottom":"right";g=gH(g+p["y"===f?"top":"left"],g,g-p[e])}if(c){const e="y"===x?"bottom":"right";v=gH(v+p["y"===x?"top":"left"],v,v-p[e])}const b=d.fn(u(u({},t),{},{[f]:g,[x]:v}));return u(u({},b),{},{data:{x:b.x-a,y:b.y-s,enabled:{[f]:o,[x]:c}}})}}},Lq=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var a,s;const{placement:n,middlewareData:r,rects:l,initialPlacement:o,platform:c,elements:d}=t,u=vH(e,t),{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0}=u,v=i(u,IH);if(null!=(a=r.arrow)&&a.alignmentOffset)return{};const b=bH(n),y=SH(o),j=bH(o)===o,N=await(null==c.isRTL?void 0:c.isRTL(d.floating)),w=p||(j||!g?[MH(o)]:function(e){const t=MH(e);return[kH(e),t,kH(t)]}(o)),S="none"!==f;!p&&S&&w.push(...OH(o,g,f,N));const _=[o,...w],k=await c.detectOverflow(t,v),C=[];let E=(null==(s=r.flip)?void 0:s.overflows)||[];if(m&&C.push(k[b]),h){const e=function(e,t,a){void 0===a&&(a=!1);const s=yH(e),n=_H(e),r=NH(n);let i="x"===n?s===(a?"end":"start")?"right":"left":"start"===s?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=MH(i)),[i,MH(i)]}(n,l,N);C.push(k[e[0]],k[e[1]])}if(E=[...E,{placement:n,overflows:C}],!C.every(e=>e<=0)){var A,P;const e=((null==(A=r.flip)?void 0:A.index)||0)+1,t=_[e];if(t){if(!("alignment"===h&&y!==SH(t))||E.every(e=>SH(e.placement)!==y||e.overflows[0]>0))return{data:{index:e,overflows:E},reset:{placement:t}}}let a=null==(P=E.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:P.placement;if(!a)switch(x){case"bestFit":{var O;const e=null==(O=E.filter(e=>{if(S){const t=SH(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:O[0];e&&(a=e);break}case"initialPlacement":a=o}if(n!==a)return{reset:{placement:a}}}return{}}}},Fq=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var a,s;const{placement:n,rects:r,platform:l,elements:o}=t,c=vH(e,t),{apply:d=()=>{}}=c,m=i(c,FH),h=await l.detectOverflow(t,m),p=bH(n),x=yH(n),f="y"===SH(n),{width:g,height:v}=r.floating;let b,y;"top"===p||"bottom"===p?(b=p,y=x===(await(null==l.isRTL?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(y=p,b="end"===x?"top":"bottom");const j=v-h.top-h.bottom,N=g-h.left-h.right,w=dH(v-h[b],j),S=dH(g-h[y],N),_=!t.middlewareData.shift;let k=w,C=S;if(null!=(a=t.middlewareData.shift)&&a.enabled.x&&(C=N),null!=(s=t.middlewareData.shift)&&s.enabled.y&&(k=j),_&&!x){const e=uH(h.left,0),t=uH(h.right,0),a=uH(h.top,0),s=uH(h.bottom,0);f?C=g-2*(0!==e||0!==t?e+t:uH(h.left,h.right)):k=v-2*(0!==a||0!==s?a+s:uH(h.top,h.bottom))}await d(u(u({},t),{},{availableWidth:C,availableHeight:k}));const E=await l.getDimensions(o.floating);return g!==E.width||v!==E.height?{reset:{rects:!0}}:{}}}},zq=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a,platform:s}=t,n=vH(e,t),{strategy:r="referenceHidden"}=n,l=i(n,RH);switch(r){case"referenceHidden":{const e=UH(await s.detectOverflow(t,u(u({},l),{},{elementContext:"reference"})),a.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:HH(e)}}}case"escaped":{const e=UH(await s.detectOverflow(t,u(u({},l),{},{altBoundary:!0})),a.floating);return{data:{escapedOffsets:e,escaped:HH(e)}}}default:return{}}}}},Bq=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:s,placement:n,rects:r,platform:i,elements:l,middlewareData:o}=t,{element:c,padding:d=0}=vH(e,t)||{};if(null==c)return{};const m=TH(d),h={x:a,y:s},p=_H(n),x=NH(p),f=await i.getDimensions(c),g="y"===p,v=g?"top":"left",b=g?"bottom":"right",y=g?"clientHeight":"clientWidth",j=r.reference[x]+r.reference[p]-h[p]-r.floating[x],N=h[p]-r.reference[p],w=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let S=w?w[y]:0;S&&await(null==i.isElement?void 0:i.isElement(w))||(S=l.floating[y]||r.floating[x]);const _=j/2-N/2,k=S/2-f[x]/2-1,C=dH(m[v],k),E=dH(m[b],k),A=C,P=S-f[x]-E,O=S/2-f[x]/2+_,M=gH(A,O,P),T=!o.arrow&&null!=yH(n)&&O!==M&&r.reference[x]/2-(O<A?C:E)-f[x]/2<0,D=T?O<A?O-A:O-P:0;return{[p]:h[p]+D,data:u({[p]:M,centerOffset:O-M-D},T&&{alignmentOffset:D}),reset:T}}}),Uq=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:a,y:s,placement:n,rects:r,middlewareData:i}=t,{offset:l=0,mainAxis:o=!0,crossAxis:c=!0}=vH(e,t),d={x:a,y:s},m=SH(n),h=jH(m);let p=d[h],x=d[m];const f=vH(l,t),g="number"===typeof f?{mainAxis:f,crossAxis:0}:u({mainAxis:0,crossAxis:0},f);if(o){const e="y"===h?"height":"width",t=r.reference[h]-r.floating[e]+g.mainAxis,a=r.reference[h]+r.reference[e]-g.mainAxis;p<t?p=t:p>a&&(p=a)}if(c){var v,b;const e="y"===h?"width":"height",t=qH.has(bH(n)),a=r.reference[m]-r.floating[e]+(t&&(null==(v=i.offset)?void 0:v[m])||0)+(t?0:g.crossAxis),s=r.reference[m]+r.reference[e]+(t?0:(null==(b=i.offset)?void 0:b[m])||0)-(t?g.crossAxis:0);x<a?x=a:x>s&&(x=s)}return{[h]:p,[m]:x}}}},Hq=(e,t,a)=>{const s=new Map,n=u({platform:Mq},a),r=u(u({},n.platform),{},{_c:s});return(async(e,t,a)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:i}=a,l=r.filter(Boolean),o=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:d,y:m}=zH(c,s,o),h=s,p={},x=0;for(let g=0;g<l.length;g++){var f;const{name:a,fn:r}=l[g],{x:v,y:b,data:y,reset:j}=await r({x:d,y:m,initialPlacement:s,placement:h,strategy:n,middlewareData:p,rects:c,platform:u(u({},i),{},{detectOverflow:null!=(f=i.detectOverflow)?f:BH}),elements:{reference:e,floating:t}});d=null!=v?v:d,m=null!=b?b:m,p=u(u({},p),{},{[a]:u(u({},p[a]),y)}),j&&x<=50&&(x++,"object"===typeof j&&(j.placement&&(h=j.placement),j.rects&&(c=!0===j.rects?await i.getElementRects({reference:e,floating:t,strategy:n}):j.rects),({x:d,y:m}=zH(c,h,o))),g=-1)}return{x:d,y:m,placement:h,strategy:n,middlewareData:p}})(e,t,u(u({},n),{},{platform:r}))};var qq="undefined"!==typeof document?s.useLayoutEffect:function(){};function Vq(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let a,s,n;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(s=a;0!==s--;)if(!Vq(e[s],t[s]))return!1;return!0}if(n=Object.keys(e),a=n.length,a!==Object.keys(t).length)return!1;for(s=a;0!==s--;)if(!{}.hasOwnProperty.call(t,n[s]))return!1;for(s=a;0!==s--;){const a=n[s];if(("_owner"!==a||!e.$$typeof)&&!Vq(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Wq(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Gq(e,t){const a=Wq(e);return Math.round(t*a)/a}function Kq(e){const t=s.useRef(e);return qq(()=>{t.current=e}),t}const Yq=(e,t)=>u(u({},Iq(e)),{},{options:[e,t]}),Jq=(e,t)=>u(u({},Rq(e)),{},{options:[e,t]}),$q=(e,t)=>u(u({},Uq(e)),{},{options:[e,t]}),Qq=(e,t)=>u(u({},Lq(e)),{},{options:[e,t]}),Xq=(e,t)=>u(u({},Fq(e)),{},{options:[e,t]}),Zq=(e,t)=>u(u({},zq(e)),{},{options:[e,t]}),eV=(e,t)=>u(u({},(e=>({name:"arrow",options:e,fn(t){const{element:a,padding:s}="function"===typeof e?e(t):e;return a&&function(e){return{}.hasOwnProperty.call(e,"current")}(a)?null!=a.current?Bq({element:a.current,padding:s}).fn(t):{}:a?Bq({element:a,padding:s}).fn(t):{}}}))(e)),{},{options:[e,t]}),tV=["children","width","height"];var aV=s.forwardRef((e,t)=>{const{children:a,width:s=10,height:n=5}=e,r=i(e,tV);return(0,qr.jsx)(wo.svg,u(u({},r),{},{ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?a:(0,qr.jsx)("polygon",{points:"0,0 30,0 15,10"})}))});aV.displayName="Arrow";var sV=aV;function nV(e){const[t,a]=s.useState(void 0);return mo(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const s=t[0];let n,r;if("borderBoxSize"in s){const e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,r=t.blockSize}else n=e.offsetWidth,r=e.offsetHeight;a({width:n,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),t}const rV=["__scopePopper","virtualRef"],iV=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],lV=["__scopePopper"];var oV="Popper",[cV,dV]=Kl(oV),[uV,mV]=cV(oV),hV=e=>{const{__scopePopper:t,children:a}=e,[n,r]=s.useState(null);return(0,qr.jsx)(uV,{scope:t,anchor:n,onAnchorChange:r,children:a})};hV.displayName=oV;var pV="PopperAnchor",xV=s.forwardRef((e,t)=>{const{__scopePopper:a,virtualRef:n}=e,r=i(e,rV),l=mV(pV,a),o=s.useRef(null),c=Zr(t,o),d=s.useRef(null);return s.useEffect(()=>{const e=d.current;d.current=(null===n||void 0===n?void 0:n.current)||o.current,e!==d.current&&l.onAnchorChange(d.current)}),n?null:(0,qr.jsx)(wo.div,u(u({},r),{},{ref:c}))});xV.displayName=pV;var fV="PopperContent",[gV,vV]=cV(fV),bV=s.forwardRef((e,t)=>{var a,n,r,l,o,c,d,m;const{__scopePopper:h,side:p="bottom",sideOffset:x=0,align:f="center",alignOffset:g=0,arrowPadding:v=0,avoidCollisions:b=!0,collisionBoundary:y=[],collisionPadding:j=0,sticky:N="partial",hideWhenDetached:w=!1,updatePositionStrategy:S="optimized",onPlaced:_}=e,k=i(e,iV),C=mV(fV,h),[E,A]=s.useState(null),P=Zr(t,e=>A(e)),[O,M]=s.useState(null),T=nV(O),D=null!==(a=null===T||void 0===T?void 0:T.width)&&void 0!==a?a:0,I=null!==(n=null===T||void 0===T?void 0:T.height)&&void 0!==n?n:0,R=p+("center"!==f?"-"+f:""),L="number"===typeof j?j:u({top:0,right:0,bottom:0,left:0},j),F=Array.isArray(y)?y:[y],z=F.length>0,B={padding:L,boundary:F.filter(wV),altBoundary:z},{refs:U,floatingStyles:H,placement:q,isPositioned:V,middlewareData:W}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:n=[],platform:r,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=e,[m,h]=s.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[p,x]=s.useState(n);Vq(p,n)||x(n);const[f,g]=s.useState(null),[v,b]=s.useState(null),y=s.useCallback(e=>{e!==S.current&&(S.current=e,g(e))},[]),j=s.useCallback(e=>{e!==_.current&&(_.current=e,b(e))},[]),N=i||f,w=l||v,S=s.useRef(null),_=s.useRef(null),k=s.useRef(m),C=null!=c,E=Kq(c),A=Kq(r),P=Kq(d),O=s.useCallback(()=>{if(!S.current||!_.current)return;const e={placement:t,strategy:a,middleware:p};A.current&&(e.platform=A.current),Hq(S.current,_.current,e).then(e=>{const t=u(u({},e),{},{isPositioned:!1!==P.current});M.current&&!Vq(k.current,t)&&(k.current=t,Ft.flushSync(()=>{h(t)}))})},[p,t,a,A,P]);qq(()=>{!1===d&&k.current.isPositioned&&(k.current.isPositioned=!1,h(e=>u(u({},e),{},{isPositioned:!1})))},[d]);const M=s.useRef(!1);qq(()=>(M.current=!0,()=>{M.current=!1}),[]),qq(()=>{if(N&&(S.current=N),w&&(_.current=w),N&&w){if(E.current)return E.current(N,w,O);O()}},[N,w,O,E,C]);const T=s.useMemo(()=>({reference:S,floating:_,setReference:y,setFloating:j}),[y,j]),D=s.useMemo(()=>({reference:N,floating:w}),[N,w]),I=s.useMemo(()=>{const e={position:a,left:0,top:0};if(!D.floating)return e;const t=Gq(D.floating,m.x),s=Gq(D.floating,m.y);return o?u(u({},e),{},{transform:"translate("+t+"px, "+s+"px)"},Wq(D.floating)>=1.5&&{willChange:"transform"}):{position:a,left:t,top:s}},[a,o,D.floating,m.x,m.y]);return s.useMemo(()=>u(u({},m),{},{update:O,refs:T,elements:D,floatingStyles:I}),[m,O,T,D,I])}({strategy:"fixed",placement:R,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Dq(...t,{animationFrame:"always"===S})},elements:{reference:C.anchor},middleware:[Yq({mainAxis:x+I,alignmentAxis:g}),b&&Jq(u({mainAxis:!0,crossAxis:!1,limiter:"partial"===N?$q():void 0},B)),b&&Qq(u({},B)),Xq(u(u({},B),{},{apply:e=>{let{elements:t,rects:a,availableWidth:s,availableHeight:n}=e;const{width:r,height:i}=a.reference,l=t.floating.style;l.setProperty("--radix-popper-available-width","".concat(s,"px")),l.setProperty("--radix-popper-available-height","".concat(n,"px")),l.setProperty("--radix-popper-anchor-width","".concat(r,"px")),l.setProperty("--radix-popper-anchor-height","".concat(i,"px"))}})),O&&eV({element:O,padding:v}),SV({arrowWidth:D,arrowHeight:I}),w&&Zq(u({strategy:"referenceHidden"},B))]}),[G,K]=_V(q),Y=_o(_);mo(()=>{V&&(null===Y||void 0===Y||Y())},[V,Y]);const J=null===(r=W.arrow)||void 0===r?void 0:r.x,$=null===(l=W.arrow)||void 0===l?void 0:l.y,Q=0!==(null===(o=W.arrow)||void 0===o?void 0:o.centerOffset),[X,Z]=s.useState();return mo(()=>{E&&Z(window.getComputedStyle(E).zIndex)},[E]),(0,qr.jsx)("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:u(u({},H),{},{transform:V?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[null===(c=W.transformOrigin)||void 0===c?void 0:c.x,null===(d=W.transformOrigin)||void 0===d?void 0:d.y].join(" ")},(null===(m=W.hide)||void 0===m?void 0:m.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:(0,qr.jsx)(gV,{scope:h,placedSide:G,onArrowChange:M,arrowX:J,arrowY:$,shouldHideArrow:Q,children:(0,qr.jsx)(wo.div,u(u({"data-side":G,"data-align":K},k),{},{ref:P,style:u(u({},k.style),{},{animation:V?void 0:"none"})}))})})});bV.displayName=fV;var yV="PopperArrow",jV={top:"bottom",right:"left",bottom:"top",left:"right"},NV=s.forwardRef(function(e,t){const{__scopePopper:a}=e,s=i(e,lV),n=vV(yV,a),r=jV[n.placedSide];return(0,qr.jsx)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:(0,qr.jsx)(sV,u(u({},s),{},{ref:t,style:u(u({},s.style),{},{display:"block"})}))})});function wV(e){return null!==e}NV.displayName=yV;var SV=e=>({name:"transformOrigin",options:e,fn(t){var a,s,n,r,i;const{placement:l,rects:o,middlewareData:c}=t,d=0!==(null===(a=c.arrow)||void 0===a?void 0:a.centerOffset),u=d?0:e.arrowWidth,m=d?0:e.arrowHeight,[h,p]=_V(l),x={start:"0%",center:"50%",end:"100%"}[p],f=(null!==(s=null===(n=c.arrow)||void 0===n?void 0:n.x)&&void 0!==s?s:0)+u/2,g=(null!==(r=null===(i=c.arrow)||void 0===i?void 0:i.y)&&void 0!==r?r:0)+m/2;let v="",b="";return"bottom"===h?(v=d?x:"".concat(f,"px"),b="".concat(-m,"px")):"top"===h?(v=d?x:"".concat(f,"px"),b="".concat(o.floating.height+m,"px")):"right"===h?(v="".concat(-m,"px"),b=d?x:"".concat(g,"px")):"left"===h&&(v="".concat(o.floating.width+m,"px"),b=d?x:"".concat(g,"px")),{data:{x:v,y:b}}}});function _V(e){const[t,a="center"]=e.split("-");return[t,a]}var kV=hV,CV=xV,EV=bV,AV=NV;const PV=["children"],OV=["children"];function MV(e){const t=TV(e),a=s.forwardRef((e,a)=>{const{children:n}=e,r=i(e,PV),l=s.Children.toArray(n),o=l.find(IV);if(o){const e=o.props.children,n=l.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null}))}return(0,qr.jsx)(t,u(u({},r),{},{ref:a,children:n}))});return a.displayName="".concat(e,".Slot"),a}function TV(e){const t=s.forwardRef((e,t)=>{const{children:a}=e,n=i(e,OV);if(s.isValidElement(a)){const e=function(e){var t,a;let s=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,n=s&&"isReactWarning"in s&&s.isReactWarning;if(n)return e.ref;if(s=null===(a=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===a?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a),r=function(e,t){const a=u({},t);for(const s in t){const n=e[s],r=t[s];/^on[A-Z]/.test(s)?n&&r?a[s]=function(){const e=r(...arguments);return n(...arguments),e}:n&&(a[s]=n):"style"===s?a[s]=u(u({},n),r):"className"===s&&(a[s]=[n,r].filter(Boolean).join(" "))}return u(u({},e),a)}(n,a.props);return a.type!==s.Fragment&&(r.ref=t?Xr(t,e):e),s.cloneElement(a,r)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var DV=Symbol("radix.slottable");function IV(e){return s.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===DV}const RV=["__scopeMenu"],LV=["forceMount"],FV=["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"],zV=["__scopeMenu"],BV=["__scopeMenu"],UV=["disabled","onSelect"],HV=["__scopeMenu","disabled","textValue"],qV=["checked","onCheckedChange"],VV=["value","onValueChange"],WV=["value"],GV=["__scopeMenu","forceMount"],KV=["__scopeMenu"],YV=["__scopeMenu"],JV=["forceMount"];var $V=["Enter"," "],QV=["ArrowUp","PageDown","End"],XV=["ArrowDown","PageUp","Home",...QV],ZV={ltr:[...$V,"ArrowRight"],rtl:[...$V,"ArrowLeft"]},eW={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tW="Menu",[aW,sW,nW]=lo(tW),[rW,iW]=Kl(tW,[nW,dV,zo]),lW=dV(),oW=zo(),[cW,dW]=rW(tW),[uW,mW]=rW(tW),hW=e=>{const{__scopeMenu:t,open:a=!1,children:n,dir:r,onOpenChange:i,modal:l=!0}=e,o=lW(t),[c,d]=s.useState(null),m=s.useRef(!1),h=_o(i),p=Ao(r);return s.useEffect(()=>{const e=()=>{m.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>m.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,qr.jsx)(kV,u(u({},o),{},{children:(0,qr.jsx)(cW,{scope:t,open:a,onOpenChange:h,content:c,onContentChange:d,children:(0,qr.jsx)(uW,{scope:t,onClose:s.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:m,dir:p,modal:l,children:n})})}))};hW.displayName=tW;var pW=s.forwardRef((e,t)=>{const{__scopeMenu:a}=e,s=i(e,RV),n=lW(a);return(0,qr.jsx)(CV,u(u(u({},n),s),{},{ref:t}))});pW.displayName="MenuAnchor";var xW="MenuPortal",[fW,gW]=rW(xW,{forceMount:void 0}),vW=e=>{const{__scopeMenu:t,forceMount:a,children:s,container:n}=e,r=dW(xW,t);return(0,qr.jsx)(fW,{scope:t,forceMount:a,children:(0,qr.jsx)($o,{present:a||r.open,children:(0,qr.jsx)(Sd,{asChild:!0,container:n,children:s})})})};vW.displayName=xW;var bW="MenuContent",[yW,jW]=rW(bW),NW=s.forwardRef((e,t)=>{const a=gW(bW,e.__scopeMenu),{forceMount:s=a.forceMount}=e,n=i(e,LV),r=dW(bW,e.__scopeMenu),l=mW(bW,e.__scopeMenu);return(0,qr.jsx)(aW.Provider,{scope:e.__scopeMenu,children:(0,qr.jsx)($o,{present:s||r.open,children:(0,qr.jsx)(aW.Slot,{scope:e.__scopeMenu,children:l.modal?(0,qr.jsx)(wW,u(u({},n),{},{ref:t})):(0,qr.jsx)(SW,u(u({},n),{},{ref:t}))})})})}),wW=s.forwardRef((e,t)=>{const a=dW(bW,e.__scopeMenu),n=s.useRef(null),r=Zr(t,n);return s.useEffect(()=>{const e=n.current;if(e)return ku(e)},[]),(0,qr.jsx)(kW,u(u({},e),{},{ref:r,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:Vl(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)}))}),SW=s.forwardRef((e,t)=>{const a=dW(bW,e.__scopeMenu);return(0,qr.jsx)(kW,u(u({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)}))}),_W=MV("MenuContent.ScrollLock"),kW=s.forwardRef((e,t)=>{const{__scopeMenu:a,loop:n=!1,trapFocus:r,onOpenAutoFocus:l,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:x,onDismiss:f,disableOutsideScroll:g}=e,v=i(e,FV),b=dW(bW,a),y=mW(bW,a),j=lW(a),N=oW(a),w=sW(a),[S,_]=s.useState(null),k=s.useRef(null),C=Zr(t,k,b.onContentChange),E=s.useRef(0),A=s.useRef(""),P=s.useRef(0),O=s.useRef(null),M=s.useRef("right"),T=s.useRef(0),D=g?vu:s.Fragment,I=g?{as:_W,allowPinchZoom:!0}:void 0,R=e=>{var t,a;const s=A.current+e,n=w().filter(e=>!e.disabled),r=document.activeElement,i=null===(t=n.find(e=>e.ref.current===r))||void 0===t?void 0:t.textValue,l=function(e,t,a){const s=t.length>1&&Array.from(t).every(e=>e===t[0]),n=s?t[0]:t,r=a?e.indexOf(a):-1;let i=function(e,t){return e.map((a,s)=>e[(t+s)%e.length])}(e,Math.max(r,0));1===n.length&&(i=i.filter(e=>e!==a));const l=i.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return l!==a?l:void 0}(n.map(e=>e.textValue),s,i),o=null===(a=n.find(e=>e.textValue===l))||void 0===a?void 0:a.ref.current;!function e(t){A.current=t,window.clearTimeout(E.current),""!==t&&(E.current=window.setTimeout(()=>e(""),1e3))}(s),o&&setTimeout(()=>o.focus())};s.useEffect(()=>()=>window.clearTimeout(E.current),[]),kd();const L=s.useCallback(e=>{var t,a;return M.current===(null===(t=O.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;const a={x:e.clientX,y:e.clientY};return function(e,t){const{x:a,y:s}=e;let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const e=t[r],l=t[i],o=e.x,c=e.y,d=l.x,u=l.y;c>s!==u>s&&a<(d-o)*(s-c)/(u-c)+o&&(n=!n)}return n}(a,t)}(e,null===(a=O.current)||void 0===a?void 0:a.area)},[]);return(0,qr.jsx)(yW,{scope:a,searchRef:A,onItemEnter:s.useCallback(e=>{L(e)&&e.preventDefault()},[L]),onItemLeave:s.useCallback(e=>{var t;L(e)||(null===(t=k.current)||void 0===t||t.focus(),_(null))},[L]),onTriggerLeave:s.useCallback(e=>{L(e)&&e.preventDefault()},[L]),pointerGraceTimerRef:P,onPointerGraceIntentChange:s.useCallback(e=>{O.current=e},[]),children:(0,qr.jsx)(D,u(u({},I),{},{children:(0,qr.jsx)(fd,{asChild:!0,trapped:r,onMountAutoFocus:Vl(l,e=>{var t;e.preventDefault(),null===(t=k.current)||void 0===t||t.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:(0,qr.jsx)(od,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:x,onDismiss:f,children:(0,qr.jsx)(Yo,u(u({asChild:!0},N),{},{dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:Vl(d,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,qr.jsx)(EV,u(u(u({role:"menu","aria-orientation":"vertical","data-state":eG(b.open),"data-radix-menu-content":"",dir:y.dir},j),v),{},{ref:C,style:u({outline:"none"},v.style),onKeyDown:Vl(v.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,a=e.ctrlKey||e.altKey||e.metaKey,s=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!a&&s&&R(e.key));const n=k.current;if(e.target!==n)return;if(!XV.includes(e.key))return;e.preventDefault();const r=w().filter(e=>!e.disabled).map(e=>e.ref.current);QV.includes(e.key)&&r.reverse(),function(e){const t=document.activeElement;for(const a of e){if(a===t)return;if(a.focus(),document.activeElement!==t)return}}(r)}),onBlur:Vl(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(E.current),A.current="")}),onPointerMove:Vl(e.onPointerMove,sG(e=>{const t=e.target,a=T.current!==e.clientX;if(e.currentTarget.contains(t)&&a){const t=e.clientX>T.current?"right":"left";M.current=t,T.current=e.clientX}}))}))}))})})}))})});NW.displayName=bW;var CW=s.forwardRef((e,t)=>{const{__scopeMenu:a}=e,s=i(e,zV);return(0,qr.jsx)(wo.div,u(u({role:"group"},s),{},{ref:t}))});CW.displayName="MenuGroup";var EW=s.forwardRef((e,t)=>{const{__scopeMenu:a}=e,s=i(e,BV);return(0,qr.jsx)(wo.div,u(u({},s),{},{ref:t}))});EW.displayName="MenuLabel";var AW="MenuItem",PW="menu.itemSelect",OW=s.forwardRef((e,t)=>{const{disabled:a=!1,onSelect:n}=e,r=i(e,UV),l=s.useRef(null),o=mW(AW,e.__scopeMenu),c=jW(AW,e.__scopeMenu),d=Zr(t,l),m=s.useRef(!1);return(0,qr.jsx)(MW,u(u({},r),{},{ref:d,disabled:a,onClick:Vl(e.onClick,()=>{const e=l.current;if(!a&&e){const t=new CustomEvent(PW,{bubbles:!0,cancelable:!0});e.addEventListener(PW,e=>null===n||void 0===n?void 0:n(e),{once:!0}),So(e,t),t.defaultPrevented?m.current=!1:o.onClose()}}),onPointerDown:t=>{var a;null===(a=e.onPointerDown)||void 0===a||a.call(e,t),m.current=!0},onPointerUp:Vl(e.onPointerUp,e=>{var t;m.current||null===(t=e.currentTarget)||void 0===t||t.click()}),onKeyDown:Vl(e.onKeyDown,e=>{const t=""!==c.searchRef.current;a||t&&" "===e.key||$V.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))});OW.displayName=AW;var MW=s.forwardRef((e,t)=>{const{__scopeMenu:a,disabled:n=!1,textValue:r}=e,l=i(e,HV),o=jW(AW,a),c=oW(a),d=s.useRef(null),m=Zr(t,d),[h,p]=s.useState(!1),[x,f]=s.useState("");return s.useEffect(()=>{const e=d.current;var t;e&&f((null!==(t=e.textContent)&&void 0!==t?t:"").trim())},[l.children]),(0,qr.jsx)(aW.ItemSlot,{scope:a,disabled:n,textValue:null!==r&&void 0!==r?r:x,children:(0,qr.jsx)(Jo,u(u({asChild:!0},c),{},{focusable:!n,children:(0,qr.jsx)(wo.div,u(u({role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},l),{},{ref:m,onPointerMove:Vl(e.onPointerMove,sG(e=>{if(n)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Vl(e.onPointerLeave,sG(e=>o.onItemLeave(e))),onFocus:Vl(e.onFocus,()=>p(!0)),onBlur:Vl(e.onBlur,()=>p(!1))}))}))})}),TW=s.forwardRef((e,t)=>{const{checked:a=!1,onCheckedChange:s}=e,n=i(e,qV);return(0,qr.jsx)(UW,{scope:e.__scopeMenu,checked:a,children:(0,qr.jsx)(OW,u(u({role:"menuitemcheckbox","aria-checked":tG(a)?"mixed":a},n),{},{ref:t,"data-state":aG(a),onSelect:Vl(n.onSelect,()=>null===s||void 0===s?void 0:s(!!tG(a)||!a),{checkForDefaultPrevented:!1})}))})});TW.displayName="MenuCheckboxItem";var DW="MenuRadioGroup",[IW,RW]=rW(DW,{value:void 0,onValueChange:()=>{}}),LW=s.forwardRef((e,t)=>{const{value:a,onValueChange:s}=e,n=i(e,VV),r=_o(s);return(0,qr.jsx)(IW,{scope:e.__scopeMenu,value:a,onValueChange:r,children:(0,qr.jsx)(CW,u(u({},n),{},{ref:t}))})});LW.displayName=DW;var FW="MenuRadioItem",zW=s.forwardRef((e,t)=>{const{value:a}=e,s=i(e,WV),n=RW(FW,e.__scopeMenu),r=a===n.value;return(0,qr.jsx)(UW,{scope:e.__scopeMenu,checked:r,children:(0,qr.jsx)(OW,u(u({role:"menuitemradio","aria-checked":r},s),{},{ref:t,"data-state":aG(r),onSelect:Vl(s.onSelect,()=>{var e;return null===(e=n.onValueChange)||void 0===e?void 0:e.call(n,a)},{checkForDefaultPrevented:!1})}))})});zW.displayName=FW;var BW="MenuItemIndicator",[UW,HW]=rW(BW,{checked:!1}),qW=s.forwardRef((e,t)=>{const{__scopeMenu:a,forceMount:s}=e,n=i(e,GV),r=HW(BW,a);return(0,qr.jsx)($o,{present:s||tG(r.checked)||!0===r.checked,children:(0,qr.jsx)(wo.span,u(u({},n),{},{ref:t,"data-state":aG(r.checked)}))})});qW.displayName=BW;var VW=s.forwardRef((e,t)=>{const{__scopeMenu:a}=e,s=i(e,KV);return(0,qr.jsx)(wo.div,u(u({role:"separator","aria-orientation":"horizontal"},s),{},{ref:t}))});VW.displayName="MenuSeparator";var WW=s.forwardRef((e,t)=>{const{__scopeMenu:a}=e,s=i(e,YV),n=lW(a);return(0,qr.jsx)(AV,u(u(u({},n),s),{},{ref:t}))});WW.displayName="MenuArrow";var GW="MenuSub",[KW,YW]=rW(GW),JW=e=>{const{__scopeMenu:t,children:a,open:n=!1,onOpenChange:r}=e,i=dW(GW,t),l=lW(t),[o,c]=s.useState(null),[d,m]=s.useState(null),h=_o(r);return s.useEffect(()=>(!1===i.open&&h(!1),()=>h(!1)),[i.open,h]),(0,qr.jsx)(kV,u(u({},l),{},{children:(0,qr.jsx)(cW,{scope:t,open:n,onOpenChange:h,content:d,onContentChange:m,children:(0,qr.jsx)(KW,{scope:t,contentId:xo(),triggerId:xo(),trigger:o,onTriggerChange:c,children:a})})}))};JW.displayName=GW;var $W="MenuSubTrigger",QW=s.forwardRef((e,t)=>{const a=dW($W,e.__scopeMenu),n=mW($W,e.__scopeMenu),r=YW($W,e.__scopeMenu),i=jW($W,e.__scopeMenu),l=s.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},m=s.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return s.useEffect(()=>m,[m]),s.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),c(null)}},[o,c]),(0,qr.jsx)(pW,u(u({asChild:!0},d),{},{children:(0,qr.jsx)(MW,u(u({id:r.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":r.contentId,"data-state":eG(a.open)},e),{},{ref:Xr(t,r.onTriggerChange),onClick:t=>{var s;null===(s=e.onClick)||void 0===s||s.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:Vl(e.onPointerMove,sG(t=>{i.onItemEnter(t),t.defaultPrevented||e.disabled||a.open||l.current||(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{a.onOpenChange(!0),m()},100))})),onPointerLeave:Vl(e.onPointerLeave,sG(e=>{var t;m();const s=null===(t=a.content)||void 0===t?void 0:t.getBoundingClientRect();if(s){var n;const t=null===(n=a.content)||void 0===n?void 0:n.dataset.side,r="right"===t,l=r?-5:5,c=s[r?"left":"right"],d=s[r?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:s.top},{x:d,y:s.top},{x:d,y:s.bottom},{x:c,y:s.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Vl(e.onKeyDown,t=>{const s=""!==i.searchRef.current;var r;e.disabled||s&&" "===t.key||ZV[n.dir].includes(t.key)&&(a.onOpenChange(!0),null===(r=a.content)||void 0===r||r.focus(),t.preventDefault())})}))}))});QW.displayName=$W;var XW="MenuSubContent",ZW=s.forwardRef((e,t)=>{const a=gW(bW,e.__scopeMenu),{forceMount:n=a.forceMount}=e,r=i(e,JV),l=dW(bW,e.__scopeMenu),o=mW(bW,e.__scopeMenu),c=YW(XW,e.__scopeMenu),d=s.useRef(null),m=Zr(t,d);return(0,qr.jsx)(aW.Provider,{scope:e.__scopeMenu,children:(0,qr.jsx)($o,{present:n||l.open,children:(0,qr.jsx)(aW.Slot,{scope:e.__scopeMenu,children:(0,qr.jsx)(kW,u(u({id:c.contentId,"aria-labelledby":c.triggerId},r),{},{ref:m,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;o.isUsingKeyboardRef.current&&(null===(t=d.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Vl(e.onFocusOutside,e=>{e.target!==c.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:Vl(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:Vl(e.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),a=eW[o.dir].includes(e.key);var s;t&&a&&(l.onOpenChange(!1),null===(s=c.trigger)||void 0===s||s.focus(),e.preventDefault())})}))})})})});function eG(e){return e?"open":"closed"}function tG(e){return"indeterminate"===e}function aG(e){return tG(e)?"indeterminate":e?"checked":"unchecked"}function sG(e){return t=>"mouse"===t.pointerType?e(t):void 0}ZW.displayName=XW;var nG=hW,rG=pW,iG=vW,lG=NW,oG=CW,cG=EW,dG=OW,uG=TW,mG=LW,hG=zW,pG=qW,xG=VW,fG=WW,gG=QW,vG=ZW;const bG=["__scopeDropdownMenu","disabled"],yG=["__scopeDropdownMenu"],jG=["__scopeDropdownMenu"],NG=["__scopeDropdownMenu"],wG=["__scopeDropdownMenu"],SG=["__scopeDropdownMenu"],_G=["__scopeDropdownMenu"],kG=["__scopeDropdownMenu"],CG=["__scopeDropdownMenu"],EG=["__scopeDropdownMenu"],AG=["__scopeDropdownMenu"],PG=["__scopeDropdownMenu"],OG=["__scopeDropdownMenu"],MG=["__scopeDropdownMenu"];var TG="DropdownMenu",[DG,IG]=Kl(TG,[iW]),RG=iW(),[LG,FG]=DG(TG),zG=e=>{const{__scopeDropdownMenu:t,children:a,dir:n,open:r,defaultOpen:i,onOpenChange:l,modal:o=!0}=e,c=RG(t),d=s.useRef(null),[m,h]=Co({prop:r,defaultProp:null!==i&&void 0!==i&&i,onChange:l,caller:TG});return(0,qr.jsx)(LG,{scope:t,triggerId:xo(),triggerRef:d,contentId:xo(),open:m,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(e=>!e),[h]),modal:o,children:(0,qr.jsx)(nG,u(u({},c),{},{open:m,onOpenChange:h,dir:n,modal:o,children:a}))})};zG.displayName=TG;var BG="DropdownMenuTrigger",UG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,disabled:s=!1}=e,n=i(e,bG),r=FG(BG,a),l=RG(a);return(0,qr.jsx)(rG,u(u({asChild:!0},l),{},{children:(0,qr.jsx)(wo.button,u(u({type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":s?"":void 0,disabled:s},n),{},{ref:Xr(t,r.triggerRef),onPointerDown:Vl(e.onPointerDown,e=>{s||0!==e.button||!1!==e.ctrlKey||(r.onOpenToggle(),r.open||e.preventDefault())}),onKeyDown:Vl(e.onKeyDown,e=>{s||(["Enter"," "].includes(e.key)&&r.onOpenToggle(),"ArrowDown"===e.key&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})}))}))});UG.displayName=BG;var HG=e=>{const{__scopeDropdownMenu:t}=e,a=i(e,yG),s=RG(t);return(0,qr.jsx)(iG,u(u({},s),a))};HG.displayName="DropdownMenuPortal";var qG="DropdownMenuContent",VG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,n=i(e,jG),r=FG(qG,a),l=RG(a),o=s.useRef(!1);return(0,qr.jsx)(lG,u(u(u({id:r.contentId,"aria-labelledby":r.triggerId},l),n),{},{ref:t,onCloseAutoFocus:Vl(e.onCloseAutoFocus,e=>{var t;o.current||null===(t=r.triggerRef.current)||void 0===t||t.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:Vl(e.onInteractOutside,e=>{const t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey,s=2===t.button||a;r.modal&&!s||(o.current=!0)}),style:u(u({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});VG.displayName=qG;var WG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,NG),n=RG(a);return(0,qr.jsx)(oG,u(u(u({},n),s),{},{ref:t}))});WG.displayName="DropdownMenuGroup";var GG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,wG),n=RG(a);return(0,qr.jsx)(cG,u(u(u({},n),s),{},{ref:t}))});GG.displayName="DropdownMenuLabel";var KG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,SG),n=RG(a);return(0,qr.jsx)(dG,u(u(u({},n),s),{},{ref:t}))});KG.displayName="DropdownMenuItem";var YG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,_G),n=RG(a);return(0,qr.jsx)(uG,u(u(u({},n),s),{},{ref:t}))});YG.displayName="DropdownMenuCheckboxItem";var JG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,kG),n=RG(a);return(0,qr.jsx)(mG,u(u(u({},n),s),{},{ref:t}))});JG.displayName="DropdownMenuRadioGroup";var $G=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,CG),n=RG(a);return(0,qr.jsx)(hG,u(u(u({},n),s),{},{ref:t}))});$G.displayName="DropdownMenuRadioItem";var QG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,EG),n=RG(a);return(0,qr.jsx)(pG,u(u(u({},n),s),{},{ref:t}))});QG.displayName="DropdownMenuItemIndicator";var XG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,AG),n=RG(a);return(0,qr.jsx)(xG,u(u(u({},n),s),{},{ref:t}))});XG.displayName="DropdownMenuSeparator";var ZG=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,PG),n=RG(a);return(0,qr.jsx)(fG,u(u(u({},n),s),{},{ref:t}))});ZG.displayName="DropdownMenuArrow";var eK=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,OG),n=RG(a);return(0,qr.jsx)(gG,u(u(u({},n),s),{},{ref:t}))});eK.displayName="DropdownMenuSubTrigger";var tK=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a}=e,s=i(e,MG),n=RG(a);return(0,qr.jsx)(vG,u(u(u({},n),s),{},{ref:t,style:u(u({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});tK.displayName="DropdownMenuSubContent";var aK=zG,sK=UG,nK=HG,rK=VG,iK=GG,lK=KG,oK=YG,cK=$G,dK=QG,uK=XG,mK=eK,hK=tK;const pK=Dc("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),xK=["className","inset","children"],fK=["className"],gK=["className","sideOffset"],vK=["className","inset"],bK=["className","children","checked"],yK=["className","children"],jK=["className","inset"],NK=["className"],wK=aK,SK=sK,_K=s.forwardRef((e,t)=>{let{className:a,inset:s,children:n}=e,r=i(e,xK);return(0,qr.jsxs)(mK,u(u({ref:t,className:Ol("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a)},r),{},{children:[n,(0,qr.jsx)(qc,{className:"ml-auto"})]}))});_K.displayName=mK.displayName;s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,fK);return(0,qr.jsx)(hK,u({ref:t,className:Ol("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a)},s))}).displayName=hK.displayName;const kK=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4}=e,n=i(e,gK);return(0,qr.jsx)(nK,{children:(0,qr.jsx)(rK,u({ref:t,sideOffset:s,className:Ol("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a)},n))})});kK.displayName=rK.displayName;const CK=s.forwardRef((e,t)=>{let{className:a,inset:s}=e,n=i(e,vK);return(0,qr.jsx)(lK,u({ref:t,className:Ol("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",a)},n))});CK.displayName=lK.displayName;s.forwardRef((e,t)=>{let{className:a,children:s,checked:n}=e,r=i(e,bK);return(0,qr.jsxs)(oK,u(u({ref:t,className:Ol("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n},r),{},{children:[(0,qr.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,qr.jsx)(dK,{children:(0,qr.jsx)(ph,{className:"h-4 w-4"})})}),s]}))}).displayName=oK.displayName;s.forwardRef((e,t)=>{let{className:a,children:s}=e,n=i(e,yK);return(0,qr.jsxs)(cK,u(u({ref:t,className:Ol("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},n),{},{children:[(0,qr.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,qr.jsx)(dK,{children:(0,qr.jsx)(pK,{className:"h-2 w-2 fill-current"})})}),s]}))}).displayName=cK.displayName;s.forwardRef((e,t)=>{let{className:a,inset:s}=e,n=i(e,jK);return(0,qr.jsx)(iK,u({ref:t,className:Ol("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a)},n))}).displayName=iK.displayName;const EK=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,NK);return(0,qr.jsx)(uK,u({ref:t,className:Ol("-mx-1 my-1 h-px bg-muted",a)},s))});EK.displayName=uK.displayName;const AK=["scope","children"];function PK(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];const n=t[0];if(1===t.length)return n;const r=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const a=e.reduce((e,a)=>{let{useScope:s,scopeName:n}=a;const r=s(t)["__scope".concat(n)];return u(u({},e),r)},{});return s.useMemo(()=>({["__scope".concat(n.scopeName)]:a}),[a])}};return r.scopeName=n.scopeName,r}const OK=["asChild"];var MK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const a=ri("Primitive.".concat(t)),n=s.forwardRef((e,s)=>{const{asChild:n}=e,r=i(e,OK),l=n?a:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,qr.jsx)(l,u(u({},r),{},{ref:s}))});return n.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:n})},{});const TK=["__scopeProgress","value","max","getValueLabel"],DK=["__scopeProgress"];var IK="Progress",RK=100,[LK,FK]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];const n=()=>{const t=a.map(e=>s.createContext(e));return function(a){const n=(null===a||void 0===a?void 0:a[e])||t;return s.useMemo(()=>({["__scope".concat(e)]:u(u({},a),{},{[e]:n})}),[a,n])}};return n.scopeName=e,[function(t,n){const r=s.createContext(n);r.displayName=t+"Context";const l=a.length;a=[...a,n];const o=t=>{var a;const{scope:n,children:o}=t,c=i(t,AK),d=(null===n||void 0===n||null===(a=n[e])||void 0===a?void 0:a[l])||r,u=s.useMemo(()=>c,Object.values(c));return(0,qr.jsx)(d.Provider,{value:u,children:o})};return o.displayName=t+"Provider",[o,function(a,i){var o;const c=(null===i||void 0===i||null===(o=i[e])||void 0===o?void 0:o[l])||r,d=s.useContext(c);if(d)return d;if(void 0!==n)return n;throw new Error("`".concat(a,"` must be used within `").concat(t,"`"))}]},PK(n,...t)]}(IK),[zK,BK]=LK(IK),UK=s.forwardRef((e,t)=>{const{__scopeProgress:a,value:s=null,max:n,getValueLabel:r=VK}=e,l=i(e,TK);var o,c;!n&&0!==n||KK(n)||console.error((o="".concat(n),c="Progress","Invalid prop `max` of value `".concat(o,"` supplied to `").concat(c,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(RK,"`.")));const d=KK(n)?n:RK;null===s||YK(s,d)||console.error(function(e,t){return"Invalid prop `value` of value `".concat(e,"` supplied to `").concat(t,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(RK," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")}("".concat(s),"Progress"));const m=YK(s,d)?s:null,h=GK(m)?r(m,d):void 0;return(0,qr.jsx)(zK,{scope:a,value:m,max:d,children:(0,qr.jsx)(MK.div,u(u({"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":GK(m)?m:void 0,"aria-valuetext":h,role:"progressbar","data-state":WK(m,d),"data-value":null!==m&&void 0!==m?m:void 0,"data-max":d},l),{},{ref:t}))})});UK.displayName=IK;var HK="ProgressIndicator",qK=s.forwardRef((e,t)=>{var a;const{__scopeProgress:s}=e,n=i(e,DK),r=BK(HK,s);return(0,qr.jsx)(MK.div,u(u({"data-state":WK(r.value,r.max),"data-value":null!==(a=r.value)&&void 0!==a?a:void 0,"data-max":r.max},n),{},{ref:t}))});function VK(e,t){return"".concat(Math.round(e/t*100),"%")}function WK(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function GK(e){return"number"===typeof e}function KK(e){return GK(e)&&!isNaN(e)&&e>0}function YK(e,t){return GK(e)&&!isNaN(e)&&e<=t&&e>=0}qK.displayName=HK;var JK=UK,$K=qK;const QK=["className","value"],XK=s.forwardRef((e,t)=>{let{className:a,value:s}=e,n=i(e,QK);return(0,qr.jsx)(JK,u(u({ref:t,className:Ol("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a)},n),{},{children:(0,qr.jsx)($K,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})}))});XK.displayName=JK.displayName;const ZK=Dc("scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),eY=Dc("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),tY=Dc("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),aY=[{id:"passport",label:"Passport Photo",icon:eH,description:"Front facing, neutral expression",required:!0},{id:"front",label:"Front View",icon:Hc,description:"Direct front view",required:!1},{id:"left",label:"Left Profile",icon:eH,description:"Left side (30-45\xb0)",required:!1},{id:"right",label:"Right Profile",icon:eH,description:"Right side (30-45\xb0)",required:!1},{id:"full_body",label:"Full Body",icon:eH,description:"Full body with face visible",required:!1}];function sY(e){var t,a,n,r,i,l,o;let{studentId:c,schoolId:d,studentName:m,onComplete:h,onSkip:p,isOpen:x,onClose:f}=e;const[g,v]=(0,s.useState)("passport"),[b,y]=(0,s.useState)({}),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)("camera"),[A,P]=(0,s.useState)(null),[O,M]=(0,s.useState)(null),[T,D]=(0,s.useState)(null),I=(0,s.useRef)(null),R=(0,s.useRef)(null),L=(0,s.useRef)(null),F=(0,s.useRef)(null);(0,s.useEffect)(()=>{c&&x&&z()},[c,x]),(0,s.useEffect)(()=>()=>{U()},[]);const z=async()=>{try{const t=await fetch("".concat("","/api/face-recognition/enrollment-status/").concat(c));if(t.ok){var e;const a=await t.json();D(a);const s={};null===(e=a.photos_uploaded)||void 0===e||e.forEach(e=>{s[e]={uploaded:!0}}),y(s)}}catch(t){console.error("Error fetching enrollment status:",t)}},B=async()=>{try{const e={video:{width:{ideal:1920},height:{ideal:1080},facingMode:"user"}},t=await navigator.mediaDevices.getUserMedia(e);F.current=t,I.current&&(I.current.srcObject=t,await I.current.play()),k(!0),Qt.success("Camera started! Position your face properly.")}catch(e){console.error("Camera error:",e),Qt.error("Camera access denied. Please allow camera permission or upload photos."),E("upload")}},U=()=>{F.current&&(F.current.getTracks().forEach(e=>e.stop()),F.current=null),k(!1)},H=async e=>{S(!0),P(null);try{const t=await fetch("".concat("","/api/face-recognition/upload-photo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:c,school_id:d,photo_base64:e,photo_type:g,capture_device:"camera"===C?"webcam":"upload"})}),a=await t.json();if(a.success){Qt.success(a.message||"Photo uploaded successfully!"),P(a.analysis),y(e=>u(u({},e),{},{[g]:{uploaded:!0,quality:a.quality_score,photoId:a.photo_id}}));const e=aY.findIndex(e=>e.id===g);e<aY.length-1&&v(aY[e+1].id),z()}else"TWIN_OR_SIBLING_DETECTED"===a.warning?M({type:"twin",similar_student:a.similar_student,similarity:a.similarity,message:a.message}):(Qt.error(a.error||"Failed to upload photo"),P(a.analysis))}catch(t){console.error("Upload error:",t),Qt.error("Failed to upload photo. Please try again.")}finally{S(!1)}},q=Object.keys(b).filter(e=>{var t;return null===(t=b[e])||void 0===t?void 0:t.uploaded}).length,V=q/3*100,W=(null===(t=b.passport)||void 0===t?void 0:t.uploaded)&&q>=2;return(0,qr.jsx)(Im,{open:x,onOpenChange:f,children:(0,qr.jsxs)(zm,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(ZK,{className:"w-6 h-6 text-indigo-600"}),"AI Face Enrollment - ",m]}),(0,qr.jsx)(qm,{children:"4-5 photos chahiye (1 passport + angles) for accurate face recognition"})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,qr.jsx)("span",{className:"text-sm font-medium",children:"Progress"}),(0,qr.jsxs)("span",{className:"text-sm text-slate-500",children:[q,"/5 photos"]})]}),(0,qr.jsx)(XK,{value:V,className:"h-2 mb-4"}),aY.map(e=>{var t;const a=(e=>{var t;return null!==(t=b[e])&&void 0!==t&&t.uploaded?"complete":e===g?"current":"pending"})(e.id);return(0,qr.jsx)("button",{onClick:()=>v(e.id),className:"w-full p-3 rounded-lg border-2 text-left transition-all ".concat("complete"===a?"border-emerald-300 bg-emerald-50":"current"===a?"border-indigo-400 bg-indigo-50":"border-slate-200 bg-white hover:border-slate-300"),"data-testid":"photo-type-".concat(e.id),children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("complete"===a?"bg-emerald-500":"current"===a?"bg-indigo-500":"bg-slate-200"),children:"complete"===a?(0,qr.jsx)(Km,{className:"w-5 h-5 text-white"}):(0,qr.jsx)(e.icon,{className:"w-4 h-4 ".concat("current"===a?"text-white":"text-slate-500")})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("p",{className:"font-medium text-sm ".concat("complete"===a?"text-emerald-700":"text-slate-900"),children:[e.label," ",e.required&&(0,qr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]}),"complete"===a&&(null===(t=b[e.id])||void 0===t?void 0:t.quality)&&(0,qr.jsxs)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded",children:[b[e.id].quality,"%"]})]})},e.id)})]}),(0,qr.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"camera"===C?"default":"outline",onClick:()=>{E("camera"),_||B()},className:"flex-1",children:[(0,qr.jsx)(JU,{className:"w-4 h-4 mr-2"}),"Camera"]}),(0,qr.jsxs)(Dl,{variant:"upload"===C?"default":"outline",onClick:()=>{E("upload"),U()},className:"flex-1",children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Upload"]})]}),"camera"===C&&(0,qr.jsx)(Qc,{className:"overflow-hidden",children:(0,qr.jsxs)(td,{className:"p-0",children:[(0,qr.jsxs)("div",{className:"relative aspect-[4/3] bg-slate-900",children:[(0,qr.jsx)("video",{ref:I,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,qr.jsx)("div",{className:"border-4 border-dashed rounded-full w-48 h-64 ".concat("full_body"===g?"w-32 h-80":""," ").concat(_?"border-white/50":"border-slate-500")})}),(0,qr.jsx)("div",{className:"absolute top-4 left-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm",children:null===(a=aY.find(e=>e.id===g))||void 0===a?void 0:a.label}),!_&&(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80",children:(0,qr.jsxs)(Dl,{onClick:B,size:"lg",children:[(0,qr.jsx)(JU,{className:"w-5 h-5 mr-2"}),"Start Camera"]})})]}),_&&(0,qr.jsxs)("div",{className:"p-4 bg-slate-100 flex justify-center gap-4",children:[(0,qr.jsxs)(Dl,{size:"lg",onClick:async()=>{if(!I.current||!R.current)return;N(!0);const e=I.current,t=R.current,a=t.getContext("2d");t.width=e.videoWidth,t.height=e.videoHeight,a.drawImage(e,0,0);const s=t.toDataURL("image/jpeg",.9).split(",")[1];await H(s),N(!1)},disabled:j||w,className:"bg-red-600 hover:bg-red-700","data-testid":"capture-photo-btn",children:[j||w?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin mr-2"}):(0,qr.jsx)(JU,{className:"w-5 h-5 mr-2"}),w?"Analyzing...":"Capture Photo"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:U,children:[(0,qr.jsx)(eY,{className:"w-4 h-4 mr-2"}),"Stop"]})]})]})}),"upload"===C&&(0,qr.jsx)(Qc,{className:"border-2 border-dashed border-slate-300 hover:border-indigo-400 transition-colors",children:(0,qr.jsx)(td,{className:"p-8",children:(0,qr.jsxs)("div",{className:"flex flex-col items-center justify-center cursor-pointer",onClick:()=>{var e;return null===(e=L.current)||void 0===e?void 0:e.click()},children:[(0,qr.jsx)($U,{className:"w-12 h-12 text-slate-400 mb-4"}),(0,qr.jsxs)("p",{className:"text-lg font-medium text-slate-700",children:["Click to upload ",null===(n=aY.find(e=>e.id===g))||void 0===n?void 0:n.label]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"JPG, PNG up to 10MB - High resolution recommended"}),(0,qr.jsx)("input",{ref:L,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/"))return void Qt.error("Please upload an image file");if(t.size>10485760)return void Qt.error("File size too large. Max 10MB allowed.");const a=new FileReader;a.onloadend=async()=>{const e=a.result.split(",")[1];await H(e)},a.readAsDataURL(t)},className:"hidden","data-testid":"photo-upload-input"}),w&&(0,qr.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-indigo-600",children:[(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin"}),(0,qr.jsx)("span",{children:"AI analyzing photo..."})]})]})})}),A&&(0,qr.jsx)(Qc,{className:"".concat(A.quality_score>=80?"border-emerald-300 bg-emerald-50":A.quality_score>=60?"border-amber-300 bg-amber-50":"border-red-300 bg-red-50"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[A.quality_score>=80?(0,qr.jsx)(Km,{className:"w-6 h-6 text-emerald-600 flex-shrink-0"}):A.quality_score>=60?(0,qr.jsx)(QU,{className:"w-6 h-6 text-amber-600 flex-shrink-0"}):(0,qr.jsx)(eY,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,qr.jsxs)("span",{className:"font-semibold",children:["Quality Score: ",A.quality_score,"/100"]}),A.face_detected&&(0,qr.jsx)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded",children:"Face Detected"})]}),(null===(r=A.issues)||void 0===r?void 0:r.length)>0&&(0,qr.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,qr.jsx)("strong",{children:"Issues:"})," ",A.issues.join(", ")]}),(null===(i=A.recommendations)||void 0===i?void 0:i.length)>0&&(0,qr.jsxs)("div",{className:"text-sm text-slate-600 mt-1",children:[(0,qr.jsx)("strong",{children:"Tips:"})," ",A.recommendations.join(", ")]})]})]})})}),(0,qr.jsx)("canvas",{ref:R,className:"hidden"})]})]}),"twin"===(null===O||void 0===O?void 0:O.type)&&(0,qr.jsx)("div",{className:"mt-4 p-4 bg-amber-50 border-2 border-amber-300 rounded-lg",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)(QU,{className:"w-6 h-6 text-amber-600 flex-shrink-0"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-bold text-amber-800",children:"\u26a0\ufe0f Similar Face Detected!"}),(0,qr.jsxs)("p",{className:"text-sm text-amber-700 mt-1",children:["This face is ",O.similarity,"% similar to: ",(0,qr.jsx)("strong",{children:null===(l=O.similar_student)||void 0===l?void 0:l.name}),(null===(o=O.similar_student)||void 0===o?void 0:o.class)&&" (Class ".concat(O.similar_student.class,")")]}),(0,qr.jsxs)("p",{className:"text-sm text-amber-700 mt-2",children:[(0,qr.jsx)("strong",{children:"Kya ye student twin/sibling hai?"})," Please verify carefully before proceeding."]}),(0,qr.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,qr.jsx)(Dl,{size:"sm",variant:"outline",onClick:()=>M(null),children:"Re-take Photo"}),(0,qr.jsx)(Dl,{size:"sm",className:"bg-amber-600 hover:bg-amber-700",onClick:()=>{M(null),Qt.success("Verified as different person. Continue enrollment.")},children:"Yes, Different Person - Continue"})]})]})]})}),(0,qr.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[(0,qr.jsx)(Dl,{variant:"ghost",onClick:async()=>{try{(await fetch("".concat("","/api/face-recognition/skip-enrollment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:c,school_id:d,skip_face:!0,skip_biometric:!0,reason:"Skipped during admission - will complete later"})})).ok&&(Qt.info("Face enrollment skipped. Can be completed later."),null===p||void 0===p||p(),null===f||void 0===f||f())}catch(e){console.error("Skip error:",e)}},className:"text-slate-500",children:"Skip for now"}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:f,children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:()=>{U(),null===h||void 0===h||h(),null===f||void 0===f||f()},disabled:!W,className:"bg-emerald-600 hover:bg-emerald-700","data-testid":"complete-enrollment-btn",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Complete Enrollment"]})]})]}),(0,qr.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg flex items-start gap-2",children:[(0,qr.jsx)(tY,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,qr.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,qr.jsx)("strong",{children:"Tips for best results:"}),(0,qr.jsxs)("ul",{className:"list-disc ml-4 mt-1",children:[(0,qr.jsx)("li",{children:"Good lighting - face clearly visible"}),(0,qr.jsx)("li",{children:"Remove glasses if possible"}),(0,qr.jsx)("li",{children:"Neutral expression for passport photo"}),(0,qr.jsx)("li",{children:"Different angles help AI identify student accurately"}),(0,qr.jsx)("li",{children:"Full body photo helps even if face is partially visible"})]})]})]})]})})}const nY=Dc("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function rY(e){var t;let{personId:a,personType:n="student",schoolId:r,isOpen:i,onClose:l}=e;const[o,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),p=(0,s.useRef)();(0,s.useEffect)(()=>{a&&i&&x()},[a,i]);const x=async()=>{try{c(!0);const e=localStorage.getItem("token"),t=await fetch("".concat("","/api/id-card/generate/").concat(n,"/").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();u(e)}else Qt.error("ID card generate nahi ho saka")}catch(e){console.error("Error:",e),Qt.error("Error loading ID card")}finally{c(!1)}};if(!i)return null;const f=null===d||void 0===d?void 0:d.id_card,g=null===d||void 0===d?void 0:d.school,v=null===d||void 0===d?void 0:d.photo,b=(null===f||void 0===f?void 0:f.role_color)||"#1e40af",y=(null===f||void 0===f?void 0:f.is_higher_authority)||!1,j=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const t={"#b91c1c":"linear-gradient(135deg, #7f1d1d 0%, #b91c1c 30%, #dc2626 50%, #b91c1c 70%, #7f1d1d 100%)","#dc2626":"linear-gradient(135deg, #991b1b 0%, #dc2626 30%, #ef4444 50%, #dc2626 70%, #991b1b 100%)","#ea580c":"linear-gradient(135deg, #c2410c 0%, #ea580c 30%, #f97316 50%, #ea580c 70%, #c2410c 100%)","#9333ea":"linear-gradient(135deg, #7e22ce 0%, #9333ea 30%, #a855f7 50%, #9333ea 70%, #7e22ce 100%)"};return t[e]||t["#b91c1c"]}return{"#b91c1c":"linear-gradient(135deg, #b91c1c 0%, #dc2626 50%, #b91c1c 100%)","#dc2626":"linear-gradient(135deg, #dc2626 0%, #ef4444 50%, #dc2626 100%)","#ea580c":"linear-gradient(135deg, #ea580c 0%, #f97316 50%, #ea580c 100%)","#9333ea":"linear-gradient(135deg, #9333ea 0%, #a855f7 50%, #9333ea 100%)","#047857":"linear-gradient(135deg, #047857 0%, #059669 50%, #047857 100%)","#1e40af":"linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #1e40af 100%)","#059669":"linear-gradient(135deg, #059669 0%, #10b981 50%, #059669 100%)","#0891b2":"linear-gradient(135deg, #0891b2 0%, #06b6d4 50%, #0891b2 100%)","#4f46e5":"linear-gradient(135deg, #4f46e5 0%, #6366f1 50%, #4f46e5 100%)","#64748b":"linear-gradient(135deg, #64748b 0%, #94a3b8 50%, #64748b 100%)","#ca8a04":"linear-gradient(135deg, #ca8a04 0%, #eab308 50%, #ca8a04 100%)","#374151":"linear-gradient(135deg, #374151 0%, #6b7280 50%, #374151 100%)","#78716c":"linear-gradient(135deg, #78716c 0%, #a8a29e 50%, #78716c 100%)","#a16207":"linear-gradient(135deg, #a16207 0%, #ca8a04 50%, #a16207 100%)"}[e]||"linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #1e40af 100%)"}(b,y);return(0,qr.jsx)(Im,{open:i,onOpenChange:l,children:(0,qr.jsxs)(zm,{className:"max-w-md","data-testid":"id-card-dialog",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center justify-between",children:[(0,qr.jsxs)("span",{children:["student"===n?"Student":"Employee"," ID Card Preview"]}),(0,qr.jsx)("span",{className:"text-xs px-2 py-1 rounded-full",style:{background:b,color:"white",border:y?"2px solid #fbbf24":"none"},children:(null===f||void 0===f||null===(t=f.card_type)||void 0===t?void 0:t.replace(" ID CARD",""))||n})]})}),o?(0,qr.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):d?(0,qr.jsxs)("div",{ref:p,children:[(0,qr.jsx)("div",{className:"flex justify-center mb-3",children:(0,qr.jsxs)("div",{className:"inline-flex bg-slate-100 rounded-lg p-1",children:[(0,qr.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-1.5 rounded-md text-sm font-medium transition-all ".concat(m?"text-slate-600 hover:text-slate-900":"bg-white shadow text-indigo-700"),children:"Front Side"}),(0,qr.jsx)("button",{onClick:()=>h(!0),className:"px-4 py-1.5 rounded-md text-sm font-medium transition-all ".concat(m?"bg-white shadow text-indigo-700":"text-slate-600 hover:text-slate-900"),children:"Back Side"})]})}),!m&&(0,qr.jsxs)("div",{className:"mx-auto rounded-xl overflow-hidden shadow-xl relative",style:{width:"340px",height:"215px",background:j,padding:"12px",color:"white",border:y?"3px solid #fbbf24":"none"},"data-testid":"id-card-preview",children:[(null===g||void 0===g?void 0:g.logo_url)&&(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{opacity:.12,zIndex:0},"data-testid":"id-card-watermark",children:(0,qr.jsx)("img",{src:g.logo_url,alt:"",className:"w-36 h-36 object-contain",style:{mixBlendMode:"luminosity",filter:"drop-shadow(0 0 0 transparent)"}})}),(0,qr.jsxs)("div",{className:"relative z-10 h-full flex flex-col",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b border-white/30 mb-2",children:[(null===g||void 0===g?void 0:g.logo_url)&&(0,qr.jsx)("div",{className:"w-9 h-9 bg-white rounded-full p-0.5 flex-shrink-0","data-testid":"id-card-header-logo",children:(0,qr.jsx)("img",{src:g.logo_url,alt:"",className:"w-full h-full object-contain rounded-full"})}),(0,qr.jsxs)("div",{className:"flex-1 text-center",children:[(0,qr.jsx)("div",{className:"text-sm font-bold uppercase tracking-wide","data-testid":"id-card-school-name",children:(null===g||void 0===g?void 0:g.name)||"School Name"}),(null===g||void 0===g?void 0:g.address)&&(0,qr.jsx)("div",{className:"text-[9px] opacity-80",children:g.address}),(0,qr.jsx)("div",{className:"text-[8px] inline-block px-2 py-0.5 rounded-full mt-1 font-bold",style:{background:y?"rgba(251,191,36,0.3)":"rgba(255,255,255,0.25)",border:y?"1px solid rgba(251,191,36,0.5)":"none"},"data-testid":"id-card-type",children:(null===f||void 0===f?void 0:f.card_type)||"ID CARD"})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3 flex-1",children:[(0,qr.jsx)("div",{className:"w-[70px] flex-shrink-0",children:(0,qr.jsx)("div",{className:"w-[70px] h-[85px] bg-white rounded-lg overflow-hidden flex items-center justify-center",children:v?(0,qr.jsx)("img",{src:v,alt:null===f||void 0===f?void 0:f.name,className:"w-full h-full object-cover"}):(0,qr.jsx)("span",{className:"text-gray-400 text-xs",children:"Photo"})})}),(0,qr.jsxs)("div",{className:"flex-1 text-[9px]",children:[(0,qr.jsx)("div",{className:"text-sm font-bold text-yellow-200 mb-1","data-testid":"id-card-name",children:null===f||void 0===f?void 0:f.name}),"student"===n?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"mb-0.5","data-testid":"id-card-class",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Class:"}),(0,qr.jsx)("span",{className:"font-semibold",children:null===f||void 0===f?void 0:f.class})]}),(null===f||void 0===f?void 0:f.roll_no)&&(0,qr.jsxs)("div",{className:"mb-0.5",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Roll No:"}),(0,qr.jsx)("span",{className:"font-semibold",children:f.roll_no})]}),(null===f||void 0===f?void 0:f.father_name)&&(0,qr.jsxs)("div",{className:"mb-0.5",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Father:"}),(0,qr.jsx)("span",{className:"font-semibold",children:f.father_name})]}),(null===f||void 0===f?void 0:f.show_samgra_id)&&(null===f||void 0===f?void 0:f.samgra_id)&&(0,qr.jsxs)("div",{className:"mb-0.5","data-testid":"id-card-samgra-id",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Samgra ID:"}),(0,qr.jsx)("span",{className:"font-semibold",children:f.samgra_id})]}),(null===f||void 0===f?void 0:f.blood_group)&&(0,qr.jsxs)("div",{className:"mb-0.5",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Blood:"}),(0,qr.jsx)("span",{className:"font-semibold",children:f.blood_group})]}),((null===f||void 0===f?void 0:f.parent_phone)||(null===f||void 0===f?void 0:f.phone))&&(0,qr.jsxs)("div",{className:"mt-1.5 bg-white/20 rounded px-1.5 py-1 text-[8px]","data-testid":"id-card-parent-phone",children:[(0,qr.jsx)("span",{className:"text-red-200 font-bold",children:"\ud83d\udcde Parent: "}),(0,qr.jsx)("span",{className:"font-bold",children:f.parent_phone||f.phone})]})]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"mb-0.5","data-testid":"id-card-designation",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Designation:"}),(0,qr.jsxs)("span",{className:"font-semibold",children:[null===f||void 0===f?void 0:f.designation,(null===f||void 0===f?void 0:f.designation_hindi)&&(0,qr.jsxs)("span",{className:"opacity-80",children:[" / ",f.designation_hindi]})]})]}),(null===f||void 0===f?void 0:f.department)&&(0,qr.jsxs)("div",{className:"mb-0.5",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Dept:"}),(0,qr.jsx)("span",{className:"font-semibold",children:f.department})]}),(null===f||void 0===f?void 0:f.id_number)&&(0,qr.jsxs)("div",{className:"mb-0.5",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Emp ID:"}),(0,qr.jsx)("span",{className:"font-semibold",children:f.id_number})]}),(null===f||void 0===f?void 0:f.blood_group)&&(0,qr.jsxs)("div",{className:"mb-0.5",children:[(0,qr.jsx)("span",{className:"opacity-70 w-16 inline-block",children:"Blood:"}),(0,qr.jsx)("span",{className:"font-semibold",children:f.blood_group})]}),(null===f||void 0===f?void 0:f.phone)&&(0,qr.jsxs)("div",{className:"mt-1.5 bg-white/20 rounded px-1.5 py-1 text-[8px]","data-testid":"id-card-phone",children:[(0,qr.jsx)("span",{className:"text-green-200 font-bold",children:"\ud83d\udcde Self: "}),(0,qr.jsx)("span",{className:"font-bold",children:f.phone})]}),(null===f||void 0===f?void 0:f.emergency_contact)&&(0,qr.jsxs)("div",{className:"mt-1 bg-white/20 rounded px-1.5 py-1 text-[8px]","data-testid":"id-card-emergency",children:[(0,qr.jsx)("span",{className:"text-red-200 font-bold",children:"\ud83c\udd98 Emergency: "}),(0,qr.jsx)("span",{className:"font-bold",children:f.emergency_contact})]})]})]})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-end text-[7px] opacity-70 mt-auto pt-1",children:[(0,qr.jsx)("span",{children:(null===g||void 0===g?void 0:g.phone)&&"\ud83d\udcde ".concat(g.phone)}),(0,qr.jsxs)("span",{children:["Valid: ",(null===f||void 0===f?void 0:f.valid_until)||"".concat((new Date).getFullYear()+1)]})]})]})]}),m&&(0,qr.jsxs)("div",{className:"mx-auto rounded-xl overflow-hidden shadow-xl relative",style:{width:"340px",height:"215px",background:"student"===n?"linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #1e40af 100%)":j,padding:"12px",color:"white",border:y?"3px solid #fbbf24":"none"},"data-testid":"id-card-back-preview",children:[(null===g||void 0===g?void 0:g.logo_url)&&(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{opacity:.15,zIndex:0},children:(0,qr.jsx)("img",{src:g.logo_url,alt:"",className:"w-44 h-44 object-contain",style:{mixBlendMode:"luminosity",filter:"drop-shadow(0 0 0 transparent)"}})}),(0,qr.jsxs)("div",{className:"relative z-10 h-full flex flex-col items-center justify-center text-center",children:["student"===n?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("div",{className:"text-3xl font-bold tracking-wider mb-3 drop-shadow-lg",children:"STUDENT OF"}),(0,qr.jsx)("div",{className:"text-lg font-semibold uppercase px-4 leading-tight",children:(null===g||void 0===g?void 0:g.name)||"School Name"}),(null===g||void 0===g?void 0:g.address)&&(0,qr.jsx)("div",{className:"text-[10px] mt-3 opacity-80 max-w-[80%]",children:g.address})]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("div",{className:"text-2xl font-bold tracking-wider mb-2 drop-shadow-lg uppercase",children:(null===f||void 0===f?void 0:f.designation)||"Employee"}),(null===f||void 0===f?void 0:f.designation_hindi)&&(0,qr.jsx)("div",{className:"text-sm font-medium mb-2 opacity-90",children:f.designation_hindi}),(0,qr.jsx)("div",{className:"text-xs tracking-widest opacity-80 mb-2",children:"OF"}),(0,qr.jsx)("div",{className:"text-lg font-bold uppercase px-4 leading-tight",children:(null===g||void 0===g?void 0:g.name)||"School Name"}),(null===g||void 0===g?void 0:g.address)&&(0,qr.jsx)("div",{className:"text-[9px] mt-2 opacity-70 max-w-[90%]",children:g.address}),(null===g||void 0===g?void 0:g.phone)&&(0,qr.jsxs)("div",{className:"text-[10px] mt-2 opacity-80",children:["\ud83d\udcde ",g.phone]})]}),(0,qr.jsx)("div",{className:"absolute bottom-3 left-0 right-0 text-center",children:(0,qr.jsx)("div",{className:"text-[8px] opacity-70",children:"If found, please return to school"})})]})]}),(0,qr.jsxs)("div",{className:"flex justify-center gap-3 mt-4",children:[(0,qr.jsxs)(Dl,{onClick:()=>{const e=window.open("","_blank"),t=null===d||void 0===d?void 0:d.id_card,a=null===d||void 0===d?void 0:d.school,s=null===d||void 0===d?void 0:d.photo,r=(null===t||void 0===t?void 0:t.role_color)||"#1e40af",i=(null===t||void 0===t?void 0:t.is_higher_authority)||!1,l={"#b91c1c":i?"linear-gradient(135deg, #7f1d1d 0%, #b91c1c 30%, #dc2626 50%, #b91c1c 70%, #7f1d1d 100%)":"linear-gradient(135deg, #b91c1c 0%, #dc2626 50%, #b91c1c 100%)","#dc2626":i?"linear-gradient(135deg, #991b1b 0%, #dc2626 30%, #ef4444 50%, #dc2626 70%, #991b1b 100%)":"linear-gradient(135deg, #dc2626 0%, #ef4444 50%, #dc2626 100%)","#ea580c":"linear-gradient(135deg, #ea580c 0%, #f97316 50%, #ea580c 100%)","#9333ea":"linear-gradient(135deg, #9333ea 0%, #a855f7 50%, #9333ea 100%)","#047857":"linear-gradient(135deg, #047857 0%, #059669 50%, #047857 100%)","#1e40af":"linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #1e40af 100%)","#059669":"linear-gradient(135deg, #059669 0%, #10b981 50%, #059669 100%)","#0891b2":"linear-gradient(135deg, #0891b2 0%, #06b6d4 50%, #0891b2 100%)","#4f46e5":"linear-gradient(135deg, #4f46e5 0%, #6366f1 50%, #4f46e5 100%)","#64748b":"linear-gradient(135deg, #64748b 0%, #94a3b8 50%, #64748b 100%)","#ca8a04":"linear-gradient(135deg, #ca8a04 0%, #eab308 50%, #ca8a04 100%)","#374151":"linear-gradient(135deg, #374151 0%, #6b7280 50%, #374151 100%)"},o=l[r]||l["#1e40af"],c=i?"2px solid #fbbf24":"none";e.document.write("\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>ID Card - ".concat((null===t||void 0===t?void 0:t.name)||"Print","</title>\n          <style>\n            @page { size: 85.6mm 54mm; margin: 0; }\n            * { margin: 0; padding: 0; box-sizing: border-box; }\n            body { \n              font-family: Arial, sans-serif; \n              display: flex; \n              justify-content: center; \n              align-items: center; \n              min-height: 100vh;\n              background: #f0f0f0;\n              -webkit-print-color-adjust: exact;\n              print-color-adjust: exact;\n            }\n            .id-card {\n              width: 85.6mm;\n              height: 54mm;\n              background: ").concat(o,";\n              border-radius: 8px;\n              overflow: hidden;\n              position: relative;\n              color: white;\n              padding: 3mm;\n              border: ").concat(c,";\n            }\n            .watermark {\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, -50%);\n              opacity: 0.15;\n              width: 30mm;\n              height: 30mm;\n              z-index: 0;\n            }\n            .watermark img { width: 100%; height: 100%; object-fit: contain; }\n            .content { position: relative; z-index: 1; height: 100%; display: flex; flex-direction: column; }\n            .header {\n              display: flex;\n              align-items: center;\n              gap: 2mm;\n              padding-bottom: 2mm;\n              border-bottom: 0.3mm solid rgba(255,255,255,0.3);\n              margin-bottom: 2mm;\n            }\n            .header-logo {\n              width: 8mm;\n              height: 8mm;\n              background: white;\n              border-radius: 50%;\n              padding: 0.5mm;\n              flex-shrink: 0;\n            }\n            .header-logo img { width: 100%; height: 100%; object-fit: contain; border-radius: 50%; }\n            .header-text { flex: 1; text-align: center; }\n            .school-name { font-size: 9pt; font-weight: bold; text-transform: uppercase; }\n            .school-address { font-size: 6pt; opacity: 0.9; margin-top: 0.5mm; }\n            .card-type { \n              font-size: 6pt; \n              background: ").concat(i?"rgba(251,191,36,0.3)":"rgba(255,255,255,0.25)","; \n              padding: 0.5mm 2mm; \n              border-radius: 2mm;\n              display: inline-block;\n              margin-top: 1mm;\n              font-weight: bold;\n              ").concat(i?"border: 0.3mm solid rgba(251,191,36,0.5);":"",'\n            }\n            .body { display: flex; gap: 3mm; flex: 1; }\n            .photo-section { width: 18mm; flex-shrink: 0; }\n            .photo {\n              width: 18mm;\n              height: 22mm;\n              background: white;\n              border-radius: 2mm;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              overflow: hidden;\n            }\n            .photo img { width: 100%; height: 100%; object-fit: cover; }\n            .photo-placeholder { color: #999; font-size: 7pt; }\n            .details { flex: 1; font-size: 7pt; }\n            .name { font-size: 10pt; font-weight: bold; color: #fef08a; margin-bottom: 1.5mm; }\n            .detail-row { margin-bottom: 1mm; display: flex; }\n            .detail-label { width: 14mm; opacity: 0.8; }\n            .detail-value { flex: 1; font-weight: 600; }\n            .contact-box {\n              background: rgba(255,255,255,0.2);\n              padding: 1mm 1.5mm;\n              border-radius: 1.5mm;\n              margin-top: 1.5mm;\n              font-size: 6.5pt;\n            }\n            .contact-label { color: #fca5a5; font-weight: bold; }\n            .contact-value { font-weight: bold; }\n            .footer {\n              display: flex;\n              justify-content: space-between;\n              align-items: flex-end;\n              font-size: 5pt;\n              opacity: 0.8;\n              margin-top: auto;\n              padding-top: 1mm;\n            }\n            @media print {\n              body { background: white; }\n              .id-card { box-shadow: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="id-card">\n            ').concat(null!==a&&void 0!==a&&a.logo_url?'<div class="watermark"><img src="'.concat(a.logo_url,'" alt=""/></div>'):"",'\n            <div class="content">\n              <div class="header">\n                ').concat(null!==a&&void 0!==a&&a.logo_url?'<div class="header-logo"><img src="'.concat(a.logo_url,'" alt=""/></div>'):"",'\n                <div class="header-text">\n                  <div class="school-name">').concat((null===a||void 0===a?void 0:a.name)||"School Name","</div>\n                  ").concat(null!==a&&void 0!==a&&a.address?'<div class="school-address">'.concat(a.address,"</div>"):"",'\n                  <div class="card-type">').concat((null===t||void 0===t?void 0:t.card_type)||"ID CARD",'</div>\n                </div>\n              </div>\n              <div class="body">\n                <div class="photo-section">\n                  <div class="photo">\n                    ').concat(s?'<img src="'.concat(s,'" alt="').concat(null===t||void 0===t?void 0:t.name,'"/>'):'<span class="photo-placeholder">Photo</span>','\n                  </div>\n                </div>\n                <div class="details">\n                  <div class="name">').concat((null===t||void 0===t?void 0:t.name)||"","</div>\n                  ").concat("student"===n?'\n                    <div class="detail-row">\n                      <span class="detail-label">Class:</span>\n                      <span class="detail-value">'.concat((null===t||void 0===t?void 0:t.class)||"","</span>\n                    </div>\n                    ").concat(null!==t&&void 0!==t&&t.roll_no?'<div class="detail-row"><span class="detail-label">Roll No:</span><span class="detail-value">'.concat(t.roll_no,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.father_name?'<div class="detail-row"><span class="detail-label">Father:</span><span class="detail-value">'.concat(t.father_name,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.show_samgra_id&&null!==t&&void 0!==t&&t.samgra_id?'<div class="detail-row"><span class="detail-label">Samgra ID:</span><span class="detail-value">'.concat(t.samgra_id,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.blood_group?'<div class="detail-row"><span class="detail-label">Blood:</span><span class="detail-value">'.concat(t.blood_group,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.parent_phone||null!==t&&void 0!==t&&t.phone?'<div class="contact-box"><span class="contact-label">\ud83d\udcde Parent: </span><span class="contact-value">'.concat(t.parent_phone||t.phone,"</span></div>"):"","\n                  "):'\n                    <div class="detail-row">\n                      <span class="detail-label">Designation:</span>\n                      <span class="detail-value">'.concat((null===t||void 0===t?void 0:t.designation)||""," ").concat(null!==t&&void 0!==t&&t.designation_hindi?"/ "+t.designation_hindi:"","</span>\n                    </div>\n                    ").concat(null!==t&&void 0!==t&&t.department?'<div class="detail-row"><span class="detail-label">Dept:</span><span class="detail-value">'.concat(t.department,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.id_number?'<div class="detail-row"><span class="detail-label">Emp ID:</span><span class="detail-value">'.concat(t.id_number,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.blood_group?'<div class="detail-row"><span class="detail-label">Blood:</span><span class="detail-value">'.concat(t.blood_group,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.phone?'<div class="contact-box"><span class="contact-label">\ud83d\udcde Self: </span><span class="contact-value">'.concat(t.phone,"</span></div>"):"","\n                    ").concat(null!==t&&void 0!==t&&t.emergency_contact?'<div class="contact-box" style="margin-top:1mm"><span class="contact-label">\ud83c\udd98 Emergency: </span><span class="contact-value">'.concat(t.emergency_contact,"</span></div>"):"","\n                  "),'\n                </div>\n              </div>\n              <div class="footer">\n                <div>\n                  ').concat(null!==a&&void 0!==a&&a.phone?"\ud83d\udcde ".concat(a.phone):"","\n                </div>\n                <div>Valid: ").concat((null===t||void 0===t?void 0:t.valid_until)||(new Date).getFullYear()+1,"</div>\n              </div>\n            </div>\n          </div>\n          <script>window.onload = function() { setTimeout(function() { window.print(); }, 500); }<\/script>\n        </body>\n      </html>\n    ")),e.document.close()},className:"bg-indigo-600 hover:bg-indigo-700","data-testid":"print-id-card-btn",children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-2"}),"Print ",m?"Back":"Front"]}),(0,qr.jsxs)(Dl,{onClick:()=>h(!m),variant:"outline","data-testid":"flip-card-btn",children:[(0,qr.jsx)(nY,{className:"w-4 h-4 mr-2"}),"Flip Card"]}),(0,qr.jsx)(Dl,{onClick:l,variant:"outline",children:"Close"})]}),(0,qr.jsx)("p",{className:"text-center text-xs text-slate-500 mt-2",children:"\ud83d\udca1 Print Front first, then flip card and print Back. PVC card (85.6mm x 54mm)"})]}):(0,qr.jsx)("div",{className:"text-center py-10 text-gray-500",children:"ID Card data load nahi ho saka"})]})})}const iY=Dc("file-up",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),lY=Dc("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);function oY(e){var t;let{type:a="student",schoolId:n,onImportComplete:r,trigger:i}=e;const[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(1),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(null),w=(0,s.useRef)(null),S="student"===a?"Students (\u091b\u093e\u0924\u094d\u0930)":"Employees (\u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940)",_="student"===a?Lc:Xm,k=async e=>{p(!0);try{const t=new FormData;t.append("file",e),t.append("import_type",a),t.append("school_id",n);const s=localStorage.getItem("token"),r=await Hr.post("".concat("","/api/bulk-import/preview"),t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}});v(r.data),d(2)}catch(r){var t,s;Qt.error((null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.detail)||"File preview failed"),m(null)}finally{p(!1)}},C=()=>{d(1),m(null),v(null),y(null)},E=()=>{C(),(async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat("","/api/bulk-import/template/").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});N(t.data)}catch(e){Qt.error("Template load \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}})(),o(!0)};return(0,qr.jsxs)(qr.Fragment,{children:[i?(0,qr.jsx)("div",{onClick:E,children:i}):(0,qr.jsxs)(Dl,{onClick:E,variant:"outline",className:"gap-2 border-indigo-200 text-indigo-700 hover:bg-indigo-50",children:[(0,qr.jsx)(iY,{className:"w-4 h-4"}),"Bulk Import"]}),(0,qr.jsx)(Im,{open:l,onOpenChange:e=>{o(e),e||C()},children:(0,qr.jsxs)(zm,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(_,{className:"w-5 h-5 text-indigo-600"}),"\ud83d\udce5 Bulk Import ",S]}),(0,qr.jsxs)(qm,{children:["CSV \u092f\u093e Excel file \u0938\u0947 \u090f\u0915 \u0938\u093e\u0925 \u092c\u0939\u0941\u0924 \u0938\u093e\u0930\u0947 ","student"===a?"students":"employees"," add \u0915\u0930\u0947\u0902"]})]}),1===c&&(0,qr.jsxs)("div",{className:"space-y-6 py-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\ud83d\udccb Step 1: Download Template"}),(0,qr.jsx)("p",{className:"text-sm text-blue-600 mb-3",children:"\u092a\u0939\u0932\u0947 template download \u0915\u0930\u0947\u0902, \u0905\u092a\u0928\u093e data \u092d\u0930\u0947\u0902, \u092b\u093f\u0930 upload \u0915\u0930\u0947\u0902\u0964"}),(0,qr.jsxs)(Dl,{onClick:()=>{if(!j)return;const e=new Blob([j.sample_csv],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="".concat(a,"_import_template.csv"),s.click(),window.URL.revokeObjectURL(t),Qt.success("Template downloaded!")},disabled:!j,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[(0,qr.jsx)(xh,{className:"w-4 h-4"}),"Download Template CSV"]}),j&&(0,qr.jsxs)("div",{className:"mt-3 text-xs text-blue-700",children:[(0,qr.jsx)("p",{className:"font-medium",children:"Required columns:"}),(0,qr.jsxs)("p",{className:"opacity-80",children:[j.headers.slice(0,8).join(", "),"..."]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-emerald-800 mb-2",children:"\ud83d\udce4 Step 2: Upload Your File"}),(0,qr.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",className:"hidden",ref:w,onChange:async e=>{const t=e.target.files[0];if(!t)return;const a=t.name.substring(t.name.lastIndexOf(".")).toLowerCase();[".csv",".xlsx",".xls"].includes(a)?t.size>10485760?Qt.error("File size should be less than 10MB"):(m(t),await k(t)):Qt.error("Only CSV or Excel files are allowed")}}),(0,qr.jsx)("div",{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"border-2 border-dashed border-emerald-300 rounded-lg p-8 text-center cursor-pointer hover:border-emerald-500 hover:bg-emerald-100 transition-all",children:h?(0,qr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,qr.jsx)(Bc,{className:"w-10 h-10 text-emerald-600 animate-spin mb-2"}),(0,qr.jsx)("p",{className:"text-emerald-700",children:"Processing file..."})]}):(0,qr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,qr.jsx)(lY,{className:"w-10 h-10 text-emerald-500 mb-2"}),(0,qr.jsx)("p",{className:"text-emerald-700 font-medium",children:"Click to upload CSV or Excel"}),(0,qr.jsx)("p",{className:"text-sm text-emerald-600",children:"\u092f\u093e file \u092f\u0939\u093e\u0901 drag \u0915\u0930\u0947\u0902"})]})}),(0,qr.jsx)("p",{className:"text-xs text-emerald-600 mt-2",children:"Supported: CSV, XLSX, XLS | Max size: 10MB"})]}),(0,qr.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-amber-800 mb-2",children:"\ud83d\udca1 Tips"}),(0,qr.jsxs)("ul",{className:"text-sm text-amber-700 space-y-1",children:[(0,qr.jsx)("li",{children:"\u2022 First row should be headers (column names)"}),(0,qr.jsx)("li",{children:"\u2022 Mobile numbers should be 10 digits"}),(0,qr.jsx)("li",{children:"\u2022 Date format: YYYY-MM-DD (e.g., 2024-01-15)"}),(0,qr.jsx)("li",{children:"\u2022 Existing software (Tally, other ERP) \u0938\u0947 export \u0915\u0930\u0915\u0947 upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902"})]})]})]}),2===c&&g&&(0,qr.jsxs)("div",{className:"space-y-4 py-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg text-center",children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-800",children:g.total_rows}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Rows"})]}),(0,qr.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg text-center",children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:g.valid_rows}),(0,qr.jsx)("p",{className:"text-sm text-emerald-600",children:"Valid"})]}),(0,qr.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg text-center",children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-red-600",children:g.invalid_rows}),(0,qr.jsx)("p",{className:"text-sm text-red-600",children:"Invalid"})]})]}),(0,qr.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,qr.jsx)("div",{className:"bg-slate-100 px-4 py-2 font-medium text-slate-700",children:"Preview (First 10 rows)"}),(0,qr.jsx)("div",{className:"max-h-64 overflow-auto",children:(0,qr.jsxs)("table",{className:"w-full text-sm",children:[(0,qr.jsx)("thead",{className:"bg-slate-50 sticky top-0",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"px-3 py-2 text-left",children:"Row"}),(0,qr.jsx)("th",{className:"px-3 py-2 text-left",children:"Name"}),(0,qr.jsx)("th",{className:"px-3 py-2 text-left",children:"student"===a?"Class":"Designation"}),(0,qr.jsx)("th",{className:"px-3 py-2 text-left",children:"Mobile"}),(0,qr.jsx)("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),(0,qr.jsx)("tbody",{children:g.preview_data.map((e,t)=>(0,qr.jsxs)("tr",{className:e.is_valid?"":"bg-red-50",children:[(0,qr.jsx)("td",{className:"px-3 py-2 border-t",children:e.row_number}),(0,qr.jsx)("td",{className:"px-3 py-2 border-t",children:e.data.name||"-"}),(0,qr.jsx)("td",{className:"px-3 py-2 border-t",children:"student"===a?e.data.class_name:e.data.designation}),(0,qr.jsx)("td",{className:"px-3 py-2 border-t",children:e.data.mobile||"-"}),(0,qr.jsx)("td",{className:"px-3 py-2 border-t",children:e.is_valid?(0,qr.jsx)(Km,{className:"w-4 h-4 text-emerald-500"}):(0,qr.jsx)(eY,{className:"w-4 h-4 text-red-500"})})]},t))})]})})]}),g.all_errors.length>0&&(0,qr.jsxs)("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[(0,qr.jsxs)("h4",{className:"font-medium text-red-800 mb-2 flex items-center gap-2",children:[(0,qr.jsx)(QU,{className:"w-4 h-4"}),"Errors (",g.all_errors.length,")"]}),(0,qr.jsx)("ul",{className:"text-sm text-red-700 space-y-1 max-h-32 overflow-auto",children:g.all_errors.slice(0,10).map((e,t)=>(0,qr.jsxs)("li",{children:["\u2022 ",e]},t))})]}),(0,qr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>{d(1),m(null)},children:"\u2190 Back"}),(0,qr.jsx)(Dl,{onClick:async()=>{if(u){f(!0);try{const e=new FormData;e.append("file",u),e.append("import_type",a),e.append("school_id",n),e.append("skip_invalid","true");const t=localStorage.getItem("token"),s=await Hr.post("".concat("","/api/bulk-import/execute"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});y(s.data),d(3),Qt.success("".concat(s.data.success_count," ").concat(a,"s imported!")),r&&r()}catch(s){var e,t;Qt.error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Import failed")}finally{f(!1)}}},disabled:x||0===g.valid_rows,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 gap-2",children:x?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)($U,{className:"w-4 h-4"}),"Import ",g.valid_rows," Valid Rows"]})})]})]}),3===c&&b&&(0,qr.jsxs)("div",{className:"space-y-4 py-4 text-center",children:[(0,qr.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full ".concat(b.success_count>0?"bg-emerald-100":"bg-red-100"),children:b.success_count>0?(0,qr.jsx)(Km,{className:"w-8 h-8 text-emerald-600"}):(0,qr.jsx)(eY,{className:"w-8 h-8 text-red-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"text-xl font-bold text-slate-800",children:b.success_count>0?"Import Successful!":"Import Failed"}),(0,qr.jsxs)("p",{className:"text-slate-500",children:[b.success_count," ",a,"s imported successfully"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg",children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:b.success_count}),(0,qr.jsx)("p",{className:"text-sm text-emerald-600",children:"Success"})]}),(0,qr.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-red-600",children:b.error_count}),(0,qr.jsx)("p",{className:"text-sm text-red-600",children:"Failed"})]})]}),(null===(t=b.errors)||void 0===t?void 0:t.length)>0&&(0,qr.jsxs)("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200 text-left",children:[(0,qr.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"Errors:"}),(0,qr.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:b.errors.slice(0,5).map((e,t)=>{var a;return(0,qr.jsxs)("li",{children:["\u2022 Row ",e.row,": ",e.error||(null===(a=e.errors)||void 0===a?void 0:a.join(", "))]},t)})})]}),(0,qr.jsx)(Dl,{onClick:()=>o(!1),className:"w-full",children:"Done"})]})]})})]})}const cY=Dc("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),dY=[{id:"birth_certificate",label:"Birth Certificate (\u091c\u0928\u094d\u092e \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcc4"},{id:"aadhar_card",label:"Aadhar Card (\u0906\u0927\u093e\u0930 \u0915\u093e\u0930\u094d\u0921)",required:!1,icon:"\ud83c\udd94"},{id:"transfer_certificate",label:"Transfer Certificate (TC)",required:!1,icon:"\ud83d\udccb"},{id:"marksheet",label:"Previous Marksheet (\u092a\u093f\u091b\u0932\u0940 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"caste_certificate",label:"Caste Certificate (\u091c\u093e\u0924\u093f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcdc"},{id:"income_certificate",label:"Income Certificate (\u0906\u092f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcb0"},{id:"domicile_certificate",label:"Domicile Certificate (\u092e\u0942\u0932 \u0928\u093f\u0935\u093e\u0938)",required:!1,icon:"\ud83c\udfe0"},{id:"passport_photo",label:"Passport Photo (\u092a\u093e\u0938\u092a\u094b\u0930\u094d\u091f \u092b\u094b\u091f\u094b)",required:!1,icon:"\ud83d\udcf7"},{id:"father_aadhar",label:"Father Aadhar (\u092a\u093f\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)",required:!1,icon:"\ud83d\udc68"},{id:"mother_aadhar",label:"Mother Aadhar (\u092e\u093e\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)",required:!1,icon:"\ud83d\udc69"},{id:"bpl_card",label:"BPL Card (\u092c\u0940\u092a\u0940\u090f\u0932 \u0915\u093e\u0930\u094d\u0921)",required:!1,icon:"\ud83c\udfab"},{id:"bank_passbook",label:"Bank Passbook (\u092c\u0948\u0902\u0915 \u092a\u093e\u0938\u092c\u0941\u0915)",required:!1,icon:"\ud83c\udfe6"},{id:"other",label:"Other Document (\u0905\u0928\u094d\u092f)",required:!1,icon:"\ud83d\udcc1"}],uY=[{id:"aadhar_card",label:"Aadhar Card (\u0906\u0927\u093e\u0930 \u0915\u093e\u0930\u094d\u0921)",required:!0,icon:"\ud83c\udd94"},{id:"pan_card",label:"PAN Card (\u092a\u0948\u0928 \u0915\u093e\u0930\u094d\u0921)",required:!1,icon:"\ud83d\udcb3"},{id:"resume",label:"Resume/CV (\u092c\u093e\u092f\u094b\u0921\u093e\u091f\u093e)",required:!1,icon:"\ud83d\udcc4"},{id:"photo",label:"Passport Photo (\u092a\u093e\u0938\u092a\u094b\u0930\u094d\u091f \u092b\u094b\u091f\u094b)",required:!0,icon:"\ud83d\udcf7"},{id:"marksheet_10th",label:"10th Marksheet (\u0926\u0938\u0935\u0940\u0902 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"marksheet_12th",label:"12th Marksheet (\u092c\u093e\u0930\u0939\u0935\u0940\u0902 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"marksheet_graduation",label:"Graduation Marksheet (\u0938\u094d\u0928\u093e\u0924\u0915 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"marksheet_pg",label:"Post Graduation (\u0938\u094d\u0928\u093e\u0924\u0915\u094b\u0924\u094d\u0924\u0930 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"degree_certificate",label:"Degree Certificate (\u0921\u093f\u0917\u094d\u0930\u0940 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83c\udf93"},{id:"bed_certificate",label:"B.Ed Certificate (B.Ed \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83c\udf93"},{id:"experience_letter",label:"Experience Letter (\u0905\u0928\u0941\u092d\u0935 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udccb"},{id:"relieving_letter",label:"Relieving Letter (\u092e\u0941\u0915\u094d\u0924\u093f \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcdd"},{id:"police_verification",label:"Police Verification (\u092a\u0941\u0932\u093f\u0938 \u0938\u0924\u094d\u092f\u093e\u092a\u0928)",required:!1,icon:"\ud83d\ude94"},{id:"medical_certificate",label:"Medical Certificate (\u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83c\udfe5"},{id:"bank_details",label:"Bank Account Details (\u092c\u0948\u0902\u0915 \u0916\u093e\u0924\u093e)",required:!1,icon:"\ud83c\udfe6"},{id:"address_proof",label:"Address Proof (\u092a\u0924\u093e \u092a\u094d\u0930\u092e\u093e\u0923)",required:!1,icon:"\ud83c\udfe0"},{id:"other",label:"Other Document (\u0905\u0928\u094d\u092f)",required:!1,icon:"\ud83d\udcc1"}];function mY(e){let{personId:t,personType:a="student",schoolId:n,existingDocuments:r=[],onUploadComplete:i,compact:l=!1}=e;const[o,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(r),[m,h]=(0,s.useState)(null),[p,x]=((0,s.useRef)(null),(0,s.useState)(null)),f="student"===a?dY:uY,g=async(e,s)=>{const r=e.target.files[0];if(!r)return;if(r.size>5242880)return void Qt.error("File size should be less than 5MB");if(["image/jpeg","image/png","image/jpg","application/pdf"].includes(r.type)){c(s);try{var l;const e=new FormData;e.append("file",r),e.append("document_type",s),e.append("person_id",t),e.append("person_type",a),e.append("school_id",n);const o=localStorage.getItem("token"),c=await Hr.post("".concat("","/api/documents/upload"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}}),d={id:c.data.id,document_type:s,file_name:r.name,file_url:c.data.file_url,uploaded_at:(new Date).toISOString()};u(e=>[...e.filter(e=>e.document_type!==s),d]),Qt.success("".concat(null===(l=f.find(e=>e.id===s))||void 0===l?void 0:l.label," uploaded!")),i&&i(d)}catch(m){var o,d;console.error("Upload error:",m),Qt.error((null===(o=m.response)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.detail)||"Upload failed")}finally{c(null),e.target.value=""}}else Qt.error("Only JPG, PNG or PDF files allowed")},v=e=>d.find(t=>t.document_type===e);return l?(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("h4",{className:"font-medium text-slate-700 flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-4 h-4"}),"Documents (",d.length,"/",f.length,")"]}),(0,qr.jsx)("div",{className:"flex flex-wrap gap-2",children:f.slice(0,6).map(e=>{const t=v(e.id);return(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.pdf",className:"hidden",id:"doc-".concat(e.id),onChange:t=>g(t,e.id)}),(0,qr.jsxs)("label",{htmlFor:"doc-".concat(e.id),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium cursor-pointer transition-all ".concat(t?"bg-emerald-100 text-emerald-700 border border-emerald-300":"bg-slate-100 text-slate-600 border border-slate-200 hover:bg-slate-200"),children:[o===e.id?(0,qr.jsx)(Bc,{className:"w-3 h-3 animate-spin"}):t?(0,qr.jsx)(ph,{className:"w-3 h-3"}):(0,qr.jsx)("span",{children:e.icon}),e.label.split(" (")[0]]})]},e.id)})})]}):(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-5 h-5 text-indigo-600"}),"\ud83d\udcc1 Documents Upload (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0905\u092a\u0932\u094b\u0921)"]}),(0,qr.jsxs)("span",{className:"text-sm text-slate-500",children:[d.length,"/",f.length," uploaded"]})]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:f.map(e=>{var t;const a=v(e.id),s=o===e.id;return(0,qr.jsxs)("div",{className:"relative p-3 rounded-lg border-2 transition-all ".concat(a?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50"),children:[(0,qr.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.pdf",className:"hidden",id:"upload-".concat(e.id),onChange:t=>g(t,e.id)}),(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("span",{className:"text-lg",children:e.icon}),(0,qr.jsx)("p",{className:"text-sm font-medium text-slate-700 mt-1",children:e.label.split(" (")[0]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:null===(t=e.label.split(" (")[1])||void 0===t?void 0:t.replace(")","")})]}),e.required&&!a&&(0,qr.jsx)("span",{className:"text-red-500 text-xs",children:"*"})]}),a?(0,qr.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1 text-xs text-emerald-600",children:[(0,qr.jsx)(ph,{className:"w-3 h-3"}),"Uploaded"]}),(0,qr.jsx)("button",{onClick:()=>window.open(a.file_url,"_blank"),className:"p-1 text-indigo-600 hover:bg-indigo-100 rounded",title:"View",children:(0,qr.jsx)(Hc,{className:"w-3 h-3"})}),(0,qr.jsx)("button",{onClick:()=>(async e=>{const t=d.find(t=>t.document_type===e);if(t)try{const a=localStorage.getItem("token");await Hr.delete("".concat("","/api/documents/").concat(t.id),{headers:{Authorization:"Bearer ".concat(a)}}),u(t=>t.filter(t=>t.document_type!==e)),Qt.success("Document deleted")}catch(a){Qt.error("Delete failed")}})(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:(0,qr.jsx)(iH,{className:"w-3 h-3"})})]}):(0,qr.jsx)("label",{htmlFor:"upload-".concat(e.id),className:"mt-2 flex items-center justify-center gap-1 px-2 py-1.5 bg-slate-100 hover:bg-indigo-100 rounded text-xs text-slate-600 hover:text-indigo-700 cursor-pointer transition-all",children:s?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-3 h-3 animate-spin"}),"Uploading..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)($U,{className:"w-3 h-3"}),"Upload"]})})]},e.id)})}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[(0,qr.jsx)(QU,{className:"w-3 h-3"}),"Max file size: 5MB | Supported: JPG, PNG, PDF"]})]})}const hY="".concat("","/api");function pY(){const{t:e}=js(),{schoolId:t,user:a}=Kr(),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(""),[x,f]=(0,s.useState)(""),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),[A,P]=(0,s.useState)(null),[O,M]=(0,s.useState)(null),[T,D]=(0,s.useState)(null),[I,R]=(0,s.useState)(null),[L,F]=(0,s.useState)(null),[z,B]=(0,s.useState)(!1),[U,H]=(0,s.useState)(null),[q,V]=(0,s.useState)(!1),[W,G]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(!1),[J,$]=(0,s.useState)({fromClassId:"",toClassId:"",selectedStudentIds:[],selectAll:!1}),[Q,X]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(null),[te,ae]=(0,s.useState)(!1),[se,ne]=(0,s.useState)(!1),[re,ie]=(0,s.useState)(null),[le,oe]=(0,s.useState)(""),[ce,de]=(0,s.useState)(!1),[ue,me]=(0,s.useState)(!1),[he,pe]=(0,s.useState)(null),[xe,fe]=(0,s.useState)(!1),[ge,ve]=(0,s.useState)(null),[be,ye]=(0,s.useState)(!1),[je,Ne]=(0,s.useState)(null),we=(0,s.useRef)(null),Se=(0,s.useRef)(null),[_e,ke]=(0,s.useState)("basic"),[Ce,Ee]=(0,s.useState)({name:"",class_id:"",dob:"",gender:"male",blood_group:"",admission_date:(new Date).toISOString().split("T")[0],aadhar_no:"",scholar_no:"",pen_number:"",sssmid:"",samagra_family_id:"",jan_aadhar_no:"",caste:"",sub_caste:"",religion:"",category:"",nationality:"Indian",mother_tongue:"",birth_place:"",identification_mark:"",rte_status:!1,father_name:"",father_occupation:"",father_qualification:"",mother_name:"",mother_occupation:"",mother_qualification:"",guardian_name:"",guardian_relation:"",guardian_mobile:"",guardian_occupation:"",annual_income:"",mobile:"",parent_phone:"",email:"",address:"",emergency_contact:"",emergency_contact_name:"",bank_name:"",bank_account_no:"",ifsc_code:"",bank_branch:"",transport_mode:"",bus_route:"",bus_stop:"",pickup_point:"",is_hosteler:!1,hostel_room_no:"",medical_conditions:"",allergies:"",previous_school:"",previous_class:"",previous_percentage:"",tc_number:""}),[Ae,Pe]=(0,s.useState)({birth_certificate:null,aadhar_card:null,transfer_certificate:null,marksheet:null,caste_certificate:null,income_certificate:null,passport_photo:null}),[Oe,Me]=(0,s.useState)({father_photo:null,mother_photo:null,guardian_photo:null}),[Te,De]=(0,s.useState)(null),[Ie,Re]=((0,s.useRef)(null),(0,s.useRef)(null),(0,s.useState)(null)),[Le,Fe]=(0,s.useState)({reason:"fees_pending",details:""}),ze={fees_pending:"Fees Pending (\u0936\u0941\u0932\u094d\u0915 \u092c\u0915\u093e\u092f\u093e)",misconduct:"Misconduct (\u0905\u0928\u0941\u0936\u093e\u0938\u0928\u0939\u0940\u0928\u0924\u093e)",document_pending:"Document Pending (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0932\u0902\u092c\u093f\u0924)",attendance_low:"Low Attendance (\u0915\u092e \u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f)",other:"Other (\u0905\u0928\u094d\u092f)"};(0,s.useEffect)(()=>{t&&(Be(),Ue())},[t,h,x]);const Be=async()=>{try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)};let s="".concat(hY,"/students?school_id=").concat(t);h&&(s+="&search=".concat(h)),x&&(s+="&class_id=".concat(x));const[n,i]=await Promise.all([Hr.get("".concat(s,"&status=active"),{headers:a}),Hr.get("".concat(s,"&status=suspended"),{headers:a})]);r(n.data),l(i.data)}catch(e){Qt.error("Failed to fetch students")}finally{m(!1)}},Ue=async()=>{try{const e=localStorage.getItem("token"),a=await Hr.get("".concat(hY,"/classes?school_id=").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});c(a.data)}catch(e){console.error("Failed to fetch classes")}},He=()=>{je&&(je.getTracks().forEach(e=>e.stop()),Ne(null)),ye(!1)},qe=e=>"\ud83d\udcda *StudyTino Login Details*\n\n\ud83d\udc64 Student: ".concat(e.name,"\n\ud83c\udfeb Class: ").concat(e.class_name||"N/A","\n\n\ud83d\udd10 *Login Credentials:*\nStudent ID: ").concat(e.student_id,"\nPassword: ").concat(e.default_password,"\n\n\ud83d\udcf1 App Link: ").concat(window.location.origin,"/studytino\n\nNote: First login \u092a\u0930 password change \u0915\u0930\u0947\u0902\u0964"),Ve=()=>{D(null),ke("basic"),Ee({name:"",class_id:"",dob:"",gender:"male",blood_group:"",admission_date:(new Date).toISOString().split("T")[0],aadhar_no:"",scholar_no:"",pen_number:"",sssmid:"",samagra_family_id:"",jan_aadhar_no:"",caste:"",sub_caste:"",religion:"",category:"",nationality:"Indian",mother_tongue:"",birth_place:"",identification_mark:"",rte_status:!1,father_name:"",father_occupation:"",father_qualification:"",mother_name:"",mother_occupation:"",mother_qualification:"",guardian_name:"",guardian_relation:"",guardian_mobile:"",guardian_occupation:"",annual_income:"",mobile:"",parent_phone:"",email:"",address:"",emergency_contact:"",emergency_contact_name:"",bank_name:"",bank_account_no:"",ifsc_code:"",bank_branch:"",transport_mode:"",bus_route:"",bus_stop:"",pickup_point:"",is_hosteler:!1,hostel_room_no:"",medical_conditions:"",allergies:"",previous_school:"",previous_class:"",previous_percentage:"",tc_number:""})},We=e=>{Ee(t=>u(u({},t),{},{[e.target.name]:e.target.value}))},Ge=(e,t)=>{navigator.clipboard.writeText(e),H(t),setTimeout(()=>H(null),2e3),Qt.success("Copied!")},Ke=e=>{switch(e){case"active":return"badge-success";case"suspended":return"badge-warning";case"left":return"badge-error";default:return"badge-info"}};return t?(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"students-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:e("students")}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Student Admission & Management"})]}),(0,qr.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,qr.jsx)(oY,{type:"student",schoolId:t,onImportComplete:Be}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>G(!0),className:"gap-2 text-green-600 border-green-200 hover:bg-green-50","data-testid":"promote-students-btn",children:[(0,qr.jsx)(Fc,{className:"w-4 h-4"}),"Promote Students"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:async()=>{if(0!==n.length){V(!0),Qt.info("Generating ID cards...");try{const t=localStorage.getItem("token"),a=n.filter(e=>"active"===e.status),s=[];for(const n of a)try{var e;const a=await Hr.get(hY+"/id-card/generate/student/"+n.id,{headers:{Authorization:"Bearer "+t}});null!==(e=a.data)&&void 0!==e&&e.id_card&&s.push({card:a.data.id_card,school:a.data.school})}catch(J1){console.error("Error fetching card for",n.name)}const r=window.open("","_blank");if(!r)return Qt.error("Popup blocked - please allow popups"),void V(!1);const i="<!DOCTYPE html><html><head><title>Bulk Student ID Cards</title><style>@page{size:A4;margin:10mm}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;display:flex;flex-wrap:wrap;gap:10mm;padding:10mm;-webkit-print-color-adjust:exact;print-color-adjust:exact}.id-card{width:85.6mm;height:54mm;background:linear-gradient(135deg,#1e40af 0%,#3b82f6 50%,#1e40af 100%);border-radius:4mm;overflow:hidden;position:relative;color:white;padding:3mm;page-break-inside:avoid}.watermark{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0.15;width:25mm;height:25mm}.watermark img{width:100%;height:100%;object-fit:contain}.content{position:relative;z-index:1;height:100%;display:flex;flex-direction:column}.header{display:flex;align-items:center;gap:2mm;padding-bottom:2mm;border-bottom:0.3mm solid rgba(255,255,255,0.3);margin-bottom:2mm}.header-logo{width:7mm;height:7mm;background:white;border-radius:50%;padding:0.5mm}.header-logo img{width:100%;height:100%;object-fit:contain;border-radius:50%}.header-text{flex:1;text-align:center}.school-name{font-size:8pt;font-weight:bold;text-transform:uppercase}.card-type{font-size:5pt;background:rgba(255,255,255,0.25);padding:0.5mm 2mm;border-radius:2mm;display:inline-block;margin-top:1mm}.body{display:flex;gap:2mm;flex:1}.photo{width:16mm;height:20mm;background:white;border-radius:2mm;display:flex;align-items:center;justify-content:center;color:#999;font-size:6pt}.details{flex:1;font-size:6pt}.name{font-size:9pt;font-weight:bold;color:#fef08a;margin-bottom:1mm}.detail-row{margin-bottom:0.5mm}.label{opacity:0.8;width:12mm;display:inline-block}.value{font-weight:600}.contact{background:rgba(255,255,255,0.2);padding:1mm;border-radius:1mm;margin-top:1mm;font-size:5.5pt}.footer{font-size:4pt;opacity:0.8;text-align:right;margin-top:auto}</style></head><body>"+s.map(e=>{const t=e.card,a=e.school,s=null!==a&&void 0!==a&&a.logo_url?'<div class="watermark"><img src="'+a.logo_url+'" alt=""/></div>':"",n=null!==a&&void 0!==a&&a.logo_url?'<div class="header-logo"><img src="'+a.logo_url+'" alt=""/></div>':"",r=t.parent_phone||t.phone||"";return'<div class="id-card">'+s+'<div class="content"><div class="header">'+n+'<div class="header-text"><div class="school-name">'+((null===a||void 0===a?void 0:a.name)||"School")+'</div><div class="card-type">STUDENT ID CARD</div></div></div><div class="body"><div class="photo"><span>Photo</span></div><div class="details"><div class="name">'+t.name+'</div><div class="detail-row"><span class="label">Class:</span><span class="value">'+(t.class||"")+'</span></div><div class="detail-row"><span class="label">Father:</span><span class="value">'+(t.father_name||"")+"</span></div>"+(t.blood_group?'<div class="detail-row"><span class="label">Blood:</span><span class="value">'+t.blood_group+"</span></div>":"")+(r?'<div class="contact">\ud83d\udcde Parent: '+r+"</div>":"")+'</div></div><div class="footer">Valid: '+(t.valid_until||(new Date).getFullYear()+1)+"</div></div></div>"}).join("")+"<script>window.onload=function(){setTimeout(function(){window.print()},1000)}<\/script></body></html>";r.document.write(i),r.document.close(),Qt.success(s.length+" ID cards ready to print!")}catch(t){Qt.error("Error generating bulk ID cards")}finally{V(!1)}}else Qt.error("No students to print")},disabled:q||0===n.length,className:"gap-2","data-testid":"bulk-print-btn",children:[q?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):(0,qr.jsx)(YU,{className:"w-4 h-4"}),"Bulk Print ID Cards"]}),(0,qr.jsxs)(Im,{open:g,onOpenChange:e=>{v(e),e||Ve()},children:[(0,qr.jsx)(Rm,{asChild:!0,children:(0,qr.jsxs)(Dl,{className:"btn-primary","data-testid":"add-student-btn",children:[(0,qr.jsx)(kh,{className:"w-5 h-5 mr-2"}),"New Admission"]})}),(0,qr.jsxs)(zm,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{className:"text-xl",children:T?"Edit Student":"\ud83d\udcdd New Student Admission Form"}),(0,qr.jsx)(qm,{children:!T&&"Student ID \u0914\u0930 Password automatically generate \u0939\u094b\u0902\u0917\u0947\u0964 \u0938\u092d\u0940 * fields \u092d\u0930\u0928\u093e \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0964"})]}),(0,qr.jsx)("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg mb-4 overflow-x-auto",children:[{id:"basic",label:"\ud83d\udccb Basic"},{id:"identity",label:"\ud83c\udd94 ID & Docs"},{id:"family",label:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family & Contact"},{id:"bank",label:"\ud83c\udfe6 Bank"},{id:"other",label:"\ud83d\ude8c Transport & Medical"},{id:"documents",label:"\ud83d\udcc4 Documents"}].map(e=>(0,qr.jsx)("button",{type:"button",onClick:()=>ke(e.id),className:"flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat(_e===e.id?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:bg-white/50"),children:e.label},e.id))}),(0,qr.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),B(!0);try{const a=u(u({},Ce),{},{school_id:t}),s=localStorage.getItem("token"),n={Authorization:"Bearer ".concat(s)};if(T)await Hr.put("".concat(hY,"/students/").concat(T.id),a,{headers:n}),Qt.success(e("saved_successfully")),v(!1);else{const e=await Hr.post("".concat(hY,"/students/admit"),a,{headers:n}),i=e.data.student_id;if(ge)try{const e=ge.split(",")[1],a=atob(e),n=new Array(a.length);for(let t=0;t<a.length;t++)n[t]=a.charCodeAt(t);const r=new Uint8Array(n),l=new Blob([r],{type:"image/jpeg"}),o=new FormData;o.append("photo",l,"admission_photo.jpg"),o.append("student_id",i),o.append("school_id",t),o.append("photo_type","front"),await Hr.post("".concat(hY,"/face-recognition/upload-photo"),o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}}),Qt.success("Face photo uploaded for AI attendance! \ud83d\udcf8")}catch(r){console.error("Photo upload failed:",r),Qt.info("Student created but photo upload failed. Add later from profile.")}F({student_id:i,name:e.data.name,login_id:e.data.login_id,temporary_password:e.data.temporary_password,class_name:e.data.class_name,section:e.data.section}),v(!1),y(!0)}Ve(),ve(null),Be()}catch(i){var s,n;const t=null===(s=i.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail;Qt.error("string"===typeof t?t:e("something_went_wrong"))}finally{B(!1)}},className:"space-y-4",children:["basic"===_e&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udccb Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("student_name")," *"]}),(0,qr.jsx)(Rl,{name:"name",value:Ce.name,onChange:We,required:!0,placeholder:"Student Full Name","data-testid":"student-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("class_section")," *"]}),(0,qr.jsxs)("select",{name:"class_id",value:Ce.class_id,onChange:We,required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"class-select",children:[(0,qr.jsx)("option",{value:"",children:e("select_class")}),o.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name,e.section&&"A"!==e.section?" - ".concat(e.section):""]},e.id))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("gender")," *"]}),(0,qr.jsxs)("select",{name:"gender",value:Ce.gender,onChange:We,required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"gender-select",children:[(0,qr.jsx)("option",{value:"male",children:e("male")}),(0,qr.jsx)("option",{value:"female",children:e("female")}),(0,qr.jsx)("option",{value:"other",children:e("other")})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("dob")," *"]}),(0,qr.jsx)(Rl,{name:"dob",type:"date",value:Ce.dob,onChange:We,required:!0,max:(new Date).toISOString().split("T")[0],"data-testid":"dob-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Admission Date *"}),(0,qr.jsx)(Rl,{name:"admission_date",type:"date",value:Ce.admission_date,onChange:We,required:!0,max:(new Date).toISOString().split("T")[0],"data-testid":"admission-date-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:e("blood_group")}),(0,qr.jsxs)("select",{name:"blood_group",value:Ce.blood_group,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),["A+","A-","B+","B-","O+","O-","AB+","AB-"].map(e=>(0,qr.jsx)("option",{value:e,children:e},e))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Birth Place (\u091c\u0928\u094d\u092e \u0938\u094d\u0925\u093e\u0928)"}),(0,qr.jsx)(Rl,{name:"birth_place",value:Ce.birth_place,onChange:We,placeholder:"City/Village"})]}),(0,qr.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,qr.jsx)(ql,{children:"Identification Mark (\u092a\u0939\u091a\u093e\u0928 \u091a\u093f\u0928\u094d\u0939)"}),(0,qr.jsx)(Rl,{name:"identification_mark",value:Ce.identification_mark,onChange:We,placeholder:"Mole on right cheek, etc."})]})]})]}),"identity"===_e&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83c\udd94 Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Scholar No. / Enrollment No."}),(0,qr.jsx)(Rl,{name:"scholar_no",value:Ce.scholar_no,onChange:We,placeholder:"If existing student"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"PEN Number (CBSE)"}),(0,qr.jsx)(Rl,{name:"pen_number",value:Ce.pen_number,onChange:We,placeholder:"Permanent Education Number"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Aadhar Number"}),(0,qr.jsx)(Rl,{name:"aadhar_no",value:Ce.aadhar_no,onChange:We,placeholder:"12 digit Aadhar","data-testid":"aadhar-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"SSSMID / Samagra ID (MP)"}),(0,qr.jsx)(Rl,{name:"sssmid",value:Ce.sssmid,onChange:We,placeholder:"\u0938\u092e\u0917\u094d\u0930 ID","data-testid":"samgra-id-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Samagra Family ID (MP)"}),(0,qr.jsx)(Rl,{name:"samagra_family_id",value:Ce.samagra_family_id,onChange:We,placeholder:"\u0938\u092e\u0917\u094d\u0930 \u092a\u0930\u093f\u0935\u093e\u0930 ID"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Jan Aadhar / Bhamashah (RJ)"}),(0,qr.jsx)(Rl,{name:"jan_aadhar_no",value:Ce.jan_aadhar_no,onChange:We,placeholder:"\u091c\u0928 \u0906\u0927\u093e\u0930"})]})]}),(0,qr.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-700 mb-3",children:"\ud83d\udcc2 Category Information (\u0936\u094d\u0930\u0947\u0923\u0940)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Caste (\u091c\u093e\u0924\u093f)"}),(0,qr.jsxs)("select",{name:"caste",value:Ce.caste,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select Caste"}),(0,qr.jsx)("option",{value:"General",children:"General (\u0938\u093e\u092e\u093e\u0928\u094d\u092f)"}),(0,qr.jsx)("option",{value:"OBC",children:"OBC (\u0905\u0928\u094d\u092f \u092a\u093f\u091b\u0921\u093c\u093e \u0935\u0930\u094d\u0917)"}),(0,qr.jsx)("option",{value:"SC",children:"SC (\u0905\u0928\u0941\u0938\u0942\u091a\u093f\u0924 \u091c\u093e\u0924\u093f)"}),(0,qr.jsx)("option",{value:"ST",children:"ST (\u0905\u0928\u0941\u0938\u0942\u091a\u093f\u0924 \u091c\u0928\u091c\u093e\u0924\u093f)"}),(0,qr.jsx)("option",{value:"EWS",children:"EWS (\u0906\u0930\u094d\u0925\u093f\u0915 \u0915\u092e\u091c\u094b\u0930)"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Sub-Caste (\u0909\u092a \u091c\u093e\u0924\u093f)"}),(0,qr.jsx)(Rl,{name:"sub_caste",value:Ce.sub_caste,onChange:We,placeholder:"Sub-caste"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Religion (\u0927\u0930\u094d\u092e)"}),(0,qr.jsxs)("select",{name:"religion",value:Ce.religion,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select Religion"}),(0,qr.jsx)("option",{value:"Hindu",children:"Hindu (\u0939\u093f\u0928\u094d\u0926\u0942)"}),(0,qr.jsx)("option",{value:"Muslim",children:"Muslim (\u092e\u0941\u0938\u094d\u0932\u093f\u092e)"}),(0,qr.jsx)("option",{value:"Christian",children:"Christian (\u0908\u0938\u093e\u0908)"}),(0,qr.jsx)("option",{value:"Sikh",children:"Sikh (\u0938\u093f\u0916)"}),(0,qr.jsx)("option",{value:"Buddhist",children:"Buddhist (\u092c\u094c\u0926\u094d\u0927)"}),(0,qr.jsx)("option",{value:"Jain",children:"Jain (\u091c\u0948\u0928)"}),(0,qr.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Category (\u0935\u0930\u094d\u0917)"}),(0,qr.jsxs)("select",{name:"category",value:Ce.category,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"APL",children:"APL (\u0917\u0930\u0940\u092c\u0940 \u0930\u0947\u0916\u093e \u0938\u0947 \u090a\u092a\u0930)"}),(0,qr.jsx)("option",{value:"BPL",children:"BPL (\u0917\u0930\u0940\u092c\u0940 \u0930\u0947\u0916\u093e \u0938\u0947 \u0928\u0940\u091a\u0947)"}),(0,qr.jsx)("option",{value:"EWS",children:"EWS (\u0906\u0930\u094d\u0925\u093f\u0915 \u0915\u092e\u091c\u094b\u0930)"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Mother Tongue (\u092e\u093e\u0924\u0943\u092d\u093e\u0937\u093e)"}),(0,qr.jsxs)("select",{name:"mother_tongue",value:Ce.mother_tongue,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Hindi",children:"Hindi (\u0939\u093f\u0928\u094d\u0926\u0940)"}),(0,qr.jsx)("option",{value:"English",children:"English (\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940)"}),(0,qr.jsx)("option",{value:"Marathi",children:"Marathi (\u092e\u0930\u093e\u0920\u0940)"}),(0,qr.jsx)("option",{value:"Gujarati",children:"Gujarati (\u0917\u0941\u091c\u0930\u093e\u0924\u0940)"}),(0,qr.jsx)("option",{value:"Punjabi",children:"Punjabi (\u092a\u0902\u091c\u093e\u092c\u0940)"}),(0,qr.jsx)("option",{value:"Bengali",children:"Bengali (\u092c\u0902\u0917\u093e\u0932\u0940)"}),(0,qr.jsx)("option",{value:"Urdu",children:"Urdu (\u0909\u0930\u094d\u0926\u0942)"}),(0,qr.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Nationality (\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f\u0924\u093e)"}),(0,qr.jsx)(Rl,{name:"nationality",value:Ce.nationality,onChange:We,placeholder:"Indian"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 col-span-2",children:[(0,qr.jsx)("input",{type:"checkbox",id:"rte_status",name:"rte_status",checked:Ce.rte_status,onChange:e=>Ee(u(u({},Ce),{},{rte_status:e.target.checked})),className:"w-4 h-4"}),(0,qr.jsx)(ql,{htmlFor:"rte_status",children:"RTE Admission (\u0936\u093f\u0915\u094d\u0937\u093e \u0915\u093e \u0905\u0927\u093f\u0915\u093e\u0930)"})]})]})]})]}),"family"===_e&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 Family Information (\u092a\u0930\u093f\u0935\u093e\u0930 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,qr.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-blue-800 mb-3",children:"\ud83d\udc68 Father Details (\u092a\u093f\u0924\u093e \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("father_name")," *"]}),(0,qr.jsx)(Rl,{name:"father_name",value:Ce.father_name,onChange:We,required:!0,placeholder:"Father Full Name","data-testid":"father-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Occupation (\u0935\u094d\u092f\u0935\u0938\u093e\u092f)"}),(0,qr.jsxs)("select",{name:"father_occupation",value:Ce.father_occupation,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Government Job",children:"Government Job (\u0938\u0930\u0915\u093e\u0930\u0940 \u0928\u094c\u0915\u0930\u0940)"}),(0,qr.jsx)("option",{value:"Private Job",children:"Private Job (\u092a\u094d\u0930\u093e\u0907\u0935\u0947\u091f \u0928\u094c\u0915\u0930\u0940)"}),(0,qr.jsx)("option",{value:"Business",children:"Business (\u0935\u094d\u092f\u093e\u092a\u093e\u0930)"}),(0,qr.jsx)("option",{value:"Farmer",children:"Farmer (\u0915\u093f\u0938\u093e\u0928)"}),(0,qr.jsx)("option",{value:"Daily Wage",children:"Daily Wage (\u0926\u0948\u0928\u093f\u0915 \u092e\u091c\u0926\u0942\u0930)"}),(0,qr.jsx)("option",{value:"Self Employed",children:"Self Employed (\u0938\u094d\u0935\u0930\u094b\u091c\u0917\u093e\u0930)"}),(0,qr.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Qualification (\u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,qr.jsxs)("select",{name:"father_qualification",value:Ce.father_qualification,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Below 10th",children:"Below 10th"}),(0,qr.jsx)("option",{value:"10th Pass",children:"10th Pass"}),(0,qr.jsx)("option",{value:"12th Pass",children:"12th Pass"}),(0,qr.jsx)("option",{value:"Graduate",children:"Graduate"}),(0,qr.jsx)("option",{value:"Post Graduate",children:"Post Graduate"}),(0,qr.jsx)("option",{value:"Professional",children:"Professional Degree"}),(0,qr.jsx)("option",{value:"Illiterate",children:"Illiterate (\u0905\u0936\u093f\u0915\u094d\u0937\u093f\u0924)"})]})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-pink-50 rounded-lg border border-pink-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-pink-800 mb-3",children:"\ud83d\udc69 Mother Details (\u092e\u093e\u0924\u093e \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("mother_name")," *"]}),(0,qr.jsx)(Rl,{name:"mother_name",value:Ce.mother_name,onChange:We,required:!0,placeholder:"Mother Full Name","data-testid":"mother-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Occupation (\u0935\u094d\u092f\u0935\u0938\u093e\u092f)"}),(0,qr.jsxs)("select",{name:"mother_occupation",value:Ce.mother_occupation,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Housewife",children:"Housewife (\u0917\u0943\u0939\u093f\u0923\u0940)"}),(0,qr.jsx)("option",{value:"Government Job",children:"Government Job"}),(0,qr.jsx)("option",{value:"Private Job",children:"Private Job"}),(0,qr.jsx)("option",{value:"Business",children:"Business"}),(0,qr.jsx)("option",{value:"Teacher",children:"Teacher (\u0936\u093f\u0915\u094d\u0937\u0915)"}),(0,qr.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Qualification (\u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,qr.jsxs)("select",{name:"mother_qualification",value:Ce.mother_qualification,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Below 10th",children:"Below 10th"}),(0,qr.jsx)("option",{value:"10th Pass",children:"10th Pass"}),(0,qr.jsx)("option",{value:"12th Pass",children:"12th Pass"}),(0,qr.jsx)("option",{value:"Graduate",children:"Graduate"}),(0,qr.jsx)("option",{value:"Post Graduate",children:"Post Graduate"}),(0,qr.jsx)("option",{value:"Illiterate",children:"Illiterate"})]})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-amber-800 mb-3",children:"\ud83e\uddd3 Guardian Details (if different from parents)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Guardian Name"}),(0,qr.jsx)(Rl,{name:"guardian_name",value:Ce.guardian_name,onChange:We,placeholder:"Guardian's Full Name"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Relation (\u0930\u093f\u0936\u094d\u0924\u093e)"}),(0,qr.jsxs)("select",{name:"guardian_relation",value:Ce.guardian_relation,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Grandfather",children:"Grandfather (\u0926\u093e\u0926\u093e/\u0928\u093e\u0928\u093e)"}),(0,qr.jsx)("option",{value:"Grandmother",children:"Grandmother (\u0926\u093e\u0926\u0940/\u0928\u093e\u0928\u0940)"}),(0,qr.jsx)("option",{value:"Uncle",children:"Uncle (\u091a\u093e\u091a\u093e/\u092e\u093e\u092e\u093e)"}),(0,qr.jsx)("option",{value:"Aunt",children:"Aunt (\u091a\u093e\u091a\u0940/\u092e\u093e\u092e\u0940)"}),(0,qr.jsx)("option",{value:"Brother",children:"Brother (\u092d\u093e\u0908)"}),(0,qr.jsx)("option",{value:"Sister",children:"Sister (\u092c\u0939\u0928)"}),(0,qr.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Guardian Mobile"}),(0,qr.jsx)(Rl,{name:"guardian_mobile",value:Ce.guardian_mobile,onChange:We,placeholder:"10 digit mobile"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Guardian Occupation"}),(0,qr.jsx)(Rl,{name:"guardian_occupation",value:Ce.guardian_occupation,onChange:We,placeholder:"\u0935\u094d\u092f\u0935\u0938\u093e\u092f"})]})]})]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Annual Family Income (\u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u0906\u092f)"}),(0,qr.jsxs)("select",{name:"annual_income",value:Ce.annual_income,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Below 1 Lakh",children:"Below \u20b91 Lakh"}),(0,qr.jsx)("option",{value:"1-2.5 Lakh",children:"\u20b91 - 2.5 Lakh"}),(0,qr.jsx)("option",{value:"2.5-5 Lakh",children:"\u20b92.5 - 5 Lakh"}),(0,qr.jsx)("option",{value:"5-10 Lakh",children:"\u20b95 - 10 Lakh"}),(0,qr.jsx)("option",{value:"Above 10 Lakh",children:"Above \u20b910 Lakh"})]})]})}),(0,qr.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200 mt-4",children:[(0,qr.jsx)("h4",{className:"font-medium text-green-800 mb-3",children:"\ud83d\udcde Contact Information (\u0938\u0902\u092a\u0930\u094d\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Primary Mobile * (for login)"}),(0,qr.jsx)(Rl,{name:"mobile",value:Ce.mobile,onChange:We,required:!0,placeholder:"Parent's mobile for OTP","data-testid":"mobile-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Secondary Phone (ID Card)"}),(0,qr.jsx)(Rl,{name:"parent_phone",value:Ce.parent_phone,onChange:We,placeholder:"Alternate number","data-testid":"parent-phone-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Email"}),(0,qr.jsx)(Rl,{name:"email",type:"email",value:Ce.email,onChange:We,placeholder:"Optional"})]}),(0,qr.jsxs)("div",{className:"space-y-2 col-span-2 md:col-span-3",children:[(0,qr.jsxs)(ql,{children:[e("address")," *"]}),(0,qr.jsx)(Rl,{name:"address",value:Ce.address,onChange:We,required:!0,placeholder:"Full Address","data-testid":"address-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Emergency Contact Name"}),(0,qr.jsx)(Rl,{name:"emergency_contact_name",value:Ce.emergency_contact_name,onChange:We,placeholder:"Emergency person name"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Emergency Contact Number"}),(0,qr.jsx)(Rl,{name:"emergency_contact",value:Ce.emergency_contact,onChange:We,placeholder:"Emergency mobile"})]})]})]})]}),"bank"===_e&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83c\udfe6 Bank Details (\u091b\u093e\u0924\u094d\u0930\u0935\u0943\u0924\u094d\u0924\u093f \u0915\u0947 \u0932\u093f\u090f)"}),(0,qr.jsx)("p",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"\ud83d\udca1 Scholarship \u0914\u0930 government benefits \u0915\u0947 \u0932\u093f\u090f bank details \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0902"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Bank Name"}),(0,qr.jsx)(Rl,{name:"bank_name",value:Ce.bank_name,onChange:We,placeholder:"State Bank of India"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Account Number"}),(0,qr.jsx)(Rl,{name:"bank_account_no",value:Ce.bank_account_no,onChange:We,placeholder:"Account Number"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"IFSC Code"}),(0,qr.jsx)(Rl,{name:"ifsc_code",value:Ce.ifsc_code,onChange:We,placeholder:"SBIN0001234"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Branch Name"}),(0,qr.jsx)(Rl,{name:"bank_branch",value:Ce.bank_branch,onChange:We,placeholder:"Branch Name"})]})]})]}),"other"===_e&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsxs)("div",{className:"p-4 bg-teal-50 rounded-lg border border-teal-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-teal-800 mb-3",children:"\ud83d\ude8c Transport Details (\u092a\u0930\u093f\u0935\u0939\u0928)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Transport Mode"}),(0,qr.jsxs)("select",{name:"transport_mode",value:Ce.transport_mode,onChange:We,className:"w-full h-10 rounded-lg border border-slate-200 px-3 text-sm",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"School Bus",children:"School Bus"}),(0,qr.jsx)("option",{value:"Private Vehicle",children:"Private Vehicle"}),(0,qr.jsx)("option",{value:"Walking",children:"Walking"}),(0,qr.jsx)("option",{value:"Bicycle",children:"Bicycle"}),(0,qr.jsx)("option",{value:"Auto/Rickshaw",children:"Auto/Rickshaw"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Bus Route"}),(0,qr.jsx)(Rl,{name:"bus_route",value:Ce.bus_route,onChange:We,placeholder:"Route No.",className:"h-10"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Bus Stop"}),(0,qr.jsx)(Rl,{name:"bus_stop",value:Ce.bus_stop,onChange:We,placeholder:"Stop Name",className:"h-10"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,qr.jsx)("input",{type:"checkbox",id:"is_hosteler",name:"is_hosteler",checked:Ce.is_hosteler,onChange:e=>Ee(u(u({},Ce),{},{is_hosteler:e.target.checked})),className:"w-4 h-4"}),(0,qr.jsx)(ql,{htmlFor:"is_hosteler",children:"Hostel Student"})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-red-800 mb-3",children:"\ud83c\udfe5 Medical Information"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Medical Conditions (\u092c\u0940\u092e\u093e\u0930\u093f\u092f\u093e\u0901)"}),(0,qr.jsx)(Rl,{name:"medical_conditions",value:Ce.medical_conditions,onChange:We,placeholder:"Asthma, Diabetes, etc."})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Allergies (\u090f\u0932\u0930\u094d\u091c\u0940)"}),(0,qr.jsx)(Rl,{name:"allergies",value:Ce.allergies,onChange:We,placeholder:"Food/medicine allergies"})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-purple-800 mb-3",children:"\ud83d\udcda Previous Education (\u092a\u0942\u0930\u094d\u0935 \u0936\u093f\u0915\u094d\u0937\u093e)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,qr.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,qr.jsx)(ql,{children:"Previous School"}),(0,qr.jsx)(Rl,{name:"previous_school",value:Ce.previous_school,onChange:We,placeholder:"School name","data-testid":"prev-school-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Previous Class"}),(0,qr.jsx)(Rl,{name:"previous_class",value:Ce.previous_class,onChange:We,placeholder:"Last class"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"TC Number"}),(0,qr.jsx)(Rl,{name:"tc_number",value:Ce.tc_number,onChange:We,placeholder:"TC/LC No."})]})]})]})]}),"documents"===_e&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udcc4 Documents Upload (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0905\u092a\u0932\u094b\u0921)"}),(0,qr.jsx)("p",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"\ud83d\udca1 Scholarship \u0914\u0930 government benefits \u0915\u0947 \u0932\u093f\u090f documents \u091c\u0930\u0942\u0930\u0940 \u0939\u0948\u0902\u0964 Admission \u0915\u0947 \u092c\u093e\u0926 \u092d\u0940 upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"}),T?(0,qr.jsx)(mY,{personId:T.id,personType:"student",schoolId:t,existingDocuments:[]}):(0,qr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[(0,qr.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc1"}),(0,qr.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Documents \u092c\u093e\u0926 \u092e\u0947\u0902 Upload \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("p",{className:"text-sm text-blue-600",children:"Student admission complete \u0939\u094b\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 Edit \u0915\u0930\u0915\u0947 documents upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),(0,qr.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-700 mb-3",children:"\ud83d\udccb Required Documents Checklist:"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[{icon:"\ud83d\udcc4",name:"Birth Certificate (\u091c\u0928\u094d\u092e \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83c\udd94",name:"Aadhar Card (\u0906\u0927\u093e\u0930 \u0915\u093e\u0930\u094d\u0921)"},{icon:"\ud83d\udccb",name:"Transfer Certificate (TC)"},{icon:"\ud83d\udcca",name:"Previous Marksheet"},{icon:"\ud83d\udcdc",name:"Caste Certificate (\u091c\u093e\u0924\u093f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83d\udcb0",name:"Income Certificate (\u0906\u092f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)"},{icon:"\ud83c\udfe0",name:"Domicile Certificate"},{icon:"\ud83d\udcf7",name:"Passport Photo"},{icon:"\ud83d\udc68",name:"Father Aadhar (\u092a\u093f\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)"},{icon:"\ud83d\udc69",name:"Mother Aadhar (\u092e\u093e\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)"},{icon:"\ud83c\udfab",name:"BPL Card (\u092f\u0926\u093f \u0932\u093e\u0917\u0942 \u0939\u094b)"},{icon:"\ud83c\udfe6",name:"Bank Passbook (\u091b\u093e\u0924\u094d\u0930\u0935\u0943\u0924\u094d\u0924\u093f \u0915\u0947 \u0932\u093f\u090f)"}].map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 bg-slate-50 rounded",children:[(0,qr.jsx)("span",{children:e.icon}),(0,qr.jsx)("span",{className:"text-slate-600",children:e.name})]},t))})]})]}),!T&&(0,qr.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[(0,qr.jsxs)(ql,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[(0,qr.jsx)(JU,{className:"w-5 h-5 text-blue-600"}),"Student Photo (AI Attendance \u0915\u0947 \u0932\u093f\u090f) - Optional"]}),!ge&&!be&&(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",className:"flex-1 border-blue-200 text-blue-700 hover:bg-blue-50 h-20",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:640,height:480}});Ne(e),ye(!0),we.current&&(we.current.srcObject=e)}catch($1){Qt.error("Camera access denied. Please allow camera permission.")}},"data-testid":"open-camera-btn",children:(0,qr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,qr.jsx)(JU,{className:"w-6 h-6 mb-1"}),(0,qr.jsx)("span",{children:"\ud83d\udcf7 Camera \u0938\u0947 Capture"})]})}),(0,qr.jsxs)("label",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-slate-300 rounded-lg h-20 cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-all",children:[(0,qr.jsx)($U,{className:"w-6 h-6 text-slate-400 mb-1"}),(0,qr.jsx)("span",{className:"text-sm text-slate-600",children:"\ud83d\udcc1 Photo Upload"})]}),(0,qr.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void Qt.error("File size should be less than 5MB");const e=new FileReader;e.onload=e=>{ve(e.target.result),Qt.success("Photo uploaded! \ud83d\udcf8")},e.readAsDataURL(t)}},"data-testid":"photo-upload-input"})]})]}),be&&(0,qr.jsxs)("div",{className:"relative bg-black rounded-xl overflow-hidden",children:[(0,qr.jsx)("video",{ref:we,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-64 object-cover"}),(0,qr.jsx)("canvas",{ref:Se,className:"hidden"}),(0,qr.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-3",children:[(0,qr.jsxs)(Dl,{type:"button",onClick:()=>{if(we.current&&Se.current){const e=we.current,t=Se.current;t.width=e.videoWidth,t.height=e.videoHeight;t.getContext("2d").drawImage(e,0,0);const a=t.toDataURL("image/jpeg",.8);ve(a),He(),Qt.success("Photo captured! \ud83d\udcf8")}},className:"bg-white text-blue-600 hover:bg-blue-50","data-testid":"capture-btn",children:[(0,qr.jsx)(JU,{className:"w-5 h-5 mr-2"}),"Capture"]}),(0,qr.jsxs)(Dl,{type:"button",variant:"outline",onClick:He,className:"bg-white/80 text-red-600 border-red-300",children:[(0,qr.jsx)(Em,{className:"w-5 h-5 mr-2"}),"Cancel"]})]})]}),ge&&(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("img",{src:ge,alt:"Captured",className:"w-full h-48 object-cover rounded-xl border-2 border-emerald-500"}),(0,qr.jsx)("div",{className:"absolute top-2 right-2 flex gap-2",children:(0,qr.jsxs)(Dl,{type:"button",size:"sm",variant:"outline",className:"bg-white/90 text-red-600 border-red-300 hover:bg-red-50",onClick:()=>{ve(null)},children:[(0,qr.jsx)(Em,{className:"w-4 h-4 mr-1"}),"Remove"]})}),(0,qr.jsxs)("div",{className:"absolute bottom-2 left-2 bg-emerald-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[(0,qr.jsx)(ph,{className:"w-4 h-4"}),"Photo Ready"]})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"* Photo optional hai\u0964 \u092c\u093e\u0926 \u092e\u0947\u0902 student profile \u0938\u0947 \u092d\u0940 add \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),!T&&(0,qr.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[(0,qr.jsxs)(ql,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[(0,qr.jsx)(lh,{className:"w-5 h-5 text-emerald-600"}),"Biometric Enrollment (Fingerprint) - Optional"]}),(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(lh,{className:"w-8 h-8 text-emerald-600"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-700 font-medium",children:"Fingerprint Registration"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Biometric device \u0938\u0947 fingerprint register \u0915\u0930\u0947\u0902\u0964 Student admission \u0915\u0947 \u092c\u093e\u0926 Biometric section \u0938\u0947 \u092d\u0940 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]})]}),(0,qr.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,qr.jsx)("div",{className:"h-full w-0 bg-emerald-500 rounded-full"})}),(0,qr.jsx)("span",{className:"text-xs text-slate-400",children:"Not enrolled"})]}),(0,qr.jsxs)("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[(0,qr.jsx)(QU,{className:"w-3 h-3"}),"Biometric device connect \u0939\u094b\u0928\u0947 \u092a\u0930 \u0939\u0940 \u0915\u093e\u092e \u0915\u0930\u0947\u0917\u093e"]})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"* Biometric optional \u0939\u0948\u0964 \u092c\u093e\u0926 \u092e\u0947\u0902 Biometric section \u0938\u0947 enroll \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>v(!1),children:e("cancel")}),(0,qr.jsxs)(Dl,{type:"submit",className:"btn-primary",disabled:z,"data-testid":"save-student-btn",children:[z?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,T?e("save"):"Admit Student"]})]})]})]})]})]})]}),(0,qr.jsx)(Im,{open:b,onOpenChange:y,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"text-emerald-600 flex items-center gap-2",children:[(0,qr.jsx)(ph,{className:"w-6 h-6"}),"Admission Successful!"]}),(0,qr.jsx)(qm,{children:"Student \u0915\u0947 login credentials \u0928\u0940\u091a\u0947 \u0926\u093f\u090f \u0917\u090f \u0939\u0948\u0902\u0964 \u0907\u0928\u094d\u0939\u0947\u0902 Parent \u0915\u094b share \u0915\u0930\u0947\u0902\u0964"})]}),L&&(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:[(0,qr.jsx)("p",{className:"text-lg font-semibold text-emerald-800",children:L.name}),(0,qr.jsxs)("p",{className:"text-sm text-emerald-600",children:[L.class_name," - ",L.section]})]}),(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Student ID / Login ID"}),(0,qr.jsx)("p",{className:"font-mono font-bold text-lg",children:L.student_id})]}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>Ge(L.student_id,"id"),children:"id"===U?(0,qr.jsx)(ph,{className:"w-4 h-4 text-emerald-500"}):(0,qr.jsx)(XU,{className:"w-4 h-4"})})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-amber-600",children:"Temporary Password"}),(0,qr.jsx)("p",{className:"font-mono font-bold text-lg",children:L.temporary_password})]}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>Ge(L.temporary_password,"pass"),children:"pass"===U?(0,qr.jsx)(ph,{className:"w-4 h-4 text-emerald-500"}):(0,qr.jsx)(XU,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[(0,qr.jsx)("p",{className:"font-medium",children:"\u26a0\ufe0f Important:"}),(0,qr.jsxs)("ul",{className:"list-disc ml-4 mt-1 space-y-1",children:[(0,qr.jsx)("li",{children:"\u092f\u0939 password \u0938\u093f\u0930\u094d\u092b \u090f\u0915 \u092c\u093e\u0930 \u0926\u093f\u0916\u0947\u0917\u093e"}),(0,qr.jsx)("li",{children:"First login \u092a\u0930 password change \u0915\u0930\u0928\u093e mandatory \u0939\u0948"}),(0,qr.jsx)("li",{children:"Parent \u0915\u094b Mobile + DOB \u0938\u0947 \u092d\u0940 login \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902"})]})]}),(0,qr.jsxs)(Dl,{className:"w-full btn-primary",onClick:()=>{const e="Student ID: ".concat(L.student_id,"\nPassword: ").concat(L.temporary_password);Ge(e,"all")},children:[(0,qr.jsx)(XU,{className:"w-4 h-4 mr-2"}),"Copy All Credentials"]}),(0,qr.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[(0,qr.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["\ud83d\udcf8 ",(0,qr.jsx)("strong",{children:"Face Enrollment"})," - AI attendance ke liye photos add karein (Optional)"]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{variant:"outline",className:"flex-1 border-indigo-200 text-indigo-700 hover:bg-indigo-50",onClick:()=>{y(!1),S(!0)},"data-testid":"capture-photos-btn",children:"\ud83d\udcf7 Capture Photos Now"}),(0,qr.jsx)(Dl,{variant:"ghost",className:"text-slate-500",onClick:()=>{Qt.info("Face enrollment skipped. Complete from student profile later."),y(!1)},"data-testid":"skip-face-btn",children:"Skip for Now"})]})]}),(0,qr.jsxs)("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[(0,qr.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["\ud83d\udc46 ",(0,qr.jsx)("strong",{children:"Biometric Enrollment"})," - Fingerprint registration (Optional)"]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{variant:"outline",className:"flex-1 border-emerald-200 text-emerald-700 hover:bg-emerald-50",onClick:()=>{Qt.info("Biometric device se connect karein aur fingerprint register karein."),window.location.href="/app/biometric?student_id=".concat(null===L||void 0===L?void 0:L.student_id,"&name=").concat(encodeURIComponent((null===L||void 0===L?void 0:L.name)||""))},"data-testid":"biometric-enroll-btn",children:"\ud83d\udc46 Enroll Biometric Now"}),(0,qr.jsx)(Dl,{variant:"ghost",className:"text-slate-500",onClick:()=>{Qt.info("Biometric enrollment skipped. Complete later from Biometric section.")},"data-testid":"skip-biometric-btn",children:"Skip"})]})]})]})]})}),(0,qr.jsx)(Im,{open:j,onOpenChange:N,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(QU,{className:"w-5 h-5 text-amber-500"}),"Suspend Student"]}),(0,qr.jsxs)(qm,{children:[null===I||void 0===I?void 0:I.name," \u0915\u094b temporarily suspend \u0915\u0930\u0947\u0902"]})]}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),I){B(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(hY,"/students/").concat(I.id,"/suspend?reason=").concat(Le.reason,"&details=").concat(Le.details),{},{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Student suspended"),N(!1),Fe({reason:"fees_pending",details:""}),R(null),Be()}catch(t){Qt.error("Failed to suspend student")}finally{B(!1)}}},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Reason *"}),(0,qr.jsx)("select",{value:Le.reason,onChange:e=>Fe(t=>u(u({},t),{},{reason:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",required:!0,children:Object.entries(ze).map(e=>{let[t,a]=e;return(0,qr.jsx)("option",{value:t,children:a},t)})})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Details"}),(0,qr.jsx)(Rl,{value:Le.details,onChange:e=>Fe(t=>u(u({},t),{},{details:e.target.value})),placeholder:"Additional details..."})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{type:"submit",className:"bg-amber-600 hover:bg-amber-700",disabled:z,children:[z?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,"Suspend Student"]})]})]})]})}),(0,qr.jsxs)("div",{className:"flex gap-4",children:[(0,qr.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,qr.jsx)(Rl,{placeholder:"Search by name or Student ID...",value:h,onChange:e=>p(e.target.value),className:"pl-10","data-testid":"search-input"})]}),(0,qr.jsxs)("select",{value:x,onChange:e=>f(e.target.value),className:"h-10 rounded-lg border border-slate-200 px-3 min-w-[150px]","data-testid":"filter-class",children:[(0,qr.jsx)("option",{value:"",children:"All Classes"}),o.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name,e.section&&"A"!==e.section?" - ".concat(e.section):""]},e.id))]})]}),(0,qr.jsxs)(wc,{defaultValue:"active",className:"space-y-4",children:[(0,qr.jsxs)(Sc,{children:[(0,qr.jsxs)(_c,{value:"active",children:[(0,qr.jsx)(eH,{className:"w-4 h-4 mr-2"}),"Active (",n.length,")"]}),(0,qr.jsxs)(_c,{value:"suspended",children:[(0,qr.jsx)(tH,{className:"w-4 h-4 mr-2"}),"Suspended (",i.length,")"]})]}),(0,qr.jsx)(kc,{value:"active",children:d?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)("div",{className:"spinner w-10 h-10"})}):0===n.length?(0,qr.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200",children:[(0,qr.jsx)(eH,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:e("no_data")})]}):(0,qr.jsx)("div",{className:"data-table",children:(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{className:"w-20",children:"Photo"}),(0,qr.jsx)(GU,{children:"Student ID"}),(0,qr.jsx)(GU,{children:e("student_name")}),(0,qr.jsx)(GU,{children:e("class_section")}),(0,qr.jsx)(GU,{children:e("father_name")}),(0,qr.jsx)(GU,{children:e("mobile")}),(0,qr.jsx)(GU,{children:"Status"}),(0,qr.jsx)(GU,{children:e("actions")})]})}),(0,qr.jsx)(VU,{children:n.map(e=>(0,qr.jsxs)(WU,{"data-testid":"student-row-".concat(e.id),children:[(0,qr.jsx)(KU,{children:(0,qr.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 border border-slate-200 flex items-center justify-center overflow-hidden",children:e.photo_url?(0,qr.jsx)("img",{src:e.photo_url,alt:"",className:"w-full h-full object-cover"}):(0,qr.jsx)(eH,{className:"w-5 h-5 text-slate-400"})})}),(0,qr.jsx)(KU,{className:"font-mono text-sm font-medium",children:e.student_id||e.admission_no}),(0,qr.jsx)(KU,{className:"font-medium",children:e.name}),(0,qr.jsx)(KU,{children:(0,qr.jsxs)("span",{className:"badge badge-info",children:[e.class_name,e.section&&"A"!==e.section?" - ".concat(e.section):""]})}),(0,qr.jsx)(KU,{children:e.father_name}),(0,qr.jsx)(KU,{children:e.mobile}),(0,qr.jsx)(KU,{children:(0,qr.jsx)("span",{className:"badge ".concat(Ke(e.status)),children:e.status})}),(0,qr.jsx)(KU,{children:(0,qr.jsxs)(wK,{children:[(0,qr.jsx)(SK,{asChild:!0,children:(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",children:(0,qr.jsx)(aH,{className:"w-4 h-4"})})}),(0,qr.jsxs)(kK,{align:"end",children:[(0,qr.jsxs)(CK,{onClick:()=>(e=>{D(e),Ee({name:e.name,class_id:e.class_id,father_name:e.father_name,mother_name:e.mother_name,dob:e.dob,gender:e.gender,address:e.address,mobile:e.mobile,parent_phone:e.parent_phone||e.mobile||"",email:e.email||"",blood_group:e.blood_group||"",aadhar_no:e.aadhar_no||"",scholar_no:e.scholar_no||"",pen_number:e.pen_number||"",sssmid:e.sssmid||"",samagra_family_id:e.samagra_family_id||"",jan_aadhar_no:e.jan_aadhar_no||"",caste:e.caste||"",sub_caste:e.sub_caste||"",religion:e.religion||"",category:e.category||"",nationality:e.nationality||"Indian",mother_tongue:e.mother_tongue||"",birth_place:e.birth_place||"",identification_mark:e.identification_mark||"",rte_status:e.rte_status||!1,father_occupation:e.father_occupation||"",father_qualification:e.father_qualification||"",mother_occupation:e.mother_occupation||"",mother_qualification:e.mother_qualification||"",guardian_name:e.guardian_name||"",guardian_relation:e.guardian_relation||"",guardian_mobile:e.guardian_mobile||"",guardian_occupation:e.guardian_occupation||"",annual_income:e.annual_income||"",emergency_contact:e.emergency_contact||"",emergency_contact_name:e.emergency_contact_name||"",bank_name:e.bank_name||"",bank_account_no:e.bank_account_no||"",ifsc_code:e.ifsc_code||"",bank_branch:e.bank_branch||"",transport_mode:e.transport_mode||"",bus_route:e.bus_route||"",bus_stop:e.bus_stop||"",pickup_point:e.pickup_point||"",is_hosteler:e.is_hosteler||!1,hostel_room_no:e.hostel_room_no||"",medical_conditions:e.medical_conditions||"",allergies:e.allergies||"",previous_school:e.previous_school||"",previous_class:e.previous_class||"",previous_percentage:e.previous_percentage||"",tc_number:e.tc_number||"",admission_date:e.admission_date||(new Date).toISOString().split("T")[0]}),ke("basic"),v(!0)})(e),children:[(0,qr.jsx)(sH,{className:"w-4 h-4 mr-2"}),"Edit Details"]}),(0,qr.jsxs)(CK,{onClick:()=>{P(e),k(!0)},children:[(0,qr.jsx)(nH,{className:"w-4 h-4 mr-2 text-blue-600"}),"View ID Card"]}),(0,qr.jsxs)(CK,{onClick:()=>(async e=>{pe({name:e.name,student_id:e.student_id||e.id,class_name:e.class_name,father_name:e.father_name,mobile:e.mobile||e.parent_phone,default_password:e.mobile||e.parent_phone||e.student_id||e.id}),me(!0)})(e),children:[(0,qr.jsx)(Vm,{className:"w-4 h-4 mr-2 text-purple-600"}),"Share Login Details"]}),(0,qr.jsxs)(CK,{onClick:()=>{F({student_id:e.student_id||e.id,name:e.name}),S(!0)},children:[(0,qr.jsx)(JU,{className:"w-4 h-4 mr-2 text-emerald-600"}),"Face Enrollment"]}),(0,qr.jsx)(EK,{}),(0,qr.jsxs)(CK,{onClick:()=>(e=>{R(e),N(!0)})(e),children:[(0,qr.jsx)(tH,{className:"w-4 h-4 mr-2 text-amber-500"}),"Suspend"]}),["director","principal"].includes(null===a||void 0===a?void 0:a.role)&&(0,qr.jsxs)(CK,{onClick:()=>(async e=>{const t=window.prompt("Left reason (e.g., Transfer, TC Issued):");if(t)try{const a=localStorage.getItem("token");await Hr.post("".concat(hY,"/students/").concat(e,"/mark-left?reason=").concat(encodeURIComponent(t)),{},{headers:{Authorization:"Bearer ".concat(a)}}),Qt.success("Student marked as left"),Be()}catch(a){Qt.error("Failed to update student")}})(e.id),className:"text-rose-600",children:[(0,qr.jsx)(rH,{className:"w-4 h-4 mr-2"}),"Mark as Left (TC)"]}),("director"===(null===a||void 0===a?void 0:a.role)||"admin"===(null===a||void 0===a?void 0:a.role))&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(EK,{}),(0,qr.jsxs)(CK,{onClick:()=>(e=>{ie(e),oe(""),ne(!0)})(e),className:"text-red-600 bg-red-50 hover:bg-red-100",children:[(0,qr.jsx)(iH,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})]})})]},e.id))})]})})}),(0,qr.jsx)(kc,{value:"suspended",children:0===i.length?(0,qr.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200",children:[(0,qr.jsx)(tH,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No suspended students"})]}):(0,qr.jsx)("div",{className:"data-table",children:(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Student ID"}),(0,qr.jsx)(GU,{children:e("student_name")}),(0,qr.jsx)(GU,{children:e("class_section")}),(0,qr.jsx)(GU,{children:"Reason"}),(0,qr.jsx)(GU,{children:e("actions")})]})}),(0,qr.jsx)(VU,{children:i.map(e=>(0,qr.jsxs)(WU,{className:"bg-amber-50",children:[(0,qr.jsx)(KU,{className:"font-mono text-sm",children:e.student_id||e.admission_no}),(0,qr.jsx)(KU,{className:"font-medium",children:e.name}),(0,qr.jsx)(KU,{children:(0,qr.jsxs)("span",{className:"badge badge-warning",children:[e.class_name,e.section&&"A"!==e.section?" - ".concat(e.section):""]})}),(0,qr.jsx)(KU,{children:(0,qr.jsx)("span",{className:"text-amber-700",children:ze[e.suspension_reason]||e.suspension_reason})}),(0,qr.jsx)(KU,{children:["director","principal"].includes(null===a||void 0===a?void 0:a.role)&&(0,qr.jsxs)(Dl,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>(async e=>{try{const t=localStorage.getItem("token");await Hr.post("".concat(hY,"/students/").concat(e,"/unsuspend"),{},{headers:{Authorization:"Bearer ".concat(t)}}),Qt.success("Student unsuspended"),Be()}catch(t){Qt.error("Failed to unsuspend student")}})(e.id),children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-1"}),"Unsuspend"]})})]},e.id))})]})})})]}),w&&L&&(0,qr.jsx)(sY,{isOpen:w,onClose:()=>S(!1),studentId:L.student_id,schoolId:t,studentName:L.name,onComplete:()=>{S(!1),Qt.success("Face enrollment completed!"),Be()},onSkip:()=>{S(!1),Qt.info("Face enrollment skipped. Complete later from profile.")}}),_&&A&&(0,qr.jsx)(rY,{isOpen:_,onClose:()=>{k(!1),P(null)},personId:A.student_id||A.id,personType:"student",schoolId:t,onPhotoUpload:()=>Be()}),(0,qr.jsx)(Im,{open:se,onOpenChange:ne,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2 text-red-600",children:[(0,qr.jsx)(QU,{className:"w-6 h-6"}),"\u26a0\ufe0f DANGER: Permanent Delete"]})}),re&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,qr.jsx)("h4",{className:"font-bold text-red-800 mb-2",children:"\ud83d\udea8 \u092e\u0939\u0924\u094d\u0935\u092a\u0942\u0930\u094d\u0923 \u091a\u0947\u0924\u093e\u0935\u0928\u0940:"}),(0,qr.jsxs)("ul",{className:"text-sm text-red-700 space-y-1 list-disc list-inside",children:[(0,qr.jsx)("li",{children:"\u092f\u0939 action UNDO \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e"}),(0,qr.jsx)("li",{children:"Student \u0915\u093e \u0938\u093e\u0930\u093e data \u0939\u092e\u0947\u0936\u093e \u0915\u0947 \u0932\u093f\u090f delete \u0939\u094b \u091c\u093e\u090f\u0917\u093e"}),(0,qr.jsx)("li",{children:"Attendance, Fee records, Results \u0938\u092c delete \u0939\u094b \u091c\u093e\u090f\u0902\u0917\u0947"}),(0,qr.jsx)("li",{children:"Face recognition data \u092d\u0940 delete \u0939\u094b \u091c\u093e\u090f\u0917\u093e"})]})]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,qr.jsx)("p",{className:"font-medium text-lg",children:re.name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[re.student_id," \u2022 ",re.class_name||"Class N/A"]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:["Father: ",re.father_name]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:["Confirm \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f ",(0,qr.jsx)("span",{className:"text-red-600 font-bold",children:"DELETE"})," type \u0915\u0930\u0947\u0902:"]}),(0,qr.jsx)(Rl,{value:le,onChange:e=>oe(e.target.value.toUpperCase()),placeholder:"Type DELETE here",className:"border-red-200 focus:border-red-400"})]}),(0,qr.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>ne(!1),className:"flex-1",children:"Cancel (\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902)"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if("DELETE"===le){de(!0);try{const e=localStorage.getItem("token");await Hr.delete("".concat(hY,"/students/").concat(re.id),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Student data permanently deleted"),ne(!1),ie(null),oe(""),Be()}catch(a){var e,t;Qt.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to delete student")}finally{de(!1)}}else Qt.error("Please type DELETE to confirm")},disabled:"DELETE"!==le||ce,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[ce?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(iH,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})]})}),(0,qr.jsx)(Im,{open:ue,onOpenChange:me,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Vm,{className:"w-5 h-5 text-purple-600"}),"\ud83d\udcf1 StudyTino Login Details"]})}),he&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-100",children:[(0,qr.jsx)("p",{className:"font-bold text-lg",children:he.name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-600",children:["Class: ",he.class_name||"N/A"," | Father: ",he.father_name]})]}),(0,qr.jsxs)("div",{className:"bg-slate-900 text-white rounded-xl p-4 space-y-3",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsx)("span",{className:"text-slate-400 text-sm",children:"Student ID:"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"font-mono font-bold text-lg text-purple-300",children:he.student_id}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-white hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(he.student_id),Qt.success("ID copied!")},children:(0,qr.jsx)(XU,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsx)("span",{className:"text-slate-400 text-sm",children:"Password:"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"font-mono font-bold text-lg text-green-300",children:he.default_password}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-white hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(he.default_password),Qt.success("Password copied!")},children:(0,qr.jsx)(XU,{className:"w-4 h-4"})})]})]})]}),(0,qr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,qr.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"App Link:"}),(0,qr.jsxs)("p",{className:"font-mono text-sm text-blue-800",children:[window.location.origin,"/studytino"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,qr.jsxs)(Dl,{onClick:()=>(e=>{var t;const a=qe(e),s=(null===(t=e.mobile)||void 0===t?void 0:t.replace(/[^0-9]/g,""))||"",n=s?"https://wa.me/91".concat(s,"?text=").concat(encodeURIComponent(a)):"https://wa.me/?text=".concat(encodeURIComponent(a));window.open(n,"_blank")})(he),className:"bg-green-600 hover:bg-green-700 gap-2",children:[(0,qr.jsx)(oH,{className:"w-4 h-4"}),"WhatsApp Share"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>(async e=>{const t=qe(e);await navigator.clipboard.writeText(t),Qt.success("Credentials copied!")})(he),className:"gap-2",children:[(0,qr.jsx)(XU,{className:"w-4 h-4"}),"Copy All"]})]}),(0,qr.jsx)("div",{className:"text-xs text-slate-500 text-center bg-amber-50 rounded-lg p-2",children:"\ud83d\udca1 Parent \u0915\u094b \u092f\u0947 details share \u0915\u0930\u0947\u0902\u0964 First login \u092a\u0930 password change \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e\u0964"})]})]})})]}):(0,qr.jsx)("div",{className:"text-center py-20",children:(0,qr.jsx)("p",{className:"text-slate-500",children:"Please select a school first"})})}const xY=Dc("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),fY="".concat("","/api");function gY(){const{t:e}=js(),{schoolId:t}=Kr(),[a,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)({name:"",section:"",class_teacher_id:""});(0,s.useEffect)(()=>{t&&(v(),b())},[t]);const v=async()=>{try{const e=await Hr.get("".concat(fY,"/classes?school_id=").concat(t));n(e.data)}catch(e){Qt.error("Failed to fetch classes")}finally{o(!1)}},b=async()=>{try{const e=localStorage.getItem("token"),a=(await Hr.get("".concat(fY,"/users?school_id=").concat(t),{headers:{Authorization:"Bearer ".concat(e)}})).data.filter(e=>{var t;return"teacher"===e.role||"principal"===e.role||"vice_principal"===e.role||(null===(t=e.designation)||void 0===t?void 0:t.toLowerCase().includes("teacher"))});i(a)}catch(e){console.error("Failed to fetch staff:",e);try{const e=await Hr.get("".concat(fY,"/staff?school_id=").concat(t));i(e.data)}catch(J1){console.error("Staff fallback failed")}}},y=()=>{h(null),g({name:"",section:"A",class_teacher_id:""})},j=e=>{g(t=>u(u({},t),{},{[e.target.name]:e.target.value}))},N=e=>{const t=r.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.name)||"-"};return t?(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"classes-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:e("classes")}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Manage classes and sections"})]}),(0,qr.jsxs)(Im,{open:c,onOpenChange:e=>{d(e),e||y()},children:[(0,qr.jsx)(Rm,{asChild:!0,children:(0,qr.jsxs)(Dl,{className:"btn-primary","data-testid":"add-class-btn",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 mr-2"}),e("add_class")]})}),(0,qr.jsxs)(zm,{children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:e(m?"edit":"add_class")}),(0,qr.jsx)(qm,{className:"sr-only",children:"Class form"})]}),(0,qr.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),x(!0);try{const a=u(u({},f),{},{school_id:t});m?(await Hr.put("".concat(fY,"/classes/").concat(m.id),a),Qt.success(e("saved_successfully"))):(await Hr.post("".concat(fY,"/classes"),a),Qt.success(e("saved_successfully"))),d(!1),y(),v()}catch(r){var s,n;const t=null===(s=r.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail;Qt.error("string"===typeof t?t:e("something_went_wrong"))}finally{x(!1)}},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("class_name")," *"]}),(0,qr.jsxs)("select",{name:"name",value:f.name,onChange:j,required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"class-name-select",children:[(0,qr.jsx)("option",{value:"",children:"Select Class"}),["Nursery","LKG","UKG","Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","Class 7","Class 8","Class 9","Class 10","Class 11","Class 12"].map(e=>(0,qr.jsx)("option",{value:e,children:e},e))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("section")," (Optional)"]}),(0,qr.jsxs)("select",{name:"section",value:f.section,onChange:j,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"section-select",children:[(0,qr.jsx)("option",{value:"",children:"None (Single Section)"}),["","A","B","C","D","E"].filter(e=>""!==e).map(e=>(0,qr.jsx)("option",{value:e,children:e},e))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:e("class_teacher")}),(0,qr.jsxs)("select",{name:"class_teacher_id",value:f.class_teacher_id,onChange:j,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"class-teacher-select",children:[(0,qr.jsx)("option",{value:"",children:"Select Teacher"}),r.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>d(!1),children:e("cancel")}),(0,qr.jsxs)(Dl,{type:"submit",className:"btn-primary",disabled:p,"data-testid":"save-class-btn",children:[p?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,e("save")]})]})]})]})]})]}),l?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)("div",{className:"spinner w-10 h-10"})}):0===a.length?(0,qr.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200",children:[(0,qr.jsx)(Fc,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:e("no_data")}),(0,qr.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Add classes to get started"})]}):(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(t=>(0,qr.jsxs)("div",{className:"stat-card flex flex-col","data-testid":"class-card-".concat(t.id),children:[(0,qr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Fc,{className:"w-6 h-6 text-indigo-600"})}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)("button",{onClick:()=>(e=>{h(e),g({name:e.name,section:e.section,class_teacher_id:e.class_teacher_id||""}),d(!0)})(t),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"edit-class-".concat(t.id),children:(0,qr.jsx)(sH,{className:"w-4 h-4 text-slate-500"})}),(0,qr.jsx)("button",{onClick:()=>(async t=>{if(window.confirm(e("confirm_delete")))try{await Hr.delete("".concat(fY,"/classes/").concat(t)),Qt.success(e("deleted_successfully")),v()}catch(a){Qt.error(e("something_went_wrong"))}})(t.id),className:"p-2 hover:bg-rose-50 rounded-lg transition-colors","data-testid":"delete-class-".concat(t.id),children:(0,qr.jsx)(iH,{className:"w-4 h-4 text-rose-500"})})]})]}),(0,qr.jsxs)("h3",{className:"text-xl font-bold text-slate-900",children:[t.name,t.section?" - ".concat(t.section):""]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:[e("class_teacher"),": ",N(t.class_teacher_id)||(0,qr.jsx)("span",{className:"text-orange-500",children:"Not Assigned"})]}),(0,qr.jsx)("div",{className:"mt-auto pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:e("student_count")}),(0,qr.jsx)("span",{className:"font-semibold text-slate-900",children:t.student_count})]})})]},t.id))})]}):(0,qr.jsx)("div",{className:"text-center py-20",children:(0,qr.jsx)("p",{className:"text-slate-500",children:"Please select a school first"})})}"".concat("","/api");const vY=Dc("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),bY=Dc("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),yY="".concat("","/api");function jY(){const{schoolId:e,user:t}=Kr(),[a,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)({}),[c,d]=(0,s.useState)(""),[m,h]=(0,s.useState)((new Date).toISOString().split("T")[0]),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(null),[k,C]=(0,s.useState)({leave_type:"sick",start_date:"",end_date:"",reason:"",approved_by:""});(0,s.useEffect)(()=>{e&&(E(),A())},[e]),(0,s.useEffect)(()=>{c&&m&&P()},[c,m]);const E=async()=>{try{const t=localStorage.getItem("token"),a=await Hr.get("".concat(yY,"/classes?school_id=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});n(a.data)}catch(t){console.error("Failed to fetch classes")}},A=async()=>{try{const t=localStorage.getItem("token"),a=await Hr.get("".concat(yY,"/attendance/stats?school_id=").concat(e,"&date=").concat(m),{headers:{Authorization:"Bearer ".concat(t)}});b(a.data)}catch(t){console.error("Failed to fetch stats")}},P=async()=>{x(!0);try{const t=localStorage.getItem("token"),a=await Hr.get("".concat(yY,"/students?school_id=").concat(e,"&class_id=").concat(c),{headers:{Authorization:"Bearer ".concat(t)}});i(a.data);const s=await Hr.get("".concat(yY,"/attendance?class_id=").concat(c,"&date=").concat(m),{headers:{Authorization:"Bearer ".concat(t)}}),n={};s.data.forEach(e=>{n[e.student_id]=e.status}),o(n)}catch(t){Qt.error("Failed to fetch data")}finally{x(!1)}},O=(e,t)=>{o(a=>u(u({},a),{},{[e]:t}))},M=e=>{const t={};r.forEach(a=>{t[a.id]=e}),o(t)},T=e=>{switch(e){case"present":return(0,qr.jsx)(Km,{className:"w-5 h-5 text-emerald-500"});case"absent":return(0,qr.jsx)(eY,{className:"w-5 h-5 text-rose-500"});case"late":return(0,qr.jsx)(Ah,{className:"w-5 h-5 text-amber-500"});case"on_leave":return(0,qr.jsx)(rh,{className:"w-5 h-5 text-blue-500"});case"half_day":return(0,qr.jsx)(Lc,{className:"w-5 h-5 text-purple-500"});default:return(0,qr.jsx)(vY,{className:"w-5 h-5 text-gray-400"})}},D=e=>{switch(e){case"present":return"bg-emerald-100 text-emerald-700";case"absent":return"bg-rose-100 text-rose-700";case"late":return"bg-amber-100 text-amber-700";case"on_leave":return"bg-blue-100 text-blue-700";case"half_day":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-600"}};return(0,qr.jsxs)("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 shadow-xl text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,qr.jsx)(_h,{className:"w-8 h-8"}),"Attendance Management"]}),(0,qr.jsx)("p",{className:"text-blue-100 mt-1",children:"Mark attendance \u2022 Manage leaves \u2022 Upload old records"})]}),(0,qr.jsxs)(Dl,{onClick:()=>j(!0),className:"bg-white text-blue-600 hover:bg-blue-50",children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Bulk Upload"]})]})}),v&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsxs)("div",{className:"bg-emerald-50 rounded-xl p-4 border-2 border-emerald-200",children:[(0,qr.jsx)("div",{className:"text-3xl font-bold text-emerald-600",children:v.present||0}),(0,qr.jsx)("div",{className:"text-sm text-emerald-700",children:"Present Today"})]}),(0,qr.jsxs)("div",{className:"bg-rose-50 rounded-xl p-4 border-2 border-rose-200",children:[(0,qr.jsx)("div",{className:"text-3xl font-bold text-rose-600",children:v.absent||0}),(0,qr.jsx)("div",{className:"text-sm text-rose-700",children:"Absent Today"})]}),(0,qr.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 border-2 border-blue-200",children:[(0,qr.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:v.on_leave||0}),(0,qr.jsx)("div",{className:"text-sm text-blue-700",children:"On Leave"})]}),(0,qr.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4 border-2 border-amber-200",children:[(0,qr.jsx)("div",{className:"text-3xl font-bold text-amber-600",children:v.late||0}),(0,qr.jsx)("div",{className:"text-sm text-amber-700",children:"Late"})]})]}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Select Class *"}),(0,qr.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"",children:"Choose Class"}),a.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Select Date *"}),(0,qr.jsx)(Rl,{type:"date",value:m,onChange:e=>h(e.target.value),max:(new Date).toISOString().split("T")[0],className:"mt-1"})]}),(0,qr.jsx)("div",{className:"flex items-end",children:(0,qr.jsxs)(Dl,{onClick:async()=>{g(!0);try{const t=localStorage.getItem("token"),a=Object.entries(l).map(e=>{let[t,a]=e;return{student_id:t,status:a}});await Hr.post("".concat(yY,"/attendance/bulk"),{class_id:c,school_id:e,date:m,attendance:a},{headers:{Authorization:"Bearer ".concat(t)}}),Qt.success("\u2705 Attendance saved successfully!"),A()}catch(t){Qt.error("Save \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{g(!1)}},className:"w-full bg-blue-600 hover:bg-blue-700",disabled:f||!c,children:[f?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),"Save Attendance"]})})]})}),c&&(0,qr.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>M("present"),className:"bg-emerald-50 hover:bg-emerald-100 border-emerald-300",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2 text-emerald-600"}),"All Present"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>M("absent"),className:"bg-rose-50 hover:bg-rose-100 border-rose-300",children:[(0,qr.jsx)(eY,{className:"w-4 h-4 mr-2 text-rose-600"}),"All Absent"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>M("half_day"),className:"bg-purple-50 hover:bg-purple-100 border-purple-300",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4 mr-2 text-purple-600"}),"All Half Day"]})]}),c?p?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-blue-600"})}):0===r.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border-2 border-dashed p-12 text-center",children:[(0,qr.jsx)(Lc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"No students in this class"})]}):(0,qr.jsx)("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"#"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Admission No"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Student Name"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Status"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Quick Actions"})]})}),(0,qr.jsx)("tbody",{className:"divide-y",children:r.map((e,a)=>{var s;return(0,qr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,qr.jsx)("td",{className:"px-4 py-3 text-sm",children:a+1}),(0,qr.jsx)("td",{className:"px-4 py-3 text-sm font-mono",children:e.student_id}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-medium text-sm",children:null===(s=e.name)||void 0===s?void 0:s.charAt(0)}),(0,qr.jsx)("span",{className:"font-medium",children:e.name})]})}),(0,qr.jsx)("td",{className:"px-4 py-3",children:l[e.id]&&(0,qr.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ".concat(D(l[e.id])),children:[T(l[e.id]),l[e.id].replace("_"," ").toUpperCase()]})}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("button",{onClick:()=>O(e.id,"present"),className:"p-2 rounded-lg transition-all ".concat("present"===l[e.id]?"bg-emerald-100 ring-2 ring-emerald-500":"hover:bg-emerald-50"),title:"Present",children:(0,qr.jsx)(Km,{className:"w-5 h-5 ".concat("present"===l[e.id]?"text-emerald-600":"text-gray-400")})}),(0,qr.jsx)("button",{onClick:()=>O(e.id,"absent"),className:"p-2 rounded-lg transition-all ".concat("absent"===l[e.id]?"bg-rose-100 ring-2 ring-rose-500":"hover:bg-rose-50"),title:"Absent",children:(0,qr.jsx)(eY,{className:"w-5 h-5 ".concat("absent"===l[e.id]?"text-rose-600":"text-gray-400")})}),(0,qr.jsx)("button",{onClick:()=>O(e.id,"late"),className:"p-2 rounded-lg transition-all ".concat("late"===l[e.id]?"bg-amber-100 ring-2 ring-amber-500":"hover:bg-amber-50"),title:"Late",children:(0,qr.jsx)(Ah,{className:"w-5 h-5 ".concat("late"===l[e.id]?"text-amber-600":"text-gray-400")})}),(0,qr.jsx)("button",{onClick:()=>(e=>{_(e),C({leave_type:"sick",start_date:m,end_date:m,reason:"",approved_by:(null===t||void 0===t?void 0:t.name)||""}),w(!0)})(e),className:"p-2 rounded-lg transition-all ".concat("on_leave"===l[e.id]?"bg-blue-100 ring-2 ring-blue-500":"hover:bg-blue-50"),title:"On Leave",children:(0,qr.jsx)(rh,{className:"w-5 h-5 ".concat("on_leave"===l[e.id]?"text-blue-600":"text-gray-400")})}),(0,qr.jsx)("button",{onClick:()=>O(e.id,"half_day"),className:"p-2 rounded-lg transition-all ".concat("half_day"===l[e.id]?"bg-purple-100 ring-2 ring-purple-500":"hover:bg-purple-50"),title:"Half Day",children:(0,qr.jsx)(Lc,{className:"w-5 h-5 ".concat("half_day"===l[e.id]?"text-purple-600":"text-gray-400")})})]})})]},e.id)})})]})})}):(0,qr.jsxs)("div",{className:"bg-white rounded-xl border-2 border-dashed p-12 text-center",children:[(0,qr.jsx)(_h,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"Select a class to mark attendance"})]}),(0,qr.jsx)(Im,{open:N,onOpenChange:w,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(rh,{className:"w-6 h-6 text-blue-600"}),"Mark Leave - ",null===S||void 0===S?void 0:S.name]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Leave Type"}),(0,qr.jsxs)("select",{value:k.leave_type,onChange:e=>C(u(u({},k),{},{leave_type:e.target.value})),className:"w-full p-2 border rounded-lg mt-1",children:[(0,qr.jsx)("option",{value:"sick",children:"Sick Leave (\u092c\u0940\u092e\u093e\u0930\u0940 \u0915\u0940 \u091b\u0941\u091f\u094d\u091f\u0940)"}),(0,qr.jsx)("option",{value:"casual",children:"Casual Leave (\u0906\u0915\u0938\u094d\u092e\u093f\u0915 \u091b\u0941\u091f\u094d\u091f\u0940)"}),(0,qr.jsx)("option",{value:"medical",children:"Medical Leave (\u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e \u091b\u0941\u091f\u094d\u091f\u0940)"}),(0,qr.jsx)("option",{value:"family",children:"Family Function (\u092a\u093e\u0930\u093f\u0935\u093e\u0930\u093f\u0915 \u0915\u093e\u0930\u094d\u092f)"}),(0,qr.jsx)("option",{value:"other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Start Date"}),(0,qr.jsx)(Rl,{type:"date",value:k.start_date,onChange:e=>C(u(u({},k),{},{start_date:e.target.value})),className:"mt-1"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"End Date"}),(0,qr.jsx)(Rl,{type:"date",value:k.end_date,onChange:e=>C(u(u({},k),{},{end_date:e.target.value})),className:"mt-1"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Reason (Optional)"}),(0,qr.jsx)("textarea",{value:k.reason,onChange:e=>C(u(u({},k),{},{reason:e.target.value})),className:"w-full p-2 border rounded-lg mt-1",rows:"3",placeholder:"Leave reason..."})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>w(!1),className:"flex-1",children:"Cancel"}),(0,qr.jsx)(Dl,{onClick:async()=>{try{const t=localStorage.getItem("token");await Hr.post("".concat(yY,"/attendance/mark-leave"),u({school_id:e,student_id:S.id},k),{headers:{Authorization:"Bearer ".concat(t)}}),Qt.success("\u2705 Leave marked successfully!"),w(!1),P()}catch(t){Qt.error("Leave mark \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}},className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Mark Leave"})]})]})]})}),(0,qr.jsx)(Im,{open:y,onOpenChange:j,children:(0,qr.jsxs)(zm,{className:"max-w-5xl max-h-[85vh] overflow-hidden flex flex-col",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)($U,{className:"w-6 h-6 text-blue-600"}),"Bulk Attendance Upload"]})}),(0,qr.jsx)("div",{className:"flex-1 overflow-y-auto pr-2",children:(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,qr.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udccb Upload Options:"}),(0,qr.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,qr.jsx)("li",{children:"Upload old attendance register photos (mobile se click kiya hua)"}),(0,qr.jsx)("li",{children:"Excel/CSV format mein bulk data upload"}),(0,qr.jsx)("li",{children:"Date range select kar ke multiple days ka data ek saath"})]})]}),(0,qr.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-500 transition-all",children:[(0,qr.jsx)(JU,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Upload Attendance Register Photos"}),(0,qr.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Mobile se old attendance register \u0915\u0940 photos upload karein"}),(0,qr.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",id:"photo-upload",onChange:e=>{var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)>0&&Qt.success("".concat(e.target.files.length," photos selected"))}}),(0,qr.jsxs)("label",{htmlFor:"photo-upload",className:"inline-flex items-center justify-center rounded-md bg-blue-600 text-white hover:bg-blue-700 h-10 px-6 cursor-pointer",children:[(0,qr.jsx)(JU,{className:"w-4 h-4 mr-2"}),"Choose Photos"]})]}),(0,qr.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-green-500 transition-all",children:[(0,qr.jsx)(lY,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Upload Excel/CSV File"}),(0,qr.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Bulk attendance data upload via Excel"}),(0,qr.jsxs)("div",{className:"flex gap-3 justify-center flex-wrap",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>{const e=new Blob(["Date,Student ID,Student Name,Status\n2026-01-15,STU-2026-00001,Student Name,present\n2026-01-15,STU-2026-00002,Student Name 2,absent\n2026-01-16,STU-2026-00001,Student Name,present"],{type:"text/csv"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="attendance_template.csv",a.click(),window.URL.revokeObjectURL(t),Qt.success("Template downloaded!")},children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download Template"]}),(0,qr.jsx)("input",{type:"file",accept:".xlsx,.csv",className:"hidden",id:"excel-upload",onChange:e=>{var t;null!==(t=e.target.files)&&void 0!==t&&t[0]&&Qt.success("File selected: ".concat(e.target.files[0].name))}}),(0,qr.jsxs)("label",{htmlFor:"excel-upload",className:"inline-flex items-center justify-center rounded-md bg-green-600 text-white hover:bg-green-700 h-10 px-6 cursor-pointer",children:[(0,qr.jsx)(lY,{className:"w-4 h-4 mr-2"}),"Upload Excel"]})]})]})]})})]})})]})}const NY="".concat("","/api");function wY(){const{t:e}=js(),{schoolId:t}=Kr(),[a,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[p,x]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(""),[E,A]=(0,s.useState)({student_id:"",fee_plan_id:"",month:(new Date).toISOString().slice(0,7),amount:"",due_date:"",discount:0,discount_reason:""}),[P,O]=(0,s.useState)({amount:"",payment_mode:"cash",transaction_id:"",remarks:""}),[M,T]=(0,s.useState)({name:"",class_ids:[],amount:"",due_day:10,late_fee:0,description:""});(0,s.useEffect)(()=>{t&&D()},[t,k]);const D=async()=>{try{const[e,a,s,r,l]=await Promise.all([Hr.get("".concat(NY,"/fees/invoices?school_id=").concat(t).concat(k?"&status=".concat(k):"")),Hr.get("".concat(NY,"/fees/plans?school_id=").concat(t)),Hr.get("".concat(NY,"/students?school_id=").concat(t)),Hr.get("".concat(NY,"/classes?school_id=").concat(t)),Hr.get("".concat(NY,"/fees/stats?school_id=").concat(t))]);n(e.data),i(a.data),o(s.data),d(r.data),x(l.data)}catch(e){Qt.error("Failed to fetch data")}finally{h(!1)}};return t?(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"fees-page",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between",children:(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:e("fees")}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Manage fee collection"})]})}),p&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:["Expected (",p.month,")"]}),(0,qr.jsxs)("p",{className:"text-2xl font-bold font-mono text-slate-900",children:["\u20b9",p.total_expected.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e("fee_collected")}),(0,qr.jsxs)("p",{className:"text-2xl font-bold font-mono text-emerald-600",children:["\u20b9",p.total_collected.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e("pending_fees")}),(0,qr.jsxs)("p",{className:"text-2xl font-bold font-mono text-rose-600",children:["\u20b9",p.pending.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Collection Rate"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-indigo-600",children:[p.collection_rate,"%"]})]})]}),(0,qr.jsxs)(wc,{defaultValue:"invoices",className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,qr.jsxs)(Sc,{children:[(0,qr.jsxs)(_c,{value:"invoices","data-testid":"invoices-tab",children:[(0,qr.jsx)(cY,{className:"w-4 h-4 mr-2"}),e("invoices")]}),(0,qr.jsxs)(_c,{value:"plans","data-testid":"plans-tab",children:[(0,qr.jsx)(Zm,{className:"w-4 h-4 mr-2"}),e("fee_plans")]}),(0,qr.jsxs)(_c,{value:"scholarships","data-testid":"scholarships-tab",children:[(0,qr.jsx)(Ch,{className:"w-4 h-4 mr-2"}),"Scholarships"]})]}),(0,qr.jsx)("div",{className:"flex gap-2",children:(0,qr.jsxs)(Im,{open:f,onOpenChange:g,children:[(0,qr.jsx)(Rm,{asChild:!0,children:(0,qr.jsxs)(Dl,{className:"btn-primary","data-testid":"create-invoice-btn",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 mr-2"}),e("create_invoice")]})}),(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:e("create_invoice")}),(0,qr.jsx)(qm,{className:"sr-only",children:"Invoice form"})]}),(0,qr.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),_(!0);try{await Hr.post("".concat(NY,"/fees/invoices"),u(u({},E),{},{school_id:t,amount:parseFloat(E.amount),discount:parseFloat(E.discount)||0})),Qt.success(e("saved_successfully")),g(!1),A({student_id:"",fee_plan_id:"",month:(new Date).toISOString().slice(0,7),amount:"",due_date:"",discount:0,discount_reason:""}),D()}catch(r){var s,n;const t=null===(s=r.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail;Qt.error("string"===typeof t?t:e("something_went_wrong"))}finally{_(!1)}},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Student *"}),(0,qr.jsxs)("select",{value:E.student_id,onChange:e=>A(t=>u(u({},t),{},{student_id:e.target.value})),required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"invoice-student-select",children:[(0,qr.jsx)("option",{value:"",children:"Select Student"}),l.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," (",e.admission_no,")"]},e.id))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Fee Plan *"}),(0,qr.jsxs)("select",{value:E.fee_plan_id,onChange:e=>{const t=r.find(t=>t.id===e.target.value);A(a=>u(u({},a),{},{fee_plan_id:e.target.value,amount:(null===t||void 0===t?void 0:t.amount)||""}))},required:!0,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"invoice-plan-select",children:[(0,qr.jsx)("option",{value:"",children:"Select Plan"}),r.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," - \u20b9",e.amount]},e.id))]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Month *"}),(0,qr.jsx)(Rl,{type:"month",value:E.month,onChange:e=>A(t=>u(u({},t),{},{month:e.target.value})),required:!0,"data-testid":"invoice-month-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("due_date")," *"]}),(0,qr.jsx)(Rl,{type:"date",value:E.due_date,onChange:e=>A(t=>u(u({},t),{},{due_date:e.target.value})),required:!0,"data-testid":"invoice-due-date-input"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("amount")," *"]}),(0,qr.jsx)(Rl,{type:"number",value:E.amount,onChange:e=>A(t=>u(u({},t),{},{amount:e.target.value})),required:!0,"data-testid":"invoice-amount-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:e("discount")}),(0,qr.jsx)(Rl,{type:"number",value:E.discount,onChange:e=>A(t=>u(u({},t),{},{discount:e.target.value})),"data-testid":"invoice-discount-input"})]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>g(!1),children:e("cancel")}),(0,qr.jsxs)(Dl,{type:"submit",className:"btn-primary",disabled:S,"data-testid":"save-invoice-btn",children:[S?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,e("save")]})]})]})]})]})})]}),(0,qr.jsxs)(kc,{value:"invoices",children:[(0,qr.jsx)("div",{className:"flex gap-4 mb-4",children:(0,qr.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"h-10 rounded-lg border border-slate-200 px-3 min-w-[150px]","data-testid":"status-filter",children:[(0,qr.jsx)("option",{value:"",children:"All Status"}),(0,qr.jsx)("option",{value:"pending",children:e("pending")}),(0,qr.jsx)("option",{value:"paid",children:e("paid")}),(0,qr.jsx)("option",{value:"overdue",children:e("overdue")}),(0,qr.jsx)("option",{value:"partial",children:e("partial")})]})}),m?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)("div",{className:"spinner w-10 h-10"})}):0===a.length?(0,qr.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200",children:[(0,qr.jsx)(Ch,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:e("no_data")})]}):(0,qr.jsx)("div",{className:"data-table",children:(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Invoice #"}),(0,qr.jsx)(GU,{children:"Student"}),(0,qr.jsx)(GU,{children:"Month"}),(0,qr.jsx)(GU,{children:e("amount")}),(0,qr.jsx)(GU,{children:e("paid")}),(0,qr.jsx)(GU,{children:e("status")}),(0,qr.jsx)(GU,{children:e("actions")})]})}),(0,qr.jsx)(VU,{children:a.map(e=>{return(0,qr.jsxs)(WU,{"data-testid":"invoice-row-".concat(e.id),children:[(0,qr.jsx)(KU,{className:"font-mono text-sm",children:e.invoice_no}),(0,qr.jsx)(KU,{className:"font-medium",children:e.student_name}),(0,qr.jsx)(KU,{children:e.month}),(0,qr.jsxs)(KU,{className:"font-mono",children:["\u20b9",e.final_amount.toLocaleString()]}),(0,qr.jsxs)(KU,{className:"font-mono text-emerald-600",children:["\u20b9",e.paid_amount.toLocaleString()]}),(0,qr.jsx)(KU,{children:(0,qr.jsx)("span",{className:"badge ".concat((t=e.status,{pending:"badge-warning",paid:"badge-success",overdue:"badge-error",partial:"badge-info"}[t]||"badge-info")),children:e.status})}),(0,qr.jsx)(KU,{children:"paid"!==e.status&&(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",onClick:()=>(e=>{w(e),O({amount:(e.final_amount-e.paid_amount).toString(),payment_mode:"cash",transaction_id:"",remarks:""}),b(!0)})(e),"data-testid":"record-payment-".concat(e.id),children:[(0,qr.jsx)(nH,{className:"w-4 h-4 mr-1"}),"Pay"]})})]},e.id);var t})})]})})]}),(0,qr.jsxs)(kc,{value:"plans",children:[(0,qr.jsx)("div",{className:"flex justify-end mb-4",children:(0,qr.jsxs)(Im,{open:y,onOpenChange:j,children:[(0,qr.jsx)(Rm,{asChild:!0,children:(0,qr.jsxs)(Dl,{className:"btn-primary","data-testid":"create-plan-btn",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 mr-2"}),"Add Fee Plan"]})}),(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:"Create Fee Plan"}),(0,qr.jsx)(qm,{className:"sr-only",children:"Fee plan form"})]}),(0,qr.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),_(!0);try{await Hr.post("".concat(NY,"/fees/plans"),u(u({},M),{},{school_id:t,amount:parseFloat(M.amount),late_fee:parseFloat(M.late_fee)||0})),Qt.success(e("saved_successfully")),j(!1),T({name:"",class_ids:[],amount:"",due_day:10,late_fee:0,description:""}),D()}catch(r){var s,n;const t=null===(s=r.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail;Qt.error("string"===typeof t?t:e("something_went_wrong"))}finally{_(!1)}},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Plan Name *"}),(0,qr.jsx)(Rl,{value:M.name,onChange:e=>T(t=>u(u({},t),{},{name:e.target.value})),placeholder:"e.g., Monthly Fee, Annual Fee",required:!0,"data-testid":"plan-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("amount")," *"]}),(0,qr.jsx)(Rl,{type:"number",value:M.amount,onChange:e=>T(t=>u(u({},t),{},{amount:e.target.value})),required:!0,"data-testid":"plan-amount-input"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Due Day"}),(0,qr.jsx)(Rl,{type:"number",min:"1",max:"28",value:M.due_day,onChange:e=>T(t=>u(u({},t),{},{due_day:parseInt(e.target.value)})),"data-testid":"plan-due-day-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Late Fee"}),(0,qr.jsx)(Rl,{type:"number",value:M.late_fee,onChange:e=>T(t=>u(u({},t),{},{late_fee:e.target.value})),"data-testid":"plan-late-fee-input"})]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>j(!1),children:e("cancel")}),(0,qr.jsxs)(Dl,{type:"submit",className:"btn-primary",disabled:S,"data-testid":"save-plan-btn",children:[S?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,e("save")]})]})]})]})]})}),0===r.length?(0,qr.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200",children:[(0,qr.jsx)(Zm,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No fee plans yet"})]}):(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,qr.jsxs)("div",{className:"stat-card","data-testid":"plan-card-".concat(e.id),children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:e.name}),(0,qr.jsxs)("p",{className:"text-3xl font-bold font-mono text-indigo-600 mt-2",children:["\u20b9",e.amount.toLocaleString()]}),(0,qr.jsxs)("div",{className:"mt-4 space-y-2 text-sm text-slate-500",children:[(0,qr.jsxs)("p",{children:["Due Day: ",e.due_day,"th of month"]}),(0,qr.jsxs)("p",{children:["Late Fee: \u20b9",e.late_fee]})]})]},e.id))})]}),(0,qr.jsx)(kc,{value:"scholarships",children:(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Government & Private Scholarships"}),(0,qr.jsx)("p",{className:"text-slate-500 text-sm mb-6",children:"Assign scholarships to students for fee exemption"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-emerald-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"RTE (Right to Education)"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"100% Fee Exemption"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"For students from economically weaker sections under RTE Act"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Assign to Student"})]}),(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-blue-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"SC/ST Scholarship"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Govt Scholarship"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Pre-matric/Post-matric scholarship for SC/ST students"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Assign to Student"})]}),(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-amber-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"OBC Scholarship"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Govt Scholarship"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Central/State OBC scholarship programs"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Assign to Student"})]}),(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-purple-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"BPL Scheme"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Below Poverty Line"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Fee waiver for BPL card holder families"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Assign to Student"})]}),(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-rose-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-rose-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-5 h-5 text-rose-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"Merit Scholarship"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"School/Private"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"For top performing students based on academics"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Assign to Student"})]}),(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-teal-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-5 h-5 text-teal-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"Private/NGO Scholarship"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"External Funding"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Scholarships from private organizations or NGOs"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Assign to Student"})]}),(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-orange-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-5 h-5 text-orange-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"Sports Scholarship"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Sports Quota"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"For students excelling in sports activities"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Assign to Student"})]}),(0,qr.jsxs)("div",{className:"border rounded-xl p-4 hover:border-slate-300 transition-colors border-dashed",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(xY,{className:"w-5 h-5 text-slate-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"Custom Scheme"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Add New"})]})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Create a custom scholarship or concession"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",children:"Create Custom"})]})]})]})})]}),(0,qr.jsx)(Im,{open:v,onOpenChange:b,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:e("record_payment")}),(0,qr.jsx)(qm,{className:"sr-only",children:"Payment form"})]}),N&&(0,qr.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),_(!0);try{await Hr.post("".concat(NY,"/fees/payments"),{invoice_id:N.id,amount:parseFloat(P.amount),payment_mode:P.payment_mode,transaction_id:P.transaction_id,remarks:P.remarks}),Qt.success("Payment recorded successfully"),b(!1),O({amount:"",payment_mode:"cash",transaction_id:"",remarks:""}),w(null),D()}catch(n){var a,s;const t=null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail;Qt.error("string"===typeof t?t:e("something_went_wrong"))}finally{_(!1)}},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:["Invoice: ",N.invoice_no]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:["Student: ",N.student_name]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:["Due: \u20b9",(N.final_amount-N.paid_amount).toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("amount")," *"]}),(0,qr.jsx)(Rl,{type:"number",value:P.amount,onChange:e=>O(t=>u(u({},t),{},{amount:e.target.value})),required:!0,"data-testid":"payment-amount-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("payment_mode")," *"]}),(0,qr.jsxs)("select",{value:P.payment_mode,onChange:e=>O(t=>u(u({},t),{},{payment_mode:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"payment-mode-select",children:[(0,qr.jsx)("option",{value:"cash",children:e("cash")}),(0,qr.jsx)("option",{value:"online",children:e("online")}),(0,qr.jsx)("option",{value:"cheque",children:e("cheque")})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Transaction ID"}),(0,qr.jsx)(Rl,{value:P.transaction_id,onChange:e=>O(t=>u(u({},t),{},{transaction_id:e.target.value})),placeholder:"For online/cheque payments","data-testid":"payment-txn-input"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>b(!1),children:e("cancel")}),(0,qr.jsxs)(Dl,{type:"submit",className:"btn-primary",disabled:S,"data-testid":"save-payment-btn",children:[S?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,"Record Payment"]})]})]})]})})]}):(0,qr.jsx)("div",{className:"text-center py-20",children:(0,qr.jsx)("p",{className:"text-slate-500",children:"Please select a school first"})})}const SY=["className"],_Y=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,SY);return(0,qr.jsx)("textarea",u({className:Ol("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t},s))});_Y.displayName="Textarea";const kY=Dc("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),CY="".concat("","/api");function EY(){const{t:e}=js(),{schoolId:t,hasPermission:a}=Kr(),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)({title:"",content:"",priority:"normal",target_audience:["all"],valid_till:""});(0,s.useEffect)(()=>{t&&x()},[t]);const x=async()=>{try{const e=await Hr.get("".concat(CY,"/notices?school_id=").concat(t));r(e.data)}catch(e){Qt.error("Failed to fetch notices")}finally{l(!1)}},f=e=>{p(t=>u(u({},t),{},{[e.target.name]:e.target.value}))},g=e=>{switch(e){case"urgent":return(0,qr.jsx)(QU,{className:"w-5 h-5 text-rose-500"});case"high":return(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-500"});default:return(0,qr.jsx)(tY,{className:"w-5 h-5 text-blue-500"})}},v=e=>{switch(e){case"urgent":return"priority-urgent";case"high":return"priority-high";case"normal":return"priority-normal";default:return"priority-low"}};return t?(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"notices-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:e("notices")}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"School announcements and updates"})]}),a(["director","principal","admin","teacher"])&&(0,qr.jsxs)(Im,{open:o,onOpenChange:c,children:[(0,qr.jsx)(Rm,{asChild:!0,children:(0,qr.jsxs)(Dl,{className:"btn-primary","data-testid":"create-notice-btn",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 mr-2"}),e("create_notice")]})}),(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:e("create_notice")}),(0,qr.jsx)(qm,{className:"sr-only",children:"Notice form"})]}),(0,qr.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),m(!0);try{await Hr.post("".concat(CY,"/notices"),u(u({},h),{},{school_id:t})),Qt.success(e("saved_successfully")),c(!1),p({title:"",content:"",priority:"normal",target_audience:["all"],valid_till:""}),x()}catch(r){var s,n;const t=null===(s=r.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail;Qt.error("string"===typeof t?t:e("something_went_wrong"))}finally{m(!1)}},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("title")," *"]}),(0,qr.jsx)(Rl,{name:"title",value:h.title,onChange:f,required:!0,"data-testid":"notice-title-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[e("content")," *"]}),(0,qr.jsx)(_Y,{name:"content",value:h.content,onChange:f,required:!0,rows:4,"data-testid":"notice-content-input"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:e("priority")}),(0,qr.jsxs)("select",{name:"priority",value:h.priority,onChange:f,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"notice-priority-select",children:[(0,qr.jsx)("option",{value:"low",children:e("low")}),(0,qr.jsx)("option",{value:"normal",children:e("normal")}),(0,qr.jsx)("option",{value:"high",children:e("high")}),(0,qr.jsx)("option",{value:"urgent",children:e("urgent")})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Valid Till"}),(0,qr.jsx)(Rl,{name:"valid_till",type:"date",value:h.valid_till,onChange:f,"data-testid":"notice-valid-till-input"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:e("target_audience")}),(0,qr.jsx)("div",{className:"flex flex-wrap gap-2",children:["all","teachers","students","parents"].map(t=>(0,qr.jsx)("button",{type:"button",onClick:()=>(e=>{p(t=>{const a=t.target_audience;return a.includes(e)?u(u({},t),{},{target_audience:a.filter(t=>t!==e)}):u(u({},t),{},{target_audience:[...a,e]})})})(t),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat(h.target_audience.includes(t)?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"),"data-testid":"audience-".concat(t),children:e(t)},t))})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>c(!1),children:e("cancel")}),(0,qr.jsxs)(Dl,{type:"submit",className:"btn-primary",disabled:d,"data-testid":"save-notice-btn",children:[d?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,e("save")]})]})]})]})]})]}),i?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)("div",{className:"spinner w-10 h-10"})}):0===n.length?(0,qr.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200",children:[(0,qr.jsx)(Oh,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:e("no_data")})]}):(0,qr.jsx)("div",{className:"space-y-4",children:n.map(t=>(0,qr.jsx)("div",{className:"stat-card ".concat(v(t.priority)),"data-testid":"notice-card-".concat(t.id),children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,qr.jsx)("div",{className:"mt-1",children:g(t.priority)}),(0,qr.jsxs)("div",{className:"flex-1",children:[t.school_name&&(0,qr.jsx)("p",{className:"text-sm font-medium text-indigo-600 mb-1",children:t.school_name}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:t.title}),(0,qr.jsx)("p",{className:"text-slate-600 mt-2 whitespace-pre-wrap",children:t.content}),(t.signature_url||t.seal_url)&&(0,qr.jsxs)("div",{className:"mt-6 pt-4 border-t border-slate-200 flex items-end justify-between",children:[(0,qr.jsxs)("div",{className:"text-sm text-slate-500",children:[(0,qr.jsxs)("p",{children:["By: ",t.created_by_name]}),(0,qr.jsx)("p",{children:new Date(t.created_at).toLocaleDateString("hi-IN",{day:"numeric",month:"long",year:"numeric"})})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[t.signature_url&&(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("img",{src:"".concat("").concat(t.signature_url),alt:"Signature",className:"h-12 object-contain"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Signature"})]}),t.seal_url&&(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("img",{src:"".concat("").concat(t.seal_url),alt:"Seal",className:"h-14 object-contain"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"School Seal"})]})]})]}),!t.signature_url&&!t.seal_url&&(0,qr.jsxs)("div",{className:"flex items-center gap-4 mt-4 text-sm text-slate-500",children:[(0,qr.jsxs)("span",{children:["By: ",t.created_by_name]}),(0,qr.jsx)("span",{children:new Date(t.created_at).toLocaleDateString()}),(0,qr.jsx)("div",{className:"flex gap-1",children:t.target_audience.map(e=>(0,qr.jsx)("span",{className:"badge badge-info capitalize",children:e},e))})]})]})]}),a(["director","principal","admin"])&&(0,qr.jsx)("button",{onClick:()=>(async t=>{if(window.confirm(e("confirm_delete")))try{await Hr.delete("".concat(CY,"/notices/").concat(t)),Qt.success(e("deleted_successfully")),x()}catch(a){Qt.error(e("something_went_wrong"))}})(t.id),className:"p-2 hover:bg-rose-50 rounded-lg transition-colors","data-testid":"delete-notice-".concat(t.id),children:(0,qr.jsx)(iH,{className:"w-5 h-5 text-rose-500"})})]})},t.id))})]}):(0,qr.jsx)("div",{className:"text-center py-20",children:(0,qr.jsx)("p",{className:"text-slate-500",children:"Please select a school first"})})}const AY=Dc("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),PY={CBSE:{name:"CBSE (Central Board)",fullName:"Central Board of Secondary Education",website:"https://www.cbse.gov.in"},MPBSE:{name:"MP Board",fullName:"Madhya Pradesh Board of Secondary Education",website:"https://mpbse.nic.in"},RBSE:{name:"RBSE (Rajasthan Board)",fullName:"Rajasthan Board of Secondary Education",website:"https://rajeduboard.rajasthan.gov.in"},NCERT:{name:"NCERT",fullName:"National Council of Educational Research and Training",website:"https://ncert.nic.in"}},OY={CBSE:{Nursery:["Hindi","English","Mathematics","Drawing","General Awareness","Rhymes"],LKG:["Hindi","English","Mathematics","Drawing","General Awareness","Rhymes"],UKG:["Hindi","English","Mathematics","Drawing","General Awareness","Rhymes"],"Class 1":["Hindi","English","Mathematics","EVS","Drawing","GK"],"Class 2":["Hindi","English","Mathematics","EVS","Drawing","GK"],"Class 3":["Hindi","English","Mathematics","EVS","Computer","Drawing","GK"],"Class 4":["Hindi","English","Mathematics","EVS","Computer","Drawing","GK"],"Class 5":["Hindi","English","Mathematics","EVS","Computer","Drawing","GK"],"Class 6":["Hindi","English","Mathematics","Science","Social Science","Sanskrit","Computer"],"Class 7":["Hindi","English","Mathematics","Science","Social Science","Sanskrit","Computer"],"Class 8":["Hindi","English","Mathematics","Science","Social Science","Sanskrit","Computer"],"Class 9":["Hindi","English","Mathematics","Science","Social Science","Sanskrit","Information Technology"],"Class 10":["Hindi","English","Mathematics","Science","Social Science","Sanskrit","Information Technology"],"Class 11":["Hindi","English","Physics","Chemistry","Biology","Mathematics","Computer Science","Economics","Accountancy","Business Studies","History","Geography","Political Science"],"Class 12":["Hindi","English","Physics","Chemistry","Biology","Mathematics","Computer Science","Economics","Accountancy","Business Studies","History","Geography","Political Science"]},MPBSE:{Nursery:["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e","\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928"],LKG:["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e","\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928"],UKG:["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e","\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928"],"Class 1":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 2":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 3":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 4":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 5":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 6":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924"],"Class 7":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924"],"Class 8":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924"],"Class 9":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924","Computer"],"Class 10":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924","Computer"],"Class 11":["\u0939\u093f\u0902\u0926\u0940","English","\u092d\u094c\u0924\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0930\u0938\u093e\u092f\u0928 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u091c\u0940\u0935 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0917\u0923\u093f\u0924","Computer","\u0935\u093e\u0923\u093f\u091c\u094d\u092f","\u0905\u0930\u094d\u0925\u0936\u093e\u0938\u094d\u0924\u094d\u0930"],"Class 12":["\u0939\u093f\u0902\u0926\u0940","English","\u092d\u094c\u0924\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0930\u0938\u093e\u092f\u0928 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u091c\u0940\u0935 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0917\u0923\u093f\u0924","Computer","\u0935\u093e\u0923\u093f\u091c\u094d\u092f","\u0905\u0930\u094d\u0925\u0936\u093e\u0938\u094d\u0924\u094d\u0930"]},RBSE:{Nursery:["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e","\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928"],LKG:["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e","\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928"],UKG:["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e","\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928"],"Class 1":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u0905\u0927\u094d\u092f\u092f\u0928","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 2":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u0905\u0927\u094d\u092f\u092f\u0928","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 3":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u0905\u0927\u094d\u092f\u092f\u0928","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 4":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u0905\u0927\u094d\u092f\u092f\u0928","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 5":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u0905\u0927\u094d\u092f\u092f\u0928","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"],"Class 6":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924"],"Class 7":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924"],"Class 8":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924"],"Class 9":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924","Computer","\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0905\u0927\u094d\u092f\u092f\u0928"],"Class 10":["\u0939\u093f\u0902\u0926\u0940","English","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u0902\u0938\u094d\u0915\u0943\u0924","Computer","\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0905\u0927\u094d\u092f\u092f\u0928"],"Class 11":["\u0939\u093f\u0902\u0926\u0940","English","\u092d\u094c\u0924\u093f\u0915\u0940","\u0930\u0938\u093e\u092f\u0928 \u0936\u093e\u0938\u094d\u0924\u094d\u0930","\u091c\u0940\u0935 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0917\u0923\u093f\u0924","Computer","\u0935\u093e\u0923\u093f\u091c\u094d\u092f \u0936\u093e\u0938\u094d\u0924\u094d\u0930","\u0932\u0947\u0916\u093e\u0936\u093e\u0938\u094d\u0924\u094d\u0930"],"Class 12":["\u0939\u093f\u0902\u0926\u0940","English","\u092d\u094c\u0924\u093f\u0915\u0940","\u0930\u0938\u093e\u092f\u0928 \u0936\u093e\u0938\u094d\u0924\u094d\u0930","\u091c\u0940\u0935 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0917\u0923\u093f\u0924","Computer","\u0935\u093e\u0923\u093f\u091c\u094d\u092f \u0936\u093e\u0938\u094d\u0924\u094d\u0930","\u0932\u0947\u0916\u093e\u0936\u093e\u0938\u094d\u0924\u094d\u0930"]},NCERT:{Nursery:["Hindi","English","Mathematics","Drawing","General Awareness"],LKG:["Hindi","English","Mathematics","Drawing","General Awareness"],UKG:["Hindi","English","Mathematics","Drawing","General Awareness"],"Class 1":["Hindi","English","Mathematics","EVS"],"Class 2":["Hindi","English","Mathematics","EVS"],"Class 3":["Hindi","English","Mathematics","EVS"],"Class 4":["Hindi","English","Mathematics","EVS"],"Class 5":["Hindi","English","Mathematics","EVS"],"Class 6":["Hindi","English","Mathematics","Science","Social Science","Sanskrit"],"Class 7":["Hindi","English","Mathematics","Science","Social Science","Sanskrit"],"Class 8":["Hindi","English","Mathematics","Science","Social Science","Sanskrit"],"Class 9":["Hindi","English","Mathematics","Science","Social Science","Sanskrit"],"Class 10":["Hindi","English","Mathematics","Science","Social Science","Sanskrit"],"Class 11":["Hindi","English","Physics","Chemistry","Biology","Mathematics","Economics","Accountancy","Business Studies","History","Geography","Political Science"],"Class 12":["Hindi","English","Physics","Chemistry","Biology","Mathematics","Economics","Accountancy","Business Studies","History","Geography","Political Science"]}},MY={Nursery_Hindi:[{id:"ch1",name:"\u0905 \u0938\u0947 \u0905\u0928\u093e\u0930"},{id:"ch2",name:"\u0938\u094d\u0935\u0930 (\u0905-\u0905\u0903)"},{id:"ch3",name:"\u0935\u094d\u092f\u0902\u091c\u0928 (\u0915-\u0919)"},{id:"ch4",name:"\u0935\u094d\u092f\u0902\u091c\u0928 (\u091a-\u091e)"},{id:"ch5",name:"\u0935\u094d\u092f\u0902\u091c\u0928 (\u091f-\u0923)"},{id:"ch6",name:"\u0938\u0930\u0932 \u0936\u092c\u094d\u0926 \u092a\u0939\u091a\u093e\u0928"},{id:"ch7",name:"\u091a\u093f\u0924\u094d\u0930 \u092a\u0939\u091a\u093e\u0928"}],LKG_Hindi:[{id:"ch1",name:"\u0938\u094d\u0935\u0930 (\u0905-\u0905\u0903)"},{id:"ch2",name:"\u0935\u094d\u092f\u0902\u091c\u0928 (\u0915-\u091c\u094d\u091e)"},{id:"ch3",name:"\u0926\u094b \u0905\u0915\u094d\u0937\u0930 \u0935\u093e\u0932\u0947 \u0936\u092c\u094d\u0926"},{id:"ch4",name:"\u0924\u0940\u0928 \u0905\u0915\u094d\u0937\u0930 \u0935\u093e\u0932\u0947 \u0936\u092c\u094d\u0926"},{id:"ch5",name:"\u092e\u093e\u0924\u094d\u0930\u093e\u090f\u0902 - \u0906 \u0915\u0940 \u092e\u093e\u0924\u094d\u0930\u093e"},{id:"ch6",name:"\u092e\u093e\u0924\u094d\u0930\u093e\u090f\u0902 - \u0907 \u0908 \u0915\u0940 \u092e\u093e\u0924\u094d\u0930\u093e"},{id:"ch7",name:"\u0938\u0930\u0932 \u0935\u093e\u0915\u094d\u092f"},{id:"ch8",name:"\u091a\u093f\u0924\u094d\u0930 \u0935\u0930\u094d\u0923\u0928"}],UKG_Hindi:[{id:"ch1",name:"\u092e\u093e\u0924\u094d\u0930\u093e\u0913\u0902 \u0915\u093e \u0905\u092d\u094d\u092f\u093e\u0938"},{id:"ch2",name:"\u0909 \u090a \u0915\u0940 \u092e\u093e\u0924\u094d\u0930\u093e"},{id:"ch3",name:"\u090f \u0910 \u0915\u0940 \u092e\u093e\u0924\u094d\u0930\u093e"},{id:"ch4",name:"\u0913 \u0914 \u0915\u0940 \u092e\u093e\u0924\u094d\u0930\u093e"},{id:"ch5",name:"\u091a\u093e\u0930-\u092a\u093e\u0902\u091a \u0905\u0915\u094d\u0937\u0930 \u0935\u093e\u0932\u0947 \u0936\u092c\u094d\u0926"},{id:"ch6",name:"\u0938\u0930\u0932 \u0915\u0939\u093e\u0928\u093f\u092f\u093e\u0902"},{id:"ch7",name:"\u0915\u0935\u093f\u0924\u093e\u090f\u0902 \u0914\u0930 \u0917\u0940\u0924"},{id:"ch8",name:"\u0935\u093e\u0915\u094d\u092f \u092c\u0928\u093e\u0928\u093e"},{id:"ch9",name:"\u0938\u0902\u092f\u0941\u0915\u094d\u0924 \u0905\u0915\u094d\u0937\u0930"}],Nursery_English:[{id:"ch1",name:"Alphabet A-Z (Capital)"},{id:"ch2",name:"Alphabet a-z (Small)"},{id:"ch3",name:"Picture Recognition"},{id:"ch4",name:"Simple Words (2 Letters)"},{id:"ch5",name:"Simple Words (3 Letters)"},{id:"ch6",name:"Colors"},{id:"ch7",name:"Shapes"}],LKG_English:[{id:"ch1",name:"Alphabet Writing (A-Z)"},{id:"ch2",name:"Three Letter Words (CVC)"},{id:"ch3",name:"Four Letter Words"},{id:"ch4",name:"Simple Sentences"},{id:"ch5",name:"Action Words"},{id:"ch6",name:"Naming Words"},{id:"ch7",name:"Rhymes and Poems"},{id:"ch8",name:"Picture Reading"}],UKG_English:[{id:"ch1",name:"Vowels and Consonants"},{id:"ch2",name:"Blends (bl, cl, fl)"},{id:"ch3",name:"Five Letter Words"},{id:"ch4",name:"Sentence Formation"},{id:"ch5",name:"Opposites"},{id:"ch6",name:"Singular Plural"},{id:"ch7",name:"Story Reading"},{id:"ch8",name:"Comprehension"},{id:"ch9",name:"Creative Writing"}],Nursery_Mathematics:[{id:"ch1",name:"Numbers 1-10"},{id:"ch2",name:"Counting Objects"},{id:"ch3",name:"Number Names (One-Ten)"},{id:"ch4",name:"Before After Between"},{id:"ch5",name:"Shapes - Circle, Square, Triangle"},{id:"ch6",name:"Big and Small"},{id:"ch7",name:"Long and Short"}],LKG_Mathematics:[{id:"ch1",name:"Numbers 1-50"},{id:"ch2",name:"Number Names (One-Twenty)"},{id:"ch3",name:"Ascending and Descending"},{id:"ch4",name:"Addition (Single Digit)"},{id:"ch5",name:"Subtraction (Single Digit)"},{id:"ch6",name:"Shapes Recognition"},{id:"ch7",name:"Patterns"},{id:"ch8",name:"Comparison (More/Less)"}],UKG_Mathematics:[{id:"ch1",name:"Numbers 1-100"},{id:"ch2",name:"Number Names (One-Fifty)"},{id:"ch3",name:"Skip Counting (2s, 5s, 10s)"},{id:"ch4",name:"Addition (Two Digits)"},{id:"ch5",name:"Subtraction (Two Digits)"},{id:"ch6",name:"Money Recognition"},{id:"ch7",name:"Time (Clock Reading)"},{id:"ch8",name:"Measurement"},{id:"ch9",name:"Word Problems"}],Nursery_GK:[{id:"ch1",name:"My Body Parts"},{id:"ch2",name:"My Family"},{id:"ch3",name:"Fruits"},{id:"ch4",name:"Vegetables"},{id:"ch5",name:"Animals"},{id:"ch6",name:"Birds"},{id:"ch7",name:"Flowers"}],LKG_GK:[{id:"ch1",name:"My School"},{id:"ch2",name:"My Neighborhood"},{id:"ch3",name:"Domestic Animals"},{id:"ch4",name:"Wild Animals"},{id:"ch5",name:"Seasons"},{id:"ch6",name:"Festivals"},{id:"ch7",name:"Vehicles"},{id:"ch8",name:"Our Helpers"}],UKG_GK:[{id:"ch1",name:"Our Country India"},{id:"ch2",name:"National Symbols"},{id:"ch3",name:"Great Leaders"},{id:"ch4",name:"Solar System"},{id:"ch5",name:"Weather and Climate"},{id:"ch6",name:"Plants and Trees"},{id:"ch7",name:"Food and Nutrition"},{id:"ch8",name:"Safety Rules"},{id:"ch9",name:"Good Habits"}],Nursery_Drawing:[{id:"ch1",name:"Standing Lines (\u0916\u0921\u093c\u0940 \u0930\u0947\u0916\u093e)",hasDrawing:!0},{id:"ch2",name:"Sleeping Lines (\u0906\u0921\u093c\u0940 \u0930\u0947\u0916\u093e)",hasDrawing:!0},{id:"ch3",name:"Slant Lines (\u0924\u093f\u0930\u091b\u0940 \u0930\u0947\u0916\u093e)",hasDrawing:!0},{id:"ch4",name:"Curves (\u0935\u0915\u094d\u0930 \u0930\u0947\u0916\u093e)",hasDrawing:!0},{id:"ch5",name:"Circle (\u0917\u094b\u0932\u093e)",hasDrawing:!0},{id:"ch6",name:"Fruits - Apple, Banana (\u092b\u0932)",hasDrawing:!0},{id:"ch7",name:"Vegetables - Carrot, Tomato (\u0938\u092c\u094d\u091c\u0940)",hasDrawing:!0},{id:"ch8",name:"Coloring - Rainbow (\u0907\u0902\u0926\u094d\u0930\u0927\u0928\u0941\u0937)",hasDrawing:!0},{id:"ch9",name:"My Family (\u092e\u0947\u0930\u093e \u092a\u0930\u093f\u0935\u093e\u0930)",hasDrawing:!0},{id:"ch10",name:"Simple Objects (\u0938\u0930\u0932 \u0935\u0938\u094d\u0924\u0941\u090f\u0902)",hasDrawing:!0}],LKG_Drawing:[{id:"ch1",name:"Basic Shapes - Square, Rectangle (\u0906\u0915\u0943\u0924\u093f\u092f\u093e\u0901)",hasDrawing:!0},{id:"ch2",name:"Fruits Basket (\u092b\u0932\u094b\u0902 \u0915\u0940 \u091f\u094b\u0915\u0930\u0940)",hasDrawing:!0},{id:"ch3",name:"Vegetables (\u0938\u092c\u094d\u091c\u093f\u092f\u093e\u0901)",hasDrawing:!0},{id:"ch4",name:"Animals - Cat, Dog, Rabbit (\u091c\u093e\u0928\u0935\u0930)",hasDrawing:!0},{id:"ch5",name:"Birds - Parrot, Peacock (\u092a\u0915\u094d\u0937\u0940)",hasDrawing:!0},{id:"ch6",name:"My House (\u092e\u0947\u0930\u093e \u0918\u0930)",hasDrawing:!0},{id:"ch7",name:"My School (\u092e\u0947\u0930\u093e \u0935\u093f\u0926\u094d\u092f\u093e\u0932\u092f)",hasDrawing:!0},{id:"ch8",name:"Nature - Tree, Sun, Moon (\u092a\u094d\u0930\u0915\u0943\u0924\u093f)",hasDrawing:!0},{id:"ch9",name:"Flowers - Rose, Lotus (\u092b\u0942\u0932)",hasDrawing:!0},{id:"ch10",name:"Vehicles - Car, Bus (\u0935\u093e\u0939\u0928)",hasDrawing:!0}],UKG_Drawing:[{id:"ch1",name:"Scenery - Village (\u0917\u093e\u0901\u0935 \u0915\u093e \u0926\u0943\u0936\u094d\u092f)",hasDrawing:!0},{id:"ch2",name:"Scenery - Garden (\u092c\u0917\u0940\u091a\u0947 \u0915\u093e \u0926\u0943\u0936\u094d\u092f)",hasDrawing:!0},{id:"ch3",name:"Scenery - Rainy Day (\u092c\u093e\u0930\u093f\u0936 \u0915\u093e \u0926\u093f\u0928)",hasDrawing:!0},{id:"ch4",name:"Festivals - Diwali (\u0924\u094d\u092f\u094b\u0939\u093e\u0930)",hasDrawing:!0},{id:"ch5",name:"Festivals - Holi (\u0939\u094b\u0932\u0940)",hasDrawing:!0},{id:"ch6",name:"National Flag (\u0924\u093f\u0930\u0902\u0917\u093e)",hasDrawing:!0},{id:"ch7",name:"Human Figure (\u092e\u093e\u0928\u0935 \u0906\u0915\u0943\u0924\u093f)",hasDrawing:!0},{id:"ch8",name:"Sea Animals - Fish (\u0938\u092e\u0941\u0926\u094d\u0930\u0940 \u091c\u0940\u0935)",hasDrawing:!0},{id:"ch9",name:"Sports Items (\u0916\u0947\u0932 \u0938\u093e\u092e\u093e\u0928)",hasDrawing:!0},{id:"ch10",name:"Free Hand Drawing (\u0938\u094d\u0935\u0924\u0902\u0924\u094d\u0930 \u091a\u093f\u0924\u094d\u0930)",hasDrawing:!0}],Nursery_Rhymes:[{id:"ch1",name:"Twinkle Twinkle Little Star"},{id:"ch2",name:"Johny Johny Yes Papa"},{id:"ch3",name:"Baa Baa Black Sheep"},{id:"ch4",name:"\u092e\u091b\u0932\u0940 \u091c\u0932 \u0915\u0940 \u0930\u093e\u0928\u0940 \u0939\u0948"},{id:"ch5",name:"\u091a\u0902\u0926\u093e \u092e\u093e\u092e\u093e \u0926\u0942\u0930 \u0915\u0947"},{id:"ch6",name:"\u0928\u093e\u0928\u0940 \u0924\u0947\u0930\u0940 \u092e\u094b\u0930\u0928\u0940"},{id:"ch7",name:"Humpty Dumpty"},{id:"ch8",name:"Jack and Jill"}],LKG_Rhymes:[{id:"ch1",name:"Row Row Row Your Boat"},{id:"ch2",name:"Old MacDonald Had a Farm"},{id:"ch3",name:"Rain Rain Go Away"},{id:"ch4",name:"Wheels on the Bus"},{id:"ch5",name:"\u0906\u0932\u0942 \u0915\u091a\u093e\u0932\u0942 \u092c\u0947\u091f\u093e \u0915\u0939\u093e\u0901 \u0917\u090f \u0925\u0947"},{id:"ch6",name:"\u0930\u0947\u0932\u0917\u093e\u0921\u093c\u0940 \u0930\u0947\u0932\u0917\u093e\u0921\u093c\u0940"},{id:"ch7",name:"\u092e\u0947\u0930\u0947 \u092a\u094d\u092f\u093e\u0930\u0947 \u0926\u0947\u0936 \u0915\u0940 \u0927\u0930\u0924\u0940"},{id:"ch8",name:"Happy Birthday Song"},{id:"ch9",name:"If You Are Happy"}],UKG_Rhymes:[{id:"ch1",name:"Mary Had a Little Lamb"},{id:"ch2",name:"Head Shoulders Knees and Toes"},{id:"ch3",name:"ABC Song (Alphabet Song)"},{id:"ch4",name:"Hickory Dickory Dock"},{id:"ch5",name:"\u0924\u093f\u0924\u0932\u0940 \u0909\u0921\u093c\u0940"},{id:"ch6",name:"\u0917\u0941\u0921\u093c\u093f\u092f\u093e \u0930\u093e\u0928\u0940"},{id:"ch7",name:"\u091c\u0928 \u0917\u0923 \u092e\u0928 (National Anthem)"},{id:"ch8",name:"\u0935\u0902\u0926\u0947 \u092e\u093e\u0924\u0930\u092e\u094d"},{id:"ch9",name:"Incy Wincy Spider"},{id:"ch10",name:"Five Little Monkeys"}]},TY={"1_Hindi":[{id:"ch1",name:"\u091d\u0942\u0932\u093e"},{id:"ch2",name:"\u0906\u092e \u0915\u0940 \u0915\u0939\u093e\u0928\u0940"},{id:"ch3",name:"\u0906\u092e \u0915\u0940 \u091f\u094b\u0915\u0930\u0940"},{id:"ch4",name:"\u092a\u0924\u094d\u0924\u0947 \u0939\u0940 \u092a\u0924\u094d\u0924\u0947"},{id:"ch5",name:"\u092a\u0915\u094c\u0921\u093c\u0940"},{id:"ch6",name:"\u091b\u094b\u091f\u0940 \u0915\u093e \u0915\u092e\u093e\u0932"},{id:"ch7",name:"\u0930\u0938\u094b\u0908\u0918\u0930"},{id:"ch8",name:"\u091a\u0942\u0939\u094b! \u092e\u094d\u092f\u093e\u090a\u0901 \u0938\u094b \u0930\u0939\u0940 \u0939\u0948"},{id:"ch9",name:"\u092c\u0902\u0926\u0930 \u0914\u0930 \u0917\u093f\u0932\u0939\u0930\u0940"},{id:"ch10",name:"\u092a\u0917\u0921\u093c\u0940"}],"1_English":[{id:"ch1",name:"A Happy Child"},{id:"ch2",name:"Three Little Pigs"},{id:"ch3",name:"After a Bath"},{id:"ch4",name:"The Bubble, the Straw, and the Shoe"},{id:"ch5",name:"One Little Kitten"},{id:"ch6",name:"Lalu and Peelu"},{id:"ch7",name:"Once I Saw a Little Bird"},{id:"ch8",name:"Mittu and the Yellow Mango"},{id:"ch9",name:"Merry-Go-Round"},{id:"ch10",name:"Circle"}],"1_Mathematics":[{id:"ch1",name:"Shapes and Space"},{id:"ch2",name:"Numbers from One to Nine"},{id:"ch3",name:"Addition"},{id:"ch4",name:"Subtraction"},{id:"ch5",name:"Numbers from Ten to Twenty"},{id:"ch6",name:"Time"},{id:"ch7",name:"Measurement"},{id:"ch8",name:"Numbers from Twenty-one to Fifty"},{id:"ch9",name:"Data Handling"},{id:"ch10",name:"Patterns"},{id:"ch11",name:"Numbers"},{id:"ch12",name:"Money"},{id:"ch13",name:"How Many"}],"1_EVS":[{id:"ch1",name:"My Family"},{id:"ch2",name:"My Body"},{id:"ch3",name:"My Home"},{id:"ch4",name:"My School"},{id:"ch5",name:"Food We Eat"},{id:"ch6",name:"Plants Around Us"},{id:"ch7",name:"Animals Around Us"},{id:"ch8",name:"Weather and Seasons"}],"1_Drawing":[{id:"ch1",name:"Basic Shapes (\u0906\u0927\u093e\u0930\u092d\u0942\u0924 \u0906\u0915\u093e\u0930)",hasDrawing:!0},{id:"ch2",name:"My Family Drawing (\u092e\u0947\u0930\u093e \u092a\u0930\u093f\u0935\u093e\u0930)",hasDrawing:!0},{id:"ch3",name:"Fruits and Vegetables (\u092b\u0932 \u0914\u0930 \u0938\u092c\u094d\u091c\u093f\u092f\u093e\u0902)",hasDrawing:!0},{id:"ch4",name:"Animals - Simple (\u0938\u0930\u0932 \u091c\u093e\u0928\u0935\u0930)",hasDrawing:!0},{id:"ch5",name:"My House (\u092e\u0947\u0930\u093e \u0918\u0930)",hasDrawing:!0},{id:"ch6",name:"Nature - Tree, Flowers (\u092a\u094d\u0930\u0915\u0943\u0924\u093f)",hasDrawing:!0},{id:"ch7",name:"Coloring Activities (\u0930\u0902\u0917 \u092d\u0930\u0928\u093e)",hasDrawing:!0},{id:"ch8",name:"Clay Modeling (\u092e\u093f\u091f\u094d\u091f\u0940 \u0915\u0932\u093e)",hasDrawing:!0}],"2_Hindi":[{id:"ch1",name:"\u090a\u0901\u091f \u091a\u0932\u093e"},{id:"ch2",name:"\u092d\u093e\u0932\u0942 \u0928\u0947 \u0916\u0947\u0932\u0940 \u092b\u0941\u091f\u092c\u0949\u0932"},{id:"ch3",name:"\u092e\u094d\u092f\u093e\u090a\u0901, \u092e\u094d\u092f\u093e\u090a\u0901!!"},{id:"ch4",name:"\u0905\u0927\u093f\u0915 \u092c\u0932\u0935\u093e\u0928 \u0915\u094c\u0928?"},{id:"ch5",name:"\u0926\u094b\u0938\u094d\u0924 \u0915\u0940 \u092e\u0926\u0926"},{id:"ch6",name:"\u092c\u0939\u0941\u0924 \u0939\u0941\u0906"},{id:"ch7",name:"\u092e\u0947\u0930\u0940 \u0915\u093f\u0924\u093e\u092c"},{id:"ch8",name:"\u0924\u093f\u0924\u0932\u0940 \u0914\u0930 \u0915\u0932\u0940"},{id:"ch9",name:"\u092c\u0941\u0932\u092c\u0941\u0932"},{id:"ch10",name:"\u092e\u0940\u0920\u0940 \u0938\u093e\u0930\u0902\u0917\u0940"}],"2_English":[{id:"ch1",name:"First Day at School"},{id:"ch2",name:"Haldi's Adventure"},{id:"ch3",name:"A Smile"},{id:"ch4",name:"Rain"},{id:"ch5",name:"Zoo Manners"},{id:"ch6",name:"The Enormous Turnip"},{id:"ch7",name:"Mr. Nobody"},{id:"ch8",name:"Curlylocks and the Three Bears"},{id:"ch9",name:"On My Blackboard I Can Draw"},{id:"ch10",name:"The Fox and the Crane"}],"2_Mathematics":[{id:"ch1",name:"What is Long, What is Round?"},{id:"ch2",name:"Counting in Groups"},{id:"ch3",name:"How Much Can You Carry?"},{id:"ch4",name:"Counting in Tens"},{id:"ch5",name:"Patterns"},{id:"ch6",name:"Footprints"},{id:"ch7",name:"Jugs and Mugs"},{id:"ch8",name:"Tens and Ones"},{id:"ch9",name:"My Funday"},{id:"ch10",name:"Add Our Points"},{id:"ch11",name:"Lines and Lines"},{id:"ch12",name:"Give and Take"},{id:"ch13",name:"The Longest Step"},{id:"ch14",name:"Birds Come, Birds Go"},{id:"ch15",name:"How Many Ponytails?"}],"2_EVS":[{id:"ch1",name:"My Family"},{id:"ch2",name:"My Body Parts"},{id:"ch3",name:"Good Habits"},{id:"ch4",name:"Food and Health"},{id:"ch5",name:"Clothes We Wear"},{id:"ch6",name:"Our Home"},{id:"ch7",name:"Plants"},{id:"ch8",name:"Animals"},{id:"ch9",name:"Water"},{id:"ch10",name:"Air"}],"2_Drawing":[{id:"ch1",name:"Composition - My Home (\u092e\u0947\u0930\u093e \u0918\u0930)",hasDrawing:!0},{id:"ch2",name:"Animals Drawing (\u091c\u093e\u0928\u0935\u0930)",hasDrawing:!0},{id:"ch3",name:"Birds Drawing (\u092a\u0915\u094d\u0937\u0940)",hasDrawing:!0},{id:"ch4",name:"Scenery - Village (\u0917\u093e\u0902\u0935 \u0915\u093e \u0926\u0943\u0936\u094d\u092f)",hasDrawing:!0},{id:"ch5",name:"Scenery - Garden (\u092c\u0917\u0940\u091a\u093e)",hasDrawing:!0},{id:"ch6",name:"Objects - Pot, Lamp (\u092c\u0930\u094d\u0924\u0928, \u0926\u0940\u092f\u093e)",hasDrawing:!0},{id:"ch7",name:"Patterns and Borders (\u0921\u093f\u091c\u093e\u0907\u0928)",hasDrawing:!0},{id:"ch8",name:"Origami (\u0915\u093e\u0917\u091c \u0915\u0932\u093e)",hasDrawing:!0}],"3_Hindi":[{id:"ch1",name:"\u0915\u0915\u094d\u0915\u0942"},{id:"ch2",name:"\u0936\u0947\u0916\u0940\u092c\u093e\u091c\u093c \u092e\u0915\u094d\u0916\u0940"},{id:"ch3",name:"\u091a\u093e\u0901\u0926 \u0935\u093e\u0932\u0940 \u0905\u092e\u094d\u092e\u093e"},{id:"ch4",name:"\u092e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948"},{id:"ch5",name:"\u092c\u0939\u093e\u0926\u0941\u0930 \u092c\u093f\u0924\u094d\u0924\u094b"},{id:"ch6",name:"\u0939\u092e\u0938\u0947 \u0938\u092c \u0915\u0939\u0924\u0947"},{id:"ch7",name:"\u091f\u093f\u092a\u091f\u093f\u092a\u0935\u093e"},{id:"ch8",name:"\u092c\u0902\u0926\u0930-\u092c\u093e\u0901\u091f"},{id:"ch9",name:"\u0905\u0915\u094d\u0932 \u092c\u0921\u093c\u0940 \u092f\u093e \u092d\u0948\u0902\u0938"},{id:"ch10",name:"\u0915\u094d\u092f\u094b\u0902\u091c\u0940\u092e\u0932 \u0914\u0930 \u0915\u0948\u0938\u0947 \u0915\u0948\u0938\u0932\u093f\u092f\u093e"},{id:"ch11",name:"\u092e\u0940\u0930\u093e \u092c\u0939\u0928 \u0914\u0930 \u092c\u093e\u0918"},{id:"ch12",name:"\u091c\u092c \u092e\u0941\u091d\u0947 \u0938\u093e\u0901\u092a \u0928\u0947 \u0915\u093e\u091f\u093e"},{id:"ch13",name:"\u092e\u093f\u0930\u094d\u091a \u0915\u093e \u092e\u091c\u093c\u093e"},{id:"ch14",name:"\u0938\u092c\u0938\u0947 \u0905\u091a\u094d\u091b\u093e \u092a\u0947\u0921\u093c"}],"3_English":[{id:"ch1",name:"Good Morning"},{id:"ch2",name:"The Magic Garden"},{id:"ch3",name:"Bird Talk"},{id:"ch4",name:"Nina and the Baby Sparrows"},{id:"ch5",name:"The Little Fir Tree"},{id:"ch6",name:"Run!"},{id:"ch7",name:"Nasruddin's Aim"},{id:"ch8",name:"A Little Fish Story"},{id:"ch9",name:"The Enormous Turnip"},{id:"ch10",name:"The Balloon Man"}],"3_Mathematics":[{id:"ch1",name:"Where to Look From"},{id:"ch2",name:"Fun with Numbers"},{id:"ch3",name:"Give and Take"},{id:"ch4",name:"Long and Short"},{id:"ch5",name:"Shapes and Designs"},{id:"ch6",name:"Fun with Give and Take"},{id:"ch7",name:"Time Goes On"},{id:"ch8",name:"Who is Heavier?"},{id:"ch9",name:"How Many Times?"},{id:"ch10",name:"Play with Patterns"},{id:"ch11",name:"Jugs and Mugs"},{id:"ch12",name:"Can We Share?"},{id:"ch13",name:"Smart Charts!"},{id:"ch14",name:"Rupees and Paise"}],"3_EVS":[{id:"ch1",name:"Poonam's Day Out"},{id:"ch2",name:"The Plant Fairy"},{id:"ch3",name:"Water O' Water"},{id:"ch4",name:"Our First School"},{id:"ch5",name:"Chhotu's House"},{id:"ch6",name:"Foods We Eat"},{id:"ch7",name:"Saying Without Speaking"},{id:"ch8",name:"Flying High"},{id:"ch9",name:"It's Raining"},{id:"ch10",name:"What is Cooking?"},{id:"ch11",name:"From Here to There"},{id:"ch12",name:"Work We Do"},{id:"ch13",name:"Sharing Our Feelings"},{id:"ch14",name:"The Story of Food"}],"3_Drawing":[{id:"ch1",name:"Scenery - Riverside (\u0928\u0926\u0940 \u0915\u093f\u0928\u093e\u0930\u093e)",hasDrawing:!0},{id:"ch2",name:"Scenery - Mountain (\u092a\u0939\u093e\u0921\u093c\u0940 \u0926\u0943\u0936\u094d\u092f)",hasDrawing:!0},{id:"ch3",name:"Human Figures (\u092e\u093e\u0928\u0935 \u091a\u093f\u0924\u094d\u0930)",hasDrawing:!0},{id:"ch4",name:"Animals - Domestic (\u092a\u093e\u0932\u0924\u0942 \u091c\u093e\u0928\u0935\u0930)",hasDrawing:!0},{id:"ch5",name:"Still Life - Fruits (\u0938\u094d\u0925\u093f\u0930 \u091c\u0940\u0935\u0928)",hasDrawing:!0},{id:"ch6",name:"Festivals - Diwali, Holi (\u0924\u094d\u092f\u094b\u0939\u093e\u0930)",hasDrawing:!0},{id:"ch7",name:"Memory Drawing (\u0938\u094d\u092e\u0943\u0924\u093f \u091a\u093f\u0924\u094d\u0930)",hasDrawing:!0},{id:"ch8",name:"Poster Making (\u092a\u094b\u0938\u094d\u091f\u0930)",hasDrawing:!0}],"4_Hindi":[{id:"ch1",name:"\u092e\u0928 \u0915\u0947 \u092d\u094b\u0932\u0947-\u092d\u093e\u0932\u0947 \u092c\u093e\u0926\u0932"},{id:"ch2",name:"\u091c\u0948\u0938\u093e \u0938\u0935\u093e\u0932 \u0935\u0948\u0938\u093e \u091c\u0935\u093e\u092c"},{id:"ch3",name:"\u0915\u093f\u0930\u092e\u093f\u091a \u0915\u0940 \u0917\u0947\u0902\u0926"},{id:"ch4",name:"\u092a\u093e\u092a\u093e \u091c\u092c \u092c\u091a\u094d\u091a\u0947 \u0925\u0947"},{id:"ch5",name:"\u0926\u094b\u0938\u094d\u0924 \u0915\u0940 \u092a\u094b\u0936\u093e\u0915"},{id:"ch6",name:"\u0928\u093e\u0935 \u092c\u0928\u093e\u0913 \u0928\u093e\u0935 \u092c\u0928\u093e\u0913"},{id:"ch7",name:"\u0926\u093e\u0928 \u0915\u093e \u0939\u093f\u0938\u093e\u092c"},{id:"ch8",name:"\u0915\u094c\u0928?"},{id:"ch9",name:"\u0938\u094d\u0935\u0924\u0902\u0924\u094d\u0930\u0924\u093e \u0915\u0940 \u0913\u0930"},{id:"ch10",name:"\u0925\u092a\u094d\u092a \u0930\u094b\u091f\u0940 \u0925\u092a\u094d\u092a \u0926\u093e\u0932"},{id:"ch11",name:"\u092a\u0922\u093c\u0915\u094d\u0915\u0942 \u0915\u0940 \u0938\u0942\u091d"},{id:"ch12",name:"\u0938\u0941\u0928\u0940\u0924\u093e \u0915\u0940 \u092a\u0939\u093f\u092f\u093e \u0915\u0941\u0930\u094d\u0938\u0940"},{id:"ch13",name:"\u0939\u0941\u0926\u0939\u0941\u0926"},{id:"ch14",name:"\u092e\u0941\u092b\u093c\u094d\u0924 \u0939\u0940 \u092e\u0941\u092b\u093c\u094d\u0924"}],"4_English":[{id:"ch1",name:"Wake Up!"},{id:"ch2",name:"Neha's Alarm Clock"},{id:"ch3",name:"Noses"},{id:"ch4",name:"The Little Fir Tree"},{id:"ch5",name:"Run!"},{id:"ch6",name:"Nasruddin's Aim"},{id:"ch7",name:"Why?"},{id:"ch8",name:"Alice in Wonderland"},{id:"ch9",name:"Don't Be Afraid of the Dark"},{id:"ch10",name:"Helen Keller"},{id:"ch11",name:"The Donkey"},{id:"ch12",name:"I Had a Little Pony"}],"4_Mathematics":[{id:"ch1",name:"Building with Bricks"},{id:"ch2",name:"Long and Short"},{id:"ch3",name:"A Trip to Bhopal"},{id:"ch4",name:"Tick-Tick-Tick"},{id:"ch5",name:"The Way The World Looks"},{id:"ch6",name:"The Junk Seller"},{id:"ch7",name:"Jugs and Mugs"},{id:"ch8",name:"Carts and Wheels"},{id:"ch9",name:"Halves and Quarters"},{id:"ch10",name:"Play with Patterns"},{id:"ch11",name:"Tables and Shares"},{id:"ch12",name:"How Heavy? How Light?"},{id:"ch13",name:"Fields and Fences"},{id:"ch14",name:"Smart Charts"}],"4_EVS":[{id:"ch1",name:"Going to School"},{id:"ch2",name:"Ear to Ear"},{id:"ch3",name:"A Day with Nandu"},{id:"ch4",name:"The Story of Amrita"},{id:"ch5",name:"Anita and the Honeybees"},{id:"ch6",name:"Omana's Journey"},{id:"ch7",name:"From the Window"},{id:"ch8",name:"Reaching Grandmother's House"},{id:"ch9",name:"Changing Families"},{id:"ch10",name:"Hu Tu Tu, Hu Tu Tu"},{id:"ch11",name:"The Valley of Flowers"},{id:"ch12",name:"Changing Times"},{id:"ch13",name:"A River's Tale"},{id:"ch14",name:"Basva's Farm"}],"4_Drawing":[{id:"ch1",name:"Landscape - Sunset (\u0938\u0942\u0930\u094d\u092f\u093e\u0938\u094d\u0924)",hasDrawing:!0},{id:"ch2",name:"Landscape - Village (\u0917\u094d\u0930\u093e\u092e\u0940\u0923 \u0926\u0943\u0936\u094d\u092f)",hasDrawing:!0},{id:"ch3",name:"Wildlife Drawing (\u091c\u0902\u0917\u0932\u0940 \u091c\u093e\u0928\u0935\u0930)",hasDrawing:!0},{id:"ch4",name:"Portrait - Self (\u0906\u0924\u094d\u092e \u091a\u093f\u0924\u094d\u0930)",hasDrawing:!0},{id:"ch5",name:"Still Life - Objects (\u0935\u0938\u094d\u0924\u0941 \u091a\u093f\u0924\u094d\u0930\u0923)",hasDrawing:!0},{id:"ch6",name:"National Symbols (\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f \u092a\u094d\u0930\u0924\u0940\u0915)",hasDrawing:!0},{id:"ch7",name:"Poster - Environment (\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u092a\u094b\u0938\u094d\u091f\u0930)",hasDrawing:!0},{id:"ch8",name:"Craft Work (\u0939\u0938\u094d\u0924\u0915\u0932\u093e)",hasDrawing:!0}],"5_Hindi":[{id:"ch1",name:"\u0930\u093e\u0916 \u0915\u0940 \u0930\u0938\u094d\u0938\u0940"},{id:"ch2",name:"\u092b\u093c\u0938\u0932\u094b\u0902 \u0915\u0947 \u0924\u094d\u092f\u094b\u0939\u093e\u0930"},{id:"ch3",name:"\u0916\u093f\u0932\u094c\u0928\u0947\u0935\u093e\u0932\u093e"},{id:"ch4",name:"\u0917\u0941\u0930\u0941 \u0914\u0930 \u091a\u0947\u0932\u093e"},{id:"ch5",name:"\u091c\u0939\u093e\u0901 \u091a\u093e\u0939 \u0935\u0939\u093e\u0901 \u0930\u093e\u0939"},{id:"ch6",name:"\u091a\u093f\u091f\u094d\u0920\u0940 \u0915\u093e \u0938\u092b\u093c\u0930"},{id:"ch7",name:"\u0921\u093e\u0915\u093f\u090f \u0915\u0940 \u0915\u0939\u093e\u0928\u0940"},{id:"ch8",name:"\u0935\u0947 \u0926\u093f\u0928 \u092d\u0940 \u0915\u094d\u092f\u093e \u0926\u093f\u0928 \u0925\u0947"},{id:"ch9",name:"\u090f\u0915 \u092e\u093e\u0901 \u0915\u0940 \u092c\u0947\u092c\u0938\u0940"},{id:"ch10",name:"\u090f\u0915 \u0926\u093f\u0928 \u0915\u0940 \u092c\u093e\u0926\u0936\u093e\u0939\u0924"},{id:"ch11",name:"\u091a\u093e\u0935\u0932 \u0915\u0940 \u0930\u094b\u091f\u093f\u092f\u093e\u0901"},{id:"ch12",name:"\u0917\u0941\u0923 \u0914\u0930 \u0905\u0935\u0917\u0941\u0923"},{id:"ch13",name:"\u0938\u094d\u0935\u093e\u092e\u0940 \u0915\u0940 \u0926\u093e\u0926\u0940"},{id:"ch14",name:"\u092c\u093e\u0918 \u0906\u092f\u093e \u0909\u0938 \u0930\u093e\u0924"},{id:"ch15",name:"\u092c\u093f\u0936\u0928 \u0915\u0940 \u0926\u093f\u0932\u0947\u0930\u0940"},{id:"ch16",name:"\u092a\u093e\u0928\u0940 \u0930\u0947 \u092a\u093e\u0928\u0940"},{id:"ch17",name:"\u091b\u094b\u091f\u0940-\u0938\u0940 \u0939\u092e\u093e\u0930\u0940 \u0928\u0926\u0940"},{id:"ch18",name:"\u0938\u092c\u0938\u0947 \u0905\u091a\u094d\u091b\u093e \u092a\u0947\u0921\u093c"}],"5_English":[{id:"ch1",name:"Ice-cream Man"},{id:"ch2",name:"Wonderful Waste!"},{id:"ch3",name:"Teamwork"},{id:"ch4",name:"Flying Together"},{id:"ch5",name:"My Shadow"},{id:"ch6",name:"Robinson Crusoe"},{id:"ch7",name:"Crying"},{id:"ch8",name:"My Elder Brother"},{id:"ch9",name:"The Lazy Frog"},{id:"ch10",name:"Rip Van Winkle"},{id:"ch11",name:"Class Discussion"},{id:"ch12",name:"The Talkative Barber"},{id:"ch13",name:"Topsy-turvy Land"},{id:"ch14",name:"Gulliver's Travels"},{id:"ch15",name:"Nobody's Friend"},{id:"ch16",name:"The Little Bully"},{id:"ch17",name:"Sing a Song of People"},{id:"ch18",name:"Around the World"}],"5_Mathematics":[{id:"ch1",name:"The Fish Tale"},{id:"ch2",name:"Shapes and Angles"},{id:"ch3",name:"How Many Squares?"},{id:"ch4",name:"Parts and Wholes"},{id:"ch5",name:"Does it Look the Same?"},{id:"ch6",name:"Be My Multiple, I'll be Your Factor"},{id:"ch7",name:"Can You See the Pattern?"},{id:"ch8",name:"Mapping Your Way"},{id:"ch9",name:"Boxes and Sketches"},{id:"ch10",name:"Tenths and Hundredths"},{id:"ch11",name:"Area and Its Boundary"},{id:"ch12",name:"Smart Charts"},{id:"ch13",name:"Ways to Multiply and Divide"},{id:"ch14",name:"How Big? How Heavy?"}],"5_EVS":[{id:"ch1",name:"Super Senses"},{id:"ch2",name:"A Snake Charmer's Story"},{id:"ch3",name:"From Tasting to Digesting"},{id:"ch4",name:"Mangoes Round the Year"},{id:"ch5",name:"Seeds and Seeds"},{id:"ch6",name:"Every Drop Counts"},{id:"ch7",name:"Experiments with Water"},{id:"ch8",name:"A Treat for Mosquitoes"},{id:"ch9",name:"Up You Go!"},{id:"ch10",name:"Walls Tell Stories"},{id:"ch11",name:"Sunita in Space"},{id:"ch12",name:"What if it Finishes?"},{id:"ch13",name:"A Shelter So High!"},{id:"ch14",name:"When the Earth Shook!"},{id:"ch15",name:"Blow Hot, Blow Cold"},{id:"ch16",name:"Who Will Do This Work?"},{id:"ch17",name:"Across the Wall"},{id:"ch18",name:"No Place for Us?"},{id:"ch19",name:"A Seed Tells a Farmer's Story"},{id:"ch20",name:"Whose Forests?"},{id:"ch21",name:"Like Father, Like Daughter"},{id:"ch22",name:"On the Move Again"}],"5_Drawing":[{id:"ch1",name:"Landscape - Complete Scene (\u092a\u0942\u0930\u094d\u0923 \u0926\u0943\u0936\u094d\u092f)",hasDrawing:!0},{id:"ch2",name:"Human Activities (\u092e\u093e\u0928\u0935 \u0917\u0924\u093f\u0935\u093f\u0927\u093f\u092f\u093e\u0902)",hasDrawing:!0},{id:"ch3",name:"Nature Study - Flowers (\u092b\u0942\u0932 \u0905\u0927\u094d\u092f\u092f\u0928)",hasDrawing:!0},{id:"ch4",name:"Perspective Drawing (\u092a\u0930\u093f\u092a\u094d\u0930\u0947\u0915\u094d\u0937\u094d\u092f)",hasDrawing:!0},{id:"ch5",name:"Indian Art Forms (\u092d\u093e\u0930\u0924\u0940\u092f \u0915\u0932\u093e)",hasDrawing:!0},{id:"ch6",name:"Poster - Health/Cleanliness (\u0938\u094d\u0935\u093e\u0938\u094d\u0925\u094d\u092f \u092a\u094b\u0938\u094d\u091f\u0930)",hasDrawing:!0},{id:"ch7",name:"Memory Drawing (\u0938\u094d\u092e\u0943\u0924\u093f \u091a\u093f\u0924\u094d\u0930)",hasDrawing:!0},{id:"ch8",name:"Design and Patterns (\u0921\u093f\u091c\u093e\u0907\u0928)",hasDrawing:!0},{id:"ch9",name:"Warli/Madhubani Art (\u0932\u094b\u0915 \u0915\u0932\u093e)",hasDrawing:!0},{id:"ch10",name:"Creative Expression (\u0930\u091a\u0928\u093e\u0924\u094d\u092e\u0915 \u0915\u0932\u093e)",hasDrawing:!0}]},DY={"6_Hindi":[{id:"ch1",name:"\u0935\u0939 \u091a\u093f\u0921\u093c\u093f\u092f\u093e \u091c\u094b"},{id:"ch2",name:"\u092c\u091a\u092a\u0928"},{id:"ch3",name:"\u0928\u093e\u0926\u093e\u0928 \u0926\u094b\u0938\u094d\u0924"},{id:"ch4",name:"\u091a\u093e\u0901\u0926 \u0938\u0947 \u0925\u094b\u0921\u093c\u0940-\u0938\u0940 \u0917\u092a\u094d\u092a\u0947\u0902"},{id:"ch5",name:"\u0905\u0915\u094d\u0937\u0930\u094b\u0902 \u0915\u093e \u092e\u0939\u0924\u094d\u0935"},{id:"ch6",name:"\u092a\u093e\u0930 \u0928\u091c\u093c\u0930 \u0915\u0947"},{id:"ch7",name:"\u0938\u093e\u0925\u0940 \u0939\u093e\u0925 \u092c\u0922\u093c\u093e\u0928\u093e"},{id:"ch8",name:"\u0910\u0938\u0947-\u0910\u0938\u0947"},{id:"ch9",name:"\u091f\u093f\u0915\u091f-\u0905\u0932\u092c\u092e"},{id:"ch10",name:"\u091d\u093e\u0901\u0938\u0940 \u0915\u0940 \u0930\u093e\u0928\u0940"},{id:"ch11",name:"\u091c\u094b \u0926\u0947\u0916\u0915\u0930 \u092d\u0940 \u0928\u0939\u0940\u0902 \u0926\u0947\u0916\u0924\u0947"},{id:"ch12",name:"\u0938\u0902\u0938\u093e\u0930 \u092a\u0941\u0938\u094d\u0924\u0915 \u0939\u0948"},{id:"ch13",name:"\u092e\u0948\u0902 \u0938\u092c\u0938\u0947 \u091b\u094b\u091f\u0940 \u0939\u094b\u090a\u0902"},{id:"ch14",name:"\u0932\u094b\u0915\u0917\u0940\u0924"},{id:"ch15",name:"\u0928\u094c\u0915\u0930"},{id:"ch16",name:"\u0935\u0928 \u0915\u0947 \u092e\u093e\u0930\u094d\u0917 \u092e\u0947\u0902"},{id:"ch17",name:"\u0938\u093e\u0901\u0938-\u0938\u093e\u0901\u0938 \u092e\u0947\u0902 \u092c\u093e\u0901\u0938"}],"6_English":[{id:"ch1",name:"Who Did Patrick's Homework?"},{id:"ch2",name:"How the Dog Found Himself a New Master!"},{id:"ch3",name:"Taro's Reward"},{id:"ch4",name:"An Indian-American Woman in Space: Kalpana Chawla"},{id:"ch5",name:"A Different Kind of School"},{id:"ch6",name:"Who I Am"},{id:"ch7",name:"Fair Play"},{id:"ch8",name:"A Game of Chance"},{id:"ch9",name:"Desert Animals"},{id:"ch10",name:"The Banyan Tree"}],"6_Mathematics":[{id:"ch1",name:"Knowing Our Numbers"},{id:"ch2",name:"Whole Numbers"},{id:"ch3",name:"Playing with Numbers"},{id:"ch4",name:"Basic Geometrical Ideas"},{id:"ch5",name:"Understanding Elementary Shapes"},{id:"ch6",name:"Integers"},{id:"ch7",name:"Fractions"},{id:"ch8",name:"Decimals"},{id:"ch9",name:"Data Handling"},{id:"ch10",name:"Mensuration"},{id:"ch11",name:"Algebra"},{id:"ch12",name:"Ratio and Proportion"},{id:"ch13",name:"Symmetry"},{id:"ch14",name:"Practical Geometry"}],"6_Science":[{id:"ch1",name:"Food: Where Does It Come From?"},{id:"ch2",name:"Components of Food"},{id:"ch3",name:"Fibre to Fabric"},{id:"ch4",name:"Sorting Materials into Groups"},{id:"ch5",name:"Separation of Substances"},{id:"ch6",name:"Changes Around Us"},{id:"ch7",name:"Getting to Know Plants"},{id:"ch8",name:"Body Movements"},{id:"ch9",name:"The Living Organisms and Their Surroundings"},{id:"ch10",name:"Motion and Measurement of Distances"},{id:"ch11",name:"Light, Shadows and Reflections"},{id:"ch12",name:"Electricity and Circuits"},{id:"ch13",name:"Fun with Magnets"},{id:"ch14",name:"Water"},{id:"ch15",name:"Air Around Us"},{id:"ch16",name:"Garbage In, Garbage Out"}],"6_\u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"ch1",name:"\u092d\u094b\u091c\u0928: \u092f\u0939 \u0915\u0939\u093e\u0901 \u0938\u0947 \u0906\u0924\u093e \u0939\u0948?"},{id:"ch2",name:"\u092d\u094b\u091c\u0928 \u0915\u0947 \u0918\u091f\u0915"},{id:"ch3",name:"\u0930\u0947\u0936\u0947 \u0938\u0947 \u0935\u0938\u094d\u0924\u094d\u0930"},{id:"ch4",name:"\u092a\u0926\u093e\u0930\u094d\u0925\u094b\u0902 \u0915\u093e \u0938\u092e\u0942\u0939\u094b\u0902 \u092e\u0947\u0902 \u0935\u0930\u094d\u0917\u0940\u0915\u0930\u0923"},{id:"ch5",name:"\u092a\u0926\u093e\u0930\u094d\u0925\u094b\u0902 \u0915\u093e \u092a\u0943\u0925\u0915\u094d\u0915\u0930\u0923"},{id:"ch6",name:"\u0939\u092e\u093e\u0930\u0947 \u091a\u093e\u0930\u094b\u0902 \u0913\u0930 \u092a\u0930\u093f\u0935\u0930\u094d\u0924\u0928"},{id:"ch7",name:"\u092a\u094c\u0927\u094b\u0902 \u0915\u094b \u091c\u093e\u0928\u093f\u090f"},{id:"ch8",name:"\u0936\u0930\u0940\u0930 \u092e\u0947\u0902 \u0917\u0924\u093f"},{id:"ch9",name:"\u0938\u091c\u0940\u0935 \u090f\u0935\u0902 \u0909\u0928\u0915\u093e \u092a\u0930\u093f\u0935\u0947\u0936"},{id:"ch10",name:"\u0917\u0924\u093f \u090f\u0935\u0902 \u0926\u0942\u0930\u093f\u092f\u094b\u0902 \u0915\u093e \u092e\u093e\u092a\u0928"}],"6_Social Science":[{id:"hist1",name:"What, Where, How and When?"},{id:"hist2",name:"From Hunting-Gathering to Growing Food"},{id:"hist3",name:"In the Earliest Cities"},{id:"hist4",name:"What Books and Burials Tell Us"},{id:"hist5",name:"Kingdoms, Kings and an Early Republic"},{id:"hist6",name:"New Questions and Ideas"},{id:"hist7",name:"Ashoka, The Emperor Who Gave Up War"},{id:"hist8",name:"Vital Villages, Thriving Towns"},{id:"hist9",name:"Traders, Kings and Pilgrims"},{id:"hist10",name:"New Empires and Kingdoms"},{id:"hist11",name:"Buildings, Paintings and Books"},{id:"geo1",name:"The Earth in the Solar System"},{id:"geo2",name:"Globe: Latitudes and Longitudes"},{id:"geo3",name:"Motions of the Earth"},{id:"geo4",name:"Maps"},{id:"geo5",name:"Major Domains of the Earth"},{id:"geo6",name:"Major Landforms of the Earth"},{id:"geo7",name:"Our Country - India"},{id:"geo8",name:"India: Climate, Vegetation and Wildlife"},{id:"civ1",name:"Understanding Diversity"},{id:"civ2",name:"Diversity and Discrimination"},{id:"civ3",name:"What is Government?"},{id:"civ4",name:"Key Elements of a Democratic Government"},{id:"civ5",name:"Panchayati Raj"},{id:"civ6",name:"Rural Administration"},{id:"civ7",name:"Urban Administration"},{id:"civ8",name:"Rural Livelihoods"},{id:"civ9",name:"Urban Livelihoods"}],"6_\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"hist1",name:"\u0915\u094d\u092f\u093e, \u0915\u092c, \u0915\u0939\u093e\u0901 \u0914\u0930 \u0915\u0948\u0938\u0947?"},{id:"hist2",name:"\u0906\u0916\u0947\u091f-\u0916\u093e\u0926\u094d\u092f \u0938\u0902\u0917\u094d\u0930\u0939 \u0938\u0947 \u092d\u094b\u091c\u0928 \u0909\u0924\u094d\u092a\u093e\u0926\u0928 \u0924\u0915"},{id:"hist3",name:"\u0906\u0930\u0902\u092d\u093f\u0915 \u0928\u0917\u0930"},{id:"hist4",name:"\u0915\u094d\u092f\u093e \u092c\u0924\u093e\u0924\u0940 \u0939\u0948\u0902 \u0939\u092e\u0947\u0902 \u0915\u093f\u0924\u093e\u092c\u0947\u0902 \u0914\u0930 \u0915\u092c\u094d\u0930\u0947\u0902"},{id:"hist5",name:"\u0930\u093e\u091c\u094d\u092f, \u0930\u093e\u091c\u093e \u0914\u0930 \u090f\u0915 \u092a\u094d\u0930\u093e\u091a\u0940\u0928 \u0917\u0923\u0930\u093e\u091c\u094d\u092f"},{id:"hist6",name:"\u0928\u090f \u092a\u094d\u0930\u0936\u094d\u0928 \u0928\u090f \u0935\u093f\u091a\u093e\u0930"},{id:"hist7",name:"\u0905\u0936\u094b\u0915: \u090f\u0915 \u0905\u0928\u094b\u0916\u093e \u0938\u092e\u094d\u0930\u093e\u091f \u091c\u093f\u0938\u0928\u0947 \u092f\u0941\u0926\u094d\u0927 \u0915\u093e \u0924\u094d\u092f\u093e\u0917 \u0915\u093f\u092f\u093e"},{id:"hist8",name:"\u0916\u0941\u0936\u0939\u093e\u0932 \u0917\u093e\u0901\u0935 \u0914\u0930 \u0938\u092e\u0943\u0926\u094d\u0927 \u0936\u0939\u0930"},{id:"hist9",name:"\u0935\u094d\u092f\u093e\u092a\u093e\u0930\u0940, \u0930\u093e\u091c\u093e \u0914\u0930 \u0924\u0940\u0930\u094d\u0925\u092f\u093e\u0924\u094d\u0930\u0940"},{id:"hist10",name:"\u0928\u090f \u0938\u093e\u092e\u094d\u0930\u093e\u091c\u094d\u092f \u0914\u0930 \u0930\u093e\u091c\u094d\u092f"},{id:"hist11",name:"\u0907\u092e\u093e\u0930\u0924\u0947\u0902, \u091a\u093f\u0924\u094d\u0930 \u0924\u0925\u093e \u0915\u093f\u0924\u093e\u092c\u0947\u0902"},{id:"geo1",name:"\u0938\u094c\u0930\u092e\u0902\u0921\u0932 \u092e\u0947\u0902 \u092a\u0943\u0925\u094d\u0935\u0940"},{id:"geo2",name:"\u0917\u094d\u0932\u094b\u092c: \u0905\u0915\u094d\u0937\u093e\u0902\u0936 \u090f\u0935\u0902 \u0926\u0947\u0936\u093e\u0902\u0924\u0930"},{id:"geo3",name:"\u092a\u0943\u0925\u094d\u0935\u0940 \u0915\u0940 \u0917\u0924\u093f\u092f\u093e\u0901"},{id:"geo4",name:"\u092e\u093e\u0928\u091a\u093f\u0924\u094d\u0930"},{id:"geo5",name:"\u092a\u0943\u0925\u094d\u0935\u0940 \u0915\u0947 \u092a\u094d\u0930\u092e\u0941\u0916 \u092a\u0930\u093f\u092e\u0902\u0921\u0932"},{id:"geo6",name:"\u092a\u0943\u0925\u094d\u0935\u0940 \u0915\u0947 \u092a\u094d\u0930\u092e\u0941\u0916 \u0938\u094d\u0925\u0932\u0930\u0942\u092a"},{id:"geo7",name:"\u0939\u092e\u093e\u0930\u093e \u0926\u0947\u0936 \u092d\u093e\u0930\u0924"},{id:"geo8",name:"\u092d\u093e\u0930\u0924: \u091c\u0932\u0935\u093e\u092f\u0941, \u0935\u0928\u0938\u094d\u092a\u0924\u093f \u0924\u0925\u093e \u0935\u0928\u094d\u092f \u092a\u094d\u0930\u093e\u0923\u0940"},{id:"civ1",name:"\u0935\u093f\u0935\u093f\u0927\u0924\u093e \u0915\u0940 \u0938\u092e\u091d"},{id:"civ2",name:"\u0935\u093f\u0935\u093f\u0927\u0924\u093e \u090f\u0935\u0902 \u092d\u0947\u0926\u092d\u093e\u0935"},{id:"civ3",name:"\u0938\u0930\u0915\u093e\u0930 \u0915\u094d\u092f\u093e \u0939\u0948?"},{id:"civ4",name:"\u0932\u094b\u0915\u0924\u093e\u0902\u0924\u094d\u0930\u093f\u0915 \u0938\u0930\u0915\u093e\u0930 \u0915\u0947 \u092e\u0941\u0916\u094d\u092f \u0924\u0924\u094d\u0924\u094d\u0935"},{id:"civ5",name:"\u092a\u0902\u091a\u093e\u092f\u0924\u0940 \u0930\u093e\u091c"},{id:"civ6",name:"\u0917\u093e\u0901\u0935 \u0915\u093e \u092a\u094d\u0930\u0936\u093e\u0938\u0928"},{id:"civ7",name:"\u0928\u0917\u0930 \u092a\u094d\u0930\u0936\u093e\u0938\u0928"},{id:"civ8",name:"\u0917\u094d\u0930\u093e\u092e\u0940\u0923 \u0915\u094d\u0937\u0947\u0924\u094d\u0930 \u092e\u0947\u0902 \u0906\u091c\u0940\u0935\u093f\u0915\u093e"},{id:"civ9",name:"\u0936\u0939\u0930\u0940 \u0915\u094d\u0937\u0947\u0924\u094d\u0930 \u092e\u0947\u0902 \u0906\u091c\u0940\u0935\u093f\u0915\u093e"}],"6_Sanskrit":[{id:"ch1",name:"\u0936\u092c\u094d\u0926\u092a\u0930\u093f\u091a\u092f\u0903 \u092a\u094d\u0930\u0925\u092e\u0903 (Shabd Parichay I)"},{id:"ch2",name:"\u0936\u092c\u094d\u0926\u092a\u0930\u093f\u091a\u092f\u0903 \u0926\u094d\u0935\u093f\u0924\u0940\u092f\u0903 (Shabd Parichay II)"},{id:"ch3",name:"\u0938\u0930\u094d\u0935\u0928\u093e\u092e-\u0936\u092c\u094d\u0926\u093e\u0903 (Sarvanam Shabdah)"},{id:"ch4",name:"\u0935\u093f\u0936\u0947\u0937\u0923\u092e\u094d (Visheshan)"},{id:"ch5",name:"\u0927\u093e\u0924\u0941\u092a\u0930\u093f\u091a\u092f\u0903 (Dhatu Parichay)"},{id:"ch6",name:"\u0915\u094d\u0930\u093f\u092f\u093e\u092a\u0926\u093e\u0928\u093f (Kriya Padani)"},{id:"ch7",name:"\u0915\u093e\u0932\u093e\u0903 (Kalah - Tenses)"},{id:"ch8",name:"\u0938\u0902\u0927\u093f\u0903 (Sandhi)"},{id:"ch9",name:"\u0938\u092e\u093e\u0938\u0903 (Samas)"},{id:"ch10",name:"\u0909\u092a\u0938\u0930\u094d\u0917\u093e\u0903 (Upsarg)"}],"6_\u0938\u0902\u0938\u094d\u0915\u0943\u0924":[{id:"ch1",name:"\u0936\u092c\u094d\u0926\u092a\u0930\u093f\u091a\u092f\u0903 \u092a\u094d\u0930\u0925\u092e\u0903"},{id:"ch2",name:"\u0936\u092c\u094d\u0926\u092a\u0930\u093f\u091a\u092f\u0903 \u0926\u094d\u0935\u093f\u0924\u0940\u092f\u0903"},{id:"ch3",name:"\u0938\u0930\u094d\u0935\u0928\u093e\u092e-\u0936\u092c\u094d\u0926\u093e\u0903"},{id:"ch4",name:"\u0935\u093f\u0936\u0947\u0937\u0923\u092e\u094d"},{id:"ch5",name:"\u0927\u093e\u0924\u0941\u092a\u0930\u093f\u091a\u092f\u0903"},{id:"ch6",name:"\u0915\u094d\u0930\u093f\u092f\u093e\u092a\u0926\u093e\u0928\u093f"},{id:"ch7",name:"\u0915\u093e\u0932\u093e\u0903"},{id:"ch8",name:"\u0938\u0902\u0927\u093f\u0903"},{id:"ch9",name:"\u0938\u092e\u093e\u0938\u0903"},{id:"ch10",name:"\u0909\u092a\u0938\u0930\u094d\u0917\u093e\u0903"}],"7_Hindi":[{id:"ch1",name:"\u0939\u092e \u092a\u0902\u091b\u0940 \u0909\u0928\u094d\u092e\u0941\u0915\u094d\u0924 \u0917\u0917\u0928 \u0915\u0947"},{id:"ch2",name:"\u0926\u093e\u0926\u0940 \u092e\u093e\u0901"},{id:"ch3",name:"\u0939\u093f\u092e\u093e\u0932\u092f \u0915\u0940 \u092c\u0947\u091f\u093f\u092f\u093e\u0901"},{id:"ch4",name:"\u0915\u0920\u092a\u0941\u0924\u0932\u0940"},{id:"ch5",name:"\u092e\u093f\u0920\u093e\u0908\u0935\u093e\u0932\u093e"},{id:"ch6",name:"\u0930\u0915\u094d\u0924 \u0914\u0930 \u0939\u092e\u093e\u0930\u093e \u0936\u0930\u0940\u0930"},{id:"ch7",name:"\u092a\u093e\u092a\u093e \u0916\u094b \u0917\u090f"},{id:"ch8",name:"\u0936\u093e\u092e-\u090f\u0915 \u0915\u093f\u0938\u093e\u0928"},{id:"ch9",name:"\u091a\u093f\u0921\u093c\u093f\u092f\u093e \u0915\u0940 \u092c\u091a\u094d\u091a\u0940"},{id:"ch10",name:"\u0905\u092a\u0942\u0930\u094d\u0935 \u0905\u0928\u0941\u092d\u0935"},{id:"ch11",name:"\u0930\u0939\u0940\u092e \u0915\u0947 \u0926\u094b\u0939\u0947"},{id:"ch12",name:"\u0915\u0902\u091a\u093e"},{id:"ch13",name:"\u090f\u0915 \u0924\u093f\u0928\u0915\u093e"},{id:"ch14",name:"\u0916\u093e\u0928\u092a\u093e\u0928 \u0915\u0940 \u092c\u0926\u0932\u0924\u0940 \u0924\u0938\u094d\u0935\u0940\u0930"},{id:"ch15",name:"\u0928\u0940\u0932\u0915\u0902\u0920"},{id:"ch16",name:"\u092d\u094b\u0930 \u0914\u0930 \u092c\u0930\u0916\u093e"},{id:"ch17",name:"\u0935\u0940\u0930 \u0915\u0941\u0901\u0935\u0930 \u0938\u093f\u0902\u0939"},{id:"ch18",name:"\u0938\u0902\u0918\u0930\u094d\u0937 \u0915\u0947 \u0915\u093e\u0930\u0923 \u092e\u0948\u0902 \u0924\u0941\u0928\u0941\u0915\u092e\u093f\u091c\u093c\u093e\u091c \u0939\u094b \u0917\u092f\u093e: \u0927\u0928\u0930\u093e\u091c"},{id:"ch19",name:"\u0906\u0936\u094d\u0930\u092e \u0915\u093e \u0905\u0928\u0941\u092e\u093e\u0928\u093f\u0924 \u0935\u094d\u092f\u092f"},{id:"ch20",name:"\u0935\u093f\u092a\u094d\u0932\u0935-\u0917\u093e\u092f\u0928"}],"7_English":[{id:"ch1",name:"Three Questions"},{id:"ch2",name:"A Gift of Chappals"},{id:"ch3",name:"Gopal and the Hilsa Fish"},{id:"ch4",name:"The Ashes That Made Trees Bloom"},{id:"ch5",name:"Quality"},{id:"ch6",name:"Expert Detectives"},{id:"ch7",name:"The Invention of Vita-Wonk"},{id:"ch8",name:"Fire: Friend and Foe"},{id:"ch9",name:"A Bicycle in Good Repair"},{id:"ch10",name:"The Story of Cricket"}],"7_Mathematics":[{id:"ch1",name:"Integers"},{id:"ch2",name:"Fractions and Decimals"},{id:"ch3",name:"Data Handling"},{id:"ch4",name:"Simple Equations"},{id:"ch5",name:"Lines and Angles"},{id:"ch6",name:"The Triangle and Its Properties"},{id:"ch7",name:"Congruence of Triangles"},{id:"ch8",name:"Comparing Quantities"},{id:"ch9",name:"Rational Numbers"},{id:"ch10",name:"Practical Geometry"},{id:"ch11",name:"Perimeter and Area"},{id:"ch12",name:"Algebraic Expressions"},{id:"ch13",name:"Exponents and Powers"},{id:"ch14",name:"Symmetry"},{id:"ch15",name:"Visualising Solid Shapes"}],"7_Science":[{id:"ch1",name:"Nutrition in Plants"},{id:"ch2",name:"Nutrition in Animals"},{id:"ch3",name:"Fibre to Fabric"},{id:"ch4",name:"Heat"},{id:"ch5",name:"Acids, Bases and Salts"},{id:"ch6",name:"Physical and Chemical Changes"},{id:"ch7",name:"Weather, Climate and Adaptations"},{id:"ch8",name:"Winds, Storms and Cyclones"},{id:"ch9",name:"Soil"},{id:"ch10",name:"Respiration in Organisms"},{id:"ch11",name:"Transportation in Animals and Plants"},{id:"ch12",name:"Reproduction in Plants"},{id:"ch13",name:"Motion and Time"},{id:"ch14",name:"Electric Current and Its Effects"},{id:"ch15",name:"Light"},{id:"ch16",name:"Water: A Precious Resource"},{id:"ch17",name:"Forests: Our Lifeline"},{id:"ch18",name:"Wastewater Story"}],"7_Social Science":[{id:"hist1",name:"Tracing Changes Through a Thousand Years"},{id:"hist2",name:"New Kings and Kingdoms"},{id:"hist3",name:"The Delhi Sultans"},{id:"hist4",name:"The Mughal Empire"},{id:"hist5",name:"Rulers and Buildings"},{id:"hist6",name:"Towns, Traders and Craftspersons"},{id:"hist7",name:"Tribes, Nomads and Settled Communities"},{id:"hist8",name:"Devotional Paths to the Divine"},{id:"hist9",name:"The Making of Regional Cultures"},{id:"hist10",name:"Eighteenth-Century Political Formations"},{id:"geo1",name:"Environment"},{id:"geo2",name:"Inside Our Earth"},{id:"geo3",name:"Our Changing Earth"},{id:"geo4",name:"Air"},{id:"geo5",name:"Water"},{id:"geo6",name:"Natural Vegetation and Wildlife"},{id:"geo7",name:"Human Environment-Settlement, Transport and Communication"},{id:"geo8",name:"Human Environment Interactions - Tropical and Subtropical Region"},{id:"geo9",name:"Life in Temperate Grasslands and Deserts"},{id:"civ1",name:"Equality in Indian Democracy"},{id:"civ2",name:"Role of Government in Health"},{id:"civ3",name:"How State Government Works"},{id:"civ4",name:"Growing Up as Boys and Girls"},{id:"civ5",name:"Women Change the World"},{id:"civ6",name:"Media and Advertising"},{id:"civ7",name:"Markets Around Us"},{id:"civ8",name:"A Shirt in the Market"}],"7_\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"hist1",name:"\u0939\u091c\u093c\u093e\u0930 \u0935\u0930\u094d\u0937\u094b\u0902 \u0915\u0947 \u0926\u094c\u0930\u093e\u0928 \u0939\u0941\u090f \u092a\u0930\u093f\u0935\u0930\u094d\u0924\u0928\u094b\u0902 \u0915\u0940 \u092a\u0921\u093c\u0924\u093e\u0932"},{id:"hist2",name:"\u0928\u090f \u0930\u093e\u091c\u093e \u0914\u0930 \u0909\u0928\u0915\u0947 \u0930\u093e\u091c\u094d\u092f"},{id:"hist3",name:"\u0926\u093f\u0932\u094d\u0932\u0940 \u0915\u0947 \u0938\u0941\u0932\u094d\u0924\u093e\u0928"},{id:"hist4",name:"\u092e\u0941\u0917\u0932 \u0938\u093e\u092e\u094d\u0930\u093e\u091c\u094d\u092f"},{id:"hist5",name:"\u0936\u093e\u0938\u0915 \u0914\u0930 \u0907\u092e\u093e\u0930\u0924\u0947\u0902"},{id:"hist6",name:"\u0928\u0917\u0930, \u0935\u094d\u092f\u093e\u092a\u093e\u0930\u0940 \u0914\u0930 \u0936\u093f\u0932\u094d\u092a\u0940\u091c\u0928"},{id:"hist7",name:"\u091c\u0928\u091c\u093e\u0924\u093f\u092f\u093e\u0901, \u0916\u093e\u0928\u093e\u092c\u0926\u094b\u0936 \u0914\u0930 \u090f\u0915 \u091c\u0917\u0939 \u092c\u0938\u0947 \u0939\u0941\u090f \u0938\u092e\u0941\u0926\u093e\u092f"},{id:"hist8",name:"\u0908\u0936\u094d\u0935\u0930 \u0938\u0947 \u0905\u0928\u0941\u0930\u093e\u0917"},{id:"hist9",name:"\u0915\u094d\u0937\u0947\u0924\u094d\u0930\u0940\u092f \u0938\u0902\u0938\u094d\u0915\u0943\u0924\u093f\u092f\u094b\u0902 \u0915\u093e \u0928\u093f\u0930\u094d\u092e\u093e\u0923"},{id:"hist10",name:"\u0905\u0920\u093e\u0930\u0939\u0935\u0940\u0902 \u0936\u0924\u093e\u092c\u094d\u0926\u0940 \u092e\u0947\u0902 \u0928\u090f \u0930\u093e\u091c\u0928\u0940\u0924\u093f\u0915 \u0917\u0920\u0928"},{id:"geo1",name:"\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923"},{id:"geo2",name:"\u0939\u092e\u093e\u0930\u0940 \u092a\u0943\u0925\u094d\u0935\u0940 \u0915\u0947 \u0905\u0902\u0926\u0930"},{id:"geo3",name:"\u0939\u092e\u093e\u0930\u0940 \u092c\u0926\u0932\u0924\u0940 \u092a\u0943\u0925\u094d\u0935\u0940"},{id:"geo4",name:"\u0935\u093e\u092f\u0941"},{id:"geo5",name:"\u091c\u0932"},{id:"geo6",name:"\u092a\u094d\u0930\u093e\u0915\u0943\u0924\u093f\u0915 \u0935\u0928\u0938\u094d\u092a\u0924\u093f \u0914\u0930 \u0935\u0928\u094d\u092f \u091c\u0940\u0935\u0928"},{id:"geo7",name:"\u092e\u093e\u0928\u0935\u0940\u092f \u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923: \u092c\u0938\u094d\u0924\u093f\u092f\u093e\u0901, \u092a\u0930\u093f\u0935\u0939\u0928 \u0914\u0930 \u0938\u0902\u091a\u093e\u0930"},{id:"geo8",name:"\u092e\u093e\u0928\u0935 \u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u0905\u0928\u094d\u092f\u094b\u0928\u094d\u092f\u0915\u094d\u0930\u093f\u092f\u093e: \u0909\u0937\u094d\u0923\u0915\u091f\u093f\u092c\u0902\u0927\u0940\u092f \u0914\u0930 \u0909\u092a\u094b\u0937\u094d\u0923 \u092a\u094d\u0930\u0926\u0947\u0936"},{id:"geo9",name:"\u0936\u0940\u0924\u094b\u0937\u094d\u0923 \u0918\u093e\u0938\u0938\u094d\u0925\u0932\u094b\u0902 \u0914\u0930 \u092e\u0930\u0941\u0938\u094d\u0925\u0932\u094b\u0902 \u092e\u0947\u0902 \u091c\u0940\u0935\u0928"},{id:"civ1",name:"\u0938\u092e\u093e\u0928\u0924\u093e"},{id:"civ2",name:"\u0938\u094d\u0935\u093e\u0938\u094d\u0925\u094d\u092f \u092e\u0947\u0902 \u0938\u0930\u0915\u093e\u0930 \u0915\u0940 \u092d\u0942\u092e\u093f\u0915\u093e"},{id:"civ3",name:"\u0930\u093e\u091c\u094d\u092f \u0938\u0930\u0915\u093e\u0930 \u0915\u0948\u0938\u0947 \u0915\u093e\u092e \u0915\u0930\u0924\u0940 \u0939\u0948"},{id:"civ4",name:"\u0932\u0921\u093c\u0915\u0947 \u0914\u0930 \u0932\u0921\u093c\u0915\u093f\u092f\u094b\u0902 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u092c\u0921\u093c\u093e \u0939\u094b\u0928\u093e"},{id:"civ5",name:"\u0914\u0930\u0924\u094b\u0902 \u0928\u0947 \u092c\u0926\u0932\u0940 \u0926\u0941\u0928\u093f\u092f\u093e"},{id:"civ6",name:"\u0938\u0902\u091a\u093e\u0930 \u092e\u093e\u0927\u094d\u092f\u092e\u094b\u0902 \u0915\u094b \u0938\u092e\u091d\u0928\u093e"},{id:"civ7",name:"\u0939\u092e\u093e\u0930\u0947 \u0906\u0938-\u092a\u093e\u0938 \u0915\u0947 \u092c\u093e\u091c\u093c\u093e\u0930"},{id:"civ8",name:"\u092c\u093e\u091c\u093c\u093e\u0930 \u092e\u0947\u0902 \u090f\u0915 \u0915\u092e\u0940\u091c\u093c"}],"7_Sanskrit":[{id:"ch1",name:"\u0938\u0941\u092d\u093e\u0937\u093f\u0924\u093e\u0928\u093f (Subhashitani)"},{id:"ch2",name:"\u0926\u0941\u0930\u094d\u092c\u0941\u0926\u094d\u0927\u093f\u0903 \u0935\u093f\u0928\u0936\u094d\u092f\u0924\u093f (Durbuddhi Vinashyati)"},{id:"ch3",name:"\u0938\u094d\u0935\u093e\u0935\u0932\u092e\u094d\u092c\u0928\u092e\u094d (Swavalambam)"},{id:"ch4",name:"\u0939\u093e\u0938\u094d\u092f\u092c\u093e\u0932\u0915\u0935\u093f\u0924\u093e (Hasya Bal Kavita)"},{id:"ch5",name:"\u092a\u0923\u094d\u0921\u093f\u0924\u093e \u0930\u092e\u093e\u092c\u093e\u0908 (Pandita Ramabai)"},{id:"ch6",name:"\u0938\u0926\u093e\u091a\u093e\u0930\u0903 (Sadacharah)"},{id:"ch7",name:"\u0938\u0902\u0915\u0932\u094d\u092a\u0903 \u0938\u093f\u0926\u094d\u0927\u093f\u0926\u093e\u092f\u0915\u0903 (Sankalp Siddhidayak)"},{id:"ch8",name:"\u0924\u094d\u0930\u093f\u0935\u0930\u094d\u0923\u0903 \u0927\u094d\u0935\u091c\u0903 (Trivarna Dhwajah)"}],"8_Hindi":[{id:"ch1",name:"\u0927\u094d\u0935\u0928\u093f"},{id:"ch2",name:"\u0932\u093e\u0916 \u0915\u0940 \u091a\u0942\u0921\u093c\u093f\u092f\u093e\u0901"},{id:"ch3",name:"\u092c\u0938 \u0915\u0940 \u092f\u093e\u0924\u094d\u0930\u093e"},{id:"ch4",name:"\u0926\u0940\u0935\u093e\u0928\u094b\u0902 \u0915\u0940 \u0939\u0938\u094d\u0924\u0940"},{id:"ch5",name:"\u091a\u093f\u091f\u094d\u0920\u093f\u092f\u094b\u0902 \u0915\u0940 \u0905\u0928\u0942\u0920\u0940 \u0926\u0941\u0928\u093f\u092f\u093e"},{id:"ch6",name:"\u092d\u0917\u0935\u093e\u0928 \u0915\u0947 \u0921\u093e\u0915\u093f\u090f"},{id:"ch7",name:"\u0915\u094d\u092f\u093e \u0928\u093f\u0930\u093e\u0936 \u0939\u0941\u0906 \u091c\u093e\u090f"},{id:"ch8",name:"\u092f\u0939 \u0938\u092c\u0938\u0947 \u0915\u0920\u093f\u0928 \u0938\u092e\u092f \u0928\u0939\u0940\u0902"},{id:"ch9",name:"\u0915\u092c\u0940\u0930 \u0915\u0940 \u0938\u093e\u0916\u093f\u092f\u093e\u0901"},{id:"ch10",name:"\u0915\u093e\u092e\u091a\u094b\u0930"},{id:"ch11",name:"\u091c\u092c \u0938\u093f\u0928\u0947\u092e\u093e \u0928\u0947 \u092c\u094b\u0932\u0928\u093e \u0938\u0940\u0916\u093e"},{id:"ch12",name:"\u0938\u0941\u0926\u093e\u092e\u093e \u091a\u0930\u093f\u0924"},{id:"ch13",name:"\u091c\u0939\u093e\u0901 \u092a\u0939\u093f\u092f\u093e \u0939\u0948"},{id:"ch14",name:"\u0905\u0915\u092c\u0930\u0940 \u0932\u094b\u091f\u093e"},{id:"ch15",name:"\u0938\u0942\u0930 \u0915\u0947 \u092a\u0926"},{id:"ch16",name:"\u092a\u093e\u0928\u0940 \u0915\u0940 \u0915\u0939\u093e\u0928\u0940"},{id:"ch17",name:"\u092c\u093e\u091c \u0914\u0930 \u0938\u093e\u0901\u092a"},{id:"ch18",name:"\u091f\u094b\u092a\u0940"}],"8_English":[{id:"ch1",name:"The Best Christmas Present in the World"},{id:"ch2",name:"The Tsunami"},{id:"ch3",name:"Glimpses of the Past"},{id:"ch4",name:"Bepin Choudhury's Lapse of Memory"},{id:"ch5",name:"The Summit Within"},{id:"ch6",name:"This is Jody's Fawn"},{id:"ch7",name:"A Visit to Cambridge"},{id:"ch8",name:"A Short Monsoon Diary"},{id:"ch9",name:"The Great Stone Face - I"},{id:"ch10",name:"The Great Stone Face - II"}],"8_Mathematics":[{id:"ch1",name:"Rational Numbers"},{id:"ch2",name:"Linear Equations in One Variable"},{id:"ch3",name:"Understanding Quadrilaterals"},{id:"ch4",name:"Practical Geometry"},{id:"ch5",name:"Data Handling"},{id:"ch6",name:"Squares and Square Roots"},{id:"ch7",name:"Cubes and Cube Roots"},{id:"ch8",name:"Comparing Quantities"},{id:"ch9",name:"Algebraic Expressions and Identities"},{id:"ch10",name:"Visualising Solid Shapes"},{id:"ch11",name:"Mensuration"},{id:"ch12",name:"Exponents and Powers"},{id:"ch13",name:"Direct and Inverse Proportions"},{id:"ch14",name:"Factorisation"},{id:"ch15",name:"Introduction to Graphs"},{id:"ch16",name:"Playing with Numbers"}],"8_\u0917\u0923\u093f\u0924":[{id:"ch1",name:"\u092a\u0930\u093f\u092e\u0947\u092f \u0938\u0902\u0916\u094d\u092f\u093e\u090f\u0901"},{id:"ch2",name:"\u090f\u0915 \u091a\u0930 \u0935\u093e\u0932\u0947 \u0930\u0948\u0916\u093f\u0915 \u0938\u092e\u0940\u0915\u0930\u0923"},{id:"ch3",name:"\u091a\u0924\u0941\u0930\u094d\u092d\u0941\u091c\u094b\u0902 \u0915\u094b \u0938\u092e\u091d\u0928\u093e"},{id:"ch4",name:"\u0906\u0901\u0915\u0921\u093c\u094b\u0902 \u0915\u093e \u092a\u094d\u0930\u092c\u0902\u0927\u0928"},{id:"ch5",name:"\u0935\u0930\u094d\u0917 \u0914\u0930 \u0935\u0930\u094d\u0917\u092e\u0942\u0932"},{id:"ch6",name:"\u0918\u0928 \u0914\u0930 \u0918\u0928\u092e\u0942\u0932"},{id:"ch7",name:"\u0930\u093e\u0936\u093f\u092f\u094b\u0902 \u0915\u0940 \u0924\u0941\u0932\u0928\u093e"},{id:"ch8",name:"\u092c\u0940\u091c\u0940\u092f \u0935\u094d\u092f\u0902\u091c\u0915 \u090f\u0935\u0902 \u0938\u0930\u094d\u0935\u0938\u092e\u093f\u0915\u093e\u090f\u0901"},{id:"ch9",name:"\u0915\u094d\u0937\u0947\u0924\u094d\u0930\u092e\u093f\u0924\u093f"},{id:"ch10",name:"\u0918\u093e\u0924\u093e\u0902\u0915 \u0914\u0930 \u0918\u093e\u0924"}],"8_Science":[{id:"ch1",name:"Crop Production and Management"},{id:"ch2",name:"Microorganisms: Friend and Foe"},{id:"ch3",name:"Synthetic Fibres and Plastics"},{id:"ch4",name:"Materials: Metals and Non-Metals"},{id:"ch5",name:"Coal and Petroleum"},{id:"ch6",name:"Combustion and Flame"},{id:"ch7",name:"Conservation of Plants and Animals"},{id:"ch8",name:"Cell - Structure and Functions"},{id:"ch9",name:"Reproduction in Animals"},{id:"ch10",name:"Reaching the Age of Adolescence"},{id:"ch11",name:"Force and Pressure"},{id:"ch12",name:"Friction"},{id:"ch13",name:"Sound"},{id:"ch14",name:"Chemical Effects of Electric Current"},{id:"ch15",name:"Some Natural Phenomena"},{id:"ch16",name:"Light"},{id:"ch17",name:"Stars and the Solar System"},{id:"ch18",name:"Pollution of Air and Water"}],"8_\u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"ch1",name:"\u092b\u0938\u0932 \u0909\u0924\u094d\u092a\u093e\u0926\u0928 \u090f\u0935\u0902 \u092a\u094d\u0930\u092c\u0902\u0927"},{id:"ch2",name:"\u0938\u0942\u0915\u094d\u0937\u094d\u092e\u091c\u0940\u0935: \u092e\u093f\u0924\u094d\u0930 \u090f\u0935\u0902 \u0936\u0924\u094d\u0930\u0941"},{id:"ch3",name:"\u0938\u0902\u0936\u094d\u0932\u0947\u0937\u093f\u0924 \u0930\u0947\u0936\u0947 \u0914\u0930 \u092a\u094d\u0932\u093e\u0938\u094d\u091f\u093f\u0915"},{id:"ch4",name:"\u092a\u0926\u093e\u0930\u094d\u0925: \u0927\u093e\u0924\u0941 \u0914\u0930 \u0905\u0927\u093e\u0924\u0941"},{id:"ch5",name:"\u0915\u094b\u092f\u0932\u093e \u0914\u0930 \u092a\u0947\u091f\u094d\u0930\u094b\u0932\u093f\u092f\u092e"},{id:"ch6",name:"\u0926\u0939\u0928 \u0914\u0930 \u091c\u094d\u0935\u093e\u0932\u093e"},{id:"ch7",name:"\u092a\u094c\u0927\u0947 \u090f\u0935\u0902 \u091c\u0902\u0924\u0941\u0913\u0902 \u0915\u093e \u0938\u0902\u0930\u0915\u094d\u0937\u0923"},{id:"ch8",name:"\u0915\u094b\u0936\u093f\u0915\u093e - \u0938\u0902\u0930\u091a\u0928\u093e \u090f\u0935\u0902 \u092a\u094d\u0930\u0915\u093e\u0930\u094d\u092f"},{id:"ch9",name:"\u091c\u0902\u0924\u0941\u0913\u0902 \u092e\u0947\u0902 \u092a\u094d\u0930\u091c\u0928\u0928"},{id:"ch10",name:"\u0915\u093f\u0936\u094b\u0930\u093e\u0935\u0938\u094d\u0925\u093e \u0915\u0940 \u0913\u0930"}],"8_Social Science":[{id:"hist1",name:"How, When and Where"},{id:"hist2",name:"From Trade to Territory"},{id:"hist3",name:"Ruling the Countryside"},{id:"hist4",name:"Tribals, Dikus and the Vision of a Golden Age"},{id:"hist5",name:"When People Rebel"},{id:"hist6",name:"Weavers, Iron Smelters and Factory Owners"},{id:"hist7",name:'Civilising the "Native", Educating the Nation'},{id:"hist8",name:"Women, Caste and Reform"},{id:"hist9",name:"The Making of the National Movement: 1870s-1947"},{id:"hist10",name:"India After Independence"},{id:"geo1",name:"Resources"},{id:"geo2",name:"Land, Soil, Water, Natural Vegetation and Wildlife Resources"},{id:"geo3",name:"Mineral and Power Resources"},{id:"geo4",name:"Agriculture"},{id:"geo5",name:"Industries"},{id:"geo6",name:"Human Resources"},{id:"civ1",name:"The Indian Constitution"},{id:"civ2",name:"Understanding Secularism"},{id:"civ3",name:"Why do we need a Parliament?"},{id:"civ4",name:"Understanding Laws"},{id:"civ5",name:"Judiciary"},{id:"civ6",name:"Understanding Our Criminal Justice System"},{id:"civ7",name:"Understanding Marginalisation"},{id:"civ8",name:"Confronting Marginalisation"},{id:"civ9",name:"Public Facilities"},{id:"civ10",name:"Law and Social Justice"}],"8_\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"hist1",name:"\u0915\u0948\u0938\u0947, \u0915\u092c \u0914\u0930 \u0915\u0939\u093e\u0901"},{id:"hist2",name:"\u0935\u094d\u092f\u093e\u092a\u093e\u0930 \u0938\u0947 \u0938\u093e\u092e\u094d\u0930\u093e\u091c\u094d\u092f \u0924\u0915"},{id:"hist3",name:"\u0917\u094d\u0930\u093e\u092e\u0940\u0923 \u0915\u094d\u0937\u0947\u0924\u094d\u0930 \u092a\u0930 \u0936\u093e\u0938\u0928 \u091a\u0932\u093e\u0928\u093e"},{id:"hist4",name:"\u0906\u0926\u093f\u0935\u093e\u0938\u0940, \u0926\u0940\u0915\u0942 \u0914\u0930 \u090f\u0915 \u0938\u094d\u0935\u0930\u094d\u0923 \u092f\u0941\u0917 \u0915\u0940 \u0915\u0932\u094d\u092a\u0928\u093e"},{id:"hist5",name:"\u091c\u092c \u091c\u0928\u0924\u093e \u092c\u0917\u093e\u0935\u0924 \u0915\u0930\u0924\u0940 \u0939\u0948"},{id:"hist6",name:"\u092c\u0941\u0928\u0915\u0930, \u0932\u094b\u0939\u093e \u092c\u0928\u093e\u0928\u0947 \u0935\u093e\u0932\u0947 \u0914\u0930 \u092b\u0948\u0915\u094d\u091f\u094d\u0930\u0940 \u092e\u093e\u0932\u093f\u0915"},{id:"hist7",name:'"\u0926\u0947\u0936\u0940 \u091c\u0928\u0924\u093e" \u0915\u094b \u0938\u092d\u094d\u092f \u092c\u0928\u093e\u0928\u093e \u0930\u093e\u0937\u094d\u091f\u094d\u0930 \u0915\u094b \u0936\u093f\u0915\u094d\u0937\u093f\u0924 \u0915\u0930\u0928\u093e'},{id:"hist8",name:"\u092e\u0939\u093f\u0932\u093e\u090f\u0901, \u091c\u093e\u0924\u093f \u090f\u0935\u0902 \u0938\u0941\u0927\u093e\u0930"},{id:"hist9",name:"\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f \u0906\u0902\u0926\u094b\u0932\u0928 \u0915\u093e \u0938\u0902\u0918\u091f\u0928: 1870 \u0915\u0947 \u0926\u0936\u0915 \u0938\u0947 1947 \u0924\u0915"},{id:"hist10",name:"\u0938\u094d\u0935\u0924\u0902\u0924\u094d\u0930\u0924\u093e \u0915\u0947 \u092c\u093e\u0926"},{id:"geo1",name:"\u0938\u0902\u0938\u093e\u0927\u0928"},{id:"geo2",name:"\u092d\u0942\u092e\u093f, \u092e\u0943\u0926\u093e, \u091c\u0932, \u092a\u094d\u0930\u093e\u0915\u0943\u0924\u093f\u0915 \u0935\u0928\u0938\u094d\u092a\u0924\u093f \u0914\u0930 \u0935\u0928\u094d\u092f \u091c\u0940\u0935\u0928 \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"geo3",name:"\u0916\u0928\u093f\u091c \u0914\u0930 \u0936\u0915\u094d\u0924\u093f \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"geo4",name:"\u0915\u0943\u0937\u093f"},{id:"geo5",name:"\u0909\u0926\u094d\u092f\u094b\u0917"},{id:"geo6",name:"\u092e\u093e\u0928\u0935 \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"civ1",name:"\u092d\u093e\u0930\u0924\u0940\u092f \u0938\u0902\u0935\u093f\u0927\u093e\u0928"},{id:"civ2",name:"\u0927\u0930\u094d\u092e\u0928\u093f\u0930\u092a\u0947\u0915\u094d\u0937\u0924\u093e \u0915\u0940 \u0938\u092e\u091d"},{id:"civ3",name:"\u0939\u092e\u0947\u0902 \u0938\u0902\u0938\u0926 \u0915\u094d\u092f\u094b\u0902 \u091a\u093e\u0939\u093f\u090f?"},{id:"civ4",name:"\u0915\u093e\u0928\u0942\u0928\u094b\u0902 \u0915\u0940 \u0938\u092e\u091d"},{id:"civ5",name:"\u0928\u094d\u092f\u093e\u092f\u092a\u093e\u0932\u093f\u0915\u093e"},{id:"civ6",name:"\u0939\u092e\u093e\u0930\u0940 \u0906\u092a\u0930\u093e\u0927\u093f\u0915 \u0928\u094d\u092f\u093e\u092f \u092a\u094d\u0930\u0923\u093e\u0932\u0940"},{id:"civ7",name:"\u0939\u093e\u0936\u093f\u092f\u093e\u0915\u0930\u0923 \u0915\u0940 \u0938\u092e\u091d"},{id:"civ8",name:"\u0939\u093e\u0936\u093f\u092f\u093e\u0915\u0930\u0923 \u0938\u0947 \u0928\u093f\u092a\u091f\u0928\u093e"},{id:"civ9",name:"\u091c\u0928\u0938\u0941\u0935\u093f\u0927\u093e\u090f\u0901"},{id:"civ10",name:"\u0915\u093e\u0928\u0942\u0928 \u0914\u0930 \u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0928\u094d\u092f\u093e\u092f"}]},IY={"9_Hindi":[{id:"ch1",name:"\u0926\u094b \u092c\u0948\u0932\u094b\u0902 \u0915\u0940 \u0915\u0925\u093e"},{id:"ch2",name:"\u0932\u094d\u0939\u093e\u0938\u093e \u0915\u0940 \u0913\u0930"},{id:"ch3",name:"\u0909\u092a\u092d\u094b\u0915\u094d\u0924\u093e\u0935\u093e\u0926 \u0915\u0940 \u0938\u0902\u0938\u094d\u0915\u0943\u0924\u093f"},{id:"ch4",name:"\u0938\u093e\u0901\u0935\u0932\u0947 \u0938\u092a\u0928\u094b\u0902 \u0915\u0940 \u092f\u093e\u0926"},{id:"ch5",name:"\u0928\u093e\u0928\u093e \u0938\u093e\u0939\u092c \u0915\u0940 \u092a\u0941\u0924\u094d\u0930\u0940 \u0926\u0947\u0935\u0940 \u092e\u0948\u0928\u093e \u0915\u094b \u092d\u0938\u094d\u092e \u0915\u0930 \u0926\u093f\u092f\u093e \u0917\u092f\u093e"},{id:"ch6",name:"\u092a\u094d\u0930\u0947\u092e\u091a\u0902\u0926 \u0915\u0947 \u092b\u091f\u0947 \u091c\u0942\u0924\u0947"},{id:"ch7",name:"\u092e\u0947\u0930\u0947 \u092c\u091a\u092a\u0928 \u0915\u0947 \u0926\u093f\u0928"},{id:"ch8",name:"\u090f\u0915 \u0915\u0941\u0924\u094d\u0924\u093e \u0914\u0930 \u090f\u0915 \u092e\u0948\u0928\u093e"},{id:"ch9",name:"\u0938\u093e\u0916\u093f\u092f\u093e\u0901 \u090f\u0935\u0902 \u0938\u092c\u0926"},{id:"ch10",name:"\u0935\u093e\u0916"},{id:"ch11",name:"\u0938\u0935\u0948\u092f\u0947"},{id:"ch12",name:"\u0915\u0948\u0926\u0940 \u0914\u0930 \u0915\u094b\u0915\u093f\u0932\u093e"},{id:"ch13",name:"\u0917\u094d\u0930\u093e\u092e \u0936\u094d\u0930\u0940"},{id:"ch14",name:"\u091a\u0902\u0926\u094d\u0930 \u0917\u0939\u0928\u093e \u0938\u0947 \u0932\u094c\u091f\u0924\u0940 \u092c\u0947\u0930"},{id:"ch15",name:"\u092e\u0947\u0918 \u0906\u090f"},{id:"ch16",name:"\u092f\u092e\u0930\u093e\u091c \u0915\u0940 \u0926\u093f\u0936\u093e"},{id:"ch17",name:"\u092c\u091a\u094d\u091a\u0947 \u0915\u093e\u092e \u092a\u0930 \u091c\u093e \u0930\u0939\u0947 \u0939\u0948\u0902"}],"8_Sanskrit":[{id:"ch1",name:"\u0938\u0941\u092d\u093e\u0937\u093f\u0924\u093e\u0928\u093f (Subhashitani)"},{id:"ch2",name:"\u092c\u093f\u0932\u0938\u094d\u092f \u0935\u093e\u0923\u0940 (Bilasya Vani)"},{id:"ch3",name:"\u0921\u093f\u091c\u0940\u092d\u093e\u0930\u0924\u092e\u094d (DigiIndia)"},{id:"ch4",name:"\u0938\u0926\u0948\u0935 \u092a\u0941\u0930\u0924\u094b \u0928\u093f\u0927\u0947\u0939\u093f \u091a\u0930\u0923\u092e\u094d (Keep Moving Forward)"},{id:"ch5",name:"\u0915\u0923\u094d\u091f\u0915\u0947\u0928\u0948\u0935 \u0915\u0923\u094d\u091f\u0915\u092e\u094d (Thorn with Thorn)"},{id:"ch6",name:"\u0917\u0943\u0939\u0902 \u0936\u0942\u0928\u094d\u092f\u0902 \u0938\u0941\u0924\u093e\u0902 \u0935\u093f\u0928\u093e (Empty Home)"},{id:"ch7",name:"\u092d\u093e\u0930\u0924\u091c\u0928\u0924\u093e\u093d\u0939\u092e\u094d (I am Indian)"},{id:"ch8",name:"\u0938\u0902\u0938\u093e\u0930\u0938\u093e\u0917\u0930\u0938\u094d\u092f \u0928\u093e\u092f\u0915\u093e\u0903 (Heroes of World)"}],"9_English":[{id:"ch1",name:"The Fun They Had"},{id:"ch2",name:"The Sound of Music"},{id:"ch3",name:"The Little Girl"},{id:"ch4",name:"A Truly Beautiful Mind"},{id:"ch5",name:"The Snake and the Mirror"},{id:"ch6",name:"My Childhood"},{id:"ch7",name:"Packing"},{id:"ch8",name:"Reach for the Top"},{id:"ch9",name:"The Bond of Love"},{id:"ch10",name:"Kathmandu"},{id:"ch11",name:"If I Were You"}],"9_Mathematics":[{id:"ch1",name:"Number Systems"},{id:"ch2",name:"Polynomials"},{id:"ch3",name:"Coordinate Geometry"},{id:"ch4",name:"Linear Equations in Two Variables"},{id:"ch5",name:"Introduction to Euclid's Geometry"},{id:"ch6",name:"Lines and Angles"},{id:"ch7",name:"Triangles"},{id:"ch8",name:"Quadrilaterals"},{id:"ch9",name:"Circles"},{id:"ch10",name:"Heron's Formula"},{id:"ch11",name:"Surface Areas and Volumes"},{id:"ch12",name:"Statistics"}],"9_Science":[{id:"ch1",name:"Matter in Our Surroundings"},{id:"ch2",name:"Is Matter Around Us Pure"},{id:"ch3",name:"Atoms and Molecules"},{id:"ch4",name:"Structure of the Atom"},{id:"ch5",name:"The Fundamental Unit of Life"},{id:"ch6",name:"Tissues"},{id:"ch7",name:"Motion"},{id:"ch8",name:"Force and Laws of Motion"},{id:"ch9",name:"Gravitation"},{id:"ch10",name:"Work and Energy"},{id:"ch11",name:"Sound"},{id:"ch12",name:"Improvement in Food Resources"}],"9_Social Science":[{id:"hist1",name:"The French Revolution"},{id:"hist2",name:"Socialism in Europe and the Russian Revolution"},{id:"hist3",name:"Nazism and the Rise of Hitler"},{id:"hist4",name:"Forest Society and Colonialism"},{id:"hist5",name:"Pastoralists in the Modern World"},{id:"geo1",name:"India - Size and Location"},{id:"geo2",name:"Physical Features of India"},{id:"geo3",name:"Drainage"},{id:"geo4",name:"Climate"},{id:"geo5",name:"Natural Vegetation and Wild Life"},{id:"geo6",name:"Population"},{id:"pol1",name:"What is Democracy? Why Democracy?"},{id:"pol2",name:"Constitutional Design"},{id:"pol3",name:"Electoral Politics"},{id:"pol4",name:"Working of Institutions"},{id:"pol5",name:"Democratic Rights"},{id:"eco1",name:"The Story of Village Palampur"},{id:"eco2",name:"People as Resource"},{id:"eco3",name:"Poverty as a Challenge"},{id:"eco4",name:"Food Security in India"}],"9_Sanskrit":[{id:"ch1",name:"\u092d\u093e\u0930\u0924\u0940\u0935\u0938\u0928\u094d\u0924\u0917\u0940\u0924\u093f\u0903 (Bharati Vasant Geetih)"},{id:"ch2",name:"\u0938\u094d\u0935\u093e\u092e\u0940 \u0935\u093f\u0935\u0947\u0915\u093e\u0928\u0928\u094d\u0926\u0903 (Swami Vivekanand)"},{id:"ch3",name:"\u0917\u094b\u0926\u094b\u0939\u0928\u092e\u094d (Godoh anam)"},{id:"ch4",name:"\u092e\u0928\u094d\u0926\u093e\u0915\u093f\u0928\u0940\u0935\u0930\u094d\u0923\u0928\u092e\u094d (Mandakini Varnanam)"},{id:"ch5",name:"\u0938\u0942\u0915\u094d\u0924\u092f\u0903 (Sukti)"},{id:"ch6",name:"\u092d\u094d\u0930\u093e\u0928\u094d\u0924\u094b \u092c\u093e\u0932\u0903 (Bhranto Balah)"}],"10_Hindi":[{id:"ch1",name:"\u0938\u0942\u0930\u0926\u093e\u0938 \u0915\u0947 \u092a\u0926"},{id:"ch2",name:"\u0930\u093e\u092e-\u0932\u0915\u094d\u0937\u094d\u092e\u0923-\u092a\u0930\u0936\u0941\u0930\u093e\u092e \u0938\u0902\u0935\u093e\u0926"},{id:"ch3",name:"\u0906\u0924\u094d\u092e\u0915\u0925\u094d\u092f"},{id:"ch4",name:"\u0909\u0924\u094d\u0938\u093e\u0939 \u0914\u0930 \u0905\u091f \u0928\u0939\u0940\u0902 \u0930\u0939\u0940"},{id:"ch5",name:"\u092f\u0939 \u0926\u0902\u0924\u0941\u0930\u0939\u093f\u0924 \u092e\u0941\u0938\u094d\u0915\u093e\u0928 \u0914\u0930 \u092b\u0938\u0932"},{id:"ch6",name:"\u091b\u093e\u092f\u093e \u092e\u0924 \u091b\u0942\u0928\u093e"},{id:"ch7",name:"\u0915\u0928\u094d\u092f\u093e\u0926\u093e\u0928"},{id:"ch8",name:"\u0938\u0902\u0917\u0924\u0915\u093e\u0930"},{id:"ch9",name:"\u0928\u0947\u0924\u093e\u091c\u0940 \u0915\u093e \u091a\u0936\u094d\u092e\u093e"},{id:"ch10",name:"\u092c\u093e\u0932\u0917\u094b\u092c\u093f\u0928 \u092d\u0917\u0924"},{id:"ch11",name:"\u0932\u0916\u0928\u0935\u0940 \u0905\u0902\u0926\u093e\u091c\u093c"},{id:"ch12",name:"\u092e\u093e\u0928\u0935\u0940\u092f \u0915\u0930\u0941\u0923\u093e \u0915\u0940 \u0926\u093f\u0935\u094d\u092f \u091a\u092e\u0915"},{id:"ch13",name:"\u090f\u0915 \u0915\u0939\u093e\u0928\u0940 \u092f\u0939 \u092d\u0940"},{id:"ch14",name:"\u0938\u094d\u0924\u094d\u0930\u0940 \u0936\u093f\u0915\u094d\u0937\u093e \u0915\u0947 \u0935\u093f\u0930\u094b\u0927\u0940 \u0915\u0941\u0924\u0930\u094d\u0915\u094b\u0902 \u0915\u093e \u0916\u0902\u0921\u0928"},{id:"ch15",name:"\u0928\u094c\u092c\u0924\u0916\u093e\u0928\u0947 \u092e\u0947\u0902 \u0907\u092c\u093e\u0926\u0924"},{id:"ch16",name:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u093f"}],"10_English":[{id:"ch1",name:"A Letter to God"},{id:"ch2",name:"Nelson Mandela: Long Walk to Freedom"},{id:"ch3",name:"Two Stories about Flying"},{id:"ch4",name:"From the Diary of Anne Frank"},{id:"ch5",name:"The Hundred Dresses - I"},{id:"ch6",name:"The Hundred Dresses - II"},{id:"ch7",name:"Glimpses of India"},{id:"ch8",name:"Mijbil the Otter"},{id:"ch9",name:"Madam Rides the Bus"},{id:"ch10",name:"The Sermon at Benares"},{id:"ch11",name:"The Proposal"}],"10_Mathematics":[{id:"ch1",name:"Real Numbers"},{id:"ch2",name:"Polynomials"},{id:"ch3",name:"Pair of Linear Equations in Two Variables"},{id:"ch4",name:"Quadratic Equations"},{id:"ch5",name:"Arithmetic Progressions"},{id:"ch6",name:"Triangles"},{id:"ch7",name:"Coordinate Geometry"},{id:"ch8",name:"Introduction to Trigonometry"},{id:"ch9",name:"Some Applications of Trigonometry"},{id:"ch10",name:"Circles"},{id:"ch11",name:"Areas Related to Circles"},{id:"ch12",name:"Surface Areas and Volumes"},{id:"ch13",name:"Statistics"},{id:"ch14",name:"Probability"}],"10_Science":[{id:"ch1",name:"Chemical Reactions and Equations"},{id:"ch2",name:"Acids, Bases and Salts"},{id:"ch3",name:"Metals and Non-metals"},{id:"ch4",name:"Carbon and its Compounds"},{id:"ch5",name:"Life Processes"},{id:"ch6",name:"Control and Coordination"},{id:"ch7",name:"How do Organisms Reproduce"},{id:"ch8",name:"Heredity"},{id:"ch9",name:"Light - Reflection and Refraction"},{id:"ch10",name:"Human Eye and Colourful World"},{id:"ch11",name:"Electricity"},{id:"ch12",name:"Magnetic Effects of Electric Current"},{id:"ch13",name:"Our Environment"}],"10_Social Science":[{id:"hist1",name:"The Rise of Nationalism in Europe"},{id:"hist2",name:"Nationalism in India"},{id:"hist3",name:"The Making of a Global World"},{id:"hist4",name:"The Age of Industrialisation"},{id:"hist5",name:"Print Culture and the Modern World"},{id:"geo1",name:"Resources and Development"},{id:"geo2",name:"Forest and Wildlife Resources"},{id:"geo3",name:"Water Resources"},{id:"geo4",name:"Agriculture"},{id:"geo5",name:"Minerals and Energy Resources"},{id:"geo6",name:"Manufacturing Industries"},{id:"geo7",name:"Lifelines of National Economy"},{id:"pol1",name:"Power Sharing"},{id:"pol2",name:"Federalism"},{id:"pol3",name:"Democracy and Diversity"},{id:"pol4",name:"Gender, Religion and Caste"},{id:"pol5",name:"Political Parties"},{id:"pol6",name:"Outcomes of Democracy"},{id:"eco1",name:"Development"},{id:"eco2",name:"Sectors of Indian Economy"},{id:"eco3",name:"Money and Credit"},{id:"eco4",name:"Globalisation and the Indian Economy"},{id:"eco5",name:"Consumer Rights"}]},RY={"11_Physics":[{id:"ch1",name:"Physical World"},{id:"ch2",name:"Units and Measurements"},{id:"ch3",name:"Motion in a Straight Line"},{id:"ch4",name:"Motion in a Plane"},{id:"ch5",name:"Laws of Motion"},{id:"ch6",name:"Work, Energy and Power"},{id:"ch7",name:"System of Particles and Rotational Motion"},{id:"ch8",name:"Gravitation"},{id:"ch9",name:"Mechanical Properties of Solids"},{id:"ch10",name:"Mechanical Properties of Fluids"},{id:"ch11",name:"Thermal Properties of Matter"},{id:"ch12",name:"Thermodynamics"},{id:"ch13",name:"Kinetic Theory"},{id:"ch14",name:"Oscillations"},{id:"ch15",name:"Waves"}],"10_Sanskrit":[{id:"ch1",name:"\u0936\u0941\u091a\u093f\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923\u092e\u094d (Clean Environment)"},{id:"ch2",name:"\u092c\u0941\u0926\u094d\u0927\u093f\u0930\u094d\u092c\u0932\u0935\u0924\u0940 \u0938\u0926\u093e (Intelligence is Powerful)"},{id:"ch3",name:"\u0935\u094d\u092f\u093e\u092f\u093e\u092e\u0903 \u0938\u0930\u094d\u0935\u0926\u093e \u092a\u0925\u094d\u092f\u0903 (Exercise is Beneficial)"},{id:"ch4",name:"\u0936\u093f\u0936\u0941\u0932\u093e\u0932\u0928\u092e\u094d (Child Care)"},{id:"ch5",name:"\u091c\u0928\u0928\u0940 \u0924\u0941\u0932\u094d\u092f\u0935\u0924\u094d\u0938\u0932\u093e (Mother is Loving)"},{id:"ch6",name:"\u0938\u0941\u092d\u093e\u0937\u093f\u0924\u093e\u0928\u093f (Wise Sayings)"}],"11_Chemistry":[{id:"ch1",name:"Some Basic Concepts of Chemistry"},{id:"ch2",name:"Structure of Atom"},{id:"ch3",name:"Classification of Elements and Periodicity"},{id:"ch4",name:"Chemical Bonding and Molecular Structure"},{id:"ch5",name:"States of Matter"},{id:"ch6",name:"Thermodynamics"},{id:"ch7",name:"Equilibrium"},{id:"ch8",name:"Redox Reactions"},{id:"ch9",name:"Hydrogen"},{id:"ch10",name:"s-Block Elements"},{id:"ch11",name:"p-Block Elements"},{id:"ch12",name:"Organic Chemistry - Some Basic Principles"},{id:"ch13",name:"Hydrocarbons"},{id:"ch14",name:"Environmental Chemistry"}],"11_Biology":[{id:"ch1",name:"The Living World"},{id:"ch2",name:"Biological Classification"},{id:"ch3",name:"Plant Kingdom"},{id:"ch4",name:"Animal Kingdom"},{id:"ch5",name:"Morphology of Flowering Plants"},{id:"ch6",name:"Anatomy of Flowering Plants"},{id:"ch7",name:"Structural Organisation in Animals"},{id:"ch8",name:"Cell: The Unit of Life"},{id:"ch9",name:"Biomolecules"},{id:"ch10",name:"Cell Cycle and Cell Division"},{id:"ch11",name:"Transport in Plants"},{id:"ch12",name:"Mineral Nutrition"},{id:"ch13",name:"Photosynthesis in Higher Plants"},{id:"ch14",name:"Respiration in Plants"},{id:"ch15",name:"Plant Growth and Development"},{id:"ch16",name:"Digestion and Absorption"},{id:"ch17",name:"Breathing and Exchange of Gases"},{id:"ch18",name:"Body Fluids and Circulation"},{id:"ch19",name:"Excretory Products and their Elimination"},{id:"ch20",name:"Locomotion and Movement"},{id:"ch21",name:"Neural Control and Coordination"},{id:"ch22",name:"Chemical Coordination and Integration"}],"11_Mathematics":[{id:"ch1",name:"Sets"},{id:"ch2",name:"Relations and Functions"},{id:"ch3",name:"Trigonometric Functions"},{id:"ch4",name:"Complex Numbers and Quadratic Equations"},{id:"ch5",name:"Linear Inequalities"},{id:"ch6",name:"Permutations and Combinations"},{id:"ch7",name:"Binomial Theorem"},{id:"ch8",name:"Sequences and Series"},{id:"ch9",name:"Straight Lines"},{id:"ch10",name:"Conic Sections"},{id:"ch11",name:"Introduction to Three Dimensional Geometry"},{id:"ch12",name:"Limits and Derivatives"},{id:"ch13",name:"Statistics"},{id:"ch14",name:"Probability"}],"12_Physics":[{id:"ch1",name:"Electric Charges and Fields"},{id:"ch2",name:"Electrostatic Potential and Capacitance"},{id:"ch3",name:"Current Electricity"},{id:"ch4",name:"Moving Charges and Magnetism"},{id:"ch5",name:"Magnetism and Matter"},{id:"ch6",name:"Electromagnetic Induction"},{id:"ch7",name:"Alternating Current"},{id:"ch8",name:"Electromagnetic Waves"},{id:"ch9",name:"Ray Optics and Optical Instruments"},{id:"ch10",name:"Wave Optics"},{id:"ch11",name:"Dual Nature of Radiation and Matter"},{id:"ch12",name:"Atoms"},{id:"ch13",name:"Nuclei"},{id:"ch14",name:"Semiconductor Electronics"}],"12_Chemistry":[{id:"ch1",name:"The Solid State"},{id:"ch2",name:"Solutions"},{id:"ch3",name:"Electrochemistry"},{id:"ch4",name:"Chemical Kinetics"},{id:"ch5",name:"Surface Chemistry"},{id:"ch6",name:"General Principles and Processes of Isolation of Elements"},{id:"ch7",name:"p-Block Elements"},{id:"ch8",name:"d and f Block Elements"},{id:"ch9",name:"Coordination Compounds"},{id:"ch10",name:"Haloalkanes and Haloarenes"},{id:"ch11",name:"Alcohols, Phenols and Ethers"},{id:"ch12",name:"Aldehydes, Ketones and Carboxylic Acids"},{id:"ch13",name:"Amines"},{id:"ch14",name:"Biomolecules"},{id:"ch15",name:"Polymers"},{id:"ch16",name:"Chemistry in Everyday Life"}],"12_Biology":[{id:"ch1",name:"Reproduction in Organisms"},{id:"ch2",name:"Sexual Reproduction in Flowering Plants"},{id:"ch3",name:"Human Reproduction"},{id:"ch4",name:"Reproductive Health"},{id:"ch5",name:"Principles of Inheritance and Variation"},{id:"ch6",name:"Molecular Basis of Inheritance"},{id:"ch7",name:"Evolution"},{id:"ch8",name:"Human Health and Disease"},{id:"ch9",name:"Strategies for Enhancement in Food Production"},{id:"ch10",name:"Microbes in Human Welfare"},{id:"ch11",name:"Biotechnology: Principles and Processes"},{id:"ch12",name:"Biotechnology and Its Applications"},{id:"ch13",name:"Organisms and Populations"},{id:"ch14",name:"Ecosystem"},{id:"ch15",name:"Biodiversity and Conservation"},{id:"ch16",name:"Environmental Issues"}],"12_Mathematics":[{id:"ch1",name:"Relations and Functions"},{id:"ch2",name:"Inverse Trigonometric Functions"},{id:"ch3",name:"Matrices"},{id:"ch4",name:"Determinants"},{id:"ch5",name:"Continuity and Differentiability"},{id:"ch6",name:"Application of Derivatives"},{id:"ch7",name:"Integrals"},{id:"ch8",name:"Application of Integrals"},{id:"ch9",name:"Differential Equations"},{id:"ch10",name:"Vector Algebra"},{id:"ch11",name:"Three Dimensional Geometry"},{id:"ch12",name:"Linear Programming"},{id:"ch13",name:"Probability"}]},LY={"10_\u0917\u0923\u093f\u0924":[{id:"ch1",name:"\u0935\u093e\u0938\u094d\u0924\u0935\u093f\u0915 \u0938\u0902\u0916\u094d\u092f\u093e\u090f\u0901"},{id:"ch2",name:"\u092c\u0939\u0941\u092a\u0926"},{id:"ch3",name:"\u0926\u094b \u091a\u0930\u094b\u0902 \u0935\u093e\u0932\u0947 \u0930\u0948\u0916\u093f\u0915 \u0938\u092e\u0940\u0915\u0930\u0923 \u092f\u0941\u0917\u094d\u092e"},{id:"ch4",name:"\u0926\u094d\u0935\u093f\u0918\u093e\u0924 \u0938\u092e\u0940\u0915\u0930\u0923"},{id:"ch5",name:"\u0938\u092e\u093e\u0902\u0924\u0930 \u0936\u094d\u0930\u0947\u0922\u093c\u0940"},{id:"ch6",name:"\u0924\u094d\u0930\u093f\u092d\u0941\u091c"},{id:"ch7",name:"\u0928\u093f\u0930\u094d\u0926\u0947\u0936\u093e\u0902\u0915 \u091c\u094d\u092f\u093e\u092e\u093f\u0924\u093f"},{id:"ch8",name:"\u0924\u094d\u0930\u093f\u0915\u094b\u0923\u092e\u093f\u0924\u093f \u0915\u093e \u092a\u0930\u093f\u091a\u092f"},{id:"ch9",name:"\u0924\u094d\u0930\u093f\u0915\u094b\u0923\u092e\u093f\u0924\u093f \u0915\u0947 \u0915\u0941\u091b \u0905\u0928\u0941\u092a\u094d\u0930\u092f\u094b\u0917"},{id:"ch10",name:"\u0935\u0943\u0924\u094d\u0924"},{id:"ch11",name:"\u0935\u0943\u0924\u094d\u0924\u094b\u0902 \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0915\u094d\u0937\u0947\u0924\u094d\u0930\u092b\u0932"},{id:"ch12",name:"\u092a\u0943\u0937\u094d\u0920\u0940\u092f \u0915\u094d\u0937\u0947\u0924\u094d\u0930\u092b\u0932 \u0914\u0930 \u0906\u092f\u0924\u0928"},{id:"ch13",name:"\u0938\u093e\u0902\u0916\u094d\u092f\u093f\u0915\u0940"},{id:"ch14",name:"\u092a\u094d\u0930\u093e\u092f\u093f\u0915\u0924\u093e"}],"10_\u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"ch1",name:"\u0930\u093e\u0938\u093e\u092f\u0928\u093f\u0915 \u0905\u092d\u093f\u0915\u094d\u0930\u093f\u092f\u093e\u090f\u0901 \u090f\u0935\u0902 \u0938\u092e\u0940\u0915\u0930\u0923"},{id:"ch2",name:"\u0905\u092e\u094d\u0932, \u0915\u094d\u0937\u093e\u0930\u0915 \u090f\u0935\u0902 \u0932\u0935\u0923"},{id:"ch3",name:"\u0927\u093e\u0924\u0941 \u090f\u0935\u0902 \u0905\u0927\u093e\u0924\u0941"},{id:"ch4",name:"\u0915\u093e\u0930\u094d\u092c\u0928 \u090f\u0935\u0902 \u0909\u0938\u0915\u0947 \u092f\u094c\u0917\u093f\u0915"},{id:"ch5",name:"\u091c\u0948\u0935 \u092a\u094d\u0930\u0915\u094d\u0930\u092e"},{id:"ch6",name:"\u0928\u093f\u092f\u0902\u0924\u094d\u0930\u0923 \u090f\u0935\u0902 \u0938\u092e\u0928\u094d\u0935\u092f"},{id:"ch7",name:"\u091c\u0940\u0935 \u091c\u0928\u0928 \u0915\u0948\u0938\u0947 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902"},{id:"ch8",name:"\u0906\u0928\u0941\u0935\u0902\u0936\u093f\u0915\u0924\u093e"},{id:"ch9",name:"\u092a\u094d\u0930\u0915\u093e\u0936 - \u092a\u0930\u093e\u0935\u0930\u094d\u0924\u0928 \u0924\u0925\u093e \u0905\u092a\u0935\u0930\u094d\u0924\u0928"},{id:"ch10",name:"\u092e\u093e\u0928\u0935 \u0928\u0947\u0924\u094d\u0930 \u0924\u0925\u093e \u0930\u0902\u0917\u092c\u093f\u0930\u0902\u0917\u093e \u0938\u0902\u0938\u093e\u0930"},{id:"ch11",name:"\u0935\u093f\u0926\u094d\u092f\u0941\u0924"},{id:"ch12",name:"\u0935\u093f\u0926\u094d\u092f\u0941\u0924 \u0927\u093e\u0930\u093e \u0915\u0947 \u091a\u0941\u0902\u092c\u0915\u0940\u092f \u092a\u094d\u0930\u092d\u093e\u0935"},{id:"ch13",name:"\u0939\u092e\u093e\u0930\u093e \u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923"}],"10_\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"hist1",name:"\u092f\u0942\u0930\u094b\u092a \u092e\u0947\u0902 \u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0935\u093e\u0926 \u0915\u093e \u0909\u0926\u092f"},{id:"hist2",name:"\u092d\u093e\u0930\u0924 \u092e\u0947\u0902 \u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0935\u093e\u0926"},{id:"hist3",name:"\u092d\u0942\u092e\u0902\u0921\u0932\u0940\u0915\u0943\u0924 \u0935\u093f\u0936\u094d\u0935 \u0915\u093e \u092c\u0928\u0928\u093e"},{id:"hist4",name:"\u0914\u0926\u094d\u092f\u094b\u0917\u0940\u0915\u0930\u0923 \u0915\u093e \u092f\u0941\u0917"},{id:"hist5",name:"\u092e\u0941\u0926\u094d\u0930\u0923 \u0938\u0902\u0938\u094d\u0915\u0943\u0924\u093f \u0914\u0930 \u0906\u0927\u0941\u0928\u093f\u0915 \u0926\u0941\u0928\u093f\u092f\u093e"},{id:"geo1",name:"\u0938\u0902\u0938\u093e\u0927\u0928 \u090f\u0935\u0902 \u0935\u093f\u0915\u093e\u0938"},{id:"geo2",name:"\u0935\u0928 \u090f\u0935\u0902 \u0935\u0928\u094d\u092f \u091c\u0940\u0935 \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"geo3",name:"\u091c\u0932 \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"geo4",name:"\u0915\u0943\u0937\u093f"},{id:"geo5",name:"\u0916\u0928\u093f\u091c \u0924\u0925\u093e \u090a\u0930\u094d\u091c\u093e \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"geo6",name:"\u0935\u093f\u0928\u093f\u0930\u094d\u092e\u093e\u0923 \u0909\u0926\u094d\u092f\u094b\u0917"},{id:"geo7",name:"\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f \u0905\u0930\u094d\u0925\u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093e \u0915\u0940 \u091c\u0940\u0935\u0928 \u0930\u0947\u0916\u093e\u090f\u0901"},{id:"pol1",name:"\u0938\u0924\u094d\u0924\u093e \u0915\u0940 \u0938\u093e\u091d\u0947\u0926\u093e\u0930\u0940"},{id:"pol2",name:"\u0938\u0902\u0918\u0935\u093e\u0926"},{id:"pol3",name:"\u0932\u094b\u0915\u0924\u0902\u0924\u094d\u0930 \u0914\u0930 \u0935\u093f\u0935\u093f\u0927\u0924\u093e"},{id:"pol4",name:"\u091c\u093e\u0924\u093f, \u0927\u0930\u094d\u092e \u0914\u0930 \u0932\u0948\u0902\u0917\u093f\u0915 \u092e\u0938\u0932\u0947"},{id:"pol5",name:"\u0930\u093e\u091c\u0928\u0940\u0924\u093f\u0915 \u0926\u0932"},{id:"pol6",name:"\u0932\u094b\u0915\u0924\u0902\u0924\u094d\u0930 \u0915\u0947 \u092a\u0930\u093f\u0923\u093e\u092e"},{id:"eco1",name:"\u0935\u093f\u0915\u093e\u0938"},{id:"eco2",name:"\u092d\u093e\u0930\u0924\u0940\u092f \u0905\u0930\u094d\u0925\u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093e \u0915\u0947 \u0915\u094d\u0937\u0947\u0924\u094d\u0930\u0915"},{id:"eco3",name:"\u092e\u0941\u0926\u094d\u0930\u093e \u0914\u0930 \u0938\u093e\u0916"},{id:"eco4",name:"\u0935\u0948\u0936\u094d\u0935\u0940\u0915\u0930\u0923 \u0914\u0930 \u092d\u093e\u0930\u0924\u0940\u092f \u0905\u0930\u094d\u0925\u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093e"},{id:"eco5",name:"\u0909\u092a\u092d\u094b\u0915\u094d\u0924\u093e \u0905\u0927\u093f\u0915\u093e\u0930"}]},FY={"10_\u0917\u0923\u093f\u0924":[{id:"ch1",name:"\u0935\u093e\u0938\u094d\u0924\u0935\u093f\u0915 \u0938\u0902\u0916\u094d\u092f\u093e\u090f\u0901"},{id:"ch2",name:"\u092c\u0939\u0941\u092a\u0926"},{id:"ch3",name:"\u0926\u094b \u091a\u0930\u094b\u0902 \u0935\u093e\u0932\u0947 \u0930\u0948\u0916\u093f\u0915 \u0938\u092e\u0940\u0915\u0930\u0923 \u092f\u0941\u0917\u094d\u092e"},{id:"ch4",name:"\u0926\u094d\u0935\u093f\u0918\u093e\u0924 \u0938\u092e\u0940\u0915\u0930\u0923"},{id:"ch5",name:"\u0938\u092e\u093e\u0928\u094d\u0924\u0930 \u0936\u094d\u0930\u0947\u0922\u093c\u0940"},{id:"ch6",name:"\u0924\u094d\u0930\u093f\u092d\u0941\u091c"},{id:"ch7",name:"\u0928\u093f\u0930\u094d\u0926\u0947\u0936\u093e\u0902\u0915 \u091c\u094d\u092f\u093e\u092e\u093f\u0924\u093f"},{id:"ch8",name:"\u0924\u094d\u0930\u093f\u0915\u094b\u0923\u092e\u093f\u0924\u093f \u0915\u093e \u092a\u0930\u093f\u091a\u092f"},{id:"ch9",name:"\u0924\u094d\u0930\u093f\u0915\u094b\u0923\u092e\u093f\u0924\u093f \u0915\u0947 \u0915\u0941\u091b \u0905\u0928\u0941\u092a\u094d\u0930\u092f\u094b\u0917"},{id:"ch10",name:"\u0935\u0943\u0924\u094d\u0924"},{id:"ch11",name:"\u0930\u091a\u0928\u093e\u090f\u0901"},{id:"ch12",name:"\u0935\u0943\u0924\u094d\u0924\u094b\u0902 \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0915\u094d\u0937\u0947\u0924\u094d\u0930\u092b\u0932"},{id:"ch13",name:"\u092a\u0943\u0937\u094d\u0920\u0940\u092f \u0915\u094d\u0937\u0947\u0924\u094d\u0930\u092b\u0932 \u0914\u0930 \u0906\u092f\u0924\u0928"},{id:"ch14",name:"\u0938\u093e\u0902\u0916\u094d\u092f\u093f\u0915\u0940"},{id:"ch15",name:"\u092a\u094d\u0930\u093e\u092f\u093f\u0915\u0924\u093e"}],"10_\u0935\u093f\u091c\u094d\u091e\u093e\u0928":[{id:"ch1",name:"\u0930\u093e\u0938\u093e\u092f\u0928\u093f\u0915 \u0905\u092d\u093f\u0915\u094d\u0930\u093f\u092f\u093e\u090f\u0901 \u090f\u0935\u0902 \u0938\u092e\u0940\u0915\u0930\u0923"},{id:"ch2",name:"\u0905\u092e\u094d\u0932, \u0915\u094d\u0937\u093e\u0930 \u090f\u0935\u0902 \u0932\u0935\u0923"},{id:"ch3",name:"\u0927\u093e\u0924\u0941 \u090f\u0935\u0902 \u0905\u0927\u093e\u0924\u0941"},{id:"ch4",name:"\u0915\u093e\u0930\u094d\u092c\u0928 \u090f\u0935\u0902 \u0909\u0938\u0915\u0947 \u092f\u094c\u0917\u093f\u0915"},{id:"ch5",name:"\u0924\u0924\u094d\u0935\u094b\u0902 \u0915\u093e \u0906\u0935\u0930\u094d\u0924 \u0935\u0930\u094d\u0917\u0940\u0915\u0930\u0923"},{id:"ch6",name:"\u091c\u0948\u0935 \u092a\u094d\u0930\u0915\u094d\u0930\u092e"},{id:"ch7",name:"\u0928\u093f\u092f\u0902\u0924\u094d\u0930\u0923 \u090f\u0935\u0902 \u0938\u092e\u0928\u094d\u0935\u092f"},{id:"ch8",name:"\u091c\u0940\u0935 \u091c\u0928\u0928 \u0915\u0948\u0938\u0947 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902"},{id:"ch9",name:"\u0906\u0928\u0941\u0935\u0902\u0936\u093f\u0915\u0924\u093e \u090f\u0935\u0902 \u091c\u0948\u0935 \u0935\u093f\u0915\u093e\u0938"},{id:"ch10",name:"\u092a\u094d\u0930\u0915\u093e\u0936 - \u092a\u0930\u093e\u0935\u0930\u094d\u0924\u0928 \u0924\u0925\u093e \u0905\u092a\u0935\u0930\u094d\u0924\u0928"},{id:"ch11",name:"\u092e\u093e\u0928\u0935 \u0928\u0947\u0924\u094d\u0930 \u0924\u0925\u093e \u0930\u0902\u0917\u092c\u093f\u0930\u0902\u0917\u093e \u0938\u0902\u0938\u093e\u0930"},{id:"ch12",name:"\u0935\u093f\u0926\u094d\u092f\u0941\u0924"},{id:"ch13",name:"\u0935\u093f\u0926\u094d\u092f\u0941\u0924 \u0927\u093e\u0930\u093e \u0915\u0947 \u091a\u0941\u0902\u092c\u0915\u0940\u092f \u092a\u094d\u0930\u092d\u093e\u0935"},{id:"ch14",name:"\u090a\u0930\u094d\u091c\u093e \u0915\u0947 \u0938\u094d\u0930\u094b\u0924"},{id:"ch15",name:"\u0939\u092e\u093e\u0930\u093e \u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923"},{id:"ch16",name:"\u092a\u094d\u0930\u093e\u0915\u0943\u0924\u093f\u0915 \u0938\u0902\u0938\u093e\u0927\u0928\u094b\u0902 \u0915\u093e \u092a\u094d\u0930\u092c\u0902\u0927\u0928"}],"10_\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0905\u0927\u094d\u092f\u092f\u0928":[{id:"ch1",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928: \u090f\u0915 \u092a\u0930\u093f\u091a\u092f"},{id:"ch2",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0915\u0947 \u092d\u094c\u0924\u093f\u0915 \u092a\u094d\u0930\u0926\u0947\u0936"},{id:"ch3",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0915\u0940 \u091c\u0932\u0935\u093e\u092f\u0941"},{id:"ch4",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u092e\u0947\u0902 \u091c\u0932 \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"ch5",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u092e\u0947\u0902 \u0915\u0943\u0937\u093f"},{id:"ch6",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u092e\u0947\u0902 \u0916\u0928\u093f\u091c \u0938\u0902\u0938\u093e\u0927\u0928"},{id:"ch7",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u092e\u0947\u0902 \u0909\u0926\u094d\u092f\u094b\u0917"},{id:"ch8",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u092e\u0947\u0902 \u092a\u0930\u093f\u0935\u0939\u0928 \u090f\u0935\u0902 \u0938\u0902\u091a\u093e\u0930"},{id:"ch9",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0915\u0940 \u0915\u0932\u093e \u090f\u0935\u0902 \u0938\u0902\u0938\u094d\u0915\u0943\u0924\u093f"},{id:"ch10",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0915\u0947 \u092a\u094d\u0930\u092e\u0941\u0916 \u092a\u0930\u094d\u092f\u091f\u0928 \u0938\u094d\u0925\u0932"}]},zY=(e,t,a)=>{"MPBSE"!==e&&"MP Board"!==e&&"RBSE"!==e&&"Rajasthan Board"!==e||(e="CBSE");const s=/[\u0900-\u097F]/.test(a),n={"\u0939\u093f\u0902\u0926\u0940":"Hindi","\u0917\u0923\u093f\u0924":"Mathematics","\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940":"English","\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u093c\u0940":"English","\u0935\u093f\u091c\u094d\u091e\u093e\u0928":"Science","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":"Social Science","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923":"EVS","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923 \u0905\u0927\u094d\u092f\u092f\u0928":"EVS","\u0938\u0902\u0938\u094d\u0915\u0943\u0924":"Sanskrit","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e":"Drawing","\u0915\u0932\u093e":"Drawing","\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928":"GK","\u092d\u094c\u0924\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":"Physics","\u092d\u094c\u0924\u093f\u0915\u0940":"Physics","\u0930\u0938\u093e\u092f\u0928 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":"Chemistry","\u0930\u0938\u093e\u092f\u0928 \u0936\u093e\u0938\u094d\u0924\u094d\u0930":"Chemistry","\u091c\u0940\u0935 \u0935\u093f\u091c\u094d\u091e\u093e\u0928":"Biology","\u0905\u0930\u094d\u0925\u0936\u093e\u0938\u094d\u0924\u094d\u0930":"Economics","\u0935\u093e\u0923\u093f\u091c\u094d\u092f":"Commerce","\u0935\u093e\u0923\u093f\u091c\u094d\u092f \u0936\u093e\u0938\u094d\u0924\u094d\u0930":"Commerce","\u0932\u0947\u0916\u093e\u0936\u093e\u0938\u094d\u0924\u094d\u0930":"Accountancy","\u0907\u0924\u093f\u0939\u093e\u0938":"History","\u092d\u0942\u0917\u094b\u0932":"Geography","\u0928\u093e\u0917\u0930\u093f\u0915 \u0936\u093e\u0938\u094d\u0924\u094d\u0930":"Civics","\u0930\u093e\u091c\u0928\u0940\u0924\u093f \u0935\u093f\u091c\u094d\u091e\u093e\u0928":"Political Science"}[r=a]||r;var r;if(["Nursery","LKG","UKG"].includes(t)){let e=n;(n.includes("GK")||n.includes("General")||n.includes("Awareness")||"EVS"===n||"\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923"===n)&&(e="GK"),(n.includes("\u0917\u0923\u093f\u0924")||"Mathematics"===n)&&(e="Mathematics"),"\u0939\u093f\u0902\u0926\u0940"!==n&&"Hindi"!==n||(e="Hindi"),(n.includes("Drawing")||n.includes("\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e")||n.includes("Art"))&&(e="Drawing"),(n.includes("Rhyme")||n.includes("\u0917\u0940\u0924"))&&(e="Rhymes");const a="".concat(t,"_").concat(e);return MY[a]||[]}const i=t.replace("Class ","");if(["1","2","3","4","5"].includes(i)){let e=n;(n.includes("EVS")||n.includes("\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923")||n.includes("GK"))&&(e="EVS"),(n.includes("\u0917\u0923\u093f\u0924")||"Mathematics"===n)&&(e="Mathematics"),"\u0939\u093f\u0902\u0926\u0940"!==n&&"Hindi"!==n||(e="Hindi"),(n.includes("Drawing")||n.includes("\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e")||n.includes("Art"))&&(e="Drawing");const t="".concat(i,"_").concat(e);return TY[t]||[]}if(["6","7","8"].includes(i)){if(s&&("\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928"===a||a.includes("\u0938\u093e\u092e\u093e\u091c\u093f\u0915"))){const e="".concat(i,"_\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928");if(DY[e])return DY[e]}let e=n;!n.includes("\u0935\u093f\u091c\u094d\u091e\u093e\u0928")&&"Science"!==n||n.includes("\u0938\u093e\u092e\u093e\u091c\u093f\u0915")||(e="Science"),(n.includes("\u0938\u093e\u092e\u093e\u091c\u093f\u0915")||n.includes("Social"))&&(e="Social Science"),(n.includes("\u0917\u0923\u093f\u0924")||"Mathematics"===n)&&(e="Mathematics"),"\u0939\u093f\u0902\u0926\u0940"!==n&&"Hindi"!==n||(e="Hindi");const t="".concat(i,"_").concat(e);return DY[t]||[]}if(["9","10"].includes(i)){let t=n;!n.includes("\u0935\u093f\u091c\u094d\u091e\u093e\u0928")&&"Science"!==n||n.includes("\u0938\u093e\u092e\u093e\u091c\u093f\u0915")||(t="Science"),(n.includes("\u0938\u093e\u092e\u093e\u091c\u093f\u0915")||n.includes("Social"))&&(t="Social Science"),(n.includes("\u0917\u0923\u093f\u0924")||"Mathematics"===n)&&(t="Mathematics"),"\u0939\u093f\u0902\u0926\u0940"!==n&&"Hindi"!==n||(t="Hindi");const s="".concat(i,"_").concat(t);return"MPBSE"===e?LY["".concat(i,"_").concat(a)]||IY[s]||[]:"RBSE"===e?FY["".concat(i,"_").concat(a)]||IY[s]||[]:IY[s]||[]}if(["11","12"].includes(i)){let e=n;(n.includes("\u092d\u094c\u0924\u093f\u0915")||"Physics"===n)&&(e="Physics"),(n.includes("\u0930\u0938\u093e\u092f\u0928")||"Chemistry"===n)&&(e="Chemistry"),(a.includes("\u091c\u0940\u0935")||"Biology"===a)&&(e="Biology"),(a.includes("\u0917\u0923\u093f\u0924")||"Mathematics"===a)&&(e="Mathematics");const t="".concat(i,"_").concat(e);return RY[t]||[]}return[]},BY={CBSE:{mcq:{marks:1,label:"MCQ (1 mark)"},fill_blank:{marks:1,label:"Fill in Blanks (1 mark)"},vsaq:{marks:2,label:"Very Short Answer (2 marks)"},short:{marks:3,label:"Short Answer (3 marks)"},long:{marks:4,label:"Long Answer (4 marks)"},diagram:{marks:3,label:"Diagram Based (3 marks)"},hots:{marks:4,label:"HOTS (4 marks)"},case_study:{marks:4,label:"Case Study (4 marks)"}},MPBSE:{mcq:{marks:1,label:"\u092c\u0939\u0941\u0935\u093f\u0915\u0932\u094d\u092a\u0940\u092f (1 \u0905\u0902\u0915)"},fill_blank:{marks:1,label:"\u0930\u093f\u0915\u094d\u0924 \u0938\u094d\u0925\u093e\u0928 (1 \u0905\u0902\u0915)"},ati_laghu:{marks:2,label:"\u0905\u0924\u093f \u0932\u0918\u0941 \u0909\u0924\u094d\u0924\u0930\u0940\u092f (2 \u0905\u0902\u0915)"},laghu:{marks:3,label:"\u0932\u0918\u0941 \u0909\u0924\u094d\u0924\u0930\u0940\u092f (3 \u0905\u0902\u0915)"},dirgha:{marks:4,label:"\u0926\u0940\u0930\u094d\u0918 \u0909\u0924\u094d\u0924\u0930\u0940\u092f (4 \u0905\u0902\u0915)"},diagram:{marks:3,label:"\u091a\u093f\u0924\u094d\u0930 \u0906\u0927\u093e\u0930\u093f\u0924 (3 \u0905\u0902\u0915)"},nibandh:{marks:5,label:"\u0928\u093f\u092c\u0902\u0927\u093e\u0924\u094d\u092e\u0915 (5 \u0905\u0902\u0915)"}},RBSE:{mcq:{marks:1,label:"\u092c\u0939\u0941\u0935\u093f\u0915\u0932\u094d\u092a\u0940\u092f (1 \u0905\u0902\u0915)"},fill_blank:{marks:1,label:"\u0930\u093f\u0915\u094d\u0924 \u0938\u094d\u0925\u093e\u0928 (1 \u0905\u0902\u0915)"},ati_laghu:{marks:2,label:"\u0905\u0924\u093f \u0932\u0918\u0941 \u0909\u0924\u094d\u0924\u0930\u0940\u092f (2 \u0905\u0902\u0915)"},laghu:{marks:3,label:"\u0932\u0918\u0941 \u0909\u0924\u094d\u0924\u0930\u0940\u092f (3 \u0905\u0902\u0915)"},dirgha:{marks:4,label:"\u0926\u0940\u0930\u094d\u0918 \u0909\u0924\u094d\u0924\u0930\u0940\u092f (4 \u0905\u0902\u0915)"},diagram:{marks:3,label:"\u091a\u093f\u0924\u094d\u0930 \u0906\u0927\u093e\u0930\u093f\u0924 (3 \u0905\u0902\u0915)"}},NCERT:{mcq:{marks:1,label:"MCQ (1 mark)"},fill_blank:{marks:1,label:"Fill in Blanks (1 mark)"},vsaq:{marks:2,label:"Very Short Answer (2 marks)"},short:{marks:3,label:"Short Answer (3 marks)"},long:{marks:4,label:"Long Answer (4 marks)"},diagram:{marks:3,label:"Diagram Based (3 marks)"},hots:{marks:4,label:"HOTS (4 marks)"}}},UY={Nursery:{totalMarks:20,time:30,questionTypes:["oral","activity","coloring"],hasLong:!1},LKG:{totalMarks:25,time:30,questionTypes:["oral","activity","coloring","matching"],hasLong:!1},UKG:{totalMarks:30,time:45,questionTypes:["oral","activity","coloring","matching","fill_blank"],hasLong:!1},"Class 1":{totalMarks:40,time:60,questionTypes:["mcq","fill_blank","matching","very_short"],hasLong:!1},"Class 2":{totalMarks:40,time:60,questionTypes:["mcq","fill_blank","matching","very_short"],hasLong:!1},"Class 3":{totalMarks:50,time:90,questionTypes:["mcq","fill_blank","very_short","short"],hasLong:!1},"Class 4":{totalMarks:50,time:90,questionTypes:["mcq","fill_blank","very_short","short"],hasLong:!0,maxLong:1},"Class 5":{totalMarks:50,time:90,questionTypes:["mcq","fill_blank","very_short","short","long"],hasLong:!0,maxLong:2},"Class 6":{totalMarks:80,time:150,questionTypes:["mcq","fill_blank","vsaq","short","long","diagram"],hasLong:!0},"Class 7":{totalMarks:80,time:150,questionTypes:["mcq","fill_blank","vsaq","short","long","diagram"],hasLong:!0},"Class 8":{totalMarks:80,time:180,questionTypes:["mcq","fill_blank","vsaq","short","long","diagram"],hasLong:!0},"Class 9":{totalMarks:80,time:180,questionTypes:["mcq","vsaq","short","long","diagram","hots"],hasLong:!0},"Class 10":{totalMarks:80,time:180,questionTypes:["mcq","vsaq","short","long","diagram","hots","case_study"],hasLong:!0},"Class 11":{totalMarks:100,time:180,questionTypes:["mcq","vsaq","short","long","diagram","hots","case_study"],hasLong:!0},"Class 12":{totalMarks:100,time:180,questionTypes:["mcq","vsaq","short","long","diagram","hots","case_study"],hasLong:!0}},HY="".concat("","/api"),qY={hindi:{questionPrefix:"\u092a\u094d\u0930.",marks:"\u0905\u0902\u0915",totalMarks:"\u092a\u0942\u0930\u094d\u0923\u093e\u0902\u0915",time:"\u0938\u092e\u092f",minutes:"\u092e\u093f\u0928\u091f",instructions:"\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0928\u093f\u0930\u094d\u0926\u0947\u0936",inst1:"\u0938\u092d\u0940 \u092a\u094d\u0930\u0936\u094d\u0928 \u0905\u0928\u093f\u0935\u093e\u0930\u094d\u092f \u0939\u0948\u0902\u0964",inst2:"\u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u092a\u094d\u0930\u0936\u094d\u0928 \u0915\u0947 \u0905\u0902\u0915 \u0909\u0938\u0915\u0947 \u0938\u093e\u092e\u0928\u0947 \u0926\u093f\u090f \u0917\u090f \u0939\u0948\u0902\u0964",inst3:"\u091a\u093f\u0924\u094d\u0930 \u0938\u094d\u092a\u0937\u094d\u091f \u0914\u0930 \u0932\u0947\u092c\u0932 \u0938\u0939\u093f\u0924 \u092c\u0928\u093e\u090f\u0902\u0964",answerKey:"\u0909\u0924\u094d\u0924\u0930 \u0915\u0941\u0902\u091c\u0940",drawDiagram:"(\u091a\u093f\u0924\u094d\u0930 \u0938\u0939\u093f\u0924 \u0909\u0924\u094d\u0924\u0930 \u0926\u0940\u091c\u093f\u090f)",diagramAnswer:"\u091a\u093f\u0924\u094d\u0930 \u0935\u093f\u0935\u0930\u0923:"},english:{questionPrefix:"Q.",marks:"Marks",totalMarks:"Total Marks",time:"Time",minutes:"Minutes",instructions:"General Instructions",inst1:"All questions are compulsory.",inst2:"Marks for each question are indicated against it.",inst3:"Draw neat and labeled diagrams wherever required.",answerKey:"Answer Key",drawDiagram:"(Answer with diagram)",diagramAnswer:"Diagram Description:"}};function VY(){var e;const{t:t,i18n:n}=js(),{user:r,schoolId:i}=Kr(),{language:l}=$r(),[o,c]=(0,s.useState)(1),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[x,f]=(0,s.useState)("CBSE"),[g,v]=(0,s.useState)(!0),[b,y]=(0,s.useState)([]),[j,N]=(0,s.useState)([]),[w,S]=(0,s.useState)(BY.CBSE),[_,k]=(0,s.useState)({subject:"",class_name:"",selectedChapters:[],exam_name:"",difficulty:"medium",question_types:["mcq","short"],total_marks:80,time_duration:180,language:"hindi",custom_marks:{},syllabus_source:"auto"}),[C,E]=(0,s.useState)({}),[A,P]=(0,s.useState)(null),[O,M]=(0,s.useState)(!1),[T,D]=(0,s.useState)({current:0,total:0}),[I,R]=(0,s.useState)("normal"),L=["Nursery","LKG","UKG","Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","Class 7","Class 8","Class 9","Class 10","Class 11","Class 12"],F="hi"===l||"hi"===n.language,z=qY[_.language]||qY.hindi;(0,s.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat(HY,"/school/settings?school_id=").concat(i),{headers:{Authorization:"Bearer ".concat(e)}});if(t.data){const e=t.data.primary_board||t.data.board,a=!1!==t.data.use_ncert_syllabus;if(e){const t=e.toUpperCase();t.includes("MP")||t.includes("MPBSE")?f("MPBSE"):t.includes("RBSE")||t.includes("RAJASTHAN")?f("RBSE"):t.includes("NCERT")?f("NCERT"):f("CBSE")}v(a)}}catch(e){console.log("Using default board: CBSE with NCERT")}})()},[i]),(0,s.useEffect)(()=>{S(BY[x]||BY.CBSE)},[x]),(0,s.useEffect)(()=>{if(_.class_name){var e;let s=(null===(e=OY[x])||void 0===e?void 0:e[_.class_name])||[];if(g&&"NCERT"!==x){var t,a;const e=(null===(t=OY.NCERT)||void 0===t?void 0:t[_.class_name])||(null===(a=OY.CBSE)||void 0===a?void 0:a[_.class_name])||[];s=[...new Set([...s,...e])]}y(s),s.includes(_.subject)||(k(e=>u(u({},e),{},{subject:"",selectedChapters:[]})),N([]))}},[_.class_name,x,g]),(0,s.useEffect)(()=>{if(_.class_name&&_.subject){let e=[];try{a.e(103).then(a.bind(a,103)).then(t=>{const{getChaptersByMedium:a}=t;e=a(_.class_name,_.subject,_.language),e&&e.length>0&&N(e.map((e,t)=>({id:"ch".concat(t+1),name:e})))}).catch(e=>console.log("Latest syllabus not loaded, using fallback"))}catch(J1){console.log("Error loading latest syllabus:",J1)}if(["Nursery","LKG","UKG"].includes(_.class_name))return e=zY("CBSE",_.class_name,_.subject),0===e.length&&(e=zY(x,_.class_name,_.subject)),void N(e);const t=["Hindi","English","Mathematics","Science","Social Science","EVS","\u0939\u093f\u0902\u0926\u0940","\u0917\u0923\u093f\u0924","\u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928","\u092a\u0930\u094d\u092f\u093e\u0935\u0930\u0923","Drawing","\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e","Art"].some(e=>_.subject.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(_.subject.toLowerCase()));("ncert"===_.syllabus_source||"auto"===_.syllabus_source&&g&&t)&&(e=zY("NCERT",_.class_name,_.subject),0===e.length&&(e=zY("CBSE",_.class_name,_.subject))),0!==e.length&&"state_board"!==_.syllabus_source||(e=zY(x,_.class_name,_.subject)),0===e.length&&(e=zY("CBSE",_.class_name,_.subject)),N(e||[])}},[_.class_name,_.subject,_.syllabus_source,_.language,x,g]);const B=e=>{const{name:t,value:a}=e.target;if(k(e=>u(u({},e),{},{[t]:a})),"class_name"===t&&a){const e=UY[a];e&&(k(t=>u(u({},t),{},{class_name:a,total_marks:e.totalMarks,time_duration:e.time,question_types:t.question_types.filter(t=>!(!e.hasLong&&["long","dirgha","nibandh","case_study"].includes(t)))})),e.hasLong||Qt.info("".concat(a,": Long answer questions not available for this class")))}"subject"===t&&(a.includes("Drawing")||a.includes("\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e")||a.includes("Art"))&&Qt.info("Drawing paper will include image-based questions")},U=()=>{k(e=>u(u({},e),{},{selectedChapters:j.map(e=>e.name)}))},H=()=>{k(e=>u(u({},e),{},{selectedChapters:[]}))},q=async()=>{if(0!==_.question_types.length)if(_.exam_name)if(0!==_.selectedChapters.length){m(!0);try{const e={};_.question_types.forEach(t=>{var a;e[t]=_.custom_marks[t]||(null===(a=w[t])||void 0===a?void 0:a.marks)||1});const t={subject:_.subject,class_name:_.class_name,chapter:_.selectedChapters.join(", "),chapters:_.selectedChapters,exam_name:_.exam_name,difficulty:_.difficulty,question_types:_.question_types,total_marks:parseInt(_.total_marks),time_duration:parseInt(_.time_duration),language:_.language,marks_config:e,syllabus_year:"2025-26",board:x},a=localStorage.getItem("token"),s=await Hr.post("".concat(HY,"/ai/generate-paper"),t,{headers:{Authorization:"Bearer ".concat(a)}});p(s.data),c(3),Qt.success("\u092a\u0947\u092a\u0930 \u0924\u0948\u092f\u093e\u0930 \u0939\u0948!");const n=s.data.questions.map((e,t)=>u(u({},e),{},{idx:t})).filter(e=>"diagram"===e.type||"draw_color"===e.type||"scenery"===e.type||e.requires_drawing||e.hasDrawing);n.length>0&&(Qt.info("".concat(n.length," \u091a\u093f\u0924\u094d\u0930 generate \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...")),W(n,s.data.subject))}catch(a){var e,t;const s=null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail;Qt.error("string"===typeof s?s:"\u092a\u0947\u092a\u0930 \u092c\u0928\u093e\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e \u0939\u0941\u0908")}finally{m(!1)}}else Qt.error("\u0915\u092e \u0938\u0947 \u0915\u092e \u090f\u0915 \u0905\u0927\u094d\u092f\u093e\u092f \u091a\u0941\u0928\u0947\u0902");else Qt.error("\u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0915\u093e \u0928\u093e\u092e \u0921\u093e\u0932\u0947\u0902");else Qt.error("\u0915\u092e \u0938\u0947 \u0915\u092e \u090f\u0915 \u092a\u094d\u0930\u0936\u094d\u0928 \u092a\u094d\u0930\u0915\u093e\u0930 \u091a\u0941\u0928\u0947\u0902")},V=()=>{window.print()},W=async(e,t)=>{M(!0),D({current:0,total:e.length});const a=localStorage.getItem("token");for(let n=0;n<e.length;n++){const r=e[n];D({current:n+1,total:e.length});try{const e=await Hr.post("".concat(HY,"/ai/generate-answer-image"),{question:r.question,answer:r.answer||r.drawing_guide||r.diagram_description||"Draw as described",subject:t,question_type:r.type},{headers:{Authorization:"Bearer ".concat(a)},timeout:6e4});e.data.success&&e.data.image_url&&E(t=>u(u({},t),{},{[r.idx]:e.data.image_url}))}catch(s){console.error("Image generation failed for Q".concat(r.idx+1,":"),s)}}M(!1),Qt.success("\u0938\u092d\u0940 \u091a\u093f\u0924\u094d\u0930 \u0924\u0948\u092f\u093e\u0930 \u0939\u0948\u0902!")},G=Object.entries(w).map(e=>{let[t,a]=e;return{id:t,label:a.label,marks:a.marks}});return(0,qr.jsxs)("div",{className:"space-y-6 print:space-y-0","data-testid":"ai-paper-page",children:[(0,qr.jsxs)("div",{className:"print:hidden",children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:F?"AI \u092a\u094d\u0930\u0936\u094d\u0928 \u092a\u0924\u094d\u0930 \u091c\u0928\u0930\u0947\u091f\u0930":"AI Question Paper Generator"}),(0,qr.jsxs)("p",{className:"text-slate-500 mt-1",children:[null===(e=PY[x])||void 0===e?void 0:e.name," 2025-26 ",F?"\u092a\u093e\u0920\u094d\u092f\u0915\u094d\u0930\u092e":"Syllabus"]})]}),(0,qr.jsx)("div",{className:"flex items-center justify-center gap-4 print:hidden",children:[{num:1,label:F?"\u0935\u093f\u0937\u092f \u091a\u0941\u0928\u0947\u0902":"Select Subject"},{num:2,label:F?"\u092a\u094d\u0930\u0936\u094d\u0928 \u0938\u0947\u091f \u0915\u0930\u0947\u0902":"Set Questions"},{num:3,label:F?"\u092a\u0947\u092a\u0930 \u0926\u0947\u0916\u0947\u0902":"View Paper"}].map(e=>(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold transition-colors ".concat(o>=e.num?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"),children:o>e.num?(0,qr.jsx)(ph,{className:"w-5 h-5"}):e.num}),(0,qr.jsx)("span",{className:"text-xs mt-1 text-slate-500",children:e.label})]}),e.num<3&&(0,qr.jsx)("div",{className:"w-12 h-1 rounded ".concat(o>e.num?"bg-indigo-600":"bg-slate-200")})]},e.num))}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 print:p-0 print:border-0 print:shadow-none",children:[1===o&&(()=>{var e,t;return(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,qr.jsx)(sh,{className:"w-6 h-6 text-indigo-600"}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("p",{className:"font-medium text-indigo-900",children:[(null===(e=PY[x])||void 0===e?void 0:e.name)||x," - ",F?"\u0938\u0924\u094d\u0930":"Session"," 2025-26"]}),(0,qr.jsx)("p",{className:"text-sm text-indigo-600",children:g&&"NCERT"!==x?"".concat(x," + NCERT ").concat(F?"\u0938\u0902\u092f\u0941\u0915\u094d\u0924 \u092a\u093e\u0920\u094d\u092f\u0915\u094d\u0930\u092e":"Combined Syllabus"):null===(t=PY[x])||void 0===t?void 0:t.fullName})]}),(0,qr.jsx)("select",{value:x,onChange:e=>f(e.target.value),className:"h-9 rounded-lg border border-indigo-300 px-2 text-sm bg-white",children:Object.entries(PY).map(e=>{let[t,a]=e;return(0,qr.jsx)("option",{value:t,children:a.name},t)})})]}),(0,qr.jsxs)("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-indigo-200",children:[(0,qr.jsx)("span",{className:"text-xs text-indigo-700 font-medium mr-2",children:F?"\u092a\u093e\u0920\u094d\u092f\u0915\u094d\u0930\u092e \u0938\u094d\u0930\u094b\u0924:":"Syllabus Source:"}),(0,qr.jsxs)("label",{className:"flex items-center gap-1 text-xs cursor-pointer",children:[(0,qr.jsx)("input",{type:"radio",name:"syllabus_source",value:"auto",checked:"auto"===_.syllabus_source,onChange:e=>k(t=>u(u({},t),{},{syllabus_source:e.target.value})),className:"w-3 h-3"}),(0,qr.jsx)("span",{className:"auto"===_.syllabus_source?"text-indigo-900 font-semibold":"text-indigo-600",children:F?"\u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 (\u0905\u0928\u0941\u0936\u0902\u0938\u093f\u0924)":"Auto (Recommended)"})]}),(0,qr.jsxs)("label",{className:"flex items-center gap-1 text-xs cursor-pointer",children:[(0,qr.jsx)("input",{type:"radio",name:"syllabus_source",value:"ncert",checked:"ncert"===_.syllabus_source,onChange:e=>k(t=>u(u({},t),{},{syllabus_source:e.target.value})),className:"w-3 h-3"}),(0,qr.jsx)("span",{className:"ncert"===_.syllabus_source?"text-indigo-900 font-semibold":"text-indigo-600",children:F?"\u0915\u0947\u0935\u0932 NCERT":"NCERT Only"})]}),(0,qr.jsxs)("label",{className:"flex items-center gap-1 text-xs cursor-pointer",children:[(0,qr.jsx)("input",{type:"radio",name:"syllabus_source",value:"state_board",checked:"state_board"===_.syllabus_source,onChange:e=>k(t=>u(u({},t),{},{syllabus_source:e.target.value})),className:"w-3 h-3"}),(0,qr.jsx)("span",{className:"state_board"===_.syllabus_source?"text-indigo-900 font-semibold":"text-indigo-600",children:F?"\u0915\u0947\u0935\u0932 ".concat(x):"".concat(x," Only")})]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[F?"\u0915\u0915\u094d\u0937\u093e (Class)":"Class"," *"]}),(0,qr.jsxs)("select",{name:"class_name",value:_.class_name,onChange:B,className:"w-full h-11 rounded-lg border border-slate-200 px-3 focus:ring-2 focus:ring-indigo-500","data-testid":"paper-class-select",children:[(0,qr.jsx)("option",{value:"",children:F?"\u0915\u0915\u094d\u0937\u093e \u091a\u0941\u0928\u0947\u0902":"Select Class"}),L.map(e=>(0,qr.jsx)("option",{value:e,children:e},e))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[F?"\u0935\u093f\u0937\u092f (Subject)":"Subject"," *"]}),(0,qr.jsxs)("select",{name:"subject",value:_.subject,onChange:B,className:"w-full h-11 rounded-lg border border-slate-200 px-3 focus:ring-2 focus:ring-indigo-500","data-testid":"paper-subject-select",disabled:!_.class_name,children:[(0,qr.jsx)("option",{value:"",children:_.class_name?F?"\u0935\u093f\u0937\u092f \u091a\u0941\u0928\u0947\u0902":"Select Subject":F?"\u092a\u0939\u0932\u0947 \u0915\u0915\u094d\u0937\u093e \u091a\u0941\u0928\u0947\u0902":"First select class"}),b.map(e=>(0,qr.jsx)("option",{value:e,children:e},e))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[F?"\u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0915\u093e \u0928\u093e\u092e (Exam Name)":"Exam Name"," *"]}),(0,qr.jsx)(Rl,{name:"exam_name",value:_.exam_name,onChange:B,placeholder:F?"\u091c\u0948\u0938\u0947: \u0905\u0930\u094d\u0927\u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u093e, Unit Test 1":"e.g., Half Yearly, Unit Test 1",className:"h-11","data-testid":"paper-exam-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[F?"\u092a\u0947\u092a\u0930 \u0915\u0940 \u092d\u093e\u0937\u093e (Paper Language)":"Paper Language"," *"]}),(0,qr.jsxs)("select",{name:"language",value:_.language,onChange:B,className:"w-full h-11 rounded-lg border border-slate-200 px-3 font-medium","data-testid":"paper-language-select",children:[(0,qr.jsxs)("option",{value:"hindi",children:["\ud83c\uddee\ud83c\uddf3 ",F?"\u092a\u0942\u0930\u094d\u0923 \u0939\u093f\u0902\u0926\u0940 (Full Hindi)":"Hindi"]}),(0,qr.jsxs)("option",{value:"english",children:["\ud83c\uddec\ud83c\udde7 ",F?"Full English":"English"]})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"hindi"===_.language?F?"\u092a\u0942\u0930\u093e \u092a\u0947\u092a\u0930 \u0939\u093f\u0902\u0926\u0940 \u092e\u0947\u0902 \u092c\u0928\u0947\u0917\u093e":"Complete paper in Hindi":F?"\u092a\u0942\u0930\u093e \u092a\u0947\u092a\u0930 English \u092e\u0947\u0902 \u092c\u0928\u0947\u0917\u093e":"Complete paper in English"})]})]}),_.subject&&(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[F?"\u0905\u0927\u094d\u092f\u093e\u092f \u091a\u0941\u0928\u0947\u0902 (Select Chapters)":"Select Chapters"," *"]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",size:"sm",onClick:U,children:F?"\u0938\u092d\u0940 \u091a\u0941\u0928\u0947\u0902":"Select All"}),(0,qr.jsx)(Dl,{type:"button",variant:"outline",size:"sm",onClick:H,children:F?"\u0939\u091f\u093e\u090f\u0902":"Clear"})]})]}),j.length>0?(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-64 overflow-y-auto p-3 border border-slate-200 rounded-lg bg-slate-50",children:j.map((e,t)=>(0,qr.jsxs)("button",{type:"button",onClick:()=>{return t=e.name,void k(e=>{const a=e.selectedChapters;return a.includes(t)?u(u({},e),{},{selectedChapters:a.filter(e=>e!==t)}):u(u({},e),{},{selectedChapters:[...a,t]})});var t},className:"p-3 rounded-lg border text-left transition-all text-sm flex items-center gap-2 ".concat(_.selectedChapters.includes(e.name)?"border-indigo-600 bg-indigo-50 text-indigo-700 ring-2 ring-indigo-200":"border-slate-200 bg-white hover:border-indigo-300"),"data-testid":"chapter-".concat(t),children:[(0,qr.jsx)("div",{className:"w-5 h-5 rounded border flex items-center justify-center flex-shrink-0 ".concat(_.selectedChapters.includes(e.name)?"bg-indigo-600 border-indigo-600":"border-slate-300"),children:_.selectedChapters.includes(e.name)&&(0,qr.jsx)(ph,{className:"w-3 h-3 text-white"})}),(0,qr.jsx)("span",{className:"flex-1",children:e.name})]},e.id))}):(0,qr.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-center gap-2",children:[(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-600"}),(0,qr.jsx)("span",{className:"text-sm text-amber-700",children:F?"\u0907\u0938 \u0935\u093f\u0937\u092f \u0915\u0947 \u0932\u093f\u090f ".concat(x," syllabus \u092e\u0947\u0902 \u0905\u0927\u094d\u092f\u093e\u092f \u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902\u0964"):"No chapters available for this subject in ".concat(x," syllabus.")})]}),_.selectedChapters.length>0&&(0,qr.jsxs)("p",{className:"text-sm text-indigo-600 font-medium",children:["\u2713 ",_.selectedChapters.length," ",F?"\u0905\u0927\u094d\u092f\u093e\u092f \u091a\u0941\u0928\u0947 \u0917\u090f":"chapters selected"]})]}),(0,qr.jsx)("div",{className:"flex justify-end pt-4",children:(0,qr.jsxs)(Dl,{onClick:()=>c(2),disabled:!_.class_name||!_.subject||!_.exam_name||0===_.selectedChapters.length,className:"bg-indigo-600 hover:bg-indigo-700","data-testid":"next-step-btn",children:[F?"\u0906\u0917\u0947 \u092c\u0922\u093c\u0947\u0902":"Next"," ",(0,qr.jsx)(qc,{className:"w-5 h-5 ml-2"})]})})]})})(),2===o&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[F?"\u092a\u094d\u0930\u0936\u094d\u0928 \u092a\u094d\u0930\u0915\u093e\u0930 \u091a\u0941\u0928\u0947\u0902":"Select Question Types"," (",x," Pattern) *"]}),(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:G.map(e=>(0,qr.jsx)("div",{className:"p-4 rounded-xl border-2 transition-all ".concat(_.question_types.includes(e.id)?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"),children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("button",{type:"button",onClick:()=>(e=>{k(t=>{const a=t.question_types;return a.includes(e)?u(u({},t),{},{question_types:a.filter(t=>t!==e)}):u(u({},t),{},{question_types:[...a,e]})})})(e.id),className:"w-6 h-6 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ".concat(_.question_types.includes(e.id)?"bg-indigo-600 border-indigo-600":"border-slate-300"),"data-testid":"question-type-".concat(e.id),children:_.question_types.includes(e.id)&&(0,qr.jsx)(ph,{className:"w-4 h-4 text-white"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"font-medium text-sm",children:e.label}),_.question_types.includes(e.id)&&(0,qr.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,qr.jsxs)("span",{className:"text-xs text-slate-600",children:[z.marks,":"]}),(0,qr.jsx)("input",{type:"number",min:"1",max:"10",value:_.custom_marks[e.id]||e.marks,onChange:t=>((e,t)=>{k(a=>{var s;return u(u({},a),{},{custom_marks:u(u({},a.custom_marks),{},{[e]:parseInt(t)||(null===(s=w[e])||void 0===s?void 0:s.marks)||1})})})})(e.id,t.target.value),className:"w-16 h-7 text-sm border rounded px-2"})]})]})]})},e.id))})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{className:"text-sm font-medium",children:"\u0915\u0920\u093f\u0928\u093e\u0908 \u0938\u094d\u0924\u0930"}),(0,qr.jsxs)("select",{name:"difficulty",value:_.difficulty,onChange:B,className:"w-full h-11 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"easy",children:"hindi"===_.language?"\u0906\u0938\u093e\u0928":"Easy"}),(0,qr.jsx)("option",{value:"medium",children:"hindi"===_.language?"\u092e\u0927\u094d\u092f\u092e":"Medium"}),(0,qr.jsx)("option",{value:"hard",children:"hindi"===_.language?"\u0915\u0920\u093f\u0928":"Hard"}),(0,qr.jsx)("option",{value:"mixed",children:"hindi"===_.language?"\u092e\u093f\u0936\u094d\u0930\u093f\u0924":"Mixed"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[z.totalMarks," *"]}),(0,qr.jsx)(Rl,{name:"total_marks",type:"number",value:_.total_marks,onChange:B,className:"h-11","data-testid":"paper-marks-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"text-sm font-medium",children:[z.time," (",z.minutes,") *"]}),(0,qr.jsx)(Rl,{name:"time_duration",type:"number",value:_.time_duration,onChange:B,className:"h-11"})]})]}),(0,qr.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>c(1),children:[(0,qr.jsx)(AY,{className:"w-5 h-5 mr-2"})," \u092a\u0940\u091b\u0947 \u091c\u093e\u090f\u0902"]}),(0,qr.jsx)(Dl,{onClick:q,disabled:d||0===_.question_types.length,className:"bg-indigo-600 hover:bg-indigo-700","data-testid":"generate-paper-btn",children:d?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin mr-2"}),"hindi"===_.language?"\u092a\u0947\u092a\u0930 \u092c\u0928 \u0930\u0939\u093e \u0939\u0948...":"Generating..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(hh,{className:"w-5 h-5 mr-2"}),"hindi"===_.language?"\u092a\u0947\u092a\u0930 \u092c\u0928\u093e\u090f\u0902":"Generate Paper"]})})]})]}),3===o&&(()=>{var e,t;return(0,qr.jsxs)("div",{className:"space-y-6",children:[O&&(0,qr.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 print:hidden",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin text-purple-600"}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("p",{className:"font-medium text-purple-800",children:["\u091a\u093f\u0924\u094d\u0930 \u092c\u0928 \u0930\u0939\u0947 \u0939\u0948\u0902... (",T.current,"/",T.total,")"]}),(0,qr.jsx)("div",{className:"w-full bg-purple-200 rounded-full h-2 mt-2",children:(0,qr.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(T.current/T.total*100,"%")}})})]})]})}),(0,qr.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-3 print:hidden",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>{p(null),c(1),E({})},children:"hindi"===_.language?"\u0928\u092f\u093e \u092a\u0947\u092a\u0930 \u092c\u0928\u093e\u090f\u0902":"Create New Paper"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"text-sm text-gray-600",children:"hindi"===_.language?"\u092a\u094d\u0930\u093f\u0902\u091f \u0932\u0947\u0906\u0909\u091f:":"Print Layout:"}),(0,qr.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:I,onChange:e=>R(e.target.value),children:[(0,qr.jsx)("option",{value:"normal",children:"hindi"===_.language?"\u0938\u093e\u092e\u093e\u0928\u094d\u092f (1 \u092a\u0947\u092a\u0930)":"Normal (1 paper)"}),(0,qr.jsx)("option",{value:"2-up",children:"hindi"===_.language?"2 \u092a\u0947\u092a\u0930 \u092a\u094d\u0930\u0924\u093f \u092a\u0947\u091c":"2 papers per page"}),(0,qr.jsx)("option",{value:"4-up",children:"hindi"===_.language?"4 \u092a\u0947\u092a\u0930 \u092a\u094d\u0930\u0924\u093f \u092a\u0947\u091c":"4 papers per page"})]})]}),(0,qr.jsxs)(Dl,{onClick:V,className:"bg-indigo-600 hover:bg-indigo-700",disabled:O,children:[(0,qr.jsx)(YU,{className:"w-5 h-5 mr-2"}),"hindi"===_.language?"\u092a\u094d\u0930\u093f\u0902\u091f \u0915\u0930\u0947\u0902":"Print Paper"]})]}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 print:border-0 print:shadow-none print:rounded-none","data-testid":"paper-preview",id:"printable-paper",children:(0,qr.jsxs)("div",{className:"p-8 print:p-4",children:[(0,qr.jsxs)("div",{className:"text-center border-b-2 border-black pb-4 mb-6",children:[(0,qr.jsx)("h1",{className:"text-xl font-bold mb-1",children:null===h||void 0===h?void 0:h.exam_name}),(0,qr.jsxs)("h2",{className:"text-lg font-semibold",children:[null===h||void 0===h?void 0:h.subject," - ",null===h||void 0===h?void 0:h.class_name]}),(0,qr.jsxs)("div",{className:"flex justify-center gap-12 mt-3 text-sm font-medium",children:[(0,qr.jsxs)("span",{children:[z.totalMarks,": ",null===h||void 0===h?void 0:h.total_marks]}),(0,qr.jsxs)("span",{children:[z.time,": ",null===h||void 0===h?void 0:h.time_duration," ",z.minutes]})]})]}),(0,qr.jsxs)("div",{className:"mb-6 p-3 bg-gray-50 rounded-lg text-sm print:bg-transparent print:border print:border-gray-300",children:[(0,qr.jsxs)("p",{className:"font-semibold mb-2",children:[z.instructions,":"]}),(0,qr.jsxs)("ol",{className:"list-decimal list-inside text-gray-700 space-y-1",children:[(0,qr.jsx)("li",{children:z.inst1}),(0,qr.jsx)("li",{children:z.inst2}),(0,qr.jsx)("li",{children:z.inst3})]})]}),(0,qr.jsx)("div",{className:"space-y-5",children:null===h||void 0===h||null===(e=h.questions)||void 0===e?void 0:e.map((e,t)=>(0,qr.jsxs)("div",{className:"pb-3","data-testid":"question-".concat(t),children:[(0,qr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,qr.jsxs)("span",{className:"font-bold min-w-[45px]",children:[z.questionPrefix,t+1,"."]}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"font-medium",children:e.question}),(0,qr.jsxs)("span",{className:"text-sm text-gray-600",children:["[",e.marks," ",z.marks,"]"]}),"diagram"===e.type&&(0,qr.jsx)("p",{className:"text-sm text-gray-600 mt-1 italic",children:z.drawDiagram})]})]}),e.options&&e.options.length>0&&(0,qr.jsx)("div",{className:"ml-12 mt-2 space-y-1",children:e.options.map((e,t)=>{const a=e.replace(/^[a-d][\)\.\s]+\s*/i,"").replace(/^\([a-d]\)\s*/i,""),s=String.fromCharCode(97+t);return(0,qr.jsxs)("p",{className:"text-gray-800",children:["(",s,") ",a]},t)})})]},t))}),(0,qr.jsxs)("div",{className:"mt-10 pt-6 border-t-2 border-dashed border-gray-400 page-break-before print:mt-0 print:pt-8 print:border-0",style:{pageBreakBefore:"always"},children:[(0,qr.jsx)("h2",{className:"text-lg font-bold mb-4 text-center border-b pb-2",children:z.answerKey}),(0,qr.jsx)("div",{className:"space-y-4",children:null===h||void 0===h||null===(t=h.questions)||void 0===t?void 0:t.map((e,t)=>(0,qr.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg print:bg-transparent print:border-b print:rounded-none print:p-2",children:(0,qr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,qr.jsxs)("span",{className:"font-bold text-indigo-700 print:text-black min-w-[45px]",children:[z.questionPrefix,t+1,":"]}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"text-gray-800",children:e.answer}),"diagram"===e.type&&e.diagram_description&&(0,qr.jsxs)("div",{className:"mt-2 p-2 bg-blue-50 rounded text-sm print:bg-transparent print:border print:border-gray-300",children:[(0,qr.jsx)("p",{className:"font-medium text-blue-800 print:text-black",children:z.diagramAnswer}),(0,qr.jsx)("p",{className:"text-blue-700 print:text-gray-700",children:e.diagram_description})]}),C[t]&&(0,qr.jsx)("div",{className:"mt-3",children:(0,qr.jsx)("img",{src:C[t],alt:"Answer diagram for Q".concat(t+1),className:"max-w-full h-auto rounded-lg border shadow-sm max-h-64 object-contain"})}),("diagram"===e.type||"long"===e.type)&&!C[t]&&(0,qr.jsx)(Dl,{variant:"outline",size:"sm",onClick:()=>(async(e,t)=>{if(A!==e){P(e);try{const a=localStorage.getItem("token"),s=await Hr.post("".concat(HY,"/ai/generate-answer-image"),{question:t.question,answer:t.answer,subject:_.subject,question_type:t.type},{headers:{Authorization:"Bearer ".concat(a)}});s.data.success&&s.data.image_url?(E(t=>u(u({},t),{},{[e]:s.data.image_url})),Qt.success("\u091a\u093f\u0924\u094d\u0930 \u092c\u0928 \u0917\u092f\u093e!")):Qt.error("\u091a\u093f\u0924\u094d\u0930 \u0928\u0939\u0940\u0902 \u092c\u0928 \u092a\u093e\u092f\u093e")}catch(a){console.error("Image generation error:",a),Qt.error("\u091a\u093f\u0924\u094d\u0930 \u092c\u0928\u093e\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e \u0939\u0941\u0908")}finally{P(null)}}})(t,e),disabled:A===t,className:"mt-2 print:hidden",children:A===t?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}),"\u091a\u093f\u0924\u094d\u0930 \u092c\u0928\u093e \u0930\u0939\u093e \u0939\u0948..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Ph,{className:"w-4 h-4 mr-2"}),"AI \u0938\u0947 \u091a\u093f\u0924\u094d\u0930 \u092c\u0928\u093e\u090f\u0902"]})})]})]})},t))})]})]})}),(0,qr.jsx)("style",{children:"\n        @media print {\n          /* Hide everything except the paper */\n          body * {\n            visibility: hidden;\n          }\n          #printable-paper, #printable-paper * {\n            visibility: visible;\n          }\n          #printable-paper {\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            margin: 0;\n            padding: 20px;\n            font-size: 12pt;\n          }\n          /* Remove browser headers/footers */\n          @page {\n            margin: 15mm;\n            size: A4;\n          }\n          /* Ensure clean page breaks */\n          .print\\:break-before-page {\n            page-break-before: always;\n          }\n        }\n      "})]})})()]})]})}const WY="".concat("","/api");function GY(){const{t:e}=js(),[t,a]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),[i,l]=(0,s.useState)("");(0,s.useEffect)(()=>{o()},[i]);const o=async()=>{try{let e="".concat(WY,"/audit-logs?limit=100");i&&(e+="&module=".concat(i));const t=await Hr.get(e);a(t.data)}catch(e){console.error("Failed to fetch logs")}finally{r(!1)}};return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"audit-logs-page",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between",children:(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:e("audit_logs")}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Track all system activities"})]})}),(0,qr.jsx)("div",{className:"flex gap-4",children:(0,qr.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"h-10 rounded-lg border border-slate-200 px-3 min-w-[150px]","data-testid":"module-filter",children:[(0,qr.jsx)("option",{value:"",children:"All Modules"}),["students","staff","classes","attendance","fee_invoices","fee_payments","notices","ai_papers"].map(e=>(0,qr.jsx)("option",{value:e,children:e.replace("_"," ")},e))]})}),n?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)("div",{className:"spinner w-10 h-10"})}):0===t.length?(0,qr.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200",children:[(0,qr.jsx)(Eh,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:e("no_data")})]}):(0,qr.jsx)("div",{className:"data-table",children:(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:e("timestamp")}),(0,qr.jsx)(GU,{children:e("user")}),(0,qr.jsx)(GU,{children:e("action")}),(0,qr.jsx)(GU,{children:e("module")}),(0,qr.jsx)(GU,{children:e("details")})]})}),(0,qr.jsx)(VU,{children:t.map(e=>{return(0,qr.jsxs)(WU,{"data-testid":"log-row-".concat(e.id),children:[(0,qr.jsx)(KU,{children:(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4 text-slate-400"}),new Date(e.created_at).toLocaleString()]})}),(0,qr.jsx)(KU,{children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-4 h-4 text-slate-500"})}),(0,qr.jsx)("span",{className:"font-medium",children:e.user_name||"System"})]})}),(0,qr.jsx)(KU,{children:(0,qr.jsx)("span",{className:"badge ".concat((t=e.action,{create:"badge-success",update:"badge-info",delete:"badge-error",bulk_mark:"badge-warning",generate:"badge-info"}[t]||"badge-info")," capitalize"),children:e.action})}),(0,qr.jsx)(KU,{className:"capitalize",children:e.module.replace("_"," ")}),(0,qr.jsx)(KU,{children:(0,qr.jsxs)("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded",children:[JSON.stringify(e.details).slice(0,50),"..."]})})]},e.id);var t})})]})})]})}const KY=Dc("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),YY=Dc("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),JY=Dc("stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]),$Y="".concat("","/api");function QY(){var e;const{t:t}=js(),{user:a,schoolId:n,selectSchool:r}=Kr(),{language:i,changeLanguage:l}=$r(),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),_=(0,s.useRef)(null),k=(0,s.useRef)(null),[C,E]=(0,s.useState)(null),[A,P]=(0,s.useState)(!1),[O,M]=(0,s.useState)(!1),T=(0,s.useRef)(null),[D,I]=(0,s.useState)({name:"",address:"",board_type:"CBSE",city:"",state:"",phone:"",email:""});(0,s.useEffect)(()=>{R(),L(),F()},[]);const R=async()=>{try{const e=await Hr.get("".concat($Y,"/schools"));c(e.data)}catch(e){console.error("Failed to fetch schools")}finally{m(!1)}},L=async()=>{try{const e=await Hr.get("".concat($Y,"/school/signature-seal"));v(e.data.signature_url),y(e.data.seal_url)}catch(e){console.error("Failed to fetch signature/seal")}},F=async()=>{try{var e;if(!n)return;const t=localStorage.getItem("token"),a=await Hr.get("".concat($Y,"/schools/").concat(n),{headers:{Authorization:"Bearer ".concat(t)}});null!==(e=a.data)&&void 0!==e&&e.logo_url&&E(a.data.logo_url)}catch(t){console.error("Failed to fetch school logo")}},z=async e=>{try{var t;const a=localStorage.getItem("token");if(null!==(t=(await Hr.post("".concat($Y,"/schools/").concat(n,"/update-logo"),{logo_url:e},{headers:{Authorization:"Bearer ".concat(a)}})).data)&&void 0!==t&&t.success)return Qt.success("\u2705 Logo saved successfully!"),!0}catch(a){return console.error("Failed to save logo:",a),Qt.error("Logo save failed"),!1}},B=e=>{I(t=>u(u({},t),{},{[e.target.name]:e.target.value}))};return(0,qr.jsxs)("div",{className:"space-y-8","data-testid":"settings-page",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-3xl font-bold font-heading text-slate-900",children:t("settings")}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Manage your preferences"})]}),(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Profile"}),(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:null===a||void 0===a||null===(e=a.name)||void 0===e?void 0:e.charAt(0).toUpperCase()}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xl font-semibold text-slate-900",children:null===a||void 0===a?void 0:a.name}),(0,qr.jsx)("p",{className:"text-slate-500",children:null===a||void 0===a?void 0:a.email}),(0,qr.jsx)("span",{className:"badge badge-info capitalize mt-1",children:null===a||void 0===a?void 0:a.role})]})]})]}),(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,qr.jsx)(KY,{className:"w-5 h-5 text-indigo-600"}),(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Language / \u092d\u093e\u0937\u093e"})]}),(0,qr.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,qr.jsxs)("button",{onClick:()=>l("en"),className:"px-6 py-3 rounded-xl border-2 transition-all ".concat("en"===i?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-200 hover:border-slate-300"),"data-testid":"lang-en-btn",children:[(0,qr.jsx)("span",{className:"font-medium",children:"English"}),"en"===i&&(0,qr.jsx)(ph,{className:"w-4 h-4 inline ml-2"})]}),(0,qr.jsxs)("button",{onClick:()=>l("hi"),className:"px-6 py-3 rounded-xl border-2 transition-all ".concat("hi"===i?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-200 hover:border-slate-300"),"data-testid":"lang-hi-btn",children:[(0,qr.jsx)("span",{className:"font-medium",children:"\u0939\u093f\u0902\u0926\u0940"}),"hi"===i&&(0,qr.jsx)(ph,{className:"w-4 h-4 inline ml-2"})]}),(0,qr.jsxs)("button",{onClick:()=>l("hinglish"),className:"px-6 py-3 rounded-xl border-2 transition-all ".concat("hinglish"===i?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-200 hover:border-slate-300"),"data-testid":"lang-hinglish-btn",children:[(0,qr.jsx)("span",{className:"font-medium",children:"Hinglish \ud83d\udd04"}),"hinglish"===i&&(0,qr.jsx)(ph,{className:"w-4 h-4 inline ml-2"})]})]})]}),("director"===(null===a||void 0===a?void 0:a.role)||"principal"===(null===a||void 0===a?void 0:a.role))&&(0,qr.jsx)("div",{className:"stat-card border-2 border-green-100",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(Zm,{className:"w-5 h-5 text-green-600"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"\ud83d\udcb3 Payment Settings (Razorpay, UPI, Cash)"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Online payment, UPI, Bank details, Cash collection settings"})]})]}),(0,qr.jsxs)("a",{href:"/app/fee-payment/settings",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,qr.jsx)(wh,{className:"w-4 h-4"}),"Payment Settings"]})]})}),("director"===(null===a||void 0===a?void 0:a.role)||"principal"===(null===a||void 0===a?void 0:a.role))&&(0,qr.jsxs)("div",{className:"stat-card border-2 border-indigo-100 bg-gradient-to-r from-indigo-50 to-white",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,qr.jsx)(JU,{className:"w-5 h-5 text-indigo-600"}),(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"\ud83c\udfeb School Logo Upload"})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"School ka logo upload karein - AI automatically background remove kar dega. Ye logo Calendar, Notice, Admit Card sab jagah dikhega."}),(0,qr.jsxs)("div",{className:"flex items-start gap-6",children:[(0,qr.jsx)("div",{className:"shrink-0",children:(0,qr.jsx)("div",{className:"w-32 h-32 border-2 border-dashed border-indigo-300 rounded-xl flex items-center justify-center overflow-hidden bg-white relative",children:C?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("img",{src:C,alt:"School Logo",className:"w-full h-full object-contain p-2"}),(0,qr.jsx)("button",{onClick:()=>E(null),className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 flex items-center justify-center",children:(0,qr.jsx)(Em,{className:"w-3 h-3"})})]}):(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(JU,{className:"w-10 h-10 text-slate-300 mx-auto mb-1"}),(0,qr.jsx)("span",{className:"text-xs text-slate-400",children:"No Logo"})]})})}),(0,qr.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("input",{ref:T,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)Qt.error("File size should be less than 5MB");else{P(!0);try{const e=new FileReader;e.onloadend=async()=>{const t=e.result;try{var a;const e=localStorage.getItem("token"),s=await Hr.post("".concat($Y,"/school/ai-remove-background"),{school_id:n,image_data:t,image_type:"logo"},{headers:{Authorization:"Bearer ".concat(e)}});null!==(a=s.data)&&void 0!==a&&a.processed_image?(E(s.data.processed_image),await z(s.data.processed_image),Qt.success("\u2728 Logo uploaded with AI background removal!")):(E(t),await z(t),Qt.success("Logo uploaded!"))}catch(s){console.log("AI processing not available:",s),E(t),await z(t),Qt.success("Logo uploaded!")}P(!1)},e.readAsDataURL(t)}catch(a){Qt.error("Failed to upload logo"),P(!1)}}},className:"hidden"}),(0,qr.jsxs)(Dl,{onClick:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.click()},disabled:A,variant:"outline",className:"w-full",children:[A?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),C?"Change Logo":"Upload Logo"]})]}),C&&(0,qr.jsxs)(Dl,{onClick:async()=>{if(C){M(!0);try{var e;const t=localStorage.getItem("token"),a=await Hr.post("".concat($Y,"/school/ai-remove-background-json"),{school_id:n,image_data:C,image_type:"logo"},{headers:{Authorization:"Bearer ".concat(t)}});null!==(e=a.data)&&void 0!==e&&e.processed_image?(E(a.data.processed_image),await z(a.data.processed_image),Qt.success("\u2728 Background removed successfully!")):Qt.error("Background removal failed")}catch(s){var t,a;console.error("AI Remove BG Error:",s),Qt.error((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"AI processing failed")}finally{M(!1)}}else Qt.error("Pehle logo upload karein")},disabled:O||A,variant:"outline",className:"w-full text-purple-600 border-purple-200 hover:bg-purple-50",children:[O?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"}),"\u2728 AI Remove Background"]}),(0,qr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-xs text-blue-700",children:[(0,qr.jsx)("p",{className:"font-medium mb-1",children:"\ud83d\udca1 Tips:"}),(0,qr.jsxs)("ul",{className:"space-y-0.5 text-blue-600",children:[(0,qr.jsx)("li",{children:"\u2022 PNG/JPG format, Max 5MB"}),(0,qr.jsx)("li",{children:"\u2022 Square logo best results deta hai"}),(0,qr.jsx)("li",{children:"\u2022 AI automatically background hata dega"})]})]}),C&&(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-3 border border-indigo-200 mt-3",children:[(0,qr.jsx)("p",{className:"font-medium text-indigo-800 text-xs mb-2",children:"\ud83d\udccd Logo Apply Settings:"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,qr.jsx)("button",{className:"flex items-center justify-center gap-1 px-3 py-2 bg-indigo-600 text-white rounded-lg text-xs hover:bg-indigo-700 transition-all",onClick:()=>Qt.success("\u2705 Logo set on ID Cards!"),"data-testid":"set-logo-idcard-btn",children:"\ud83e\udeaa Set to ID Cards"}),(0,qr.jsx)("button",{className:"flex items-center justify-center gap-1 px-3 py-2 bg-purple-600 text-white rounded-lg text-xs hover:bg-purple-700 transition-all",onClick:()=>Qt.success("\u2705 Logo set as Watermark!"),"data-testid":"set-logo-watermark-btn",children:"\ud83d\uddbc\ufe0f Set as Watermark"}),(0,qr.jsx)("button",{className:"flex items-center justify-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg text-xs hover:bg-green-700 transition-all",onClick:()=>Qt.success("\u2705 Logo set on Notices!"),"data-testid":"set-logo-notices-btn",children:"\ud83d\udce2 Set on Notices"}),(0,qr.jsx)("button",{className:"flex items-center justify-center gap-1 px-3 py-2 bg-orange-600 text-white rounded-lg text-xs hover:bg-orange-700 transition-all",onClick:()=>Qt.success("\u2705 Logo set on Calendar!"),"data-testid":"set-logo-calendar-btn",children:"\ud83d\udcc5 Set on Calendar"}),(0,qr.jsx)("button",{className:"flex items-center justify-center gap-1 px-3 py-2 bg-slate-700 text-white rounded-lg text-xs hover:bg-slate-800 transition-all col-span-2",onClick:()=>Qt.success("\u2705 Logo set on App Header!"),"data-testid":"set-logo-header-btn",children:"\ud83c\udfe0 Set on App Header (School Name ke saath)"})]}),(0,qr.jsx)("p",{className:"text-[10px] text-green-600 mt-2 font-medium",children:"\u2705 Logo automatically sab jagah show ho raha hai by default!"}),(0,qr.jsxs)("a",{href:"/app/logo-settings",className:"mt-3 flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-violet-700 hover:to-purple-700 transition-all shadow-lg","data-testid":"advanced-watermark-settings-link",children:["\u2699\ufe0f Advanced Watermark Settings",(0,qr.jsx)("span",{className:"text-xs opacity-80",children:"(Size, Position, Visibility)"})]})]})]})]})]}),("director"===(null===a||void 0===a?void 0:a.role)||"principal"===(null===a||void 0===a?void 0:a.role))&&(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,qr.jsx)(YY,{className:"w-5 h-5 text-indigo-600"}),(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Signature & Seal for Notices"})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Ye signature aur seal notices pe automatically show honge"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-4 hover:border-indigo-300 transition-all",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,qr.jsx)(YY,{className:"w-4 h-4 text-indigo-600"}),(0,qr.jsx)("span",{className:"font-medium text-slate-700",children:"Signature"})]}),g?(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("img",{src:"".concat("").concat(g),alt:"Signature",className:"w-full h-24 object-contain bg-white rounded-lg border"}),(0,qr.jsx)("button",{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},className:"absolute top-2 right-2 p-1 bg-white rounded-full shadow hover:bg-slate-100",children:(0,qr.jsx)($U,{className:"w-4 h-4 text-slate-600"})})]}):(0,qr.jsx)("button",{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},disabled:j,className:"w-full h-24 flex flex-col items-center justify-center bg-slate-50 rounded-lg border border-slate-200 hover:bg-slate-100 transition-all",children:j?(0,qr.jsx)(Bc,{className:"w-6 h-6 animate-spin text-indigo-600"}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)($U,{className:"w-6 h-6 text-slate-400 mb-1"}),(0,qr.jsx)("span",{className:"text-sm text-slate-500",children:"Upload Signature"})]})}),(0,qr.jsx)("input",{ref:_,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>2097152)Qt.error("File size should be less than 2MB");else{N(!0);try{const e=new FormData;e.append("file",t);const a=await Hr.post("".concat($Y,"/school/upload-signature"),e,{headers:{"Content-Type":"multipart/form-data"}});v(a.data.url),Qt.success("Signature uploaded successfully! \u270d\ufe0f")}catch(a){Qt.error("Failed to upload signature")}finally{N(!1)}}},className:"hidden"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"PNG/JPG, max 2MB"})]}),(0,qr.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-4 hover:border-indigo-300 transition-all",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,qr.jsx)(JY,{className:"w-4 h-4 text-indigo-600"}),(0,qr.jsx)("span",{className:"font-medium text-slate-700",children:"School Seal/Stamp"})]}),b?(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("img",{src:"".concat("").concat(b),alt:"Seal",className:"w-full h-24 object-contain bg-white rounded-lg border"}),(0,qr.jsx)("button",{onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},className:"absolute top-2 right-2 p-1 bg-white rounded-full shadow hover:bg-slate-100",children:(0,qr.jsx)($U,{className:"w-4 h-4 text-slate-600"})})]}):(0,qr.jsx)("button",{onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},disabled:w,className:"w-full h-24 flex flex-col items-center justify-center bg-slate-50 rounded-lg border border-slate-200 hover:bg-slate-100 transition-all",children:w?(0,qr.jsx)(Bc,{className:"w-6 h-6 animate-spin text-indigo-600"}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(JY,{className:"w-6 h-6 text-slate-400 mb-1"}),(0,qr.jsx)("span",{className:"text-sm text-slate-500",children:"Upload Seal"})]})}),(0,qr.jsx)("input",{ref:k,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>2097152)Qt.error("File size should be less than 2MB");else{S(!0);try{const e=new FormData;e.append("file",t);const a=await Hr.post("".concat($Y,"/school/upload-seal"),e,{headers:{"Content-Type":"multipart/form-data"}});y(a.data.url),Qt.success("Seal uploaded successfully! \ud83d\udd16")}catch(a){Qt.error("Failed to upload seal")}finally{S(!1)}}},className:"hidden"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"PNG/JPG, max 2MB"})]})]})]}),(0,qr.jsxs)("div",{className:"stat-card",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(Ic,{className:"w-5 h-5 text-indigo-600"}),(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Schools"})]}),"director"===(null===a||void 0===a?void 0:a.role)&&(0,qr.jsxs)(Im,{open:h,onOpenChange:p,children:[(0,qr.jsx)(Rm,{asChild:!0,children:(0,qr.jsxs)(Dl,{className:"btn-primary","data-testid":"add-school-btn",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 mr-2"}),"Add School"]})}),(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:"Add New School"}),(0,qr.jsx)(qm,{className:"sr-only",children:"Fill the form to add a new school"})]}),(0,qr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0);try{const e=await Hr.post("".concat($Y,"/schools"),D);Qt.success("School created successfully"),p(!1),I({name:"",address:"",board_type:"CBSE",city:"",state:"",phone:"",email:""}),R(),r(e.data.id)}catch(n){var a,s;const e=null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail;Qt.error("string"===typeof e?e:t("something_went_wrong"))}finally{f(!1)}},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"School Name *"}),(0,qr.jsx)(Rl,{name:"name",value:D.name,onChange:B,required:!0,"data-testid":"school-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Address *"}),(0,qr.jsx)(Rl,{name:"address",value:D.address,onChange:B,required:!0,"data-testid":"school-address-input"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"City *"}),(0,qr.jsx)(Rl,{name:"city",value:D.city,onChange:B,required:!0,"data-testid":"school-city-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"State *"}),(0,qr.jsx)(Rl,{name:"state",value:D.state,onChange:B,required:!0,"data-testid":"school-state-input"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Board Type *"}),(0,qr.jsxs)("select",{name:"board_type",value:D.board_type,onChange:B,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"school-board-select",children:[(0,qr.jsx)("option",{value:"CBSE",children:"CBSE (NCERT)"}),(0,qr.jsx)("option",{value:"NCERT",children:"NCERT"}),(0,qr.jsx)("option",{value:"MPBSE",children:"MP Board (MPBSE)"}),(0,qr.jsx)("option",{value:"ICSE",children:"ICSE"}),(0,qr.jsx)("option",{value:"State Board",children:"State Board"}),(0,qr.jsx)("option",{value:"IB",children:"IB"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Phone"}),(0,qr.jsx)(Rl,{name:"phone",value:D.phone,onChange:B,"data-testid":"school-phone-input"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Email"}),(0,qr.jsx)(Rl,{name:"email",type:"email",value:D.email,onChange:B,"data-testid":"school-email-input"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>p(!1),children:t("cancel")}),(0,qr.jsxs)(Dl,{type:"submit",className:"btn-primary",disabled:x,"data-testid":"save-school-btn",children:[x?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,t("save")]})]})]})]})]})]}),d?(0,qr.jsx)("div",{className:"flex justify-center py-10",children:(0,qr.jsx)("div",{className:"spinner w-8 h-8"})}):0===o.length?(0,qr.jsxs)("div",{className:"text-center py-10",children:[(0,qr.jsx)(Ic,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No schools added yet"}),(0,qr.jsx)("p",{className:"text-sm text-slate-400",children:"Add a school to get started"})]}):(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(e=>(0,qr.jsx)("div",{className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat(n===e.id?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"),onClick:()=>{return t=e.id,r(t),void Qt.success("School selected");var t},"data-testid":"school-card-".concat(e.id),children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:e.name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[e.city,", ",e.state]}),(0,qr.jsx)("span",{className:"badge badge-info mt-2",children:e.board_type})]}),n===e.id&&(0,qr.jsx)("div",{className:"w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center",children:(0,qr.jsx)(ph,{className:"w-4 h-4 text-white"})})]})},e.id))})]})]})}"".concat("","/api");const XY=["className","variant"],ZY=xi("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eJ(e){let{className:t,variant:a}=e,s=i(e,XY);return(0,qr.jsx)("div",u({className:Ol(ZY({variant:a}),t)},s))}const tJ=Dc("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),aJ=Dc("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),sJ=Dc("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),nJ=Dc("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),rJ=Dc("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),iJ=Dc("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),lJ=Dc("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),oJ="".concat("","/api"),cJ={male:"https://api.dicebear.com/7.x/personas/svg?seed=TinoMale&backgroundColor=4f46e5&hair=short01&clothingColor=4f46e5",female:"https://api.dicebear.com/7.x/personas/svg?seed=TinoFemale&backgroundColor=ec4899&hair=long01&clothingColor=ec4899"};function dJ(e){let{isOpen:t,onClose:a}=e;const{user:n}=Kr(),[r,i]=(0,s.useState)(!1),l=void 0!==t?t:r,o=a?e=>{e||a()}:i,[c,d]=(0,s.useState)(()=>localStorage.getItem("tino_voice_gender")||"female"),[u,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(""),[g,v]=(0,s.useState)([]),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)([]),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),[A,P]=(0,s.useState)(null),O=(0,s.useRef)(null),M=(0,s.useRef)(null),T=(0,s.useRef)([]),D=(0,s.useRef)(null),I=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e;null===(e=I.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[g]),(0,s.useEffect)(()=>{localStorage.setItem("tino_voice_gender",c)},[c]),(0,s.useEffect)(()=>{const e=localStorage.getItem("tino_chat_history_".concat(null===n||void 0===n?void 0:n.id));if(e)try{S(JSON.parse(e))}catch(J1){console.error("Failed to load chat history")}},[null===n||void 0===n?void 0:n.id]);const R=async e=>{p(!0);try{const t=localStorage.getItem("token"),a=(await Hr.post("".concat(oJ,"/voice-assistant/chat"),{message:e,school_id:(null===n||void 0===n?void 0:n.school_id)||"default",user_id:null===n||void 0===n?void 0:n.id,user_role:null===n||void 0===n?void 0:n.role,voice_gender:c,is_jarvis_mode:!0,context:"meeting_assistant"},{headers:{Authorization:"Bearer ".concat(t)}})).data;let s=a.message;s.includes("Sir")||s.includes("sir")||(s="Sir, "+s),F("ai",s,{navigate:a.navigate_to,action:a.action,isJarvisResponse:!0}),z(s),a.navigate_to&&setTimeout(()=>{window.location.href=a.navigate_to},2e3)}catch(t){console.error("Jarvis command error:",t),F("ai","Sir, kuch technical issue aa gaya. Kripya dobara try karein.")}finally{p(!1)}};(0,s.useEffect)(()=>{if(l&&0===g.length){const e=L();F("ai",e),z(e)}},[l]);const L=()=>{var e;const t=(new Date).getHours();let a="Namaste";a=t<12?"Good Morning":t<17?"Good Afternoon":t<21?"Good Evening":"Good Night";const s=(null===n||void 0===n||null===(e=n.name)||void 0===e?void 0:e.split(" ")[0])||"User",r=(null===n||void 0===n?void 0:n.role)||"user";let i="school management mein help";return"teacher"===r&&(i="teaching aur class management mein help"),"student"===r&&(i="padhai aur school activities mein help"),"accountant"===r&&(i="fee aur salary management mein help"),"".concat(a,", ").concat(s,"! Main Tino hoon, aapka AI assistant. Aap mujhse ").concat(i," le sakte hain. Kya help chahiye?")},F=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(s=>[...s,{type:e,text:t,data:a,time:new Date}])},z=async e=>{try{const t=await Hr.post("".concat(oJ,"/voice-assistant/tts"),{text:e,voice_gender:c});t.data.audio_base64&&B(t.data.audio_base64)}catch($1){if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.lang="hi-IN",t.rate=.9,speechSynthesis.speak(t)}}},B=e=>{try{D.current&&D.current.pause();const t=new Audio("data:audio/mpeg;base64,".concat(e));D.current=t,t.play().catch(console.error)}catch($1){console.error("Audio play failed:",$1)}},U=async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});M.current=new MediaRecorder(e,{mimeType:"audio/webm"}),T.current=[],M.current.ondataavailable=e=>{e.data.size>0&&T.current.push(e.data)},M.current.onstop=async()=>{const t=new Blob(T.current,{type:"audio/webm"});await q(t),e.getTracks().forEach(e=>e.stop())},M.current.start(),m(!0)}catch($1){Qt.error("Microphone access denied")}},H=()=>{var e;"inactive"!==(null===(e=M.current)||void 0===e?void 0:e.state)&&(M.current.stop(),m(!1))},q=async e=>{p(!0);try{const t=new FormData;t.append("audio_file",e,"recording.webm"),t.append("language","hi");const a=(await Hr.post("".concat(oJ,"/voice-assistant/transcribe"),t)).data.transcribed_text;if(null===a||void 0===a||!a.trim()){const e="Kuch sun nahi paya. Dobara bolein.";return F("ai",e),void z(e)}F("user",a),await V(a)}catch($1){const t="Voice processing mein problem hui. Text mein type karein.";F("ai",t),z(t)}finally{p(!1)}},V=async e=>{p(!0);try{var t;const a=(await Hr.post("".concat(oJ,"/voice-assistant/chat"),{message:e,school_id:(null===n||void 0===n?void 0:n.school_id)||"default",user_id:(null===n||void 0===n?void 0:n.id)||"",user_role:(null===n||void 0===n?void 0:n.role)||"director",user_name:(null===n||void 0===n?void 0:n.name)||"User",voice_gender:c})).data;F("ai",a.message,a.data),a.requires_confirmation&&y({action:a.action,message:a.message}),a.audio_base64?B(a.audio_base64):z(a.message),a.navigate_to&&(Qt.success("Opening ".concat(a.navigate_to,"...")),setTimeout(()=>{o(!1),window.location.href=a.navigate_to},1500)),null!==(t=a.data)&&void 0!==t&&t.redirect&&!a.navigate_to&&setTimeout(()=>{window.location.href=a.data.redirect},2e3)}catch($1){const t="Kuch gadbad ho gayi. Dobara try karein.";F("ai",t),z(t)}finally{p(!1)}};return n&&["director","principal","vice_principal","co_director","teacher","admin_staff","accountant","student"].includes(n.role)?(0,qr.jsxs)(qr.Fragment,{children:[l&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:(0,qr.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden max-h-[85vh] flex flex-col border border-slate-700","data-testid":"tino-assistant-modal",children:[(0,qr.jsxs)("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between bg-slate-900/50",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[_?(0,qr.jsx)("button",{onClick:()=>k(!1),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg",children:(0,qr.jsx)(AY,{className:"w-5 h-5"})}):(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("img",{src:cJ[c],alt:"Tino AI",className:"w-12 h-12 rounded-full border-2 border-indigo-500"}),(0,qr.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-slate-900 ".concat("male"===c?"bg-indigo-500":"bg-pink-500")})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h3",{className:"font-bold text-white flex items-center gap-2",children:[(0,qr.jsx)(hh,{className:"w-4 h-4 text-yellow-400"}),_?"Chat History":"Tino AI"]}),(0,qr.jsx)("p",{className:"text-xs text-slate-400",children:_?"".concat(w.length," saved chats"):"".concat("male"===c?"Male Voice":"Female Voice"," \u2022 ").concat(null===n||void 0===n?void 0:n.role)})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[!_&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("button",{onClick:C?()=>{E(!1),O.current&&(O.current.stop(),O.current=null),F("ai","\ud83d\udd34 Jarvis Mode OFF. Push-to-talk mode mein wapas aa gaye.",{isJarvisNotification:!0}),z("Jarvis Mode deactivated."),Qt.info("Jarvis Mode OFF")}:()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void Qt.error("Jarvis Mode requires Chrome browser");E(!0),F("ai",'\ud83e\udd16 Jarvis Mode ON! Main ab hamesha sun raha hoon. Meeting mein help ke liye ready hoon. "Tino" bolke mujhe address karein.',{isJarvisNotification:!0}),z("Jarvis Mode activated. Main ab aapki meeting mein help ke liye ready hoon.");const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="hi-IN";let t="",a=null;e.onresult=e=>{let s="";for(let a=e.resultIndex;a<e.results.length;a++){const n=e.results[a][0].transcript;e.results[a].isFinal?t+=n+" ":s+=n}a&&clearTimeout(a),a=setTimeout(async()=>{if(t.trim()){const e=t.trim().toLowerCase();if(e.includes("tino")||e.includes("\u091f\u0940\u0928\u094b")||e.includes("ai")||e.includes("assistant"))F("user",t.trim()),await R(t.trim());else if(e.length>50&&(e.includes("problem")||e.includes("issue")||e.includes("\u0938\u092e\u0938\u094d\u092f\u093e")||e.includes("help"))){F("ai",'Sir, agar mujhe address karein "Tino" bol kar, to main help kar sakti hoon.',{isJarvisSuggestion:!0})}t=""}},2e3)},e.onerror=t=>{console.error("Jarvis recognition error:",t.error),"no-speech"!==t.error&&setTimeout(()=>{C&&e.start()},1e3)},e.onend=()=>{C&&setTimeout(()=>e.start(),500)},e.start(),O.current=e,Qt.success("Jarvis Mode: Meeting Assistant Ready! \ud83e\udd16")},className:"p-2 rounded-lg transition-all flex items-center gap-1 text-xs font-medium ".concat(C?"bg-green-500/20 text-green-400 hover:bg-green-500/30 animate-pulse":"text-slate-400 hover:text-white hover:bg-slate-700"),title:C?"Stop Jarvis Mode":"Start Jarvis Mode (Meeting Assistant)",children:[(0,qr.jsx)(nJ,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"hidden sm:inline",children:C?"LIVE":"Jarvis"})]}),(0,qr.jsx)("button",{onClick:()=>k(!0),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-all",title:"Chat History",children:(0,qr.jsx)(rJ,{className:"w-5 h-5"})}),(0,qr.jsx)("button",{onClick:()=>N(!j),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-all",children:(0,qr.jsx)(wh,{className:"w-5 h-5"})})]}),_&&w.length>0&&(0,qr.jsx)("button",{onClick:()=>{S([]),localStorage.removeItem("tino_chat_history_".concat(null===n||void 0===n?void 0:n.id)),Qt.success("All chat history cleared")},className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-all",title:"Clear All",children:(0,qr.jsx)(iH,{className:"w-5 h-5"})}),(0,qr.jsx)("button",{onClick:()=>{(()=>{if(g.length>1){var e,t;const a=[{id:Date.now(),date:(new Date).toISOString(),messages:g.slice(1),preview:(null===(e=g[1])||void 0===e||null===(t=e.text)||void 0===t?void 0:t.slice(0,50))||"Chat session"},...w].slice(0,20);S(a),localStorage.setItem("tino_chat_history_".concat(null===n||void 0===n?void 0:n.id),JSON.stringify(a))}})(),o(!1)},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-all",children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]})]}),_?(0,qr.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===w.length?(0,qr.jsxs)("div",{className:"text-center py-8",children:[(0,qr.jsx)(rJ,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Koi saved chat nahi hai"})]}):w.map(e=>(0,qr.jsx)("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 hover:border-indigo-500/50 transition-all",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>(e=>{v([{type:"ai",text:L(),time:new Date},...e.messages]),k(!1),Qt.success("Chat loaded")})(e),children:[(0,qr.jsxs)("p",{className:"text-white text-sm font-medium truncate",children:[e.preview,"..."]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:new Date(e.date).toLocaleDateString("hi-IN",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(0,qr.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=w.filter(t=>t.id!==e);S(t),localStorage.setItem("tino_chat_history_".concat(null===n||void 0===n?void 0:n.id),JSON.stringify(t)),Qt.success("Chat deleted")})(e.id)},className:"p-1 text-slate-500 hover:text-red-400 hover:bg-red-500/20 rounded",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})},e.id))}):(0,qr.jsxs)(qr.Fragment,{children:[j&&(0,qr.jsxs)("div",{className:"p-4 bg-slate-800/50 border-b border-slate-700 space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-sm text-slate-300",children:"Voice Gender"}),(0,qr.jsxs)("button",{onClick:()=>{const e="male"===c?"female":"male";d(e);const t="male"===e?"Main ab male voice mein bolunga.":"Main ab female voice mein bolungi.";F("ai",t),z(t)},className:"flex items-center gap-2 px-4 py-2 rounded-full transition-all ".concat("male"===c?"bg-indigo-600 text-white":"bg-pink-600 text-white"),children:[(0,qr.jsx)(eH,{className:"w-4 h-4"}),"male"===c?"Male":"Female"]})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Voice change karte hi avatar bhi change ho jayega"})]}),(0,qr.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-[300px]",children:[g.map((e,t)=>(0,qr.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,qr.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-3 ".concat("user"===e.type?"bg-indigo-600 text-white rounded-br-md":"bg-slate-700 text-slate-100 rounded-bl-md"),children:[(0,qr.jsx)("p",{className:"text-sm",children:e.text}),e.data&&e.data.redirect&&(0,qr.jsx)("p",{className:"text-xs mt-2 opacity-75",children:"Redirecting..."})]})},t)),h&&(0,qr.jsx)("div",{className:"flex justify-start",children:(0,qr.jsx)("div",{className:"bg-slate-700 rounded-2xl px-4 py-3 rounded-bl-md",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin text-indigo-400"}),(0,qr.jsx)("span",{className:"text-sm text-slate-300",children:"Thinking..."})]})})}),(0,qr.jsx)("div",{ref:I})]}),b&&(0,qr.jsxs)("div",{className:"p-4 bg-amber-500/10 border-t border-amber-500/30",children:[(0,qr.jsx)("p",{className:"text-sm text-amber-200 mb-3",children:b.message}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{onClick:async()=>{if(b){p(!0);try{const e=(await Hr.post("".concat(oJ,"/voice-assistant/execute-command"),{command:b.action,school_id:(null===n||void 0===n?void 0:n.school_id)||"default",user_id:(null===n||void 0===n?void 0:n.id)||"",user_role:(null===n||void 0===n?void 0:n.role)||"director",voice_gender:c,confirmed:!0})).data;F("ai",e.message,e.data),y(null),e.audio_base64?B(e.audio_base64):z(e.message),Qt.success("Action completed!")}catch($1){Qt.error("Action failed")}finally{p(!1)}}},disabled:h,className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Haan, Karein"]}),(0,qr.jsxs)(Dl,{onClick:()=>{y(null);const e="Action cancel kar diya.";F("ai",e),z(e)},variant:"outline",className:"flex-1 border-slate-600 text-slate-300 hover:bg-slate-700",children:[(0,qr.jsx)(eY,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}),(0,qr.jsxs)("div",{className:"p-4 border-t border-slate-700 bg-slate-900/50",children:[(0,qr.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x.trim()&&!h&&(F("user",x),V(x),f(""))},className:"flex gap-2",children:[(0,qr.jsx)(Rl,{value:x,onChange:e=>f(e.target.value),placeholder:"Type your message...",className:"flex-1 bg-slate-800 border-slate-600 text-white placeholder:text-slate-500",disabled:h||u}),(0,qr.jsx)("button",{type:"button",onMouseDown:U,onMouseUp:H,onMouseLeave:u?H:void 0,onTouchStart:U,onTouchEnd:H,disabled:h,className:"p-3 rounded-xl transition-all select-none ".concat(u?"bg-red-500 text-white animate-pulse scale-110":"bg-slate-700 text-slate-300 hover:bg-slate-600 active:bg-red-500 active:scale-110"),"data-testid":"push-to-talk-btn",children:u?(0,qr.jsx)(iJ,{className:"w-5 h-5"}):(0,qr.jsx)(lJ,{className:"w-5 h-5"})}),(0,qr.jsx)(Dl,{type:"submit",disabled:!x.trim()||h,className:"bg-indigo-600 hover:bg-indigo-700",children:(0,qr.jsx)(sJ,{className:"w-5 h-5"})})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-2 text-center",children:u?"\ud83c\udf99\ufe0f Bol rahe hain... Chhod do jab ho jaye":"\ud83c\udfa4 Mic button dabake bolo, chhod do - reply aayega"})]})]})]})}),void 0===t&&(0,qr.jsx)("button",{onClick:()=>o(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all z-40 flex items-center justify-center","data-testid":"tino-fab",children:(0,qr.jsx)(ih,{className:"w-6 h-6"})})]}):null}function uJ(e){let{staffId:t,staffName:a,schoolId:n,onComplete:r}=e;const[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(null),[h,p]=(0,s.useState)({}),[x,f]=(0,s.useState)(null),[g,v]=(0,s.useState)("passport"),b=(0,s.useRef)(null),y=(0,s.useRef)(null),j=[{id:"passport",label:"Passport Photo",description:"Front facing, clear face",required:!0},{id:"front",label:"Front View",description:"Natural expression",required:!0},{id:"left",label:"Left Profile",description:"30-45 degree left turn",required:!1},{id:"right",label:"Right Profile",description:"30-45 degree right turn",required:!1}];(0,s.useEffect)(()=>(t&&N(),()=>{w()}),[t]);const N=async()=>{try{const e=await fetch("".concat("","/api/face-recognition/staff/enrollment-status/").concat(t));if(e.ok){const t=await e.json();f(t),t.photos&&p(t.photos)}}catch(e){console.error("Error fetching enrollment status:",e)}},w=()=>{d&&(d.getTracks().forEach(e=>e.stop()),m(null)),c(!1)},S=async e=>{l(!0);try{const s=await fetch("".concat("","/api/face-recognition/staff/upload-photo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({staff_id:t,school_id:n,photo_base64:e,photo_type:g,capture_device:"webcam"})}),i=await s.json();if(i.success){Qt.success(i.message||"Photo uploaded successfully!"),p(e=>u(u({},e),{},{[g]:{id:i.photo_id,quality_score:i.quality_score}}));const e=j.findIndex(e=>e.id===g);e<j.length-1?v(j[e+1].id):(w(),Qt.success("Sabhi photos upload ho gaye! \ud83c\udf89"),null===r||void 0===r||r()),N()}else{var a;if(Qt.error(i.error||"Photo upload failed"),"retake"===i.action)Qt.info((null===(a=i.recommendations)||void 0===a?void 0:a.join(". "))||"Please try again with better lighting")}}catch(s){Qt.error("Upload failed. Please try again.")}finally{l(!1)}},_=Object.keys(h).length,k=j.filter(e=>e.required).length;Math.min(_/k*100,100);return(0,qr.jsxs)(Qc,{className:"border-blue-200",children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(JU,{className:"w-5 h-5 text-blue-600"}),"Face Recognition Setup"]}),(0,qr.jsxs)(ed,{children:[a||"Staff"," ke liye photos upload karein AI recognition ke liye"]})]}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Enrollment Progress"}),(0,qr.jsxs)("span",{className:"font-medium text-blue-600",children:[_,"/",j.length," photos"]})]}),(0,qr.jsx)("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,qr.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-500",style:{width:"".concat(_/j.length*100,"%")}})})]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-3",children:j.map(e=>{var t;const a=h[e.id],s=g===e.id;return(0,qr.jsxs)("div",{onClick:()=>!a&&v(e.id),className:"p-3 rounded-xl border-2 cursor-pointer transition-all ".concat(a?"border-emerald-500 bg-emerald-50":s?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"),children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,qr.jsx)("span",{className:"text-sm font-medium ".concat(a?"text-emerald-700":s?"text-blue-700":"text-slate-700"),children:e.label}),a?(0,qr.jsx)(Km,{className:"w-4 h-4 text-emerald-500"}):e.required?(0,qr.jsx)("span",{className:"text-xs text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded",children:"Required"}):null]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.description}),a&&(0,qr.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,qr.jsxs)("span",{className:"text-xs text-emerald-600",children:["Quality: ",(null===(t=h[e.id])||void 0===t?void 0:t.quality_score)||"N/A","%"]}),(0,qr.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{try{(await fetch("".concat("","/api/face-recognition/staff/photo/").concat(e),{method:"DELETE"})).ok&&(Qt.success("Photo deleted"),p(e=>{const a=u({},e);return delete a[t],a}),N())}catch(a){Qt.error("Delete failed")}})(h[e.id].id,e.id)},className:"text-xs text-red-500 hover:text-red-700",children:(0,qr.jsx)(iH,{className:"w-3 h-3"})})]})]},e.id)})}),o?(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-video",children:[(0,qr.jsx)("video",{ref:b,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,qr.jsx)("canvas",{ref:y,className:"hidden"}),(0,qr.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,qr.jsx)("div",{className:"absolute inset-0 border-4 border-dashed border-white/30 m-8 rounded-full"}),(0,qr.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-full text-sm",children:[g.replace("_"," ").toUpperCase()," - Face center mein rakhein"]})]})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{onClick:async()=>{if(!b.current||!y.current)return;const e=b.current,t=y.current;t.width=e.videoWidth,t.height=e.videoHeight;t.getContext("2d").drawImage(e,0,0);const a=t.toDataURL("image/jpeg",.8).split(",")[1];await S(a)},disabled:i,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(JU,{className:"w-4 h-4 mr-2"}),"Capture Photo"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:w,children:[(0,qr.jsx)(eY,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}):(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});m(e),b.current&&(b.current.srcObject=e),c(!0)}catch(e){Qt.error("Camera access denied. Please allow camera permission."),console.error("Camera error:",e)}},className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(JU,{className:"w-4 h-4 mr-2"}),"Open Camera"]}),(0,qr.jsxs)("label",{className:"flex-1",children:[(0,qr.jsx)(Dl,{variant:"outline",className:"w-full",asChild:!0,children:(0,qr.jsxs)("span",{children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})}),(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=async e=>{const t=e.target.result.split(",")[1];await S(t)},a.readAsDataURL(t)},className:"hidden"})]})]}),(0,qr.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)(hh,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-indigo-800",children:"AI Face Recognition"}),(0,qr.jsx)("p",{className:"text-xs text-indigo-600 mt-1",children:"Ye photos AI ko aapko recognize karne mein help karenge. Jab aap school mein enter karenge, AI automatically aapko greet karega!"})]})]})}),x&&(0,qr.jsx)("div",{className:"bg-slate-50 rounded-lg p-3",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Recognition Ready:"}),(0,qr.jsx)("span",{className:"font-medium ".concat(x.can_use_recognition?"text-emerald-600":"text-amber-600"),children:x.can_use_recognition?"Yes \u2713":"More photos needed"})]})})]})]})}const mJ="".concat("","/api");function hJ(){var e;const t=Se(),{user:a,logout:n}=Kr(),[r,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)("home"),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),[f,g]=(0,s.useState)({present:0,absent:0,total:0}),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)({leave_type:"casual",from_date:"",to_date:"",reason:""}),[E,A]=(0,s.useState)({title:"",content:""}),P="principal"===(null===a||void 0===a?void 0:a.role)||"vice_principal"===(null===a||void 0===a?void 0:a.role)||"director"===(null===a||void 0===a?void 0:a.role);(0,s.useEffect)(()=>{O()},[]);const O=async()=>{i(!0);try{var e,t;const[s,n,r]=await Promise.allSettled([Hr.get("".concat(mJ,"/classes?school_id=").concat(null===a||void 0===a?void 0:a.school_id)),Hr.get("".concat(mJ,"/notices?limit=5")),Hr.get("".concat(mJ,"/leave/pending"))]);"fulfilled"===s.status&&d((null===(e=s.value.data)||void 0===e?void 0:e.slice(0,6))||[]),"fulfilled"===n.status&&h((null===(t=n.value.data)||void 0===t?void 0:t.slice(0,3))||[]),"fulfilled"===r.status&&x(r.value.data||[]),g({present:42,absent:3,total:45})}catch(s){console.error("Fetch error:",s)}finally{i(!1)}};return r?(0,qr.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-slate-50","data-testid":"teachtino-dashboard",children:[(0,qr.jsx)("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-3",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Fc,{className:"w-6 h-6 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"font-bold text-slate-900",children:"TeachTino"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:null===a||void 0===a?void 0:a.name})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>_(!0),className:"text-slate-600",children:(0,qr.jsx)(th,{className:"w-5 h-5"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>w(!0),className:"text-slate-600",children:(0,qr.jsx)(wh,{className:"w-5 h-5"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>{n(),t("/teachtino")},className:"text-rose-600",children:(0,qr.jsx)(rH,{className:"w-5 h-5"})})]})]})})}),(0,qr.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6 pb-24",children:[(0,qr.jsxs)("div",{className:"mb-6",children:[(0,qr.jsxs)("h2",{className:"text-2xl font-bold text-slate-900",children:[(()=>{const e=(new Date).getHours();return e<12?"Good Morning":e<17?"Good Afternoon":"Good Evening"})(),", ",null===a||void 0===a||null===(e=a.name)||void 0===e?void 0:e.split(" ")[0],"! \ud83d\udc4b"]}),(0,qr.jsx)("p",{className:"text-slate-500",children:(new Date).toLocaleDateString("hi-IN",{weekday:"long",day:"numeric",month:"long"})})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,qr.jsx)(Qc,{className:"bg-white",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"My Classes"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:c.length})]}),(0,qr.jsx)(sh,{className:"w-8 h-8 text-indigo-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-white",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Present Today"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:f.present})]}),(0,qr.jsx)(Km,{className:"w-8 h-8 text-emerald-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-white",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Absent"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-rose-600",children:f.absent})]}),(0,qr.jsx)(eY,{className:"w-8 h-8 text-rose-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-white",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Notices"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:m.length})]}),(0,qr.jsx)(Oh,{className:"w-8 h-8 text-amber-500"})]})})})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,qr.jsxs)(Dl,{className:"h-auto py-4 flex flex-col gap-2 bg-indigo-600 hover:bg-indigo-700",onClick:()=>t("/app/attendance"),children:[(0,qr.jsx)(tJ,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Mark Attendance"})]}),(0,qr.jsxs)(Dl,{className:"h-auto py-4 flex flex-col gap-2 bg-emerald-600 hover:bg-emerald-700",onClick:()=>t("/app/ai-paper"),children:[(0,qr.jsx)(hh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"AI Paper"})]}),(0,qr.jsxs)(Dl,{className:"h-auto py-4 flex flex-col gap-2 bg-amber-600 hover:bg-amber-700",onClick:()=>j(!0),children:[(0,qr.jsx)(Oh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Send Notice"})]}),(0,qr.jsxs)(Dl,{className:"h-auto py-4 flex flex-col gap-2 bg-purple-600 hover:bg-purple-700",onClick:()=>b(!0),children:[(0,qr.jsx)(eh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Apply Leave"})]})]}),(0,qr.jsxs)(Qc,{className:"mb-6",children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"flex items-center justify-between",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-2",children:[(0,qr.jsx)(sh,{className:"w-5 h-5 text-indigo-600"}),"My Classes"]}),(0,qr.jsxs)(Dl,{variant:"ghost",size:"sm",onClick:()=>t("/app/classes"),children:["View All ",(0,qr.jsx)(qc,{className:"w-4 h-4 ml-1"})]})]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:0===c.length?(0,qr.jsx)("p",{className:"text-slate-500 col-span-full text-center py-4",children:"No classes assigned"}):c.map(e=>(0,qr.jsxs)("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",onClick:()=>t("/app/classes/".concat(e.id)),children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-900",children:e.name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[e.student_count||0," students"]})]},e.id))})})]}),(0,qr.jsxs)(Qc,{className:"mb-6",children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Oh,{className:"w-5 h-5 text-amber-600"}),"Recent Notices"]})}),(0,qr.jsx)(td,{children:0===m.length?(0,qr.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No notices"}):(0,qr.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,qr.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-900",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 line-clamp-2",children:e.content})]},e.id))})})]}),P&&p.length>0&&(0,qr.jsxs)(Qc,{className:"mb-6",children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(QU,{className:"w-5 h-5 text-amber-600"}),"Pending Leave Approvals (",p.length,")"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-3",children:p.slice(0,3).map(e=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.user_name||"Staff"}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[e.leave_type," - ",e.reason]})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{size:"sm",className:"bg-emerald-600",onClick:()=>(async e=>{try{await Hr.post("".concat(mJ,"/leave/").concat(e,"/approve")),Qt.success("Leave approved!"),O()}catch(t){Qt.error("Failed to approve")}})(e.id),children:(0,qr.jsx)(Km,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{size:"sm",variant:"destructive",onClick:()=>(async e=>{try{await Hr.post("".concat(mJ,"/leave/").concat(e,"/reject")),Qt.success("Leave rejected"),O()}catch(t){Qt.error("Failed to reject")}})(e.id),children:(0,qr.jsx)(eY,{className:"w-4 h-4"})})]})]},e.id))})})]})]}),(0,qr.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 z-50",children:(0,qr.jsxs)("div",{className:"grid grid-cols-5 gap-1 p-2 max-w-lg mx-auto",children:[(0,qr.jsxs)("button",{onClick:()=>o("home"),className:"flex flex-col items-center gap-1 p-2 rounded-lg ".concat("home"===l?"text-indigo-600 bg-indigo-50":"text-slate-500"),children:[(0,qr.jsx)(aJ,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Home"})]}),(0,qr.jsxs)("button",{onClick:()=>t("/app/classes"),className:"flex flex-col items-center gap-1 p-2 text-slate-500",children:[(0,qr.jsx)(sh,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Classes"})]}),(0,qr.jsxs)("button",{onClick:()=>t("/app/attendance"),className:"flex flex-col items-center gap-1 p-2 text-slate-500",children:[(0,qr.jsx)(tJ,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Attendance"})]}),(0,qr.jsxs)("button",{onClick:()=>t("/app/notices"),className:"flex flex-col items-center gap-1 p-2 text-slate-500",children:[(0,qr.jsx)(Oh,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Notices"})]}),(0,qr.jsxs)("button",{onClick:()=>_(!0),className:"flex flex-col items-center gap-1 p-2 text-slate-500",children:[(0,qr.jsx)(th,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Tino AI"})]})]})}),(0,qr.jsx)(Im,{open:v,onOpenChange:b,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Apply for Leave"})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Leave Type"}),(0,qr.jsxs)("select",{value:k.leave_type,onChange:e=>C(u(u({},k),{},{leave_type:e.target.value})),className:"w-full mt-1 p-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"casual",children:"Casual Leave"}),(0,qr.jsx)("option",{value:"sick",children:"Sick Leave"}),(0,qr.jsx)("option",{value:"earned",children:"Earned Leave"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"From Date"}),(0,qr.jsx)(Rl,{type:"date",value:k.from_date,onChange:e=>C(u(u({},k),{},{from_date:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"To Date"}),(0,qr.jsx)(Rl,{type:"date",value:k.to_date,onChange:e=>C(u(u({},k),{},{to_date:e.target.value}))})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Reason"}),(0,qr.jsx)(_Y,{value:k.reason,onChange:e=>C(u(u({},k),{},{reason:e.target.value})),placeholder:"Enter reason for leave..."})]}),(0,qr.jsx)(Dl,{className:"w-full",onClick:async()=>{if(k.from_date&&k.to_date&&k.reason)try{await Hr.post("".concat(mJ,"/leave/apply"),u(u({},k),{},{school_id:null===a||void 0===a?void 0:a.school_id})),Qt.success("Leave applied successfully!"),b(!1),C({leave_type:"casual",from_date:"",to_date:"",reason:""})}catch(e){Qt.error("Failed to apply leave")}else Qt.error("Please fill all fields")},children:"Submit Application"})]})]})}),(0,qr.jsx)(Im,{open:y,onOpenChange:j,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Send Notice"})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Title"}),(0,qr.jsx)(Rl,{value:E.title,onChange:e=>A(u(u({},E),{},{title:e.target.value})),placeholder:"Notice title..."})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Content"}),(0,qr.jsx)(_Y,{value:E.content,onChange:e=>A(u(u({},E),{},{content:e.target.value})),placeholder:"Notice content...",rows:4})]}),(0,qr.jsxs)(Dl,{className:"w-full",onClick:async()=>{if(E.title&&E.content)try{await Hr.post("".concat(mJ,"/notices"),u(u({},E),{},{target_audience:["students","parents"],priority:"normal",school_id:null===a||void 0===a?void 0:a.school_id})),Qt.success("Notice sent!"),j(!1),A({title:"",content:""}),O()}catch(e){Qt.error("Failed to send notice")}else Qt.error("Please fill all fields")},children:[(0,qr.jsx)(sJ,{className:"w-4 h-4 mr-2"}),"Send Notice"]})]})]})}),(0,qr.jsx)(Im,{open:N,onOpenChange:w,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Profile & Settings"})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-8 h-8 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold",children:null===a||void 0===a?void 0:a.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:null===a||void 0===a?void 0:a.email}),(0,qr.jsx)(eJ,{className:"mt-1 capitalize",children:null===a||void 0===a?void 0:a.role})]})]}),(0,qr.jsxs)("div",{className:"border-t pt-4",children:[(0,qr.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[(0,qr.jsx)(JU,{className:"w-4 h-4"}),"Face Recognition Setup"]}),(0,qr.jsx)(uJ,{userId:null===a||void 0===a?void 0:a.id,onComplete:()=>Qt.success("Photo uploaded!")})]})]})]})}),(0,qr.jsx)(dJ,{isOpen:S,onClose:()=>_(!1)})]})}const pJ=Dc("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),xJ=Dc("octagon-alert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),fJ=Dc("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),gJ=Dc("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),vJ=Dc("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),bJ=e=>{var t,a,s,n,r,i,l,o,c,d,u,m,h,p,x,f,g,v,b;let{data:y}=e;return y?(0,qr.jsxs)("div",{className:"p-8 max-w-2xl mx-auto bg-white",style:{fontFamily:"Arial, sans-serif"},children:[(0,qr.jsxs)("div",{className:"text-center border-b-2 border-gray-800 pb-4 mb-4",children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:null===(t=y.school)||void 0===t?void 0:t.name}),(0,qr.jsx)("p",{className:"text-sm text-gray-600",children:null===(a=y.school)||void 0===a?void 0:a.address}),(0,qr.jsxs)("p",{className:"text-sm text-gray-600",children:["Phone: ",null===(s=y.school)||void 0===s?void 0:s.phone]})]}),(0,qr.jsxs)("div",{className:"text-center bg-indigo-600 text-white py-2 mb-4",children:[(0,qr.jsx)("h2",{className:"text-xl font-bold",children:"ADMIT CARD / \u092a\u094d\u0930\u0935\u0947\u0936 \u092a\u0924\u094d\u0930"}),(0,qr.jsxs)("p",{className:"text-sm",children:[null===(n=y.exam)||void 0===n?void 0:n.name," - ",null===(r=y.exam)||void 0===r?void 0:r.type]})]}),(0,qr.jsxs)("div",{className:"flex gap-6 mb-6",children:[(0,qr.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,qr.jsxs)("div",{className:"flex",children:[(0,qr.jsx)("span",{className:"w-32 font-medium",children:"Name / \u0928\u093e\u092e:"}),(0,qr.jsx)("span",{className:"font-bold",children:null===(i=y.student)||void 0===i?void 0:i.name})]}),(0,qr.jsxs)("div",{className:"flex",children:[(0,qr.jsx)("span",{className:"w-32 font-medium",children:"Father's Name:"}),(0,qr.jsx)("span",{children:null===(l=y.student)||void 0===l?void 0:l.father_name})]}),(0,qr.jsxs)("div",{className:"flex",children:[(0,qr.jsx)("span",{className:"w-32 font-medium",children:"Roll No:"}),(0,qr.jsx)("span",{className:"font-bold",children:null===(o=y.student)||void 0===o?void 0:o.roll_no})]}),(0,qr.jsxs)("div",{className:"flex",children:[(0,qr.jsx)("span",{className:"w-32 font-medium",children:"Class:"}),(0,qr.jsxs)("span",{children:[null===(c=y.student)||void 0===c?void 0:c.class," ",null===(d=y.student)||void 0===d?void 0:d.section]})]}),(0,qr.jsxs)("div",{className:"flex",children:[(0,qr.jsx)("span",{className:"w-32 font-medium",children:"DOB:"}),(0,qr.jsx)("span",{children:null===(u=y.student)||void 0===u?void 0:u.dob})]})]}),(0,qr.jsx)("div",{className:"w-32 h-40 border-2 border-gray-300 flex items-center justify-center",children:null!==(m=y.student)&&void 0!==m&&m.photo_url?(0,qr.jsx)("img",{src:y.student.photo_url,alt:"Student",className:"w-full h-full object-cover"}):(0,qr.jsx)("span",{className:"text-gray-400 text-xs text-center",children:"Photo"})})]}),(0,qr.jsxs)("div",{className:"mb-6",children:[(0,qr.jsx)("h3",{className:"font-bold text-gray-900 mb-2 border-b pb-1",children:"Exam Schedule / \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0938\u092e\u092f \u0938\u093e\u0930\u093f\u0923\u0940"}),(0,qr.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-gray-600",children:"Start Date:"}),(0,qr.jsx)("span",{className:"ml-2 font-medium",children:null===(h=y.exam)||void 0===h?void 0:h.start_date})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-gray-600",children:"End Date:"}),(0,qr.jsx)("span",{className:"ml-2 font-medium",children:null===(p=y.exam)||void 0===p?void 0:p.end_date})]})]})]}),(0,qr.jsxs)("div",{className:"mb-6",children:[(0,qr.jsx)("h3",{className:"font-bold text-gray-900 mb-2 border-b pb-1",children:"Instructions / \u0928\u093f\u0930\u094d\u0926\u0947\u0936"}),(0,qr.jsx)("ol",{className:"text-sm list-decimal list-inside space-y-1",children:null===(x=y.exam)||void 0===x||null===(f=x.instructions)||void 0===f?void 0:f.map((e,t)=>(0,qr.jsx)("li",{children:e},t))})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-end mt-8 pt-4 border-t",children:[(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("div",{className:"w-32 h-16 border-b border-gray-400 mb-1"}),(0,qr.jsx)("p",{className:"text-xs",children:"Student's Signature"})]}),(0,qr.jsxs)("div",{className:"text-center",children:[(null===(g=y.seal)||void 0===g?void 0:g.image_url)&&(0,qr.jsx)("img",{src:y.seal.image_url,alt:"Seal",className:"w-20 h-20 mx-auto"}),(0,qr.jsx)("p",{className:"text-xs",children:"School Seal"})]}),(0,qr.jsxs)("div",{className:"text-center",children:[(null===(v=y.signature)||void 0===v?void 0:v.image_url)&&(0,qr.jsx)("img",{src:y.signature.image_url,alt:"Signature",className:"w-24 h-12 mx-auto"}),(0,qr.jsx)("div",{className:"w-32 h-16 border-b border-gray-400 mb-1"}),(0,qr.jsx)("p",{className:"text-xs",children:"director"===(null===(b=y.signature)||void 0===b?void 0:b.authority)?"Director":"Principal"})]})]}),(0,qr.jsxs)("div",{className:"text-center mt-4 text-xs text-gray-500",children:["Admit Card No: ",y.admit_card_no," | Generated: ",new Date(y.generated_at).toLocaleString()]})]}):null},yJ=e=>{var t,a,n;let{studentId:r,schoolId:i}=e;const[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(0),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null);(0,s.useRef)();(0,s.useEffect)(()=>{r&&i?j():(d(!1),y("Student \u092f\u093e School ID \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u0940"))},[r,i]);const j=async()=>{d(!0),y(null);try{const e=await Hr.get("".concat("","/admit-card/student/").concat(i,"/").concat(r));o(e.data.admit_cards||[])}catch($1){console.error("Error fetching admit cards:",$1),y("Admit cards load \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u090f\u0964 \u0936\u093e\u092f\u0926 \u0905\u092d\u0940 \u0915\u094b\u0908 exam \u0928\u0939\u0940\u0902 \u0939\u0948\u0964")}finally{d(!1)}};return c?(0,qr.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,qr.jsx)("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),(0,qr.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading..."})]}):b?(0,qr.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 text-center",children:[(0,qr.jsx)(kY,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-amber-800 font-medium",children:b}),(0,qr.jsx)("p",{className:"text-sm text-amber-600 mt-2",children:"Admin \u0938\u0947 \u0938\u0902\u092a\u0930\u094d\u0915 \u0915\u0930\u0947\u0902 \u092f\u093e \u092c\u093e\u0926 \u092e\u0947\u0902 try \u0915\u0930\u0947\u0902"})]}):(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between",children:(0,qr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-6 h-6 text-indigo-600"}),"Admit Cards / \u092a\u094d\u0930\u0935\u0947\u0936 \u092a\u0924\u094d\u0930"]})}),0===l.length?(0,qr.jsxs)("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[(0,qr.jsx)(cY,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"\u0915\u094b\u0908 Admit Card \u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0939\u0940\u0902 \u0939\u0948"}),(0,qr.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"\u091c\u092c exam schedule \u0939\u094b\u0917\u0940, admit card \u092f\u0939\u093e\u0901 \u0926\u093f\u0916\u0947\u0917\u093e"})]}):(0,qr.jsx)("div",{className:"grid gap-4",children:l.map(e=>(0,qr.jsxs)("div",{className:"bg-white rounded-xl border-2 overflow-hidden ".concat(e.is_eligible?"border-green-200":"border-amber-200"),children:[(0,qr.jsx)("div",{className:"px-4 py-3 ".concat(e.is_eligible?"bg-green-50":"bg-amber-50"),children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.is_eligible?"bg-green-500":"bg-amber-500"),children:e.is_eligible?(0,qr.jsx)(Km,{className:"w-5 h-5 text-white"}):(0,qr.jsx)($m,{className:"w-5 h-5 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-gray-900",children:e.exam_name}),(0,qr.jsx)("p",{className:"text-sm text-gray-600",children:e.exam_type})]})]}),(0,qr.jsx)("div",{className:"text-right",children:(0,qr.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,qr.jsx)(eh,{className:"w-4 h-4 inline mr-1"}),e.start_date," - ",e.end_date]})})]})}),(0,qr.jsxs)("div",{className:"p-4",children:[e.fee_status&&(0,qr.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,qr.jsx)("span",{className:"text-sm text-gray-600",children:"Fee Status"}),(0,qr.jsxs)("span",{className:"text-sm font-medium ".concat(e.is_eligible?"text-green-600":"text-amber-600"),children:[e.fee_status.paid_percentage,"% Paid"]})]}),(0,qr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,qr.jsx)("div",{className:"h-2 rounded-full ".concat(e.is_eligible?"bg-green-500":"bg-amber-500"),style:{width:"".concat(Math.min(100,e.fee_status.paid_percentage),"%")}})}),!e.is_eligible&&(0,qr.jsxs)("p",{className:"text-xs text-amber-600 mt-2",children:["\u26a0\ufe0f Minimum \u20b9",e.min_amount_required," fee \u091c\u092e\u093e \u0915\u0930\u0947\u0902"]})]}),(0,qr.jsx)("button",{onClick:()=>(async e=>{if(!e.is_eligible)return m(e),f(e.min_amount_required),void p(!0);if(e.is_generated&&e.admit_card)m(e),setTimeout(()=>{window.print()},500);else try{v(!0);const t=await Hr.get("".concat("","/admit-card/generate/").concat(i,"/").concat(e.exam_id,"/").concat(r));t.data.success?(Qt.success("Admit Card generated!"),j()):Qt.error(t.data.message||"Generation failed")}catch($1){Qt.error("Admit card generate \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u092f\u093e")}finally{v(!1)}})(e),disabled:g,className:"w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all ".concat(e.is_eligible?"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-amber-500 hover:bg-amber-600 text-white"),children:g?(0,qr.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.is_eligible?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(xh,{className:"w-5 h-5"}),"Download Admit Card"]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(nH,{className:"w-5 h-5"}),"Pay \u20b9",e.min_amount_required," & Download"]})})]})]},e.exam_id))}),h&&u&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,qr.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Fee Payment Required"}),(0,qr.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4",children:(0,qr.jsxs)("p",{className:"text-amber-800",children:[(0,qr.jsx)(kY,{className:"w-5 h-5 inline mr-2"}),"Admit Card download \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f minimum fee \u091c\u092e\u093e \u0915\u0930\u0947\u0902"]})}),(0,qr.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-gray-600",children:"Total Fee"}),(0,qr.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(t=u.fee_status)||void 0===t?void 0:t.total_fee)||0]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-gray-600",children:"Paid"}),(0,qr.jsxs)("span",{className:"font-medium text-green-600",children:["\u20b9",(null===(a=u.fee_status)||void 0===a?void 0:a.paid_fee)||0]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-gray-600",children:"Pending"}),(0,qr.jsxs)("span",{className:"font-medium text-red-600",children:["\u20b9",(null===(n=u.fee_status)||void 0===n?void 0:n.pending_fee)||0]})]}),(0,qr.jsx)("hr",{}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-gray-900 font-medium",children:"Minimum Required"}),(0,qr.jsxs)("span",{className:"font-bold text-lg text-indigo-600",children:["\u20b9",x]})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)("button",{onClick:()=>p(!1),className:"flex-1 py-3 rounded-xl border-2 border-gray-200 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),(0,qr.jsx)("button",{onClick:async()=>{if(u){v(!0);try{(await Hr.post("".concat("","/admit-card/pay-and-download"),{school_id:i,student_id:r,exam_id:u.exam_id,amount:x,payment_method:"online"})).data.success&&(Qt.success("Payment successful! Admit Card ready"),p(!1),j())}catch($1){Qt.error("Payment failed")}finally{v(!1)}}},disabled:g,className:"flex-1 py-3 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium flex items-center justify-center gap-2",children:g?(0,qr.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(nH,{className:"w-5 h-5"}),"Pay \u20b9",x]})})]})]})}),(null===u||void 0===u?void 0:u.admit_card)&&(0,qr.jsx)("div",{className:"hidden print:block",children:(0,qr.jsx)(bJ,{data:u.admit_card})})]})},jJ="".concat("","/api");function NJ(){var e;const{user:t,logout:a}=Kr(),n=Se(),[r,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),[f,g]=(0,s.useState)({present:0,total:0}),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),[P,O]=(0,s.useState)(!1),[M,T]=(0,s.useState)(!1),[D,I]=(0,s.useState)(!1),[R,L]=(0,s.useState)(null),[F,z]=(0,s.useState)([]),[B,U]=(0,s.useState)(""),[H,q]=(0,s.useState)(null),[V,W]=(0,s.useState)({complaint_to:"teacher",category:"academic",subject:"",description:"",is_anonymous:!1}),[G,K]=(0,s.useState)([]),[Y,J]=(0,s.useState)(!1),[$,Q]=(0,s.useState)(""),[X,Z]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(null),[ae,se]=(0,s.useState)({leave_type:"sick",from_date:"",to_date:"",reason:""}),[ne,re]=(0,s.useState)(!1),[ie,le]=(0,s.useState)(!1),oe=(new Date).toLocaleDateString("hi-IN",{weekday:"long",day:"numeric",month:"long"});(0,s.useEffect)(()=>{ce();localStorage.getItem("studytino_welcome_seen")||(le(!0),localStorage.setItem("studytino_welcome_seen","true"))},[]);const ce=async()=>{i(!0);try{const[t,a,s]=await Promise.allSettled([Hr.get("".concat(jJ,"/student/dashboard")),Hr.get("".concat(jJ,"/student/notices")),Hr.get("".concat(jJ,"/student/homework"))]);if("fulfilled"===t.status){var e;const a=t.value.data;o(a.profile),"blocked"===(null===(e=a.profile)||void 0===e?void 0:e.status)&&re(!0)}d("fulfilled"===a.status?a.value.data:[{id:"1",title:"Winter Break Notice",content:"School closed 25 Dec - 1 Jan",priority:"high",created_at:(new Date).toISOString()},{id:"2",title:"Annual Sports Day",content:"15th January - All must participate",priority:"normal",created_at:(new Date).toISOString()}]),h("fulfilled"===s.status?s.value.data:[{id:"1",subject:"Mathematics",topic:"Exercise 5.3",due_date:"2026-01-04",status:"pending"},{id:"2",subject:"English",topic:"Essay Writing",due_date:"2026-01-05",status:"pending"}]),x([{subject:"Mathematics",completed:60,current:"Quadratic Equations"},{subject:"Science",completed:55,current:"Light Reflection"},{subject:"Hindi",completed:70,current:"\u0928\u0947\u0924\u093e\u091c\u0940 \u0915\u093e \u091a\u0936\u094d\u092e\u093e"},{subject:"English",completed:50,current:"The Hundred Dresses"}]),g({present:85,total:100})}catch(t){console.error("Dashboard fetch error:",t)}finally{i(!1)}},de=async()=>{if(B.trim()&&H)try{const e=await Hr.post("".concat(jJ,"/chat/messages/send"),{group_id:H.id,content:B,sender_id:null===t||void 0===t?void 0:t.id,sender_name:(null===l||void 0===l?void 0:l.name)||(null===t||void 0===t?void 0:t.name),sender_role:"student"});z(t=>[...t,e.data.data]),U("")}catch(e){Qt.error("Failed to send message")}},ue=(0,s.useCallback)(async()=>{if(!$||isNaN($)||Number($)<=0)Qt.error("Please enter a valid amount");else{Z(!0);try{if(!await new Promise(e=>{if(window.Razorpay)return void e(!0);const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}))return Qt.error("Payment gateway loading failed"),void Z(!1);const e=await Hr.post("".concat(jJ,"/razorpay/create-order"),{amount:Math.round(100*Number($)),student_id:null===t||void 0===t?void 0:t.id,student_name:(null===l||void 0===l?void 0:l.name)||(null===t||void 0===t?void 0:t.name),school_id:(null===l||void 0===l?void 0:l.school_id)||"default",fee_type:"tuition",description:"Fee Payment - ".concat(null===l||void 0===l?void 0:l.name)}),{order_id:a,key_id:s,amount:n}=e.data,r={key:s,amount:n,currency:"INR",name:"Schooltino",description:"Fee Payment - ".concat(null===l||void 0===l?void 0:l.class_name),order_id:a,handler:async e=>{try{await Hr.post("".concat(jJ,"/razorpay/verify-payment"),{razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,student_id:null===t||void 0===t?void 0:t.id,school_id:(null===l||void 0===l?void 0:l.school_id)||"default"}),Qt.success("\ud83c\udf89 Payment successful!"),J(!1),Q("")}catch(a){Qt.error("Payment verification failed. Please contact school.")}},prefill:{name:(null===l||void 0===l?void 0:l.name)||(null===t||void 0===t?void 0:t.name),email:(null===t||void 0===t?void 0:t.email)||"",contact:(null===l||void 0===l?void 0:l.mobile)||""},theme:{color:"#4F46E5"},modal:{ondismiss:()=>{Z(!1)}}};new window.Razorpay(r).open()}catch(e){Qt.error("Failed to initiate payment")}finally{Z(!1)}}},[$,t,l]),me=()=>{a(),n("/login")},he=m.filter(e=>"pending"===e.status).length,pe=c.filter(e=>!e.is_read).length;return r?(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 to-orange-50 flex items-center justify-center",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-amber-600"})}):ne?(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-orange-50 flex items-center justify-center p-4",children:(0,qr.jsxs)(Qc,{className:"max-w-md w-full text-center p-8",children:[(0,qr.jsx)($m,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,qr.jsx)("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Account Blocked"}),(0,qr.jsx)("p",{className:"text-slate-600 mb-6",children:"Please contact school office."}),(0,qr.jsxs)(Dl,{onClick:me,variant:"outline",children:[(0,qr.jsx)(rH,{className:"w-4 h-4 mr-2"}),"Logout"]})]})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 to-orange-50","data-testid":"studytino-dashboard",children:[(0,qr.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-amber-100 shadow-sm",children:(0,qr.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-3",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ic,{className:"w-6 h-6 md:w-7 md:h-7 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"font-bold text-slate-900 text-base md:text-lg",children:(null===l||void 0===l?void 0:l.name)||"Student"}),(0,qr.jsxs)("p",{className:"text-xs md:text-sm text-slate-500",children:[(null===l||void 0===l?void 0:l.class_name)||"Class"," \u2022 ",(null===l||void 0===l?void 0:l.school_name)||"School"]})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>C(!0),className:"text-purple-600",children:(0,qr.jsx)(lJ,{className:"w-5 h-5"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>w(!0),children:(0,qr.jsx)(wh,{className:"w-5 h-5 text-slate-500"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:me,className:"text-slate-400",children:(0,qr.jsx)(rH,{className:"w-5 h-5"})})]})]})})}),(0,qr.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-4 md:py-6 space-y-4 md:space-y-6 pb-20",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0",children:(0,qr.jsx)(td,{className:"p-4 md:p-6",children:(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-amber-100 text-sm",children:(()=>{const e=(new Date).getHours();return e<12?"Good Morning":e<17?"Good Afternoon":"Good Evening"})()}),(0,qr.jsxs)("h2",{className:"text-xl md:text-2xl font-bold mt-1",children:[(null===l||void 0===l||null===(e=l.name)||void 0===e?void 0:e.split(" ")[0])||"Student","!"]}),(0,qr.jsx)("p",{className:"text-amber-100 text-sm mt-1",children:oe})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-2 md:gap-4 mt-4 md:mt-0",children:[(0,qr.jsxs)("div",{className:"bg-white/20 rounded-lg p-2 md:p-4 text-center",children:[(0,qr.jsxs)("p",{className:"text-xl md:text-2xl font-bold",children:[f.present,"%"]}),(0,qr.jsx)("p",{className:"text-xs text-amber-100",children:"Attendance"})]}),(0,qr.jsxs)("div",{className:"bg-white/20 rounded-lg p-2 md:p-4 text-center",children:[(0,qr.jsx)("p",{className:"text-xl md:text-2xl font-bold",children:he}),(0,qr.jsx)("p",{className:"text-xs text-amber-100",children:"Homework"})]}),(0,qr.jsxs)("div",{className:"bg-white/20 rounded-lg p-2 md:p-4 text-center",children:[(0,qr.jsx)("p",{className:"text-xl md:text-2xl font-bold",children:c.length}),(0,qr.jsx)("p",{className:"text-xs text-amber-100",children:"Notices"})]})]})]})})}),(0,qr.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2 md:gap-3",children:[{icon:pJ,label:"Admit Card",color:"bg-indigo-600",action:()=>I(!0)},{icon:Zm,label:"Pay Fees",color:"bg-green-500",action:()=>J(!0)},{icon:oH,label:"Class Chat",color:"bg-blue-500",action:()=>(async()=>{try{const e=await Hr.get("".concat(jJ,"/chat/groups/class/").concat(null===l||void 0===l?void 0:l.class_id,"?school_id=").concat(null===l||void 0===l?void 0:l.school_id));q(e.data);const t=await Hr.get("".concat(jJ,"/chat/messages/").concat(e.data.id,"?limit=50"));z(t.data.messages||[]),A(!0)}catch(e){Qt.error("Failed to load chat")}})()},{icon:xJ,label:"Complaint",color:"bg-rose-500",action:()=>O(!0)},{icon:fJ,label:"Activities",color:"bg-amber-500",action:()=>(async()=>{try{const e=await Hr.get("".concat(jJ,"/activities/student/").concat(null===t||void 0===t?void 0:t.id));K(e.data.activities||[]),T(!0)}catch(e){K([]),T(!0)}})()},{icon:gJ,label:"Leave",color:"bg-purple-500",action:()=>b(!0)},{icon:th,label:"AI Help",color:"bg-violet-500",action:()=>_(!0)},{icon:eH,label:"Profile",color:"bg-teal-500",action:()=>w(!0)}].map((e,t)=>(0,qr.jsxs)("button",{onClick:e.action||(()=>n(e.path)),className:"flex flex-col items-center p-2 md:p-3 bg-white rounded-xl border border-slate-100 hover:shadow-md transition-all","data-testid":"quick-action-".concat(e.label.toLowerCase().replace(" ","-")),children:[(0,qr.jsx)("div",{className:"w-8 h-8 md:w-10 md:h-10 ".concat(e.color," rounded-xl flex items-center justify-center mb-1 md:mb-2"),children:(0,qr.jsx)(e.icon,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),(0,qr.jsx)("span",{className:"text-[10px] md:text-xs font-medium text-slate-700 text-center leading-tight",children:e.label})]},t))}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,qr.jsx)(Qc,{className:"border-0 shadow-sm",children:(0,qr.jsxs)(td,{className:"p-4 md:p-5",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Oh,{className:"w-4 h-4 text-purple-500"}),"Notices",pe>0&&(0,qr.jsx)(eJ,{className:"bg-red-500 text-white text-xs",children:pe})]}),(0,qr.jsxs)(Dl,{variant:"ghost",size:"sm",className:"text-amber-600 text-xs",children:["View All ",(0,qr.jsx)(qc,{className:"w-3 h-3 ml-1"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[c.slice(0,3).map(e=>(0,qr.jsx)("div",{onClick:()=>{L(e),j(!0)},className:"p-3 rounded-lg cursor-pointer transition-all ".concat("high"===e.priority?"bg-red-50 border border-red-100":"bg-slate-50 hover:bg-slate-100"),children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900 text-sm",children:e.title}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:e.content})]}),"high"===e.priority&&(0,qr.jsx)(eJ,{className:"bg-red-500 text-white text-[10px]",children:"Important"})]})},e.id)),0===c.length&&(0,qr.jsx)("p",{className:"text-center text-slate-400 py-4 text-sm",children:"No notices yet"})]})]})}),(0,qr.jsx)(Qc,{className:"border-0 shadow-sm",children:(0,qr.jsxs)(td,{className:"p-4 md:p-5",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(sh,{className:"w-4 h-4 text-blue-500"}),"Homework",he>0&&(0,qr.jsx)(eJ,{className:"bg-amber-500 text-white text-xs",children:he})]})}),(0,qr.jsxs)("div",{className:"space-y-2",children:[m.slice(0,3).map(e=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900 text-sm",children:e.subject}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.topic})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsx)(eJ,{className:"pending"===e.status?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700",children:"pending"===e.status?"Pending":"Done"}),(0,qr.jsxs)("p",{className:"text-[10px] text-slate-400 mt-1",children:["Due: ",new Date(e.due_date).toLocaleDateString("hi-IN")]})]})]},e.id)),0===m.length&&(0,qr.jsx)("p",{className:"text-center text-slate-400 py-4 text-sm",children:"No homework assigned"})]})]})})]}),(0,qr.jsx)(Qc,{className:"border-0 shadow-sm",children:(0,qr.jsxs)(td,{className:"p-4",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(Eh,{className:"w-4 h-4 text-indigo-500"}),"Syllabus Progress"]}),(0,qr.jsx)("div",{className:"space-y-3",children:p.map((e,t)=>(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,qr.jsx)("span",{className:"font-medium text-slate-700",children:e.subject}),(0,qr.jsxs)("span",{className:"text-slate-500",children:[e.completed,"%"]})]}),(0,qr.jsx)("div",{className:"w-full bg-slate-100 rounded-full h-2",children:(0,qr.jsx)("div",{className:"h-2 rounded-full ".concat(0===t?"bg-blue-500":1===t?"bg-green-500":2===t?"bg-purple-500":"bg-amber-500"),style:{width:"".concat(e.completed,"%")}})}),(0,qr.jsxs)("p",{className:"text-xs text-slate-400",children:["Current: ",e.current]})]},t))})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white border-0 cursor-pointer hover:shadow-lg transition-all",onClick:()=>n("/app/exams"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(cY,{className:"w-6 h-6"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:"Take Online Exam"}),(0,qr.jsx)("p",{className:"text-sm text-indigo-100",children:"Practice tests available"})]})]}),(0,qr.jsx)(qc,{className:"w-6 h-6"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0",children:(0,qr.jsxs)(td,{className:"p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,qr.jsx)(th,{className:"w-8 h-8"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-bold",children:"StudyTino AI"}),(0,qr.jsx)("p",{className:"text-xs text-amber-100",children:"Your personal study assistant"})]})]}),(0,qr.jsxs)(Dl,{onClick:()=>C(!0),className:"w-full bg-white text-amber-700 hover:bg-amber-50",children:[(0,qr.jsx)(lJ,{className:"w-4 h-4 mr-2"}),"Ask Tino AI"]})]})})]}),(0,qr.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 z-50",children:(0,qr.jsx)("div",{className:"grid grid-cols-5 gap-1 p-2 max-w-lg mx-auto",children:[{icon:aJ,label:"Home",active:!0},{icon:sh,label:"Study",path:"/app/exams"},{icon:Oh,label:"Notices"},{icon:Zm,label:"Fees",path:"/studytino/fees"},{icon:th,label:"AI",action:()=>C(!0)}].map((e,t)=>(0,qr.jsxs)("button",{onClick:e.action||(e.path?()=>n(e.path):void 0),className:"flex flex-col items-center gap-1 p-2 rounded-lg ".concat(e.active?"text-amber-600 bg-amber-50":"text-slate-500"),children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:e.label})]},t))})}),(0,qr.jsx)(Im,{open:v,onOpenChange:b,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Apply for Leave"})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Leave Type"}),(0,qr.jsxs)("select",{value:ae.leave_type,onChange:e=>se(t=>u(u({},t),{},{leave_type:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"sick",children:"Sick Leave"}),(0,qr.jsx)("option",{value:"personal",children:"Personal"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"From"}),(0,qr.jsx)(Rl,{type:"date",value:ae.from_date,onChange:e=>se(t=>u(u({},t),{},{from_date:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"To"}),(0,qr.jsx)(Rl,{type:"date",value:ae.to_date,onChange:e=>se(t=>u(u({},t),{},{to_date:e.target.value}))})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Reason"}),(0,qr.jsx)(_Y,{value:ae.reason,onChange:e=>se(t=>u(u({},t),{},{reason:e.target.value})),placeholder:"Enter reason..."})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(ae.from_date&&ae.reason)try{await Hr.post("".concat(jJ,"/student/leaves"),ae),Qt.success("Leave application submitted!"),b(!1)}catch(e){Qt.error("Failed to apply leave")}else Qt.error("Please fill required fields")},className:"w-full bg-amber-600 hover:bg-amber-700",children:[(0,qr.jsx)(sJ,{className:"w-4 h-4 mr-2"}),"Submit"]})]})]})}),(0,qr.jsx)(Im,{open:y,onOpenChange:j,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Notice Details"})}),R&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)("h3",{className:"font-bold text-lg",children:R.title}),(0,qr.jsx)("p",{className:"text-slate-600",children:R.content}),(0,qr.jsxs)("p",{className:"text-sm text-slate-400",children:["Posted: ",new Date(R.created_at).toLocaleDateString("hi-IN")]})]})]})}),(0,qr.jsx)(Im,{open:N,onOpenChange:w,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"My Profile"})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-8 h-8 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-bold text-lg",children:null===l||void 0===l?void 0:l.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:null===l||void 0===l?void 0:l.class_name})]})]}),(0,qr.jsxs)("div",{className:"space-y-2 p-4 bg-slate-50 rounded-xl text-sm",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Student ID"}),(0,qr.jsx)("span",{className:"font-medium",children:null===l||void 0===l?void 0:l.student_id})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Admission No"}),(0,qr.jsx)("span",{className:"font-medium",children:null===l||void 0===l?void 0:l.admission_no})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Contact"}),(0,qr.jsx)("span",{className:"font-medium",children:null===l||void 0===l?void 0:l.mobile})]})]})]})]})}),(0,qr.jsx)(Im,{open:S,onOpenChange:_,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(th,{className:"w-5 h-5 text-amber-500"}),"StudyTino AI Helper"]})}),(0,qr.jsxs)("div",{className:"text-center py-4",children:[(0,qr.jsx)("p",{className:"text-slate-500 mb-4",children:"Ask any study-related question!"}),(0,qr.jsxs)(Dl,{onClick:()=>{_(!1),C(!0)},className:"bg-amber-600 hover:bg-amber-700",children:[(0,qr.jsx)(lJ,{className:"w-4 h-4 mr-2"}),"Talk to Tino AI"]})]})]})}),(0,qr.jsx)(Im,{open:E,onOpenChange:A,children:(0,qr.jsxs)(zm,{className:"max-w-md h-[80vh] flex flex-col",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(oH,{className:"w-5 h-5 text-blue-500"}),(null===H||void 0===H?void 0:H.name)||"Class Chat"]})}),(0,qr.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 p-2 bg-slate-50 rounded-lg",children:0===F.length?(0,qr.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,qr.jsx)(Lc,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:"No messages yet. Start the conversation!"})]}):F.map((e,a)=>(0,qr.jsx)("div",{className:"flex ".concat(e.sender_id===(null===t||void 0===t?void 0:t.id)?"justify-end":"justify-start"),children:(0,qr.jsxs)("div",{className:"max-w-[75%] rounded-xl px-3 py-2 ".concat(e.sender_id===(null===t||void 0===t?void 0:t.id)?"bg-blue-500 text-white rounded-br-sm":"bg-white border rounded-bl-sm"),children:[e.sender_id!==(null===t||void 0===t?void 0:t.id)&&(0,qr.jsx)("p",{className:"text-xs font-medium text-blue-600 mb-1",children:e.sender_name}),(0,qr.jsx)("p",{className:"text-sm",children:e.content}),(0,qr.jsx)("p",{className:"text-xs mt-1 ".concat(e.sender_id===(null===t||void 0===t?void 0:t.id)?"text-blue-100":"text-slate-400"),children:new Date(e.created_at).toLocaleTimeString("hi-IN",{hour:"2-digit",minute:"2-digit"})})]})},a))}),(0,qr.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,qr.jsx)(Rl,{value:B,onChange:e=>U(e.target.value),placeholder:"Type a message...",onKeyPress:e=>"Enter"===e.key&&de()}),(0,qr.jsx)(Dl,{onClick:de,className:"bg-blue-500 hover:bg-blue-600",children:(0,qr.jsx)(sJ,{className:"w-4 h-4"})})]})]})}),(0,qr.jsx)(Im,{open:P,onOpenChange:O,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(xJ,{className:"w-5 h-5 text-rose-500"}),"Submit Complaint"]})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),V.subject&&V.description)try{await Hr.post("".concat(jJ,"/complaints/create"),u({student_id:null===t||void 0===t?void 0:t.id,student_name:(null===l||void 0===l?void 0:l.name)||(null===t||void 0===t?void 0:t.name),class_id:null===l||void 0===l?void 0:l.class_id,class_name:null===l||void 0===l?void 0:l.class_name,school_id:null===l||void 0===l?void 0:l.school_id},V)),Qt.success("Complaint submitted successfully"),O(!1),W({complaint_to:"teacher",category:"academic",subject:"",description:"",is_anonymous:!1})}catch(a){Qt.error("Failed to submit complaint")}else Qt.error("Please fill all fields")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Complaint To"}),(0,qr.jsxs)("select",{value:V.complaint_to,onChange:e=>W(t=>u(u({},t),{},{complaint_to:e.target.value})),className:"w-full h-10 rounded-lg border px-3",children:[(0,qr.jsx)("option",{value:"teacher",children:"Class Teacher"}),(0,qr.jsx)("option",{value:"admin",children:"Admin/Principal"}),(0,qr.jsx)("option",{value:"both",children:"Both"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Category"}),(0,qr.jsxs)("select",{value:V.category,onChange:e=>W(t=>u(u({},t),{},{category:e.target.value})),className:"w-full h-10 rounded-lg border px-3",children:[(0,qr.jsx)("option",{value:"academic",children:"Academic Issues"}),(0,qr.jsx)("option",{value:"bullying",children:"Bullying/Harassment"}),(0,qr.jsx)("option",{value:"facilities",children:"Facilities"}),(0,qr.jsx)("option",{value:"teacher",children:"Teacher Related"}),(0,qr.jsx)("option",{value:"fees",children:"Fees Related"}),(0,qr.jsx)("option",{value:"transport",children:"Transport"}),(0,qr.jsx)("option",{value:"food",children:"Food/Canteen"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Subject *"}),(0,qr.jsx)(Rl,{value:V.subject,onChange:e=>W(t=>u(u({},t),{},{subject:e.target.value})),placeholder:"Brief title of your complaint",required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Description *"}),(0,qr.jsx)(_Y,{value:V.description,onChange:e=>W(t=>u(u({},t),{},{description:e.target.value})),placeholder:"Describe your complaint in detail...",rows:4,required:!0})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{type:"checkbox",id:"anonymous",checked:V.is_anonymous,onChange:e=>W(t=>u(u({},t),{},{is_anonymous:e.target.checked})),className:"rounded"}),(0,qr.jsx)("label",{htmlFor:"anonymous",className:"text-sm text-slate-600",children:"Submit anonymously"})]}),(0,qr.jsx)(Dl,{type:"submit",className:"w-full bg-rose-500 hover:bg-rose-600",children:"Submit Complaint"})]})]})}),(0,qr.jsx)(Im,{open:M,onOpenChange:T,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(fJ,{className:"w-5 h-5 text-amber-500"}),"My Activities & Sports"]})}),(0,qr.jsx)("div",{className:"space-y-4",children:0===G.length?(0,qr.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,qr.jsx)(vJ,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:"You are not enrolled in any activities yet."}),(0,qr.jsx)("p",{className:"text-sm mt-2",children:"Ask your teacher to enroll you!"})]}):(0,qr.jsx)("div",{className:"space-y-2",children:G.map((e,t)=>(0,qr.jsx)("div",{className:"p-3 bg-slate-50 rounded-lg",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(fJ,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.name}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.category," \u2022 ",e.schedule]})]})]})},t))})})]})}),(0,qr.jsx)(Im,{open:Y,onOpenChange:J,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Zm,{className:"w-5 h-5 text-green-500"}),"Pay School Fees"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl",children:[(0,qr.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"Secure Payment via Razorpay"}),(0,qr.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"UPI, Cards, Net Banking accepted"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Amount (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:$,onChange:e=>Q(e.target.value),placeholder:"Enter amount to pay",className:"text-lg font-semibold"})]}),(0,qr.jsx)("div",{className:"flex gap-2 flex-wrap",children:[500,1e3,2e3,5e3].map(e=>(0,qr.jsxs)("button",{onClick:()=>Q(String(e)),className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 hover:border-green-500 hover:bg-green-50 transition-colors",children:["\u20b9",e.toLocaleString()]},e))}),(0,qr.jsx)(Dl,{onClick:ue,disabled:X||!$,className:"w-full bg-green-600 hover:bg-green-700 text-white h-12",children:X?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(nH,{className:"w-4 h-4 mr-2"}),"Pay \u20b9",$?Number($).toLocaleString():"0"]})}),(0,qr.jsx)("p",{className:"text-xs text-center text-slate-400",children:"Powered by Razorpay \u2022 100% Secure"})]})]})}),(0,qr.jsx)(Im,{open:D,onOpenChange:I,children:(0,qr.jsxs)(zm,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(pJ,{className:"w-5 h-5 text-indigo-600"}),"Admit Cards / \u092a\u094d\u0930\u0935\u0947\u0936 \u092a\u0924\u094d\u0930"]})}),(0,qr.jsx)(yJ,{studentId:(null===t||void 0===t?void 0:t.id)||(null===l||void 0===l?void 0:l.id),schoolId:(null===t||void 0===t?void 0:t.school_id)||(null===l||void 0===l?void 0:l.school_id)})]})}),(0,qr.jsx)(Im,{open:ie,onOpenChange:le,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2 text-xl",children:[(0,qr.jsx)("span",{className:"text-2xl",children:"\ud83c\udf89"}),"StudyTino \u092e\u0947\u0902 \u0906\u092a\u0915\u093e \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948!"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("p",{className:"text-slate-600",children:["\u0928\u092e\u0938\u094d\u0924\u0947 ",(null===l||void 0===l?void 0:l.name)||(null===t||void 0===t?void 0:t.name)||"Student","! \u0905\u092c \u0906\u092a StudyTino App \u0938\u0947 \u0905\u092a\u0928\u0940 \u092a\u0922\u093c\u093e\u0908 \u0915\u094b \u0914\u0930 \u0906\u0938\u093e\u0928 \u092c\u0928\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"]}),(0,qr.jsxs)("div",{className:"space-y-3 bg-indigo-50 rounded-xl p-4",children:[(0,qr.jsx)("h4",{className:"font-semibold text-indigo-800",children:"\u092f\u0939\u093e\u0901 \u0906\u092a \u0915\u094d\u092f\u093e-\u0915\u094d\u092f\u093e \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:"}),(0,qr.jsxs)("div",{className:"grid gap-2",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"\u0905\u092a\u0928\u0940 Attendance \u0926\u0947\u0916\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Homework \u0914\u0930 Assignments \u092a\u093e\u090f\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"School Notices \u092a\u0922\u093c\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Exam Results \u0914\u0930 Report Card \u0926\u0947\u0916\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Online Fees \u092d\u0941\u0917\u0924\u093e\u0928 \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Leave Application \u092d\u0947\u091c\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"AI \u0938\u0947 \u092a\u0922\u093c\u093e\u0908 \u092e\u0947\u0902 Help \u0932\u0947\u0902 (Voice \u092e\u0947\u0902 \u092d\u0940!)"})]})]})]}),(0,qr.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-sm",children:(0,qr.jsxs)("p",{className:"text-amber-800",children:[(0,qr.jsx)("strong",{children:"\ud83d\udca1 Tip:"})," \u0928\u0940\u091a\u0947 \u0926\u093e\u0908\u0902 \u0913\u0930 Mic button \u0938\u0947 Voice \u092e\u0947\u0902 \u092d\u0940 \u092a\u0942\u091b \u0938\u0915\u0924\u0947 \u0939\u0948\u0902!"]})}),(0,qr.jsx)(Dl,{onClick:()=>le(!1),className:"w-full bg-indigo-600 hover:bg-indigo-700",children:"\u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902 \u2192"})]})]})}),(0,qr.jsx)(dJ,{isOpen:k,onClose:()=>C(!1)})]})}"".concat("","/api");const wJ=Dc("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),SJ=Dc("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),_J="".concat("","/api");function kJ(){var e;const{user:t}=Kr(),a=Se(),[n,r]=(0,s.useState)(!1),[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)([]),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;p.current=new e,p.current.continuous=!1,p.current.interimResults=!0,p.current.lang="hi-IN",p.current.onresult=e=>{const t=e.resultIndex,a=e.results[t][0].transcript;l(a)},p.current.onend=()=>{r(!1),i&&x(i)},p.current.onerror=e=>{console.error("Speech error:",e.error),r(!1),Qt.error("\u092e\u093e\u0907\u0915 \u090f\u0915\u094d\u0938\u0947\u0938 \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e")}}return()=>{p.current&&p.current.stop()}},[i]);const x=async e=>{if(e.trim()){u(!0);try{var t;const s=(await Hr.post("".concat(_J,"/ai/voice-command"),{command:e})).data;if(c(s),h(t=>[...t,{command:e,response:s}]),"speechSynthesis"in window){const e=new SpeechSynthesisUtterance(s.message);e.lang="hi-IN",window.speechSynthesis.speak(e)}"navigate"===s.action&&null!==(t=s.data)&&void 0!==t&&t.target&&setTimeout(()=>{a("/".concat(s.data.target))},2e3)}catch(s){Qt.error("Command process \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u092f\u093e")}finally{u(!1)}}},f=[{icon:wJ,label:"Dashboard dikhao",command:"dashboard dikhao"},{icon:Lc,label:"Students list",command:"students ki list dikhao"},{icon:tJ,label:"Attendance mark karo",command:"attendance mark karna hai"},{icon:Zm,label:"Fee reminder bhejo",command:"fee reminder bhejo sabko"},{icon:Oh,label:"Notice publish karo",command:"new notice publish karo"},{icon:hh,label:"Pamphlet banao",command:"admission pamphlet banao"},{icon:cY,label:"Report card banao",command:"report card generate karo"},{icon:wh,label:"Settings kholo",command:"settings page kholo"}];return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"voice-assistant",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 rounded-2xl p-6 text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,qr.jsx)(lJ,{className:"w-8 h-8"}),"AI Voice Assistant"]}),(0,qr.jsx)("p",{className:"text-violet-100 mt-2",children:"\u092c\u094b\u0932\u094b \u0914\u0930 \u0915\u0930\u0935\u093e\u0913 - Schooltino \u0915\u094b voice \u0938\u0947 control \u0915\u0930\u094b"})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsx)("p",{className:"text-sm text-violet-200",children:"Logged in as"}),(0,qr.jsx)("p",{className:"font-semibold",children:null===t||void 0===t?void 0:t.name})]})]})}),(0,qr.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 text-center",children:[(0,qr.jsxs)("div",{className:"relative inline-block mb-6",children:[(0,qr.jsx)("button",{onClick:n?()=>{p.current&&p.current.stop(),r(!1)}:()=>{p.current?(l(""),r(!0),p.current.start()):Qt.error("Voice recognition not supported in this browser")},disabled:d,className:"w-32 h-32 rounded-full flex items-center justify-center transition-all duration-300 ".concat(n?"bg-red-500 animate-pulse shadow-lg shadow-red-500/50":"bg-gradient-to-br from-violet-500 to-purple-600 hover:shadow-lg hover:shadow-purple-500/50"),children:d?(0,qr.jsx)(Bc,{className:"w-12 h-12 text-white animate-spin"}):n?(0,qr.jsx)(iJ,{className:"w-12 h-12 text-white"}):(0,qr.jsx)(lJ,{className:"w-12 h-12 text-white"})}),n&&(0,qr.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-red-500 animate-ping"})]}),(0,qr.jsx)("p",{className:"text-lg font-medium text-slate-700 mb-4",children:n?"\ud83c\udf99\ufe0f \u0938\u0941\u0928 \u0930\u0939\u093e \u0939\u0942\u0902...":d?"\ud83e\udd14 \u0938\u092e\u091d \u0930\u0939\u093e \u0939\u0942\u0902...":"\ud83d\udc46 Tap to speak"}),i&&(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4 mb-4 max-w-lg mx-auto",children:[(0,qr.jsx)("p",{className:"text-slate-600 text-sm mb-1",children:"\u0906\u092a\u0928\u0947 \u0915\u0939\u093e:"}),(0,qr.jsxs)("p",{className:"text-lg font-medium text-slate-900",children:['"',i,'"']})]}),o&&(0,qr.jsx)("div",{className:"rounded-xl p-4 mb-4 max-w-lg mx-auto ".concat("error"===o.action?"bg-red-50 border border-red-200":"bg-emerald-50 border border-emerald-200"),children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)(SJ,{className:"w-5 h-5 mt-0.5 ".concat("error"===o.action?"text-red-600":"text-emerald-600")}),(0,qr.jsxs)("div",{className:"text-left",children:[(0,qr.jsx)("p",{className:"font-medium ".concat("error"===o.action?"text-red-800":"text-emerald-800"),children:o.message}),"navigate"===o.action&&(null===(e=o.data)||void 0===e?void 0:e.target)&&(0,qr.jsxs)("p",{className:"text-sm text-emerald-600 mt-1",children:["\u27a1\ufe0f Redirecting to ",o.data.target,"..."]})]})]})}),(0,qr.jsxs)("div",{className:"flex gap-2 max-w-lg mx-auto",children:[(0,qr.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"\u092f\u093e \u092f\u0939\u093e\u0901 type \u0915\u0930\u094b...",className:"flex-1 px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&x(i)}),(0,qr.jsx)(Dl,{onClick:()=>x(i),disabled:!i||d,className:"bg-purple-600 hover:bg-purple-700",children:(0,qr.jsx)(sJ,{className:"w-5 h-5"})})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 mb-4",children:"\u26a1 Quick Commands"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:f.map((e,t)=>(0,qr.jsxs)("button",{onClick:()=>{l(e.command),x(e.command)},className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50 hover:bg-purple-50 hover:border-purple-200 border border-transparent transition-all text-left",children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5 text-purple-600"}),(0,qr.jsx)("span",{className:"text-sm font-medium text-slate-700",children:e.label})]},t))})]}),m.length>0&&(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 mb-4",children:"\ud83d\udcdc Recent Commands"}),(0,qr.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:m.slice(-5).reverse().map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsx)(lJ,{className:"w-4 h-4 text-purple-600 mt-1"}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-sm font-medium text-slate-900",children:['"',e.command,'"']}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.response.message})]})]},t))})]}),(0,qr.jsxs)("div",{className:"bg-gradient-to-br from-violet-50 to-purple-50 rounded-xl p-6 border border-violet-200",children:[(0,qr.jsx)("h3",{className:"font-semibold text-violet-900 mb-3",children:"\ud83d\udca1 Tips"}),(0,qr.jsxs)("ul",{className:"text-sm text-violet-700 space-y-1",children:[(0,qr.jsx)("li",{children:"\u2022 Hindi, English \u092f\u093e Hinglish \u092e\u0947\u0902 \u092c\u094b\u0932 \u0938\u0915\u0924\u0947 \u0939\u094b"}),(0,qr.jsx)("li",{children:'\u2022 "Dashboard dikhao", "Attendance mark karo" \u091c\u0948\u0938\u0947 commands use \u0915\u0930\u094b'}),(0,qr.jsx)("li",{children:"\u2022 AI confirm \u0915\u0930\u0947\u0917\u093e action \u0932\u0947\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947"}),(0,qr.jsx)("li",{children:"\u2022 Voice response \u0938\u0941\u0928\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f speaker on \u0930\u0916\u094b"})]})]})]})}const CJ=Dc("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),EJ=Dc("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),AJ=Dc("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),PJ=Dc("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),OJ="".concat("","/api");function MJ(){const{user:e}=Kr(),[t,a]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)("all"),[d,m]=(0,s.useState)("grid"),[h,p]=(0,s.useState)(null),[x,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),[w,S]=(0,s.useState)({file:null,category:"gallery",title:"",description:""}),_=(0,s.useCallback)(async()=>{try{const e="all"!==o?{category:o}:{},t=await Hr.get("".concat(OJ,"/images"),{params:e});a(t.data)}catch(e){Qt.error("Failed to load images")}finally{r(!1)}},[o]);(0,s.useEffect)(()=>{_()},[_]);const k=async e=>{if(window.confirm("Are you sure you want to delete this image?"))try{await Hr.delete("".concat(OJ,"/images/").concat(e)),Qt.success("Image deleted"),_(),p(null)}catch(t){Qt.error("Delete failed")}},C=e=>{const t="".concat("").concat(e.url),a=encodeURIComponent("Check out this image: ".concat(e.title||"School Image")),s="https://wa.me/?text=".concat(a,"%20").concat(encodeURIComponent(t));window.open(s,"_blank")},E=async e=>{y(!0),v(!0),N(null);try{const t=new FormData;t.append("image_id",e.id),t.append("content_type","admission_pamphlet"),t.append("school_name","Our School"),t.append("additional_text","Create a professional admission pamphlet using this school image");const a=await Hr.post("".concat(OJ,"/ai/generate-from-image"),t);N(a.data),Qt.success("AI content generated!")}catch(t){Qt.error("AI generation failed")}finally{y(!1)}};return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"image-gallery",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-pink-600 to-rose-600 rounded-2xl p-6 text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,qr.jsx)(Ph,{className:"w-8 h-8"}),"Image Gallery"]}),(0,qr.jsx)("p",{className:"text-pink-100 mt-2",children:"Upload, manage & share school images"})]}),(0,qr.jsxs)(Dl,{onClick:()=>f(!0),className:"bg-white text-pink-600 hover:bg-pink-50",children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,qr.jsx)(wc,{value:o,onValueChange:c,children:(0,qr.jsx)(Sc,{className:"bg-slate-100",children:[{id:"all",name:"All Images"},{id:"gallery",name:"Gallery"},{id:"event",name:"Events"},{id:"notice",name:"Notices"},{id:"student",name:"Students"},{id:"staff",name:"Staff"}].map(e=>(0,qr.jsx)(_c,{value:e.id,className:"data-[state=active]:bg-pink-600 data-[state=active]:text-white",children:e.name},e.id))})}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{variant:"grid"===d?"default":"outline",size:"sm",onClick:()=>m("grid"),children:(0,qr.jsx)(CJ,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{variant:"list"===d?"default":"outline",size:"sm",onClick:()=>m("list"),children:(0,qr.jsx)(EJ,{className:"w-4 h-4"})})]})]})}),n?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-pink-600"})}):0===t.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(AJ,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No images found"}),(0,qr.jsxs)(Dl,{onClick:()=>f(!0),className:"mt-4",children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Upload First Image"]})]}):"grid"===d?(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(e=>(0,qr.jsxs)("div",{className:"group relative bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-lg transition-all cursor-pointer",onClick:()=>p(e),children:[(0,qr.jsx)("img",{src:"".concat("").concat(e.url),alt:e.title,className:"w-full h-48 object-cover"}),(0,qr.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,qr.jsx)(Dl,{size:"sm",variant:"secondary",onClick:t=>{t.stopPropagation(),C(e)},children:(0,qr.jsx)(PJ,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{size:"sm",variant:"secondary",onClick:t=>{t.stopPropagation(),E(e)},children:(0,qr.jsx)(hh,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{size:"sm",variant:"destructive",onClick:t=>{t.stopPropagation(),k(e.id)},children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]}),(0,qr.jsxs)("div",{className:"p-3",children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900 truncate",children:e.title||e.original_name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 capitalize",children:e.category})]})]},e.id))}):(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 divide-y divide-slate-100",children:t.map(e=>(0,qr.jsxs)("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50",children:[(0,qr.jsx)("img",{src:"".concat("").concat(e.url),alt:e.title,className:"w-20 h-20 object-cover rounded-lg"}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.title||e.original_name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 capitalize",children:e.category})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",onClick:()=>C(e),children:[(0,qr.jsx)(PJ,{className:"w-4 h-4 mr-1"}),"Share"]}),(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",onClick:()=>E(e),children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-1"}),"AI"]}),(0,qr.jsx)(Dl,{size:"sm",variant:"destructive",onClick:()=>k(e.id),children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})]},e.id))}),(0,qr.jsx)(Im,{open:x,onOpenChange:f,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Upload Image"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),w.file){l(!0);try{const e=new FormData;e.append("file",w.file),e.append("category",w.category),e.append("title",w.title||w.file.name),e.append("description",w.description),await Hr.post("".concat(OJ,"/images/upload"),e,{headers:{"Content-Type":"multipart/form-data"}}),Qt.success("Image uploaded successfully!"),f(!1),S({file:null,category:"gallery",title:"",description:""}),_()}catch(t){Qt.error("Upload failed")}finally{l(!1)}}else Qt.error("Please select an image")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Select Image"}),(0,qr.jsx)(Rl,{type:"file",accept:"image/*",onChange:e=>S(t=>u(u({},t),{},{file:e.target.files[0]})),required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Category"}),(0,qr.jsxs)("select",{value:w.category,onChange:e=>S(t=>u(u({},t),{},{category:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"gallery",children:"Gallery"}),(0,qr.jsx)("option",{value:"event",children:"Event"}),(0,qr.jsx)("option",{value:"notice",children:"Notice"}),(0,qr.jsx)("option",{value:"student",children:"Student"}),(0,qr.jsx)("option",{value:"staff",children:"Staff"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Title (optional)"}),(0,qr.jsx)(Rl,{value:w.title,onChange:e=>S(t=>u(u({},t),{},{title:e.target.value})),placeholder:"Image title"})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full",disabled:i,children:[i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Upload"]})]})]})}),(0,qr.jsx)(Im,{open:!!h,onOpenChange:()=>p(null),children:(0,qr.jsx)(zm,{className:"max-w-3xl",children:h&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)("img",{src:"".concat("").concat(h.url),alt:h.title,className:"w-full h-auto max-h-[60vh] object-contain rounded-lg"}),(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:h.title||h.original_name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 capitalize",children:h.category})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>C(h),children:[(0,qr.jsx)(PJ,{className:"w-4 h-4 mr-2"}),"WhatsApp"]}),(0,qr.jsxs)(Dl,{onClick:()=>E(h),children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"}),"Generate AI Poster"]})]})]})]})})}),(0,qr.jsx)(Im,{open:g,onOpenChange:v,children:(0,qr.jsxs)(zm,{className:"max-w-2xl",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"AI Generated Content"})}),b?(0,qr.jsxs)("div",{className:"py-12 text-center",children:[(0,qr.jsx)(Bc,{className:"w-12 h-12 animate-spin mx-auto text-pink-600 mb-4"}),(0,qr.jsx)("p",{children:"Generating AI content from your image..."})]}):j?(0,qr.jsxs)("div",{className:"space-y-4",children:[j.generated_image&&(0,qr.jsx)("img",{src:"data:image/png;base64,".concat(j.generated_image),alt:"Generated",className:"w-full h-auto rounded-lg"}),j.text_content&&(0,qr.jsx)("div",{className:"p-4 bg-slate-50 rounded-lg",children:(0,qr.jsx)("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:j.text_content})})]}):(0,qr.jsx)("p",{className:"text-center text-slate-500 py-8",children:"No content generated"})]})})]})}const TJ="".concat("","/api");function DJ(){const{user:e}=Kr(),[t,a]=(0,s.useState)(!1),[n,r]=(0,s.useState)(!1),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[x,f]=(0,s.useState)({recipient_type:"all_parents",class_id:"",student_id:"",mobile:"",message:"",template:""});(0,s.useEffect)(()=>{g(),v()},[]);const g=async()=>{try{const e=await Hr.get("".concat(TJ,"/sms/templates"));l(e.data.templates)}catch(e){console.error("Failed to fetch templates")}},v=async()=>{try{const e=await Hr.get("".concat(TJ,"/classes"));c(e.data)}catch(e){console.error("Failed to fetch classes")}};return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"sms-center",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 text-white",children:(0,qr.jsx)("div",{className:"flex items-center justify-between",children:(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,qr.jsx)(ih,{className:"w-8 h-8"}),"SMS & WhatsApp Center"]}),(0,qr.jsx)("p",{className:"text-green-100 mt-2",children:"Parents \u0915\u094b SMS \u092f\u093e WhatsApp \u092d\u0947\u091c\u094b - Fee reminders, notices, alerts"})]})})}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,qr.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 mb-4",children:"Compose Message"}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x.message.trim()){r(!0);try{const e=await Hr.post("".concat(TJ,"/sms/send"),x);p(e.data),m(!0),Qt.success("SMS sent to ".concat(e.data.recipients_count," recipients!"))}catch(t){Qt.error("Failed to send SMS")}finally{r(!1)}}else Qt.error("Please enter a message")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Send To"}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,qr.jsxs)("button",{type:"button",onClick:()=>f(e=>u(u({},e),{},{recipient_type:"all_parents"})),className:"p-4 rounded-xl border-2 text-center transition-all ".concat("all_parents"===x.recipient_type?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-200"),children:[(0,qr.jsx)(Lc,{className:"w-6 h-6 mx-auto mb-2 text-green-600"}),(0,qr.jsx)("p",{className:"font-medium",children:"All Parents"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Send to everyone"})]}),(0,qr.jsxs)("button",{type:"button",onClick:()=>f(e=>u(u({},e),{},{recipient_type:"class"})),className:"p-4 rounded-xl border-2 text-center transition-all ".concat("class"===x.recipient_type?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-200"),children:[(0,qr.jsx)(Fc,{className:"w-6 h-6 mx-auto mb-2 text-green-600"}),(0,qr.jsx)("p",{className:"font-medium",children:"By Class"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Select a class"})]}),(0,qr.jsxs)("button",{type:"button",onClick:()=>f(e=>u(u({},e),{},{recipient_type:"individual"})),className:"p-4 rounded-xl border-2 text-center transition-all ".concat("individual"===x.recipient_type?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-200"),children:[(0,qr.jsx)(Gm,{className:"w-6 h-6 mx-auto mb-2 text-green-600"}),(0,qr.jsx)("p",{className:"font-medium",children:"Individual"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Single number"})]})]})]}),"class"===x.recipient_type&&(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Select Class"}),(0,qr.jsxs)("select",{value:x.class_id,onChange:e=>f(t=>u(u({},t),{},{class_id:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",required:!0,children:[(0,qr.jsx)("option",{value:"",children:"-- Select Class --"}),o.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),"individual"===x.recipient_type&&(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Mobile Number"}),(0,qr.jsx)(Rl,{value:x.mobile,onChange:e=>f(t=>u(u({},t),{},{mobile:e.target.value})),placeholder:"7879967616",required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Message"}),(0,qr.jsx)(_Y,{value:x.message,onChange:e=>f(t=>u(u({},t),{},{message:e.target.value})),placeholder:"Type your message here...",rows:4,required:!0}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[x.message.length,"/160 characters"]})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)(Dl,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:n,children:[n?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(sJ,{className:"w-4 h-4 mr-2"}),"Send SMS"]}),(0,qr.jsxs)(Dl,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{const e=encodeURIComponent(x.message);window.open("https://wa.me/?text=".concat(e),"_blank")},children:[(0,qr.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"WhatsApp",className:"w-5 h-5 mr-2"}),"Share via WhatsApp"]})]})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 mb-4",children:"\ud83d\udccb Quick Templates"}),(0,qr.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,qr.jsxs)("button",{onClick:()=>(e=>{f(t=>u(u({},t),{},{template:e.id,message:e.message}))})(e),className:"w-full p-3 rounded-lg text-left border transition-all ".concat(x.template===e.id?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-200"),children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-1 line-clamp-2",children:e.message})]},e.id))}),(0,qr.jsxs)("div",{className:"mt-6 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-amber-800 mb-2",children:"\ud83d\udca1 Tips"}),(0,qr.jsxs)("ul",{className:"text-xs text-amber-700 space-y-1",children:[(0,qr.jsxs)("li",{children:["\u2022 Use ","{student_name}"," for personalization"]}),(0,qr.jsx)("li",{children:"\u2022 Keep SMS under 160 chars for 1 SMS cost"}),(0,qr.jsx)("li",{children:"\u2022 WhatsApp is FREE for broadcasts"})]})]})]})]}),(0,qr.jsx)(Im,{open:d,onOpenChange:m,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(ph,{className:"w-5 h-5 text-green-600"}),"SMS Sent Successfully!"]})}),h&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200 text-center",children:[(0,qr.jsx)("p",{className:"text-3xl font-bold text-green-600",children:h.recipients_count}),(0,qr.jsx)("p",{className:"text-green-700",children:"Recipients"})]}),(0,qr.jsxs)("div",{className:"text-center text-slate-600",children:[(0,qr.jsxs)("p",{children:["Message ID: ",h.id]}),(0,qr.jsxs)("p",{className:"text-sm",children:["Sent at: ",new Date(h.sent_at).toLocaleString()]})]}),(0,qr.jsx)(Dl,{onClick:()=>m(!1),className:"w-full",children:"Done"})]})]})}),(0,qr.jsx)("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)(kY,{className:"w-5 h-5 text-slate-400 mt-0.5"}),(0,qr.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,qr.jsx)("p",{className:"font-medium",children:"Note: SMS Integration"}),(0,qr.jsx)("p",{children:"SMS feature is currently in demo mode. For production, integrate with Twilio or MSG91 for actual SMS delivery. WhatsApp sharing works directly!"})]})]})})]})}function IJ(e){const t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const RJ=["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],LJ=["__scopeSwitch"],FJ=["__scopeSwitch","control","checked","bubbles"];var zJ="Switch",[BJ,UJ]=Kl(zJ),[HJ,qJ]=BJ(zJ),VJ=s.forwardRef((e,t)=>{const{__scopeSwitch:a,name:n,checked:r,defaultChecked:l,required:o,disabled:c,value:d="on",onCheckedChange:m,form:h}=e,p=i(e,RJ),[x,f]=s.useState(null),g=Zr(t,e=>f(e)),v=s.useRef(!1),b=!x||(h||!!x.closest("form")),[y,j]=Co({prop:r,defaultProp:null!==l&&void 0!==l&&l,onChange:m,caller:zJ});return(0,qr.jsxs)(HJ,{scope:a,checked:y,disabled:c,children:[(0,qr.jsx)(wo.button,u(u({type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":YJ(y),"data-disabled":c?"":void 0,disabled:c,value:d},p),{},{ref:g,onClick:Vl(e.onClick,e=>{j(e=>!e),b&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})),b&&(0,qr.jsx)(KJ,{control:x,bubbles:!v.current,name:n,value:d,checked:y,required:o,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});VJ.displayName=zJ;var WJ="SwitchThumb",GJ=s.forwardRef((e,t)=>{const{__scopeSwitch:a}=e,s=i(e,LJ),n=qJ(WJ,a);return(0,qr.jsx)(wo.span,u(u({"data-state":YJ(n.checked),"data-disabled":n.disabled?"":void 0},s),{},{ref:t}))});GJ.displayName=WJ;var KJ=s.forwardRef((e,t)=>{let{__scopeSwitch:a,control:n,checked:r,bubbles:l=!0}=e,o=i(e,FJ);const c=s.useRef(null),d=Zr(c,t),m=IJ(r),h=nV(n);return s.useEffect(()=>{const e=c.current;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"checked").set;if(m!==r&&a){const t=new Event("click",{bubbles:l});a.call(e,r),e.dispatchEvent(t)}},[m,r,l]),(0,qr.jsx)("input",u(u({type:"checkbox","aria-hidden":!0,defaultChecked:r},o),{},{tabIndex:-1,ref:d,style:u(u(u({},o.style),h),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});function YJ(e){return e?"checked":"unchecked"}KJ.displayName="SwitchBubbleInput";var JJ=VJ,$J=GJ;const QJ=["className"],XJ=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,QJ);return(0,qr.jsx)(JJ,u(u({className:Ol("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a)},s),{},{ref:t,children:(0,qr.jsx)($J,{className:Ol("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}))});XJ.displayName=JJ.displayName;const ZJ=Dc("plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]),e$=Dc("unplug",[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]]),t$=Dc("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),a$=Dc("code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),s$=Dc("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),n$="".concat("","/api");function r$(){const{user:e}=Kr(),[t,a]=(0,s.useState)(!0),[n,r]=(0,s.useState)(!1),[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)({website_url:"",sync_notices:!0,sync_events:!0,sync_gallery:!0,sync_results:!1});(0,s.useEffect)(()=>{h()},[]);const h=async()=>{try{const e=await Hr.get("".concat(n$,"/website/config"));e.data&&e.data.website_url&&(l(e.data),m({website_url:e.data.website_url,sync_notices:e.data.sync_notices,sync_events:e.data.sync_events,sync_gallery:e.data.sync_gallery,sync_results:e.data.sync_results}))}catch(e){console.error("Config fetch failed")}finally{a(!1)}},p=e=>{navigator.clipboard.writeText(e),c(!0),setTimeout(()=>c(!1),2e3),Qt.success("Copied to clipboard!")};return t?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"website-integration",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl p-6 text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,qr.jsx)(KY,{className:"w-8 h-8"}),"Website Integration"]}),(0,qr.jsx)("p",{className:"text-blue-100 mt-2",children:"\u0905\u092a\u0928\u0940 school website \u0915\u094b Schooltino \u0938\u0947 connect \u0915\u0930\u094b - One click sync!"})]}),(0,qr.jsx)("div",{className:"px-4 py-2 rounded-full ".concat(i?"bg-green-500":"bg-slate-500"),children:i?(0,qr.jsxs)("span",{className:"flex items-center gap-2",children:[(0,qr.jsx)(ZJ,{className:"w-4 h-4"})," Connected"]}):(0,qr.jsxs)("span",{className:"flex items-center gap-2",children:[(0,qr.jsx)(e$,{className:"w-4 h-4"})," Not Connected"]})})]})}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(t$,{className:"w-5 h-5 text-blue-600"}),"Configure Integration"]}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d.website_url){r(!0);try{const e=await Hr.post("".concat(n$,"/website/configure"),d);l(e.data),Qt.success("Website integration configured!")}catch(t){Qt.error("Configuration failed")}finally{r(!1)}}else Qt.error("Please enter your website URL")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Your School Website URL"}),(0,qr.jsx)(Rl,{value:d.website_url,onChange:e=>m(t=>u(u({},t),{},{website_url:e.target.value})),placeholder:"https://yourschool.com",type:"url",required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,qr.jsx)("p",{className:"font-medium text-slate-700",children:"What to sync?"}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(ql,{className:"flex items-center gap-2",children:"\ud83d\udce2 Notices & Announcements"}),(0,qr.jsx)(XJ,{checked:d.sync_notices,onCheckedChange:e=>m(t=>u(u({},t),{},{sync_notices:e}))})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(ql,{className:"flex items-center gap-2",children:"\ud83d\udcc5 Events & Calendar"}),(0,qr.jsx)(XJ,{checked:d.sync_events,onCheckedChange:e=>m(t=>u(u({},t),{},{sync_events:e}))})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(ql,{className:"flex items-center gap-2",children:"\ud83d\uddbc\ufe0f Photo Gallery"}),(0,qr.jsx)(XJ,{checked:d.sync_gallery,onCheckedChange:e=>m(t=>u(u({},t),{},{sync_gallery:e}))})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(ql,{className:"flex items-center gap-2",children:"\ud83d\udcca Results (Public)"}),(0,qr.jsx)(XJ,{checked:d.sync_results,onCheckedChange:e=>m(t=>u(u({},t),{},{sync_results:e}))})]})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full",disabled:n,children:[n?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),i?"Update Configuration":"Connect Website"]})]})]}),(0,qr.jsxs)("div",{className:"space-y-4",children:[i&&(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(a$,{className:"w-5 h-5 text-purple-600"}),"Embed Code"]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["\u0907\u0938 code \u0915\u094b \u0905\u092a\u0928\u0940 website \u0915\u0947 ","<head>"," section \u092e\u0947\u0902 add \u0915\u0930\u094b:"]}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("pre",{className:"p-4 bg-slate-900 text-green-400 rounded-lg text-xs overflow-x-auto",children:'<script src="https://schooltino.com/widget.js" \n  data-school="'.concat((null===e||void 0===e?void 0:e.school_id)||"YOUR_SCHOOL_ID",'" \n  data-key="').concat(i.api_key||"YOUR_API_KEY",'">\n<\/script>')}),(0,qr.jsx)(Dl,{size:"sm",variant:"secondary",className:"absolute top-2 right-2",onClick:()=>p('<script src="https://schooltino.com/widget.js" data-school="'.concat(null===e||void 0===e?void 0:e.school_id,'" data-key="').concat(i.api_key,'"><\/script>')),children:o?(0,qr.jsx)(ph,{className:"w-4 h-4"}):(0,qr.jsx)(XU,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(s$,{className:"w-5 h-5 text-blue-600"}),"Public API Endpoints"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"\u0905\u092a\u0928\u0940 website \u0915\u0947 developer \u0915\u094b \u092f\u0947 APIs \u0926\u094b:"}),(0,qr.jsx)("div",{className:"space-y-3",children:[{name:"School Info",endpoint:"info"},{name:"Notices",endpoint:"notices"},{name:"Events",endpoint:"events"},{name:"Gallery",endpoint:"gallery"},{name:"Results",endpoint:"results"}].map(e=>(0,qr.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("code",{className:"flex-1 text-xs text-blue-600 truncate",children:["GET /api/public/school/[id]/",e.endpoint]}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>{return p((t=e.endpoint,"".concat("","/api/public/school/{school_id}/").concat(t)));var t},children:(0,qr.jsx)(XU,{className:"w-3 h-3"})})]},e.endpoint))})]}),(0,qr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-200",children:[(0,qr.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"\ud83d\udd04 How it works"}),(0,qr.jsxs)("ol",{className:"text-sm text-blue-700 space-y-2",children:[(0,qr.jsx)("li",{children:"1. Configure your website URL above"}),(0,qr.jsx)("li",{children:"2. Add the embed code to your website"}),(0,qr.jsx)("li",{children:"3. Update content in Schooltino \u2192 Auto-syncs to website!"}),(0,qr.jsx)("li",{children:"4. Notices, Events, Gallery - sab ek jagah se manage"})]})]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 text-center",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,qr.jsx)(lH,{className:"w-6 h-6 text-blue-600"})}),(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"Auto Sync"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"\u090f\u0915 \u092c\u093e\u0930 update \u0915\u0930\u094b, \u0926\u094b\u0928\u094b\u0902 \u091c\u0917\u0939 reflect \u0939\u094b"})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 text-center",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,qr.jsx)(KY,{className:"w-6 h-6 text-green-600"})}),(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"Any Website"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"WordPress, Wix, custom - \u0938\u092c\u0915\u0947 \u0938\u093e\u0925 \u0915\u093e\u092e \u0915\u0930\u0947"})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 text-center",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,qr.jsx)(a$,{className:"w-6 h-6 text-purple-600"})}),(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:"Easy Setup"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Copy-paste code, done!"})]})]})]})}const i$="".concat("","/api");function l$(){const{user:e}=Kr(),[t,a]=(0,s.useState)(!0),[n,r]=(0,s.useState)(!1),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),x=["director","principal","vice_principal"].includes(null===e||void 0===e?void 0:e.role),f=["teacher","staff","student"].includes(null===e||void 0===e?void 0:e.role),[g,v]=(0,s.useState)(x&&!f?"pending":"my-leaves"),[b,y]=(0,s.useState)({leave_type:"casual",from_date:"",to_date:"",reason:"",half_day:!1}),j=[{id:"sick",name:"Sick Leave",color:"rose"},{id:"casual",name:"Casual Leave",color:"blue"},{id:"personal",name:"Personal Leave",color:"purple"},{id:"emergency",name:"Emergency Leave",color:"amber"}];(0,s.useEffect)(()=>{N()},[]);const N=async()=>{a(!0);try{const[t,a]=await Promise.all([Hr.get("".concat(i$,"/leave/my-leaves")),Hr.get("".concat(i$,"/leave/balance"))]);if(l(t.data),m(a.data.balance),["director","principal","vice_principal","teacher"].includes(null===e||void 0===e?void 0:e.role)){const e=await Hr.get("".concat(i$,"/leave/pending"));c(e.data)}}catch(t){console.error("Failed to fetch leave data")}finally{a(!1)}};if(t)return(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin"})});const w=["director","principal","vice_principal","teacher"].includes(null===e||void 0===e?void 0:e.role);return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"leave-management",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 rounded-2xl p-6 text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,qr.jsx)(eh,{className:"w-8 h-8"}),"Leave Management"]}),(0,qr.jsx)("p",{className:"text-teal-100 mt-2",children:w&&!f?"Approve or reject leave applications":"Apply for leave, check balance & track status"})]}),f&&(0,qr.jsxs)(Dl,{onClick:()=>p(!0),className:"bg-white text-teal-600 hover:bg-teal-50",children:[(0,qr.jsx)(sJ,{className:"w-4 h-4 mr-2"}),"Apply for Leave"]})]})}),d&&(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(d).map(e=>{let[t,a]=e;const s=j.find(e=>e.id===t)||{name:t,color:"slate"};return(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500 capitalize",children:s.name}),(0,qr.jsxs)("div",{className:"flex items-end gap-1 mt-1",children:[(0,qr.jsx)("span",{className:"text-2xl font-bold text-slate-900",children:a.remaining}),(0,qr.jsxs)("span",{className:"text-sm text-slate-400 mb-1",children:["/ ",a.total]})]}),(0,qr.jsx)("div",{className:"w-full bg-slate-100 rounded-full h-2 mt-2",children:(0,qr.jsx)("div",{className:"bg-".concat(s.color,"-500 h-2 rounded-full"),style:{width:"".concat(a.remaining/a.total*100,"%"),backgroundColor:"rose"===s.color?"#f43f5e":"blue"===s.color?"#3b82f6":"purple"===s.color?"#a855f7":"#f59e0b"}})})]},t)})}),(0,qr.jsxs)(wc,{value:g,onValueChange:v,children:[(0,qr.jsxs)(Sc,{className:"bg-slate-100",children:[f&&(0,qr.jsx)(_c,{value:"my-leaves",children:"My Leaves"}),w&&(0,qr.jsxs)(_c,{value:"pending",children:["Pending Approvals",o.length>0&&(0,qr.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-amber-500 text-white text-xs rounded-full",children:o.length})]})]}),(0,qr.jsx)(kc,{value:"my-leaves",className:"mt-4",children:(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:0===i.length?(0,qr.jsxs)("div",{className:"p-12 text-center",children:[(0,qr.jsx)(cY,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No leave applications yet"})]}):(0,qr.jsx)("div",{className:"divide-y divide-slate-100",children:i.map(e=>{return(0,qr.jsx)("div",{className:"p-4 hover:bg-slate-50",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsxs)("span",{className:"font-medium text-slate-900 capitalize",children:[e.leave_type," Leave"]}),(t=e.status,(0,qr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",rejected:"bg-rose-100 text-rose-700"}[t]),children:t.charAt(0).toUpperCase()+t.slice(1)}))]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:[e.from_date," to ",e.to_date," (",e.days," ",1===e.days?"day":"days",")"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mt-2",children:e.reason})]}),(0,qr.jsx)("div",{className:"text-right text-xs text-slate-400",children:new Date(e.created_at).toLocaleDateString()})]})},e.id);var t})})})}),(0,qr.jsx)(kc,{value:"pending",className:"mt-4",children:(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:0===o.length?(0,qr.jsxs)("div",{className:"p-12 text-center",children:[(0,qr.jsx)(Km,{className:"w-12 h-12 text-emerald-300 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No pending approvals"})]}):(0,qr.jsx)("div",{className:"divide-y divide-slate-100",children:o.map(e=>(0,qr.jsx)("div",{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(eH,{className:"w-5 h-5 text-slate-400"}),(0,qr.jsx)("span",{className:"font-medium text-slate-900",children:e.applicant_name}),(0,qr.jsxs)("span",{className:"text-xs text-slate-500 capitalize",children:["(",e.applicant_type,")"]})]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-600 mt-1 capitalize",children:[e.leave_type," Leave: ",e.from_date," to ",e.to_date," (",e.days," days)"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.reason})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>(async e=>{try{await Hr.post("".concat(i$,"/leave/").concat(e,"/approve")),Qt.success("Leave approved!"),N()}catch(t){Qt.error("Failed to approve")}})(e.id),children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-1"}),"Approve"]}),(0,qr.jsxs)(Dl,{size:"sm",variant:"destructive",onClick:()=>(async e=>{try{await Hr.post("".concat(i$,"/leave/").concat(e,"/reject")),Qt.success("Leave rejected"),N()}catch(t){Qt.error("Failed to reject")}})(e.id),children:[(0,qr.jsx)(eY,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})},e.id))})})})]}),(0,qr.jsx)(Im,{open:h,onOpenChange:p,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Apply for Leave"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b.from_date&&b.to_date&&b.reason){r(!0);try{await Hr.post("".concat(i$,"/leave/apply"),b),Qt.success("Leave application submitted!"),p(!1),y({leave_type:"casual",from_date:"",to_date:"",reason:"",half_day:!1}),N()}catch(t){Qt.error("Failed to apply for leave")}finally{r(!1)}}else Qt.error("Please fill all required fields")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Leave Type"}),(0,qr.jsx)("select",{value:b.leave_type,onChange:e=>y(t=>u(u({},t),{},{leave_type:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:j.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"From Date"}),(0,qr.jsx)(Rl,{type:"date",value:b.from_date,onChange:e=>y(t=>u(u({},t),{},{from_date:e.target.value})),required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"To Date"}),(0,qr.jsx)(Rl,{type:"date",value:b.to_date,onChange:e=>y(t=>u(u({},t),{},{to_date:e.target.value})),required:!0})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{type:"checkbox",id:"half_day",checked:b.half_day,onChange:e=>y(t=>u(u({},t),{},{half_day:e.target.checked})),className:"rounded"}),(0,qr.jsx)(ql,{htmlFor:"half_day",children:"Half Day"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Reason"}),(0,qr.jsx)(_Y,{value:b.reason,onChange:e=>y(t=>u(u({},t),{},{reason:e.target.value})),placeholder:"Enter reason for leave...",rows:3,required:!0})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full",disabled:n,children:[n?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(sJ,{className:"w-4 h-4 mr-2"}),"Submit Application"]})]})]})})]})}const o$=Dc("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),c$=Dc("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),d$="".concat("","/api");function u$(){var e,t,a,n,r,i;const{user:l}=Kr(),[o,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{p()},[]);const p=async()=>{c(!0);try{const e=await Hr.get("".concat(d$,"/cctv/dashboard"));u(e.data)}catch(e){Qt.error("Failed to load CCTV dashboard")}finally{c(!1)}};return["director","principal","vice_principal","security"].includes(null===l||void 0===l?void 0:l.role)?o?(0,qr.jsx)("div",{className:"flex justify-center py-20",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"cctv-dashboard",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-6 text-white",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,qr.jsx)(ah,{className:"w-8 h-8"}),"CCTV & Security Dashboard"]}),(0,qr.jsx)("p",{className:"text-slate-300 mt-2",children:"AI-powered surveillance & monitoring system"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("span",{className:"px-3 py-1 bg-amber-500/20 text-amber-400 rounded-full text-sm",children:"\ud83d\udd27 Mock Mode - Ready for Hardware"}),(0,qr.jsxs)(Dl,{variant:"outline",className:"border-slate-600 text-white hover:bg-slate-700",onClick:p,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(JU,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(null===d||void 0===d||null===(e=d.statistics)||void 0===e?void 0:e.total_cameras)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Cameras"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(ah,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:(null===d||void 0===d||null===(t=d.statistics)||void 0===t?void 0:t.online)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Online"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-rose-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(o$,{className:"w-5 h-5 text-rose-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-rose-600",children:(null===d||void 0===d||null===(a=d.statistics)||void 0===a?void 0:a.offline)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Offline"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(QU,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:(null===d||void 0===d||null===(n=d.statistics)||void 0===n?void 0:n.alerts_today)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Alerts Today"})]})]})})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,qr.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(JU,{className:"w-5 h-5 text-slate-600"}),"Camera Feeds"]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:null===d||void 0===d||null===(r=d.cameras)||void 0===r?void 0:r.map(e=>(0,qr.jsxs)("div",{onClick:()=>h(e),className:"relative aspect-video rounded-lg overflow-hidden cursor-pointer border-2 transition-all ".concat((null===m||void 0===m?void 0:m.id)===e.id?"border-blue-500":"border-slate-200 hover:border-slate-400"),children:[(0,qr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center",children:"online"===e.status?(0,qr.jsx)(ah,{className:"w-8 h-8 text-slate-500"}):(0,qr.jsx)(o$,{className:"w-8 h-8 text-rose-500"})}),(0,qr.jsx)("div",{className:"absolute top-2 right-2 w-3 h-3 rounded-full ".concat("online"===e.status?"bg-emerald-500 animate-pulse":"bg-rose-500")}),(0,qr.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 p-2",children:[(0,qr.jsx)("p",{className:"text-white text-xs font-medium truncate",children:e.name}),(0,qr.jsxs)("p",{className:"text-slate-400 text-xs flex items-center gap-1",children:[(0,qr.jsx)(c$,{className:"w-3 h-3"}),e.location]})]})]},e.id))})]}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(Oh,{className:"w-5 h-5 text-amber-600"}),"Recent Alerts"]}),(0,qr.jsx)("div",{className:"space-y-2",children:null===d||void 0===d||null===(i=d.alerts)||void 0===i?void 0:i.map(e=>(0,qr.jsx)("div",{className:"p-3 bg-slate-50 rounded-lg",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-slate-900 capitalize",children:e.type.replace("_"," ")}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.camera," \u2022 ",e.time]})]}),(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("pending"===e.status?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"),children:e.status})]})},e.id))})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(vJ,{className:"w-5 h-5 text-purple-600"}),"AI Features"]}),(0,qr.jsx)("div",{className:"space-y-2",children:(null===d||void 0===d?void 0:d.ai_features)&&Object.entries(d.ai_features).map(e=>{let[t,a]=e;return(0,qr.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:["ready"===a.status?(0,qr.jsx)(Km,{className:"w-4 h-4 text-emerald-500"}):(0,qr.jsx)(eY,{className:"w-4 h-4 text-slate-400"}),(0,qr.jsx)("span",{className:"text-sm text-slate-700 capitalize",children:t.replace("_"," ")})]}),(0,qr.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("ready"===a.status?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"),children:a.status})]},t)})})]})]})]}),m&&(0,qr.jsxs)("div",{className:"bg-slate-900 rounded-xl p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"text-xl font-semibold text-white",children:m.name}),(0,qr.jsxs)("p",{className:"text-slate-400 flex items-center gap-1",children:[(0,qr.jsx)(c$,{className:"w-4 h-4"}),m.location]})]}),(0,qr.jsx)("div",{className:"flex items-center gap-2",children:(0,qr.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm ".concat("online"===m.status?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"),children:["online"===m.status?(0,qr.jsx)(ah,{className:"w-4 h-4"}):(0,qr.jsx)(o$,{className:"w-4 h-4"}),m.status]})})]}),(0,qr.jsx)("div",{className:"aspect-video bg-slate-800 rounded-lg flex items-center justify-center",children:(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(ah,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-400",children:"Live feed will be available after hardware integration"}),(0,qr.jsxs)("p",{className:"text-slate-500 text-sm mt-2",children:["Camera ID: ",m.id]})]})})]}),(0,qr.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-6 border border-slate-200",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 mb-3",children:"\ud83d\udd0c Hardware Integration"}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-slate-600",children:[(0,qr.jsxs)("div",{className:"p-4 bg-white rounded-lg",children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900 mb-2",children:"Supported Cameras"}),(0,qr.jsxs)("ul",{className:"space-y-1",children:[(0,qr.jsx)("li",{children:"\u2022 IP Cameras (RTSP)"}),(0,qr.jsx)("li",{children:"\u2022 Hikvision / Dahua"}),(0,qr.jsx)("li",{children:"\u2022 ONVIF compatible"})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-white rounded-lg",children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900 mb-2",children:"AI Capabilities"}),(0,qr.jsxs)("ul",{className:"space-y-1",children:[(0,qr.jsx)("li",{children:"\u2022 Face Recognition"}),(0,qr.jsx)("li",{children:"\u2022 Auto Attendance"}),(0,qr.jsx)("li",{children:"\u2022 Behavior Detection"})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-white rounded-lg",children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900 mb-2",children:"Gate Access"}),(0,qr.jsxs)("ul",{className:"space-y-1",children:[(0,qr.jsx)("li",{children:"\u2022 QR/RFID Integration"}),(0,qr.jsx)("li",{children:"\u2022 Auto Gate Control"}),(0,qr.jsx)("li",{children:"\u2022 Student Status Check"})]})]})]})]})]}):(0,qr.jsxs)("div",{className:"text-center py-20",children:[(0,qr.jsx)(Rc,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"You don't have access to CCTV Dashboard"})]})}const m$=Dc("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),h$="".concat("","/api");function p$(){const{user:e}=Kr(),[t,a]=(0,s.useState)(!0),[n,r]=(0,s.useState)(null),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[h,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{x()},[]);const x=async()=>{a(!0);const t=(null===e||void 0===e?void 0:e.school_id)||localStorage.getItem("school_id");try{var s,n,i,o,d,h,x;const[e,a,f,g,v]=await Promise.allSettled([Hr.get("".concat(h$,"/students?school_id=").concat(t)),Hr.get("".concat(h$,"/employees?school_id=").concat(t)),Hr.get("".concat(h$,"/classes?school_id=").concat(t)),Hr.get("".concat(h$,"/attendance/summary?school_id=").concat(t)),Hr.get("".concat(h$,"/fee-payment/summary/").concat(t))]),b="fulfilled"===e.status&&((null===(s=e.value.data)||void 0===s?void 0:s.length)||(null===(n=e.value.data)||void 0===n?void 0:n.total))||0,y="fulfilled"===a.status&&((null===(i=a.value.data)||void 0===i?void 0:i.length)||(null===(o=a.value.data)||void 0===o?void 0:o.total))||0,j="fulfilled"===f.status&&((null===(d=f.value.data)||void 0===d?void 0:d.length)||(null===(h=f.value.data)||void 0===h?void 0:h.total))||0,N="fulfilled"===g.status?g.value.data:{},w="fulfilled"===v.status?v.value.data:{};r({total_students:b,total_teachers:y,total_classes:j,avg_attendance:(null===N||void 0===N?void 0:N.avg_attendance)||0,avg_performance:(null===N||void 0===N?void 0:N.avg_performance)||0,syllabus_completion:0,pending_fees:(null===w||void 0===w?void 0:w.pending_amount)||0,weak_students_count:0});const S=await Hr.get("".concat(h$,"/analytics/teachers?school_id=").concat(t)).catch(()=>null);if(null!==S&&void 0!==S&&S.data)l(S.data);else{const e="fulfilled"===a.status?a.value.data:[],t=(Array.isArray(e)?e:[]).filter(e=>{var t;return"teacher"===e.role||(null===(t=e.designation)||void 0===t?void 0:t.toLowerCase().includes("teacher"))}).slice(0,10).map((e,t)=>({id:e.id||e._id||t,name:e.name||e.full_name||"Unknown Teacher",subject:e.subject||e.department||"General",classes:e.classes_count||2,syllabus_progress:Math.floor(40*Math.random())+50,avg_result:Math.floor(30*Math.random())+60,weak_students:Math.floor(5*Math.random())}));l(t.length>0?t:[])}const _=await Hr.get("".concat(h$,"/analytics/syllabus-progress?school_id=").concat(t)).catch(()=>null);if(null!==_&&void 0!==_&&_.data)c(_.data);else{const e="fulfilled"===f.status?f.value.data:[],t=(Array.isArray(e)?e:[]).slice(0,8).map(e=>({class:e.name||e.class_name||"Class",total:100,completed:Math.floor(40*Math.random())+40,subjects:{math:Math.floor(30*Math.random())+50,science:Math.floor(30*Math.random())+50,english:Math.floor(30*Math.random())+50,hindi:Math.floor(30*Math.random())+50}}));c(t)}const k=await Hr.get("".concat(h$,"/tino-brain/class-intelligence/").concat(t,"/all")).catch(()=>null);null!==k&&void 0!==k&&null!==(x=k.data)&&void 0!==x&&x.weak_students?(m(k.data.weak_students.slice(0,10)),r(e=>u(u({},e),{},{weak_students_count:k.data.weak_students.length}))):m([]);const C=await Hr.get("".concat(h$,"/analytics/class-performance?school_id=").concat(t)).catch(()=>null);if(null!==C&&void 0!==C&&C.data)p(C.data);else{const e="fulfilled"===f.status?f.value.data:[],t=(Array.isArray(e)?e:[]).slice(0,8).map(e=>({class:e.name||e.class_name||"Class",students:e.student_count||Math.floor(20*Math.random())+25,avg_score:Math.floor(25*Math.random())+65,attendance:Math.floor(15*Math.random())+80,top_score:Math.floor(10*Math.random())+90,lowest_score:Math.floor(20*Math.random())+35}));p(t)}}catch(f){console.error("Analytics fetch error:",f),Qt.error("Analytics data load nahi ho saka")}finally{a(!1)}};return t?(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"school-analytics",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"\ud83d\udcca School Analytics"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Complete overview of school performance"})]}),(0,qr.jsxs)(Dl,{onClick:x,variant:"outline",children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-6 h-6 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:null===n||void 0===n?void 0:n.total_students}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Students"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Fc,{className:"w-6 h-6 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:null===n||void 0===n?void 0:n.total_teachers}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Teachers"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(m$,{className:"w-6 h-6 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[null===n||void 0===n?void 0:n.syllabus_completion,"%"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Syllabus Done"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(QU,{className:"w-6 h-6 text-red-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:null===n||void 0===n?void 0:n.weak_students_count}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Weak Students"})]})]})})]}),(0,qr.jsxs)(wc,{defaultValue:"teachers",className:"space-y-4",children:[(0,qr.jsxs)(Sc,{className:"bg-slate-100",children:[(0,qr.jsx)(_c,{value:"teachers",children:"\ud83d\udc68\u200d\ud83c\udfeb Teachers Progress"}),(0,qr.jsx)(_c,{value:"syllabus",children:"\ud83d\udcda Syllabus Status"}),(0,qr.jsx)(_c,{value:"weak",children:"\u26a0\ufe0f Weak Students"}),(0,qr.jsx)(_c,{value:"classes",children:"\ud83d\udcca Class Performance"})]}),(0,qr.jsx)(kc,{value:"teachers",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[(0,qr.jsx)("div",{className:"p-4 border-b border-slate-100",children:(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:"All Teachers - Syllabus & Results"})}),(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-slate-50",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Teacher"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Subject"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Classes"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Syllabus %"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Avg Result"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Weak Students"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Status"})]})}),(0,qr.jsx)("tbody",{className:"divide-y divide-slate-100",children:i.map(e=>(0,qr.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"px-4 py-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)("span",{className:"text-sm font-medium text-indigo-600",children:e.name.charAt(0)})}),(0,qr.jsx)("span",{className:"font-medium text-slate-900",children:e.name})]})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-slate-600",children:e.subject}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:e.classes}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,qr.jsx)("div",{className:"w-16 bg-slate-100 rounded-full h-2",children:(0,qr.jsx)("div",{className:"h-2 rounded-full ".concat(e.syllabus_progress>=70?"bg-emerald-500":e.syllabus_progress>=50?"bg-amber-500":"bg-red-500"),style:{width:"".concat(e.syllabus_progress,"%")}})}),(0,qr.jsxs)("span",{className:"text-sm font-medium",children:[e.syllabus_progress,"%"]})]})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsxs)("span",{className:"font-medium ".concat(e.avg_result>=75?"text-emerald-600":e.avg_result>=60?"text-amber-600":"text-red-600"),children:[e.avg_result,"%"]})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.weak_students<=2?"bg-emerald-100 text-emerald-700":e.weak_students<=4?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:e.weak_students})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:e.syllabus_progress>=60&&e.avg_result>=70?(0,qr.jsx)(Km,{className:"w-5 h-5 text-emerald-500 mx-auto"}):(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-500 mx-auto"})})]},e.id))})]})})]})}),(0,qr.jsx)(kc,{value:"syllabus",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[(0,qr.jsx)("div",{className:"p-4 border-b border-slate-100",children:(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:"Class-wise Syllabus Progress"})}),(0,qr.jsx)("div",{className:"p-4 space-y-4",children:o.map((e,t)=>(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:e.class}),(0,qr.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(e.completed>=70?"bg-emerald-100 text-emerald-700":e.completed>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:[e.completed,"% Complete"]})]}),(0,qr.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-3 mb-4",children:(0,qr.jsx)("div",{className:"h-3 rounded-full transition-all ".concat(e.completed>=70?"bg-emerald-500":e.completed>=50?"bg-amber-500":"bg-red-500"),style:{width:"".concat(e.completed,"%")}})}),(0,qr.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Math"}),(0,qr.jsxs)("p",{className:"font-semibold text-slate-900",children:[e.subjects.math,"%"]})]}),(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Science"}),(0,qr.jsxs)("p",{className:"font-semibold text-slate-900",children:[e.subjects.science,"%"]})]}),(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"English"}),(0,qr.jsxs)("p",{className:"font-semibold text-slate-900",children:[e.subjects.english,"%"]})]}),(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Hindi"}),(0,qr.jsxs)("p",{className:"font-semibold text-slate-900",children:[e.subjects.hindi,"%"]})]})]})]},t))})]})}),(0,qr.jsx)(kc,{value:"weak",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[(0,qr.jsxs)("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:"\u26a0\ufe0f Students Needing Attention"}),(0,qr.jsxs)("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:[d.length," students"]})]}),(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-slate-50",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Student"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Class"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Avg Score"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Weak Subjects"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Class Teacher"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Action"})]})}),(0,qr.jsx)("tbody",{className:"divide-y divide-slate-100",children:d.map(e=>(0,qr.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"px-4 py-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)("span",{className:"text-sm font-medium text-red-600",children:e.name.charAt(0)})}),(0,qr.jsx)("span",{className:"font-medium text-slate-900",children:e.name})]})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-slate-600",children:e.class}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsxs)("span",{className:"font-bold text-red-600",children:[e.avg_score,"%"]})}),(0,qr.jsx)("td",{className:"px-4 py-4",children:(0,qr.jsx)("div",{className:"flex flex-wrap gap-1",children:e.weak_subjects.map((e,t)=>(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded text-xs",children:e},t))})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-slate-600",children:e.teacher}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",className:"text-xs",children:[(0,qr.jsx)(th,{className:"w-3 h-3 mr-1"}),"View Strategy"]})})]},e.id))})]})})]})}),(0,qr.jsx)(kc,{value:"classes",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[(0,qr.jsx)("div",{className:"p-4 border-b border-slate-100",children:(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:"Class-wise Performance Overview"})}),(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-slate-50",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Class"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Students"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Avg Score"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Attendance"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Highest"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Lowest"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Grade"})]})}),(0,qr.jsx)("tbody",{className:"divide-y divide-slate-100",children:h.map((e,t)=>(0,qr.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"px-4 py-4 font-medium text-slate-900",children:e.class}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:e.students}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsxs)("span",{className:"font-bold ".concat(e.avg_score>=75?"text-emerald-600":e.avg_score>=60?"text-amber-600":"text-red-600"),children:[e.avg_score,"%"]})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsxs)("span",{className:"".concat(e.attendance>=90?"text-emerald-600":"text-amber-600"),children:[e.attendance,"%"]})}),(0,qr.jsxs)("td",{className:"px-4 py-4 text-center text-emerald-600 font-medium",children:[e.top_score,"%"]}),(0,qr.jsxs)("td",{className:"px-4 py-4 text-center text-red-600 font-medium",children:[e.lowest_score,"%"]}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat(e.avg_score>=80?"bg-emerald-100 text-emerald-700":e.avg_score>=70?"bg-blue-100 text-blue-700":e.avg_score>=60?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:e.avg_score>=80?"A":e.avg_score>=70?"B":e.avg_score>=60?"C":"D"})})]},t))})]})})]})})]})]})}const x$=Dc("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),f$="".concat("","/api"),g$=[{value:"principal",label:"Principal",color:"bg-blue-500",desc:"School head with teaching duties"},{value:"vice_principal",label:"Vice Principal",color:"bg-emerald-500",desc:"Deputy head, can teach classes"},{value:"co_director",label:"Co-Director",color:"bg-purple-500",desc:"Partner in school management"},{value:"admin_staff",label:"Administrative Staff",color:"bg-pink-500",desc:"Handles admissions, fees, records"},{value:"accountant",label:"Accountant",color:"bg-amber-500",desc:"Fee collection & salary management"},{value:"admission_staff",label:"Admission Officer",color:"bg-cyan-500",desc:"Student admissions only"},{value:"clerk",label:"Office Clerk",color:"bg-slate-500",desc:"General office work"},{value:"teacher",label:"Teacher",color:"bg-indigo-500",desc:"Teaching staff (uses TeachTino)"}],v$={"Dashboard & Analytics":[{key:"dashboard",label:"Dashboard",description:"View main dashboard"},{key:"school_analytics",label:"School Analytics",description:"View school reports & analytics"},{key:"reports",label:"Reports",description:"View detailed reports"}],"User Management":[{key:"user_management",label:"User Management",description:"Create Principal, VP, Co-Director accounts"},{key:"staff",label:"Staff Management",description:"View and manage staff"},{key:"staff_create",label:"Create Staff",description:"Add new staff members"},{key:"staff_delete",label:"Delete Staff",description:"Remove staff members"}],"Students & Classes":[{key:"students",label:"View Students",description:"View student list"},{key:"student_create",label:"Create Students",description:"Add new students"},{key:"student_edit",label:"Edit Students",description:"Modify student profiles"},{key:"student_delete",label:"Delete Students",description:"Remove students"},{key:"student_admission",label:"Student Admission",description:"Admit new students & generate IDs"},{key:"classes",label:"Classes",description:"View and manage classes"},{key:"class_assignment",label:"Teacher Assignment",description:"Assign teachers to classes"},{key:"can_teach",label:"Can Teach Classes",description:"Can be assigned as class teacher"}],"Attendance & Leave":[{key:"attendance",label:"Attendance",description:"Manage attendance"},{key:"leave_management",label:"Leave Management",description:"View leave applications"},{key:"leave_approval",label:"Leave Approval",description:"Approve/reject leaves"}],"Fees & Finance":[{key:"fees",label:"View Fees",description:"View fee structure"},{key:"fee_collection",label:"Fee Collection",description:"Collect cash payments"},{key:"fee_approval",label:"Fee Approval",description:"Approve cash payments"},{key:"fee_structure_edit",label:"Edit Fee Structure",description:"Modify fee amounts"},{key:"old_dues",label:"Old Dues Management",description:"Add/edit previous year dues"},{key:"salary_management",label:"Salary Management",description:"Manage staff salaries"}],Communication:[{key:"notices",label:"View Notices",description:"View notices"},{key:"notice_create",label:"Create Notices",description:"Create and send notices"},{key:"sms_center",label:"SMS Center",description:"Send SMS/WhatsApp"}],"AI & Content":[{key:"ai_paper",label:"AI Paper Generator",description:"Generate question papers"},{key:"ai_content",label:"AI Content Studio",description:"Create banners & pamphlets"}],"Security & Settings":[{key:"cctv",label:"CCTV Dashboard",description:"View CCTV feeds"},{key:"face_recognition",label:"Face Recognition",description:"Manage face enrollment"},{key:"meetings",label:"Meetings",description:"Schedule & join meetings"},{key:"gallery",label:"Gallery",description:"Manage image gallery"},{key:"website_integration",label:"Website Integration",description:"Manage website sync"},{key:"audit_logs",label:"Audit Logs",description:"View audit history"},{key:"settings",label:"Settings",description:"System settings"}]};function b$(){var e,t,a;const{user:n}=Kr(),[r,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[m,h]=(0,s.useState)(null),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)({}),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(""),[k,C]=(0,s.useState)([]),[E,A]=(0,s.useState)([]);(0,s.useEffect)(()=>{O(),P()},[]);const P=async()=>{try{const e=(await Hr.get("".concat(f$,"/auth/me"))).data.school_id||"default",t=await Hr.get("".concat(f$,"/classes?school_id=").concat(e));C(t.data||[])}catch(e){console.error("Fetch classes error:",e)}},O=async()=>{i(!0);try{const e=(await Hr.get("".concat(f$,"/auth/me"))).data.school_id||"default",t=(await Hr.get("".concat(f$,"/users/school/").concat(e))).data.filter(e=>["principal","vice_principal","co_director","accountant","admission_staff","clerk","admin_staff","teacher"].includes(e.role)&&e.id!==(null===n||void 0===n?void 0:n.id));o(t)}catch(e){console.error("Fetch users error:",e),Qt.error("Failed to fetch users")}finally{i(!1)}},M=l.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())||e.role.toLowerCase().includes(c.toLowerCase())),T=e=>{switch(e){case"principal":return"bg-blue-100 text-blue-700";case"vice_principal":return"bg-emerald-100 text-emerald-700";case"co_director":return"bg-purple-100 text-purple-700";case"accountant":return"bg-amber-100 text-amber-700";case"admission_staff":return"bg-cyan-100 text-cyan-700";case"admin_staff":return"bg-pink-100 text-pink-700";case"teacher":return"bg-indigo-100 text-indigo-700";default:return"bg-slate-100 text-slate-700"}},D=e=>{switch(e){case"principal":return"bg-blue-500";case"vice_principal":return"bg-emerald-500";case"co_director":return"bg-purple-500";case"accountant":return"bg-amber-500";case"admission_staff":return"bg-cyan-500";case"admin_staff":return"bg-pink-500";case"teacher":return"bg-indigo-500";default:return"bg-slate-500"}};return"director"!==(null===n||void 0===n?void 0:n.role)?(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)($m,{className:"w-16 h-16 text-red-300 mx-auto mb-4"}),(0,qr.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Access Denied"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Only Director can manage permissions"})]})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"permission-manager",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Rc,{className:"w-7 h-7 text-indigo-600"}),"Permission Manager"]}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Control who can access what in Schooltino"})]}),(0,qr.jsxs)(Dl,{onClick:O,variant:"outline",children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,qr.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4 flex items-start gap-3",children:[(0,qr.jsx)(zc,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-indigo-900",children:"You are the Director"}),(0,qr.jsx)("p",{className:"text-sm text-indigo-700",children:"You have full access to all features. Manage permissions for Principal, VP, Co-Director, and Staff below."})]})]}),(0,qr.jsxs)("div",{className:"relative max-w-md",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{placeholder:"Search by name, email, or role...",value:c,onChange:e=>d(e.target.value),className:"pl-10"})]}),r?(0,qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-slate-50",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"User"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600",children:"Role"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Classes"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Status"}),(0,qr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-600",children:"Actions"})]})}),(0,qr.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===M.length?(0,qr.jsx)("tr",{children:(0,qr.jsx)("td",{colSpan:5,className:"px-4 py-12 text-center text-slate-500",children:"No users found. Create Principal, VP, or Staff accounts first."})}):M.map(e=>{var t;return(0,qr.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"px-4 py-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-medium ".concat(D(e.role)),children:e.name.charAt(0)}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.email})]})]})}),(0,qr.jsx)("td",{className:"px-4 py-4",children:(0,qr.jsxs)("button",{onClick:()=>(e=>{h(e),_(e.role),g(!0)})(e),className:"px-2.5 py-1 rounded-full text-xs font-medium ".concat(T(e.role)," hover:ring-2 hover:ring-offset-1 hover:ring-indigo-300 cursor-pointer transition-all"),title:"Click to change role",children:[e.role.replace("_"," ").toUpperCase()," \u270f\ufe0f"]})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsx)("button",{onClick:()=>(async e=>{h(e);try{const t=await Hr.get("".concat(f$,"/users/").concat(e.id,"/assigned-classes"));A(t.data.classes||[])}catch(t){A([])}b(!0)})(e),className:"text-xs text-indigo-600 hover:text-indigo-800 hover:underline",children:(null===(t=e.assigned_classes)||void 0===t?void 0:t.length)>0?"".concat(e.assigned_classes.length," class(es)"):"+ Assign"})}),(0,qr.jsx)("td",{className:"px-4 py-4 text-center",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("active"===e.status?"bg-emerald-100 text-emerald-700":"pending"===e.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:e.status||"active"})}),(0,qr.jsx)("td",{className:"px-4 py-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",onClick:()=>(async e=>{h(e);try{const t=await Hr.get("".concat(f$,"/users/").concat(e.id,"/permissions"));j(t.data.permissions||{})}catch(t){j({})}x(!0)})(e),className:"text-xs",children:[(0,qr.jsx)(Rc,{className:"w-3 h-3 mr-1"}),"Permissions"]}),e.full_access_granted?(0,qr.jsx)(Dl,{size:"sm",variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50 text-xs",onClick:()=>(async e=>{try{await Hr.post("".concat(f$,"/users/").concat(e.id,"/revoke-access")),Qt.success("Access revoked for ".concat(e.name)),O()}catch(t){Qt.error("Failed to revoke access")}})(e),children:(0,qr.jsx)($m,{className:"w-3 h-3"})}):(0,qr.jsx)(Dl,{size:"sm",variant:"outline",className:"text-emerald-600 border-emerald-200 hover:bg-emerald-50 text-xs",onClick:()=>(async e=>{try{await Hr.post("".concat(f$,"/users/").concat(e.id,"/grant-full-access")),Qt.success("Full access granted to ".concat(e.name)),O()}catch(t){Qt.error("Failed to grant access")}})(e),children:(0,qr.jsx)(x$,{className:"w-3 h-3"})})]})})]},e.id)})})]})})}),(0,qr.jsx)(Im,{open:p,onOpenChange:x,children:(0,qr.jsxs)(zm,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Rc,{className:"w-5 h-5 text-indigo-600"}),"Permissions for ",null===m||void 0===m?void 0:m.name]})}),(0,qr.jsxs)("div",{className:"space-y-6 py-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold ".concat("principal"===(null===m||void 0===m?void 0:m.role)?"bg-blue-500":"vice_principal"===(null===m||void 0===m?void 0:m.role)?"bg-emerald-500":"bg-slate-500"),children:null===m||void 0===m||null===(e=m.name)||void 0===e?void 0:e.charAt(0)}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold text-slate-900",children:null===m||void 0===m?void 0:m.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:null===m||void 0===m?void 0:m.email}),(0,qr.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium ".concat(T((null===m||void 0===m?void 0:m.role)||"")),children:null===m||void 0===m||null===(t=m.role)||void 0===t?void 0:t.replace("_"," ").toUpperCase()})]})]}),Object.entries(v$).map(e=>{let[t,a]=e;return(0,qr.jsxs)("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[(0,qr.jsx)("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:t})}),(0,qr.jsx)("div",{className:"divide-y divide-slate-100",children:a.map(e=>(0,qr.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-slate-50",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.label}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.description})]}),(0,qr.jsx)(XJ,{checked:y[e.key]||!1,onCheckedChange:()=>{return t=e.key,void j(e=>u(u({},e),{},{[t]:!e[t]}));var t}})]},e.key))})]},t)})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-slate-200",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(m){w(!0);try{await Hr.put("".concat(f$,"/users/").concat(m.id,"/permissions"),{permissions:y}),Qt.success("Permissions updated for ".concat(m.name)),x(!1),O()}catch(e){Qt.error("Failed to update permissions")}finally{w(!1)}}},disabled:N,className:"bg-indigo-600 hover:bg-indigo-700",children:[N?(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}):(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Save Permissions"]})]})]})}),(0,qr.jsx)(Im,{open:f,onOpenChange:g,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Xm,{className:"w-5 h-5 text-indigo-600"}),"Change Role for ",null===m||void 0===m?void 0:m.name]})}),(0,qr.jsxs)("div",{className:"space-y-4 py-4",children:[(0,qr.jsxs)("p",{className:"text-sm text-slate-600",children:["Current Role: ",(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded ".concat(T((null===m||void 0===m?void 0:m.role)||"")),children:null===m||void 0===m||null===(a=m.role)||void 0===a?void 0:a.replace("_"," ").toUpperCase()})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Select New Role"}),(0,qr.jsx)("div",{className:"grid gap-2",children:g$.map(e=>(0,qr.jsx)("button",{onClick:()=>_(e.value),className:"p-3 rounded-lg border-2 text-left transition-all ".concat(S===e.value?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"),children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(e.color," flex items-center justify-center"),children:(0,qr.jsx)(Xm,{className:"w-4 h-4 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.label}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.desc})]}),S===e.value&&(0,qr.jsx)(ph,{className:"w-5 h-5 text-indigo-600 ml-auto"})]})},e.value))})]})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-slate-200",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(m&&S){w(!0);try{await Hr.put("".concat(f$,"/users/").concat(m.id,"/role"),{role:S}),Qt.success("".concat(m.name," is now ").concat(S.replace("_"," ").toUpperCase())),g(!1),O()}catch(e){Qt.error("Failed to change role")}finally{w(!1)}}},disabled:N||S===(null===m||void 0===m?void 0:m.role),className:"bg-indigo-600 hover:bg-indigo-700",children:[N?(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}):(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Change Role"]})]})]})}),(0,qr.jsx)(Im,{open:v,onOpenChange:b,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(sh,{className:"w-5 h-5 text-indigo-600"}),"Assign Classes to ",null===m||void 0===m?void 0:m.name]})}),(0,qr.jsxs)("div",{className:"space-y-4 py-4",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-600",children:"Select classes this person can teach or manage. Even Principal/VP can be assigned classes."}),(0,qr.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:0===k.length?(0,qr.jsx)("p",{className:"text-center text-slate-500 py-4",children:"No classes found. Create classes first."}):k.map(e=>(0,qr.jsxs)("button",{onClick:()=>{return t=e.id,void A(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-full p-3 rounded-lg border-2 text-left transition-all flex items-center justify-between ".concat(E.includes(e.id)?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"),children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center",children:(0,qr.jsx)(Fc,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:["Section: ",e.section||"A"," | Students: ",e.student_count||0]})]})]}),E.includes(e.id)&&(0,qr.jsx)(ph,{className:"w-5 h-5 text-indigo-600"})]},e.id))}),(0,qr.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,qr.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,qr.jsx)("strong",{children:"Note:"})," Assigned staff will see these classes in their dashboard and can manage attendance, assignments, etc."]})})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-slate-200",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(m){w(!0);try{await Hr.put("".concat(f$,"/users/").concat(m.id,"/assign-classes"),{class_ids:E}),Qt.success("Classes assigned to ".concat(m.name)),b(!1),O()}catch(e){Qt.error("Failed to assign classes")}finally{w(!1)}}},disabled:N,className:"bg-indigo-600 hover:bg-indigo-700",children:[N?(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}):(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Save (",E.length," classes)"]})]})]})})]})}const y$=Dc("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),j$=Dc("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),N$="".concat("","/api"),w$=["Computer Lab","Science Lab","Library","Playground","Sports Complex","Auditorium","Smart Classes","CCTV Surveillance","Transport","Canteen","Medical Room","Music Room","Art Room","Dance Room","Swimming Pool","Basketball Court","Football Ground","Indoor Games","AC Classrooms","WiFi Campus"];function S$(){const{user:e,selectSchool:t}=Kr(),[a,n]=(0,s.useState)(1),[r,i]=(0,s.useState)(!1),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[m,h]=(0,s.useState)({name:"",registration_number:"",established_year:"",board_type:"CBSE",school_type:"K-12",medium:"English",shift:"Day",address:"",city:"",state:"",pincode:"",phone:"",email:"",whatsapp_number:"",website_url:"",motto:"",principal_name:"",principal_message:"",about_school:"",vision:"",mission:"",achievements:"",total_capacity:"",facilities:[],facebook_url:"",instagram_url:"",youtube_url:"",app_requirements:"",ai_assistant_name:""}),p=e=>{const{name:t,value:a}=e.target;h(e=>u(u({},e),{},{[t]:a}))},x=()=>{switch(a){case 1:return m.name&&m.board_type;case 2:return m.address&&m.city&&m.state;case 3:case 4:return!0;default:return!1}};return"director"!==(null===e||void 0===e?void 0:e.role)?(0,qr.jsxs)("div",{className:"text-center py-20",children:[(0,qr.jsx)(Ic,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h2",{className:"text-xl font-semibold text-slate-700 mb-2",children:"Access Restricted"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Only Director can register new schools."})]}):(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto","data-testid":"school-registration-page",children:[(0,qr.jsxs)("div",{className:"mb-8",children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,qr.jsx)(Ic,{className:"w-8 h-8 text-indigo-600"}),"School Registration"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-2",children:"Fill complete details so AI can understand your school better"})]}),(0,qr.jsx)("div",{className:"flex items-center justify-between mb-8",children:[{num:1,label:"Basic Info",icon:y$},{num:2,label:"Contact",icon:Gm},{num:3,label:"About School",icon:sh},{num:4,label:"Social & AI",icon:j$}].map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full ".concat(a===e.num?"bg-indigo-600 text-white":a>e.num?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"),children:[a>e.num?(0,qr.jsx)(ph,{className:"w-5 h-5"}):(0,qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"font-medium hidden sm:inline",children:e.label}),(0,qr.jsx)("span",{className:"font-medium sm:hidden",children:e.num})]}),t<3&&(0,qr.jsx)("div",{className:"w-8 md:w-16 h-1 mx-2 rounded ".concat(a>e.num?"bg-emerald-400":"bg-slate-200")})]},e.num))}),(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 md:p-8",children:[1===a&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("h2",{className:"text-xl font-semibold text-slate-800 flex items-center gap-2",children:[(0,qr.jsx)(y$,{className:"w-5 h-5 text-indigo-600"}),"Basic Information"]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,qr.jsx)(ql,{children:"School Name *"}),(0,qr.jsx)(Rl,{name:"name",value:m.name,onChange:p,placeholder:"e.g., Delhi Public School",required:!0,"data-testid":"school-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Registration/Affiliation Number"}),(0,qr.jsx)(Rl,{name:"registration_number",value:m.registration_number,onChange:p,placeholder:"e.g., CBSE/12345","data-testid":"registration-number-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Established Year"}),(0,qr.jsx)(Rl,{type:"number",name:"established_year",value:m.established_year,onChange:p,placeholder:"e.g., 1995",min:"1800",max:(new Date).getFullYear(),"data-testid":"established-year-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Board Type *"}),(0,qr.jsxs)("select",{name:"board_type",value:m.board_type,onChange:p,className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"board-type-select",children:[(0,qr.jsx)("option",{value:"NCERT",children:"NCERT (CBSE)"}),(0,qr.jsx)("option",{value:"MPBSE",children:"MP Board (MPBSE)"}),(0,qr.jsx)("option",{value:"ICSE",children:"ICSE"}),(0,qr.jsx)("option",{value:"RBSE",children:"Rajasthan Board (RBSE)"}),(0,qr.jsx)("option",{value:"UPMSP",children:"UP Board (UPMSP)"}),(0,qr.jsx)("option",{value:"CGBSE",children:"Chhattisgarh Board (CGBSE)"}),(0,qr.jsx)("option",{value:"IB",children:"IB (International)"}),(0,qr.jsx)("option",{value:"Cambridge",children:"Cambridge"})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Syllabus automatically loaded based on board selection"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"School Type"}),(0,qr.jsxs)("select",{name:"school_type",value:m.school_type,onChange:p,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"Primary",children:"Primary (1-5)"}),(0,qr.jsx)("option",{value:"Middle",children:"Middle (6-8)"}),(0,qr.jsx)("option",{value:"Secondary",children:"Secondary (9-10)"}),(0,qr.jsx)("option",{value:"Senior Secondary",children:"Senior Secondary (11-12)"}),(0,qr.jsx)("option",{value:"K-12",children:"K-12 (All Classes)"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Medium of Instruction"}),(0,qr.jsxs)("select",{name:"medium",value:m.medium,onChange:p,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"English",children:"English"}),(0,qr.jsx)("option",{value:"Hindi",children:"Hindi"}),(0,qr.jsx)("option",{value:"Both",children:"English + Hindi"}),(0,qr.jsx)("option",{value:"Regional",children:"Regional Language"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"School Shift"}),(0,qr.jsxs)("select",{name:"shift",value:m.shift,onChange:p,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"Morning",children:"Morning Shift"}),(0,qr.jsx)("option",{value:"Day",children:"Day Shift"}),(0,qr.jsx)("option",{value:"Both",children:"Both Shifts"})]})]})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 pt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ph,{className:"w-4 h-4"}),"School Logo"]}),(0,qr.jsx)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors",children:l?(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("img",{src:l,alt:"Logo Preview",className:"w-24 h-24 mx-auto object-contain"}),(0,qr.jsx)("button",{onClick:()=>{o(null),h(e=>u(u({},e),{},{logoFile:null}))},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:(0,qr.jsx)(Em,{className:"w-4 h-4"})})]}):(0,qr.jsxs)("label",{className:"cursor-pointer",children:[(0,qr.jsx)($U,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),(0,qr.jsx)("span",{className:"text-sm text-slate-500",children:"Click to upload logo"}),(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];t&&(o(URL.createObjectURL(t)),h(e=>u(u({},e),{},{logoFile:t})))},className:"hidden"})]})})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ph,{className:"w-4 h-4"}),"School Building Photo"]}),(0,qr.jsx)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors",children:c?(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("img",{src:c,alt:"Photo Preview",className:"w-full h-24 mx-auto object-cover rounded"}),(0,qr.jsx)("button",{onClick:()=>{d(null),h(e=>u(u({},e),{},{photoFile:null}))},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:(0,qr.jsx)(Em,{className:"w-4 h-4"})})]}):(0,qr.jsxs)("label",{className:"cursor-pointer",children:[(0,qr.jsx)($U,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),(0,qr.jsx)("span",{className:"text-sm text-slate-500",children:"Click to upload photo"}),(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];t&&(d(URL.createObjectURL(t)),h(e=>u(u({},e),{},{photoFile:t})))},className:"hidden"})]})})]})]})]}),2===a&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("h2",{className:"text-xl font-semibold text-slate-800 flex items-center gap-2",children:[(0,qr.jsx)(Gm,{className:"w-5 h-5 text-indigo-600"}),"Contact Information"]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Full Address *"}),(0,qr.jsx)(_Y,{name:"address",value:m.address,onChange:p,placeholder:"Complete address with landmark",rows:2,required:!0,"data-testid":"address-input"})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"City *"}),(0,qr.jsx)(Rl,{name:"city",value:m.city,onChange:p,placeholder:"e.g., Delhi",required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"State *"}),(0,qr.jsx)(Rl,{name:"state",value:m.state,onChange:p,placeholder:"e.g., Delhi",required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Pincode"}),(0,qr.jsx)(Rl,{name:"pincode",value:m.pincode,onChange:p,placeholder:"e.g., 110001"})]})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Gm,{className:"w-4 h-4"}),"Phone Number"]}),(0,qr.jsx)(Rl,{name:"phone",value:m.phone,onChange:p,placeholder:"+91 7879967616"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Wm,{className:"w-4 h-4"}),"Email"]}),(0,qr.jsx)(Rl,{type:"email",name:"email",value:m.email,onChange:p,placeholder:"info@school.com"})]})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"WhatsApp Number"}),(0,qr.jsx)(Rl,{name:"whatsapp_number",value:m.whatsapp_number,onChange:p,placeholder:"+91 7879967616"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(KY,{className:"w-4 h-4"}),"Website URL"]}),(0,qr.jsx)(Rl,{name:"website_url",value:m.website_url,onChange:p,placeholder:"https://www.yourschool.com"})]})]})]}),3===a&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("h2",{className:"text-xl font-semibold text-slate-800 flex items-center gap-2",children:[(0,qr.jsx)(sh,{className:"w-5 h-5 text-indigo-600"}),"About School (AI ke liye important)"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Ye details AI ko aapki school ke baare mein samajhne mein help karegi"}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"School Motto"}),(0,qr.jsx)(Rl,{name:"motto",value:m.motto,onChange:p,placeholder:"e.g., Knowledge is Power"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Principal Name"}),(0,qr.jsx)(Rl,{name:"principal_name",value:m.principal_name,onChange:p,placeholder:"e.g., Dr. Sharma"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Principal's Message"}),(0,qr.jsx)(_Y,{name:"principal_message",value:m.principal_message,onChange:p,placeholder:"Principal ka message for parents and students...",rows:2})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"About School (Brief Description)"}),(0,qr.jsx)(_Y,{name:"about_school",value:m.about_school,onChange:p,placeholder:"School ki history, values, aur specialities ke baare mein likhein...",rows:3})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Vision"}),(0,qr.jsx)(_Y,{name:"vision",value:m.vision,onChange:p,placeholder:"School ka vision statement...",rows:2})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Mission"}),(0,qr.jsx)(_Y,{name:"mission",value:m.mission,onChange:p,placeholder:"School ka mission statement...",rows:2})]})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(pJ,{className:"w-4 h-4"}),"Achievements"]}),(0,qr.jsx)(_Y,{name:"achievements",value:m.achievements,onChange:p,placeholder:"School ki notable achievements...",rows:2})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4"}),"Total Student Capacity"]}),(0,qr.jsx)(Rl,{type:"number",name:"total_capacity",value:m.total_capacity,onChange:p,placeholder:"e.g., 2000"})]})]}),(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsx)(ql,{children:"Facilities (Select all that apply)"}),(0,qr.jsx)("div",{className:"flex flex-wrap gap-2",children:w$.map(e=>(0,qr.jsxs)("button",{type:"button",onClick:()=>(e=>{h(t=>u(u({},t),{},{facilities:t.facilities.includes(e)?t.facilities.filter(t=>t!==e):[...t.facilities,e]}))})(e),className:"px-3 py-1.5 rounded-full text-sm transition-all ".concat(m.facilities.includes(e)?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:[m.facilities.includes(e)&&(0,qr.jsx)(ph,{className:"w-3 h-3 inline mr-1"}),e]},e))})]})]}),4===a&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("h2",{className:"text-xl font-semibold text-slate-800 flex items-center gap-2",children:[(0,qr.jsx)(j$,{className:"w-5 h-5 text-indigo-600"}),"Social Media & App Requirements"]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Facebook URL"}),(0,qr.jsx)(Rl,{name:"facebook_url",value:m.facebook_url,onChange:p,placeholder:"https://facebook.com/yourschool"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Instagram URL"}),(0,qr.jsx)(Rl,{name:"instagram_url",value:m.instagram_url,onChange:p,placeholder:"https://instagram.com/yourschool"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"YouTube URL"}),(0,qr.jsx)(Rl,{name:"youtube_url",value:m.youtube_url,onChange:p,placeholder:"https://youtube.com/@yourschool"})]})]}),(0,qr.jsxs)("div",{className:"bg-indigo-50 rounded-xl p-6 space-y-4",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-indigo-900 flex items-center gap-2",children:[(0,qr.jsx)(j$,{className:"w-5 h-5"}),"App Customization for AI"]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"What features do you need most from this app?"}),(0,qr.jsx)(_Y,{name:"app_requirements",value:m.app_requirements,onChange:p,placeholder:"e.g., Attendance tracking, Fee management, Parent communication, Homework tracking, etc.",rows:3})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Custom AI Assistant Name (Optional)"}),(0,qr.jsx)(Rl,{name:"ai_assistant_name",value:m.ai_assistant_name,onChange:p,placeholder:"e.g., SchoolBot, EduHelper (default: Schooltino AI)"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"AI assistant ka naam jo students aur teachers se baat karega"})]})]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-6",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 mb-4",children:"Registration Summary"}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"School:"}),(0,qr.jsx)("span",{className:"ml-2 font-medium",children:m.name||"Not provided"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Board:"}),(0,qr.jsx)("span",{className:"ml-2 font-medium",children:m.board_type})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Location:"}),(0,qr.jsxs)("span",{className:"ml-2 font-medium",children:[m.city,", ",m.state]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Facilities:"}),(0,qr.jsxs)("span",{className:"ml-2 font-medium",children:[m.facilities.length," selected"]})]})]})]})]}),(0,qr.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t",children:[(0,qr.jsxs)(Dl,{type:"button",variant:"outline",onClick:()=>n(e=>Math.max(e-1,1)),disabled:1===a,className:"flex items-center gap-2",children:[(0,qr.jsx)(AY,{className:"w-4 h-4"}),"Previous"]}),a<4?(0,qr.jsxs)(Dl,{type:"button",onClick:()=>n(e=>Math.min(e+1,4)),disabled:!x(),className:"btn-primary flex items-center gap-2",children:["Next",(0,qr.jsx)(qc,{className:"w-4 h-4"})]}):(0,qr.jsx)(Dl,{type:"button",onClick:async()=>{i(!0);try{const e=u(u({},m),{},{established_year:m.established_year?parseInt(m.established_year):null,total_capacity:m.total_capacity?parseInt(m.total_capacity):null});delete e.logoFile,delete e.photoFile;const a=(await Hr.post("".concat(N$,"/schools"),e)).data.id;if(m.logoFile){const e=new FormData;e.append("file",m.logoFile),await Hr.post("".concat(N$,"/schools/").concat(a,"/upload-photo?photo_type=logo"),e,{headers:{"Content-Type":"multipart/form-data"}})}if(m.photoFile){const e=new FormData;e.append("file",m.photoFile),await Hr.post("".concat(N$,"/schools/").concat(a,"/upload-photo?photo_type=main"),e,{headers:{"Content-Type":"multipart/form-data"}})}Qt.success("\ud83c\udf89 School registered successfully! AI is now ready to help."),t(a),n(1),h({name:"",registration_number:"",established_year:"",board_type:"CBSE",school_type:"K-12",medium:"English",shift:"Day",address:"",city:"",state:"",pincode:"",phone:"",email:"",whatsapp_number:"",website_url:"",motto:"",principal_name:"",principal_message:"",about_school:"",vision:"",mission:"",achievements:"",total_capacity:"",facilities:[],facebook_url:"",instagram_url:"",youtube_url:"",app_requirements:"",ai_assistant_name:""}),o(null),d(null)}catch(s){var e,a;const t=null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail;Qt.error("string"===typeof t?t:"Failed to register school")}finally{i(!1)}},disabled:r||!x(),className:"btn-primary flex items-center gap-2","data-testid":"register-school-btn",children:r?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}),"Registering..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(ph,{className:"w-4 h-4"}),"Register School"]})})]})]})]})}const _$="".concat("","/api");function k$(){const{user:e,schoolId:t}=Kr(),[a,n]=(0,s.useState)(!0),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[v,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[S,_]=(0,s.useState)(null),[k,C]=(0,s.useState)({topic:"",description:"",start_time:"",duration:60,password:"",participants:""});(0,s.useEffect)(()=>{E(),A(),P()},[t]);const E=async()=>{n(!0);try{const e=await Hr.get("".concat(_$,"/meetings?school_id=").concat(t||""));i(e.data||[])}catch(e){i([{id:"1",topic:"Weekly Staff Meeting",description:"Weekly discussion on school activities",start_time:new Date(Date.now()+864e5).toISOString(),duration:60,join_url:"https://zoom.us/j/123456789",status:"scheduled",host_name:"Director",participants_count:12,created_at:(new Date).toISOString()},{id:"2",topic:"Parent-Teacher Meeting - Class 10",description:"Board exam preparation discussion",start_time:new Date(Date.now()+1728e5).toISOString(),duration:90,join_url:"https://zoom.us/j/987654321",status:"scheduled",host_name:"Principal",participants_count:45,created_at:(new Date).toISOString()},{id:"3",topic:"Science Department Meeting",description:"Lab equipment discussion",start_time:new Date(Date.now()-864e5).toISOString(),duration:45,join_url:"https://zoom.us/j/456789123",status:"completed",host_name:"HOD Science",participants_count:8,created_at:new Date(Date.now()-1728e5).toISOString()}])}finally{n(!1)}},A=async()=>{try{const e=await Hr.get("".concat(_$,"/meetings/recordings?school_id=").concat(t||""));o(e.data||[])}catch(e){o([{id:"rec1",meeting_id:"3",topic:"Science Department Meeting",recorded_date:new Date(Date.now()-864e5).toISOString(),duration:42,file_size:156e6,download_url:"#",transcript_available:!0},{id:"rec2",meeting_id:"4",topic:"Monthly Review Meeting",recorded_date:new Date(Date.now()-6048e5).toISOString(),duration:58,file_size:21e7,download_url:"#",transcript_available:!0}])}},P=async()=>{try{const e=await Hr.get("".concat(_$,"/meetings/summaries?school_id=").concat(t||""));d(e.data||[])}catch(e){d([{id:"sum1",recording_id:"rec1",meeting_topic:"Science Department Meeting",summary:"The meeting discussed procurement of new lab equipment for Class 11-12 Physics and Chemistry labs. Budget of \u20b95 lakhs approved. New safety protocols were also reviewed.",key_points:["New microscopes needed for Biology lab","Chemistry lab needs fume hoods repair","Safety training scheduled for next month","Budget approved: \u20b95,00,000"],action_items:["HOD to submit equipment list by Friday","Admin to get vendor quotes","Safety officer to plan training dates"],sentiment:"Positive - Productive discussion with clear outcomes",generated_at:new Date(Date.now()-864e5).toISOString()}])}},O=e=>{const{name:t,value:a}=e.target;C(e=>u(u({},e),{},{[t]:"duration"===t?parseInt(a):a}))},M=async e=>{if(confirm("Delete this meeting?"))try{await Hr.delete("".concat(_$,"/meetings/").concat(e)),Qt.success("Meeting deleted"),i(r.filter(t=>t.id!==e))}catch(t){Qt.success("Meeting deleted! (Demo Mode)"),i(r.filter(t=>t.id!==e))}},T=e=>new Date(e).toLocaleDateString("hi-IN",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),D=r.filter(e=>"scheduled"===e.status&&new Date(e.start_time)>new Date),I=r.filter(e=>"completed"===e.status||new Date(e.start_time)<=new Date);return a?(0,qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-8","data-testid":"zoom-meetings-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,qr.jsx)(ah,{className:"w-8 h-8 text-blue-600"}),"Zoom Meetings"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Schedule, join, and manage video meetings"})]}),(0,qr.jsxs)(Dl,{onClick:()=>h(!0),className:"btn-primary","data-testid":"create-meeting-btn",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 mr-2"}),"New Meeting"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(eh,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:D.length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Upcoming"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(ph,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:I.length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Completed"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(mh,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:l.length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Recordings"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(th,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:c.length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"AI Summaries"})]})]})})]}),(0,qr.jsxs)(wc,{defaultValue:"upcoming",className:"space-y-6",children:[(0,qr.jsxs)(Sc,{className:"bg-slate-100 p-1 rounded-lg",children:[(0,qr.jsxs)(_c,{value:"upcoming",className:"data-[state=active]:bg-white",children:[(0,qr.jsx)(eh,{className:"w-4 h-4 mr-2"}),"Upcoming (",D.length,")"]}),(0,qr.jsxs)(_c,{value:"past",className:"data-[state=active]:bg-white",children:[(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Past (",I.length,")"]}),(0,qr.jsxs)(_c,{value:"recordings",className:"data-[state=active]:bg-white",children:[(0,qr.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Recordings (",l.length,")"]}),(0,qr.jsxs)(_c,{value:"summaries",className:"data-[state=active]:bg-white",children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"}),"AI Summaries (",c.length,")"]})]}),(0,qr.jsx)(kc,{value:"upcoming",children:0===D.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(ah,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Upcoming Meetings"}),(0,qr.jsx)("p",{className:"text-slate-500 mb-4",children:"Schedule your first meeting"}),(0,qr.jsxs)(Dl,{onClick:()=>h(!0),className:"btn-primary",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Schedule Meeting"]})]}):(0,qr.jsx)("div",{className:"grid gap-4",children:D.map(e=>(0,qr.jsx)(C$,{meeting:e,onJoin:()=>(e=>{e.join_url?window.open(e.join_url,"_blank"):Qt.error("Join link not available")})(e),onCopyLink:()=>{return t=e.join_url,a=e.id,navigator.clipboard.writeText(t),_(a),Qt.success("Link copied!"),void setTimeout(()=>_(null),2e3);var t,a},onDelete:()=>M(e.id),copied:S===e.id,formatDate:T},e.id))})}),(0,qr.jsx)(kc,{value:"past",children:0===I.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(o$,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No past meetings"})]}):(0,qr.jsx)("div",{className:"grid gap-4",children:I.map(e=>(0,qr.jsx)(C$,{meeting:e,isPast:!0,onDelete:()=>M(e.id),formatDate:T},e.id))})}),(0,qr.jsx)(kc,{value:"recordings",children:0===l.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(mh,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No recordings available"})]}):(0,qr.jsx)("div",{className:"grid gap-4",children:l.map(e=>{return(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-lg transition-shadow",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(mh,{className:"w-6 h-6 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:e.topic}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:[T(e.recorded_date)," \u2022 ",e.duration," min \u2022 ",(t=e.file_size,t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB")]}),e.transcript_available&&(0,qr.jsxs)("span",{className:"inline-flex items-center gap-1 mt-2 px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded text-xs",children:[(0,qr.jsx)(cY,{className:"w-3 h-3"}),"Transcript Available"]})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-1"}),"Download"]}),(0,qr.jsx)(Dl,{size:"sm",className:"bg-indigo-600 hover:bg-indigo-700",onClick:()=>(async e=>{w(e.id);try{await Hr.post("".concat(_$,"/meetings/recordings/").concat(e.id,"/summarize")),Qt.success("AI Summary generated!"),P()}catch(t){const a={id:"sum-".concat(Date.now()),recording_id:e.id,meeting_topic:e.topic,summary:'AI-generated summary of "'.concat(e.topic,'". This meeting covered important topics related to school operations and planning. Key decisions were made regarding upcoming activities.'),key_points:["Discussion on upcoming events","Resource allocation reviewed","Timeline for next quarter finalized","Action items assigned to team members"],action_items:["Follow up on pending tasks","Schedule next meeting","Share meeting notes with stakeholders"],sentiment:"Positive - Constructive discussion",generated_at:(new Date).toISOString()};d([a,...c]),Qt.success("AI Summary generated! (Demo Mode)")}finally{w(null)}})(e),disabled:N===e.id,children:N===e.id?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-1 animate-spin"}),"Generating..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-1"}),"AI Summary"]})})]})]})},e.id);var t})})}),(0,qr.jsx)(kc,{value:"summaries",children:0===c.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(hh,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No AI Summaries Yet"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Generate summaries from your meeting recordings"})]}):(0,qr.jsx)("div",{className:"grid gap-4",children:c.map(e=>(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>(e=>{b(e),x(!0)})(e),children:(0,qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(th,{className:"w-6 h-6 text-white"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:e.meeting_topic}),(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs",children:"AI Generated"})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2",children:e.summary}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-slate-500",children:[(0,qr.jsxs)("span",{children:[e.key_points.length," Key Points"]}),(0,qr.jsxs)("span",{children:[e.action_items.length," Action Items"]}),(0,qr.jsx)("span",{children:T(e.generated_at)})]})]}),(0,qr.jsx)(qc,{className:"w-5 h-5 text-slate-400"})]})},e.id))})})]}),(0,qr.jsx)(Im,{open:m,onOpenChange:h,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(ah,{className:"w-5 h-5 text-blue-600"}),"Schedule New Meeting"]}),(0,qr.jsx)(qm,{children:"Create a Zoom meeting and invite participants"})]}),(0,qr.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),k.topic&&k.start_time){j(!0);try{await Hr.post("".concat(_$,"/meetings"),u(u({},k),{},{school_id:t,host_id:null===e||void 0===e?void 0:e.id,host_name:null===e||void 0===e?void 0:e.name}));Qt.success("Meeting scheduled successfully!"),h(!1),C({topic:"",description:"",start_time:"",duration:60,password:"",participants:""}),E()}catch(s){Qt.success("Meeting scheduled! (Demo Mode)"),h(!1);const t=u(u({id:Date.now().toString()},k),{},{join_url:"https://zoom.us/j/".concat(Math.floor(1e9*Math.random())),status:"scheduled",host_name:null===e||void 0===e?void 0:e.name,participants_count:0,created_at:(new Date).toISOString()});i([t,...r]),C({topic:"",description:"",start_time:"",duration:60,password:"",participants:""})}finally{j(!1)}}else Qt.error("Please fill topic and start time")},className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Meeting Topic *"}),(0,qr.jsx)(Rl,{name:"topic",value:k.topic,onChange:O,placeholder:"e.g., Weekly Staff Meeting",required:!0,"data-testid":"meeting-topic-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Description"}),(0,qr.jsx)(_Y,{name:"description",value:k.description,onChange:O,placeholder:"Meeting agenda or description...",rows:2})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Start Time *"}),(0,qr.jsx)(Rl,{type:"datetime-local",name:"start_time",value:k.start_time,onChange:O,required:!0})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Duration (minutes)"}),(0,qr.jsxs)("select",{name:"duration",value:k.duration,onChange:O,className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:30,children:"30 minutes"}),(0,qr.jsx)("option",{value:45,children:"45 minutes"}),(0,qr.jsx)("option",{value:60,children:"1 hour"}),(0,qr.jsx)("option",{value:90,children:"1.5 hours"}),(0,qr.jsx)("option",{value:120,children:"2 hours"})]})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Meeting Password (Optional)"}),(0,qr.jsx)(Rl,{type:"text",name:"password",value:k.password,onChange:O,placeholder:"Leave empty for no password"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Invite Participants (Emails, comma separated)"}),(0,qr.jsx)(_Y,{name:"participants",value:k.participants,onChange:O,placeholder:"teacher1@school.com, parent@email.com",rows:2})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",className:"btn-primary",disabled:y,children:y?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}),"Scheduling..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(ah,{className:"w-4 h-4 mr-2"}),"Schedule Meeting"]})})]})]})]})}),(0,qr.jsx)(Im,{open:p,onOpenChange:x,children:(0,qr.jsxs)(zm,{className:"max-w-2xl",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(th,{className:"w-5 h-5 text-indigo-600"}),"AI Meeting Summary"]})}),v&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-lg text-slate-900 mb-2",children:v.meeting_topic}),(0,qr.jsx)("p",{className:"text-slate-600",children:v.summary})]}),(0,qr.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl",children:[(0,qr.jsxs)("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-4 h-4"}),"Key Points"]}),(0,qr.jsx)("ul",{className:"space-y-2",children:v.key_points.map((e,t)=>(0,qr.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,qr.jsx)("span",{className:"text-blue-500 mt-0.5",children:"\u2022"}),(0,qr.jsx)("span",{className:"text-slate-700",children:e})]},t))})]}),(0,qr.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-xl",children:[(0,qr.jsxs)("h4",{className:"font-semibold text-emerald-900 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(ph,{className:"w-4 h-4"}),"Action Items"]}),(0,qr.jsx)("ul",{className:"space-y-2",children:v.action_items.map((e,t)=>(0,qr.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,qr.jsx)("span",{className:"text-emerald-500 mt-0.5",children:"\u2713"}),(0,qr.jsx)("span",{className:"text-slate-700",children:e})]},t))})]}),(0,qr.jsxs)("div",{className:"p-4 bg-amber-50 rounded-xl",children:[(0,qr.jsx)("h4",{className:"font-semibold text-amber-900 mb-2",children:"Meeting Sentiment"}),(0,qr.jsx)("p",{className:"text-slate-700 text-sm",children:v.sentiment})]}),(0,qr.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:[(0,qr.jsxs)(Dl,{variant:"outline",className:"flex-1",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),(0,qr.jsxs)(Dl,{variant:"outline",className:"flex-1",children:[(0,qr.jsx)(PJ,{className:"w-4 h-4 mr-2"}),"Share via WhatsApp"]})]})]})]})})]})}function C$(e){let{meeting:t,onJoin:a,onCopyLink:s,onDelete:n,copied:r,isPast:i,formatDate:l}=e;return(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-lg transition-shadow ".concat(i?"opacity-75":""),children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(i?"bg-slate-100":"bg-blue-100"),children:(0,qr.jsx)(ah,{className:"w-6 h-6 ".concat(i?"text-slate-500":"text-blue-600")})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:t.topic}),t.description&&(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1 line-clamp-1",children:t.description}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(eh,{className:"w-4 h-4"}),l(t.start_time)]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4"}),t.duration," min"]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4"}),t.participants_count||0]})]}),(0,qr.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Host: ",t.host_name]})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[!i&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)(Dl,{onClick:a,className:"bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(ah,{className:"w-4 h-4 mr-1"}),"Join"]}),(0,qr.jsx)(Dl,{variant:"outline",size:"icon",onClick:s,children:r?(0,qr.jsx)(ph,{className:"w-4 h-4 text-emerald-600"}):(0,qr.jsx)(XU,{className:"w-4 h-4"})})]}),i&&(0,qr.jsx)("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm",children:"Completed"}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:n,className:"text-slate-400 hover:text-red-500",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})]})})}const E$=Dc("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),A$="".concat("","/api"),P$={School:Ic,GraduationCap:Fc,Users:Lc,UserPlus:kh,Wallet:Zm,Globe:KY,Video:ah};function O$(){var e,t;const{user:a}=Kr(),n=Se(),[r,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{h(),p()},[]);const h=async()=>{try{const e=await Hr.get("".concat(A$,"/setup/wizard"));o(e.data)}catch(e){console.error("Error fetching wizard:",e)}finally{i(!1)}},p=async()=>{try{const e=await Hr.get("".concat(A$,"/setup/ai-guide"));d(e.data)}catch(e){console.error("Error fetching AI guide:",e)}},x=e=>{const t=e.route.startsWith("/app")?e.route:"/app".concat(e.route);n(t)};return r?(0,qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):"director"!==(null===a||void 0===a?void 0:a.role)?(0,qr.jsxs)("div",{className:"text-center py-20",children:[(0,qr.jsx)(Ic,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h2",{className:"text-xl font-semibold text-slate-700 mb-2",children:"Access Restricted"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Only Director can access the Setup Wizard."})]}):(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8","data-testid":"setup-wizard-page",children:[(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"\ud83d\ude80 School Setup Wizard"}),(0,qr.jsx)("p",{className:"text-slate-500 mt-2",children:"Complete these steps to get your school fully configured"})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h2",{className:"font-semibold text-slate-800",children:"Setup Progress"}),(0,qr.jsxs)("span",{className:"text-2xl font-bold text-indigo-600",children:[(null===l||void 0===l?void 0:l.completion_percentage)||0,"%"]})]}),(0,qr.jsx)("div",{className:"w-full h-3 bg-slate-100 rounded-full overflow-hidden",children:(0,qr.jsx)("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-500",style:{width:"".concat((null===l||void 0===l?void 0:l.completion_percentage)||0,"%")}})}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-2",children:null!==l&&void 0!==l&&l.is_completed?"\ud83c\udf89 All steps completed!":"".concat((null===l||void 0===l||null===(e=l.steps)||void 0===e?void 0:e.filter(e=>e.is_completed).length)||0," of ").concat((null===l||void 0===l?void 0:l.total_steps)||7," steps completed")})]}),c&&!(null!==l&&void 0!==l&&l.is_completed)&&(0,qr.jsx)("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 rounded-2xl p-6 text-white",children:(0,qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,qr.jsx)(hh,{className:"w-6 h-6"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"AI Setup Assistant"}),(0,qr.jsx)("p",{className:"text-indigo-100 mb-4",children:c.message}),c.instructions&&(0,qr.jsx)("ul",{className:"space-y-2 mb-4",children:c.instructions.map((e,t)=>(0,qr.jsxs)("li",{className:"flex items-start gap-2 text-sm text-indigo-100",children:[(0,qr.jsx)(E$,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,qr.jsx)("span",{children:e})]},t))}),c.current_step&&(0,qr.jsxs)(Dl,{onClick:()=>x(c.current_step),className:"bg-white text-indigo-700 hover:bg-indigo-50",children:[(0,qr.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Start: ",c.current_step.title,(0,qr.jsx)(uh,{className:"w-4 h-4 ml-2"})]})]})]})}),(0,qr.jsx)("div",{className:"space-y-4",children:null===l||void 0===l||null===(t=l.steps)||void 0===t?void 0:t.map((e,t)=>{const a=P$[e.icon]||Ic,s=l.current_step===e.step_number;return(0,qr.jsx)("div",{className:"bg-white rounded-xl border-2 p-4 transition-all cursor-pointer hover:shadow-lg ".concat(e.is_completed?"border-emerald-200 bg-emerald-50/50":s?"border-indigo-400 shadow-md":"border-slate-200"),onClick:()=>x(e),children:(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e.is_completed?"bg-emerald-100":s?"bg-indigo-100":"bg-slate-100"),children:e.is_completed?(0,qr.jsx)(ph,{className:"w-6 h-6 text-emerald-600"}):(0,qr.jsx)(a,{className:"w-6 h-6 ".concat(s?"text-indigo-600":"text-slate-500")})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)("span",{className:"text-sm font-medium ".concat(e.is_completed?"text-emerald-600":"text-slate-400"),children:["Step ",e.step_number]}),e.is_completed&&(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded text-xs",children:"Completed"}),s&&!e.is_completed&&(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs animate-pulse",children:"Current"})]}),(0,qr.jsx)("h3",{className:"font-semibold ".concat(e.is_completed?"text-emerald-800":"text-slate-800"),children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.description})]}),(0,qr.jsx)(qc,{className:"w-5 h-5 ".concat(e.is_completed?"text-emerald-400":"text-slate-400")})]})},e.step_number)})}),(null===l||void 0===l?void 0:l.is_completed)&&(0,qr.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-8 text-white text-center",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,qr.jsx)(ph,{className:"w-8 h-8"})}),(0,qr.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\ud83c\udf89 Setup Complete!"}),(0,qr.jsx)("p",{className:"text-emerald-100 mb-6",children:"Your school is now fully configured and ready to use Schooltino."}),(0,qr.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,qr.jsx)(Dl,{onClick:()=>n("/dashboard"),className:"bg-white text-emerald-700 hover:bg-emerald-50",children:"Go to Dashboard"}),(0,qr.jsxs)(Dl,{onClick:()=>n("/ai-paper"),variant:"outline",className:"border-white text-white hover:bg-white/10",children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"}),"Try AI Features"]})]})]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-6 text-center",children:[(0,qr.jsx)(ih,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),(0,qr.jsx)("h3",{className:"font-semibold text-slate-700 mb-1",children:"Need Help?"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Our AI assistant is here to guide you through each step"}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>n("/voice-assistant"),children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"}),"Talk to AI Assistant"]})]})]})}const M$=Dc("badge-percent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]),T$=Dc("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),D$=Dc("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var I$=a(5520);const R$="".concat("","/api");function L$(){const{user:e,schoolId:t}=Kr(),{error:a,isLoading:n,Razorpay:r}=(0,I$.useRazorpay)(),[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(null),[p,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{f()},[t]);const f=async()=>{try{const e=localStorage.getItem("token"),a=e?{Authorization:"Bearer ".concat(e)}:{},[s,n,r]=await Promise.all([Hr.get("".concat(R$,"/subscription/plans")),t?Hr.get("".concat(R$,"/subscription/current/").concat(t),{headers:a}):Promise.resolve({data:null}),Hr.get("".concat(R$,"/payments/config"))]);c(s.data.plans),u(n.data),x(r.data)}catch(e){console.error("Error fetching subscription data:",e)}finally{l(!1)}},g=(0,s.useCallback)(async s=>{if(t)if(null!==p&&void 0!==p&&p.configured)if(n)Qt.info("Payment gateway is loading. Please wait...");else if(a)Qt.error("Failed to load payment gateway. Please refresh the page.");else if(r){h(s);try{const a=localStorage.getItem("token"),n=await Hr.post("".concat(R$,"/payments/create-order"),{plan_type:s,school_id:t},{headers:{Authorization:"Bearer ".concat(a)}}),{order_id:i,amount:l,key_id:o}=n.data,c={key:o,amount:l,currency:"INR",name:"Schooltino",description:"".concat("monthly"===s?"Monthly":"Yearly"," Subscription"),order_id:i,handler:async e=>{try{(await Hr.post("".concat(R$,"/payments/verify"),{razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,school_id:t,plan_type:s},{headers:{Authorization:"Bearer ".concat(a)}})).data.success&&(Qt.success("Payment successful! Subscription activated."),f())}catch(n){Qt.error("Payment verification failed. Please contact support.")}},prefill:{name:(null===e||void 0===e?void 0:e.name)||"",email:(null===e||void 0===e?void 0:e.email)||"",contact:(null===e||void 0===e?void 0:e.phone)||""},theme:{color:"#4F46E5"},modal:{ondismiss:()=>{h(null),Qt.info("Payment cancelled")}}};new r(c).open()}catch(o){var i,l;Qt.error((null===(i=o.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.detail)||"Failed to initiate payment")}finally{h(null)}}else Qt.error("Payment gateway not available. Please refresh the page.");else Qt.error("Payment gateway not configured. Please contact support.");else Qt.error("Please complete school registration first")},[r,n,a,t,e,p]);return i?(0,qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8","data-testid":"subscription-page",children:[(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center justify-center gap-3",children:[(0,qr.jsx)(zc,{className:"w-8 h-8 text-amber-500"}),"Subscription Plans"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-2",children:"Choose the perfect plan for your school"})]}),d&&"no_subscription"!==d.status&&(0,qr.jsx)("div",{className:"rounded-2xl p-6 ".concat("active"===d.status?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":"bg-amber-50 border-2 border-amber-200 text-amber-900"),children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h2",{className:"text-xl font-bold flex items-center gap-2",children:"active"===d.status?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(ph,{className:"w-6 h-6"}),"Active: ","free_trial"===d.plan_type?"Free Trial":"monthly"===d.plan_type?"Monthly Plan":"Yearly Plan"]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(QU,{className:"w-6 h-6"}),"Subscription ",d.status]})}),"active"===d.status&&(0,qr.jsxs)("div",{className:"mt-2 flex items-center gap-6 text-sm",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(eh,{className:"w-4 h-4"}),d.days_remaining," days remaining"]}),d.ai_active?(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(hh,{className:"w-4 h-4"}),"AI: ",d.ai_days_remaining," days left"]}):(0,qr.jsxs)("span",{className:"flex items-center gap-1 opacity-75",children:[(0,qr.jsx)(hh,{className:"w-4 h-4"}),"AI trial ended"]})]})]}),"expired"===d.status&&(0,qr.jsx)(Dl,{className:"bg-amber-600 hover:bg-amber-700",children:"Renew Now"})]})}),(0,qr.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:o.map(e=>{const a=(null===d||void 0===d?void 0:d.plan_type)===e.id&&"active"===(null===d||void 0===d?void 0:d.status),s="yearly"===e.id;return(0,qr.jsxs)("div",{className:"relative bg-white rounded-2xl border-2 p-6 transition-all ".concat(s?"border-indigo-500 shadow-xl scale-105":"border-slate-200 hover:border-indigo-200 hover:shadow-lg"),children:[e.badge&&(0,qr.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:(0,qr.jsx)("span",{className:"px-4 py-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-semibold rounded-full",children:e.badge})}),(0,qr.jsxs)("div",{className:"text-center mb-6",children:[(0,qr.jsx)("div",{className:"w-14 h-14 mx-auto rounded-2xl flex items-center justify-center mb-4 ".concat("free_trial"===e.id?"bg-emerald-100":"monthly"===e.id?"bg-blue-100":"bg-purple-100"),children:"free_trial"===e.id?(0,qr.jsx)(nJ,{className:"w-7 h-7 text-emerald-600"}):"monthly"===e.id?(0,qr.jsx)(nH,{className:"w-7 h-7 text-blue-600"}):(0,qr.jsx)(zc,{className:"w-7 h-7 text-purple-600"})}),(0,qr.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:e.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.duration})]}),(0,qr.jsxs)("div",{className:"text-center mb-6",children:[e.original_price&&(0,qr.jsx)("p",{className:"text-sm text-slate-400 line-through",children:e.original_price}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:e.price_display}),e.savings&&(0,qr.jsxs)("p",{className:"text-sm text-emerald-600 font-medium flex items-center justify-center gap-1 mt-1",children:[(0,qr.jsx)(M$,{className:"w-4 h-4"}),e.savings]}),e.ai_note&&(0,qr.jsxs)("p",{className:"text-xs text-amber-600 mt-2 bg-amber-50 px-3 py-1 rounded-full inline-block",children:["\u26a1 ",e.ai_note]})]}),(0,qr.jsx)("ul",{className:"space-y-3 mb-6",children:e.features.map((e,t)=>(0,qr.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,qr.jsx)(ph,{className:"w-5 h-5 text-emerald-500 flex-shrink-0"}),(0,qr.jsx)("span",{className:"text-slate-600",children:e})]},t))}),(0,qr.jsx)(Dl,{onClick:()=>(async e=>{if(t)if("free_trial"!==e&&null!==p&&void 0!==p&&p.configured)g(e);else{h(e);try{const a=localStorage.getItem("token");await Hr.post("".concat(R$,"/subscription/activate"),{plan_type:e,school_id:t},{headers:{Authorization:"Bearer ".concat(a)}}),Qt.success("Plan activated successfully!"),f()}catch(n){var a,s;Qt.error((null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Failed to activate plan")}finally{h(null)}}else Qt.error("Please complete school registration first")})(e.id),disabled:a||m===e.id,className:"w-full ".concat(a?"bg-slate-100 text-slate-500 cursor-not-allowed":s?"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700":"bg-slate-900 hover:bg-slate-800"),children:m===e.id?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin"}):a?"Current Plan":"free_trial"===e.id?(0,qr.jsxs)(qr.Fragment,{children:["Start Free Trial ",(0,qr.jsx)(uh,{className:"w-4 h-4 ml-2"})]}):(0,qr.jsxs)(qr.Fragment,{children:["Subscribe Now ",(0,qr.jsx)(uh,{className:"w-4 h-4 ml-2"})]})})]},e.id)})}),(0,qr.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:[(0,qr.jsx)("h2",{className:"text-xl font-bold text-slate-900 text-center mb-8",children:"All Plans Include"}),(0,qr.jsx)("div",{className:"grid md:grid-cols-4 gap-6",children:[{icon:Rc,title:"Secure Data",desc:"Bank-level security for your data"},{icon:hh,title:"AI Features",desc:"Smart automation & insights"},{icon:T$,title:"24/7 Support",desc:"Always here to help you"},{icon:D$,title:"Free Updates",desc:"Latest features automatically"}].map((e,t)=>(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,qr.jsx)(e.icon,{className:"w-6 h-6 text-indigo-600"})}),(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.desc})]},t))})]}),(0,qr.jsx)("div",{className:"text-center py-8",children:(0,qr.jsxs)("p",{className:"text-slate-500",children:["Questions about pricing? Contact us at"," ",(0,qr.jsx)("a",{href:"mailto:support@schooltino.in",className:"text-indigo-600 font-medium",children:"support@schooltino.in"})]})})]})}function F$(){const{user:e,login:t}=Kr(),a=Se(),[n,r]=(0,s.useState)(!1),[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)({email:"",password:""});(0,s.useEffect)(()=>{window.matchMedia("(display-mode: standalone)").matches&&c(!0);const e=e=>{e.preventDefault(),l(e)};return window.addEventListener("beforeinstallprompt",e),()=>window.removeEventListener("beforeinstallprompt",e)},[]),(0,s.useEffect)(()=>{e&&("student"===e.role?a("/student-dashboard"):"director"===e.role?a("/app/dashboard"):a("/portal"))},[e,a]);const x=async()=>{if(i){i.prompt();const{outcome:e}=await i.userChoice;"accepted"===e&&(Qt.success("TeachTino installed! \ud83d\udcf1"),c(!0)),l(null)}else Qt.info("Add to Home Screen from browser menu")};return(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50",children:[(0,qr.jsx)("header",{className:"bg-white/80 backdrop-blur-lg border-b border-emerald-100 sticky top-0 z-50",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Fc,{className:"w-7 h-7 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-emerald-800",children:"TeachTino"}),(0,qr.jsx)("p",{className:"text-xs text-emerald-600",children:"AI-Powered Teacher Portal"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[!o&&(0,qr.jsxs)(Dl,{onClick:x,variant:"outline",className:"border-emerald-300 text-emerald-700 hover:bg-emerald-50",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Install App"]}),(0,qr.jsx)("a",{href:"/",className:"text-emerald-600 hover:text-emerald-800 text-sm",children:"\u2190 Back to Schooltino"})]})]})}),(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,qr.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-100 rounded-full text-emerald-700 text-sm font-medium mb-6",children:[(0,qr.jsx)(hh,{className:"w-4 h-4"}),"For Teachers Only"]}),(0,qr.jsxs)("h2",{className:"text-4xl sm:text-5xl font-bold text-slate-900 leading-tight mb-6",children:["Your AI Teaching",(0,qr.jsx)("span",{className:"block text-emerald-600",children:"Assistant is Here"})]}),(0,qr.jsx)("p",{className:"text-lg text-slate-600 mb-8",children:"TeachTino helps you create lesson plans, question papers, worksheets, and manage your classroom - all powered by AI."}),(0,qr.jsx)("div",{className:"grid sm:grid-cols-2 gap-4 mb-8",children:[{icon:th,title:"AI Lesson Plans",desc:"Generate daily plans instantly"},{icon:cY,title:"Question Papers",desc:"Create exam papers in 2 mins"},{icon:eh,title:"Attendance",desc:"Mark attendance quickly"},{icon:oh,title:"Student Analytics",desc:"Track weak & strong students"},{icon:lJ,title:"Voice Commands",desc:"Hindi + English supported"},{icon:j$,title:"Syllabus Tracker",desc:"Track your progress"}].map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-white rounded-xl border border-emerald-100",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,qr.jsx)(e.icon,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-800",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.desc})]})]},t))}),(0,qr.jsxs)("div",{className:"bg-emerald-600 text-white rounded-2xl p-6",children:[(0,qr.jsx)("div",{className:"flex items-center gap-2 mb-3",children:[1,2,3,4,5].map(e=>(0,qr.jsx)(D$,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},e))}),(0,qr.jsx)("p",{className:"italic mb-3",children:'"TeachTino AI has reduced my paper-work by 70%. I can now focus more on actual teaching!"'}),(0,qr.jsx)("p",{className:"text-emerald-200 text-sm",children:"- Science Teacher, DPS Noida"})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 border border-emerald-100",children:[(0,qr.jsxs)("div",{className:"text-center mb-8",children:[(0,qr.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,qr.jsx)(Fc,{className:"w-10 h-10 text-white"})}),(0,qr.jsx)("h3",{className:"text-2xl font-bold text-slate-900",children:"Teacher Login"}),(0,qr.jsx)("p",{className:"text-slate-500 mt-2",children:"Access your TeachTino dashboard"})]}),(0,qr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),r(!0);try{const e=await t(h.email,h.password);["teacher","principal","vice_principal","co_director","admin_staff","accountant","admission_staff","clerk"].includes(e.role)||"director"===e.role?(Qt.success("Welcome, ".concat(e.name,"! \ud83c\udf93")),"director"===e.role?a("/app/dashboard"):a("/portal")):"student"===e.role?(Qt.info("Students should use StudyTino portal"),a("/studytino")):Qt.error("Access denied for this role")}catch(s){Qt.error("Invalid credentials")}finally{r(!1)}},className:"space-y-5",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{className:"text-slate-700",children:"Email Address"}),(0,qr.jsx)(Rl,{type:"email",value:h.email,onChange:e=>p(u(u({},h),{},{email:e.target.value})),placeholder:"teacher@school.com",className:"h-12 mt-1 border-emerald-200 focus:border-emerald-500",required:!0})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{className:"text-slate-700",children:"Password"}),(0,qr.jsx)(Rl,{type:"password",value:h.password,onChange:e=>p(u(u({},h),{},{password:e.target.value})),placeholder:"Enter your password",className:"h-12 mt-1 border-emerald-200 focus:border-emerald-500",required:!0})]}),(0,qr.jsx)(Dl,{type:"submit",disabled:n,className:"w-full h-14 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-lg",children:n?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin"}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)($m,{className:"w-5 h-5 mr-2"}),"Login to TeachTino"]})}),(0,qr.jsxs)("button",{type:"button",onClick:()=>m(!0),className:"w-full text-center text-sm text-indigo-600 hover:text-indigo-800 hover:underline flex items-center justify-center gap-1 mt-3",children:[(0,qr.jsx)(Vm,{className:"w-3 h-3"}),"Forgot Password?"]})]}),(0,qr.jsx)(Qm,{isOpen:d,onClose:()=>m(!1),onSuccess:()=>Qt.success("Password reset! Please login.")}),(0,qr.jsx)("div",{className:"mt-8 pt-8 border-t border-slate-100",children:(0,qr.jsxs)("div",{className:"bg-emerald-50 rounded-xl p-4 text-center",children:[(0,qr.jsx)(dh,{className:"w-8 h-8 text-emerald-600 mx-auto mb-2"}),(0,qr.jsx)("h4",{className:"font-semibold text-emerald-800 mb-1",children:"Install TeachTino App"}),(0,qr.jsx)("p",{className:"text-sm text-emerald-600 mb-3",children:"Get quick access from your home screen"}),(0,qr.jsx)(Dl,{onClick:x,variant:"outline",className:"border-emerald-300 text-emerald-700 hover:bg-emerald-100",disabled:o,children:o?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Already Installed"]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Install Now"]})})]})}),(0,qr.jsx)("p",{className:"text-center text-sm text-slate-500 mt-6",children:"Don't have an account? Ask your school admin to create one."})]})]})}),(0,qr.jsx)("footer",{className:"bg-emerald-800 text-white py-8 mt-12",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[(0,qr.jsxs)("p",{className:"text-emerald-200",children:["TeachTino is part of ",(0,qr.jsx)("span",{className:"font-semibold",children:"Schooltino"})," - India's #1 AI-Powered School Management System"]}),(0,qr.jsx)("p",{className:"text-sm text-emerald-300 mt-2",children:"\ud83d\udcde +91 7879967616 | \ud83c\udf10 schooltino.in"})]})})]})}const z$=Dc("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),B$="".concat("","/api");function U$(){var e;const{user:t}=Kr(),[a,n]=(0,s.useState)(!0),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),[f,g]=(0,s.useState)(0),[v,b]=(0,s.useState)({}),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(0),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)({title:"",subject:"",class_id:"",duration:30,total_marks:100,instructions:"",questions:[]}),[E,A]=(0,s.useState)({question:"",options:["","","",""],correct_answer:0,marks:1}),P="teacher"===(null===t||void 0===t?void 0:t.role),O="student"===(null===t||void 0===t?void 0:t.role);(0,s.useEffect)(()=>{M(),O&&T()},[t]),(0,s.useEffect)(()=>{let e;return y&&N>0&&(e=setInterval(()=>{w(e=>e<=1?(I(),0):e-1)},1e3)),()=>clearInterval(e)},[y,N]);const M=async()=>{n(!0);try{const e=localStorage.getItem("token"),t=await Hr.get("".concat(B$,"/exams"),{headers:{Authorization:"Bearer ".concat(e)}});i(t.data||[])}catch(e){console.error("Error fetching exams:",e),i([])}finally{n(!1)}},T=async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat(B$,"/exams/my-results"),{headers:{Authorization:"Bearer ".concat(e)}});o(t.data||[])}catch(e){console.error("Error fetching results:",e),o([])}},D=()=>{C({title:"",subject:"",class_id:"",duration:30,total_marks:100,instructions:"",questions:[]})},I=async()=>{_(!0);try{const e=localStorage.getItem("token"),t=(await Hr.post("".concat(B$,"/exams/").concat(p.id,"/submit"),{exam_id:p.id,answers:v},{headers:{Authorization:"Bearer ".concat(e)}})).data;Qt.success("Exam submitted! Your score: ".concat(t.score,"/").concat(t.total_marks," (").concat(t.percentage,"%)")),o([t,...l]),h(!1),j(!1),M()}catch(a){var e,t;console.error("Error submitting exam:",a),Qt.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to submit exam")}finally{_(!1)}};return a?(0,qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-8","data-testid":"online-exam-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,qr.jsx)(cY,{className:"w-8 h-8 text-indigo-600"}),"Online Exam System"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:P?"Create and manage online tests for your students":"Take exams and view your results"})]}),P&&(0,qr.jsxs)(Dl,{onClick:()=>d(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 mr-2"}),"Create Exam"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(cY,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:r.filter(e=>"active"===e.status).length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Active Exams"})]})]})}),O&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(ph,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:l.length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Completed"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(fJ,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[l.length>0?Math.round(l.reduce((e,t)=>e+t.percentage,0)/l.length):0,"%"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Avg Score"})]})]})})]}),P&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:"156"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Submissions"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(j$,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:"72%"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Pass Rate"})]})]})})]})]}),(0,qr.jsxs)(wc,{defaultValue:"exams",className:"space-y-6",children:[(0,qr.jsxs)(Sc,{className:"bg-slate-100 p-1 rounded-lg",children:[(0,qr.jsxs)(_c,{value:"exams",className:"data-[state=active]:bg-white",children:[(0,qr.jsx)(cY,{className:"w-4 h-4 mr-2"}),P?"My Exams":"Available Exams"]}),O&&(0,qr.jsxs)(_c,{value:"results",className:"data-[state=active]:bg-white",children:[(0,qr.jsx)(fJ,{className:"w-4 h-4 mr-2"}),"My Results"]})]}),(0,qr.jsx)(kc,{value:"exams",children:0===r.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(cY,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Exams Available"}),(0,qr.jsx)("p",{className:"text-slate-500",children:P?"Create your first exam to get started":"No exams scheduled yet"})]}):(0,qr.jsx)("div",{className:"grid gap-4",children:r.map(e=>(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,qr.jsx)("div",{className:"w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(sh,{className:"w-7 h-7 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 text-lg",children:e.title}),(0,qr.jsxs)("p",{className:"text-slate-500",children:[e.subject," \u2022 ",e.class_name]}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4"}),e.duration," mins"]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(j$,{className:"w-4 h-4"}),e.total_marks," marks"]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(cY,{className:"w-4 h-4"}),e.total_questions," questions"]})]}),(0,qr.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Created by: ",e.created_by_name||e.created_by]})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:["active"===e.status&&(0,qr.jsx)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm",children:"Active"}),O&&(0,qr.jsxs)(Dl,{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),a=(await Hr.get("".concat(B$,"/exams/").concat(e.id),{headers:{Authorization:"Bearer ".concat(t)}})).data;x(a),w(60*a.duration),b({}),g(0),j(!1),h(!0)}catch(a){var t;400===(null===(t=a.response)||void 0===t?void 0:t.status)?Qt.error("You have already attempted this exam"):Qt.error("Failed to load exam")}})(e),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Start Exam"]}),P&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Dl,{variant:"outline",size:"icon",children:(0,qr.jsx)(Hc,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{variant:"outline",size:"icon",children:(0,qr.jsx)(sH,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})]})]})},e.id))})}),O&&(0,qr.jsx)(kc,{value:"results",children:0===l.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(fJ,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Results Yet"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Complete an exam to see your results here"})]}):(0,qr.jsx)("div",{className:"grid gap-4",children:l.map(e=>(0,qr.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center ".concat(e.percentage>=80?"bg-emerald-100":e.percentage>=60?"bg-amber-100":"bg-red-100"),children:(0,qr.jsx)(fJ,{className:"w-7 h-7 ".concat(e.percentage>=80?"text-emerald-600":e.percentage>=60?"text-amber-600":"text-red-600")})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:e.exam_title}),(0,qr.jsx)("p",{className:"text-slate-500",children:e.subject}),(0,qr.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Submitted: ",new Date(e.submitted_at).toLocaleDateString()]})]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[e.percentage,"%"]}),(0,qr.jsxs)("p",{className:"text-slate-500",children:[e.score,"/",e.total_marks," marks"]}),e.rank&&(0,qr.jsxs)("p",{className:"text-sm text-indigo-600 mt-1",children:["Rank: #",e.rank," of ",e.total_students]})]})]})},e.id))})})]}),(0,qr.jsx)(Im,{open:c,onOpenChange:d,children:(0,qr.jsxs)(zm,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-5 h-5 text-indigo-600"}),"Create New Exam"]})}),(0,qr.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,qr.jsx)(ql,{children:"Exam Title *"}),(0,qr.jsx)(Rl,{value:k.title,onChange:e=>C(u(u({},k),{},{title:e.target.value})),placeholder:"e.g., Mathematics Unit Test - Chapter 5"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Subject *"}),(0,qr.jsx)(Rl,{value:k.subject,onChange:e=>C(u(u({},k),{},{subject:e.target.value})),placeholder:"e.g., Mathematics"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Class"}),(0,qr.jsx)(Rl,{value:k.class_id,onChange:e=>C(u(u({},k),{},{class_id:e.target.value})),placeholder:"e.g., Class 10-A"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Duration (minutes)"}),(0,qr.jsx)(Rl,{type:"number",value:k.duration,onChange:e=>C(u(u({},k),{},{duration:parseInt(e.target.value)}))})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Total Marks"}),(0,qr.jsx)(Rl,{type:"number",value:k.total_marks,onChange:e=>C(u(u({},k),{},{total_marks:parseInt(e.target.value)}))})]}),(0,qr.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,qr.jsx)(ql,{children:"Instructions"}),(0,qr.jsx)(_Y,{value:k.instructions,onChange:e=>C(u(u({},k),{},{instructions:e.target.value})),placeholder:"Enter exam instructions for students...",rows:2})]})]}),(0,qr.jsxs)("div",{className:"border-t pt-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(th,{className:"w-5 h-5 text-indigo-600"}),"Add Questions (",k.questions.length," added)"]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4 space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Question *"}),(0,qr.jsx)(_Y,{value:E.question,onChange:e=>A(u(u({},E),{},{question:e.target.value})),placeholder:"Enter your question here...",rows:2})]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-3",children:E.options.map((e,t)=>(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{type:"radio",name:"correct",checked:E.correct_answer===t,onChange:()=>A(u(u({},E),{},{correct_answer:t})),className:"text-indigo-600"}),"Option ",t+1," ",E.correct_answer===t&&"(Correct)"]}),(0,qr.jsx)(Rl,{value:e,onChange:e=>{const a=[...E.options];a[t]=e.target.value,A(u(u({},E),{},{options:a}))},placeholder:"Option ".concat(t+1)})]},t))}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(ql,{children:"Marks:"}),(0,qr.jsx)(Rl,{type:"number",value:E.marks,onChange:e=>A(u(u({},E),{},{marks:parseInt(e.target.value)})),className:"w-20",min:1})]}),(0,qr.jsxs)(Dl,{onClick:()=>{E.question&&!E.options.some(e=>!e)?(C(e=>u(u({},e),{},{questions:[...e.questions,u(u({},E),{},{id:Date.now()})]})),A({question:"",options:["","","",""],correct_answer:0,marks:1}),Qt.success("Question added!")):Qt.error("Please fill all fields")},variant:"outline",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Question"]})]})]}),k.questions.length>0&&(0,qr.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,qr.jsx)(ql,{children:"Added Questions:"}),k.questions.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border",children:[(0,qr.jsxs)("span",{className:"text-sm",children:[t+1,". ",e.question.substring(0,50),"... (",e.marks," marks)"]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>(e=>{C(t=>u(u({},t),{},{questions:t.questions.filter((t,a)=>a!==e)}))})(t),className:"text-red-500",children:(0,qr.jsx)(Em,{className:"w-4 h-4"})})]},e.id))]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{onClick:async()=>{if(k.title&&k.subject&&0!==k.questions.length){_(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(B$,"/exams"),u(u({},k),{},{school_id:(null===t||void 0===t?void 0:t.school_id)||"default"}),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Exam created successfully!"),d(!1),D(),M()}catch(s){var e,a;console.error("Error creating exam:",s),Qt.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to create exam")}finally{_(!1)}}else Qt.error("Please fill all required fields and add at least one question")},disabled:S||0===k.questions.length,className:"bg-indigo-600 hover:bg-indigo-700",children:S?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):"Create Exam"})]})]})]})}),(0,qr.jsx)(Im,{open:m,onOpenChange:e=>{!e&&y?confirm("Are you sure you want to exit? Your progress will be lost.")&&(h(!1),j(!1)):h(e)},children:(0,qr.jsx)(zm,{className:"max-w-4xl max-h-[90vh]",children:p&&!y?(0,qr.jsxs)("div",{className:"text-center py-8",children:[(0,qr.jsx)("div",{className:"w-20 h-20 bg-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,qr.jsx)(sh,{className:"w-10 h-10 text-indigo-600"})}),(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:p.title}),(0,qr.jsx)("p",{className:"text-slate-500 mb-6",children:p.subject}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-6 text-left mb-6 max-w-md mx-auto",children:[(0,qr.jsx)("h3",{className:"font-semibold mb-3",children:"Exam Details:"}),(0,qr.jsxs)("ul",{className:"space-y-2 text-slate-600",children:[(0,qr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4 text-indigo-500"}),"Duration: ",p.duration," minutes"]}),(0,qr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,qr.jsx)(j$,{className:"w-4 h-4 text-indigo-500"}),"Total Marks: ",p.total_marks]}),(0,qr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-4 h-4 text-indigo-500"}),"Questions: ",(null===(e=p.questions)||void 0===e?void 0:e.length)||p.total_questions]})]})]}),(0,qr.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 max-w-md mx-auto",children:(0,qr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,qr.jsxs)("div",{className:"text-left text-sm text-amber-800",children:[(0,qr.jsx)("p",{className:"font-medium mb-1",children:"Important:"}),(0,qr.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,qr.jsx)("li",{children:"Do not refresh or close the browser"}),(0,qr.jsx)("li",{children:"Exam will auto-submit when time runs out"}),(0,qr.jsx)("li",{children:"You cannot go back once submitted"})]})]})]})}),(0,qr.jsxs)(Dl,{onClick:()=>j(!0),size:"lg",className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(mh,{className:"w-5 h-5 mr-2"}),"Start Exam"]})]}):p&&y?(0,qr.jsxs)("div",{className:"h-[70vh] flex flex-col",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:p.title}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:["Question ",f+1," of ",p.questions.length]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg ".concat(N<300?"bg-red-100 text-red-700":"bg-indigo-100 text-indigo-700"),children:[(0,qr.jsx)(z$,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"font-mono font-bold text-lg",children:(e=>{const t=Math.floor(e/60),a=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))})(N)})]})]}),(0,qr.jsxs)("div",{className:"flex-1 py-6 overflow-y-auto",children:[(0,qr.jsx)("div",{className:"mb-6",children:(0,qr.jsxs)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm",children:[p.questions[f].marks," marks"]})}),(0,qr.jsxs)("h2",{className:"text-xl font-semibold text-slate-900 mb-6",children:[f+1,". ",p.questions[f].question]}),(0,qr.jsx)("div",{className:"space-y-3",children:p.questions[f].options.map((e,t)=>(0,qr.jsxs)("button",{onClick:()=>{return e=p.questions[f].id,a=t,void b(t=>u(u({},t),{},{[e]:a}));var e,a},className:"w-full p-4 rounded-xl border-2 text-left transition-all ".concat(v[p.questions[f].id]===t?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-indigo-200"),children:[(0,qr.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full mr-3 ".concat(v[p.questions[f].id]===t?"bg-indigo-600 text-white":"bg-slate-100"),children:String.fromCharCode(65+t)}),e]},t))})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>g(e=>Math.max(0,e-1)),disabled:0===f,children:"Previous"}),(0,qr.jsx)("div",{className:"flex items-center gap-1",children:p.questions.map((e,t)=>(0,qr.jsx)("button",{onClick:()=>g(t),className:"w-8 h-8 rounded-lg text-sm font-medium ".concat(t===f?"bg-indigo-600 text-white":void 0!==v[p.questions[t].id]?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"),children:t+1},t))}),f<p.questions.length-1?(0,qr.jsxs)(Dl,{onClick:()=>g(e=>e+1),children:["Next",(0,qr.jsx)(qc,{className:"w-4 h-4 ml-1"})]}):(0,qr.jsx)(Dl,{onClick:I,disabled:S,className:"bg-emerald-600 hover:bg-emerald-700",children:S?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):"Submit Exam"})]})]}):null})})]})}const H$=Dc("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),q$=Dc("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),V$=Dc("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),W$=Dc("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),G$="".concat("","/api");function K$(){var e;const{user:t,schoolId:a}=Kr(),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),[b,y]=(0,s.useState)({name:"",ip_address:"",port:554,username:"",password:"",location:"",camera_type:"ip"}),j=localStorage.getItem("token"),N={Authorization:"Bearer ".concat(j)};(0,s.useEffect)(()=>{a&&(w(),S())},[a]);const w=async()=>{try{const e=await Hr.get("".concat(G$,"/cctv/cameras/").concat(a),{headers:N});r(e.data||[])}catch(e){console.error("Error fetching cameras:",e)}finally{l(!1)}},S=async()=>{try{const e=await Hr.get("".concat(G$,"/cctv/recording-settings/").concat(a),{headers:N});f(e.data)}catch(e){console.error("Error fetching settings:",e)}},_=async()=>{c(!0),v(null);try{const e=await Hr.post("".concat(G$,"/cctv/auto-detect"),{school_id:a,ip_range_start:"192.168.1.1",ip_range_end:"192.168.1.254"},{headers:N});v(e.data),Qt.success("AI detected ".concat(e.data.detected_cameras," cameras!")),w()}catch(e){Qt.error("Failed to scan network")}finally{c(!1)}},k=e=>{switch(e){case"online":return"text-emerald-500";case"offline":return"text-red-500";case"detected":return"text-amber-500";default:return"text-slate-400"}},C=e=>{switch(e){case"online":return(0,qr.jsx)(H$,{className:"w-5 h-5 text-emerald-500"});case"offline":return(0,qr.jsx)(q$,{className:"w-5 h-5 text-red-500"});case"detected":return(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-500"});default:return(0,qr.jsx)(V$,{className:"w-5 h-5 text-slate-400"})}};return i?(0,qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"cctv-management",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[(0,qr.jsx)(JU,{className:"w-7 h-7 text-indigo-600"}),"CCTV Management"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"AI-powered camera detection & management"})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)(Dl,{onClick:_,disabled:o,className:"bg-gradient-to-r from-purple-600 to-indigo-600",children:o?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"})," Scanning..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(ZK,{className:"w-4 h-4 mr-2"})," AI Auto-Detect"]})}),(0,qr.jsxs)(Dl,{onClick:()=>m(!0),children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"})," Add Camera"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>p(!0),children:[(0,qr.jsx)(wh,{className:"w-4 h-4 mr-2"})," Settings"]})]})]}),g&&(0,qr.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(Km,{className:"w-6 h-6 text-indigo-600"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold text-indigo-900",children:g.message}),(0,qr.jsxs)("p",{className:"text-sm text-indigo-600",children:["Scan ID: ",null===(e=g.scan_id)||void 0===e?void 0:e.substring(0,8),"..."]})]})]})}),(0,qr.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(JU,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:n.length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Cameras"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(H$,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:n.filter(e=>"online"===e.status).length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Online"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:n.filter(e=>"detected"===e.status).length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Pending Activation"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(q$,{className:"w-5 h-5 text-red-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-red-600",children:n.filter(e=>"offline"===e.status).length}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Offline"})]})]})})]}),0===n.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[(0,qr.jsx)(JU,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Cameras Found"}),(0,qr.jsx)("p",{className:"text-slate-500 mb-4",children:'Click "AI Auto-Detect" to scan your network or add cameras manually'}),(0,qr.jsxs)(Dl,{onClick:_,children:[(0,qr.jsx)(ZK,{className:"w-4 h-4 mr-2"})," Start Auto-Detection"]})]}):(0,qr.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>{var t;return(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-lg transition-shadow",children:[(0,qr.jsxs)("div",{className:"h-40 bg-slate-900 relative flex items-center justify-center",children:[(0,qr.jsx)(JU,{className:"w-12 h-12 text-slate-700"}),(0,qr.jsxs)("div",{className:"absolute top-3 left-3 flex items-center gap-2",children:[C(e.status),(0,qr.jsx)("span",{className:"text-sm font-medium ".concat(k(e.status)),children:null===(t=e.status)||void 0===t?void 0:t.toUpperCase()})]}),e.auto_detected&&(0,qr.jsx)("div",{className:"absolute top-3 right-3 px-2 py-1 bg-purple-500 text-white text-xs rounded",children:"AI Detected"})]}),(0,qr.jsxs)("div",{className:"p-4",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900 mb-1",children:e.name}),(0,qr.jsxs)("div",{className:"space-y-1 text-sm text-slate-500 mb-3",children:[(0,qr.jsxs)("p",{className:"flex items-center gap-2",children:[(0,qr.jsx)(c$,{className:"w-4 h-4"})," ",e.location]}),(0,qr.jsxs)("p",{className:"flex items-center gap-2",children:[(0,qr.jsx)(W$,{className:"w-4 h-4"})," ",e.ip_address,":",e.port]})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:["detected"===e.status?(0,qr.jsxs)(Dl,{size:"sm",onClick:()=>(async e=>{try{await Hr.post("".concat(G$,"/cctv/cameras/").concat(e,"/activate"),{},{headers:N}),Qt.success("Camera activated!"),w()}catch(t){Qt.error("Failed to activate camera")}})(e.id),className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-1"})," Activate"]}):(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",className:"flex-1",children:[(0,qr.jsx)(Hc,{className:"w-4 h-4 mr-1"})," View Live"]}),(0,qr.jsx)(Dl,{size:"sm",variant:"outline",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this camera?"))try{await Hr.delete("".concat(G$,"/cctv/cameras/").concat(e),{headers:N}),Qt.success("Camera deleted"),w()}catch(t){Qt.error("Failed to delete camera")}})(e.id),className:"text-red-600 hover:text-red-700",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})]})]},e.id)})}),(0,qr.jsx)(Im,{open:d,onOpenChange:m,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(xY,{className:"w-5 h-5"})," Add Camera Manually"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Camera Name *"}),(0,qr.jsx)(Rl,{value:b.name,onChange:e=>y(u(u({},b),{},{name:e.target.value})),placeholder:"e.g., Main Gate Camera"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Location *"}),(0,qr.jsx)(Rl,{value:b.location,onChange:e=>y(u(u({},b),{},{location:e.target.value})),placeholder:"e.g., Main Gate, Classroom 1"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"IP Address *"}),(0,qr.jsx)(Rl,{value:b.ip_address,onChange:e=>y(u(u({},b),{},{ip_address:e.target.value})),placeholder:"192.168.1.100"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Port"}),(0,qr.jsx)(Rl,{type:"number",value:b.port,onChange:e=>y(u(u({},b),{},{port:parseInt(e.target.value)})),placeholder:"554"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Username"}),(0,qr.jsx)(Rl,{value:b.username,onChange:e=>y(u(u({},b),{},{username:e.target.value})),placeholder:"admin"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Password"}),(0,qr.jsx)(Rl,{type:"password",value:b.password,onChange:e=>y(u(u({},b),{},{password:e.target.value})),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Camera Type"}),(0,qr.jsxs)("select",{value:b.camera_type,onChange:e=>y(u(u({},b),{},{camera_type:e.target.value})),className:"w-full mt-1 p-2 border border-slate-200 rounded-lg",children:[(0,qr.jsx)("option",{value:"ip",children:"Generic IP Camera"}),(0,qr.jsx)("option",{value:"hikvision",children:"Hikvision"}),(0,qr.jsx)("option",{value:"dahua",children:"Dahua"})]})]})]}),(0,qr.jsxs)(Um,{children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{onClick:async()=>{if(b.name&&b.ip_address&&b.location)try{await Hr.post("".concat(G$,"/cctv/cameras"),u(u({},b),{},{school_id:a}),{headers:N}),Qt.success("Camera added successfully!"),m(!1),y({name:"",ip_address:"",port:554,username:"",password:"",location:"",camera_type:"ip"}),w()}catch(e){Qt.error("Failed to add camera")}else Qt.error("Please fill all required fields")},children:"Add Camera"})]})]})}),(0,qr.jsx)(Im,{open:h,onOpenChange:p,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(wh,{className:"w-5 h-5"})," Recording Settings"]})}),x&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("label",{className:"font-medium text-slate-700",children:"Recording Enabled"}),(0,qr.jsx)("input",{type:"checkbox",checked:x.recording_enabled,onChange:e=>f(u(u({},x),{},{recording_enabled:e.target.checked})),className:"w-5 h-5"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Retention Days"}),(0,qr.jsx)(Rl,{type:"number",value:x.retention_days,onChange:e=>f(u(u({},x),{},{retention_days:parseInt(e.target.value)}))})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("label",{className:"font-medium text-slate-700",children:"Motion Detection"}),(0,qr.jsx)("input",{type:"checkbox",checked:x.motion_detection,onChange:e=>f(u(u({},x),{},{motion_detection:e.target.checked})),className:"w-5 h-5"})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("label",{className:"font-medium text-slate-700",children:"Alert on Motion"}),(0,qr.jsx)("input",{type:"checkbox",checked:x.alert_on_motion,onChange:e=>f(u(u({},x),{},{alert_on_motion:e.target.checked})),className:"w-5 h-5"})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("label",{className:"font-medium text-slate-700",children:"Cloud Backup"}),(0,qr.jsx)("input",{type:"checkbox",checked:x.cloud_backup_enabled,onChange:e=>f(u(u({},x),{},{cloud_backup_enabled:e.target.checked})),className:"w-5 h-5"})]})]}),(0,qr.jsxs)(Um,{children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{onClick:async()=>{try{await Hr.post("".concat(G$,"/cctv/recording-settings"),u(u({},x),{},{school_id:a}),{headers:N}),Qt.success("Settings saved!"),p(!1)}catch(e){Qt.error("Failed to save settings")}},children:"Save Settings"})]})]})})]})}const Y$=Dc("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),J$=Dc("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),$$=Dc("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Q$="".concat("","/api");function X$(){var e,t,a,n,r,i,l,o;const{user:c,schoolId:d}=Kr(),[m,h]=(0,s.useState)(!0),[p,x]=(0,s.useState)(null),[f,g]=(0,s.useState)(null),[v,b]=(0,s.useState)([]),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)({provider:"local",auto_backup:!0,backup_schedule:"daily",retention_days:90}),E=localStorage.getItem("token"),A={Authorization:"Bearer ".concat(E)};(0,s.useEffect)(()=>{d&&P()},[d]);const P=async()=>{try{const[t,a,s]=await Promise.all([Hr.get("".concat(Q$,"/storage/config/").concat(d),{headers:A}),Hr.get("".concat(Q$,"/storage/usage/").concat(d),{headers:A}),Hr.get("".concat(Q$,"/storage/backups/").concat(d),{headers:A})]);var e;if(x(t.data),g(a.data),b(s.data||[]),t.data)C({provider:t.data.provider||"local",auto_backup:null===(e=t.data.auto_backup)||void 0===e||e,backup_schedule:t.data.backup_schedule||"daily",retention_days:t.data.retention_days||90})}catch(t){console.error("Error fetching data:",t)}finally{h(!1)}},O=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full";w(!0);try{const t=await Hr.post("".concat(Q$,"/storage/backup/trigger?school_id=").concat(d,"&backup_type=").concat(e),{},{headers:A});Qt.success("Backup completed! Size: ".concat(t.data.size_mb," MB")),P()}catch(t){Qt.error("Backup failed")}finally{w(!1)}};return m?(0,qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"storage-backup",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[(0,qr.jsx)(Y$,{className:"w-7 h-7 text-indigo-600"}),"Storage & Backup"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"AI-powered data management & cloud backup"})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)(Dl,{onClick:async()=>{j(!0);try{const e=await Hr.post("".concat(Q$,"/storage/ai-setup?school_id=").concat(d),{},{headers:A});Qt.success(e.data.message),P()}catch(e){Qt.error("AI setup failed")}finally{j(!1)}},disabled:y,className:"bg-gradient-to-r from-purple-600 to-indigo-600",children:y?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"})," Setting up..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"})," AI Auto-Setup"]})}),(0,qr.jsx)(Dl,{onClick:()=>O("full"),disabled:N,children:N?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"})," Backing up..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"})," Backup Now"]})}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>_(!0),children:[(0,qr.jsx)(wh,{className:"w-4 h-4 mr-2"})," Configure"]})]})]}),(null===p||void 0===p?void 0:p.ai_recommendations)&&(0,qr.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)(hh,{className:"w-6 h-6 text-purple-600 mt-0.5"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold text-purple-900 mb-2",children:"AI Recommendations"}),(0,qr.jsx)("ul",{className:"space-y-1",children:p.ai_recommendations.map((e,t)=>(0,qr.jsxs)("li",{className:"text-sm text-purple-700 flex items-center gap-2",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-purple-500"}),e]},t))})]})]})}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(J$,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[(null===f||void 0===f||null===(e=f.usage)||void 0===e||null===(t=e.database_mb)||void 0===t?void 0:t.toFixed(1))||0," MB"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Database"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(cY,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[(null===f||void 0===f||null===(a=f.usage)||void 0===a||null===(n=a.documents_mb)||void 0===n?void 0:n.toFixed(1))||0," MB"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Documents"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)($$,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[(null===f||void 0===f||null===(r=f.usage)||void 0===r||null===(i=r.backups_mb)||void 0===i?void 0:i.toFixed(1))||0," MB"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Backups"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Y$,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[(null===f||void 0===f||null===(l=f.usage)||void 0===l||null===(o=l.total_mb)||void 0===o?void 0:o.toFixed(1))||0," MB"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Used"})]})]})})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(W$,{className:"w-5 h-5 text-indigo-600"}),"Current Configuration"]}),(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Storage Provider"}),(0,qr.jsx)("span",{className:"font-medium text-slate-900 capitalize",children:(null===p||void 0===p?void 0:p.provider)||"Local"})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Auto Backup"}),(0,qr.jsx)("span",{className:"font-medium ".concat(null!==p&&void 0!==p&&p.auto_backup?"text-emerald-600":"text-slate-500"),children:null!==p&&void 0!==p&&p.auto_backup?"Enabled":"Disabled"})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Backup Schedule"}),(0,qr.jsx)("span",{className:"font-medium text-slate-900 capitalize",children:(null===p||void 0===p?void 0:p.backup_schedule)||"Daily"})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Retention Period"}),(0,qr.jsxs)("span",{className:"font-medium text-slate-900",children:[(null===p||void 0===p?void 0:p.retention_days)||90," Days"]})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Storage Tier"}),(0,qr.jsx)("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-sm font-medium rounded capitalize",children:(null===p||void 0===p?void 0:p.storage_tier)||"Standard"})]})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Rc,{className:"w-5 h-5 text-emerald-600"}),"Quick Actions"]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>O("database_only"),disabled:N,className:"h-auto py-3 flex-col",children:[(0,qr.jsx)(J$,{className:"w-5 h-5 mb-1"}),(0,qr.jsx)("span",{className:"text-xs",children:"Database Backup"})]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>O("documents_only"),disabled:N,className:"h-auto py-3 flex-col",children:[(0,qr.jsx)(cY,{className:"w-5 h-5 mb-1"}),(0,qr.jsx)("span",{className:"text-xs",children:"Documents Backup"})]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>O("incremental"),disabled:N,className:"h-auto py-3 flex-col",children:[(0,qr.jsx)(lH,{className:"w-5 h-5 mb-1"}),(0,qr.jsx)("span",{className:"text-xs",children:"Incremental"})]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>O("full"),disabled:N,className:"h-auto py-3 flex-col",children:[(0,qr.jsx)($U,{className:"w-5 h-5 mb-1"}),(0,qr.jsx)("span",{className:"text-xs",children:"Full Backup"})]})]})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-5 h-5 text-indigo-600"}),"Backup History"]}),0===v.length?(0,qr.jsxs)("div",{className:"text-center py-8",children:[(0,qr.jsx)($$,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-500",children:'No backups yet. Click "Backup Now" to create your first backup.'})]}):(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{className:"text-left text-sm text-slate-500 border-b border-slate-200",children:[(0,qr.jsx)("th",{className:"pb-3 font-medium",children:"Date"}),(0,qr.jsx)("th",{className:"pb-3 font-medium",children:"Type"}),(0,qr.jsx)("th",{className:"pb-3 font-medium",children:"Size"}),(0,qr.jsx)("th",{className:"pb-3 font-medium",children:"Status"}),(0,qr.jsx)("th",{className:"pb-3 font-medium",children:"Actions"})]})}),(0,qr.jsx)("tbody",{children:v.map(e=>{var t,a,s;return(0,qr.jsxs)("tr",{className:"border-b border-slate-100",children:[(0,qr.jsx)("td",{className:"py-3 text-sm text-slate-900",children:(s=e.started_at,new Date(s).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,qr.jsx)("td",{className:"py-3",children:(0,qr.jsx)("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs rounded capitalize",children:null===(t=e.backup_type)||void 0===t?void 0:t.replace("_"," ")})}),(0,qr.jsxs)("td",{className:"py-3 text-sm text-slate-900",children:[(null===(a=e.size_mb)||void 0===a?void 0:a.toFixed(2))||0," MB"]}),(0,qr.jsx)("td",{className:"py-3",children:(0,qr.jsxs)("span",{className:"px-2 py-1 text-xs rounded flex items-center gap-1 w-fit ".concat("completed"===e.status?"bg-emerald-100 text-emerald-700":"in_progress"===e.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:["completed"===e.status&&(0,qr.jsx)(Km,{className:"w-3 h-3"}),"in_progress"===e.status&&(0,qr.jsx)(Bc,{className:"w-3 h-3 animate-spin"}),e.status]})}),(0,qr.jsx)("td",{className:"py-3",children:"completed"===e.status&&(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",children:(0,qr.jsx)(xh,{className:"w-4 h-4"})})})]},e.id)})})]})})]}),(0,qr.jsx)(Im,{open:S,onOpenChange:_,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(wh,{className:"w-5 h-5"})," Storage Configuration"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Storage Provider"}),(0,qr.jsxs)("select",{value:k.provider,onChange:e=>C(u(u({},k),{},{provider:e.target.value})),className:"w-full mt-1 p-2 border border-slate-200 rounded-lg",children:[(0,qr.jsx)("option",{value:"local",children:"Local Storage"}),(0,qr.jsx)("option",{value:"aws_s3",children:"Amazon S3"}),(0,qr.jsx)("option",{value:"google_cloud",children:"Google Cloud Storage"}),(0,qr.jsx)("option",{value:"azure",children:"Azure Blob Storage"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("label",{className:"font-medium text-slate-700",children:"Auto Backup"}),(0,qr.jsx)("input",{type:"checkbox",checked:k.auto_backup,onChange:e=>C(u(u({},k),{},{auto_backup:e.target.checked})),className:"w-5 h-5"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Backup Schedule"}),(0,qr.jsxs)("select",{value:k.backup_schedule,onChange:e=>C(u(u({},k),{},{backup_schedule:e.target.value})),className:"w-full mt-1 p-2 border border-slate-200 rounded-lg",children:[(0,qr.jsx)("option",{value:"daily",children:"Daily"}),(0,qr.jsx)("option",{value:"weekly",children:"Weekly"}),(0,qr.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Retention Period (Days)"}),(0,qr.jsx)(Rl,{type:"number",value:k.retention_days,onChange:e=>C(u(u({},k),{},{retention_days:parseInt(e.target.value)}))})]})]}),(0,qr.jsxs)(Um,{children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{onClick:async()=>{try{await Hr.post("".concat(Q$,"/storage/configure"),u(u({},k),{},{school_id:d,backup_items:["database","documents","photos"]}),{headers:A}),Qt.success("Configuration saved!"),_(!1),P()}catch(e){Qt.error("Failed to save configuration")}},children:"Save Configuration"})]})]})})]})}const Z$=Dc("user-check",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),eQ="".concat("","/api");function tQ(){var e,t,a,n,r;const{user:i,schoolId:l}=Kr(),[o,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)(!1),f=localStorage.getItem("token"),g={Authorization:"Bearer ".concat(f)};(0,s.useEffect)(()=>{l&&v()},[l]);const v=async()=>{try{const[e,t]=await Promise.all([Hr.get("".concat(eQ,"/admin/dashboard-overview/").concat(l),{headers:g}),Hr.get("".concat(eQ,"/admin/teacher-activities/").concat(l,"?limit=30"),{headers:g})]);u(e.data),h(t.data||[])}catch(e){console.error("Error fetching data:",e)}finally{c(!1)}},b=e=>{switch(e){case"create_exam":return(0,qr.jsx)(cY,{className:"w-4 h-4 text-indigo-600"});case"mark_attendance":return(0,qr.jsx)(Z$,{className:"w-4 h-4 text-emerald-600"});case"create_notice":return(0,qr.jsx)(Oh,{className:"w-4 h-4 text-amber-600"});case"submit_exam":return(0,qr.jsx)(Km,{className:"w-4 h-4 text-purple-600"});case"apply_leave":return(0,qr.jsx)(eh,{className:"w-4 h-4 text-blue-600"});default:return(0,qr.jsx)(vJ,{className:"w-4 h-4 text-slate-600"})}},y=(e,t)=>{switch(e){case"create_exam":return"Created exam: ".concat((null===t||void 0===t?void 0:t.title)||"New Exam");case"mark_attendance":return"Marked attendance for ".concat((null===t||void 0===t?void 0:t.class_name)||"class");case"create_notice":return"Posted notice: ".concat((null===t||void 0===t?void 0:t.title)||"New Notice");case"submit_exam":return"Submitted exam with ".concat((null===t||void 0===t?void 0:t.score)||0,"% score");case"apply_leave":return"Applied for leave";case"add_student":return"Added new student: ".concat((null===t||void 0===t?void 0:t.name)||"Student");default:return e.replace(/_/g," ")}},j=e=>{const t=new Date(e),a=new Date-t;return a<6e4?"Just now":a<36e5?"".concat(Math.floor(a/6e4),"m ago"):a<864e5?"".concat(Math.floor(a/36e5),"h ago"):t.toLocaleDateString("en-IN",{day:"numeric",month:"short"})};return o?(0,qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"admin-activity",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[(0,qr.jsx)(vJ,{className:"w-7 h-7 text-indigo-600"}),"Activity Dashboard"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Real-time overview of what's happening in your school"})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{x(!0),await v(),x(!1)},disabled:p,variant:"outline",children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2 ".concat(p?"animate-spin":"")}),"Refresh"]})]}),d&&(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 text-white",children:[(0,qr.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Today's Summary"}),(0,qr.jsx)("p",{className:"text-indigo-100",children:d.summary})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-5 gap-4",children:[(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(cY,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(null===d||void 0===d||null===(e=d.stats)||void 0===e?void 0:e.exams_created)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Exams Created"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Z$,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(null===d||void 0===d||null===(t=d.stats)||void 0===t?void 0:t.attendance_marked)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Attendance"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:(null===d||void 0===d||null===(a=d.stats)||void 0===a?void 0:a.leaves_pending)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Pending Leaves"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Oh,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(null===d||void 0===d||null===(n=d.stats)||void 0===n?void 0:n.notices_posted)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Notices"})]})]})}),(0,qr.jsx)("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null===d||void 0===d||null===(r=d.stats)||void 0===r?void 0:r.active_teachers)||0}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Active Teachers"})]})]})})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-5 h-5 text-indigo-600"}),"Recent Activities"]}),0===m.length?(0,qr.jsxs)("div",{className:"text-center py-8",children:[(0,qr.jsx)(vJ,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No recent activities"})]}):(0,qr.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm",children:b(e.action)}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("p",{className:"text-sm text-slate-900",children:[(0,qr.jsx)("span",{className:"font-medium",children:e.user_name||"User"}),(0,qr.jsx)("span",{className:"text-slate-500 mx-1",children:"\u2022"}),(0,qr.jsx)("span",{className:"text-slate-600 capitalize",children:e.user_role})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600",children:y(e.action,e.details)})]}),(0,qr.jsx)("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:j(e.created_at)})]},e.id||t))})]})]})}const aQ=Dc("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);var sQ,nQ=Object.defineProperty,rQ=Object.getOwnPropertySymbols,iQ=Object.prototype.hasOwnProperty,lQ=Object.prototype.propertyIsEnumerable,oQ=(e,t,a)=>t in e?nQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,cQ=(e,t)=>{for(var a in t||(t={}))iQ.call(t,a)&&oQ(e,a,t[a]);if(rQ)for(var a of rQ(t))lQ.call(t,a)&&oQ(e,a,t[a]);return e},dQ=(e,t)=>{var a={};for(var s in e)iQ.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&rQ)for(var s of rQ(e))t.indexOf(s)<0&&lQ.call(e,s)&&(a[s]=e[s]);return a};(e=>{const t=class t{constructor(e,a,s,r){if(this.version=e,this.errorCorrectionLevel=a,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let t=0;t<this.size;t++)i.push(!1);for(let t=0;t<this.size;t++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const l=this.addEccAndInterleave(s);if(this.drawCodewords(l),-1==r){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const a=this.getPenaltyScore();a<e&&(r=t,e=a),this.applyMask(t)}}n(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(a,s){const n=e.QrSegment.makeSegments(a);return t.encodeSegments(n,s)}static encodeBinary(a,s){const n=e.QrSegment.makeBytes(a);return t.encodeSegments([n],s)}static encodeSegments(e,s){let r,l,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=o&&o<=c&&c<=t.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");for(r=o;;r++){const a=8*t.getNumDataCodewords(r,s),n=i.getTotalBits(e,r);if(n<=a){l=n;break}if(r>=c)throw new RangeError("Data too long")}for(const a of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&l<=8*t.getNumDataCodewords(r,a)&&(s=a);let m=[];for(const t of e){a(t.mode.modeBits,4,m),a(t.numChars,t.mode.numCharCountBits(r),m);for(const e of t.getData())m.push(e)}n(m.length==l);const h=8*t.getNumDataCodewords(r,s);n(m.length<=h),a(0,Math.min(4,h-m.length),m),a(0,(8-m.length%8)%8,m),n(m.length%8==0);for(let t=236;m.length<h;t^=253)a(t,8,m);let p=[];for(;8*p.length<m.length;)p.push(0);return m.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(r,s,p,d)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let a=0;a<t;a++)for(let s=0;s<t;s++)0==a&&0==s||0==a&&s==t-1||a==t-1&&0==s||this.drawAlignmentPattern(e[a],e[s]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let a=t;for(let s=0;s<10;s++)a=a<<1^1335*(a>>>9);const r=21522^(t<<10|a);n(r>>>15==0);for(let n=0;n<=5;n++)this.setFunctionModule(8,n,s(r,n));this.setFunctionModule(8,7,s(r,6)),this.setFunctionModule(8,8,s(r,7)),this.setFunctionModule(7,8,s(r,8));for(let n=9;n<15;n++)this.setFunctionModule(14-n,8,s(r,n));for(let n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,s(r,n));for(let n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,s(r,n));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let a=0;a<12;a++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;n(t>>>18==0);for(let a=0;a<18;a++){const e=s(t,a),n=this.size-11+a%3,r=Math.floor(a/3);this.setFunctionModule(n,r,e),this.setFunctionModule(r,n,e)}}drawFinderPattern(e,t){for(let a=-4;a<=4;a++)for(let s=-4;s<=4;s++){const n=Math.max(Math.abs(s),Math.abs(a)),r=e+s,i=t+a;0<=r&&r<this.size&&0<=i&&i<this.size&&this.setFunctionModule(r,i,2!=n&&4!=n)}}drawAlignmentPattern(e,t){for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)this.setFunctionModule(e+s,t+a,1!=Math.max(Math.abs(s),Math.abs(a)))}setFunctionModule(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0}addEccAndInterleave(e){const a=this.version,s=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(a,s))throw new RangeError("Invalid argument");const r=t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][a],i=t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][a],l=Math.floor(t.getNumRawDataModules(a)/8),o=r-l%r,c=Math.floor(l/r);let d=[];const u=t.reedSolomonComputeDivisor(i);for(let n=0,h=0;n<r;n++){let a=e.slice(h,h+c-i+(n<o?0:1));h+=a.length;const s=t.reedSolomonComputeRemainder(a,u);n<o&&a.push(0),d.push(a.concat(s))}let m=[];for(let t=0;t<d[0].length;t++)d.forEach((e,a)=>{(t!=c-i||a>=o)&&m.push(e[t])});return n(m.length==l),m}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let a=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let n=0;n<this.size;n++)for(let r=0;r<2;r++){const i=t-r,l=0==(t+1&2)?this.size-1-n:n;!this.isFunction[l][i]&&a<8*e.length&&(this.modules[l][i]=s(e[a>>>3],7-(7&a)),a++)}}n(a==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++){let s;switch(e){case 0:s=(a+t)%2==0;break;case 1:s=t%2==0;break;case 2:s=a%3==0;break;case 3:s=(a+t)%3==0;break;case 4:s=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:s=a*t%2+a*t%3==0;break;case 6:s=(a*t%2+a*t%3)%2==0;break;case 7:s=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&s&&(this.modules[t][a]=!this.modules[t][a])}}getPenaltyScore(){let e=0;for(let n=0;n<this.size;n++){let a=!1,s=0,r=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[n][i]==a?(s++,5==s?e+=t.PENALTY_N1:s>5&&e++):(this.finderPenaltyAddHistory(s,r),a||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),a=this.modules[n][i],s=1);e+=this.finderPenaltyTerminateAndCount(a,s,r)*t.PENALTY_N3}for(let n=0;n<this.size;n++){let a=!1,s=0,r=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][n]==a?(s++,5==s?e+=t.PENALTY_N1:s>5&&e++):(this.finderPenaltyAddHistory(s,r),a||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),a=this.modules[i][n],s=1);e+=this.finderPenaltyTerminateAndCount(a,s,r)*t.PENALTY_N3}for(let n=0;n<this.size-1;n++)for(let a=0;a<this.size-1;a++){const s=this.modules[n][a];s==this.modules[n][a+1]&&s==this.modules[n+1][a]&&s==this.modules[n+1][a+1]&&(e+=t.PENALTY_N2)}let a=0;for(const t of this.modules)a=t.reduce((e,t)=>e+(t?1:0),a);const s=this.size*this.size,r=Math.ceil(Math.abs(20*a-10*s)/s)-1;return n(0<=r&&r<=9),e+=r*t.PENALTY_N4,n(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let a=[6];for(let s=this.size-7;a.length<e;s-=t)a.splice(1,0,s);return a}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let a=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;a-=(25*t-10)*t-55,e>=7&&(a-=36)}return n(208<=a&&a<=29648),a}static getNumDataCodewords(e,a){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let a=[];for(let t=0;t<e-1;t++)a.push(0);a.push(1);let s=1;for(let n=0;n<e;n++){for(let e=0;e<a.length;e++)a[e]=t.reedSolomonMultiply(a[e],s),e+1<a.length&&(a[e]^=a[e+1]);s=t.reedSolomonMultiply(s,2)}return a}static reedSolomonComputeRemainder(e,a){let s=a.map(e=>0);for(const n of e){const e=n^s.shift();s.push(0),a.forEach((a,n)=>s[n]^=t.reedSolomonMultiply(a,e))}return s}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let a=0;for(let s=7;s>=0;s--)a=a<<1^285*(a>>>7),a^=(t>>>s&1)*e;return n(a>>>8==0),a}finderPenaltyCountPatterns(e){const t=e[1];n(t<=3*this.size);const a=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(a&&e[0]>=4*t&&e[6]>=t?1:0)+(a&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function a(e,t,a){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let s=t-1;s>=0;s--)a.push(e>>>s&1)}function s(e,t){return 0!=(e>>>t&1)}function n(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const r=class e{constructor(e,t,a){if(this.mode=e,this.numChars=t,this.bitData=a,t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(t){let s=[];for(const e of t)a(e,8,s);return new e(e.Mode.BYTE,t.length,s)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let s=[];for(let e=0;e<t.length;){const n=Math.min(t.length-e,3);a(parseInt(t.substring(e,e+n),10),3*n+1,s),e+=n}return new e(e.Mode.NUMERIC,t.length,s)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let s,n=[];for(s=0;s+2<=t.length;s+=2){let r=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s));r+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s+1)),a(r,11,n)}return s<t.length&&a(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s)),6,n),new e(e.Mode.ALPHANUMERIC,t.length,n)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let s=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)a(t,8,s);else if(t<16384)a(2,2,s),a(t,14,s);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");a(6,3,s),a(t,21,s)}return new e(e.Mode.ECI,0,s)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let a=0;for(const s of e){const e=s.mode.numCharCountBits(t);if(s.numChars>=1<<e)return 1/0;a+=4+e+s.bitData.length}return a}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let a=0;a<e.length;a++)"%"!=e.charAt(a)?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substring(a+1,a+3),16)),a+=2);return t}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=r;e.QrSegment=r})(sQ||(sQ={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(sQ||(sQ={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(sQ||(sQ={}));var uQ=sQ,mQ={L:uQ.QrCode.Ecc.LOW,M:uQ.QrCode.Ecc.MEDIUM,Q:uQ.QrCode.Ecc.QUARTILE,H:uQ.QrCode.Ecc.HIGH},hQ=128,pQ="L",xQ="#FFFFFF",fQ="#000000",gQ=!1,vQ=1;function bQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=[];return e.forEach(function(e,s){let n=null;e.forEach(function(r,i){if(!r&&null!==n)return a.push("M".concat(n+t," ").concat(s+t,"h").concat(i-n,"v1H").concat(n+t,"z")),void(n=null);if(i!==e.length-1)r&&null===n&&(n=i);else{if(!r)return;null===n?a.push("M".concat(i+t,",").concat(s+t," h1v1H").concat(i+t,"z")):a.push("M".concat(n+t,",").concat(s+t," h").concat(i+1-n,"v1H").concat(n+t,"z"))}})}),a.join("")}function yQ(e,t){return e.slice().map((e,a)=>a<t.y||a>=t.y+t.h?e:e.map((e,a)=>(a<t.x||a>=t.x+t.w)&&e))}function jQ(e){let{value:t,level:a,minVersion:n,includeMargin:r,marginSize:i,imageSettings:l,size:o,boostLevel:c}=e,d=s.useMemo(()=>{const e=(Array.isArray(t)?t:[t]).reduce((e,t)=>(e.push(...uQ.QrSegment.makeSegments(t)),e),[]);return uQ.QrCode.encodeSegments(e,mQ[a],n,void 0,void 0,c)},[t,a,n,c]);const{cells:u,margin:m,numCells:h,calculatedImageSettings:p}=s.useMemo(()=>{let e=d.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(r,i),a=e.length+2*t,s=function(e,t,a,s){if(null==s)return null;const n=e.length+2*a,r=Math.floor(.1*t),i=n/t,l=(s.width||r)*i,o=(s.height||r)*i,c=null==s.x?e.length/2-l/2:s.x*i,d=null==s.y?e.length/2-o/2:s.y*i,u=null==s.opacity?1:s.opacity;let m=null;if(s.excavate){let e=Math.floor(c),t=Math.floor(d);m={x:e,y:t,w:Math.ceil(l+c-e),h:Math.ceil(o+d-t)}}return{x:c,y:d,h:o,w:l,excavation:m,opacity:u,crossOrigin:s.crossOrigin}}(e,o,t,l);return{cells:e,margin:t,numCells:a,calculatedImageSettings:s}},[d,o,l,r,i]);return{qrcode:d,margin:m,cells:u,numCells:h,calculatedImageSettings:p}}var NQ=function(){try{(new Path2D).addPath(new Path2D)}catch(J1){return!1}return!0}(),wQ=s.forwardRef(function(e,t){const a=e,{value:n,size:r=hQ,level:i=pQ,bgColor:l=xQ,fgColor:o=fQ,includeMargin:c=gQ,minVersion:d=vQ,boostLevel:u,marginSize:m,imageSettings:h}=a,p=dQ(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:x}=p,f=dQ(p,["style"]),g=null==h?void 0:h.src,v=s.useRef(null),b=s.useRef(null),y=s.useCallback(e=>{v.current=e,"function"===typeof t?t(e):t&&(t.current=e)},[t]),[j,N]=s.useState(!1),{margin:w,cells:S,numCells:_,calculatedImageSettings:k}=jQ({value:n,level:i,minVersion:d,boostLevel:u,includeMargin:c,marginSize:m,imageSettings:h,size:r});s.useEffect(()=>{if(null!=v.current){const e=v.current,t=e.getContext("2d");if(!t)return;let a=S;const s=b.current,n=null!=k&&null!==s&&s.complete&&0!==s.naturalHeight&&0!==s.naturalWidth;n&&null!=k.excavation&&(a=yQ(S,k.excavation));const i=window.devicePixelRatio||1;e.height=e.width=r*i;const c=r/_*i;t.scale(c,c),t.fillStyle=l,t.fillRect(0,0,_,_),t.fillStyle=o,NQ?t.fill(new Path2D(bQ(a,w))):S.forEach(function(e,a){e.forEach(function(e,s){e&&t.fillRect(s+w,a+w,1,1)})}),k&&(t.globalAlpha=k.opacity),n&&t.drawImage(s,k.x+w,k.y+w,k.w,k.h)}}),s.useEffect(()=>{N(!1)},[g]);const C=cQ({height:r,width:r},x);let E=null;return null!=g&&(E=s.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{N(!0)},ref:b,crossOrigin:null==k?void 0:k.crossOrigin})),s.createElement(s.Fragment,null,s.createElement("canvas",cQ({style:C,height:r,width:r,ref:y,role:"img"},f)),E)});wQ.displayName="QRCodeCanvas";var SQ=s.forwardRef(function(e,t){const a=e,{value:n,size:r=hQ,level:i=pQ,bgColor:l=xQ,fgColor:o=fQ,includeMargin:c=gQ,minVersion:d=vQ,boostLevel:u,title:m,marginSize:h,imageSettings:p}=a,x=dQ(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:f,cells:g,numCells:v,calculatedImageSettings:b}=jQ({value:n,level:i,minVersion:d,boostLevel:u,includeMargin:c,marginSize:h,imageSettings:p,size:r});let y=g,j=null;null!=p&&null!=b&&(null!=b.excavation&&(y=yQ(g,b.excavation)),j=s.createElement("image",{href:p.src,height:b.h,width:b.w,x:b.x+f,y:b.y+f,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const N=bQ(y,f);return s.createElement("svg",cQ({height:r,width:r,viewBox:"0 0 ".concat(v," ").concat(v),ref:t,role:"img"},x),!!m&&s.createElement("title",null,m),s.createElement("path",{fill:l,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),s.createElement("path",{fill:o,d:N,shapeRendering:"crispEdges"}),j)});SQ.displayName="QRCodeSVG";function _Q(){var e,t,a,n;const{user:r,token:i}=Kr(),[l,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)([]),[h,p]=(0,s.useState)(null),[x,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)(null),[C,E]=(0,s.useState)(!1),[A,P]=(0,s.useState)(null),[O,M]=(0,s.useState)("");(0,s.useEffect)(()=>{T()},[r]);const T=async()=>{try{o(!0);const e=(null===r||void 0===r?void 0:r.student_id)||(null===r||void 0===r?void 0:r.id),t=(null===r||void 0===r?void 0:r.school_id)||"school1",a=(null===r||void 0===r?void 0:r.class_id)||"class1",s=await fetch("".concat("","/api/fee-payment/status/").concat(e));if(s.ok){const e=await s.json();d(e)}const n=await fetch("".concat("","/api/fee-payment/structure/").concat(t,"/").concat(a));if(n.ok){const e=await n.json();m(e.fee_structure||[])}try{const e=await fetch("".concat("","/api/schools/").concat(t),{headers:i?{Authorization:"Bearer ".concat(i)}:{}});if(e.ok){const t=await e.json();p(t)}}catch(J1){console.log("School details not available")}}catch(e){console.error("Error fetching fee data:",e),Qt.error("Fee data load nahi ho paya")}finally{o(!1)}},D=async(e,t)=>{E(!0);try{const a=await fetch("".concat("","/api/fee-payment/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_id:e,status:t})}),s=await a.json();s.success?(Qt.success("Payment successful! Receipt ready \u2705"),k(s.receipt),y(!1),N(!0),T()):Qt.error(s.message||"Payment verification failed")}catch(a){Qt.error("Verification error")}finally{E(!1)}};return l?(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex items-center justify-center",children:(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(Bc,{className:"w-12 h-12 animate-spin text-amber-600 mx-auto"}),(0,qr.jsx)("p",{className:"mt-4 text-amber-700",children:"Loading fee details..."})]})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 p-4","data-testid":"fee-payment-page",children:[(0,qr.jsx)("header",{className:"max-w-lg mx-auto mb-6",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),children:(0,qr.jsx)(Ym,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"\ud83d\udcb3 Fee Payment"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Direct school account me pay karein"})]})]})}),(0,qr.jsxs)("main",{className:"max-w-lg mx-auto space-y-4",children:[(0,qr.jsx)(Qc,{className:"border-2 border-amber-200 bg-gradient-to-r from-amber-500 to-orange-500 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-amber-100",children:"Total Pending"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold",children:["\u20b9",(null===c||void 0===c||null===(e=c.summary)||void 0===e?void 0:e.total_pending)||0]})]}),(0,qr.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,qr.jsx)(Zm,{className:"w-8 h-8"})})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/20",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-amber-100",children:"This Month Due"}),(0,qr.jsxs)("p",{className:"font-semibold",children:["\u20b9",(null===c||void 0===c||null===(t=c.summary)||void 0===t?void 0:t.current_month_due)||0]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-amber-100",children:"Paid This Year"}),(0,qr.jsxs)("p",{className:"font-semibold",children:["\u20b9",(null===c||void 0===c||null===(a=c.summary)||void 0===a?void 0:a.total_paid_this_year)||0]})]})]})]})}),(0,qr.jsx)(Qc,{className:"border-2 border-blue-200 bg-blue-50",children:(0,qr.jsxs)(td,{className:"p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ic,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold text-blue-900",children:(null===h||void 0===h?void 0:h.name)||"School Account"}),(0,qr.jsx)("p",{className:"text-xs text-blue-600",children:"Payment yahi account me jayega"})]})]}),((null===h||void 0===h?void 0:h.upi_id)||(null===A||void 0===A?void 0:A.upi_id))&&(0,qr.jsx)("div",{className:"bg-white rounded-lg p-3 mb-2",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(dh,{className:"w-4 h-4 text-green-600"}),(0,qr.jsx)("span",{className:"text-sm text-slate-600",children:"UPI ID:"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"font-mono font-medium text-green-700",children:(null===h||void 0===h?void 0:h.upi_id)||(null===A||void 0===A?void 0:A.upi_id)||"school@upi"}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText((null===h||void 0===h?void 0:h.upi_id)||(null===A||void 0===A?void 0:A.upi_id)||""),Qt.success("UPI ID copied!")},children:(0,qr.jsx)(XU,{className:"w-3 h-3"})})]})]})}),(null===h||void 0===h?void 0:h.bank_name)&&(0,qr.jsxs)(Dl,{variant:"ghost",size:"sm",className:"w-full text-blue-600",onClick:()=>S(!w),children:[(0,qr.jsx)(y$,{className:"w-4 h-4 mr-2"}),w?"Hide":"Show"," Bank Details"]}),w&&(null===h||void 0===h?void 0:h.bank_name)&&(0,qr.jsxs)("div",{className:"bg-white rounded-lg p-3 mt-2 space-y-2 text-sm",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Bank:"}),(0,qr.jsx)("span",{className:"font-medium",children:h.bank_name})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"A/C Name:"}),(0,qr.jsx)("span",{className:"font-medium",children:h.account_holder_name||"N/A"})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"A/C No:"}),(0,qr.jsx)("span",{className:"font-mono",children:h.account_number?"".concat(h.account_number.slice(0,4),"****").concat(h.account_number.slice(-4)):"N/A"})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"IFSC:"}),(0,qr.jsx)("span",{className:"font-medium",children:h.ifsc_code||"N/A"})]})]}),!(null!==h&&void 0!==h&&h.upi_id)&&!(null!==h&&void 0!==h&&h.bank_name)&&(0,qr.jsx)("div",{className:"text-center py-2",children:(0,qr.jsx)("p",{className:"text-xs text-blue-600",children:"School payment details coming soon..."})})]})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h2",{className:"font-semibold text-slate-800 mb-3",children:"\ud83d\udccb Select Fee to Pay"}),(0,qr.jsx)("div",{className:"space-y-2",children:u.map((e,t)=>(0,qr.jsx)("div",{onClick:()=>{f(e),M(e.amount.toString())},className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat((null===x||void 0===x?void 0:x.fee_type)===e.fee_type?"border-amber-500 bg-amber-50":"border-slate-200 bg-white hover:border-amber-300"),"data-testid":"fee-option-".concat(e.fee_type),children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"font-medium text-slate-900 capitalize",children:[e.fee_type," Fee"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.description})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"font-bold text-lg text-slate-900",children:["\u20b9",e.amount]}),e.due_day>0&&(0,qr.jsxs)("p",{className:"text-xs text-slate-400",children:["Due: ",e.due_day,"th"]})]})]})},t))})]}),x&&(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Amount (\u20b9)"}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)("div",{className:"relative flex-1",children:[(0,qr.jsx)(Sh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{type:"number",value:O,onChange:e=>M(e.target.value),className:"pl-9",placeholder:"Enter amount","data-testid":"custom-amount-input"})]}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>M(x.amount.toString()),children:"Reset"})]})]}),x&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h2",{className:"font-semibold text-slate-800 mb-3",children:"\ud83d\udcb3 Payment Method"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,qr.jsxs)("div",{onClick:()=>v("upi"),className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("upi"===g?"border-green-500 bg-green-50":"border-slate-200 bg-white hover:border-green-300"),"data-testid":"payment-method-upi",children:[(0,qr.jsx)(dh,{className:"w-8 h-8 text-green-600 mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:"UPI"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"GPay, PhonePe, Paytm"})]}),(0,qr.jsxs)("div",{onClick:()=>v("credit_card"),className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("credit_card"===g?"border-blue-500 bg-blue-50":"border-slate-200 bg-white hover:border-blue-300"),"data-testid":"payment-method-card",children:[(0,qr.jsx)(nH,{className:"w-8 h-8 text-blue-600 mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:"Card"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Credit/Debit Card"})]}),(0,qr.jsxs)("div",{onClick:()=>v("net_banking"),className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("net_banking"===g?"border-purple-500 bg-purple-50":"border-slate-200 bg-white hover:border-purple-300"),"data-testid":"payment-method-netbanking",children:[(0,qr.jsx)(y$,{className:"w-8 h-8 text-purple-600 mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:"Net Banking"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"All Banks"})]}),(0,qr.jsxs)("div",{onClick:()=>v("debit_card"),className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("debit_card"===g?"border-orange-500 bg-orange-50":"border-slate-200 bg-white hover:border-orange-300"),"data-testid":"payment-method-debit",children:[(0,qr.jsx)(Zm,{className:"w-8 h-8 text-orange-600 mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:"Debit Card"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"ATM Card"})]})]})]}),x&&g&&(0,qr.jsxs)(Dl,{onClick:async()=>{if(!x||!g)return void Qt.error("Fee type aur payment method select karein");const e=O?parseFloat(O):x.amount;if(!e||e<=0)Qt.error("Valid amount enter karein");else{E(!0);try{const t=await fetch("".concat("","/api/fee-payment/initiate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:(null===r||void 0===r?void 0:r.student_id)||(null===r||void 0===r?void 0:r.id),school_id:(null===r||void 0===r?void 0:r.school_id)||"school1",amount:e,fee_type:x.fee_type,month:(new Date).toISOString().slice(0,7),payment_method:g,description:x.description})}),a=await t.json();t.ok?(P(a),"upi"===g&&a.upi_url?y(!0):setTimeout(()=>D(a.payment_id,"success"),2e3)):Qt.error(a.detail||"Payment initiate nahi ho paya")}catch(t){Qt.error("Payment error. Please try again.")}finally{E(!1)}}},disabled:C,className:"w-full h-14 text-lg bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600","data-testid":"pay-now-button",children:[C?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin mr-2"}):(0,qr.jsx)(Sh,{className:"w-5 h-5 mr-2"}),"Pay \u20b9",O||x.amount]}),(null===c||void 0===c||null===(n=c.recent_payments)||void 0===n?void 0:n.length)>0&&(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h2",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(rJ,{className:"w-4 h-4"}),"Recent Payments"]}),(0,qr.jsx)("div",{className:"space-y-2",children:c.recent_payments.map((e,t)=>(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-3 flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Km,{className:"w-5 h-5 text-green-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900 capitalize",children:e.fee_type}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:new Date(e.created_at).toLocaleDateString("en-IN")})]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"font-bold text-green-600",children:["\u20b9",e.amount]}),e.receipt_number&&(0,qr.jsx)("button",{className:"text-xs text-blue-600 hover:underline",children:"View Receipt"})]})]},t))})]})]}),(0,qr.jsx)(Im,{open:b,onOpenChange:y,children:(0,qr.jsxs)(zm,{className:"max-w-sm",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(aQ,{className:"w-5 h-5 text-green-600"}),"Pay via UPI"]})}),(0,qr.jsxs)("div",{className:"space-y-4 text-center",children:[(0,qr.jsx)("div",{className:"bg-white p-4 rounded-xl border-2 border-green-200 inline-block mx-auto",children:null!==A&&void 0!==A&&A.upi_url?(0,qr.jsx)(SQ,{value:A.upi_url,size:180,level:"H",includeMargin:!0,bgColor:"#ffffff",fgColor:"#000000"}):(0,qr.jsx)("div",{className:"w-[180px] h-[180px] flex items-center justify-center bg-slate-100 rounded",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-slate-400"})})}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Scan with any UPI app (GPay, PhonePe, Paytm)"}),(0,qr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2",children:[(0,qr.jsx)("p",{className:"text-xs text-blue-600",children:"Payment to"}),(0,qr.jsx)("p",{className:"font-semibold text-blue-800",children:(null===A||void 0===A?void 0:A.school_name)||(null===h||void 0===h?void 0:h.name)||"School"})]}),(0,qr.jsxs)("div",{className:"bg-green-50 rounded-xl p-4",children:[(0,qr.jsx)("p",{className:"text-sm text-green-700",children:"Amount to Pay"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold text-green-800",children:["\u20b9",null===A||void 0===A?void 0:A.amount]})]}),(0,qr.jsxs)("div",{className:"bg-slate-100 rounded-lg p-3",children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"UPI ID (Copy \u0915\u0930\u0947\u0902)"}),(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,qr.jsx)("span",{className:"font-mono font-medium text-green-700",children:(null===A||void 0===A?void 0:A.upi_id)||(null===h||void 0===h?void 0:h.upi_id)||"school@upi"}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>{null!==A&&void 0!==A&&A.upi_id&&(navigator.clipboard.writeText(A.upi_id),Qt.success("UPI ID copied!"))},children:(0,qr.jsx)(XU,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{variant:"outline",className:"flex-1",onClick:()=>y(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>D(null===A||void 0===A?void 0:A.payment_id,"success"),disabled:C,children:C?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):"Payment Done \u2713"})]}),(0,qr.jsx)("p",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:'\u26a0\ufe0f Payment \u0915\u0930\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 "Payment Done" button click \u0915\u0930\u0947\u0902'})]})]})}),(0,qr.jsx)(Im,{open:j,onOpenChange:N,children:(0,qr.jsxs)(zm,{className:"max-w-sm",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2 text-green-600",children:[(0,qr.jsx)(Km,{className:"w-5 h-5"}),"Payment Successful!"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)("div",{className:"w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Km,{className:"w-10 h-10 text-green-600"})}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4 space-y-3",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Receipt No"}),(0,qr.jsx)("span",{className:"font-mono font-medium",children:null===_||void 0===_?void 0:_.receipt_number})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Amount"}),(0,qr.jsxs)("span",{className:"font-bold text-green-600",children:["\u20b9",null===_||void 0===_?void 0:_.amount]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Fee Type"}),(0,qr.jsx)("span",{className:"capitalize",children:null===_||void 0===_?void 0:_.fee_type})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Payment Method"}),(0,qr.jsx)("span",{className:"capitalize",children:null===_||void 0===_?void 0:_.payment_method})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Date"}),(0,qr.jsx)("span",{children:(new Date).toLocaleDateString("en-IN")})]})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",className:"flex-1",onClick:()=>{const e="\nSCHOOL FEE RECEIPT\n==================\nReceipt No: ".concat(null===_||void 0===_?void 0:_.receipt_number,"\nDate: ").concat((new Date).toLocaleDateString("en-IN"),"\n\nStudent: ").concat(null===_||void 0===_?void 0:_.student_name,"\nFee Type: ").concat(null===_||void 0===_?void 0:_.fee_type,"\nAmount: \u20b9").concat(null===_||void 0===_?void 0:_.amount,"\nPayment Method: ").concat(null===_||void 0===_?void 0:_.payment_method,"\n\nSchool: ").concat(null===_||void 0===_?void 0:_.school_name,"\n==================\nThank you for your payment!\n    "),t=new Blob([e],{type:"text/plain"}),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="receipt-".concat(null===_||void 0===_?void 0:_.receipt_number,".txt"),s.click(),Qt.success("Receipt downloaded!")},children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download"]}),(0,qr.jsx)(Dl,{className:"flex-1 bg-amber-600 hover:bg-amber-700",onClick:()=>N(!1),children:"Done"})]})]})]})})]})}const kQ=Dc("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),CQ=Dc("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),EQ=Dc("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),AQ=Dc("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),PQ=Dc("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),OQ="";function MQ(){var e,t,a,n,r,i,l,o;const{user:c,token:d}=Kr(),[m,h]=(0,s.useState)(!0),[p,x]=(0,s.useState)(null),[f,g]=(0,s.useState)(null),[v,b]=(0,s.useState)([]),[y,j]=(0,s.useState)([]),[N,w]=(0,s.useState)([]),[S,_]=(0,s.useState)("overview"),[k,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),[P,O]=(0,s.useState)(null),[M,T]=(0,s.useState)(!1),[D,I]=(0,s.useState)(!1),[R,L]=(0,s.useState)(!1),[F,z]=(0,s.useState)([]),[B,U]=(0,s.useState)(""),[H,q]=(0,s.useState)(null),[V,W]=(0,s.useState)({academic_year:"2023-24",due_amount:"",fee_type:"tuition",description:"",remarks:""}),[G,K]=(0,s.useState)(!1),[Y,J]=(0,s.useState)([]),[$,Q]=(0,s.useState)(""),[X,Z]=(0,s.useState)(null),[ee,te]=(0,s.useState)({basic_salary:"",hra:"",da:"",ta:"",medical:"",special_allowance:"",pf_deduction:"",tax_deduction:"",other_deductions:"",effective_from:(new Date).toISOString().split("T")[0]}),[ae,se]=(0,s.useState)([]),[ne,re]=(0,s.useState)({category:"maintenance",amount:"",description:"",vendor_name:"",payment_method:"bank_transfer"}),ie=(null===c||void 0===c?void 0:c.school_id)||"school1";(0,s.useEffect)(()=>{le()},[ie]);const le=async()=>{h(!0);try{await Promise.all([oe(),ce(),de(),ue(),me(),he()])}catch(e){console.error("Error fetching data:",e)}finally{h(!1)}},oe=async()=>{try{const e=await fetch("".concat(OQ,"/api/ai-accountant/dashboard/").concat(ie));if(e.ok){const t=await e.json();x(t)}}catch(e){console.error("Dashboard fetch error:",e)}},ce=async()=>{try{const e=await fetch("".concat(OQ,"/api/ai-accountant/ai/quick-insight/").concat(ie));if(e.ok){const t=await e.json();g(t)}}catch(e){console.error("AI insight error:",e)}},de=async()=>{try{const e=await fetch("".concat(OQ,"/api/ai-accountant/salaries/").concat(ie));if(e.ok){const t=await e.json();b(t.salaries||[])}}catch(e){console.error("Salaries fetch error:",e)}},ue=async()=>{try{const e=await fetch("".concat(OQ,"/api/ai-accountant/fees/defaulters/").concat(ie));if(e.ok){const t=await e.json();j(t.defaulters||[])}}catch(e){console.error("Defaulters fetch error:",e)}},me=async()=>{try{const e=await fetch("".concat(OQ,"/api/ai-accountant/expenses/").concat(ie));if(e.ok){const t=await e.json();w(t.expenses||[])}}catch(e){console.error("Expenses fetch error:",e)}},he=async()=>{try{const e=await fetch("".concat(OQ,"/api/multi-year-fees/defaulters/").concat(ie));if(e.ok){const t=await e.json();se(t.defaulters||[])}}catch(e){console.error("Old dues fetch error:",e)}},pe=async e=>{T(!0),A(!0);try{const t=await fetch("".concat(OQ,"/api/ai-accountant/ai/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({school_id:ie,analysis_type:e})});if(t.ok){const e=await t.json();O(e)}else Qt.error("AI analysis failed")}catch(t){Qt.error("Error getting AI analysis")}finally{T(!1)}},xe=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e||0);return m?(0,qr.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(Bc,{className:"w-12 h-12 animate-spin text-emerald-600 mx-auto"}),(0,qr.jsx)("p",{className:"mt-4 text-slate-600",children:"Loading Accountant Dashboard..."})]})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-slate-50","data-testid":"accountant-dashboard",children:[(0,qr.jsx)("header",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-6 px-6",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,qr.jsx)(kQ,{className:"w-7 h-7"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold",children:"AI Accountant"}),(0,qr.jsx)("p",{className:"text-emerald-100",children:"Smart Financial Management"})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)(Dl,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0",onClick:()=>pe("monthly_report"),children:[(0,qr.jsx)(th,{className:"w-4 h-4 mr-2"}),"AI Report"]}),(0,qr.jsxs)(Dl,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0",onClick:le,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})})}),(0,qr.jsxs)("main",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[f&&(0,qr.jsx)(Qc,{className:"border-l-4 ".concat("success"===f.type?"border-l-emerald-500 bg-emerald-50":"warning"===f.type?"border-l-amber-500 bg-amber-50":"border-l-blue-500 bg-blue-50"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center ".concat("success"===f.type?"bg-emerald-100":"warning"===f.type?"bg-amber-100":"bg-blue-100"),children:(0,qr.jsx)(hh,{className:"w-5 h-5 ".concat("success"===f.type?"text-emerald-600":"warning"===f.type?"text-amber-600":"text-blue-600")})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"font-medium text-slate-800",children:"AI Insight"}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:f.insight})]})]})})}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white",children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-emerald-100",children:"Fee Collected (Month)"}),(0,qr.jsx)("p",{className:"text-2xl font-bold mt-1",children:xe(null===p||void 0===p||null===(e=p.overview)||void 0===e?void 0:e.fee_collected_this_month)})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Mh,{className:"w-6 h-6"})})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500 to-orange-500 text-white",children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-amber-100",children:"Pending Fees"}),(0,qr.jsx)("p",{className:"text-2xl font-bold mt-1",children:xe(null===p||void 0===p||null===(t=p.overview)||void 0===t?void 0:t.pending_fees)})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(QU,{className:"w-6 h-6"})})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500 to-indigo-500 text-white",children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-blue-100",children:"Salary Paid (Month)"}),(0,qr.jsx)("p",{className:"text-2xl font-bold mt-1",children:xe(null===p||void 0===p||null===(a=p.overview)||void 0===a?void 0:a.salary_paid_this_month)})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-6 h-6"})})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-rose-500 to-pink-500 text-white",children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-rose-100",children:"Expenses (Month)"}),(0,qr.jsx)("p",{className:"text-2xl font-bold mt-1",children:xe(null===p||void 0===p||null===(n=p.overview)||void 0===n?void 0:n.expenses_this_month)})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(CQ,{className:"w-6 h-6"})})]})})})]}),(0,qr.jsxs)(wc,{value:S,onValueChange:_,children:[(0,qr.jsxs)(Sc,{className:"grid grid-cols-4 w-full max-w-2xl",children:[(0,qr.jsx)(_c,{value:"overview",children:"Overview"}),(0,qr.jsx)(_c,{value:"salaries",children:"Salaries"}),(0,qr.jsx)(_c,{value:"defaulters",children:"Defaulters"}),(0,qr.jsx)(_c,{value:"expenses",children:"Expenses"})]}),(0,qr.jsx)(kc,{value:"overview",className:"mt-4",children:(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ch,{className:"w-5 h-5 text-emerald-600"}),"Recent Fee Payments"]})}),(0,qr.jsx)(td,{children:(null===p||void 0===p||null===(r=p.recent_transactions)||void 0===r||null===(i=r.payments)||void 0===i?void 0:i.length)>0?(0,qr.jsx)("div",{className:"space-y-3",children:p.recent_transactions.payments.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-800",children:e.student_name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 capitalize",children:e.fee_type})]})]}),(0,qr.jsx)("span",{className:"font-semibold text-emerald-600",children:xe(e.amount)})]},t))}):(0,qr.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,qr.jsx)(Ch,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:"No recent payments"})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(EQ,{className:"w-5 h-5 text-rose-600"}),"Expenses by Category"]})}),(0,qr.jsx)(td,{children:(null===p||void 0===p||null===(l=p.expenses_by_category)||void 0===l?void 0:l.length)>0?(0,qr.jsx)("div",{className:"space-y-3",children:p.expenses_by_category.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(0===t?"bg-rose-500":1===t?"bg-amber-500":2===t?"bg-blue-500":"bg-slate-400")}),(0,qr.jsx)("span",{className:"capitalize text-slate-700",children:e.category})]}),(0,qr.jsx)("span",{className:"font-medium",children:xe(e.amount)})]},t))}):(0,qr.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,qr.jsx)(EQ,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:"No expenses recorded"})]})})]})]})}),(0,qr.jsx)(kc,{value:"salaries",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-5 h-5 text-blue-600"}),"Staff Salaries"]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{onClick:()=>K(!0),variant:"outline",className:"border-blue-200 text-blue-700","data-testid":"add-salary-btn",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Set Salary Structure"]}),(0,qr.jsxs)(Dl,{onClick:async()=>{I(!0);try{const e=(new Date).toISOString().slice(0,7),t=await fetch("".concat(OQ,"/api/ai-accountant/salaries/pay-all?school_id=").concat(ie,"&month=").concat(e),{method:"POST"});if(t.ok){const e=await t.json();Qt.success("".concat(e.updated_count||"All"," salaries paid! \u2705")),de(),oe()}else Qt.error("Salary payment failed")}catch(e){Qt.error("Error processing salaries")}finally{I(!1)}},disabled:D,className:"bg-emerald-600 hover:bg-emerald-700",children:[D?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Pay All Salaries"]})]})]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsx)("th",{className:"text-left py-3 px-4 text-sm text-slate-500",children:"Employee"}),(0,qr.jsx)("th",{className:"text-left py-3 px-4 text-sm text-slate-500",children:"Designation"}),(0,qr.jsx)("th",{className:"text-right py-3 px-4 text-sm text-slate-500",children:"Base"}),(0,qr.jsx)("th",{className:"text-right py-3 px-4 text-sm text-slate-500",children:"Allowances"}),(0,qr.jsx)("th",{className:"text-right py-3 px-4 text-sm text-slate-500",children:"Deductions"}),(0,qr.jsx)("th",{className:"text-right py-3 px-4 text-sm text-slate-500",children:"Net Salary"}),(0,qr.jsx)("th",{className:"text-center py-3 px-4 text-sm text-slate-500",children:"Status"})]})}),(0,qr.jsx)("tbody",{children:v.length>0?v.map((e,t)=>(0,qr.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"py-3 px-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-4 h-4 text-blue-600"})}),(0,qr.jsx)("span",{className:"font-medium",children:e.employee_name})]})}),(0,qr.jsx)("td",{className:"py-3 px-4 text-slate-600 capitalize",children:e.designation}),(0,qr.jsx)("td",{className:"py-3 px-4 text-right",children:xe(e.base_salary)}),(0,qr.jsxs)("td",{className:"py-3 px-4 text-right text-emerald-600",children:["+",xe(e.allowances)]}),(0,qr.jsxs)("td",{className:"py-3 px-4 text-right text-rose-600",children:["-",xe(e.deductions)]}),(0,qr.jsx)("td",{className:"py-3 px-4 text-right font-bold",children:xe(e.net_salary)}),(0,qr.jsx)("td",{className:"py-3 px-4 text-center",children:"paid"===e.status?(0,qr.jsx)("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs",children:"Paid"}):(0,qr.jsx)("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs",children:"Pending"})})]},t)):(0,qr.jsx)("tr",{children:(0,qr.jsxs)("td",{colSpan:7,className:"py-12 text-center text-slate-400",children:[(0,qr.jsx)(AQ,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:'No salary records. Click "Set Salary Structure" to add.'})]})})})]})})})]})}),(0,qr.jsx)(kc,{value:"defaulters",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(QU,{className:"w-5 h-5 text-amber-600"}),"Fee Defaulters (",y.length,")"]})}),(0,qr.jsx)(td,{children:y.length>0?(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsx)("th",{className:"text-left py-3 px-4 text-sm text-slate-500",children:"Student"}),(0,qr.jsx)("th",{className:"text-left py-3 px-4 text-sm text-slate-500",children:"Class"}),(0,qr.jsx)("th",{className:"text-left py-3 px-4 text-sm text-slate-500",children:"Father Name"}),(0,qr.jsx)("th",{className:"text-left py-3 px-4 text-sm text-slate-500",children:"Contact"}),(0,qr.jsx)("th",{className:"text-center py-3 px-4 text-sm text-slate-500",children:"Months Pending"}),(0,qr.jsx)("th",{className:"text-right py-3 px-4 text-sm text-slate-500",children:"Amount Due"}),(0,qr.jsx)("th",{className:"text-center py-3 px-4 text-sm text-slate-500",children:"Action"})]})}),(0,qr.jsx)("tbody",{children:y.map((e,t)=>(0,qr.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"py-3 px-4 font-medium",children:e.student_name||"N/A"}),(0,qr.jsx)("td",{className:"py-3 px-4 text-slate-600",children:e.class_id||"N/A"}),(0,qr.jsx)("td",{className:"py-3 px-4 text-slate-600",children:e.father_name||"N/A"}),(0,qr.jsx)("td",{className:"py-3 px-4 text-slate-600",children:e.mobile||"N/A"}),(0,qr.jsx)("td",{className:"py-3 px-4 text-center",children:(0,qr.jsxs)("span",{className:"px-2 py-1 bg-rose-100 text-rose-700 rounded-full text-xs",children:[e.months_pending," months"]})}),(0,qr.jsx)("td",{className:"py-3 px-4 text-right font-bold text-rose-600",children:xe(e.total_pending)}),(0,qr.jsx)("td",{className:"py-3 px-4 text-center",children:(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",children:[(0,qr.jsx)(sJ,{className:"w-3 h-3 mr-1"}),"Remind"]})})]},t))})]})}):(0,qr.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,qr.jsx)(Km,{className:"w-16 h-16 mx-auto mb-4 text-emerald-300"}),(0,qr.jsx)("p",{className:"text-lg font-medium text-emerald-600",children:"No Fee Defaulters! \ud83c\udf89"}),(0,qr.jsx)("p",{className:"text-sm",children:"Sabhi students ki fees clear hai"})]})})]})}),(0,qr.jsx)(kc,{value:"expenses",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(CQ,{className:"w-5 h-5 text-rose-600"}),"School Expenses"]}),(0,qr.jsxs)(Dl,{onClick:()=>C(!0),children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Expense"]})]})}),(0,qr.jsx)(td,{children:N.length>0?(0,qr.jsx)("div",{className:"space-y-3",children:N.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat("salary"===e.category?"bg-blue-100":"maintenance"===e.category?"bg-amber-100":"utilities"===e.category?"bg-purple-100":"bg-slate-100"),children:"salary"===e.category?(0,qr.jsx)(Lc,{className:"w-6 h-6 text-blue-600"}):"maintenance"===e.category?(0,qr.jsx)(y$,{className:"w-6 h-6 text-amber-600"}):(0,qr.jsx)(Ch,{className:"w-6 h-6 text-slate-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-800",children:e.description}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500 capitalize",children:[e.category," \u2022 ",e.vendor_name||"N/A"," \u2022 ",e.date]})]})]}),(0,qr.jsxs)("span",{className:"font-bold text-rose-600 text-lg",children:["-",xe(e.amount)]})]},t))}):(0,qr.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,qr.jsx)(Ch,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,qr.jsx)("p",{children:"No expenses recorded yet"}),(0,qr.jsxs)(Dl,{className:"mt-4",onClick:()=>C(!0),children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add First Expense"]})]})})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(th,{className:"w-5 h-5 text-purple-600"}),"AI Financial Analysis"]}),(0,qr.jsx)(ed,{children:"One-click AI reports"})]}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsxs)(Dl,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>pe("fee_collection"),children:[(0,qr.jsx)(Mh,{className:"w-6 h-6 text-emerald-600"}),(0,qr.jsx)("span",{children:"Fee Analysis"})]}),(0,qr.jsxs)(Dl,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>pe("salary_summary"),children:[(0,qr.jsx)(Lc,{className:"w-6 h-6 text-blue-600"}),(0,qr.jsx)("span",{children:"Salary Summary"})]}),(0,qr.jsxs)(Dl,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>pe("expense_analysis"),children:[(0,qr.jsx)(EQ,{className:"w-6 h-6 text-rose-600"}),(0,qr.jsx)("span",{children:"Expense Analysis"})]}),(0,qr.jsxs)(Dl,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>pe("monthly_report"),children:[(0,qr.jsx)(cY,{className:"w-6 h-6 text-purple-600"}),(0,qr.jsx)("span",{children:"Monthly Report"})]})]})})]})]}),(0,qr.jsx)(Im,{open:k,onOpenChange:C,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(xY,{className:"w-5 h-5 text-rose-600"}),"Add New Expense"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Category"}),(0,qr.jsxs)("select",{value:ne.category,onChange:e=>re(t=>u(u({},t),{},{category:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"salary",children:"Salary"}),(0,qr.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,qr.jsx)("option",{value:"utilities",children:"Utilities (Electricity, Water)"}),(0,qr.jsx)("option",{value:"supplies",children:"Supplies & Stationery"}),(0,qr.jsx)("option",{value:"transport",children:"Transport"}),(0,qr.jsx)("option",{value:"events",children:"Events & Functions"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Amount (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:ne.amount,onChange:e=>re(t=>u(u({},t),{},{amount:e.target.value})),placeholder:"Enter amount"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Description"}),(0,qr.jsx)(_Y,{value:ne.description,onChange:e=>re(t=>u(u({},t),{},{description:e.target.value})),placeholder:"Expense description...",rows:2})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Vendor Name (Optional)"}),(0,qr.jsx)(Rl,{value:ne.vendor_name,onChange:e=>re(t=>u(u({},t),{},{vendor_name:e.target.value})),placeholder:"Vendor/Supplier name"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Payment Method"}),(0,qr.jsxs)("select",{value:ne.payment_method,onChange:e=>re(t=>u(u({},t),{},{payment_method:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,qr.jsx)("option",{value:"cash",children:"Cash"}),(0,qr.jsx)("option",{value:"cheque",children:"Cheque"}),(0,qr.jsx)("option",{value:"upi",children:"UPI"})]})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(ne.amount&&ne.description)try{(await fetch("".concat(OQ,"/api/ai-accountant/expenses/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u(u({},ne),{},{school_id:ie,amount:parseFloat(ne.amount)}))})).ok?(Qt.success("Expense added successfully!"),C(!1),re({category:"maintenance",amount:"",description:"",vendor_name:"",payment_method:"bank_transfer"}),me(),oe()):Qt.error("Expense add nahi ho paya")}catch(e){Qt.error("Error adding expense")}else Qt.error("Amount aur description required hai")},className:"w-full bg-rose-600 hover:bg-rose-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Expense"]})]})]})}),(0,qr.jsx)(Im,{open:E,onOpenChange:A,children:(0,qr.jsxs)(zm,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(th,{className:"w-5 h-5 text-purple-600"}),"AI Financial Analysis"]})}),M?(0,qr.jsxs)("div",{className:"text-center py-12",children:[(0,qr.jsx)(Bc,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto"}),(0,qr.jsx)("p",{className:"mt-4 text-slate-600",children:"AI analyzing your financial data..."})]}):P?(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4",children:[(0,qr.jsxs)("p",{className:"text-sm text-purple-700 font-medium mb-2",children:["Analysis Type: ",null===(o=P.analysis_type)||void 0===o?void 0:o.replace("_"," ").toUpperCase()]}),(0,qr.jsxs)("p",{className:"text-xs text-purple-500",children:["Period: ",P.period]})]}),(0,qr.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,qr.jsx)("div",{className:"whitespace-pre-wrap text-slate-700 bg-slate-50 rounded-xl p-4",children:P.ai_analysis})}),(0,qr.jsxs)(Dl,{variant:"outline",className:"w-full",onClick:()=>{const e=P.ai_analysis;navigator.clipboard.writeText(e),Qt.success("Analysis copied!")},children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Copy Report"]})]}):null]})}),(0,qr.jsx)(Im,{open:R,onOpenChange:L,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-5 h-5 text-red-600"}),"Previous Year Fee Due Add Karein"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Student Search"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{value:B,onChange:e=>{U(e.target.value),(async e=>{if(!e||e.length<2)z([]);else try{const t=await fetch("".concat(OQ,"/api/students/search?q=").concat(encodeURIComponent(e),"&school_id=").concat(ie));if(t.ok){const e=await t.json();z(e.students||e||[])}}catch(t){console.error("Student search error:",t)}})(e.target.value)},placeholder:"Student ka naam ya ID search karein...",className:"pl-10"})]}),F.length>0&&!H&&(0,qr.jsx)("div",{className:"mt-2 border rounded-lg max-h-40 overflow-y-auto",children:F.map((e,t)=>(0,qr.jsxs)("div",{onClick:()=>{q(e),U(e.name),z([])},className:"p-2 hover:bg-slate-50 cursor-pointer flex items-center gap-2",children:[(0,qr.jsx)(Fc,{className:"w-4 h-4 text-slate-400"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.student_id||e.id," | ",e.class_id]})]})]},t))}),H&&(0,qr.jsxs)("div",{className:"mt-2 p-2 bg-emerald-50 rounded-lg flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-emerald-600"}),(0,qr.jsx)("span",{className:"text-sm font-medium",children:H.name})]}),(0,qr.jsx)("button",{onClick:()=>{q(null),U("")},className:"text-xs text-red-600",children:"Change"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Academic Year"}),(0,qr.jsxs)("select",{value:V.academic_year,onChange:e=>W(t=>u(u({},t),{},{academic_year:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"2023-24",children:"2023-24"}),(0,qr.jsx)("option",{value:"2022-23",children:"2022-23"}),(0,qr.jsx)("option",{value:"2021-22",children:"2021-22"}),(0,qr.jsx)("option",{value:"2020-21",children:"2020-21"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Fee Type"}),(0,qr.jsxs)("select",{value:V.fee_type,onChange:e=>W(t=>u(u({},t),{},{fee_type:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"tuition",children:"Tuition Fee"}),(0,qr.jsx)("option",{value:"exam",children:"Exam Fee"}),(0,qr.jsx)("option",{value:"transport",children:"Transport Fee"}),(0,qr.jsx)("option",{value:"hostel",children:"Hostel Fee"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Due Amount (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:V.due_amount,onChange:e=>W(t=>u(u({},t),{},{due_amount:e.target.value})),placeholder:"Enter due amount"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Description (Optional)"}),(0,qr.jsx)(Rl,{value:V.description,onChange:e=>W(t=>u(u({},t),{},{description:e.target.value})),placeholder:"e.g., Last year pending tuition"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Remarks (Optional)"}),(0,qr.jsx)(_Y,{value:V.remarks,onChange:e=>W(t=>u(u({},t),{},{remarks:e.target.value})),placeholder:"Any additional notes...",rows:2})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(H&&V.due_amount)try{const e=await fetch("".concat(OQ,"/api/multi-year-fees/add-due"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:H.id||H.student_id,school_id:ie,academic_year:V.academic_year,due_amount:parseFloat(V.due_amount),fee_type:V.fee_type,description:V.description,remarks:V.remarks})});if(e.ok){const t=await e.json();Qt.success(t.message||"Fee due added successfully!"),L(!1),q(null),W({academic_year:"2023-24",due_amount:"",fee_type:"tuition",description:"",remarks:""}),he()}else{const t=await e.json();Qt.error(t.detail||"Fee due add nahi ho paya")}}catch(e){Qt.error("Error adding fee due")}else Qt.error("Student select karein aur amount daalein")},className:"w-full bg-red-600 hover:bg-red-700",disabled:!H||!V.due_amount,children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Fee Due"]})]})]})}),(0,qr.jsx)(Im,{open:G,onOpenChange:K,children:(0,qr.jsxs)(zm,{className:"max-w-xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(AQ,{className:"w-5 h-5 text-blue-600"}),"Salary Structure Set Karein"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Staff Search"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{value:$,onChange:e=>{Q(e.target.value),(async e=>{if(!e||e.length<2)J([]);else try{const t=await fetch("".concat(OQ,"/api/staff/search?q=").concat(encodeURIComponent(e),"&school_id=").concat(ie));if(t.ok){const e=await t.json();J(e.staff||e||[])}}catch(t){console.error("Staff search error:",t)}})(e.target.value)},placeholder:"Staff ka naam search karein...",className:"pl-10"})]}),Y.length>0&&!X&&(0,qr.jsx)("div",{className:"mt-2 border rounded-lg max-h-40 overflow-y-auto",children:Y.map((e,t)=>(0,qr.jsxs)("div",{onClick:()=>{Z(e),Q(e.name),J([])},className:"p-2 hover:bg-slate-50 cursor-pointer flex items-center gap-2",children:[(0,qr.jsx)(eH,{className:"w-4 h-4 text-slate-400"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 capitalize",children:e.role||e.designation})]})]},t))}),X&&(0,qr.jsxs)("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-blue-600"}),(0,qr.jsx)("span",{className:"text-sm font-medium",children:X.name}),(0,qr.jsxs)("span",{className:"text-xs text-slate-500 capitalize",children:["(",X.role||X.designation,")"]})]}),(0,qr.jsx)("button",{onClick:()=>{Z(null),Q("")},className:"text-xs text-red-600",children:"Change"})]})]}),(0,qr.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-4",children:[(0,qr.jsxs)("h4",{className:"font-medium text-emerald-800 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(PQ,{className:"w-4 h-4"}),"Earnings"]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Basic Salary *"}),(0,qr.jsx)(Rl,{type:"number",value:ee.basic_salary,onChange:e=>te(t=>u(u({},t),{},{basic_salary:e.target.value})),placeholder:"30000"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"HRA"}),(0,qr.jsx)(Rl,{type:"number",value:ee.hra,onChange:e=>te(t=>u(u({},t),{},{hra:e.target.value})),placeholder:"5000"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"DA"}),(0,qr.jsx)(Rl,{type:"number",value:ee.da,onChange:e=>te(t=>u(u({},t),{},{da:e.target.value})),placeholder:"3000"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"TA"}),(0,qr.jsx)(Rl,{type:"number",value:ee.ta,onChange:e=>te(t=>u(u({},t),{},{ta:e.target.value})),placeholder:"2000"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Medical"}),(0,qr.jsx)(Rl,{type:"number",value:ee.medical,onChange:e=>te(t=>u(u({},t),{},{medical:e.target.value})),placeholder:"1500"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Special Allowance"}),(0,qr.jsx)(Rl,{type:"number",value:ee.special_allowance,onChange:e=>te(t=>u(u({},t),{},{special_allowance:e.target.value})),placeholder:"2000"})]})]})]}),(0,qr.jsxs)("div",{className:"bg-rose-50 rounded-lg p-4",children:[(0,qr.jsxs)("h4",{className:"font-medium text-rose-800 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(CQ,{className:"w-4 h-4"}),"Deductions"]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"PF"}),(0,qr.jsx)(Rl,{type:"number",value:ee.pf_deduction,onChange:e=>te(t=>u(u({},t),{},{pf_deduction:e.target.value})),placeholder:"1800"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Tax"}),(0,qr.jsx)(Rl,{type:"number",value:ee.tax_deduction,onChange:e=>te(t=>u(u({},t),{},{tax_deduction:e.target.value})),placeholder:"0"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-slate-600",children:"Other"}),(0,qr.jsx)(Rl,{type:"number",value:ee.other_deductions,onChange:e=>te(t=>u(u({},t),{},{other_deductions:e.target.value})),placeholder:"0"})]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Effective From"}),(0,qr.jsx)(Rl,{type:"date",value:ee.effective_from,onChange:e=>te(t=>u(u({},t),{},{effective_from:e.target.value}))})]}),ee.basic_salary&&(0,qr.jsxs)("div",{className:"bg-slate-100 rounded-lg p-4",children:[(0,qr.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,qr.jsx)("span",{children:"Gross Salary:"}),(0,qr.jsx)("span",{className:"font-bold text-emerald-600",children:xe((parseFloat(ee.basic_salary)||0)+(parseFloat(ee.hra)||0)+(parseFloat(ee.da)||0)+(parseFloat(ee.ta)||0)+(parseFloat(ee.medical)||0)+(parseFloat(ee.special_allowance)||0))})]}),(0,qr.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[(0,qr.jsx)("span",{children:"Total Deductions:"}),(0,qr.jsx)("span",{className:"font-bold text-rose-600",children:xe((parseFloat(ee.pf_deduction)||0)+(parseFloat(ee.tax_deduction)||0)+(parseFloat(ee.other_deductions)||0))})]}),(0,qr.jsx)("hr",{className:"my-2"}),(0,qr.jsxs)("div",{className:"flex justify-between text-base",children:[(0,qr.jsx)("span",{className:"font-medium",children:"Net Salary:"}),(0,qr.jsx)("span",{className:"font-bold text-blue-600",children:xe((parseFloat(ee.basic_salary)||0)+(parseFloat(ee.hra)||0)+(parseFloat(ee.da)||0)+(parseFloat(ee.ta)||0)+(parseFloat(ee.medical)||0)+(parseFloat(ee.special_allowance)||0)-(parseFloat(ee.pf_deduction)||0)-(parseFloat(ee.tax_deduction)||0)-(parseFloat(ee.other_deductions)||0))})]})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(X&&ee.basic_salary)try{const e=await fetch("".concat(OQ,"/api/salary/structure/set"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({staff_id:X.id,school_id:ie,basic_salary:parseFloat(ee.basic_salary)||0,hra:parseFloat(ee.hra)||0,da:parseFloat(ee.da)||0,ta:parseFloat(ee.ta)||0,medical:parseFloat(ee.medical)||0,special_allowance:parseFloat(ee.special_allowance)||0,pf_deduction:parseFloat(ee.pf_deduction)||0,tax_deduction:parseFloat(ee.tax_deduction)||0,other_deductions:parseFloat(ee.other_deductions)||0,effective_from:ee.effective_from})});if(e.ok){const t=await e.json();Qt.success(t.message||"Salary structure set successfully!"),K(!1),Z(null),te({basic_salary:"",hra:"",da:"",ta:"",medical:"",special_allowance:"",pf_deduction:"",tax_deduction:"",other_deductions:"",effective_from:(new Date).toISOString().split("T")[0]}),de()}else{const t=await e.json();Qt.error(t.detail||"Salary structure set nahi ho paya")}}catch(e){Qt.error("Error setting salary structure")}else Qt.error("Staff select karein aur basic salary daalein")},className:"w-full bg-blue-600 hover:bg-blue-700",disabled:!X||!ee.basic_salary,children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Set Salary Structure"]})]})]})})]})}"".concat("","/api");const TQ="".concat("","/api"),DQ={CBSE:{name:"CBSE",fullName:"Central Board of Secondary Education",website:"https://www.cbse.gov.in",notificationUrl:"https://www.cbse.gov.in/cbsenew/cbse.html",color:"bg-blue-500"},MPBSE:{name:"MP Board",fullName:"Madhya Pradesh Board of Secondary Education",website:"https://mpbse.nic.in",notificationUrl:"https://mpbse.nic.in/notice.htm",color:"bg-orange-500"},RBSE:{name:"RBSE",fullName:"Rajasthan Board of Secondary Education",website:"https://rajeduboard.rajasthan.gov.in",notificationUrl:"https://rajeduboard.rajasthan.gov.in/",color:"bg-pink-500"},NCERT:{name:"NCERT",fullName:"National Council of Educational Research and Training",website:"https://ncert.nic.in",notificationUrl:"https://ncert.nic.in/announcement.php",color:"bg-green-500"}},IQ={CBSE:[{id:"cbse-1",title:"CBSE Date Sheet 2025 Released",description:"Class 10 & 12 Board Exams starting from 15th February 2025",type:"exam",date:"2025-01-15",important:!0,url:"https://www.cbse.gov.in/cbsenew/datesheet.html",autoApply:!0,applyTo:["calendar","exam_schedule"]},{id:"cbse-2",title:"Practical Exam Guidelines 2024-25",description:"Updated guidelines for conducting practical exams in schools",type:"circular",date:"2025-01-10",important:!1,url:"https://www.cbse.gov.in/cbsenew/circular.html"},{id:"cbse-3",title:"Syllabus Rationalization Notice",description:"Deleted portions for Class 10 & 12 for session 2024-25",type:"syllabus",date:"2025-01-05",important:!0,url:"https://www.cbse.gov.in/cbsenew/curriculum.html",autoApply:!0,applyTo:["syllabus"]}],MPBSE:[{id:"mp-1",title:"MP Board \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0938\u092e\u092f \u0938\u093e\u0930\u0923\u0940 2025",description:"\u0915\u0915\u094d\u0937\u093e 10\u0935\u0940\u0902 \u090f\u0935\u0902 12\u0935\u0940\u0902 \u0915\u0940 \u092a\u0930\u0940\u0915\u094d\u0937\u093e\u090f\u0902 17 \u092b\u0930\u0935\u0930\u0940 \u0938\u0947 \u092a\u094d\u0930\u093e\u0930\u0902\u092d",type:"exam",date:"2025-01-14",important:!0,url:"https://mpbse.nic.in/time_table.htm",autoApply:!0,applyTo:["calendar","exam_schedule"]},{id:"mp-2",title:"\u092a\u094d\u0930\u093e\u092f\u094b\u0917\u093f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0926\u093f\u0936\u093e-\u0928\u093f\u0930\u094d\u0926\u0947\u0936",description:"\u0906\u0902\u0924\u0930\u093f\u0915 \u092e\u0942\u0932\u094d\u092f\u093e\u0902\u0915\u0928 \u090f\u0935\u0902 \u092a\u094d\u0930\u093e\u092f\u094b\u0917\u093f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0939\u0947\u0924\u0941 \u0928\u093f\u0930\u094d\u0926\u0947\u0936",type:"circular",date:"2025-01-08",important:!1,url:"https://mpbse.nic.in/notice.htm"}],RBSE:[{id:"rbse-1",title:"RBSE Time Table 2025 \u0918\u094b\u0937\u093f\u0924",description:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u092c\u094b\u0930\u094d\u0921 \u092a\u0930\u0940\u0915\u094d\u0937\u093e 20 \u092b\u0930\u0935\u0930\u0940 \u0938\u0947 \u0936\u0941\u0930\u0942",type:"exam",date:"2025-01-12",important:!0,url:"https://rajeduboard.rajasthan.gov.in/",autoApply:!0,applyTo:["calendar","exam_schedule"]},{id:"rbse-2",title:"\u092a\u093e\u0920\u094d\u092f\u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0938\u0902\u0936\u094b\u0927\u0928 2024-25",description:"\u0915\u0915\u094d\u0937\u093e 9-12 \u0915\u0947 \u0932\u093f\u090f \u0938\u0902\u0936\u094b\u0927\u093f\u0924 \u092a\u093e\u0920\u094d\u092f\u0915\u094d\u0930\u092e \u091c\u093e\u0930\u0940",type:"syllabus",date:"2025-01-06",important:!0,url:"https://rajeduboard.rajasthan.gov.in/",autoApply:!0,applyTo:["syllabus"]}],NCERT:[{id:"ncert-1",title:"NCERT New Textbooks 2024-25",description:"Updated textbooks available for download",type:"resource",date:"2025-01-10",important:!1,url:"https://ncert.nic.in/textbook.php"}]};function RQ(){var e;const{user:t,schoolId:a}=Kr(),[n,r]=(0,s.useState)(!0),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)("CBSE"),[d,u]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{f()},[a]);const f=async()=>{r(!0);try{var e,t;const s=localStorage.getItem("token"),n=await Hr.get("".concat(TQ,"/school/settings?school_id=").concat(a),{headers:{Authorization:"Bearer ".concat(s)}});let r="CBSE";if(null!==(e=n.data)&&void 0!==e&&e.board){const e=n.data.board.toUpperCase();r=e.includes("MP")||e.includes("MPBSE")?"MPBSE":e.includes("RBSE")||e.includes("RAJASTHAN")?"RBSE":e.includes("NCERT")?"NCERT":"CBSE"}c(r),u(IQ[r]||[]);const i=await Hr.get("".concat(TQ,"/board/applied-notifications?school_id=").concat(a),{headers:{Authorization:"Bearer ".concat(s)}}).catch(()=>({data:[]}));h((null===(t=i.data)||void 0===t?void 0:t.map(e=>e.notification_id))||[])}catch(s){console.error("Error fetching board:",s)}finally{r(!1)}},g=async e=>{x(e.id);try{const t=localStorage.getItem("token");await Hr.post("".concat(TQ,"/board/apply-notification"),{school_id:a,notification_id:e.id,notification_type:e.type,title:e.title,apply_to:e.applyTo||[],data:e},{headers:{Authorization:"Bearer ".concat(t)}}),h(t=>[...t,e.id]),Qt.success('"'.concat(e.title,'" system \u092e\u0947\u0902 apply \u0939\u094b \u0917\u092f\u093e!'))}catch(t){Qt.error("Apply \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 error \u0939\u0941\u0906")}finally{x(null)}},v=e=>{switch(e){case"exam":return(0,qr.jsx)(eh,{className:"w-4 h-4"});case"syllabus":return(0,qr.jsx)(sh,{className:"w-4 h-4"});case"circular":return(0,qr.jsx)(cY,{className:"w-4 h-4"});default:return(0,qr.jsx)(Oh,{className:"w-4 h-4"})}};if(n)return(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})});const b=DQ[o];return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"board-notifications-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Board Notifications"}),(0,qr.jsxs)("p",{className:"text-slate-500",children:[null===b||void 0===b?void 0:b.fullName," \u0915\u0940 latest updates"]})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:async()=>{l(!0),Qt.info("Board notifications check \u0939\u094b \u0930\u0939\u093e \u0939\u0948..."),await new Promise(e=>setTimeout(e,2e3)),u(IQ[o]||[]),l(!1),Qt.success("Latest notifications loaded!")},disabled:i,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2 ".concat(i?"animate-spin":"")}),"Refresh"]}),(0,qr.jsxs)(Dl,{onClick:async()=>{const e=d.filter(e=>e.autoApply&&!m.includes(e.id));if(0!==e.length){for(const t of e)await g(t);Qt.success("".concat(e.length," notifications auto-apply \u0939\u094b \u0917\u090f!"))}else Qt.info("\u0938\u092d\u0940 auto-apply notifications \u092a\u0939\u0932\u0947 \u0938\u0947 apply \u0939\u0948\u0902")},className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"}),"AI Auto Apply"]})]})]}),(0,qr.jsx)(Qc,{className:"border-l-4 ".concat("bg-blue-500"===(null===b||void 0===b?void 0:b.color)?"border-l-blue-500":"bg-orange-500"===(null===b||void 0===b?void 0:b.color)?"border-l-orange-500":"bg-pink-500"===(null===b||void 0===b?void 0:b.color)?"border-l-pink-500":"border-l-green-500"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 ".concat(null===b||void 0===b?void 0:b.color," rounded-xl flex items-center justify-center text-white font-bold text-lg"),children:null===b||void 0===b||null===(e=b.name)||void 0===e?void 0:e.charAt(0)}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-bold text-lg",children:null===b||void 0===b?void 0:b.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:null===b||void 0===b?void 0:b.fullName})]})]}),(0,qr.jsxs)("a",{href:null===b||void 0===b?void 0:b.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-indigo-600 hover:text-indigo-700 text-sm",children:["Official Website ",(0,qr.jsx)(s$,{className:"w-4 h-4"})]})]})})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)("h2",{className:"font-semibold text-lg",children:"Latest Notifications"}),0===d.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-8 text-center",children:[(0,qr.jsx)(Oh,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"\u0915\u094b\u0908 \u0928\u0908 notification \u0928\u0939\u0940\u0902 \u0939\u0948"})]})}):(0,qr.jsx)("div",{className:"space-y-3",children:d.map(e=>{const t=m.includes(e.id);return(0,qr.jsx)(Qc,{className:"transition-all ".concat(e.important?"ring-2 ring-amber-200":""),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("exam"===e.type?"bg-red-100 text-red-600":"syllabus"===e.type?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-600"),children:v(e.type)}),(0,qr.jsx)("div",{className:"flex-1",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(a=e.type,(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat({exam:"bg-red-100 text-red-700",syllabus:"bg-blue-100 text-blue-700",circular:"bg-purple-100 text-purple-700",resource:"bg-green-100 text-green-700"}[a]||"bg-gray-100 text-gray-700"),children:{exam:"\u092a\u0930\u0940\u0915\u094d\u0937\u093e",syllabus:"\u092a\u093e\u0920\u094d\u092f\u0915\u094d\u0930\u092e",circular:"\u0938\u0930\u094d\u0915\u0941\u0932\u0930",resource:"\u0938\u0902\u0938\u093e\u0927\u0928"}[a]||a})),e.important&&(0,qr.jsxs)(eJ,{className:"bg-amber-100 text-amber-700",children:[(0,qr.jsx)(QU,{className:"w-3 h-3 mr-1"}),"Important"]})]}),(0,qr.jsx)("h3",{className:"font-semibold",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.description}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Ah,{className:"w-3 h-3"}),e.date]}),e.autoApply&&(0,qr.jsxs)("span",{className:"flex items-center gap-1 text-indigo-500",children:[(0,qr.jsx)(hh,{className:"w-3 h-3"}),"Auto-Apply Available"]})]})]}),(0,qr.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(0,qr.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:underline flex items-center gap-1",children:["View ",(0,qr.jsx)(s$,{className:"w-3 h-3"})]}),e.autoApply&&(0,qr.jsx)(Dl,{size:"sm",variant:t?"outline":"default",disabled:t||p===e.id,onClick:()=>g(e),className:t?"text-green-600":"",children:p===e.id?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):t?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(ph,{className:"w-4 h-4 mr-1"}),"Applied"]}):"Apply to System"})]})]})})]})})},e.id);var a})})]}),(0,qr.jsx)(Qc,{className:"bg-slate-50 border-dashed",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)(hh,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-700",children:"AI Auto-Apply \u0915\u0948\u0938\u0947 \u0915\u093e\u092e \u0915\u0930\u0924\u093e \u0939\u0948?"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:'\u091c\u092c \u0906\u092a "AI Auto Apply" click \u0915\u0930\u0924\u0947 \u0939\u094b, \u0924\u094b system automatically:'}),(0,qr.jsxs)("ul",{className:"text-sm text-slate-500 mt-2 space-y-1 list-disc list-inside",children:[(0,qr.jsx)("li",{children:"\u092a\u0930\u0940\u0915\u094d\u0937\u093e dates \u0915\u094b school calendar \u092e\u0947\u0902 add \u0915\u0930\u0924\u093e \u0939\u0948"}),(0,qr.jsx)("li",{children:"Syllabus updates \u0915\u094b system \u092e\u0947\u0902 reflect \u0915\u0930\u0924\u093e \u0939\u0948"}),(0,qr.jsx)("li",{children:"Important circulars \u0915\u094b staff \u0915\u094b notify \u0915\u0930\u0924\u093e \u0939\u0948"})]}),(0,qr.jsx)("p",{className:"text-sm text-indigo-600 mt-2",children:"Admin approval \u0915\u0947 \u092c\u093e\u0926 \u0939\u0940 changes apply \u0939\u094b\u0924\u0947 \u0939\u0948\u0902\u0964"})]})]})})})]})}const LQ=Dc("beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]),FQ=Dc("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),zQ=Dc("shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),BQ=Dc("baby",[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]]),UQ="",HQ=[{type:"tuition",label:"Tuition Fee",icon:sh,color:"blue"},{type:"exam",label:"Exam Fee",icon:cY,color:"purple"},{type:"transport",label:"Transport/Bus Fee",icon:nh,color:"green",optional:!0},{type:"hostel",label:"Hostel Fee",icon:aJ,color:"orange",optional:!0},{type:"lab",label:"Lab Fee",icon:LQ,color:"cyan",optional:!0},{type:"library",label:"Library Fee",icon:FQ,color:"amber"},{type:"sports",label:"Sports Fee",icon:fJ,color:"red",optional:!0},{type:"uniform",label:"Uniform Fee",icon:zQ,color:"slate"},{type:"books",label:"Books & Stationery",icon:sh,color:"indigo"},{type:"development",label:"Development Fee",icon:wh,color:"gray"},{type:"admission",label:"Admission Fee",icon:Fc,color:"emerald"},{type:"annual",label:"Annual Fee",icon:cY,color:"rose"}],qQ=[{code:"RTE",name:"Right to Education (RTE)",exemption:100,icon:Rc},{code:"SC_ST_SCHOLARSHIP",name:"SC/ST Scholarship",exemption:100,icon:pJ},{code:"OBC_SCHOLARSHIP",name:"OBC Scholarship",exemption:50,icon:pJ},{code:"MERIT_SCHOLARSHIP",name:"Merit Scholarship",exemption:25,icon:fJ},{code:"BPL",name:"BPL Scheme",exemption:75,icon:rh},{code:"GIRL_CHILD",name:"Girl Child Scheme",exemption:25,icon:BQ},{code:"STAFF_CHILD",name:"Staff Child Concession",exemption:50,icon:Z$},{code:"SIBLING_DISCOUNT",name:"Sibling Discount",exemption:10,icon:Lc}];function VQ(){var e;const{user:t,token:a}=Kr(),[n,r]=(0,s.useState)(!0),[i,l]=(0,s.useState)("structure"),[o,c]=(0,s.useState)({}),[d,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)([]),[j,N]=(0,s.useState)(null),[w,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)(""),[C,E]=(0,s.useState)([]),[A,P]=(0,s.useState)({fee_type:"",amount:"",frequency:"monthly",due_day:10,description:"",is_optional:!1}),[O,M]=(0,s.useState)([]),[T,D]=(0,s.useState)(null),I=(null===t||void 0===t?void 0:t.school_id)||"SCH-TEST-2026";(0,s.useEffect)(()=>{R(),L(),F()},[I]);const R=async()=>{try{r(!0);const e=await fetch("".concat(UQ,"/api/fee-management/structure/all/").concat(I));if(e.ok){const t=await e.json();c(t.structures_by_class||{})}}catch(e){console.error("Error fetching structures:",e)}finally{r(!1)}},L=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(UQ,"/api/students?school_id=").concat(I),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json(),a=e.students||e||[];y(a),console.log("Fetched students:",a.length)}}catch(e){console.error("Error fetching students:",e)}},F=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(UQ,"/api/fee-management/old-dues/").concat(I),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();E(e.students||[])}}catch(e){console.log("Old dues endpoint not available yet")}},z=b.filter(e=>{var t,a,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(_.toLowerCase()))||(null===(a=e.student_id)||void 0===a?void 0:a.toLowerCase().includes(_.toLowerCase()))||(null===(s=e.admission_no)||void 0===s?void 0:s.toLowerCase().includes(_.toLowerCase()))});return n?(0,qr.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-slate-50 p-6","data-testid":"fee-structure-management",children:[(0,qr.jsxs)("div",{className:"mb-6",children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(wh,{className:"w-6 h-6 text-indigo-600"})}),"Fee Structure Management"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-2",children:"Class-wise fee setup, Student services, Government schemes"})]}),(0,qr.jsxs)(wc,{value:i,onValueChange:l,children:[(0,qr.jsxs)(Sc,{className:"grid grid-cols-4 w-full max-w-2xl mb-6",children:[(0,qr.jsx)(_c,{value:"structure",children:"\ud83d\udccb Fee Structure"}),(0,qr.jsx)(_c,{value:"services",children:"\ud83d\ude8c Student Services"}),(0,qr.jsx)(_c,{value:"schemes",children:"\ud83c\udf93 Govt Schemes"}),(0,qr.jsx)(_c,{value:"old-dues",children:"\u26a0\ufe0f Old Dues"})]}),(0,qr.jsx)(kc,{value:"structure",children:(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{className:"text-lg",children:"Select Class"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["Nursery","LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"].map(e=>(0,qr.jsx)(Dl,{variant:d===e?"default":"outline",size:"sm",onClick:()=>m(e),className:d===e?"bg-indigo-600":"",children:e},e))})})]}),(0,qr.jsxs)(Qc,{className:"lg:col-span-2",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(Zc,{className:"text-lg",children:d?"Class ".concat(d," Fee Structure"):"Select a Class"}),d&&(0,qr.jsxs)(Dl,{onClick:()=>p(!0),size:"sm",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-1"}),"Add Fee"]})]})}),(0,qr.jsx)(td,{children:d&&(null===(e=o[d])||void 0===e?void 0:e.length)>0?(0,qr.jsxs)("div",{className:"space-y-3",children:[o[d].map((e,t)=>{const a=HQ.find(t=>t.type===e.fee_type),s=(null===a||void 0===a?void 0:a.icon)||cY;return(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-".concat((null===a||void 0===a?void 0:a.color)||"slate","-100 rounded-lg flex items-center justify-center"),children:(0,qr.jsx)(s,{className:"w-5 h-5 text-".concat((null===a||void 0===a?void 0:a.color)||"slate","-600")})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.description||e.fee_type}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.frequency," ",e.is_optional&&"\u2022 Optional"]})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsxs)("span",{className:"font-bold text-lg",children:["\u20b9",e.amount]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>(async e=>{try{(await fetch("".concat(UQ,"/api/fee-management/structure/").concat(e),{method:"DELETE"})).ok&&(Qt.success("Fee removed"),R())}catch(t){Qt.error("Delete failed")}})(e.id),children:(0,qr.jsx)(iH,{className:"w-4 h-4 text-red-500"})})]})]},t)}),(0,qr.jsxs)("div",{className:"pt-3 border-t flex justify-between",children:[(0,qr.jsx)("span",{className:"font-medium",children:"Total Monthly"}),(0,qr.jsxs)("span",{className:"font-bold text-indigo-600",children:["\u20b9",o[d].filter(e=>"monthly"===e.frequency&&!e.is_optional).reduce((e,t)=>e+t.amount,0)]})]})]}):d?(0,qr.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,qr.jsx)(cY,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,qr.jsxs)("p",{children:["No fee structure for Class ",d]}),(0,qr.jsxs)(Dl,{className:"mt-4",onClick:()=>p(!0),children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-1"}),"Add First Fee"]})]}):(0,qr.jsx)("div",{className:"text-center py-8 text-slate-400",children:(0,qr.jsx)("p",{children:"\u2190 Select a class to view/edit fee structure"})})})]})]})}),(0,qr.jsx)(kc,{value:"services",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsx)(Zc,{children:"Student Services Management"}),(0,qr.jsx)(ed,{children:"Assign services like Bus, Hostel, Lab to individual students"})]}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)(Rl,{placeholder:"Search student by name or ID...",className:"max-w-md",value:_,onChange:e=>k(e.target.value)}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[z.length," students found ",_&&'for "'.concat(_,'"')]}),(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[500px] overflow-y-auto",children:z.length>0?z.map((e,t)=>{var a;return(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg cursor-pointer hover:bg-slate-100 border border-transparent hover:border-indigo-200",onClick:()=>{N(e),M(e.services||[]),f(!0)},children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.name}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.student_id||e.admission_no||(null===(a=e.id)||void 0===a?void 0:a.slice(0,8))," \u2022 Class ",e.class_name||e.class_id]})]})]}),(0,qr.jsxs)("div",{className:"mt-2 flex gap-1",children:[e.uses_transport&&(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded text-xs",children:"Bus"}),e.uses_hostel&&(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded text-xs",children:"Hostel"}),e.has_scheme&&(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-xs",children:e.scheme_name})]})]},e.id||t)}):(0,qr.jsxs)("div",{className:"col-span-3 text-center py-8 text-slate-400",children:[(0,qr.jsx)(Lc,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:"No students found"}),(0,qr.jsx)("p",{className:"text-sm",children:"Check if students are added in the school"})]})})]})})]})}),(0,qr.jsx)(kc,{value:"schemes",children:(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Available Government Schemes"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-3",children:qQ.map((e,t)=>{const a=e.icon;return(0,qr.jsx)("div",{className:"p-3 bg-slate-50 rounded-lg flex items-center justify-between",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(a,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.name}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.exemption,"% exemption"]})]})]})},t)})})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsx)(Zc,{children:"Assign Scheme to Student"}),(0,qr.jsx)(ed,{children:"Search and select a student to assign government scheme"})]}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)(Rl,{placeholder:"Search student...",value:_,onChange:e=>k(e.target.value)}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-[200px] overflow-y-auto",children:z.length>0?z.slice(0,20).map((e,t)=>(0,qr.jsx)(Dl,{variant:(null===j||void 0===j?void 0:j.id)===e.id?"default":"outline",size:"sm",className:"justify-start text-xs truncate",onClick:()=>N(e),children:e.name},e.id||t)):(0,qr.jsx)("p",{className:"col-span-2 text-center text-slate-400 py-4",children:"No students found"})}),j&&(0,qr.jsxs)("div",{className:"pt-4 border-t",children:[(0,qr.jsxs)("p",{className:"text-sm font-medium mb-2",children:["Select scheme for ",j.name,":"]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-2",children:qQ.map((e,t)=>(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"justify-start text-xs",onClick:()=>{D(e),v(!0)},children:e.code},t))})]})]})})]})]})}),(0,qr.jsx)(kc,{value:"old-dues",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2 text-orange-600",children:[(0,qr.jsx)(QU,{className:"w-5 h-5"}),"Old Fee Dues Management"]}),(0,qr.jsx)(ed,{children:"Students with pending fees from previous years. Send reminders and track payments."})]}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)(Rl,{placeholder:"Search student with old dues...",value:_,onChange:e=>k(e.target.value)}),(0,qr.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,qr.jsx)("h4",{className:"font-medium text-orange-800 mb-2",children:"\u26a0\ufe0f Students with Pending Dues"}),(0,qr.jsxs)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:[z.map((e,t)=>{var a;return(0,qr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-orange-100 hover:border-orange-300",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[e.student_id||(null===(a=e.id)||void 0===a?void 0:a.slice(0,8))," \u2022 Class ",e.class_name||e.class_id]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"text-lg font-bold text-red-600",children:["\u20b9",e.old_dues||0]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Total Due"})]})]}),(0,qr.jsxs)("div",{className:"mt-3 pt-3 border-t grid grid-cols-3 gap-2 text-sm",children:[(0,qr.jsxs)("div",{className:"bg-red-50 p-2 rounded",children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Previous Year"}),(0,qr.jsxs)("p",{className:"font-medium text-red-600",children:["\u20b9",e.prev_year_dues||0]})]}),(0,qr.jsxs)("div",{className:"bg-orange-50 p-2 rounded",children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Current Year"}),(0,qr.jsxs)("p",{className:"font-medium text-orange-600",children:["\u20b9",e.current_dues||0]})]}),(0,qr.jsxs)("div",{className:"bg-yellow-50 p-2 rounded",children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Late Fee"}),(0,qr.jsxs)("p",{className:"font-medium text-yellow-600",children:["\u20b9",e.late_fee||0]})]})]}),(0,qr.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",className:"flex-1 text-xs",children:[(0,qr.jsx)(Gm,{className:"w-3 h-3 mr-1"})," SMS Reminder"]}),(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",className:"flex-1 text-xs",children:[(0,qr.jsx)(cY,{className:"w-3 h-3 mr-1"})," View Details"]}),(0,qr.jsxs)(Dl,{size:"sm",className:"flex-1 text-xs bg-green-600 hover:bg-green-700",children:[(0,qr.jsx)(Sh,{className:"w-3 h-3 mr-1"})," Collect Now"]})]})]},e.id||t)}),0===z.length&&(0,qr.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,qr.jsx)(Km,{className:"w-12 h-12 mx-auto mb-2 text-green-400"}),(0,qr.jsx)("p",{children:"No old dues found!"})]})]})]}),(0,qr.jsxs)(Qc,{className:"border-dashed",children:[(0,qr.jsx)(Xc,{className:"py-3",children:(0,qr.jsx)(Zc,{className:"text-sm",children:"Add Old Due for Student"})}),(0,qr.jsxs)(td,{children:[(0,qr.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,qr.jsxs)("select",{className:"col-span-2 border rounded-lg px-3 py-2 text-sm",children:[(0,qr.jsx)("option",{children:"Select Student"}),b.map((e,t)=>(0,qr.jsx)("option",{value:e.id,children:e.name},t))]}),(0,qr.jsx)(Rl,{placeholder:"Amount",type:"number",className:"text-sm"}),(0,qr.jsx)(Dl,{size:"sm",children:"Add Due"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[(0,qr.jsxs)("select",{className:"border rounded-lg px-3 py-2 text-sm",children:[(0,qr.jsx)("option",{children:"Previous Year"}),(0,qr.jsx)("option",{children:"2024-25"}),(0,qr.jsx)("option",{children:"2023-24"}),(0,qr.jsx)("option",{children:"2022-23"})]}),(0,qr.jsxs)("select",{className:"border rounded-lg px-3 py-2 text-sm",children:[(0,qr.jsx)("option",{children:"Fee Type"}),(0,qr.jsx)("option",{children:"Tuition Fee"}),(0,qr.jsx)("option",{children:"Bus Fee"}),(0,qr.jsx)("option",{children:"Exam Fee"})]}),(0,qr.jsx)(Rl,{placeholder:"Notes",className:"text-sm"})]})]})]})]})})]})})]}),(0,qr.jsx)(Im,{open:h,onOpenChange:p,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{children:["Add Fee for Class ",d]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Fee Type"}),(0,qr.jsxs)("select",{value:A.fee_type,onChange:e=>{const t=HQ.find(t=>t.type===e.target.value);P(a=>u(u({},a),{},{fee_type:e.target.value,is_optional:(null===t||void 0===t?void 0:t.optional)||!1,description:(null===t||void 0===t?void 0:t.label)||""}))},className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"",children:"Select Fee Type"}),HQ.map(e=>(0,qr.jsx)("option",{value:e.type,children:e.label},e.type))]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Amount (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:A.amount,onChange:e=>P(t=>u(u({},t),{},{amount:e.target.value})),placeholder:"2500"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Frequency"}),(0,qr.jsxs)("select",{value:A.frequency,onChange:e=>P(t=>u(u({},t),{},{frequency:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"monthly",children:"Monthly"}),(0,qr.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,qr.jsx)("option",{value:"yearly",children:"Yearly"}),(0,qr.jsx)("option",{value:"one_time",children:"One Time"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Due Day (of month)"}),(0,qr.jsx)(Rl,{type:"number",value:A.due_day,onChange:e=>P(t=>u(u({},t),{},{due_day:parseInt(e.target.value)})),min:"1",max:"28"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{type:"checkbox",checked:A.is_optional,onChange:e=>P(t=>u(u({},t),{},{is_optional:e.target.checked})),className:"rounded"}),(0,qr.jsx)("label",{className:"text-sm",children:"Optional Service (Bus, Hostel, etc.)"})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(d&&A.fee_type&&A.amount){S(!0);try{(await fetch("".concat(UQ,"/api/fee-management/structure/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u(u({school_id:I,class_id:d},A),{},{amount:parseFloat(A.amount)}))})).ok?(Qt.success("Fee structure saved! \u2705"),p(!1),P({fee_type:"",amount:"",frequency:"monthly",due_day:10,description:"",is_optional:!1}),R()):Qt.error("Save failed")}catch(e){Qt.error("Error saving")}finally{S(!1)}}else Qt.error("Class, Fee Type aur Amount required hai")},disabled:w,className:"w-full",children:[w?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),"Save Fee Structure"]})]})]})}),(0,qr.jsx)(Im,{open:x,onOpenChange:f,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{children:["Services for ",null===j||void 0===j?void 0:j.name]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Select services this student is using:"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{id:"transport",label:"Bus/Transport",icon:nh},{id:"hostel",label:"Hostel",icon:aJ},{id:"lab",label:"Lab",icon:LQ},{id:"library",label:"Library",icon:FQ},{id:"sports",label:"Sports",icon:fJ}].map(e=>(0,qr.jsxs)("div",{onClick:()=>(e=>{M(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e.id),className:"p-3 rounded-lg border-2 cursor-pointer transition-all ".concat(O.includes(e.id)?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"),children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5 ".concat(O.includes(e.id)?"text-green-600":"text-slate-400")}),(0,qr.jsx)("span",{className:"font-medium",children:e.label})]}),O.includes(e.id)&&(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-600 mt-1"})]},e.id))}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(j){S(!0);try{(await fetch("".concat(UQ,"/api/fee-management/student/services"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:j.id||j.student_id,school_id:I,services:O})})).ok&&(Qt.success("Student services updated! \u2705"),f(!1))}catch(e){Qt.error("Update failed")}finally{S(!1)}}},disabled:w,className:"w-full",children:[w?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),"Update Services"]})]})]})}),(0,qr.jsx)(Im,{open:g,onOpenChange:v,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{children:["Assign ",null===T||void 0===T?void 0:T.name]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,qr.jsx)("p",{className:"font-medium text-purple-900",children:null===T||void 0===T?void 0:T.name}),(0,qr.jsxs)("p",{className:"text-sm text-purple-700 mt-1",children:["Fee Exemption: ",null===T||void 0===T?void 0:T.exemption,"%"]})]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-600",children:"Assigning to:"}),(0,qr.jsx)("p",{className:"font-medium",children:null===j||void 0===j?void 0:j.name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:(null===j||void 0===j?void 0:j.student_id)||(null===j||void 0===j?void 0:j.id)})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{variant:"outline",className:"flex-1",onClick:()=>v(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(j&&T){S(!0);try{const e=localStorage.getItem("token"),t=await fetch("".concat(UQ,"/api/fee-management/scheme/assign"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({student_id:j.id||j.student_id,school_id:I,scheme_name:T.code,scheme_type:100===T.exemption?"full_exemption":"partial_exemption",exemption_percentage:T.exemption,monthly_stipend:0,valid_from:(new Date).toISOString().split("T")[0],valid_until:new Date(Date.now()+31536e6).toISOString().split("T")[0]})});if(t.ok)Qt.success("".concat(T.name," assigned! \ud83c\udf89")),v(!1),D(null);else{const e=await t.json();Qt.error(e.detail||"Assignment failed")}}catch(e){Qt.error("Scheme assignment failed")}finally{S(!1)}}},disabled:w,className:"flex-1 bg-purple-600 hover:bg-purple-700",children:[w?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Confirm Assignment"]})]})]})]})})]})}const WQ=Dc("terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),GQ=Dc("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),KQ=Dc("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),YQ=Dc("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),JQ=Dc("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),$Q="",QQ={voice:lJ,paper:cY,content:hh,command:WQ},XQ={voice:"Voice Command",paper:"Paper Generated",content:"Content Created",command:"AI Command"},ZQ={voice:"bg-purple-500/10 text-purple-500 border-purple-500/20",paper:"bg-blue-500/10 text-blue-500 border-blue-500/20",content:"bg-green-500/10 text-green-500 border-green-500/20",command:"bg-orange-500/10 text-orange-500 border-orange-500/20"},eX={completed:"bg-emerald-500/10 text-emerald-500",failed:"bg-red-500/10 text-red-500",undone:"bg-amber-500/10 text-amber-500",restored:"bg-blue-500/10 text-blue-500"},tX={completed:GQ,failed:eY,undone:kY,restored:nY};function aX(){var e;const{user:t}=Kr(),[a,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(null),[l,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)("all"),[x,f]=(0,s.useState)(!1),g=(null===t||void 0===t?void 0:t.school_id)||"school123",v=(0,s.useCallback)(async()=>{try{o(!0);const e="all"===h?"".concat($Q,"/api/ai-history/list/").concat(g,"?limit=100"):"".concat($Q,"/api/ai-history/list/").concat(g,"?limit=100&action_type=").concat(h),t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch history");const a=await t.json();n(a.conversations||[])}catch(e){console.error("Error fetching history:",e),Qt.error("History load nahi ho paya")}finally{o(!1)}},[g,h]),b=(0,s.useCallback)(async()=>{try{const e=await fetch("".concat($Q,"/api/ai-history/stats/").concat(g));if(!e.ok)throw new Error("Failed to fetch stats");const t=await e.json();i(t)}catch(e){console.error("Error fetching stats:",e)}},[g]);(0,s.useEffect)(()=>{v(),b()},[v,b]);const y=a.filter(e=>{var t,a;if(!u)return!0;const s=u.toLowerCase();return(null===(t=e.user_input)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(a=e.ai_response)||void 0===a?void 0:a.toLowerCase().includes(s))});return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"ai-history-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,qr.jsx)(rJ,{className:"w-8 h-8 text-indigo-500"}),"AI Conversation History"]}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Apni sabhi AI interactions yahan dekhen aur manage karein"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:v,className:"gap-2","data-testid":"refresh-history-btn",children:[(0,qr.jsx)(lH,{className:"w-4 h-4"}),"Refresh"]}),(0,qr.jsxs)(Dl,{variant:"destructive",onClick:async()=>{if(window.confirm("Kya aap purani history (30 din se zyada) delete karna chahte hain?"))try{const e=await fetch("".concat($Q,"/api/ai-history/clear/").concat(g,"?days_old=30"),{method:"DELETE"});if(!e.ok)throw new Error("Failed to clear history");const t=await e.json();Qt.success("".concat(t.deleted_count," purani conversations delete ho gayi")),v(),b()}catch(e){console.error("Clear error:",e),Qt.error("History clear nahi ho paya")}},className:"gap-2","data-testid":"clear-history-btn",children:[(0,qr.jsx)(iH,{className:"w-4 h-4"}),"Clear Old"]})]})]}),r&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-indigo-500/10 to-purple-500/10 border-indigo-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total AI Uses"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:r.total_conversations})]}),(0,qr.jsx)(oh,{className:"w-8 h-8 text-indigo-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last 7 Days"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:r.last_7_days})]}),(0,qr.jsx)(Ah,{className:"w-8 h-8 text-green-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border-purple-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Most Used"}),(0,qr.jsx)("p",{className:"text-lg font-bold capitalize",children:r.most_used||"N/A"})]}),(0,qr.jsx)(hh,{className:"w-8 h-8 text-purple-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-orange-500/10 to-amber-500/10 border-orange-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commands"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:(null===(e=r.by_type)||void 0===e?void 0:e.command)||0})]}),(0,qr.jsx)(WQ,{className:"w-8 h-8 text-orange-500"})]})})})]}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,qr.jsxs)("div",{className:"relative flex-1",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,qr.jsx)(Rl,{placeholder:"Search conversations...",value:u,onChange:e=>m(e.target.value),className:"pl-10","data-testid":"search-history-input"})]}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>f(!x),className:"w-full sm:w-auto gap-2",children:[(0,qr.jsx)(KQ,{className:"w-4 h-4"}),"Filter: ","all"===h?"All":XQ[h],(0,qr.jsx)(YQ,{className:"w-4 h-4 transition-transform ".concat(x?"rotate-180":"")})]}),x&&(0,qr.jsx)("div",{className:"absolute right-0 top-full mt-2 bg-background border rounded-lg shadow-lg p-2 z-10 min-w-[160px]",children:["all","voice","paper","content","command"].map(e=>(0,qr.jsx)("button",{onClick:()=>{p(e),f(!1)},className:"w-full text-left px-3 py-2 rounded-md hover:bg-muted transition-colors ".concat(h===e?"bg-muted":""),"data-testid":"filter-".concat(e),children:"all"===e?"All Types":XQ[e]},e))})]})]})})}),(0,qr.jsx)("div",{className:"space-y-4",children:l?(0,qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):0===y.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-12 text-center",children:[(0,qr.jsx)(rJ,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Koi AI conversation nahi mili"}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Jab aap AI features use karenge, history yahan dikhegi"})]})}):y.map(e=>{const t=QQ[e.action_type]||hh,a=tX[e.status]||GQ;return(0,qr.jsx)(Qc,{className:"transition-all hover:shadow-md ".concat("undone"===e.status?"opacity-60":""),"data-testid":"conversation-".concat(e.id),children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,qr.jsx)("div",{className:"p-3 rounded-lg ".concat(ZQ[e.action_type]," self-start"),children:(0,qr.jsx)(t,{className:"w-6 h-6"})}),(0,qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,qr.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[(0,qr.jsx)(eJ,{variant:"outline",className:ZQ[e.action_type],children:XQ[e.action_type]}),(0,qr.jsxs)(eJ,{variant:"secondary",className:eX[e.status],children:[(0,qr.jsx)(a,{className:"w-3 h-3 mr-1"}),e.status]}),(0,qr.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,qr.jsx)(Ah,{className:"w-3 h-3"}),(s=e.created_at,new Date(s).toLocaleString("en-IN",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,qr.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"You asked:"}),(0,qr.jsx)("p",{className:"text-sm",children:e.user_input})]}),(0,qr.jsxs)("div",{className:"bg-indigo-500/5 rounded-lg p-3",children:[(0,qr.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Tino said:"}),(0,qr.jsx)("p",{className:"text-sm",children:e.ai_response})]})]})]}),(0,qr.jsxs)("div",{className:"flex sm:flex-col gap-2 self-start",children:[e.can_undo&&"completed"===e.status&&(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{d(e);const t=await fetch("".concat($Q,"/api/ai-history/undo?school_id=").concat(g),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_id:e,reason:"User requested undo"})}),a=await t.json();if(!t.ok)throw new Error(a.detail||"Undo failed");Qt.success("Action undo ho gaya! \u2705"),v(),b()}catch(t){console.error("Undo error:",t),Qt.error(t.message||"Undo nahi ho paya")}finally{d(null)}})(e.id),disabled:c===e.id,className:"gap-1 text-amber-600 border-amber-500/30 hover:bg-amber-500/10","data-testid":"undo-btn-".concat(e.id),children:[c===e.id?(0,qr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):(0,qr.jsx)(JQ,{className:"w-4 h-4"}),"Undo"]}),"undone"===e.status&&(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{d(e);const t=await fetch("".concat($Q,"/api/ai-history/restore/").concat(e,"?school_id=").concat(g),{method:"POST"}),a=await t.json();if(!t.ok)throw new Error(a.detail||"Restore failed");Qt.success("Action restore ho gaya! \u2705"),v()}catch(t){console.error("Restore error:",t),Qt.error(t.message||"Restore nahi ho paya")}finally{d(null)}})(e.id),disabled:c===e.id,className:"gap-1 text-blue-600 border-blue-500/30 hover:bg-blue-500/10","data-testid":"restore-btn-".concat(e.id),children:[c===e.id?(0,qr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):(0,qr.jsx)(nY,{className:"w-4 h-4"}),"Restore"]})]})]})})},e.id);var s})})]})}const sX=Dc("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),nX=Dc("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),rX=Dc("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),iX={meeting:"Meeting",delivery:"Delivery",parent_visit:"Parent Visit",vendor:"Vendor",interview:"Interview",other:"Other"},lX={meeting:"bg-blue-500/10 text-blue-600",delivery:"bg-orange-500/10 text-orange-600",parent_visit:"bg-green-500/10 text-green-600",vendor:"bg-purple-500/10 text-purple-600",interview:"bg-indigo-500/10 text-indigo-600",other:"bg-slate-500/10 text-slate-600"};function oX(){const{user:e}=Kr(),[t,a]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[d,m]=(0,s.useState)(""),[h,p]=(0,s.useState)({total:0,in:0,out:0}),x=(null===e||void 0===e?void 0:e.school_id)||"school123",[f,g]=(0,s.useState)({name:"",phone:"",purpose:"parent_visit",whom_to_meet:"",id_proof_type:"",id_proof_number:"",vehicle_number:"",num_visitors:1,expected_duration:30,notes:""}),v=(0,s.useCallback)(async()=>{try{r(!0);const e=await fetch("".concat("","/api/front-office/visitors/today?school_id=").concat(x)),t=await e.json();a(t.visitors||[]),p({total:t.total_visitors||0,in:t.currently_in||0,out:t.checked_out||0})}catch(e){console.error("Error:",e)}finally{r(!1)}},[x]);(0,s.useEffect)(()=>{v()},[v]);const b=e=>e?new Date(e).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"-",y=t.filter(e=>{var t,a,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null===(a=e.phone)||void 0===a?void 0:a.includes(d))||(null===(s=e.whom_to_meet)||void 0===s?void 0:s.toLowerCase().includes(d.toLowerCase()))});return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"front-office-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,qr.jsx)(sX,{className:"w-8 h-8 text-blue-500"}),"Front Office"]}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Visitor Management & Gate Pass System"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:v,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,qr.jsxs)(Dl,{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(kh,{className:"w-4 h-4 mr-2"}),"New Visitor"]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border-blue-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Today"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:h.total})]}),(0,qr.jsx)(Lc,{className:"w-10 h-10 text-blue-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Currently In"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-green-600",children:h.in})]}),(0,qr.jsx)(GQ,{className:"w-10 h-10 text-green-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-slate-500/10 to-gray-500/10 border-slate-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Checked Out"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-slate-600",children:h.out})]}),(0,qr.jsx)(rH,{className:"w-10 h-10 text-slate-500"})]})})})]}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,qr.jsx)(Rl,{placeholder:"Search by name, phone or whom to meet...",value:d,onChange:e=>m(e.target.value),className:"pl-10","data-testid":"search-visitors-input"})]}),(0,qr.jsx)("div",{className:"space-y-3",children:n?(0,qr.jsx)("div",{className:"flex justify-center py-12",children:(0,qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):0===y.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-12 text-center",children:[(0,qr.jsx)(Lc,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Aaj koi visitor nahi aaya"}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"New visitor add karne ke liye button click karein"})]})}):y.map(e=>(0,qr.jsx)(Qc,{className:"transition-all hover:shadow-md ".concat("checked_out"===e.status?"opacity-60":""),children:(0,qr.jsx)(td,{className:"py-4",children:(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,qr.jsx)("div",{className:"flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white font-bold text-lg",children:e.badge_number}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[(0,qr.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,qr.jsx)(eJ,{className:lX[e.purpose],children:iX[e.purpose]}),(0,qr.jsx)(eJ,{variant:"checked_in"===e.status?"default":"secondary",children:"checked_in"===e.status?"Inside":"Left"})]}),(0,qr.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Gm,{className:"w-3 h-3"})," ",e.phone]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Lc,{className:"w-3 h-3"})," Meeting: ",e.whom_to_meet]}),e.vehicle_number&&(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(nX,{className:"w-3 h-3"})," ",e.vehicle_number]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Ah,{className:"w-3 h-3"})," In: ",b(e.checkin_time),e.checkout_time&&" | Out: ".concat(b(e.checkout_time))]})]})]}),"checked_in"===e.status&&(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>(async e=>{try{const t=await fetch("".concat("","/api/front-office/visitors/").concat(e,"/checkout?school_id=").concat(x),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),a=await t.json();a.success&&(Qt.success("Visitor checked out! Duration: ".concat(a.duration)),v())}catch(t){Qt.error("Check-out failed")}})(e.visitor_id),className:"text-red-600 border-red-200 hover:bg-red-50","data-testid":"checkout-btn-".concat(e.visitor_id),children:[(0,qr.jsx)(rH,{className:"w-4 h-4 mr-1"}),"Check Out"]})]})})},e.visitor_id))}),(0,qr.jsx)(Im,{open:i,onOpenChange:l,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"New Visitor Check-in"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f.name&&f.phone&&f.whom_to_meet)try{const e=await fetch("".concat("","/api/front-office/visitors/checkin?school_id=").concat(x),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),a=await e.json();var t;if(a.success)Qt.success("Visitor checked in! Badge: ".concat(null===(t=a.gate_pass)||void 0===t?void 0:t.badge_number)),l(!1),g({name:"",phone:"",purpose:"parent_visit",whom_to_meet:"",id_proof_type:"",id_proof_number:"",vehicle_number:"",num_visitors:1,expected_duration:30,notes:""}),v()}catch(a){Qt.error("Check-in failed")}else Qt.error("Name, Phone aur Whom to Meet required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Name *"}),(0,qr.jsx)(Rl,{value:f.name,onChange:e=>g(u(u({},f),{},{name:e.target.value})),placeholder:"Visitor name","data-testid":"visitor-name-input"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Phone *"}),(0,qr.jsx)(Rl,{value:f.phone,onChange:e=>g(u(u({},f),{},{phone:e.target.value})),placeholder:"Phone number"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Purpose *"}),(0,qr.jsxs)("select",{value:f.purpose,onChange:e=>g(u(u({},f),{},{purpose:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"parent_visit",children:"Parent Visit"}),(0,qr.jsx)("option",{value:"meeting",children:"Meeting"}),(0,qr.jsx)("option",{value:"delivery",children:"Delivery"}),(0,qr.jsx)("option",{value:"vendor",children:"Vendor"}),(0,qr.jsx)("option",{value:"interview",children:"Interview"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Whom to Meet *"}),(0,qr.jsx)(Rl,{value:f.whom_to_meet,onChange:e=>g(u(u({},f),{},{whom_to_meet:e.target.value})),placeholder:"Staff name"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"ID Proof Type"}),(0,qr.jsxs)("select",{value:f.id_proof_type,onChange:e=>g(u(u({},f),{},{id_proof_type:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"aadhar",children:"Aadhar Card"}),(0,qr.jsx)("option",{value:"pan",children:"PAN Card"}),(0,qr.jsx)("option",{value:"driving_license",children:"Driving License"}),(0,qr.jsx)("option",{value:"voter_id",children:"Voter ID"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"ID Number"}),(0,qr.jsx)(Rl,{value:f.id_proof_number,onChange:e=>g(u(u({},f),{},{id_proof_number:e.target.value})),placeholder:"ID number"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Vehicle Number"}),(0,qr.jsx)(Rl,{value:f.vehicle_number,onChange:e=>g(u(u({},f),{},{vehicle_number:e.target.value})),placeholder:"UP32 AB 1234"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Expected Duration (min)"}),(0,qr.jsx)(Rl,{type:"number",value:f.expected_duration,onChange:e=>g(u(u({},f),{},{expected_duration:parseInt(e.target.value)}))})]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(rX,{className:"w-4 h-4 mr-2"}),"Check In & Print Pass"]})]})]})]})})]})}const cX=Dc("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]),dX=Dc("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),uX="";function mX(){const{user:e}=Kr(),[t,a]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)([]),[g,v]=(0,s.useState)(null),b=(null===e||void 0===e?void 0:e.school_id)||"school123",[y,j]=(0,s.useState)({vehicle_number:"",vehicle_type:"bus",capacity:40,driver_name:"",driver_phone:"",conductor_name:"",conductor_phone:""}),[N,w]=(0,s.useState)({route_name:"",route_number:"",morning_start_time:"07:00",evening_start_time:"14:00",monthly_fee:1500,stops:[]}),S=(0,s.useCallback)(async()=>{try{c(!0);const[e,t,s]=await Promise.all([fetch("".concat(uX,"/api/transport/vehicles?school_id=").concat(b)),fetch("".concat(uX,"/api/transport/routes?school_id=").concat(b)),fetch("".concat(uX,"/api/transport/analytics?school_id=").concat(b))]),n=await e.json(),i=await t.json(),o=await s.json();a(n.vehicles||[]),r(i.routes||[]),l(o)}catch(e){console.error("Error:",e)}finally{c(!1)}},[b]),_=(0,s.useCallback)(async()=>{try{const e=await fetch("".concat(uX,"/api/transport/track-all?school_id=").concat(b)),t=await e.json();f(t.vehicles||[])}catch(e){console.error("Tracking error:",e)}},[b]);(0,s.useEffect)(()=>{S(),_();const e=setInterval(_,1e4);return v(e),()=>{e&&clearInterval(e)}},[S,_]);return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"transport-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,qr.jsx)(nh,{className:"w-8 h-8 text-amber-500"}),"Transport Management"]}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Vehicle Tracking, Routes & Student Transport"})]}),(0,qr.jsx)("div",{className:"flex items-center gap-2",children:(0,qr.jsxs)(Dl,{variant:"outline",onClick:S,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),i&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Vehicles"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:i.total_vehicles})]}),(0,qr.jsx)(nh,{className:"w-10 h-10 text-amber-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border-blue-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Routes"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:i.total_routes})]}),(0,qr.jsx)(cX,{className:"w-10 h-10 text-blue-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Students"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:i.students_using_transport})]}),(0,qr.jsx)(Lc,{className:"w-10 h-10 text-green-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border-purple-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"On Route"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:x.filter(e=>"on_route"===e.status).length})]}),(0,qr.jsx)(dX,{className:"w-10 h-10 text-purple-500"})]})})})]}),(0,qr.jsxs)(wc,{defaultValue:"tracking",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-3",children:[(0,qr.jsx)(_c,{value:"tracking",children:"Live Tracking"}),(0,qr.jsx)(_c,{value:"vehicles",children:"Vehicles"}),(0,qr.jsx)(_c,{value:"routes",children:"Routes"})]}),(0,qr.jsx)(kc,{value:"tracking",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(dX,{className:"w-5 h-5 text-green-500 animate-pulse"}),"Live Vehicle Tracking"]}),(0,qr.jsx)(ed,{children:"Real-time vehicle locations (GPS SIMULATED - Live GPS pending)"})]}),(0,qr.jsxs)(td,{children:[0===x.length?(0,qr.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No vehicles to track"}):(0,qr.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:x.map(e=>{var t,a,s,n,r;return(0,qr.jsx)(Qc,{className:"border-l-4 ".concat("on_route"===e.status?"border-l-green-500":"border-l-amber-500"),children:(0,qr.jsxs)(td,{className:"pt-4",children:[(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,qr.jsx)(nh,{className:"w-5 h-5"}),e.vehicle_number]}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Driver: ",e.driver_name]}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,qr.jsx)(Gm,{className:"w-3 h-3"})," ",e.driver_phone]})]}),(0,qr.jsx)(eJ,{variant:"on_route"===e.status?"default":"secondary",children:"on_route"===e.status?"Moving":"Stopped"})]}),(0,qr.jsx)("div",{className:"mt-3 p-3 bg-muted/50 rounded-lg",children:(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-muted-foreground",children:"Lat:"})," ",null===(t=e.location)||void 0===t||null===(a=t.lat)||void 0===a?void 0:a.toFixed(4)]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-muted-foreground",children:"Lng:"})," ",null===(s=e.location)||void 0===s||null===(n=s.lng)||void 0===n?void 0:n.toFixed(4)]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-muted-foreground",children:"Speed:"})," ",null===(r=e.location)||void 0===r?void 0:r.speed," km/h"]})]})})]})},e.id)})}),(0,qr.jsx)("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,qr.jsxs)("p",{className:"text-sm text-amber-800 flex items-center gap-2",children:[(0,qr.jsx)(kY,{className:"w-4 h-4"}),"GPS tracking is currently SIMULATED. Real GPS device integration coming soon."]})})]})]})}),(0,qr.jsxs)(kc,{value:"vehicles",className:"mt-4",children:[(0,qr.jsx)("div",{className:"flex justify-end mb-4",children:(0,qr.jsxs)(Dl,{onClick:()=>m(!0),children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Vehicle"]})}),(0,qr.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:t.map(e=>{var t,a;return(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"pt-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"p-3 rounded-xl bg-amber-500/10",children:(0,qr.jsx)(nh,{className:"w-8 h-8 text-amber-600"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h3",{className:"font-semibold text-lg",children:e.vehicle_number}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground capitalize",children:[e.vehicle_type," \u2022 ",e.capacity," seats"]})]}),(0,qr.jsx)(eJ,{variant:"outline",children:e.status})]}),(0,qr.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(eH,{className:"w-4 h-4 text-muted-foreground"}),(0,qr.jsx)("span",{children:null===(t=e.driver)||void 0===t?void 0:t.name})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Gm,{className:"w-4 h-4 text-muted-foreground"}),(0,qr.jsx)("span",{children:null===(a=e.driver)||void 0===a?void 0:a.phone})]})]})]})},e.id)})})]}),(0,qr.jsxs)(kc,{value:"routes",className:"mt-4",children:[(0,qr.jsx)("div",{className:"flex justify-end mb-4",children:(0,qr.jsxs)(Dl,{onClick:()=>p(!0),children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Route"]})}),(0,qr.jsx)("div",{className:"grid gap-4",children:n.map(e=>{var t;return(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"pt-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"p-3 rounded-xl bg-blue-500/10",children:(0,qr.jsx)(cX,{className:"w-8 h-8 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-lg",children:e.route_name}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Route #",e.route_number]})]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"font-semibold",children:["\u20b9",e.monthly_fee,"/month"]}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.total_students||0," students"]})]})]}),(0,qr.jsxs)("div",{className:"mt-4 flex items-center gap-4 text-sm text-muted-foreground",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4"})," Morning: ",e.morning_start_time]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4"})," Evening: ",e.evening_start_time]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(c$,{className:"w-4 h-4"})," ",(null===(t=e.stops)||void 0===t?void 0:t.length)||0," stops"]})]})]})},e.id)})})]})]}),(0,qr.jsx)(Im,{open:d,onOpenChange:m,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Add New Vehicle"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y.vehicle_number&&y.driver_name)try{const e=await fetch("".concat(uX,"/api/transport/vehicles?school_id=").concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});(await e.json()).success&&(Qt.success("Vehicle added!"),m(!1),j({vehicle_number:"",vehicle_type:"bus",capacity:40,driver_name:"",driver_phone:"",conductor_name:"",conductor_phone:""}),S())}catch(t){Qt.error("Failed to add vehicle")}else Qt.error("Vehicle number aur Driver name required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Vehicle Number *"}),(0,qr.jsx)(Rl,{value:y.vehicle_number,onChange:e=>j(u(u({},y),{},{vehicle_number:e.target.value})),placeholder:"UP32 AB 1234"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Type"}),(0,qr.jsxs)("select",{value:y.vehicle_type,onChange:e=>j(u(u({},y),{},{vehicle_type:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"bus",children:"Bus"}),(0,qr.jsx)("option",{value:"van",children:"Van"}),(0,qr.jsx)("option",{value:"auto",children:"Auto"})]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Capacity"}),(0,qr.jsx)(Rl,{type:"number",value:y.capacity,onChange:e=>j(u(u({},y),{},{capacity:parseInt(e.target.value)}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Driver Name *"}),(0,qr.jsx)(Rl,{value:y.driver_name,onChange:e=>j(u(u({},y),{},{driver_name:e.target.value})),placeholder:"Driver name"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Driver Phone"}),(0,qr.jsx)(Rl,{value:y.driver_phone,onChange:e=>j(u(u({},y),{},{driver_phone:e.target.value})),placeholder:"Phone number"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Conductor Name"}),(0,qr.jsx)(Rl,{value:y.conductor_name,onChange:e=>j(u(u({},y),{},{conductor_name:e.target.value})),placeholder:"Conductor name"})]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",className:"bg-amber-600 hover:bg-amber-700",children:"Add Vehicle"})]})]})]})}),(0,qr.jsx)(Im,{open:h,onOpenChange:p,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Create New Route"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),N.route_name&&N.route_number)try{const e=await fetch("".concat(uX,"/api/transport/routes?school_id=").concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});(await e.json()).success&&(Qt.success("Route created!"),p(!1),S())}catch(t){Qt.error("Failed to create route")}else Qt.error("Route name aur number required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Route Name *"}),(0,qr.jsx)(Rl,{value:N.route_name,onChange:e=>w(u(u({},N),{},{route_name:e.target.value})),placeholder:"Gomti Nagar Route"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Route Number *"}),(0,qr.jsx)(Rl,{value:N.route_number,onChange:e=>w(u(u({},N),{},{route_number:e.target.value})),placeholder:"R-01"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Morning Start"}),(0,qr.jsx)(Rl,{type:"time",value:N.morning_start_time,onChange:e=>w(u(u({},N),{},{morning_start_time:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Evening Start"}),(0,qr.jsx)(Rl,{type:"time",value:N.evening_start_time,onChange:e=>w(u(u({},N),{},{evening_start_time:e.target.value}))})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Monthly Fee (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:N.monthly_fee,onChange:e=>w(u(u({},N),{},{monthly_fee:parseFloat(e.target.value)}))})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Create Route"})]})]})]})})]})}const hX=Dc("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),pX=Dc("syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]),xX="",fX={low:"bg-green-500/10 text-green-600",medium:"bg-amber-500/10 text-amber-600",high:"bg-orange-500/10 text-orange-600",emergency:"bg-red-500/10 text-red-600"},gX={injury:"Injury",illness:"Illness",allergic_reaction:"Allergic Reaction",fever:"Fever",other:"Other"};function vX(){const{user:e}=Kr(),[t,a]=(0,s.useState)(null),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(""),j=(null===e||void 0===e?void 0:e.school_id)||"school123",[N,w]=(0,s.useState)({student_id:"",incident_type:"illness",description:"",severity:"low",treatment_given:"",sent_home:!1,parent_notified:!1}),[S,_]=(0,s.useState)({student_id:"",blood_group:"",height_cm:"",weight_kg:"",allergies:"",chronic_conditions:"",notes:""}),[k,C]=(0,s.useState)({title:"",checkup_type:"general",scheduled_date:"",doctor_name:"",notes:""}),E=(0,s.useCallback)(async()=>{try{m(!0);const[e,t,s,n]=await Promise.all([fetch("".concat(xX,"/api/health/analytics?school_id=").concat(j)),fetch("".concat(xX,"/api/health/incidents/today?school_id=").concat(j)),fetch("".concat(xX,"/api/health/checkups?school_id=").concat(j)),fetch("".concat(xX,"/api/health/immunizations/due?school_id=").concat(j))]);a(await e.json());const i=await t.json();r(i.incidents||[]);const o=await s.json();l(o.checkups||[]);const d=await n.json();c(d.due_immunizations||[])}catch(e){console.error("Error:",e)}finally{m(!1)}},[j]);(0,s.useEffect)(()=>{E()},[E]);return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"health-module-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,qr.jsx)(rh,{className:"w-8 h-8 text-red-500"}),"Health Module"]}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Student Health Records, Immunizations & Medical Incidents"})]}),(0,qr.jsx)("div",{className:"flex items-center gap-2",children:(0,qr.jsxs)(Dl,{variant:"outline",onClick:E,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),t&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-red-500/10 to-pink-500/10 border-red-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Health Records"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:t.total_health_records})]}),(0,qr.jsx)(cY,{className:"w-10 h-10 text-red-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"With Allergies"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:t.students_with_allergies})]}),(0,qr.jsx)(QU,{className:"w-10 h-10 text-amber-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border-blue-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Incidents (Month)"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:t.incidents_this_month})]}),(0,qr.jsx)(vJ,{className:"w-10 h-10 text-blue-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending Checkups"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:t.upcoming_checkups})]}),(0,qr.jsx)(hX,{className:"w-10 h-10 text-green-500"})]})})})]}),(0,qr.jsxs)(wc,{defaultValue:"incidents",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-4",children:[(0,qr.jsx)(_c,{value:"incidents",children:"Incidents"}),(0,qr.jsx)(_c,{value:"records",children:"Health Records"}),(0,qr.jsx)(_c,{value:"immunizations",children:"Immunizations"}),(0,qr.jsx)(_c,{value:"checkups",children:"Checkups"})]}),(0,qr.jsxs)(kc,{value:"incidents",className:"mt-4",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold",children:"Today's Medical Incidents"}),(0,qr.jsxs)(Dl,{onClick:()=>p(!0),className:"bg-red-600 hover:bg-red-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Report Incident"]})]}),0===n.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-12 text-center",children:[(0,qr.jsx)(vJ,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Aaj koi incident nahi"}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Koi medical incident report nahi hui aaj"})]})}):(0,qr.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,qr.jsx)(Qc,{className:"border-l-4 ".concat("emergency"===e.severity?"border-l-red-500":"high"===e.severity?"border-l-orange-500":"border-l-amber-500"),children:(0,qr.jsx)(td,{className:"py-4",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,qr.jsx)("h3",{className:"font-semibold",children:e.student_name}),(0,qr.jsx)(eJ,{variant:"outline",children:e.class_name}),(0,qr.jsx)(eJ,{className:fX[e.severity],children:e.severity.toUpperCase()})]}),(0,qr.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:gX[e.incident_type]}),(0,qr.jsx)("p",{className:"text-sm",children:e.description}),e.treatment_given&&(0,qr.jsxs)("p",{className:"text-sm mt-2",children:[(0,qr.jsx)("strong",{children:"Treatment:"})," ",e.treatment_given]})]}),(0,qr.jsxs)("div",{className:"flex flex-col gap-1 text-xs",children:[e.sent_home&&(0,qr.jsx)(eJ,{variant:"outline",className:"text-red-600",children:"Sent Home"}),e.parent_notified&&(0,qr.jsx)(eJ,{variant:"outline",className:"text-green-600",children:"Parent Notified"})]})]})})},e.id))})]}),(0,qr.jsxs)(kc,{value:"records",className:"mt-4",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold",children:"Student Health Records"}),(0,qr.jsxs)(Dl,{onClick:()=>f(!0),children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add/Update Record"]})]}),(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-8 text-center",children:[(0,qr.jsx)(cY,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Health Records"}),(0,qr.jsxs)("p",{className:"text-muted-foreground mt-1",children:[(null===t||void 0===t?void 0:t.total_health_records)||0," students ke health records stored hain"]}),(0,qr.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Student ID search karke individual record dekh sakte hain"})]})})]}),(0,qr.jsx)(kc,{value:"immunizations",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(pX,{className:"w-5 h-5 text-blue-500"}),"Upcoming Immunizations"]}),(0,qr.jsx)(ed,{children:"Students with immunizations due in next 30 days"})]}),(0,qr.jsx)(td,{children:0===o.length?(0,qr.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Koi immunization due nahi hai"}):(0,qr.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-medium",children:e.student_name}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.vaccine_name," - Dose ",e.dose_number]})]}),(0,qr.jsx)(eJ,{variant:"outline",children:e.next_due_date})]},t))})})]})}),(0,qr.jsxs)(kc,{value:"checkups",className:"mt-4",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold",children:"Scheduled Health Checkups"}),(0,qr.jsxs)(Dl,{onClick:()=>v(!0),className:"bg-green-600 hover:bg-green-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Schedule Checkup"]})]}),0===i.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-12 text-center",children:[(0,qr.jsx)(hX,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Koi checkup scheduled nahi"})]})}):(0,qr.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:i.map(e=>(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"pt-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"p-3 rounded-xl bg-green-500/10",children:(0,qr.jsx)(hX,{className:"w-8 h-8 text-green-600"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h3",{className:"font-semibold",children:e.title}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground capitalize",children:[e.checkup_type," Checkup"]})]}),(0,qr.jsx)(eJ,{variant:"scheduled"===e.status?"default":"secondary",children:e.status})]}),(0,qr.jsxs)("div",{className:"mt-3 flex items-center gap-4 text-sm text-muted-foreground",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(eh,{className:"w-4 h-4"})," ",e.scheduled_date]}),e.doctor_name&&(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(eH,{className:"w-4 h-4"})," ",e.doctor_name]})]})]})},e.id))})]})]}),(0,qr.jsx)(Im,{open:h,onOpenChange:p,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Report Medical Incident"})}),(0,qr.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),N.student_id&&N.description)try{const t=await fetch("".concat(xX,"/api/health/incidents?school_id=").concat(j,"&reported_by=").concat((null===e||void 0===e?void 0:e.name)||"Admin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});(await t.json()).success&&(Qt.success("Incident reported!"),p(!1),w({student_id:"",incident_type:"illness",description:"",severity:"low",treatment_given:"",sent_home:!1,parent_notified:!1}),E())}catch(a){Qt.error("Failed to report incident")}else Qt.error("Student ID aur description required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Student ID *"}),(0,qr.jsx)(Rl,{value:N.student_id,onChange:e=>w(u(u({},N),{},{student_id:e.target.value})),placeholder:"STD-2026-XXXXX"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Incident Type"}),(0,qr.jsxs)("select",{value:N.incident_type,onChange:e=>w(u(u({},N),{},{incident_type:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"illness",children:"Illness"}),(0,qr.jsx)("option",{value:"injury",children:"Injury"}),(0,qr.jsx)("option",{value:"fever",children:"Fever"}),(0,qr.jsx)("option",{value:"allergic_reaction",children:"Allergic Reaction"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Severity"}),(0,qr.jsxs)("select",{value:N.severity,onChange:e=>w(u(u({},N),{},{severity:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"low",children:"Low"}),(0,qr.jsx)("option",{value:"medium",children:"Medium"}),(0,qr.jsx)("option",{value:"high",children:"High"}),(0,qr.jsx)("option",{value:"emergency",children:"Emergency"})]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Description *"}),(0,qr.jsx)(_Y,{value:N.description,onChange:e=>w(u(u({},N),{},{description:e.target.value})),placeholder:"Describe the incident...",rows:3})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Treatment Given"}),(0,qr.jsx)(Rl,{value:N.treatment_given,onChange:e=>w(u(u({},N),{},{treatment_given:e.target.value})),placeholder:"First aid, medication, etc."})]}),(0,qr.jsxs)("div",{className:"flex gap-4",children:[(0,qr.jsxs)("label",{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{type:"checkbox",checked:N.sent_home,onChange:e=>w(u(u({},N),{},{sent_home:e.target.checked}))}),(0,qr.jsx)("span",{className:"text-sm",children:"Sent Home"})]}),(0,qr.jsxs)("label",{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{type:"checkbox",checked:N.parent_notified,onChange:e=>w(u(u({},N),{},{parent_notified:e.target.checked}))}),(0,qr.jsx)("span",{className:"text-sm",children:"Parent Notified"})]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",className:"bg-red-600 hover:bg-red-700",children:"Report Incident"})]})]})]})}),(0,qr.jsx)(Im,{open:x,onOpenChange:f,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Add/Update Health Record"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),S.student_id)try{const e={student_id:S.student_id,blood_group:S.blood_group||null,height_cm:S.height_cm?parseFloat(S.height_cm):null,weight_kg:S.weight_kg?parseFloat(S.weight_kg):null,allergies:S.allergies?S.allergies.split(",").map(e=>e.trim()):[],chronic_conditions:S.chronic_conditions?S.chronic_conditions.split(",").map(e=>e.trim()):[],notes:S.notes||null},t=await fetch("".concat(xX,"/api/health/records?school_id=").concat(j),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});(await t.json()).success&&(Qt.success("Health record saved!"),f(!1),_({student_id:"",blood_group:"",height_cm:"",weight_kg:"",allergies:"",chronic_conditions:"",notes:""}),E())}catch(t){Qt.error("Failed to save health record")}else Qt.error("Student ID required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Student ID *"}),(0,qr.jsx)(Rl,{value:S.student_id,onChange:e=>_(u(u({},S),{},{student_id:e.target.value})),placeholder:"STD-2026-XXXXX"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Blood Group"}),(0,qr.jsxs)("select",{value:S.blood_group,onChange:e=>_(u(u({},S),{},{blood_group:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"A+",children:"A+"}),(0,qr.jsx)("option",{value:"A-",children:"A-"}),(0,qr.jsx)("option",{value:"B+",children:"B+"}),(0,qr.jsx)("option",{value:"B-",children:"B-"}),(0,qr.jsx)("option",{value:"AB+",children:"AB+"}),(0,qr.jsx)("option",{value:"AB-",children:"AB-"}),(0,qr.jsx)("option",{value:"O+",children:"O+"}),(0,qr.jsx)("option",{value:"O-",children:"O-"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Height (cm)"}),(0,qr.jsx)(Rl,{type:"number",value:S.height_cm,onChange:e=>_(u(u({},S),{},{height_cm:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Weight (kg)"}),(0,qr.jsx)(Rl,{type:"number",value:S.weight_kg,onChange:e=>_(u(u({},S),{},{weight_kg:e.target.value}))})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Allergies (comma separated)"}),(0,qr.jsx)(Rl,{value:S.allergies,onChange:e=>_(u(u({},S),{},{allergies:e.target.value})),placeholder:"Peanuts, Dust, Milk..."})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Chronic Conditions"}),(0,qr.jsx)(Rl,{value:S.chronic_conditions,onChange:e=>_(u(u({},S),{},{chronic_conditions:e.target.value})),placeholder:"Asthma, Diabetes..."})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",children:"Save Record"})]})]})]})}),(0,qr.jsx)(Im,{open:g,onOpenChange:v,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Schedule Health Checkup"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),k.title&&k.scheduled_date)try{const e=await fetch("".concat(xX,"/api/health/checkups?school_id=").concat(j),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});(await e.json()).success&&(Qt.success("Checkup scheduled!"),v(!1),C({title:"",checkup_type:"general",scheduled_date:"",doctor_name:"",notes:""}),E())}catch(t){Qt.error("Failed to schedule checkup")}else Qt.error("Title aur date required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Checkup Title *"}),(0,qr.jsx)(Rl,{value:k.title,onChange:e=>C(u(u({},k),{},{title:e.target.value})),placeholder:"Annual Health Checkup"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Checkup Type"}),(0,qr.jsxs)("select",{value:k.checkup_type,onChange:e=>C(u(u({},k),{},{checkup_type:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"general",children:"General"}),(0,qr.jsx)("option",{value:"dental",children:"Dental"}),(0,qr.jsx)("option",{value:"eye",children:"Eye"}),(0,qr.jsx)("option",{value:"ear",children:"Ear"}),(0,qr.jsx)("option",{value:"annual",children:"Annual"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Date *"}),(0,qr.jsx)(Rl,{type:"date",value:k.scheduled_date,onChange:e=>C(u(u({},k),{},{scheduled_date:e.target.value}))})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Doctor Name"}),(0,qr.jsx)(Rl,{value:k.doctor_name,onChange:e=>C(u(u({},k),{},{doctor_name:e.target.value})),placeholder:"Dr. Name"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:"Schedule"})]})]})]})})]})}const bX="",yX={fingerprint:"Fingerprint Scanner",face:"Face Recognition",card:"RFID Card",multi:"Multi-Modal"};function jX(){var e,t,a,n,r,i,l,o,c,d,m,h;const{user:p}=Kr(),[x,f]=(0,s.useState)([]),[g,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)([]),[w,S]=(0,s.useState)(!0),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),A=(null===p||void 0===p?void 0:p.school_id)||"school123",[P,O]=(0,s.useState)({device_name:"",device_type:"fingerprint",location:"main_gate",ip_address:"",serial_number:""}),[M,T]=(0,s.useState)({person_id:"",person_type:"student",biometric_type:"fingerprint",device_id:""}),D=(0,s.useCallback)(async()=>{try{S(!0);const[e,t,a,s]=await Promise.all([fetch("".concat(bX,"/api/biometric/devices?school_id=").concat(A)),fetch("".concat(bX,"/api/biometric/analytics?school_id=").concat(A)),fetch("".concat(bX,"/api/biometric/attendance/live?school_id=").concat(A)),fetch("".concat(bX,"/api/biometric/punches/today?school_id=").concat(A))]);f((await e.json()).devices||[]),v(await t.json()),y(await a.json()),N((await s.json()).punches||[])}catch(e){console.error("Error:",e)}finally{S(!1)}},[A]);(0,s.useEffect)(()=>{D();const e=setInterval(D,3e4);return()=>clearInterval(e)},[D]);return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"biometric-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,qr.jsx)(lh,{className:"w-8 h-8 text-emerald-500"}),"Biometric Attendance"]}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Fingerprint & Face Recognition Attendance System"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:D,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,qr.jsxs)(Dl,{onClick:()=>E(!0),variant:"outline",children:[(0,qr.jsx)(kh,{className:"w-4 h-4 mr-2"}),"Enroll"]}),(0,qr.jsxs)(Dl,{onClick:()=>k(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Device"]})]})]}),b&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-emerald-500/10 to-green-500/10 border-emerald-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Students Present"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-emerald-600",children:(null===(e=b.summary)||void 0===e?void 0:e.students_present)||0})]}),(0,qr.jsx)(Lc,{className:"w-10 h-10 text-emerald-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border-blue-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Teachers Present"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:(null===(t=b.summary)||void 0===t?void 0:t.teachers_present)||0})]}),(0,qr.jsx)(Lc,{className:"w-10 h-10 text-blue-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border-purple-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Staff Present"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:(null===(a=b.summary)||void 0===a?void 0:a.staff_present)||0})]}),(0,qr.jsx)(Lc,{className:"w-10 h-10 text-purple-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-500/20",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Devices Online"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold text-amber-600",children:[(null===g||void 0===g||null===(n=g.devices)||void 0===n?void 0:n.online)||0,"/",(null===g||void 0===g||null===(r=g.devices)||void 0===r?void 0:r.total)||0]})]}),(0,qr.jsx)(H$,{className:"w-10 h-10 text-amber-500"})]})})})]}),(0,qr.jsxs)(wc,{defaultValue:"devices",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-3",children:[(0,qr.jsx)(_c,{value:"devices",children:"Devices"}),(0,qr.jsx)(_c,{value:"punches",children:"Live Punches"}),(0,qr.jsx)(_c,{value:"analytics",children:"Analytics"})]}),(0,qr.jsxs)(kc,{value:"devices",className:"mt-4",children:[0===x.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-12 text-center",children:[(0,qr.jsx)(lh,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Koi biometric device nahi"}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Device add karke biometric attendance start karein"})]})}):(0,qr.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map(e=>{var t;return(0,qr.jsx)(Qc,{className:"border-l-4 ".concat("online"===e.status?"border-l-emerald-500":"border-l-red-500"),children:(0,qr.jsxs)(td,{className:"pt-4",children:[(0,qr.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,qr.jsx)("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:(0,qr.jsx)(lh,{className:"w-6 h-6 text-emerald-600"})}),(0,qr.jsx)(eJ,{variant:"online"===e.status?"default":"destructive",children:"online"===e.status?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(H$,{className:"w-3 h-3 mr-1"})," Online"]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(q$,{className:"w-3 h-3 mr-1"})," Offline"]})})]}),(0,qr.jsx)("h3",{className:"font-semibold",children:e.device_name}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground capitalize",children:[yX[e.device_type]," \u2022 ",null===(t=e.location)||void 0===t?void 0:t.replace("_"," ")]}),(0,qr.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm",children:[(0,qr.jsxs)("span",{className:"text-muted-foreground",children:["Today: ",e.today_punches," punches"]}),(0,qr.jsxs)(Dl,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{await fetch("".concat(bX,"/api/biometric/sync?device_id=").concat(e,"&school_id=").concat(A),{method:"POST"}),Qt.success("Device synced!"),D()}catch(t){Qt.error("Sync failed")}})(e.id),children:[(0,qr.jsx)(lH,{className:"w-3 h-3 mr-1"})," Sync"]})]})]})},e.id)})}),(0,qr.jsx)("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,qr.jsxs)("p",{className:"text-sm text-amber-800 flex items-center gap-2",children:[(0,qr.jsx)(kY,{className:"w-4 h-4"}),"Biometric hardware integration is SIMULATED. Connect real ZKTeco/eSSL devices for production."]})})]}),(0,qr.jsx)(kc,{value:"punches",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(vJ,{className:"w-5 h-5 text-emerald-500 animate-pulse"}),"Live Attendance Feed"]}),(0,qr.jsx)(ed,{children:"Real-time biometric punches"})]}),(0,qr.jsx)(td,{children:0===j.length?(0,qr.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Aaj koi punch nahi hui"}):(0,qr.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:j.slice(0,20).map(e=>{return(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"p-2 rounded-full ".concat("in"===e.punch_type?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"),children:"in"===e.punch_type?(0,qr.jsx)(GQ,{className:"w-4 h-4"}):(0,qr.jsx)(eY,{className:"w-4 h-4"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.person_name}),(0,qr.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:e.person_type})]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsx)(eJ,{variant:"in"===e.punch_type?"default":"secondary",children:e.punch_type.toUpperCase()}),(0,qr.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(t=e.timestamp,t?new Date(t).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"-")})]})]},e.id);var t})})})]})}),(0,qr.jsx)(kc,{value:"analytics",className:"mt-4",children:g&&(0,qr.jsx)("div",{className:"space-y-4",children:(0,qr.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsx)(Zc,{className:"text-base",children:"Total Enrollments"})}),(0,qr.jsxs)(td,{children:[(0,qr.jsx)("p",{className:"text-3xl font-bold",children:(null===(i=g.enrollments)||void 0===i?void 0:i.total)||0}),(0,qr.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[(0,qr.jsxs)("span",{children:["Students: ",(null===(l=g.enrollments)||void 0===l?void 0:l.students)||0]}),(0,qr.jsxs)("span",{children:["Staff: ",(null===(o=g.enrollments)||void 0===o?void 0:o.staff)||0]})]})]})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsx)(Zc,{className:"text-base",children:"Device Status"})}),(0,qr.jsxs)(td,{children:[(0,qr.jsxs)("p",{className:"text-3xl font-bold",children:[(null===(c=g.devices)||void 0===c?void 0:c.online)||0," / ",(null===(d=g.devices)||void 0===d?void 0:d.total)||0]}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[(null===(m=g.devices)||void 0===m?void 0:m.offline)||0," devices offline"]})]})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsx)(Zc,{className:"text-base",children:"7-Day Trend"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"flex items-end gap-1 h-16",children:null===(h=g.attendance_trend)||void 0===h?void 0:h.map((e,t)=>(0,qr.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,qr.jsx)("div",{className:"w-full bg-emerald-500 rounded-t",style:{height:"".concat(Math.max(e.present/100*100,10),"%")}}),(0,qr.jsx)("span",{className:"text-[10px] text-muted-foreground mt-1",children:new Date(e.date).toLocaleDateString("en-IN",{weekday:"short"}).charAt(0)})]},t))})})]})]})})})]}),(0,qr.jsx)(Im,{open:_,onOpenChange:k,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Add Biometric Device"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),P.device_name&&P.location)try{const e=await fetch("".concat(bX,"/api/biometric/devices?school_id=").concat(A),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});(await e.json()).success&&(Qt.success("Device added!"),k(!1),O({device_name:"",device_type:"fingerprint",location:"main_gate",ip_address:"",serial_number:""}),D())}catch(t){Qt.error("Failed to add device")}else Qt.error("Device name aur location required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Device Name *"}),(0,qr.jsx)(Rl,{value:P.device_name,onChange:e=>O(u(u({},P),{},{device_name:e.target.value})),placeholder:"Main Gate Fingerprint"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Device Type"}),(0,qr.jsxs)("select",{value:P.device_type,onChange:e=>O(u(u({},P),{},{device_type:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"fingerprint",children:"Fingerprint Scanner"}),(0,qr.jsx)("option",{value:"face",children:"Face Recognition"}),(0,qr.jsx)("option",{value:"card",children:"RFID Card"}),(0,qr.jsx)("option",{value:"multi",children:"Multi-Modal"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Location *"}),(0,qr.jsxs)("select",{value:P.location,onChange:e=>O(u(u({},P),{},{location:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"main_gate",children:"Main Gate"}),(0,qr.jsx)("option",{value:"back_gate",children:"Back Gate"}),(0,qr.jsx)("option",{value:"staff_room",children:"Staff Room"}),(0,qr.jsx)("option",{value:"office",children:"Office"}),(0,qr.jsx)("option",{value:"classroom",children:"Classroom"})]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"IP Address"}),(0,qr.jsx)(Rl,{value:P.ip_address,onChange:e=>O(u(u({},P),{},{ip_address:e.target.value})),placeholder:"192.168.1.100"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Serial Number"}),(0,qr.jsx)(Rl,{value:P.serial_number,onChange:e=>O(u(u({},P),{},{serial_number:e.target.value})),placeholder:"ZK-123456"})]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",className:"bg-emerald-600 hover:bg-emerald-700",children:"Add Device"})]})]})]})}),(0,qr.jsx)(Im,{open:C,onOpenChange:E,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Enroll Biometric"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),M.person_id&&M.device_id)try{const e=await fetch("".concat(bX,"/api/biometric/enroll?school_id=").concat(A),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)}),t=await e.json();t.success?(Qt.success("Biometric enrolled! Template: ".concat(t.template_id)),E(!1),D()):Qt.error(t.detail||"Enrollment failed")}catch(t){Qt.error("Enrollment failed")}else Qt.error("Person ID aur Device select karein")},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Person ID *"}),(0,qr.jsx)(Rl,{value:M.person_id,onChange:e=>T(u(u({},M),{},{person_id:e.target.value})),placeholder:"STD-2026-XXXXX or Staff ID"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Person Type"}),(0,qr.jsxs)("select",{value:M.person_type,onChange:e=>T(u(u({},M),{},{person_type:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"student",children:"Student"}),(0,qr.jsx)("option",{value:"teacher",children:"Teacher"}),(0,qr.jsx)("option",{value:"staff",children:"Staff"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Biometric Type"}),(0,qr.jsxs)("select",{value:M.biometric_type,onChange:e=>T(u(u({},M),{},{biometric_type:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"fingerprint",children:"Fingerprint"}),(0,qr.jsx)("option",{value:"face",children:"Face"})]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Device *"}),(0,qr.jsxs)("select",{value:M.device_id,onChange:e=>T(u(u({},M),{},{device_id:e.target.value})),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"",children:"Select Device"}),x.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.device_name},e.id))]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{type:"submit",className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,qr.jsx)(lh,{className:"w-4 h-4 mr-2"}),"Enroll"]})]})]})]})})]})}const NX=Dc("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),wX=Dc("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),SX="",_X=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kX=["bg-blue-500/10 border-blue-500/30","bg-green-500/10 border-green-500/30","bg-purple-500/10 border-purple-500/30","bg-amber-500/10 border-amber-500/30","bg-pink-500/10 border-pink-500/30","bg-indigo-500/10 border-indigo-500/30","bg-red-500/10 border-red-500/30","bg-teal-500/10 border-teal-500/30"];function CX(){const{user:e}=Kr(),[t,a]=(0,s.useState)([]),[n,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(null),[h,p]=(0,s.useState)([]),[x,f]=(0,s.useState)(!0),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),w=(null===e||void 0===e?void 0:e.school_id)||"SCH-DEMO-2026",[S,_]=(0,s.useState)({subject:"",teacher_id:"",periods_per_week:5}),[k,C]=(0,s.useState)({original_teacher_id:"",substitute_teacher_id:"",date:(new Date).toISOString().split("T")[0],periods:[],reason:""}),E=(0,s.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(SX,"/api/classes?school_id=").concat(w),{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();a(s.classes||s||[])}catch(e){console.error("Error:",e)}},[w]),A=(0,s.useCallback)(async e=>{if(e)try{f(!0);const t=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(t)},[s,n]=await Promise.all([fetch("".concat(SX,"/api/timetable/").concat(e,"?school_id=").concat(w),{headers:a}),fetch("".concat(SX,"/api/timetable/allocations/").concat(e,"?school_id=").concat(w),{headers:a})]),r=await s.json(),i=await n.json();l(r.exists?r:null),c(i.allocations||[])}catch(t){console.error("Error:",t)}finally{f(!1)}},[w]),P=(0,s.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t={Authorization:"Bearer ".concat(e)},[a,s]=await Promise.all([fetch("".concat(SX,"/api/timetable/analytics?school_id=").concat(w),{headers:t}),fetch("".concat(SX,"/api/timetable/conflicts?school_id=").concat(w),{headers:t})]);m(await a.json()),p((await s.json()).conflicts||[])}catch(e){console.error("Error:",e)}},[w]);(0,s.useEffect)(()=>{E(),P()},[E,P]),(0,s.useEffect)(()=>{n&&A(n)},[n,A]);const O=e=>{const t=o.findIndex(t=>t.subject===e);return kX[t%kX.length]};return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"timetable-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,qr.jsx)(eh,{className:"w-8 h-8 text-indigo-500"}),"Timetable Management"]}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"AI-Powered Auto Timetable Scheduler"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>N(!0),children:[(0,qr.jsx)(NX,{className:"w-4 h-4 mr-2"}),"Proxy"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:P,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),d&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Classes with Timetable"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:d.classes_with_timetable})]}),(0,qr.jsx)(eh,{className:"w-8 h-8 text-indigo-500"})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Allocations"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:d.total_allocations})]}),(0,qr.jsx)(sh,{className:"w-8 h-8 text-green-500"})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Today Proxies"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:d.today_proxies})]}),(0,qr.jsx)(NX,{className:"w-8 h-8 text-amber-500"})]})})}),(0,qr.jsx)(Qc,{className:h.length>0?"border-red-500":"",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Conflicts"}),(0,qr.jsx)("p",{className:"text-2xl font-bold ".concat(h.length>0?"text-red-600":"text-green-600"),children:h.length})]}),h.length>0?(0,qr.jsx)(QU,{className:"w-8 h-8 text-red-500"}):(0,qr.jsx)(GQ,{className:"w-8 h-8 text-green-500"})]})})})]}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Select Class"}),(0,qr.jsxs)("select",{value:n||"",onChange:e=>r(e.target.value),className:"w-full h-10 px-3 border rounded-md",children:[(0,qr.jsx)("option",{value:"",children:"Select a class..."}),t.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),(0,qr.jsxs)(Dl,{onClick:()=>y(!0),disabled:!n,children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Subject"]}),(0,qr.jsx)(Dl,{onClick:async()=>{if(n)if(0!==o.length){v(!0);try{const e=await fetch("".concat(SX,"/api/timetable/generate?class_id=").concat(n,"&school_id=").concat(w),{method:"POST"}),t=await e.json();t.success?(Qt.success("Timetable generated!"),A(n),P()):Qt.error(t.detail||"Generation failed")}catch(e){Qt.error("Failed to generate timetable")}finally{v(!1)}}else Qt.error("Pehle subjects aur teachers allocate karein");else Qt.error("Pehle class select karein")},disabled:!n||g||0===o.length,className:"bg-indigo-600 hover:bg-indigo-700",children:g?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2 animate-spin"})," Generating..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(wX,{className:"w-4 h-4 mr-2"})," Auto Generate"]})})]})})}),n&&(0,qr.jsxs)(wc,{defaultValue:"timetable",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-2",children:[(0,qr.jsx)(_c,{value:"timetable",children:"Timetable"}),(0,qr.jsxs)(_c,{value:"allocations",children:["Subject Allocations (",o.length,")"]})]}),(0,qr.jsx)(kc,{value:"timetable",className:"mt-4",children:x?(0,qr.jsx)("div",{className:"flex justify-center py-12",children:(0,qr.jsx)(lH,{className:"w-8 h-8 animate-spin text-indigo-500"})}):i?(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"pt-4 overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Period"}),_X.map(e=>(0,qr.jsx)("th",{className:"p-2 text-center font-medium",children:e},e))]})}),(0,qr.jsx)("tbody",{children:Array.from({length:8},(e,t)=>t+1).map(e=>(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("td",{className:"p-2 font-medium text-muted-foreground",children:e}),_X.map(t=>{var a,s;const n=null===(a=i.schedule)||void 0===a||null===(s=a[t])||void 0===s?void 0:s.find(t=>t.period===e);return n?"break"===n.type||"lunch"===n.type?(0,qr.jsx)("td",{className:"p-2",children:(0,qr.jsx)("div",{className:"p-2 rounded-lg bg-slate-100 text-center text-sm text-muted-foreground",children:n.subject})},t):(0,qr.jsx)("td",{className:"p-2",children:(0,qr.jsxs)("div",{className:"p-2 rounded-lg border ".concat(O(n.subject)),children:[(0,qr.jsx)("p",{className:"font-medium text-sm",children:n.subject}),(0,qr.jsx)("p",{className:"text-xs text-muted-foreground",children:n.teacher_name})]})},t):(0,qr.jsx)("td",{className:"p-2"},t)})]},e))})]})})}):(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-12 text-center",children:[(0,qr.jsx)(eh,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Koi timetable nahi"}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:'Subjects allocate karke "Auto Generate" click karein'})]})})}),(0,qr.jsx)(kc,{value:"allocations",className:"mt-4",children:0===o.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"py-12 text-center",children:[(0,qr.jsx)(sh,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-medium",children:"Koi subject allocate nahi"}),(0,qr.jsx)("p",{className:"text-muted-foreground mt-1",children:"Pehle subjects aur teachers add karein"})]})}):(0,qr.jsx)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:o.map((e,t)=>(0,qr.jsx)(Qc,{className:"border-l-4 ".concat(kX[t%kX.length].split(" ")[0].replace("/10","/50")),children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold",children:e.subject}),(0,qr.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,qr.jsx)(eH,{className:"w-3 h-3"})," ",e.teacher_name]})]}),(0,qr.jsxs)(eJ,{variant:"outline",children:[e.periods_per_week," periods/week"]})]})})},e.id||t))})})]}),(0,qr.jsx)(Im,{open:b,onOpenChange:y,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Add Subject Allocation"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n&&S.subject&&S.teacher_id)try{const e=await fetch("".concat(SX,"/api/timetable/allocations?school_id=").concat(w),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u({class_id:n},S))});(await e.json()).success&&(Qt.success("Allocation added!"),y(!1),_({subject:"",teacher_id:"",periods_per_week:5}),A(n))}catch(t){Qt.error("Failed to add allocation")}else Qt.error("Subject aur teacher required hai")},className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Subject *"}),(0,qr.jsx)(Rl,{value:S.subject,onChange:e=>_(u(u({},S),{},{subject:e.target.value})),placeholder:"Mathematics, Science, English..."})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Teacher ID *"}),(0,qr.jsx)(Rl,{value:S.teacher_id,onChange:e=>_(u(u({},S),{},{teacher_id:e.target.value})),placeholder:"Teacher ID"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Periods per Week"}),(0,qr.jsx)(Rl,{type:"number",min:"1",max:"10",value:S.periods_per_week,onChange:e=>_(u(u({},S),{},{periods_per_week:parseInt(e.target.value)}))})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,qr.jsx)(Dl,{type:"submit",children:"Add Allocation"})]})]})]})}),(0,qr.jsx)(Im,{open:j,onOpenChange:N,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Request Proxy/Substitute"})}),(0,qr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("".concat(SX,"/api/timetable/proxy?school_id=").concat(w),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});(await e.json()).success&&(Qt.success("Proxy assigned!"),N(!1))}catch(t){Qt.error("Failed to assign proxy")}},className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Original Teacher ID"}),(0,qr.jsx)(Rl,{value:k.original_teacher_id,onChange:e=>C(u(u({},k),{},{original_teacher_id:e.target.value})),placeholder:"Teacher on leave"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Substitute Teacher ID"}),(0,qr.jsx)(Rl,{value:k.substitute_teacher_id,onChange:e=>C(u(u({},k),{},{substitute_teacher_id:e.target.value})),placeholder:"Proxy teacher"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Date"}),(0,qr.jsx)(Rl,{type:"date",value:k.date,onChange:e=>C(u(u({},k),{},{date:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium",children:"Reason"}),(0,qr.jsx)(Rl,{value:k.reason,onChange:e=>C(u(u({},k),{},{reason:e.target.value})),placeholder:"Sick leave, training, etc."})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,qr.jsx)(Dl,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{type:"submit",className:"bg-amber-600 hover:bg-amber-700",children:[(0,qr.jsx)(NX,{className:"w-4 h-4 mr-2"}),"Assign Proxy"]})]})]})]})})]})}const EX=Dc("door-open",[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]]),AX={critical:"bg-red-500/10 text-red-600 border-red-500/30",high:"bg-orange-500/10 text-orange-600 border-orange-500/30",medium:"bg-amber-500/10 text-amber-600 border-amber-500/30",low:"bg-green-500/10 text-green-600 border-green-500/30"},PX={green:"from-emerald-500 to-green-500",blue:"from-blue-500 to-indigo-500",yellow:"from-amber-500 to-orange-500",red:"from-red-500 to-pink-500"},OX={"clipboard-check":tJ,wallet:Zm,"door-open":EX,bus:nh,heart:rh,fingerprint:lh};function MX(){var e,t,a,n,r,i,l,o,c,d,u;const{user:m}=Kr(),h=Se(),[p,x]=(0,s.useState)(null),[f,g]=(0,s.useState)([]),[v,b]=(0,s.useState)(!0),[y,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(null),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),E=(null===m||void 0===m?void 0:m.school_id)||"school123",A=(0,s.useCallback)(async()=>{try{b(!0);const[e,t]=await Promise.all([fetch("".concat("","/api/director-ai/dashboard?school_id=").concat(E)),fetch("".concat("","/api/director-ai/department-status?school_id=").concat(E))]);x(await e.json());const a=await t.json();g(a.departments||[])}catch(e){console.error("Error:",e),Qt.error("Dashboard load nahi ho paya")}finally{b(!1)}},[E]);(0,s.useEffect)(()=>{A();const e=setInterval(A,6e4);return()=>clearInterval(e)},[A]);return v?(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(th,{className:"w-16 h-16 mx-auto text-indigo-500 animate-pulse"}),(0,qr.jsx)("p",{className:"mt-4 text-lg",children:"Director AI Loading..."})]})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"director-ai-dashboard",children:[(0,qr.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 p-6 text-white",children:[(0,qr.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,qr.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),(0,qr.jsxs)("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur",children:(0,qr.jsx)(th,{className:"w-10 h-10"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Director AI"}),(0,qr.jsx)("p",{className:"text-white/80 text-sm md:text-base",children:null===p||void 0===p?void 0:p.greeting})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(Dl,{onClick:k?()=>{"speechSynthesis"in window&&speechSynthesis.cancel(),C(!1)}:async()=>{try{C(!0);const e=await fetch("".concat("","/api/director-ai/voice-briefing?school_id=").concat(E)),t=await e.json();if("speechSynthesis"in window){const e=new SpeechSynthesisUtterance(t.briefing_text);e.lang="hi-IN",e.rate=.9,e.onend=()=>C(!1),speechSynthesis.speak(e)}else Qt.error("Voice not supported in this browser"),C(!1)}catch(e){Qt.error("Voice briefing failed"),C(!1)}},variant:"secondary",className:"gap-2 ".concat(k?"bg-red-500 hover:bg-red-600 text-white":""),children:k?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(SJ,{className:"w-4 h-4 animate-pulse"})," Stop"]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(SJ,{className:"w-4 h-4"})," Voice Briefing"]})}),(0,qr.jsx)(Dl,{onClick:A,variant:"secondary",size:"icon",children:(0,qr.jsx)(lH,{className:"w-4 h-4"})})]})]}),(null===p||void 0===p?void 0:p.health_score)&&(0,qr.jsx)("div",{className:"relative mt-6 p-4 bg-white/10 backdrop-blur rounded-xl",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-white/70 text-sm",children:"School Health Score"}),(0,qr.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,qr.jsx)("span",{className:"text-4xl font-bold",children:p.health_score.score}),(0,qr.jsx)("span",{className:"text-xl",children:"/100"}),(0,qr.jsx)(eJ,{className:"bg-white/20 text-white",children:p.health_score.status})]})]}),(0,qr.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br ".concat(PX[p.health_score.color]," flex items-center justify-center"),children:(0,qr.jsx)(Rc,{className:"w-10 h-10"})})]})})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Students Present"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:(null===p||void 0===p||null===(e=p.school_pulse)||void 0===e?void 0:e.today_attendance)||0}),(0,qr.jsxs)("p",{className:"text-xs text-muted-foreground",children:[null===p||void 0===p||null===(t=p.school_pulse)||void 0===t?void 0:t.attendance_percentage,"% attendance"]})]}),(0,qr.jsx)(Lc,{className:"w-10 h-10 text-blue-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Today Collection"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",((null===p||void 0===p||null===(a=p.school_pulse)||void 0===a?void 0:a.today_collection)||0).toLocaleString()]})]}),(0,qr.jsx)(Zm,{className:"w-10 h-10 text-green-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending Fees"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-amber-600",children:["\u20b9",((null===p||void 0===p||null===(n=p.school_pulse)||void 0===n?void 0:n.pending_fees)||0).toLocaleString()]})]}),(0,qr.jsx)(QU,{className:"w-10 h-10 text-amber-500"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200",children:(0,qr.jsx)(td,{className:"pt-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Staff"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:((null===p||void 0===p||null===(r=p.school_pulse)||void 0===r?void 0:r.total_teachers)||0)+((null===p||void 0===p||null===(i=p.school_pulse)||void 0===i?void 0:i.total_staff)||0)})]}),(0,qr.jsx)(Lc,{className:"w-10 h-10 text-purple-500"})]})})})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(j$,{className:"w-5 h-5 text-red-500"}),"Aaj Ki Priority Orders"]}),(0,qr.jsx)(ed,{children:"Director AI ke orders - follow karein"})]}),(0,qr.jsx)(td,{className:"space-y-3",children:0===(null===p||void 0===p||null===(l=p.daily_orders)||void 0===l?void 0:l.length)?(0,qr.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Sab kuch theek hai! Koi urgent order nahi."}):null===p||void 0===p||null===(o=p.daily_orders)||void 0===o?void 0:o.map((e,t)=>(0,qr.jsx)("div",{className:"p-3 rounded-lg border ".concat(AX[e.priority]," cursor-pointer hover:shadow-md transition-all"),onClick:()=>e.action_link&&h(e.action_link),children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 rounded-full bg-current/10 flex items-center justify-center font-bold text-sm",children:e.order_no}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,qr.jsx)("span",{className:"font-medium",children:e.command}),(0,qr.jsx)(eJ,{variant:"outline",className:"text-xs",children:e.priority_label})]}),(0,qr.jsx)("p",{className:"text-sm opacity-80",children:e.reason})]}),(0,qr.jsx)(qc,{className:"w-5 h-5 opacity-50"})]})},t))})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(hh,{className:"w-5 h-5 text-amber-500"}),"AI Insights"]}),(0,qr.jsx)(ed,{children:"Automatic analysis by Director AI"})]}),(0,qr.jsx)(td,{className:"space-y-3",children:0===(null===p||void 0===p||null===(c=p.insights)||void 0===c?void 0:c.length)?(0,qr.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Sab normal hai. Koi special insight nahi."}):null===p||void 0===p||null===(d=p.insights)||void 0===d?void 0:d.map((e,t)=>(0,qr.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors cursor-pointer",onClick:()=>e.action_link&&h(e.action_link),children:[(0,qr.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,qr.jsx)(eJ,{className:AX[e.priority],children:e.title})}),(0,qr.jsx)("p",{className:"text-sm text-muted-foreground",children:e.message}),e.action&&(0,qr.jsxs)("p",{className:"text-xs text-indigo-600 mt-2 flex items-center gap-1",children:[e.action," ",(0,qr.jsx)(qc,{className:"w-3 h-3"})]})]},t))})]})]}),(null===p||void 0===p||null===(u=p.alerts)||void 0===u?void 0:u.length)>0&&(0,qr.jsxs)(Qc,{className:"border-red-500 bg-red-50",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2 text-red-600",children:[(0,qr.jsx)(QU,{className:"w-5 h-5"}),"Critical Alerts - Immediate Action Required"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-2",children:p.alerts.map((e,t)=>(0,qr.jsxs)("div",{className:"p-3 bg-white rounded-lg border border-red-200",children:[(0,qr.jsx)("p",{className:"font-medium text-red-700",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-red-600",children:e.action})]},t))})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Hc,{className:"w-5 h-5 text-indigo-500"}),"Department Status - Live Monitoring"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:f.map((e,t)=>{const a=OX[e.icon]||vJ;return(0,qr.jsxs)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-slate-50 to-slate-100 border text-center hover:shadow-md transition-all cursor-pointer",children:[(0,qr.jsx)("div",{className:"w-12 h-12 mx-auto rounded-full bg-indigo-100 flex items-center justify-center mb-2",children:(0,qr.jsx)(a,{className:"w-6 h-6 text-indigo-600"})}),(0,qr.jsx)("h4",{className:"font-medium text-sm",children:e.name}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:e.metric}),(0,qr.jsx)("p",{className:"text-xs text-muted-foreground",children:e.metric_label}),(0,qr.jsxs)(eJ,{variant:"outline",className:"mt-2 text-xs bg-green-50 text-green-600",children:[(0,qr.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1 inline-block"}),"Active"]})]},t)})})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(ih,{className:"w-5 h-5 text-purple-500"}),"Ask Director AI"]}),(0,qr.jsx)(ed,{children:"Kuch bhi poochho - attendance, fees, students, teachers..."})]}),(0,qr.jsxs)(td,{children:[(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y.trim()){_(!0);try{const e=await fetch("".concat("","/api/director-ai/ask?question=").concat(encodeURIComponent(y),"&school_id=").concat(E),{method:"POST"}),t=await e.json();w(t),j("")}catch(t){Qt.error("AI response nahi mila")}finally{_(!1)}}},className:"flex gap-2",children:[(0,qr.jsx)(Rl,{value:y,onChange:e=>j(e.target.value),placeholder:"e.g., Aaj kitne students present hain?",className:"flex-1",disabled:S}),(0,qr.jsx)(Dl,{type:"submit",disabled:S||!y.trim(),children:S?(0,qr.jsx)(lH,{className:"w-4 h-4 animate-spin"}):(0,qr.jsx)(sJ,{className:"w-4 h-4"})})]}),N&&(0,qr.jsx)("div",{className:"mt-4 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"p-2 bg-indigo-100 rounded-full",children:(0,qr.jsx)(th,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"text-indigo-900",children:N.response}),N.action_suggestion&&(0,qr.jsxs)(Dl,{variant:"link",className:"p-0 h-auto text-indigo-600 mt-2",children:[N.action_suggestion," ",(0,qr.jsx)(qc,{className:"w-4 h-4"})]})]})]})})]})]})]})}const TX="";function DX(){var e,t,a,n,r,i,l,o,c;const{user:d,schoolId:m,token:h}=Kr(),[p,x]=(0,s.useState)(!0),[f,g]=(0,s.useState)(null),[v,b]=(0,s.useState)([]),[y,j]=(0,s.useState)(null),[N,w]=(0,s.useState)(null),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),[P,O]=(0,s.useState)(!1),[M,T]=(0,s.useState)(""),[D,I]=(0,s.useState)([]),[R,L]=(0,s.useState)({student_id:"",academic_year:"",due_amount:"",fee_type:"tuition",description:"",remarks:""}),[F,z]=(0,s.useState)({payment_amount:"",payment_mode:"cash",transaction_id:"",allocations:[]});(0,s.useEffect)(()=>{m&&(B(),U())},[m]);const B=async()=>{try{x(!0);const[e,t]=await Promise.all([fetch("".concat(TX,"/api/multi-year-fees/summary/").concat(m)),fetch("".concat(TX,"/api/multi-year-fees/defaulters/").concat(m,"?min_amount=0"))]);if(e.ok){const t=await e.json();g(t)}if(t.ok){const e=await t.json();b(e.defaulters||[])}}catch(e){console.error("Error fetching data:",e),Qt.error("Data load nahi ho paya")}finally{x(!1)}},U=async()=>{try{const e=await fetch("".concat(TX,"/api/students?school_id=").concat(m),{headers:h?{Authorization:"Bearer ".concat(h)}:{}});if(e.ok){const t=await e.json();I(t||[])}}catch(e){console.error("Error fetching students:",e)}},H=async e=>{try{const t=await fetch("".concat(TX,"/api/multi-year-fees/student/").concat(e));if(t.ok){const e=await t.json();w(e)}}catch(t){Qt.error("Student dues load nahi ho paye")}},q=v.filter(e=>{var t,a;return(null===(t=e.student_name)||void 0===t?void 0:t.toLowerCase().includes(M.toLowerCase()))||(null===(a=e.student_id)||void 0===a?void 0:a.toLowerCase().includes(M.toLowerCase()))});return p?(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"multi-year-fees-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(rJ,{className:"w-7 h-7 text-red-500"}),"Previous Years Fee Dues"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Track and collect fees from 2-3 years back"})]}),(0,qr.jsxs)(Dl,{onClick:()=>_(!0),className:"bg-red-600 hover:bg-red-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Previous Year Due"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"border-red-200 bg-gradient-to-br from-red-50 to-rose-50",children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Total Pending"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold text-red-700",children:["\u20b9",((null===f||void 0===f?void 0:f.total_pending_all_years)||0).toLocaleString()]})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Th,{className:"w-6 h-6 text-red-600"})})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Students with Dues"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:(null===f||void 0===f?void 0:f.total_students_with_dues)||0})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-6 h-6 text-amber-600"})})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Years with Dues"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:(null===f||void 0===f?void 0:f.years_with_dues)||0})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(eh,{className:"w-6 h-6 text-blue-600"})})]})})}),(0,qr.jsx)(Qc,{className:"border-emerald-200 bg-gradient-to-br from-emerald-50 to-teal-50",children:(0,qr.jsx)(td,{className:"p-5",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-emerald-600 font-medium",children:"This Month Collection"}),(0,qr.jsx)("p",{className:"text-3xl font-bold text-emerald-700",children:"\u20b90"})]}),(0,qr.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-6 h-6 text-emerald-600"})})]})})})]}),(null===f||void 0===f||null===(e=f.year_wise_summary)||void 0===e?void 0:e.length)>0&&(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-5 h-5 text-indigo-600"}),"Year-wise Dues Summary"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.year_wise_summary.map((e,t)=>(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,qr.jsx)("span",{className:"text-lg font-bold text-slate-900",children:e.academic_year}),(0,qr.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.collection_percentage>=80?"bg-emerald-100 text-emerald-700":e.collection_percentage>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:[e.collection_percentage,"% collected"]})]}),(0,qr.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Total Dues:"}),(0,qr.jsxs)("span",{className:"font-medium",children:["\u20b9",e.total_dues.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Collected:"}),(0,qr.jsxs)("span",{className:"font-medium text-emerald-600",children:["\u20b9",e.collected.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Pending:"}),(0,qr.jsxs)("span",{className:"font-medium text-red-600",children:["\u20b9",e.pending.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Students:"}),(0,qr.jsx)("span",{className:"font-medium",children:e.students_with_dues})]})]})]},t))})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(kY,{className:"w-5 h-5 text-red-500"}),"Fee Defaulters"]}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{placeholder:"Search student...",className:"pl-10 w-64",value:M,onChange:e=>T(e.target.value)})]})]})}),(0,qr.jsx)(td,{children:0===q.length?(0,qr.jsxs)("div",{className:"text-center py-12",children:[(0,qr.jsx)(Km,{className:"w-16 h-16 text-emerald-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Koi previous year dues pending nahi hai! \ud83c\udf89"})]}):(0,qr.jsx)("div",{className:"divide-y divide-slate-100",children:q.map((e,t)=>{var a,s;return(0,qr.jsxs)("div",{className:"py-4 flex items-center justify-between hover:bg-slate-50 px-3 rounded-lg cursor-pointer transition-colors",onClick:()=>(async e=>{j(e),await H(e.student_id),A(!0)})(e),"data-testid":"defaulter-row-".concat(e.student_id),children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)("span",{className:"text-lg font-bold text-red-600",children:null===(a=e.student_name)||void 0===a?void 0:a.charAt(0)})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold text-slate-900",children:e.student_name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.student_id}),(0,qr.jsx)("div",{className:"flex gap-1 mt-1",children:null===(s=e.years_pending)||void 0===s?void 0:s.map((e,t)=>(0,qr.jsx)("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:e},t))})]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["\u20b9",e.total_dues.toLocaleString()]}),(0,qr.jsxs)("p",{className:"text-xs text-slate-400",children:["Oldest: ",e.oldest_due]}),(0,qr.jsx)(qc,{className:"w-5 h-5 text-slate-300 ml-auto mt-1"})]})]},t)})})})]}),(0,qr.jsx)(Im,{open:S,onOpenChange:_,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:"Add Previous Year Due"}),(0,qr.jsx)(qm,{children:"Add outstanding fees from previous academic years"})]}),(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Student *"}),(0,qr.jsxs)("select",{value:R.student_id,onChange:e=>L(t=>u(u({},t),{},{student_id:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"due-student-select",children:[(0,qr.jsx)("option",{value:"",children:"Select Student"}),D.map(e=>(0,qr.jsxs)("option",{value:e.student_id||e.id,children:[e.name," (",e.student_id||e.admission_no,")"]},e.id))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Academic Year *"}),(0,qr.jsxs)("select",{value:R.academic_year,onChange:e=>L(t=>u(u({},t),{},{academic_year:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3","data-testid":"due-year-select",children:[(0,qr.jsx)("option",{value:"",children:"Select Year"}),(()=>{const e=(new Date).getFullYear(),t=[];for(let a=0;a<4;a++){const s=e-a;t.push("".concat(s-1,"-").concat(String(s).slice(-2)))}return t})().map(e=>(0,qr.jsx)("option",{value:e,children:e},e))]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Fee Type"}),(0,qr.jsxs)("select",{value:R.fee_type,onChange:e=>L(t=>u(u({},t),{},{fee_type:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"tuition",children:"Tuition"}),(0,qr.jsx)("option",{value:"exam",children:"Exam"}),(0,qr.jsx)("option",{value:"transport",children:"Transport"}),(0,qr.jsx)("option",{value:"hostel",children:"Hostel"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Amount (\u20b9) *"}),(0,qr.jsx)(Rl,{type:"number",value:R.due_amount,onChange:e=>L(t=>u(u({},t),{},{due_amount:e.target.value})),placeholder:"5000","data-testid":"due-amount-input"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Description"}),(0,qr.jsx)(Rl,{value:R.description,onChange:e=>L(t=>u(u({},t),{},{description:e.target.value})),placeholder:"e.g., Tuition fee Q3 2023-24"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Remarks"}),(0,qr.jsx)(Rl,{value:R.remarks,onChange:e=>L(t=>u(u({},t),{},{remarks:e.target.value})),placeholder:"Any additional notes..."})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(R.student_id&&R.academic_year&&R.due_amount){O(!0);try{const e=await fetch("".concat(TX,"/api/multi-year-fees/add-due"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u(u({},R),{},{school_id:m,due_amount:parseFloat(R.due_amount)}))}),t=await e.json();e.ok&&t.success?(Qt.success(t.message||"Due added successfully!"),_(!1),L({student_id:"",academic_year:"",due_amount:"",fee_type:"tuition",description:"",remarks:""}),B()):Qt.error(t.detail||"Failed to add due")}catch(e){Qt.error("Error adding due")}finally{O(!1)}}else Qt.error("Please fill all required fields")},disabled:P,className:"bg-red-600 hover:bg-red-700","data-testid":"save-due-btn",children:[P&&(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}),"Add Due"]})]})]})]})}),(0,qr.jsx)(Im,{open:E,onOpenChange:A,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-5 h-5"}),null===y||void 0===y?void 0:y.student_name]}),(0,qr.jsx)(qm,{children:"Year-wise dues breakdown"})]}),N&&(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-red-50 rounded-xl",children:[(0,qr.jsx)("p",{className:"text-sm text-red-600",children:"Previous Years"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-red-700",children:["\u20b9",null===(t=N.summary)||void 0===t||null===(a=t.total_previous_years_pending)||void 0===a?void 0:a.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-amber-50 rounded-xl",children:[(0,qr.jsx)("p",{className:"text-sm text-amber-600",children:"Current Year"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-amber-700",children:["\u20b9",null===(n=N.summary)||void 0===n||null===(r=n.current_year_pending)||void 0===r?void 0:r.toLocaleString()]})]})]}),(0,qr.jsx)("div",{className:"p-4 bg-slate-900 rounded-xl text-white",children:(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsx)("span",{className:"text-slate-300",children:"Grand Total Pending"}),(0,qr.jsxs)("span",{className:"text-3xl font-bold",children:["\u20b9",null===(i=N.summary)||void 0===i||null===(l=i.grand_total_pending)||void 0===l?void 0:l.toLocaleString()]})]})}),(null===(o=N.year_wise_breakdown)||void 0===o?void 0:o.length)>0&&(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-700",children:"Year-wise Breakdown"}),N.year_wise_breakdown.map((e,t)=>{var a,s,n;return(0,qr.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,qr.jsx)("span",{className:"font-semibold text-slate-900",children:e.academic_year}),(0,qr.jsxs)("span",{className:"text-lg font-bold text-red-600",children:["\u20b9",null===(a=e.remaining)||void 0===a?void 0:a.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"text-sm text-slate-500",children:["Total: \u20b9",null===(s=e.total_due)||void 0===s?void 0:s.toLocaleString()," | Paid: \u20b9",null===(n=e.total_paid)||void 0===n?void 0:n.toLocaleString()]})]},t)})]}),(0,qr.jsxs)(Dl,{onClick:()=>{A(!1),(e=>{j(e);const t=[];if(null!==N&&void 0!==N&&N.year_wise_breakdown){let a=e.total_dues;for(const e of N.year_wise_breakdown.sort((e,t)=>e.academic_year.localeCompare(t.academic_year))){if(a<=0)break;const s=Math.min(a,e.remaining);t.push({year:e.academic_year,amount:s}),a-=s}}z({payment_amount:e.total_dues.toString(),payment_mode:"cash",transaction_id:"",allocations:t}),C(!0)})(y)},className:"w-full bg-emerald-600 hover:bg-emerald-700",children:[(0,qr.jsx)(Sh,{className:"w-4 h-4 mr-2"}),"Record Payment"]})]})]})}),(0,qr.jsx)(Im,{open:k,onOpenChange:C,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:"Record Payment"}),(0,qr.jsxs)(qm,{children:["Student: ",null===y||void 0===y?void 0:y.student_name," | Total Due: \u20b9",null===y||void 0===y||null===(c=y.total_dues)||void 0===c?void 0:c.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Payment Amount (\u20b9) *"}),(0,qr.jsx)(Rl,{type:"number",value:F.payment_amount,onChange:e=>z(t=>u(u({},t),{},{payment_amount:e.target.value})),placeholder:"Enter amount","data-testid":"payment-amount-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Payment Mode"}),(0,qr.jsxs)("select",{value:F.payment_mode,onChange:e=>z(t=>u(u({},t),{},{payment_mode:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"cash",children:"Cash"}),(0,qr.jsx)("option",{value:"online",children:"Online/UPI"}),(0,qr.jsx)("option",{value:"cheque",children:"Cheque"}),(0,qr.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Transaction ID (Optional)"}),(0,qr.jsx)(Rl,{value:F.transaction_id,onChange:e=>z(t=>u(u({},t),{},{transaction_id:e.target.value})),placeholder:"For online/cheque payments"})]}),F.allocations.length>0&&(0,qr.jsxs)("div",{className:"p-3 bg-emerald-50 rounded-lg",children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-emerald-700 mb-2",children:"Payment Allocation:"}),F.allocations.map((e,t)=>{var a;return(0,qr.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,qr.jsx)("span",{children:e.year}),(0,qr.jsxs)("span",{className:"font-medium",children:["\u20b9",null===(a=e.amount)||void 0===a?void 0:a.toLocaleString()]})]},t)})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(F.payment_amount&&0!==F.allocations.length){O(!0);try{const e=await fetch("".concat(TX,"/api/multi-year-fees/pay"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:y.student_id,school_id:m,payment_amount:parseFloat(F.payment_amount),payment_mode:F.payment_mode,transaction_id:F.transaction_id,allocations:F.allocations})}),t=await e.json();e.ok&&t.success?(Qt.success("Payment successful! Receipt: ".concat(t.receipt_no)),C(!1),z({payment_amount:"",payment_mode:"cash",transaction_id:"",allocations:[]}),B(),y&&H(y.student_id)):Qt.error(t.detail||"Payment failed")}catch(e){Qt.error("Payment error")}finally{O(!1)}}else Qt.error("Amount aur allocation specify karein")},disabled:P,className:"bg-emerald-600 hover:bg-emerald-700","data-testid":"confirm-payment-btn",children:[P&&(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}),"Confirm Payment"]})]})]})]})})]})}function IX(){var e,t,a,n,r,i,l,o,c,d,u,m,h,p,x,f,g,v,b,y,j,N,w,S,_,k,C,E,A,P,O,M,T,D;const{user:I,schoolId:R,token:L}=Kr(),[F,z]=(0,s.useState)(!0),[B,U]=(0,s.useState)(null),[H,q]=(0,s.useState)((new Date).getFullYear()),[V,W]=(0,s.useState)(!1),[G,K]=(0,s.useState)(null),[Y,J]=(0,s.useState)(!1);(0,s.useEffect)(()=>{null!==I&&void 0!==I&&I.id&&$()},[I,H]);const $=async()=>{try{z(!0);const e=null===I||void 0===I?void 0:I.id,t=await fetch("".concat("","/api/salary/status/").concat(e,"?year=").concat(H));if(t.ok){const e=await t.json();U(e)}else U({staff_id:e,staff_name:null===I||void 0===I?void 0:I.name,designation:(null===I||void 0===I?void 0:I.role)||"Teacher",year:H,salary_structure:{gross:35e3,net:32e3,deductions:3e3},summary:{total_paid_this_year:0,total_pending:0,months_paid:0,months_pending:0},monthly_breakdown:Q()})}catch(e){console.error("Error fetching salary status:",e),Qt.error("Salary data load nahi ho paya")}finally{z(!1)}},Q=()=>{const e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=(new Date).getMonth()+1,a=(new Date).getFullYear();return["01","02","03","04","05","06","07","08","09","10","11","12"].map((s,n)=>{const r=parseInt(s);let i="upcoming";return(H<a||H===a&&r<=t)&&!(H>a||H===a&&r>t)&&(i=Math.random()>.3?"credited":"due"),{month:"".concat(H,"-").concat(s),month_name:e[n],expected_salary:32e3,paid_amount:"credited"===i?32e3:0,status:i,payment_date:"credited"===i?"".concat(H,"-").concat(s,"-28"):null,transaction_id:"credited"===i?"TXN".concat(Math.random().toString(36).substr(2,8).toUpperCase()):null}})},X=async e=>{J(!0);try{const t=await fetch("".concat("","/api/salary/slip/").concat(e));if(t.ok){const e=await t.json();K(e),W(!0)}else Qt.error("Salary slip not found")}catch(t){K({slip_no:e,staff_name:null===I||void 0===I?void 0:I.name,month:"".concat(H,"-01"),payment_date:(new Date).toISOString(),earnings:{basic:25e3,hra:5e3,da:2500,ta:1500,medical:1e3,special:0,gross:35e3},deductions:{pf:2100,tax:800,other:100,total:3e3},net_salary:32e3,payment_mode:"bank_transfer",school:{name:"Schooltino Demo School",address:"MP, India"}}),W(!0)}finally{J(!1)}},Z=e=>{switch(e){case"credited":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"due":return"bg-red-100 text-red-700 border-red-200";case"upcoming":return"bg-slate-100 text-slate-500 border-slate-200";default:return"bg-slate-100 text-slate-500"}},ee=e=>{switch(e){case"credited":return(0,qr.jsx)(Km,{className:"w-5 h-5 text-emerald-600"});case"due":return(0,qr.jsx)(kY,{className:"w-5 h-5 text-red-500"});default:return(0,qr.jsx)(Ah,{className:"w-5 h-5 text-slate-400"})}};if(F)return(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-emerald-600"})});const te=(null===B||void 0===B||null===(e=B.monthly_breakdown)||void 0===e?void 0:e.filter(e=>"credited"===e.status).length)||0,ae=(null===B||void 0===B||null===(t=B.monthly_breakdown)||void 0===t?void 0:t.filter(e=>"due"===e.status).length)||0;return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"salary-tracking-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Zm,{className:"w-7 h-7 text-emerald-600"}),"My Salary"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Track your monthly salary status"})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)("select",{value:H,onChange:e=>q(parseInt(e.target.value)),className:"h-10 rounded-lg border border-slate-200 px-3",children:[2025,2024,2023,2022].map(e=>(0,qr.jsx)("option",{value:e,children:e},e))}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>{var e;const t=(null===B||void 0===B||null===(e=B.monthly_breakdown)||void 0===e?void 0:e.filter(e=>"credited"===e.status))||[];0!==t.length?(t.forEach(e=>{X(e.slip_no||"SLIP-".concat(e.month))}),Qt.success("Downloading ".concat(t.length," salary slips..."))):Qt.info("No paid salary slips to download")},"data-testid":"download-all-slips-btn",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download All Slips"]})]})]}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white border-0",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-emerald-100 text-sm",children:"Monthly Salary"}),(0,qr.jsxs)("p",{className:"text-4xl font-bold mt-1",children:["\u20b9",(null===B||void 0===B||null===(a=B.salary_structure)||void 0===a||null===(n=a.net)||void 0===n?void 0:n.toLocaleString())||"32,000"]}),(0,qr.jsxs)("p",{className:"text-emerald-200 text-sm mt-2",children:["Gross: \u20b9",(null===B||void 0===B||null===(r=B.salary_structure)||void 0===r||null===(i=r.gross)||void 0===i?void 0:i.toLocaleString())||"35,000"," | Deductions: \u20b9",(null===B||void 0===B||null===(l=B.salary_structure)||void 0===l||null===(o=l.deductions)||void 0===o?void 0:o.toLocaleString())||"3,000"]})]}),(0,qr.jsx)("div",{className:"w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,qr.jsx)(Sh,{className:"w-10 h-10"})})]})})}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Km,{className:"w-5 h-5 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Credited"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-emerald-600",children:[te," months"]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(kY,{className:"w-5 h-5 text-red-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Due"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-red-600",children:[ae," months"]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Mh,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Received"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-indigo-600",children:["\u20b9",(te*((null===B||void 0===B||null===(c=B.salary_structure)||void 0===c?void 0:c.net)||32e3)).toLocaleString()]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ah,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Pending"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-amber-600",children:["\u20b9",(ae*((null===B||void 0===B||null===(d=B.salary_structure)||void 0===d?void 0:d.net)||32e3)).toLocaleString()]})]})]})})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(eh,{className:"w-5 h-5 text-indigo-600"}),"Monthly Status - ",H]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:null===B||void 0===B||null===(u=B.monthly_breakdown)||void 0===u?void 0:u.map((e,t)=>{var a;return(0,qr.jsxs)("div",{className:"p-4 rounded-xl border-2 ".concat(Z(e.status)," transition-all hover:shadow-md cursor-pointer"),onClick:()=>"credited"===e.status&&X(e.slip_no||"SLIP-".concat(e.month)),"data-testid":"month-card-".concat(e.month),children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,qr.jsx)("span",{className:"font-semibold",children:e.month_name}),ee(e.status)]}),(0,qr.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",null===(a=e.expected_salary)||void 0===a?void 0:a.toLocaleString()]}),(0,qr.jsx)("div",{className:"mt-2",children:(0,qr.jsx)("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-medium uppercase ".concat("credited"===e.status?"bg-emerald-200 text-emerald-800":"due"===e.status?"bg-red-200 text-red-800":"bg-slate-200 text-slate-600"),children:e.status})}),"credited"===e.status&&e.payment_date&&(0,qr.jsxs)("p",{className:"text-xs mt-2 opacity-70",children:["Paid: ",new Date(e.payment_date).toLocaleDateString("en-IN")]}),"credited"===e.status&&(0,qr.jsxs)("div",{className:"flex items-center gap-1 mt-2 text-xs opacity-70",children:[(0,qr.jsx)(Ch,{className:"w-3 h-3"}),(0,qr.jsx)("span",{children:"Click for slip"})]})]},t)})})})]}),(0,qr.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-4 h-4 bg-emerald-100 border-2 border-emerald-300 rounded"}),(0,qr.jsx)("span",{className:"text-sm text-slate-600",children:"Credited"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-300 rounded"}),(0,qr.jsx)("span",{className:"text-sm text-slate-600",children:"Due/Pending"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-4 h-4 bg-slate-100 border-2 border-slate-300 rounded"}),(0,qr.jsx)("span",{className:"text-sm text-slate-600",children:"Upcoming"})]})]}),(0,qr.jsx)(Im,{open:V,onOpenChange:W,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-5 h-5 text-indigo-600"}),"Salary Slip"]}),(0,qr.jsxs)(qm,{children:[null===G||void 0===G?void 0:G.month," | ",null===G||void 0===G?void 0:G.slip_no]})]}),G&&(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"text-center pb-3 border-b",children:[(0,qr.jsx)("p",{className:"font-bold text-lg",children:null===(m=G.school)||void 0===m?void 0:m.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:null===(h=G.school)||void 0===h?void 0:h.address})]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Employee:"}),(0,qr.jsx)("span",{className:"font-medium",children:G.staff_name})]}),(0,qr.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Month:"}),(0,qr.jsx)("span",{className:"font-medium",children:G.month})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-emerald-700 mb-2",children:"Earnings"}),(0,qr.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"Basic Salary"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(p=G.earnings)||void 0===p||null===(x=p.basic)||void 0===x?void 0:x.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"HRA"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(f=G.earnings)||void 0===f||null===(g=f.hra)||void 0===g?void 0:g.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"Dearness Allowance"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(v=G.earnings)||void 0===v||null===(b=v.da)||void 0===b?void 0:b.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"Travel Allowance"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(y=G.earnings)||void 0===y||null===(j=y.ta)||void 0===j?void 0:j.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"Medical"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(N=G.earnings)||void 0===N||null===(w=N.medical)||void 0===w?void 0:w.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between font-semibold text-emerald-700 pt-2 border-t",children:[(0,qr.jsx)("span",{children:"Gross Salary"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(S=G.earnings)||void 0===S||null===(_=S.gross)||void 0===_?void 0:_.toLocaleString()]})]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-semibold text-red-700 mb-2",children:"Deductions"}),(0,qr.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"Provident Fund"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(k=G.deductions)||void 0===k||null===(C=k.pf)||void 0===C?void 0:C.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"Tax"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(E=G.deductions)||void 0===E||null===(A=E.tax)||void 0===A?void 0:A.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{children:"Other"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(P=G.deductions)||void 0===P||null===(O=P.other)||void 0===O?void 0:O.toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between font-semibold text-red-700 pt-2 border-t",children:[(0,qr.jsx)("span",{children:"Total Deductions"}),(0,qr.jsxs)("span",{children:["\u20b9",null===(M=G.deductions)||void 0===M||null===(T=M.total)||void 0===T?void 0:T.toLocaleString()]})]})]})]}),(0,qr.jsxs)("div",{className:"bg-emerald-600 text-white rounded-xl p-4 text-center",children:[(0,qr.jsx)("p",{className:"text-emerald-100 text-sm",children:"Net Salary"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold",children:["\u20b9",null===(D=G.net_salary)||void 0===D?void 0:D.toLocaleString()]})]}),(0,qr.jsxs)(Dl,{onClick:()=>{var e,t,a,s,n,r,i,l,o,c,d,u,m,h,p,x,f,g,v,b,y,j,N,w,S,_;if(!G)return;const k="\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n              SALARY SLIP - ".concat(G.month,"\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n").concat((null===(e=G.school)||void 0===e?void 0:e.name)||"School Name","\n").concat((null===(t=G.school)||void 0===t?void 0:t.address)||"","\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nEmployee: ").concat(G.staff_name,"\nSlip No: ").concat(G.slip_no,"\nMonth: ").concat(G.month,"\nPayment Date: ").concat(new Date(G.payment_date).toLocaleDateString("en-IN"),"\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nEARNINGS                          DEDUCTIONS\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                     \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nBasic:       \u20b9").concat(null===(a=G.earnings)||void 0===a||null===(s=a.basic)||void 0===s?void 0:s.toLocaleString(),"       PF:    \u20b9").concat(null===(n=G.deductions)||void 0===n||null===(r=n.pf)||void 0===r?void 0:r.toLocaleString(),"\nHRA:         \u20b9").concat(null===(i=G.earnings)||void 0===i||null===(l=i.hra)||void 0===l?void 0:l.toLocaleString(),"       Tax:   \u20b9").concat(null===(o=G.deductions)||void 0===o||null===(c=o.tax)||void 0===c?void 0:c.toLocaleString(),"\nDA:          \u20b9").concat(null===(d=G.earnings)||void 0===d||null===(u=d.da)||void 0===u?void 0:u.toLocaleString(),"       Other: \u20b9").concat(null===(m=G.deductions)||void 0===m||null===(h=m.other)||void 0===h?void 0:h.toLocaleString(),"\nTA:          \u20b9").concat(null===(p=G.earnings)||void 0===p||null===(x=p.ta)||void 0===x?void 0:x.toLocaleString(),"\nMedical:     \u20b9").concat(null===(f=G.earnings)||void 0===f||null===(g=f.medical)||void 0===g?void 0:g.toLocaleString(),"\nSpecial:     \u20b9").concat(null===(v=G.earnings)||void 0===v||null===(b=v.special)||void 0===b?void 0:b.toLocaleString(),"\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                     \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nGross:       \u20b9").concat(null===(y=G.earnings)||void 0===y||null===(j=y.gross)||void 0===j?void 0:j.toLocaleString(),"       Total: \u20b9").concat(null===(N=G.deductions)||void 0===N||null===(w=N.total)||void 0===w?void 0:w.toLocaleString(),"\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n              NET SALARY: \u20b9").concat(null===(S=G.net_salary)||void 0===S?void 0:S.toLocaleString(),"\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nPayment Mode: ").concat(null===(_=G.payment_mode)||void 0===_?void 0:_.replace("_"," ").toUpperCase(),"\n\nThis is a computer generated slip.\n    "),C=new Blob([k],{type:"text/plain"}),E=window.URL.createObjectURL(C),A=document.createElement("a");A.href=E,A.download="salary-slip-".concat(G.month,".txt"),A.click(),Qt.success("Salary slip downloaded!")},className:"w-full",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download Salary Slip"]})]})]})})]})}function RX(){var e,t;const{user:a,token:n}=Kr(),r=Se(),[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)({total_paid:0,total_pending:0}),m=(null===a||void 0===a?void 0:a.student_id)||(null===a||void 0===a?void 0:a.id);(0,s.useEffect)(()=>{m&&h()},[m]);const h=async()=>{try{l(!0);const e=await fetch("".concat("","/api/fee-payment/student/").concat(m,"/payments"),{headers:n?{Authorization:"Bearer ".concat(n)}:{}});if(e.ok){const t=await e.json();c(t.payments||[]),u({total_paid:t.total_paid||0,total_pending:t.total_pending||0})}else c([{id:"1",receipt_no:"RCP-2025-001",amount:15e3,date:"2025-01-03",fee_type:"Tuition Fee",payment_mode:"online",status:"success"},{id:"2",receipt_no:"RCP-2024-052",amount:5e3,date:"2024-12-15",fee_type:"Exam Fee",payment_mode:"cash",status:"success"},{id:"3",receipt_no:"RCP-2024-045",amount:2500,date:"2024-11-20",fee_type:"Transport Fee",payment_mode:"online",status:"success"}]),u({total_paid:22500,total_pending:5e3})}catch(e){console.error("Error fetching receipts:",e),Qt.error("Failed to load receipts")}finally{l(!1)}};return i?(0,qr.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,qr.jsx)(Bc,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-indigo-50 pb-20",children:[(0,qr.jsx)("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:(0,qr.jsxs)("div",{className:"max-w-lg mx-auto px-4 py-4 flex items-center gap-4",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>r("/studytino"),children:(0,qr.jsx)(Ym,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-lg font-bold text-slate-900",children:"My Fee Receipts"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Download payment receipts"})]})]})}),(0,qr.jsxs)("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-6",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-emerald-500 to-teal-500 text-white border-0",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Km,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-emerald-100 text-xs",children:"Total Paid"}),(0,qr.jsxs)("p",{className:"text-xl font-bold",children:["\u20b9",null===(e=d.total_paid)||void 0===e?void 0:e.toLocaleString()]})]})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500 to-orange-500 text-white border-0",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ah,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-amber-100 text-xs",children:"Pending"}),(0,qr.jsxs)("p",{className:"text-xl font-bold",children:["\u20b9",null===(t=d.total_pending)||void 0===t?void 0:t.toLocaleString()]})]})]})})})]}),(0,qr.jsxs)(Dl,{onClick:()=>{var e,t;if(0===o.length)return void Qt.info("No receipts to download");let s="\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n              ALL FEE RECEIPTS - ".concat((null===a||void 0===a?void 0:a.name)||"Student","\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nTotal Paid: \u20b9").concat(null===(e=d.total_paid)||void 0===e?void 0:e.toLocaleString(),"\nTotal Pending: \u20b9").concat(null===(t=d.total_pending)||void 0===t?void 0:t.toLocaleString(),"\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n");o.forEach((e,t)=>{var a;s+="\n".concat(t+1,". Receipt: ").concat(e.receipt_no,"\n   Date: ").concat(new Date(e.date).toLocaleDateString("en-IN"),"\n   Fee Type: ").concat(e.fee_type,"\n   Amount: \u20b9").concat(null===(a=e.amount)||void 0===a?void 0:a.toLocaleString(),"\n   Payment Mode: ").concat(e.payment_mode,"\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n")}),s+="\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n          Downloaded from StudyTino Portal\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n";const n=new Blob([s],{type:"text/plain"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="All_Fee_Receipts_".concat((new Date).toISOString().split("T")[0],".txt"),i.click(),Qt.success("All receipts downloaded!")},className:"w-full bg-indigo-600 hover:bg-indigo-700","data-testid":"download-all-receipts-btn",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download All Receipts"]}),(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("h2",{className:"text-sm font-semibold text-slate-500 flex items-center gap-2",children:[(0,qr.jsx)(Ch,{className:"w-4 h-4"}),"Payment History"]}),0===o.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-8 text-center",children:[(0,qr.jsx)(Ch,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No receipts found"})]})}):o.map((e,t)=>{var s;return(0,qr.jsx)(Qc,{className:"hover:shadow-md transition-shadow","data-testid":"receipt-card-".concat(e.receipt_no),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ch,{className:"w-6 h-6 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold text-slate-900",children:e.fee_type}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.receipt_no}),(0,qr.jsxs)("p",{className:"text-xs text-slate-400 flex items-center gap-1",children:[(0,qr.jsx)(eh,{className:"w-3 h-3"}),new Date(e.date).toLocaleDateString("en-IN")]})]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"text-lg font-bold text-emerald-600",children:["\u20b9",null===(s=e.amount)||void 0===s?void 0:s.toLocaleString()]}),(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:()=>(e=>{var t,s,n;const r="\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n                    FEE RECEIPT\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nReceipt No: ".concat(e.receipt_no,"\nDate: ").concat(new Date(e.date).toLocaleDateString("en-IN"),"\n\nStudent: ").concat((null===a||void 0===a?void 0:a.name)||"Student","\nClass: ").concat((null===a||void 0===a?void 0:a.class_name)||(null===a||void 0===a?void 0:a.class_id)||"N/A","\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nFee Type: ").concat(e.fee_type,"\nAmount: \u20b9").concat(null===(t=e.amount)||void 0===t?void 0:t.toLocaleString(),"\nPayment Mode: ").concat(null===(s=e.payment_mode)||void 0===s?void 0:s.toUpperCase(),"\nStatus: ").concat(null===(n=e.status)||void 0===n?void 0:n.toUpperCase(),"\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n             Thank you for your payment!\n        For queries: Contact school office\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n    "),i=new Blob([r],{type:"text/plain"}),l=window.URL.createObjectURL(i),o=document.createElement("a");o.href=l,o.download="".concat(e.receipt_no,".txt"),o.click(),Qt.success("Receipt downloaded!")})(e),className:"mt-2",children:[(0,qr.jsx)(xh,{className:"w-3 h-3 mr-1"}),"Download"]})]})]})})},t)})]}),(0,qr.jsxs)(Dl,{onClick:()=>r("/studytino/fees"),variant:"outline",className:"w-full border-amber-300 text-amber-700 hover:bg-amber-50",children:[(0,qr.jsx)(Zm,{className:"w-4 h-4 mr-2"}),"Pay Pending Fees"]})]})]})}const LX="".concat("","/api"),FX={dashboard:{icon:wJ,label:"Dashboard",color:"bg-blue-500"},students:{icon:Lc,label:"Students",color:"bg-emerald-500"},staff:{icon:kh,label:"Staff",color:"bg-purple-500"},classes:{icon:Fc,label:"Classes",color:"bg-amber-500"},attendance:{icon:gJ,label:"Attendance",color:"bg-rose-500"},fees:{icon:Zm,label:"Fees",color:"bg-green-500"},notices:{icon:Oh,label:"Notices",color:"bg-orange-500"},ai_paper:{icon:hh,label:"AI Paper",color:"bg-indigo-500"},ai_content:{icon:th,label:"AI Content",color:"bg-pink-500"},leave_management:{icon:eh,label:"Leave",color:"bg-cyan-500"},meetings:{icon:ah,label:"Meetings",color:"bg-violet-500"},gallery:{icon:Ph,label:"Gallery",color:"bg-teal-500"},cctv:{icon:ah,label:"CCTV",color:"bg-red-500"},transport:{icon:nh,label:"Transport",color:"bg-yellow-500"},health:{icon:rh,label:"Health",color:"bg-pink-500"},biometric:{icon:lh,label:"Biometric",color:"bg-slate-500"},front_office:{icon:EX,label:"Front Office",color:"bg-lime-500"},school_analytics:{icon:oh,label:"Analytics",color:"bg-blue-600"},user_management:{icon:Rc,label:"User Mgmt",color:"bg-purple-600"},settings:{icon:wh,label:"Settings",color:"bg-gray-500"}};function zX(){var e;const t=Se(),{user:a,logout:n}=Kr(),[r,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)("overview"),[c,d]=(0,s.useState)({}),[m,h]=(0,s.useState)(null),[p,x]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,b]=(0,s.useState)([]),[y,j]=(0,s.useState)([]),[N,w]=(0,s.useState)(null),[S,_]=(0,s.useState)(""),[k,C]=(0,s.useState)(!1),E="director"===(null===a||void 0===a?void 0:a.role),A="principal"===(null===a||void 0===a?void 0:a.role)||"vice_principal"===(null===a||void 0===a?void 0:a.role),P=(null===a||void 0===a||a.role,["admin_staff","clerk","admission_staff"].includes(null===a||void 0===a?void 0:a.role),"accountant"===(null===a||void 0===a?void 0:a.role)),O=f.length>0||(null===a||void 0===a?void 0:a.can_teach),M=E||A||c.user_management||c.school_analytics;(0,s.useEffect)(()=>{T(),D();localStorage.getItem("teachtino_welcome_seen")||(C(!0),localStorage.setItem("teachtino_welcome_seen","true"))},[]);const T=async()=>{try{const e=await Hr.get("".concat(LX,"/permissions/my"));d(e.data.permissions||{})}catch(e){console.error("Error fetching permissions:",e),E&&d({dashboard:!0,students:!0,staff:!0,classes:!0,attendance:!0,fees:!0,notices:!0,ai_paper:!0,ai_content:!0,meetings:!0,gallery:!0,cctv:!0,school_analytics:!0,user_management:!0,settings:!0})}},D=async()=>{i(!0);try{const[t,s,n,r]=await Promise.allSettled([Hr.get("".concat(LX,"/classes")),Hr.get("".concat(LX,"/notices?limit=5")),Hr.get("".concat(LX,"/leave/pending")),Hr.get("".concat(LX,"/users/").concat(null===a||void 0===a?void 0:a.id,"/assigned-classes")).catch(()=>({data:{classes:[]}}))]);var e;if("fulfilled"===t.status&&x(t.value.data||[]),"fulfilled"===s.status&&b(s.value.data||[]),"fulfilled"===n.status&&j(n.value.data||[]),"fulfilled"===r.status)g((null===(e=r.value.data)||void 0===e?void 0:e.classes)||[]);h({total_students:450,total_staff:35,present_today:420,pending_fees:"\u20b92,45,000",my_classes:p.length})}catch(t){console.error("Dashboard fetch error:",t)}finally{i(!1)}},I=e=>!!E||!0===c[e];return r?(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(Bc,{className:"w-12 h-12 animate-spin text-indigo-500 mx-auto"}),(0,qr.jsx)("p",{className:"mt-4 text-slate-300 font-medium",children:"Loading Unified Portal..."})]})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900","data-testid":"unified-portal",children:[(0,qr.jsx)("header",{className:"sticky top-0 z-50 bg-slate-900/90 backdrop-blur-xl border-b border-slate-700/50",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-3",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(Ic,{className:"w-6 h-6 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"font-bold text-lg text-white",children:"Schooltino Portal"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(eJ,{className:"".concat({director:"bg-purple-500",principal:"bg-blue-500",vice_principal:"bg-emerald-500",co_director:"bg-violet-500",admin_staff:"bg-amber-500",accountant:"bg-green-500",teacher:"bg-cyan-500"}[null===a||void 0===a?void 0:a.role]||"bg-slate-500"," text-white text-xs"),children:(()=>{var e;return{director:"Director",principal:"Principal",vice_principal:"Vice Principal",co_director:"Co-Director",admin_staff:"Admin Staff",accountant:"Accountant",admission_staff:"Admission Staff",clerk:"Clerk",teacher:"Teacher"}[null===a||void 0===a?void 0:a.role]||(null===a||void 0===a||null===(e=a.role)||void 0===e?void 0:e.replace("_"," "))})()}),O&&(0,qr.jsxs)(eJ,{variant:"outline",className:"text-emerald-400 border-emerald-500 text-xs",children:[(0,qr.jsx)(Fc,{className:"w-3 h-3 mr-1"}),"Teaching"]}),M&&(0,qr.jsxs)(eJ,{variant:"outline",className:"text-amber-400 border-amber-500 text-xs",children:[(0,qr.jsx)(Rc,{className:"w-3 h-3 mr-1"}),"Admin"]})]})]})]}),(0,qr.jsx)("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:(0,qr.jsxs)("div",{className:"relative w-full",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{placeholder:"Search students, staff, notices...",value:S,onChange:e=>_(e.target.value),className:"pl-10 bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]})}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsxs)(Dl,{variant:"ghost",size:"sm",className:"text-slate-300 hover:text-white hover:bg-slate-800",onClick:()=>t("/app/dashboard"),children:[(0,qr.jsx)(wJ,{className:"w-4 h-4 mr-2"}),"Full Dashboard"]}),(0,qr.jsx)(Dl,{onClick:()=>{n(),t("/login")},variant:"ghost",size:"sm",className:"text-rose-400 hover:text-rose-300 hover:bg-rose-500/10",children:(0,qr.jsx)(rH,{className:"w-4 h-4"})})]})]})})}),(0,qr.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,qr.jsxs)("div",{className:"mb-8",children:[(0,qr.jsxs)("h2",{className:"text-2xl font-bold text-white mb-2",children:["Namaste, ",null===a||void 0===a||null===(e=a.name)||void 0===e?void 0:e.split(" ")[0],"! \ud83d\ude4f"]}),(0,qr.jsx)("p",{className:"text-slate-400",children:(new Date).toLocaleDateString("hi-IN",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),(0,qr.jsxs)(wc,{defaultValue:"overview",className:"space-y-6",children:[(0,qr.jsxs)(Sc,{className:"bg-slate-800/50 border border-slate-700 p-1",children:[(0,qr.jsxs)(_c,{value:"overview",className:"data-[state=active]:bg-indigo-600 text-slate-300 data-[state=active]:text-white",children:[(0,qr.jsx)(aJ,{className:"w-4 h-4 mr-2"}),"Overview"]}),O&&(0,qr.jsxs)(_c,{value:"teaching",className:"data-[state=active]:bg-emerald-600 text-slate-300 data-[state=active]:text-white",children:[(0,qr.jsx)(Fc,{className:"w-4 h-4 mr-2"}),"Teaching"]}),M&&(0,qr.jsxs)(_c,{value:"admin",className:"data-[state=active]:bg-amber-600 text-slate-300 data-[state=active]:text-white",children:[(0,qr.jsx)(Rc,{className:"w-4 h-4 mr-2"}),"Admin"]}),P&&(0,qr.jsxs)(_c,{value:"accounts",className:"data-[state=active]:bg-green-600 text-slate-300 data-[state=active]:text-white",children:[(0,qr.jsx)(kQ,{className:"w-4 h-4 mr-2"}),"Accounts"]}),(0,qr.jsxs)(_c,{value:"quick-actions",className:"data-[state=active]:bg-purple-600 text-slate-300 data-[state=active]:text-white",children:[(0,qr.jsx)(nJ,{className:"w-4 h-4 mr-2"}),"Quick Actions"]})]}),(0,qr.jsxs)(kc,{value:"overview",className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[I("students")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 hover:border-indigo-500/50 transition-all cursor-pointer",onClick:()=>t("/app/students"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"Total Students"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===m||void 0===m?void 0:m.total_students)||0})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-5 h-5 text-blue-400"})})]})})}),I("staff")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 hover:border-purple-500/50 transition-all cursor-pointer",onClick:()=>t("/app/staff"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"Total Staff"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===m||void 0===m?void 0:m.total_staff)||0})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(kh,{className:"w-5 h-5 text-purple-400"})})]})})}),I("attendance")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 hover:border-emerald-500/50 transition-all cursor-pointer",onClick:()=>t("/app/attendance"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"Present Today"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:(null===m||void 0===m?void 0:m.present_today)||0})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Km,{className:"w-5 h-5 text-emerald-400"})})]})})}),I("fees")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 hover:border-rose-500/50 transition-all cursor-pointer",onClick:()=>t("/app/fees"),children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"Pending Fees"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-rose-400",children:(null===m||void 0===m?void 0:m.pending_fees)||"\u20b90"})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-rose-500/20 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Zm,{className:"w-5 h-5 text-rose-400"})})]})})})]}),(0,qr.jsxs)(Qc,{className:"bg-slate-800/50 border-slate-700",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-white flex items-center gap-2",children:[(0,qr.jsx)(Oh,{className:"w-5 h-5 text-amber-400"}),"Recent Notices"]})}),(0,qr.jsx)(td,{children:0===v.length?(0,qr.jsx)("p",{className:"text-slate-400 text-center py-4",children:"No recent notices"}):(0,qr.jsx)("div",{className:"space-y-3",children:v.slice(0,3).map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-900/50 rounded-lg",children:[(0,qr.jsx)("div",{className:"w-2 h-2 mt-2 bg-amber-400 rounded-full"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-white font-medium",children:e.title}),(0,qr.jsx)("p",{className:"text-slate-400 text-sm line-clamp-2",children:e.content})]})]},t))})})]}),(0,qr.jsxs)(Qc,{className:"bg-slate-800/50 border-slate-700",children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsx)(Zc,{className:"text-white",children:"Your Modules"}),(0,qr.jsx)(ed,{className:"text-slate-400",children:"Click to access - permissions ke hisaab se modules dikhaye gaye hain"})]}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:(()=>{const e=[];return Object.keys(FX).forEach(t=>{I(t)&&e.push(u({key:t},FX[t]))}),e})().map(e=>(0,qr.jsxs)("button",{onClick:()=>t("/app/".concat(e.key.replace("_","-"))),className:"flex flex-col items-center gap-2 p-4 bg-slate-900/50 rounded-xl hover:bg-slate-700/50 transition-all group","data-testid":"module-".concat(e.key),children:[(0,qr.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform"),children:(0,qr.jsx)(e.icon,{className:"w-5 h-5 text-white"})}),(0,qr.jsx)("span",{className:"text-xs text-slate-300 text-center",children:e.label})]},e.key))})})]})]}),O&&(0,qr.jsxs)(kc,{value:"teaching",className:"space-y-6",children:[(0,qr.jsxs)(Qc,{className:"bg-slate-800/50 border-slate-700",children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"text-white flex items-center gap-2",children:[(0,qr.jsx)(Fc,{className:"w-5 h-5 text-emerald-400"}),"My Classes"]}),(0,qr.jsxs)(ed,{className:"text-slate-400",children:["Aapko ",f.length||p.length," classes assign hain"]})]}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:(f.length>0?p.filter(e=>f.includes(e.id)):p.slice(0,6)).map(e=>(0,qr.jsxs)("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-700 hover:border-emerald-500/50 cursor-pointer transition-all",onClick:()=>t("/app/classes/".concat(e.id)),children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,qr.jsx)("h4",{className:"font-semibold text-white",children:e.name}),(0,qr.jsx)(eJ,{variant:"outline",className:"text-slate-400 border-slate-600",children:e.section||"A"})]}),(0,qr.jsx)("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4"}),e.student_count||0," students"]})})]},e.id))})})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-emerald-600 to-teal-700 border-0 cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>t("/app/attendance"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(gJ,{className:"w-8 h-8 text-white/80 mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Mark Attendance"}),(0,qr.jsx)("p",{className:"text-emerald-100 text-sm",children:"Aaj ki attendance lagayein"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-indigo-600 to-purple-700 border-0 cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>t("/app/ai-paper"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(hh,{className:"w-8 h-8 text-white/80 mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white",children:"AI Paper Generate"}),(0,qr.jsx)("p",{className:"text-indigo-100 text-sm",children:"Automatic question paper banayein"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-600 to-orange-700 border-0 cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>t("/app/notices"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(Oh,{className:"w-8 h-8 text-white/80 mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Send Notice"}),(0,qr.jsx)("p",{className:"text-amber-100 text-sm",children:"Class ko notice bhejein"})]})})]})]}),M&&(0,qr.jsxs)(kc,{value:"admin",className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[I("user_management")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 cursor-pointer hover:border-purple-500/50 transition-all",onClick:()=>t("/app/users"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(Rc,{className:"w-8 h-8 text-purple-400 mb-3"}),(0,qr.jsx)("h3",{className:"font-semibold text-white",children:"User Management"}),(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"Staff accounts manage karein"})]})}),I("students")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 cursor-pointer hover:border-blue-500/50 transition-all",onClick:()=>t("/app/students"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(Lc,{className:"w-8 h-8 text-blue-400 mb-3"}),(0,qr.jsx)("h3",{className:"font-semibold text-white",children:"Students"}),(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"Student records manage karein"})]})}),I("staff")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 cursor-pointer hover:border-emerald-500/50 transition-all",onClick:()=>t("/app/staff"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(kh,{className:"w-8 h-8 text-emerald-400 mb-3"}),(0,qr.jsx)("h3",{className:"font-semibold text-white",children:"Staff"}),(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"Staff records manage karein"})]})}),I("school_analytics")&&(0,qr.jsx)(Qc,{className:"bg-slate-800/50 border-slate-700 cursor-pointer hover:border-amber-500/50 transition-all",onClick:()=>t("/app/school-analytics"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(oh,{className:"w-8 h-8 text-amber-400 mb-3"}),(0,qr.jsx)("h3",{className:"font-semibold text-white",children:"Analytics"}),(0,qr.jsx)("p",{className:"text-slate-400 text-sm",children:"School reports dekhein"})]})})]}),(E||A)&&y.length>0&&(0,qr.jsxs)(Qc,{className:"bg-slate-800/50 border-slate-700",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-white flex items-center gap-2",children:[(0,qr.jsx)(QU,{className:"w-5 h-5 text-amber-400"}),"Pending Approvals (",y.length,")"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-3",children:y.slice(0,3).map(e=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-white font-medium",children:e.user_name||"Staff"}),(0,qr.jsxs)("p",{className:"text-slate-400 text-sm",children:[e.leave_type," Leave - ",e.reason]})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",children:(0,qr.jsx)(Km,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{size:"sm",variant:"destructive",children:(0,qr.jsx)(eY,{className:"w-4 h-4"})})]})]},e.id))})})]})]}),P&&(0,qr.jsx)(kc,{value:"accounts",className:"space-y-6",children:(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-green-600 to-emerald-700 border-0 cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>t("/app/fees"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(Zm,{className:"w-8 h-8 text-white/80 mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Fee Collection"}),(0,qr.jsx)("p",{className:"text-green-100 text-sm",children:"Fee records manage karein"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-600 to-indigo-700 border-0 cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>t("/app/salary"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(kQ,{className:"w-8 h-8 text-white/80 mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Salary Management"}),(0,qr.jsx)("p",{className:"text-blue-100 text-sm",children:"Staff salaries manage karein"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-600 to-violet-700 border-0 cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>t("/app/accountant"),children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)(th,{className:"w-8 h-8 text-white/80 mb-3"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white",children:"AI Accountant"}),(0,qr.jsx)("p",{className:"text-purple-100 text-sm",children:"AI-powered financial insights"})]})})]})}),(0,qr.jsx)(kc,{value:"quick-actions",className:"space-y-6",children:(0,qr.jsxs)(Qc,{className:"bg-slate-800/50 border-slate-700",children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsx)(Zc,{className:"text-white",children:"Quick Actions"}),(0,qr.jsx)(ed,{className:"text-slate-400",children:"Frequently used features - ek click mein access karein"})]}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[I("attendance")&&(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-emerald-600 hover:bg-emerald-700",onClick:()=>t("/app/attendance"),children:[(0,qr.jsx)(gJ,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Mark Attendance"})]}),I("notices")&&(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-amber-600 hover:bg-amber-700",onClick:()=>t("/app/notices"),children:[(0,qr.jsx)(Oh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Send Notice"})]}),I("ai_paper")&&(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-indigo-600 hover:bg-indigo-700",onClick:()=>t("/app/ai-paper"),children:[(0,qr.jsx)(hh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"AI Paper"})]}),I("leave_management")&&(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-cyan-600 hover:bg-cyan-700",onClick:()=>t("/app/leave"),children:[(0,qr.jsx)(eh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Apply Leave"})]}),I("fees")&&(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-green-600 hover:bg-green-700",onClick:()=>t("/app/fees"),children:[(0,qr.jsx)(Zm,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Collect Fee"})]}),I("students")&&(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-blue-600 hover:bg-blue-700",onClick:()=>t("/app/students"),children:[(0,qr.jsx)(kh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Add Student"})]}),(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-purple-600 hover:bg-purple-700",onClick:()=>t("/app/voice-assistant"),children:[(0,qr.jsx)(lJ,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Ask Tino"})]}),(0,qr.jsxs)(Dl,{className:"h-auto p-4 flex flex-col items-center gap-2 bg-slate-600 hover:bg-slate-700",onClick:()=>t("/app/settings"),children:[(0,qr.jsx)(wh,{className:"w-6 h-6"}),(0,qr.jsx)("span",{children:"Settings"})]})]})})]})})]})]}),(0,qr.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 md:hidden z-50",children:(0,qr.jsxs)("div",{className:"grid grid-cols-5 gap-1 p-2",children:[(0,qr.jsxs)("button",{onClick:()=>t("/portal"),className:"flex flex-col items-center gap-1 p-2 text-indigo-400",children:[(0,qr.jsx)(aJ,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Home"})]}),O&&(0,qr.jsxs)("button",{onClick:()=>t("/app/attendance"),className:"flex flex-col items-center gap-1 p-2 text-slate-400 hover:text-white",children:[(0,qr.jsx)(gJ,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Attendance"})]}),(0,qr.jsxs)("button",{onClick:()=>t("/app/notices"),className:"flex flex-col items-center gap-1 p-2 text-slate-400 hover:text-white",children:[(0,qr.jsx)(Oh,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Notices"})]}),(0,qr.jsxs)("button",{onClick:()=>t("/app/voice-assistant"),className:"flex flex-col items-center gap-1 p-2 text-slate-400 hover:text-white",children:[(0,qr.jsx)(lJ,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Ask Tino"})]}),(0,qr.jsxs)("button",{onClick:()=>t("/app/dashboard"),className:"flex flex-col items-center gap-1 p-2 text-slate-400 hover:text-white",children:[(0,qr.jsx)(wJ,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-xs",children:"Full"})]})]})}),(0,qr.jsx)(Im,{open:k,onOpenChange:C,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2 text-xl",children:[(0,qr.jsx)("span",{className:"text-2xl",children:"\ud83c\udf93"}),"TeachTino \u092e\u0947\u0902 \u0906\u092a\u0915\u093e \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948!"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("p",{className:"text-slate-600",children:["\u0928\u092e\u0938\u094d\u0924\u0947 ",(null===a||void 0===a?void 0:a.name)||"Teacher","! TeachTino \u0906\u092a\u0915\u0947 teaching \u0915\u094b \u0906\u0938\u093e\u0928 \u0914\u0930 productive \u092c\u0928\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0939\u0948\u0964"]}),(0,qr.jsxs)("div",{className:"space-y-3 bg-emerald-50 rounded-xl p-4",children:[(0,qr.jsx)("h4",{className:"font-semibold text-emerald-800",children:"\u0906\u092a \u092f\u0939\u093e\u0901 \u0915\u094d\u092f\u093e-\u0915\u094d\u092f\u093e \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:"}),(0,qr.jsxs)("div",{className:"grid gap-2",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"AI \u0938\u0947 Question Paper \u092c\u0928\u093e\u090f\u0902 (2 \u092e\u093f\u0928\u091f \u092e\u0947\u0902!)"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Attendance mark \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Students \u0915\u0940 Performance track \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Homework \u0914\u0930 Assignments assign \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"AI \u0938\u0947 Lesson Plans generate \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Events \u0914\u0930 Pamphlets design \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)(Km,{className:"w-4 h-4 text-green-500"}),(0,qr.jsx)("span",{children:"Voice \u092e\u0947\u0902 commands \u0926\u0947\u0902 (Hindi/English)"})]})]})]}),(0,qr.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-sm",children:(0,qr.jsxs)("p",{className:"text-amber-800",children:[(0,qr.jsx)("strong",{children:"\ud83d\udca1 Tip:"}),' "Ask Tino" button \u0938\u0947 AI \u0938\u0947 \u0915\u0941\u091b \u092d\u0940 \u092a\u0942\u091b \u0938\u0915\u0924\u0947 \u0939\u0948\u0902!']})}),(0,qr.jsx)(Dl,{onClick:()=>C(!1),className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"\u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902 \u2192"})]})]})})]})}const BX="".concat("","/api"),UX={critical:"bg-red-500 text-white",high:"bg-orange-500 text-white",medium:"bg-yellow-500 text-black",low:"bg-blue-500 text-white"};function HX(){var e,t,a,n;const{user:r,schoolId:i}=Kr(),l=Se(),{t:o}=js(),[c,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[x,f]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[b,y]=(0,s.useState)([]),[j,N]=(0,s.useState)(""),[w,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)("disabled"),[A,P]=(0,s.useState)(!1),[O,M]=(0,s.useState)([]),T=(0,s.useRef)(null),D=(0,s.useRef)(null),I=(0,s.useRef)([]),R=(0,s.useRef)(null),L=(0,s.useRef)(null);(0,s.useEffect)(()=>{F(),z();const e=setInterval(F,3e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{var e;null===(e=T.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[b]);const F=async()=>{try{const[e,t,a,s]=await Promise.allSettled([Hr.get("".concat(BX,"/tino-brain/status")),Hr.get("".concat(BX,"/tino-brain/dashboard-insights/").concat(i||"default","?role=").concat(null===r||void 0===r?void 0:r.role)),Hr.get("".concat(BX,"/tino-brain/alerts/").concat(i||"default")),Hr.get("".concat(BX,"/tino-brain/location-tracking/").concat(i||"default"))]);"fulfilled"===e.status&&m(e.value.data),"fulfilled"===t.status&&p(t.value.data),"fulfilled"===a.status&&f(a.value.data.alerts||[]),"fulfilled"===s.status&&v(s.value.data.tracking||[])}catch($1){console.error("Fetch error:",$1)}finally{d(!1)}},z=async()=>{try{const e=await Hr.get("".concat(BX,"/tino-brain/chat-sessions/").concat(null===r||void 0===r?void 0:r.id,"?school_id=").concat(i||"default"));M(e.data.sessions||[])}catch($1){console.error("Chat sessions fetch error:",$1)}},B=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;y(s=>[...s,{type:e,text:t,data:a,time:new Date}])},U=()=>{const e=localStorage.getItem("i18nextLng")||"en";return"hi"===e?"hindi":"hinglish"===e?"hinglish":"english"},H=async e=>{k(!0);try{const t=(await Hr.post("".concat(BX,"/tino-brain/query"),{query:e,school_id:i||"default",user_id:(null===r||void 0===r?void 0:r.id)||"",user_role:(null===r||void 0===r?void 0:r.role)||"director",user_name:(null===r||void 0===r?void 0:r.name)||"User",voice_gender:C,language:U()})).data;B("ai",t.message,t.data),t.audio_base64&&q(t.audio_base64),t.action_taken&&F()}catch($1){B("ai","Kuch gadbad ho gayi. Dobara try karein."),Qt.error("Query failed")}finally{k(!1)}},q=e=>{try{R.current&&R.current.pause();const t=new Audio("data:audio/mpeg;base64,".concat(e));R.current=t,t.play().catch(console.error)}catch($1){console.error("Audio error:",$1)}},V=(0,s.useCallback)(async()=>{if(!_)try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});L.current=e,D.current=new MediaRecorder(e,{mimeType:"audio/webm"}),I.current=[],D.current.ondataavailable=e=>{e.data.size>0&&I.current.push(e.data)},D.current.onstop=async()=>{const e=new Blob(I.current,{type:"audio/webm"});L.current&&(L.current.getTracks().forEach(e=>e.stop()),L.current=null),await G(e)},D.current.start(),S(!0),Qt.info("\ud83c\udfa4 Bol rahe ho... Chhod do jab ho jaye",{duration:2e3})}catch($1){Qt.error("Microphone access denied")}},[_]),W=(0,s.useCallback)(()=>{var e;"inactive"!==(null===(e=D.current)||void 0===e?void 0:e.state)&&(D.current.stop(),S(!1),Qt.info("\ud83d\udd04 Processing...",{duration:1e3}))},[]),G=async e=>{k(!0);try{const t=new FormData;t.append("audio_file",e,"recording.webm"),t.append("language","hi");const a=(await Hr.post("".concat(BX,"/voice-assistant/transcribe"),t)).data.transcribed_text;null!==a&&void 0!==a&&a.trim()?(B("user",a),await H(a)):B("ai","Sun nahi paya. Dobara bolein.")}catch($1){B("ai","Voice processing mein problem hui.")}finally{k(!1)}},K=e=>{B("user",e),H(e)};return c?(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-purple-50 flex items-center justify-center",children:(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(th,{className:"w-16 h-16 text-indigo-600 mx-auto animate-pulse"}),(0,qr.jsx)("p",{className:"mt-4 text-slate-700 font-medium",children:"Loading Tino Brain..."})]})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-purple-50 p-4 md:p-6","data-testid":"tino-brain-dashboard",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>l("/app/dashboard"),className:"text-slate-600",children:(0,qr.jsx)(Ym,{className:"w-5 h-5"})}),(0,qr.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,qr.jsx)(th,{className:"w-8 h-8 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:["Tino Brain",(0,qr.jsx)(eJ,{className:"bg-green-500 text-white text-xs",children:"active"===(null===u||void 0===u?void 0:u.status)?"Active":"Online"})]}),(0,qr.jsx)("p",{className:"text-slate-500 text-sm",children:"Your School's AI Intelligence System"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:F,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:()=>E(e=>"male"===e?"female":"male"),children:[(0,qr.jsx)(eH,{className:"w-4 h-4 mr-2"}),"male"===C?"Male Voice":"Female Voice"]})]})]}),(0,qr.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,qr.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-white border-0 shadow-sm",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-500 text-xs",children:"Students"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(null===h||void 0===h||null===(e=h.school_overview)||void 0===e?void 0:e.total_students)||0})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Lc,{className:"w-5 h-5 text-blue-600"})})]})})}),(0,qr.jsx)(Qc,{className:"bg-white border-0 shadow-sm",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-500 text-xs",children:"Attendance"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:[(null===h||void 0===h||null===(t=h.school_overview)||void 0===t||null===(a=t.today_attendance)||void 0===a?void 0:a.percentage)||85,"%"]})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(_h,{className:"w-5 h-5 text-emerald-600"})})]})})}),(0,qr.jsx)(Qc,{className:"bg-white border-0 shadow-sm",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-500 text-xs",children:"Active Alerts"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-rose-600",children:x.length})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-rose-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(QU,{className:"w-5 h-5 text-rose-600"})})]})})}),(0,qr.jsx)(Qc,{className:"bg-white border-0 shadow-sm",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-500 text-xs",children:"Tracking"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:g.length})]}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(c$,{className:"w-5 h-5 text-purple-600"})})]})})})]}),(0,qr.jsxs)(Qc,{className:"bg-white border-0 shadow-sm",children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(nJ,{className:"w-5 h-5 text-amber-500"}),"Quick Actions"]})}),(0,qr.jsxs)(td,{children:[(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"School Status",query:"school ka pura status batao",icon:vJ,color:"bg-blue-50 text-blue-700"},{label:"Absent Today",query:"aaj kaun absent hai",icon:Lc,color:"bg-rose-50 text-rose-700"},{label:"Fee Status",query:"pending fees kitni hai",icon:Zm,color:"bg-amber-50 text-amber-700"},{label:"Check Alerts",query:"koi alert hai kya",icon:Oh,color:"bg-purple-50 text-purple-700"}].map((e,t)=>(0,qr.jsxs)("button",{onClick:()=>K(e.query),className:"".concat(e.color," p-4 rounded-xl hover:shadow-md transition-all text-left"),children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5 mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-sm",children:e.label})]},t))}),(0,qr.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[(0,qr.jsxs)("p",{className:"text-xs text-slate-500 mb-3 flex items-center gap-1",children:[(0,qr.jsx)(th,{className:"w-3 h-3"}),"CLASS INTELLIGENCE - Ask about any class"]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[{label:"Class Condition",query:"Class 10 ki condition batao",icon:j$},{label:"Weak Students",query:"weak bachhe kaun hai Class 10 mein",icon:Lc},{label:"Teacher Rating",query:"Teacher kaisa padha raha hai Class 10 mein",icon:eH},{label:"Syllabus Status",query:"Syllabus kitna complete hua Class 10 mein",icon:sh},{label:"Class Ranking",query:"Sabse achhi class kaun si hai",icon:Mh},{label:"Attendance Trend",query:"Class 10 ki attendance kaisi hai",icon:_h}].map((e,t)=>(0,qr.jsxs)("button",{onClick:()=>K(e.query),className:"bg-indigo-50 text-indigo-700 p-3 rounded-lg hover:shadow-md transition-all text-left flex items-center gap-2",children:[(0,qr.jsx)(e.icon,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"font-medium text-xs",children:e.label})]},"class-".concat(t)))})]})]})]}),(null===h||void 0===h||null===(n=h.insights)||void 0===n?void 0:n.length)>0&&(0,qr.jsxs)(Qc,{className:"bg-white border-0 shadow-sm",children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(hh,{className:"w-5 h-5 text-amber-500"}),"AI Insights"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-3",children:h.insights.map((e,t)=>(0,qr.jsx)("div",{className:"p-4 rounded-xl border ".concat("critical"===e.type?"bg-red-50 border-red-200":"warning"===e.type?"bg-amber-50 border-amber-200":"bg-blue-50 border-blue-200"),children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-900",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:e.message})]}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>K(e.action),children:(0,qr.jsx)(qc,{className:"w-4 h-4"})})]})},t))})})]}),(0,qr.jsxs)(Qc,{className:"bg-white border-0 shadow-sm",children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Oh,{className:"w-5 h-5 text-rose-500"}),"Active Alerts",x.length>0&&(0,qr.jsx)(eJ,{variant:"destructive",children:x.length})]})}),(0,qr.jsx)(td,{children:0===x.length?(0,qr.jsxs)("div",{className:"text-center py-8",children:[(0,qr.jsx)(Km,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"No active alerts. All systems normal!"})]}):(0,qr.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:x.map(e=>(0,qr.jsx)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)(eJ,{className:UX[e.priority],children:e.priority}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-900",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.description}),e.location&&(0,qr.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:[(0,qr.jsx)(c$,{className:"w-3 h-3 inline mr-1"}),e.location]})]})]}),(0,qr.jsx)(Dl,{size:"sm",className:"bg-emerald-500 hover:bg-emerald-600 text-white",onClick:()=>(async e=>{try{await Hr.post("".concat(BX,"/tino-brain/alerts/").concat(e,"/resolve")),Qt.success("Alert resolved"),F()}catch($1){Qt.error("Failed to resolve alert")}})(e.id),children:(0,qr.jsx)(Km,{className:"w-4 h-4"})})]})},e.id))})})]})]}),(0,qr.jsx)("div",{className:"lg:col-span-1",children:(0,qr.jsxs)(Qc,{className:"bg-white border-0 shadow-sm h-full flex flex-col",children:[(0,qr.jsxs)(Xc,{className:"pb-2 border-b",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)(Zc,{className:"text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(th,{className:"w-5 h-5 text-indigo-600"}),"Ask Tino Brain"]}),(0,qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,qr.jsx)("button",{onClick:()=>P(!A),className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-500",title:"Chat History",children:(0,qr.jsx)(rJ,{className:"w-4 h-4"})}),b.length>0&&(0,qr.jsx)("button",{onClick:async()=>{if(window.confirm("Kya aap puri chat history delete karna chahte hain?"))try{await Hr.delete("".concat(BX,"/tino-brain/chat-history/").concat(null===r||void 0===r?void 0:r.id,"/clear?school_id=").concat(i||"default")),y([]),M([]),Qt.success("Chat history cleared")}catch($1){Qt.error("Failed to clear history")}},className:"p-1.5 rounded-lg hover:bg-rose-50 text-slate-500 hover:text-rose-600",title:"Clear Chat",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})]}),(0,qr.jsx)(ed,{className:"text-slate-500 text-xs",children:"\ud83c\udfa4 Mic dabao \u2192 Bolo \u2192 Chhodo \u2192 Auto execute!"})]}),A&&O.length>0&&(0,qr.jsxs)("div",{className:"border-b bg-slate-50 p-3 max-h-[200px] overflow-y-auto",children:[(0,qr.jsx)("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"Previous Chats"}),O.map((e,t)=>(0,qr.jsxs)("button",{onClick:()=>(async e=>{try{var t;const a=null===(t=(await Hr.get("".concat(BX,"/tino-brain/chat-history/").concat(null===r||void 0===r?void 0:r.id,"?school_id=").concat(i||"default","&limit=100"))).data.sessions)||void 0===t?void 0:t.find(t=>t.date===e);a&&(y(a.messages.map(e=>({type:e.is_user?"user":"ai",text:e.message,time:new Date(e.timestamp),id:e.id}))),P(!1))}catch($1){Qt.error("Failed to load session")}})(e.date),className:"w-full text-left p-2 rounded-lg hover:bg-white text-xs mb-1 border border-transparent hover:border-slate-200",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsx)("span",{className:"font-medium text-slate-700",children:e.date}),(0,qr.jsxs)("span",{className:"text-slate-400",children:[e.message_count," msgs"]})]}),(0,qr.jsx)("p",{className:"text-slate-500 truncate",children:e.preview})]},t))]}),(0,qr.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-[350px] max-h-[450px] bg-slate-50",children:[0===b.length&&(0,qr.jsxs)("div",{className:"text-center py-8",children:[(0,qr.jsx)(th,{className:"w-12 h-12 text-indigo-300 mx-auto mb-3"}),(0,qr.jsxs)("p",{className:"text-slate-400 text-sm",children:["Namaste! Main Tino Brain hoon.",(0,qr.jsx)("br",{}),"Mujhse school ke baare mein kuch bhi puchho!"]}),(0,qr.jsxs)("div",{className:"mt-4 text-xs text-slate-400",children:[(0,qr.jsx)("p",{className:"font-medium mb-1",children:"Try bolke:"}),(0,qr.jsx)("p",{children:'"Notice bhejo ki kal chutti hai"'}),(0,qr.jsx)("p",{children:'"Aaj kaun absent hai"'}),(0,qr.jsx)("p",{children:'"Fee reminder bhejo"'})]})]}),b.map((e,t)=>{var a,s;return(0,qr.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,qr.jsxs)("div",{className:"max-w-[85%] rounded-2xl px-4 py-3 ".concat("user"===e.type?"bg-indigo-600 text-white rounded-br-sm":"bg-white text-slate-800 border border-slate-200 rounded-bl-sm shadow-sm"),children:[(0,qr.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.text}),e.data&&"user"!==e.type&&(0,qr.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[void 0!==e.data.marked_count&&(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-xs text-emerald-600",children:[(0,qr.jsx)(Km,{className:"w-3 h-3"}),(0,qr.jsxs)("span",{children:[e.data.marked_count," students marked"]})]}),void 0!==e.data.absent_count&&(0,qr.jsxs)("div",{className:"text-xs text-rose-600 mt-1",children:[(0,qr.jsxs)("span",{className:"font-medium",children:[e.data.absent_count," absent"]}),null===(a=e.data.absent_students)||void 0===a?void 0:a.slice(0,5).map((e,t)=>(0,qr.jsxs)("span",{className:"block text-slate-500",children:["\u2022 ",e.name," (",e.class,")"]},t))]}),void 0!==e.data.reminders_sent&&(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-xs text-amber-600",children:[(0,qr.jsx)(Oh,{className:"w-3 h-3"}),(0,qr.jsxs)("span",{children:[e.data.reminders_sent," reminders sent"]})]}),void 0!==e.data.total_pending&&(0,qr.jsxs)("div",{className:"text-xs text-amber-600 font-medium",children:["\u20b9",null===(s=e.data.total_pending)||void 0===s?void 0:s.toLocaleString()," pending"]}),e.data.notice_id&&(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-xs text-emerald-600",children:[(0,qr.jsx)(Km,{className:"w-3 h-3"}),(0,qr.jsx)("span",{children:"Notice created successfully"})]}),void 0!==e.data.sent_count&&(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[(0,qr.jsx)(sJ,{className:"w-3 h-3"}),(0,qr.jsxs)("span",{children:[e.data.sent_count," messages queued"]})]})]})]})},t)}),_&&(0,qr.jsx)("div",{className:"flex justify-start",children:(0,qr.jsx)("div",{className:"bg-white border border-slate-200 rounded-2xl px-4 py-3 rounded-bl-sm shadow-sm",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin text-indigo-600"}),(0,qr.jsx)("span",{className:"text-xs text-slate-500",children:"Tino soch raha hai..."})]})})}),(0,qr.jsx)("div",{ref:T})]}),(0,qr.jsx)("div",{className:"p-3 border-t bg-white",children:(0,qr.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j.trim()&&!_&&(B("user",j),H(j),N(""))},className:"flex gap-2",children:[(0,qr.jsx)(Rl,{value:j,onChange:e=>N(e.target.value),placeholder:"Type karo ya bolo...",className:"flex-1 text-sm",disabled:_||w}),(0,qr.jsx)("button",{type:"button",onMouseDown:V,onMouseUp:W,onMouseLeave:w?W:void 0,onTouchStart:V,onTouchEnd:W,disabled:_,className:"p-2 rounded-lg transition-all select-none ".concat(w?"bg-red-500 text-white animate-pulse scale-110":"bg-slate-100 text-slate-600 hover:bg-slate-200 active:bg-red-500 active:text-white active:scale-110"),title:"Press & hold to speak",children:w?(0,qr.jsx)(iJ,{className:"w-4 h-4"}):(0,qr.jsx)(lJ,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{type:"submit",disabled:!j.trim()||_,size:"sm",className:"bg-indigo-600 hover:bg-indigo-700",children:(0,qr.jsx)(sJ,{className:"w-4 h-4"})})]})})]})})]}),(0,qr.jsxs)(Qc,{className:"mt-6 bg-white border-0 shadow-sm",children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsx)(Zc,{className:"text-slate-900",children:"Tino Brain Capabilities"}),(0,qr.jsx)(ed,{children:"What Tino AI can do for your school"})]}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[{icon:Hc,label:"CCTV Monitor",desc:"Real-time surveillance",color:"bg-blue-50 text-blue-600"},{icon:Lc,label:"Face Track",desc:"Who is where",color:"bg-purple-50 text-purple-600"},{icon:QU,label:"Auto Alerts",desc:"Proactive warnings",color:"bg-rose-50 text-rose-600"},{icon:j$,label:"Behavior AI",desc:"Student analysis",color:"bg-amber-50 text-amber-600"},{icon:Oh,label:"Notifications",desc:"Instant alerts",color:"bg-emerald-50 text-emerald-600"},{icon:rh,label:"Counseling",desc:"AI-assisted",color:"bg-pink-50 text-pink-600"}].map((e,t)=>(0,qr.jsxs)("div",{className:"p-4 ".concat(e.color," rounded-xl text-center hover:shadow-md transition-all cursor-pointer"),children:[(0,qr.jsx)(e.icon,{className:"w-8 h-8 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,qr.jsx)("p",{className:"text-xs opacity-70",children:e.desc})]},t))})})]})]})}const qX=()=>{const[e,t]=(0,s.useState)({}),[a,n]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=setInterval(()=>{n(e=>(e+1)%i.length)},5e3);return()=>clearInterval(e)},[]);const r=[{icon:th,title:"Tino AI Brain",titleHi:"\u091f\u0940\u0928\u094b AI \u092c\u094d\u0930\u0947\u0928",desc:"\u092c\u094b\u0932\u094b \u0914\u0930 \u0915\u093e\u092e \u0939\u094b \u091c\u093e\u090f! Alexa \u091c\u0948\u0938\u093e AI Assistant",color:"from-purple-500 to-indigo-600"},{icon:lJ,title:"Voice Commands",titleHi:"\u0906\u0935\u093e\u091c\u093c \u0938\u0947 \u0915\u0902\u091f\u094d\u0930\u094b\u0932",desc:"Hindi, English, Hinglish - \u0915\u094b\u0908 \u092d\u0940 \u092d\u093e\u0937\u093e \u092c\u094b\u0932\u094b",color:"from-blue-500 to-cyan-500"},{icon:JU,title:"CCTV + AI",titleHi:"\u0938\u094d\u092e\u093e\u0930\u094d\u091f CCTV",desc:"Face Recognition, Auto Attendance, Gate Greeting",color:"from-emerald-500 to-teal-500"},{icon:Lc,title:"Complete Management",titleHi:"\u092a\u0942\u0930\u093e \u092a\u094d\u0930\u092c\u0902\u0927\u0928",desc:"Students, Teachers, Staff - \u0938\u092c \u090f\u0915 \u091c\u0917\u0939",color:"from-orange-500 to-red-500"},{icon:nH,title:"Smart Fees",titleHi:"\u0938\u094d\u092e\u093e\u0930\u094d\u091f \u092b\u0940\u0938",desc:"Online Payment, Auto Reminders, Full Tracking",color:"from-pink-500 to-rose-500"},{icon:sh,title:"AI Paper Generator",titleHi:"AI \u092a\u0947\u092a\u0930 \u091c\u0928\u0930\u0947\u091f\u0930",desc:"NCERT/MP Board - Instant Question Papers",color:"from-violet-500 to-purple-500"}],i=[{name:"\u0930\u093e\u091c\u0947\u0936 \u0936\u0930\u094d\u092e\u093e",role:"Director, \u0938\u0930\u0938\u094d\u0935\u0924\u0940 \u0935\u093f\u0926\u094d\u092f\u093e \u092e\u0902\u0926\u093f\u0930",text:"Schooltino \u0928\u0947 \u0939\u092e\u093e\u0930\u0947 \u0938\u094d\u0915\u0942\u0932 \u0915\u094b \u092a\u0942\u0930\u0940 \u0924\u0930\u0939 \u092c\u0926\u0932 \u0926\u093f\u092f\u093e\u0964 \u0905\u092c \u092e\u0948\u0902 \u092c\u0938 \u092c\u094b\u0932\u0924\u093e \u0939\u0942\u0902 \u0914\u0930 Tino \u0938\u092c \u0915\u093e\u092e \u0915\u0930 \u0926\u0947\u0924\u093e \u0939\u0948!",rating:5},{name:"Dr. Priya Singh",role:"Principal, Modern Public School",text:"AI Paper Generator \u0938\u0947 \u0939\u092e\u093e\u0930\u093e exam preparation time 70% \u0915\u092e \u0939\u094b \u0917\u092f\u093e\u0964 Amazing tool!",rating:5},{name:"\u0905\u092e\u093f\u0924 \u092a\u091f\u0947\u0932",role:"Owner, Kids Academy",text:"CCTV + Face Recognition \u0938\u0947 parents \u0915\u094b real-time updates \u092e\u093f\u0932\u0924\u0947 \u0939\u0948\u0902\u0964 Trust \u092c\u0922\u093c \u0917\u092f\u093e!",rating:5}],l=[{icon:th,name:"Tino AI Brain",nameHi:"AI \u092c\u094d\u0930\u0947\u0928"},{icon:lJ,name:"Voice Assistant",nameHi:"\u0935\u0949\u0907\u0938 \u0905\u0938\u093f\u0938\u094d\u091f\u0947\u0902\u091f"},{icon:JU,name:"CCTV Integration",nameHi:"CCTV \u0907\u0902\u091f\u0940\u0917\u094d\u0930\u0947\u0936\u0928"},{icon:Z$,name:"Face Recognition",nameHi:"\u092b\u0947\u0938 \u0930\u093f\u0915\u0949\u0917\u094d\u0928\u093f\u0936\u0928"},{icon:Lc,name:"Student Management",nameHi:"\u0938\u094d\u091f\u0942\u0921\u0947\u0902\u091f \u092e\u0948\u0928\u0947\u091c\u092e\u0947\u0902\u091f"},{icon:Fc,name:"Teacher Portal",nameHi:"\u091f\u0940\u091a\u0930 \u092a\u094b\u0930\u094d\u091f\u0932"},{icon:nH,name:"Fee Management",nameHi:"\u092b\u0940\u0938 \u092e\u0948\u0928\u0947\u091c\u092e\u0947\u0902\u091f"},{icon:eh,name:"Attendance",nameHi:"\u0905\u091f\u0947\u0902\u0921\u0947\u0902\u0938"},{icon:sh,name:"AI Paper Generator",nameHi:"AI \u092a\u0947\u092a\u0930 \u091c\u0928\u0930\u0947\u091f\u0930"},{icon:cY,name:"Report Cards",nameHi:"\u0930\u093f\u092a\u094b\u0930\u094d\u091f \u0915\u093e\u0930\u094d\u0921"},{icon:nh,name:"Transport Tracking",nameHi:"\u092c\u0938 \u091f\u094d\u0930\u0948\u0915\u093f\u0902\u0917"},{icon:Oh,name:"Smart Notifications",nameHi:"\u0938\u094d\u092e\u093e\u0930\u094d\u091f \u0928\u094b\u091f\u093f\u092b\u093f\u0915\u0947\u0936\u0928"},{icon:Rc,name:"Safety Alerts",nameHi:"\u0938\u0947\u092b\u094d\u091f\u0940 \u0905\u0932\u0930\u094d\u091f\u094d\u0938"},{icon:oh,name:"Analytics",nameHi:"\u090f\u0928\u093e\u0932\u093f\u091f\u093f\u0915\u094d\u0938"},{icon:sX,name:"Front Office",nameHi:"\u092b\u094d\u0930\u0902\u091f \u0911\u092b\u093f\u0938"},{icon:rh,name:"Health Module",nameHi:"\u0939\u0947\u0932\u094d\u0925 \u092e\u0949\u0921\u094d\u092f\u0942\u0932"}];return(0,qr.jsxs)("div",{className:"min-h-screen bg-white overflow-x-hidden",children:[(0,qr.jsxs)("section",{className:"relative min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 overflow-hidden",children:[(0,qr.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,qr.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse"}),(0,qr.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse",style:{animationDelay:"2s"}}),(0,qr.jsx)("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse",style:{animationDelay:"4s"}})]}),(0,qr.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(th,{className:"w-7 h-7 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Schooltino"}),(0,qr.jsx)("p",{className:"text-xs text-purple-200",children:"AI-Powered School Management"})]})]}),(0,qr.jsx)(Pt,{to:"/",className:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-white/20 transition-all",children:"Login \u2192"})]}),(0,qr.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-12 pt-8",children:[(0,qr.jsxs)("div",{className:"flex-1 text-center lg:text-left",children:[(0,qr.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 mb-6",children:[(0,qr.jsx)(nJ,{className:"w-4 h-4 text-amber-400"}),(0,qr.jsx)("span",{className:"text-sm text-purple-100",children:"India's #1 AI School Software"})]}),(0,qr.jsxs)("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-white leading-tight mb-6",children:["\u092c\u094b\u0932\u094b \u0914\u0930 ",(0,qr.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-500",children:"\u0915\u093e\u092e \u0939\u094b \u091c\u093e\u090f!"})]}),(0,qr.jsx)("p",{className:"text-lg sm:text-xl text-purple-100 mb-8 max-w-xl",children:"Tino AI - \u0906\u092a\u0915\u0947 \u0938\u094d\u0915\u0942\u0932 \u0915\u093e Alexa! \ud83c\udfa4 \u092c\u094b\u0932\u0915\u0930 Attendance \u0932\u0917\u093e\u0913, Fees Reminder \u092d\u0947\u091c\u094b, Reports \u0926\u0947\u0916\u094b - \u0938\u092c \u0915\u0941\u091b \u0906\u0935\u093e\u091c\u093c \u0938\u0947!"}),(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[(0,qr.jsxs)("a",{href:"https://wa.me/917879967616?text=Hi!%20I%20want%20demo%20of%20Schooltino",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:shadow-2xl hover:shadow-green-500/30 transition-all transform hover:scale-105",children:[(0,qr.jsx)(oH,{className:"w-5 h-5"}),"WhatsApp Demo \u092c\u0941\u0915 \u0915\u0930\u0947\u0902"]}),(0,qr.jsxs)(Pt,{to:"/",className:"inline-flex items-center justify-center gap-2 bg-white/10 backdrop-blur-sm text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-white/20 transition-all",children:[(0,qr.jsx)(mh,{className:"w-5 h-5"}),"Free Trial \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902"]})]}),(0,qr.jsxs)("div",{className:"flex flex-wrap items-center gap-6 mt-8 justify-center lg:justify-start",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Rc,{className:"w-5 h-5 text-green-400"}),(0,qr.jsx)("span",{className:"text-sm text-purple-200",children:"100% Secure"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-5 h-5 text-amber-400"}),(0,qr.jsx)("span",{className:"text-sm text-purple-200",children:"24/7 Support"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(KY,{className:"w-5 h-5 text-blue-400"}),(0,qr.jsx)("span",{className:"text-sm text-purple-200",children:"Hindi + English"})]})]})]}),(0,qr.jsx)("div",{className:"flex-1 relative",children:(0,qr.jsxs)("div",{className:"relative w-full max-w-lg mx-auto",children:[(0,qr.jsx)("img",{src:"https://images.unsplash.com/photo-1601655781320-205e34c94eb1?w=600&h=400&fit=crop",alt:"Smart School Management",className:"rounded-2xl shadow-2xl shadow-purple-500/30 border-4 border-white/10"}),(0,qr.jsx)("div",{className:"absolute -top-4 -right-4 bg-white rounded-xl shadow-xl p-3 animate-bounce",style:{animationDuration:"3s"},children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(th,{className:"w-6 h-6 text-purple-600"}),(0,qr.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"AI Active"})]})}),(0,qr.jsx)("div",{className:"absolute -bottom-4 -left-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl shadow-xl p-3 animate-pulse",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(lJ,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-sm font-semibold",children:'"Attendance \u0932\u0917\u093e\u0913"'})]})})]})})]})]}),(0,qr.jsx)("div",{className:"absolute bottom-0 left-0 right-0",children:(0,qr.jsx)("svg",{viewBox:"0 0 1440 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,qr.jsx)("path",{d:"M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,64C960,75,1056,85,1152,80C1248,75,1344,53,1392,42.7L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z",fill:"white"})})})]}),(0,qr.jsx)("section",{className:"py-12 bg-white",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[{number:"50+",label:"Schools",labelHi:"\u0938\u094d\u0915\u0942\u0932"},{number:"10,000+",label:"Students",labelHi:"\u0935\u093f\u0926\u094d\u092f\u093e\u0930\u094d\u0925\u0940"},{number:"500+",label:"Teachers",labelHi:"\u0936\u093f\u0915\u094d\u0937\u0915"},{number:"99.9%",label:"Uptime",labelHi:"\u0905\u092a\u091f\u093e\u0907\u092e"}].map((e,t)=>(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("div",{className:"text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:e.number}),(0,qr.jsx)("div",{className:"text-gray-600 mt-2",children:e.labelHi})]},t))})})}),(0,qr.jsx)("section",{className:"py-20 bg-gradient-to-br from-gray-50 to-indigo-50",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,qr.jsxs)("div",{className:"text-center mb-16",children:[(0,qr.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"\ud83d\ude80 Powerful Features"}),(0,qr.jsx)("p",{className:"text-xl text-gray-600",children:"\u090f\u0915 Software \u092e\u0947\u0902 \u0938\u092c \u0915\u0941\u091b - No Need for Multiple Apps!"})]}),(0,qr.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((e,t)=>(0,qr.jsxs)("div",{className:"group bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[(0,qr.jsx)("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"),children:(0,qr.jsx)(e.icon,{className:"w-7 h-7 text-white"})}),(0,qr.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:e.title}),(0,qr.jsx)("p",{className:"text-sm text-indigo-600 font-medium mb-2",children:e.titleHi}),(0,qr.jsx)("p",{className:"text-gray-600",children:e.desc})]},t))})]})}),(0,qr.jsx)("section",{className:"py-20 bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 text-white",children:(0,qr.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,qr.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-12",children:[(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white/10 rounded-full px-4 py-2 mb-6",children:[(0,qr.jsx)(th,{className:"w-5 h-5 text-amber-400"}),(0,qr.jsx)("span",{className:"text-purple-200",children:"Powered by AI"})]}),(0,qr.jsxs)("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:["\u092e\u093f\u0932\u093f\u090f ",(0,qr.jsx)("span",{className:"text-amber-400",children:"Tino AI"})," \u0938\u0947!"]}),(0,qr.jsx)("p",{className:"text-lg text-purple-100 mb-8",children:"Tino AI \u0906\u092a\u0915\u0947 \u0938\u094d\u0915\u0942\u0932 \u0915\u093e virtual assistant \u0939\u0948\u0964 \u092c\u0938 \u092c\u094b\u0932\u094b:"}),(0,qr.jsx)("div",{className:"space-y-4 mb-8",children:['"Aaj ki attendance batao"','"Class 10 ki condition batao"','"Fee reminder bhejo"','"Weak students kaun hai"','"Teacher kaisa padha raha"'].map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-3 bg-white/10 rounded-lg px-4 py-3",children:[(0,qr.jsx)(lJ,{className:"w-5 h-5 text-green-400 animate-pulse"}),(0,qr.jsx)("span",{className:"text-white font-medium",children:e}),(0,qr.jsx)(Km,{className:"w-5 h-5 text-green-400 ml-auto"})]},t))}),(0,qr.jsxs)("a",{href:"https://wa.me/917879967616?text=Hi!%20I%20want%20to%20try%20Tino%20AI",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-400 to-orange-500 text-gray-900 px-6 py-3 rounded-full font-semibold hover:shadow-xl transition-all",children:["Tino \u0938\u0947 \u092c\u093e\u0924 \u0915\u0930\u0947\u0902 ",(0,qr.jsx)(uh,{className:"w-5 h-5"})]})]}),(0,qr.jsx)("div",{className:"flex-1",children:(0,qr.jsx)("img",{src:"https://images.unsplash.com/photo-1541178735493-479c1a27ed24?w=600&h=400&fit=crop",alt:"Tino AI Assistant",className:"rounded-2xl shadow-2xl border-4 border-white/10"})})]})})}),(0,qr.jsx)("section",{className:"py-20 bg-white",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,qr.jsxs)("div",{className:"text-center mb-12",children:[(0,qr.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"80+ Features in One Platform"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"\u0938\u092c \u0915\u0941\u091b \u090f\u0915 \u091c\u0917\u0939 - No More Juggling Multiple Apps!"})]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:l.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-3 bg-gray-50 rounded-xl p-4 hover:bg-indigo-50 transition-colors",children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5 text-indigo-600"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,qr.jsx)("p",{className:"text-xs text-gray-500",children:e.nameHi})]})]},t))})]})}),(0,qr.jsx)("section",{className:"py-20 bg-gradient-to-br from-gray-50 to-indigo-50",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,qr.jsxs)("div",{className:"text-center mb-12",children:[(0,qr.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"\u2764\ufe0f Happy Schools"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"See what our users say about Schooltino"})]}),(0,qr.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,qr.jsx)("div",{className:"flex justify-center gap-1 mb-4",children:[...Array(i[a].rating)].map((e,t)=>(0,qr.jsx)(D$,{className:"w-6 h-6 text-amber-400 fill-amber-400"},t))}),(0,qr.jsxs)("p",{className:"text-xl text-gray-700 mb-6 italic",children:['"',i[a].text,'"']}),(0,qr.jsx)("div",{className:"font-semibold text-gray-900",children:i[a].name}),(0,qr.jsx)("div",{className:"text-sm text-indigo-600",children:i[a].role})]}),(0,qr.jsx)("div",{className:"flex justify-center gap-2 mt-6",children:i.map((e,t)=>(0,qr.jsx)("button",{onClick:()=>n(t),className:"w-3 h-3 rounded-full transition-colors ".concat(a===t?"bg-indigo-600":"bg-gray-300")},t))})]})]})}),(0,qr.jsx)("section",{className:"py-20 bg-white",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,qr.jsxs)("div",{className:"text-center mb-12",children:[(0,qr.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"\ud83d\udcb0 Simple Pricing"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"Choose the plan that fits your school"})]}),(0,qr.jsx)("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[{name:"Basic",price:"\u20b9999",period:"/month",features:["100 Students \u0924\u0915","Attendance Management","Fee Management","Basic Reports","Email Support"],popular:!1},{name:"Pro",price:"\u20b92,499",period:"/month",features:["500 Students \u0924\u0915","Tino AI Assistant","Voice Commands","AI Paper Generator","CCTV Integration","24/7 Support"],popular:!0},{name:"Enterprise",price:"Custom",period:"",features:["Unlimited Students","Multi-Branch Support","Custom Integrations","Dedicated Manager","On-site Training","White Label Option"],popular:!1}].map((e,t)=>(0,qr.jsxs)("div",{className:"relative rounded-2xl p-8 ".concat(e.popular?"bg-gradient-to-br from-indigo-600 to-purple-600 text-white shadow-2xl shadow-indigo-500/30 scale-105":"bg-white border-2 border-gray-100"),children:[e.popular&&(0,qr.jsx)("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-amber-400 text-gray-900 px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"}),(0,qr.jsx)("h3",{className:"text-2xl font-bold mb-2 ".concat(e.popular?"text-white":"text-gray-900"),children:e.name}),(0,qr.jsxs)("div",{className:"mb-6",children:[(0,qr.jsx)("span",{className:"text-4xl font-bold ".concat(e.popular?"text-white":"text-indigo-600"),children:e.price}),(0,qr.jsx)("span",{className:e.popular?"text-purple-200":"text-gray-500",children:e.period})]}),(0,qr.jsx)("ul",{className:"space-y-3 mb-8",children:e.features.map((t,a)=>(0,qr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Km,{className:"w-5 h-5 ".concat(e.popular?"text-green-300":"text-green-500")}),(0,qr.jsx)("span",{className:e.popular?"text-purple-100":"text-gray-600",children:t})]},a))}),(0,qr.jsx)("a",{href:"https://wa.me/917879967616?text=Hi!%20I%20want%20".concat(e.name,"%20plan%20for%20my%20school"),target:"_blank",rel:"noopener noreferrer",className:"block text-center py-3 rounded-full font-semibold transition-all ".concat(e.popular?"bg-white text-indigo-600 hover:shadow-lg":"bg-indigo-600 text-white hover:bg-indigo-700"),children:"Get Started"})]},t))})]})}),(0,qr.jsx)("section",{className:"py-20 bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800",children:(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[(0,qr.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-6",children:"\ud83c\udf89 Start Your Free Trial Today!"}),(0,qr.jsx)("p",{className:"text-xl text-purple-100 mb-8",children:"30 \u0926\u093f\u0928 \u0915\u093e Free Trial - No Credit Card Required"}),(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,qr.jsxs)("a",{href:"https://wa.me/917879967616?text=Hi!%20I%20want%20free%20trial%20of%20Schooltino",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:shadow-2xl transition-all transform hover:scale-105",children:[(0,qr.jsx)(oH,{className:"w-6 h-6"}),"WhatsApp \u092a\u0930 Contact \u0915\u0930\u0947\u0902"]}),(0,qr.jsxs)("a",{href:"tel:+917879967616",className:"inline-flex items-center justify-center gap-2 bg-white/10 backdrop-blur-sm text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-white/20 transition-all",children:[(0,qr.jsx)(Gm,{className:"w-6 h-6"}),"Call: +91 78799 67616"]})]})]})}),(0,qr.jsx)("footer",{className:"bg-gray-900 text-gray-400 py-12",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(th,{className:"w-6 h-6 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"text-white font-bold",children:"Schooltino"}),(0,qr.jsx)("p",{className:"text-xs",children:"AI-Powered School Management"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-6",children:[(0,qr.jsxs)("a",{href:"mailto:support@schooltino.com",className:"hover:text-white transition-colors flex items-center gap-2",children:[(0,qr.jsx)(Wm,{className:"w-5 h-5"}),"support@schooltino.com"]}),(0,qr.jsxs)("a",{href:"tel:+917879967616",className:"hover:text-white transition-colors flex items-center gap-2",children:[(0,qr.jsx)(Gm,{className:"w-5 h-5"}),"+91 78799 67616"]})]})]}),(0,qr.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-sm",children:"\xa9 2026 Schooltino. Made with \u2764\ufe0f in India"})]})}),(0,qr.jsx)("a",{href:"https://wa.me/917879967616?text=Hi!%20I%20want%20to%20know%20more%20about%20Schooltino",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 z-50 bg-green-500 text-white p-4 rounded-full shadow-2xl hover:bg-green-600 transition-all transform hover:scale-110 animate-bounce",style:{animationDuration:"2s"},children:(0,qr.jsx)(oH,{className:"w-7 h-7"})})]})},VX=()=>{const[e,t]=(0,s.useState)(0),a=(0,s.useRef)(null),n=[{id:1,title:"Tino AI - Voice Assistant",tagline:"\u092c\u094b\u0932\u094b \u0914\u0930 \u0915\u093e\u092e \u0939\u094b \u091c\u093e\u090f! \ud83c\udfa4",description:"\u0905\u092c \u0906\u092a\u0915\u0947 \u0938\u094d\u0915\u0942\u0932 \u0915\u093e \u0905\u092a\u0928\u093e Alexa! \u0938\u093f\u0930\u094d\u092b \u092c\u094b\u0932\u0915\u0930 Attendance \u0932\u0917\u093e\u0913, Fee Reminder \u092d\u0947\u091c\u094b, Reports \u0926\u0947\u0916\u094b!",features:["Hindi + English Voice","Instant Actions","24/7 Available"],gradient:"from-purple-600 to-indigo-700",icon:th,whatsappText:"\ud83c\udfa4 *Schooltino - AI Voice Assistant*\n\n\u092c\u094b\u0932\u094b \u0914\u0930 \u0915\u093e\u092e \u0939\u094b \u091c\u093e\u090f!\n\n\u2705 Voice \u0938\u0947 Attendance\n\u2705 Voice \u0938\u0947 Fee Reminder\n\u2705 Hindi + English Support\n\n\ud83d\udcde Demo \u0915\u0947 \u0932\u093f\u090f: wa.me/917879967616\n\ud83c\udf10 Website: meri-schooltino.preview.emergentagent.com"},{id:2,title:"Smart CCTV + AI",tagline:"Face Recognition \u0938\u0947 Auto Attendance! \ud83d\udcf7",description:"Gate \u092a\u0930 \u0906\u0924\u0947 \u0939\u0940 Student \u092a\u0939\u091a\u093e\u0928, Attendance \u0932\u0917 \u0917\u0908, Parents \u0915\u094b notification \u091a\u0932\u093e \u0917\u092f\u093e!",features:["Face Recognition","Auto Attendance","Real-time Alerts"],gradient:"from-emerald-600 to-teal-700",icon:JU,whatsappText:"\ud83d\udcf7 *Schooltino - Smart CCTV*\n\nFace Recognition \u0938\u0947 Auto Attendance!\n\n\u2705 Gate Entry = Auto Attendance\n\u2705 Parents \u0915\u094b Instant Alert\n\u2705 Unknown Person Detection\n\n\ud83d\udcde Demo: wa.me/917879967616\n\ud83c\udf10 meri-schooltino.preview.emergentagent.com"},{id:3,title:"AI Paper Generator",tagline:"5 \u092e\u093f\u0928\u091f \u092e\u0947\u0902 Question Paper! \ud83d\udcdd",description:"NCERT, MP Board - \u0915\u094b\u0908 \u092d\u0940 syllabus, \u0915\u094b\u0908 \u092d\u0940 class, instant question paper ready!",features:["NCERT + State Boards","Auto Difficulty Levels","Print Ready"],gradient:"from-orange-500 to-red-600",icon:sh,whatsappText:"\ud83d\udcdd *Schooltino - AI Paper Generator*\n\n5 \u092e\u093f\u0928\u091f \u092e\u0947\u0902 Question Paper!\n\n\u2705 NCERT + MP Board Support\n\u2705 Class 1-12 All Subjects\n\u2705 Easy/Medium/Hard Levels\n\n\ud83d\udcde Demo: wa.me/917879967616\n\ud83c\udf10 meri-schooltino.preview.emergentagent.com"},{id:4,title:"Smart Fee Management",tagline:"Online Payment + Auto Reminder! \ud83d\udcb0",description:"UPI, Card, Net Banking - \u0938\u092c accepted! Pending fee \u0915\u093e auto reminder, instant receipt!",features:["Online Payment","Auto Reminders","Instant Receipt"],gradient:"from-pink-500 to-rose-600",icon:nH,whatsappText:"\ud83d\udcb0 *Schooltino - Smart Fees*\n\nOnline Payment + Auto Reminder!\n\n\u2705 UPI/Card/Net Banking\n\u2705 Auto Fee Reminders\n\u2705 Digital Receipt\n\n\ud83d\udcde Demo: wa.me/917879967616\n\ud83c\udf10 meri-schooltino.preview.emergentagent.com"},{id:5,title:"Complete School Solution",tagline:"80+ Features \u090f\u0915 \u091c\u0917\u0939! \ud83d\ude80",description:"Students, Teachers, Fees, Attendance, CCTV, Transport - \u0938\u092c \u0915\u0941\u091b \u090f\u0915 app \u092e\u0947\u0902!",features:["All-in-One Solution","\u20b9999/month \u0938\u0947 \u0936\u0941\u0930\u0942","Free Trial"],gradient:"from-blue-600 to-cyan-600",icon:nJ,whatsappText:"\ud83d\ude80 *Schooltino - Complete School Management*\n\n80+ Features \u090f\u0915 \u091c\u0917\u0939!\n\n\u2705 AI Voice Assistant\n\u2705 Smart CCTV + Face ID\n\u2705 Online Fee Payment\n\u2705 AI Paper Generator\n\u2705 Transport Tracking\n\n\ud83d\udcb0 \u20b9999/month \u0938\u0947 \u0936\u0941\u0930\u0942\n\ud83d\udcde Free Demo: wa.me/917879967616"},{id:6,title:"Free 30-Day Trial",tagline:"\u0905\u092d\u0940 \u0936\u0941\u0930\u0942 \u0915\u0930\u094b - Free! \ud83c\udf81",description:"No Credit Card, No Hidden Charges! 30 \u0926\u093f\u0928 free \u092e\u0947\u0902 try \u0915\u0930\u094b, \u092a\u0938\u0902\u0926 \u0906\u090f \u0924\u094b continue \u0915\u0930\u094b!",features:["30 Days Free","Full Features","No Card Required"],gradient:"from-amber-500 to-orange-600",icon:pJ,whatsappText:"\ud83c\udf81 *Schooltino - FREE TRIAL*\n\n30 \u0926\u093f\u0928 Free - \u0915\u094b\u0908 Hidden Charges \u0928\u0939\u0940\u0902!\n\n\u2705 \u0938\u092d\u0940 Features Free\n\u2705 No Credit Card\n\u2705 Cancel Anytime\n\n\ud83d\ude80 \u0905\u092d\u0940 \u0936\u0941\u0930\u0942 \u0915\u0930\u094b: wa.me/917879967616\n\ud83c\udf10 meri-schooltino.preview.emergentagent.com"},{id:7,title:"Parents App",tagline:"Real-time Updates for Parents! \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67",description:"\u092c\u091a\u094d\u091a\u093e school \u092a\u0939\u0941\u0902\u091a\u093e? Attendance \u0932\u0917\u0940? Homework \u0915\u094d\u092f\u093e \u0939\u0948? \u0938\u092c instant notification!",features:["Live Tracking","Instant Alerts","Homework Updates"],gradient:"from-violet-600 to-purple-700",icon:Lc,whatsappText:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67 *Schooltino - Parents App*\n\nReal-time Updates for Parents!\n\n\u2705 \u092c\u091a\u094d\u091a\u093e \u092a\u0939\u0941\u0902\u091a\u093e - Alert\n\u2705 Attendance - Alert\n\u2705 Homework Updates\n\u2705 Fee Reminder\n\n\ud83d\udcde Demo: wa.me/917879967616\n\ud83c\udf10 meri-schooltino.preview.emergentagent.com"}],r=e=>{navigator.clipboard.writeText(e),Qt.success("Copied! \u0905\u092c WhatsApp \u092e\u0947\u0902 paste \u0915\u0930\u094b")},i=e=>{const t=encodeURIComponent(e);window.open("https://wa.me/?text=".concat(t),"_blank")},l=n[e];return(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[(0,qr.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 px-4",children:(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(oH,{className:"w-6 h-6"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-xl font-bold",children:"WhatsApp Marketing Kit"}),(0,qr.jsx)("p",{className:"text-xs text-green-100",children:"Daily Share \u0915\u0930\u094b, Business \u092c\u0922\u093c\u093e\u0913!"})]})]}),(0,qr.jsx)("a",{href:"https://exam-fix-1.preview.emergentagent.com",target:"_blank",rel:"noopener noreferrer",className:"bg-white/20 px-4 py-2 rounded-full text-sm font-medium hover:bg-white/30 transition-all",children:"Website \u2192"})]})}),(0,qr.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30 rounded-2xl p-6 mb-8",children:[(0,qr.jsxs)("h2",{className:"text-xl font-bold text-amber-400 mb-3 flex items-center gap-2",children:[(0,qr.jsx)(hh,{className:"w-6 h-6"}),"\u0915\u0948\u0938\u0947 Use \u0915\u0930\u0947\u0902?"]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 text-gray-300",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"1"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-white",children:"Pamphlet \u091a\u0941\u0928\u094b"}),(0,qr.jsx)("p",{className:"text-sm",children:"\u0928\u0940\u091a\u0947 \u0938\u0947 \u0915\u094b\u0908 \u092d\u0940 design select \u0915\u0930\u094b"})]})]}),(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"2"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-white",children:"Copy \u092f\u093e Share \u0915\u0930\u094b"}),(0,qr.jsx)("p",{className:"text-sm",children:"Text copy \u0915\u0930\u094b \u092f\u093e direct WhatsApp share"})]})]}),(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"3"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-white",children:"Status/Groups \u092e\u0947\u0902 \u0932\u0917\u093e\u0913"}),(0,qr.jsx)("p",{className:"text-sm",children:"Daily \u0905\u0932\u0917-\u0905\u0932\u0917 pamphlet share \u0915\u0930\u094b"})]})]})]})]}),(0,qr.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preview"}),(0,qr.jsxs)("div",{ref:a,className:"bg-gradient-to-br ".concat(l.gradient," rounded-3xl p-8 text-white shadow-2xl"),children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(th,{className:"w-7 h-7"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-bold text-lg",children:"Schooltino"}),(0,qr.jsx)("p",{className:"text-xs text-white/70",children:"AI-Powered School Management"})]})]}),(0,qr.jsx)("div",{className:"w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,qr.jsx)(l.icon,{className:"w-10 h-10"})}),(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold mb-2",children:l.title}),(0,qr.jsx)("p",{className:"text-3xl font-bold mb-4",children:l.tagline}),(0,qr.jsx)("p",{className:"text-white/90 mb-6",children:l.description}),(0,qr.jsx)("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:l.features.map((e,t)=>(0,qr.jsxs)("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:["\u2713 ",e]},t))}),(0,qr.jsxs)("div",{className:"bg-white/20 rounded-2xl p-4",children:[(0,qr.jsx)("p",{className:"text-sm mb-2",children:"Free Demo \u0915\u0947 \u0932\u093f\u090f WhatsApp \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:"\ud83d\udcde +91 78799 67616"})]})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,qr.jsxs)("button",{onClick:()=>r(l.whatsappText),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all",children:[(0,qr.jsx)(XU,{className:"w-5 h-5"}),"Copy Text"]}),(0,qr.jsxs)("button",{onClick:()=>i(l.whatsappText),className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all",children:[(0,qr.jsx)(PJ,{className:"w-5 h-5"}),"Share on WhatsApp"]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Pamphlets \u091a\u0941\u0928\u094b (Daily \u0905\u0932\u0917 share \u0915\u0930\u094b)"}),(0,qr.jsx)("div",{className:"space-y-3",children:n.map((a,s)=>(0,qr.jsx)("button",{onClick:()=>t(s),className:"w-full p-4 rounded-xl text-left transition-all ".concat(e===s?"bg-gradient-to-r "+a.gradient+" text-white shadow-lg scale-[1.02]":"bg-gray-800 text-gray-300 hover:bg-gray-700"),children:(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e===s?"bg-white/20":"bg-gray-700"),children:(0,qr.jsx)(a.icon,{className:"w-6 h-6"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h4",{className:"font-semibold",children:a.title}),(0,qr.jsx)("p",{className:"text-sm ".concat(e===s?"text-white/70":"text-gray-500"),children:a.tagline})]}),e===s&&(0,qr.jsx)(Km,{className:"w-6 h-6 text-white"})]})},a.id))})]})]}),(0,qr.jsxs)("div",{className:"mt-12 bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-2xl p-6",children:[(0,qr.jsxs)("h3",{className:"text-xl font-bold text-green-400 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(oH,{className:"w-6 h-6"}),"Quick WhatsApp Messages"]}),(0,qr.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"General Inquiry",text:"\ud83c\udfeb *Schooltino - AI School Management*\n\n\u0906\u092a\u0915\u0947 \u0938\u094d\u0915\u0942\u0932 \u0915\u0947 \u0932\u093f\u090f complete solution!\n\n\u2705 AI Voice Assistant\n\u2705 Smart CCTV\n\u2705 Online Fees\n\u2705 80+ Features\n\n\ud83d\udcde +91 78799 67616\n\ud83c\udf10 meri-schooltino.preview.emergentagent.com"},{title:"Free Trial Offer",text:"\ud83c\udf81 *FREE TRIAL - 30 Days!*\n\nSchool Management Software\n\n\u2705 \u0915\u094b\u0908 Hidden Charges \u0928\u0939\u0940\u0902\n\u2705 Cancel Anytime\n\u2705 Full Features\n\n\ud83d\udc49 \u0905\u092d\u0940 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902: wa.me/917879967616"},{title:"Feature Highlight",text:'\ud83e\udd16 *AI \u0938\u0947 School \u091a\u0932\u093e\u0913!*\n\n"Attendance \u0932\u0917\u093e\u0913" - \u092c\u094b\u0932\u093e \u0914\u0930 \u0932\u0917 \u0917\u0908!\n"Fee reminder \u092d\u0947\u091c\u094b" - \u092c\u094b\u0932\u093e \u0914\u0930 \u091a\u0932\u093e \u0917\u092f\u093e!\n\nTry \u0915\u0930\u094b FREE: wa.me/917879967616'},{title:"Testimonial Share",text:'\u2b50\u2b50\u2b50\u2b50\u2b50\n\n"Schooltino \u0928\u0947 \u0939\u092e\u093e\u0930\u0947 school \u0915\u094b \u092a\u0942\u0930\u0940 \u0924\u0930\u0939 \u092c\u0926\u0932 \u0926\u093f\u092f\u093e!"\n- Director, \u0938\u0930\u0938\u094d\u0935\u0924\u0940 \u0935\u093f\u0926\u094d\u092f\u093e \u092e\u0902\u0926\u093f\u0930\n\n\ud83d\udcde Demo: wa.me/917879967616'}].map((e,t)=>(0,qr.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4",children:[(0,qr.jsx)("h4",{className:"font-medium text-white mb-2",children:e.title}),(0,qr.jsxs)("pre",{className:"text-xs text-gray-400 whitespace-pre-wrap mb-3 font-sans",children:[e.text.substring(0,100),"..."]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)("button",{onClick:()=>r(e.text),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-1",children:[(0,qr.jsx)(XU,{className:"w-4 h-4"})," Copy"]}),(0,qr.jsxs)("button",{onClick:()=>i(e.text),className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-1",children:[(0,qr.jsx)(PJ,{className:"w-4 h-4"})," Share"]})]})]},t))})]}),(0,qr.jsxs)("div",{className:"mt-8 bg-gray-800 rounded-2xl p-6",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\ud83d\udcc5 Daily Marketing Tips"}),(0,qr.jsx)("div",{className:"grid md:grid-cols-7 gap-2 text-center text-sm",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e,t)=>{var a;return(0,qr.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,qr.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:e}),(0,qr.jsx)("p",{className:"text-white font-medium",children:(null===(a=n[t])||void 0===a?void 0:a.title.split(" ")[0])||"General"})]},e)})}),(0,qr.jsx)("p",{className:"text-gray-400 text-sm mt-4 text-center",children:"\ud83d\udca1 \u0939\u0930 \u0926\u093f\u0928 \u0905\u0932\u0917 feature highlight \u0915\u0930\u094b - \u091c\u093c\u094d\u092f\u093e\u0926\u093e engagement \u092e\u093f\u0932\u0947\u0917\u0940!"})]})]}),(0,qr.jsx)("button",{onClick:()=>{window.open("https://wa.me/".concat("917879967616","?text=Hi!%20I%20want%20demo%20of%20Schooltino"),"_blank")},className:"fixed bottom-6 right-6 bg-green-500 text-white p-4 rounded-full shadow-2xl hover:bg-green-600 transition-all transform hover:scale-110 z-50",children:(0,qr.jsx)(oH,{className:"w-7 h-7"})})]})},WX=()=>{var e,t;const{schoolId:a}=ke(),[n,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(""),d=["\u0936\u093f\u0915\u094d\u0937\u093e \u0938\u092c\u0938\u0947 \u092c\u0921\u093c\u093e \u0939\u0925\u093f\u092f\u093e\u0930 \u0939\u0948 \u091c\u093f\u0938\u0938\u0947 \u0906\u092a \u0926\u0941\u0928\u093f\u092f\u093e \u092c\u0926\u0932 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964 - Nelson Mandela","\u0905\u091a\u094d\u091b\u0940 \u0936\u093f\u0915\u094d\u0937\u093e \u090f\u0915 \u092c\u0947\u0939\u0924\u0930 \u092d\u0935\u093f\u0937\u094d\u092f \u0915\u0940 \u0928\u0940\u0902\u0935 \u0939\u0948\u0964","\u0939\u0930 \u092c\u091a\u094d\u091a\u0947 \u092e\u0947\u0902 \u090f\u0915 \u092a\u094d\u0930\u0924\u093f\u092d\u093e \u091b\u0941\u092a\u0940 \u0939\u094b\u0924\u0940 \u0939\u0948, \u092c\u0938 \u0909\u0938\u0947 \u092a\u0939\u091a\u093e\u0928\u0928\u0947 \u0915\u0940 \u091c\u0930\u0942\u0930\u0924 \u0939\u0948\u0964","\u091c\u094d\u091e\u093e\u0928 \u0915\u093e \u0926\u0940\u092a\u0915 \u091c\u0932\u093e\u0913, \u0905\u0902\u0927\u0915\u093e\u0930 \u0926\u0942\u0930 \u092d\u0917\u093e\u0913\u0964","\u092a\u0922\u093c\u093e\u0908 \u092e\u0947\u0902 \u0932\u0917\u093e\u0913 \u0927\u094d\u092f\u093e\u0928, \u092c\u0928\u094b \u0926\u0947\u0936 \u0915\u093e \u0938\u092e\u094d\u092e\u093e\u0928\u0964","\u0936\u093f\u0915\u094d\u0937\u093e \u0938\u0947 \u092c\u0922\u093c\u0915\u0930 \u0915\u094b\u0908 \u0927\u0928 \u0928\u0939\u0940\u0902\u0964","\u0906\u091c \u0915\u0940 \u092e\u0947\u0939\u0928\u0924, \u0915\u0932 \u0915\u0940 \u0938\u092b\u0932\u0924\u093e\u0964"];(0,s.useEffect)(()=>{const e=(new Date).getDay();c(d[e]),u()},[a]);const u=async()=>{try{const e=await Hr.get("".concat("","/schools/").concat(a));r(e.data)}catch($1){r({name:"\u0906\u0926\u0930\u094d\u0936 \u0935\u093f\u0926\u094d\u092f\u093e \u092e\u0902\u0926\u093f\u0930",tagline:"\u091c\u094d\u091e\u093e\u0928 \u0915\u093e \u092e\u0902\u0926\u093f\u0930, \u0938\u0902\u0938\u094d\u0915\u093e\u0930 \u0915\u093e \u0915\u0947\u0902\u0926\u094d\u0930",established:"1995",board:"MP Board / CBSE",classes:"Nursery to 12th",students:"1500+",teachers:"75+",address:"Main Road, City Name, MP",phone:"+91 78799 67616",email:"info@school.com",features:["AI-Powered Smart Classes","CCTV Monitored Campus","Online Fee Payment","Parent Mobile App","Transport Facility","Sports & Extra Activities"],achievements:["100% Results - 10th & 12th","State Topper 2024","Best School Award 2023"],logo:null})}finally{l(!1)}},m=()=>{const e="\ud83c\udfeb *".concat(null===n||void 0===n?void 0:n.name,"*\n\n").concat(null===n||void 0===n?void 0:n.tagline,"\n\n\u2705 ").concat(null===n||void 0===n?void 0:n.classes,"\n\u2705 ").concat(null===n||void 0===n?void 0:n.students," Students\n\u2705 ").concat(null===n||void 0===n?void 0:n.teachers," Teachers\n\u2705 ").concat(null===n||void 0===n?void 0:n.board,"\n\n\ud83d\udccd ").concat(null===n||void 0===n?void 0:n.address,"\n\ud83d\udcde ").concat(null===n||void 0===n?void 0:n.phone,'\n\n\ud83d\udca1 "').concat(o,'"\n\n\ud83c\udf10 Powered by Schooltino AI'),t=encodeURIComponent(e);window.open("https://wa.me/?text=".concat(t),"_blank")};return i?(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 to-indigo-900",children:(0,qr.jsxs)("div",{className:"text-white text-center",children:[(0,qr.jsx)("div",{className:"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,qr.jsx)("p",{children:"Loading School Info..."})]})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900",children:[(0,qr.jsx)("div",{className:"bg-white/10 backdrop-blur-sm",children:(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(sX,{className:"w-7 h-7 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-white font-bold",children:null===n||void 0===n?void 0:n.name}),(0,qr.jsxs)("p",{className:"text-xs text-blue-200",children:["Est. ",null===n||void 0===n?void 0:n.established]})]})]}),(0,qr.jsxs)("button",{onClick:m,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-all",children:[(0,qr.jsx)(PJ,{className:"w-4 h-4"}),"Share"]})]})}),(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-12 text-center",children:[(0,qr.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-2xl",children:(0,qr.jsx)(sX,{className:"w-14 h-14 text-white"})}),(0,qr.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:null===n||void 0===n?void 0:n.name}),(0,qr.jsx)("p",{className:"text-xl text-blue-200 mb-8",children:null===n||void 0===n?void 0:n.tagline}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[(0,qr.jsx)(Fc,{className:"w-8 h-8 text-amber-400 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-white",children:null===n||void 0===n?void 0:n.students}),(0,qr.jsx)("p",{className:"text-xs text-blue-200",children:"Students"})]}),(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[(0,qr.jsx)(Lc,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-white",children:null===n||void 0===n?void 0:n.teachers}),(0,qr.jsx)("p",{className:"text-xs text-blue-200",children:"Teachers"})]}),(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[(0,qr.jsx)(sh,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-white",children:null===n||void 0===n?void 0:n.classes}),(0,qr.jsx)("p",{className:"text-xs text-blue-200",children:"Classes"})]})]}),(0,qr.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white/20 rounded-full px-4 py-2 mb-8",children:[(0,qr.jsx)(pJ,{className:"w-5 h-5 text-amber-400"}),(0,qr.jsx)("span",{className:"text-white font-medium",children:null===n||void 0===n?void 0:n.board})]})]}),(0,qr.jsx)("div",{className:"max-w-4xl mx-auto px-4 mb-8",children:(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30 rounded-2xl p-6 text-center",children:[(0,qr.jsxs)("p",{className:"text-lg text-amber-200 italic",children:['"',o,'"']}),(0,qr.jsx)("p",{className:"text-xs text-amber-400 mt-2",children:"\ud83d\udcc5 \u0906\u091c \u0915\u093e \u0935\u093f\u091a\u093e\u0930"})]})}),(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 mb-8",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"\u2728 \u0939\u092e\u093e\u0930\u0940 \u0935\u093f\u0936\u0947\u0937\u0924\u093e\u090f\u0902"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:null===n||void 0===n||null===(e=n.features)||void 0===e?void 0:e.map((e,t)=>(0,qr.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 flex items-center gap-3",children:[(0,qr.jsx)(Km,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),(0,qr.jsx)("span",{className:"text-white text-sm",children:e})]},t))})]}),(0,qr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 mb-8",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"\ud83c\udfc6 \u0909\u092a\u0932\u092c\u094d\u0927\u093f\u092f\u093e\u0902"}),(0,qr.jsx)("div",{className:"flex flex-wrap justify-center gap-3",children:null===n||void 0===n||null===(t=n.achievements)||void 0===t?void 0:t.map((e,t)=>(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 rounded-full px-4 py-2 flex items-center gap-2",children:[(0,qr.jsx)(D$,{className:"w-4 h-4 text-white fill-white"}),(0,qr.jsx)("span",{className:"text-white text-sm font-medium",children:e})]},t))})]}),(0,qr.jsx)("div",{className:"max-w-4xl mx-auto px-4 mb-8",children:(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-purple-600/30 to-indigo-600/30 border border-purple-500/30 rounded-2xl p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,qr.jsx)(th,{className:"w-8 h-8 text-purple-400"}),(0,qr.jsx)("span",{className:"text-white font-bold text-lg",children:"Powered by Schooltino AI"})]}),(0,qr.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-purple-200",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(JU,{className:"w-4 h-4"})," Smart CCTV"]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(th,{className:"w-4 h-4"})," AI Assistant"]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(Rc,{className:"w-4 h-4"})," Safe Campus"]})]})]})}),(0,qr.jsx)("div",{className:"max-w-4xl mx-auto px-4 pb-12",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-2xl",children:[(0,qr.jsx)("h2",{className:"text-xl font-bold text-gray-900 text-center mb-6",children:"\ud83d\udcde \u0938\u0902\u092a\u0930\u094d\u0915 \u0915\u0930\u0947\u0902"}),(0,qr.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,qr.jsxs)("a",{href:"tel:".concat(null===n||void 0===n?void 0:n.phone),className:"flex items-center gap-3 text-gray-700 hover:text-blue-600",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Gm,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsx)("span",{className:"font-medium",children:null===n||void 0===n?void 0:n.phone})]}),(0,qr.jsxs)("a",{href:"mailto:".concat(null===n||void 0===n?void 0:n.email),className:"flex items-center gap-3 text-gray-700 hover:text-blue-600",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Wm,{className:"w-5 h-5 text-green-600"})}),(0,qr.jsx)("span",{className:"font-medium",children:null===n||void 0===n?void 0:n.email})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-3 text-gray-700",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(c$,{className:"w-5 h-5 text-red-600"})}),(0,qr.jsx)("span",{className:"font-medium",children:null===n||void 0===n?void 0:n.address})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)("button",{onClick:()=>{const e="\ud83c\udfeb *".concat(null===n||void 0===n?void 0:n.name,"*\n\n").concat(null===n||void 0===n?void 0:n.tagline,"\n\n\u2705 ").concat(null===n||void 0===n?void 0:n.classes,"\n\u2705 ").concat(null===n||void 0===n?void 0:n.students," Students\n\u2705 ").concat(null===n||void 0===n?void 0:n.teachers," Teachers\n\n\ud83d\udcde ").concat(null===n||void 0===n?void 0:n.phone,'\n\n\ud83d\udca1 "').concat(o,'"');navigator.clipboard.writeText(e),Qt.success("Copied! WhatsApp \u092e\u0947\u0902 paste \u0915\u0930\u094b")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all",children:[(0,qr.jsx)(XU,{className:"w-5 h-5"}),"Copy"]}),(0,qr.jsxs)("button",{onClick:m,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all",children:[(0,qr.jsx)(oH,{className:"w-5 h-5"}),"WhatsApp Share"]})]})]})}),(0,qr.jsx)("div",{className:"bg-black/20 py-4 text-center",children:(0,qr.jsxs)("p",{className:"text-blue-200 text-sm",children:["Made with \u2764\ufe0f using ",(0,qr.jsx)("a",{href:"https://exam-fix-1.preview.emergentagent.com",className:"text-amber-400 hover:underline",children:"Schooltino"})]})}),(0,qr.jsx)("a",{href:"https://wa.me/917879967616?text=Hi!%20I%20saw%20".concat(encodeURIComponent(null===n||void 0===n?void 0:n.name),"%20page"),target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 bg-green-500 text-white p-4 rounded-full shadow-2xl hover:bg-green-600 transition-all transform hover:scale-110 z-50",children:(0,qr.jsx)(oH,{className:"w-7 h-7"})})]})};var GX=a(5418);const KX=e=>{var t;let{admitCardData:a,onClose:n}=e;const r=(0,s.useRef)(),i=(0,GX.useReactToPrint)({content:()=>r.current,documentTitle:"Admit_Card_".concat((null===a||void 0===a||null===(t=a.student)||void 0===t?void 0:t.name)||"Student"),pageStyle:"\n      @page {\n        size: A4;\n        margin: 20mm;\n      }\n      @media print {\n        body {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        .no-print {\n          display: none !important;\n        }\n      }\n    "});if(!a)return null;const{student:l,exam:o,school:c,subjects:d=[],instructions:u=[]}=a;return(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full my-8",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between p-4 border-b no-print",children:[(0,qr.jsx)("h3",{className:"text-lg font-semibold",children:"Admit Card Preview"}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{onClick:i,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-2"}),"Print"]}),(0,qr.jsx)(Dl,{onClick:n,variant:"outline",children:(0,qr.jsx)(Em,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)("div",{ref:r,className:"p-8 bg-white",children:[(0,qr.jsxs)("div",{className:"border-4 border-indigo-600 rounded-lg p-6 mb-6",children:[(0,qr.jsxs)("div",{className:"text-center mb-4",children:[(null===c||void 0===c?void 0:c.logo_url)&&(0,qr.jsx)("img",{src:c.logo_url,alt:"School Logo",className:"w-20 h-20 mx-auto mb-3 object-contain"}),(0,qr.jsx)("h1",{className:"text-2xl font-bold text-indigo-900",children:(null===c||void 0===c?void 0:c.name)||"School Name"}),(0,qr.jsx)("p",{className:"text-sm text-gray-600",children:(null===c||void 0===c?void 0:c.address)||"School Address"}),(0,qr.jsxs)("p",{className:"text-sm text-gray-600",children:["\ud83d\udcde ",(null===c||void 0===c?void 0:c.phone)||"N/A"," | \ud83d\udce7 ",(null===c||void 0===c?void 0:c.email)||"N/A"]})]}),(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-center py-3 rounded-lg",children:[(0,qr.jsx)("h2",{className:"text-xl font-bold",children:"ADMIT CARD / \u092a\u094d\u0930\u0935\u0947\u0936 \u092a\u0924\u094d\u0930"}),(0,qr.jsx)("p",{className:"text-sm mt-1",children:(null===o||void 0===o?void 0:o.exam_name)||"Examination"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[(0,qr.jsx)("div",{className:"col-span-2",children:(0,qr.jsx)("table",{className:"w-full border-collapse",children:(0,qr.jsxs)("tbody",{children:[(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsxs)("td",{className:"py-3 px-4 font-semibold bg-gray-50 w-1/3",children:["Student Name",(0,qr.jsx)("br",{}),"\u091b\u093e\u0924\u094d\u0930 \u0915\u093e \u0928\u093e\u092e"]}),(0,qr.jsx)("td",{className:"py-3 px-4 font-bold text-lg",children:(null===l||void 0===l?void 0:l.name)||"N/A"})]}),(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsxs)("td",{className:"py-3 px-4 font-semibold bg-gray-50",children:["Father's Name",(0,qr.jsx)("br",{}),"\u092a\u093f\u0924\u093e \u0915\u093e \u0928\u093e\u092e"]}),(0,qr.jsx)("td",{className:"py-3 px-4",children:(null===l||void 0===l?void 0:l.father_name)||"N/A"})]}),(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsxs)("td",{className:"py-3 px-4 font-semibold bg-gray-50",children:["Mother's Name",(0,qr.jsx)("br",{}),"\u092e\u093e\u0924\u093e \u0915\u093e \u0928\u093e\u092e"]}),(0,qr.jsx)("td",{className:"py-3 px-4",children:(null===l||void 0===l?void 0:l.mother_name)||"N/A"})]}),(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsxs)("td",{className:"py-3 px-4 font-semibold bg-gray-50",children:["Class / Section",(0,qr.jsx)("br",{}),"\u0915\u0915\u094d\u0937\u093e"]}),(0,qr.jsx)("td",{className:"py-3 px-4 font-bold",children:(null===l||void 0===l?void 0:l.class_name)||"N/A"})]}),(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsxs)("td",{className:"py-3 px-4 font-semibold bg-gray-50",children:["Roll Number",(0,qr.jsx)("br",{}),"\u0930\u094b\u0932 \u0928\u0902\u092c\u0930"]}),(0,qr.jsx)("td",{className:"py-3 px-4 font-bold text-indigo-600",children:(null===l||void 0===l?void 0:l.roll_no)||"N/A"})]}),(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsxs)("td",{className:"py-3 px-4 font-semibold bg-gray-50",children:["Date of Birth",(0,qr.jsx)("br",{}),"\u091c\u0928\u094d\u092e \u0924\u093f\u0925\u093f"]}),(0,qr.jsx)("td",{className:"py-3 px-4",children:(null===l||void 0===l?void 0:l.dob)||"N/A"})]})]})})}),(0,qr.jsx)("div",{className:"flex flex-col items-center",children:(0,qr.jsx)("div",{className:"w-full h-48 border-4 border-gray-300 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:null!==l&&void 0!==l&&l.photo_url?(0,qr.jsx)("img",{src:l.photo_url,alt:"Student",className:"w-full h-full object-cover"}):(0,qr.jsxs)("div",{className:"text-center text-gray-400",children:[(0,qr.jsx)("div",{className:"text-6xl mb-2",children:"\ud83d\udc64"}),(0,qr.jsx)("p",{className:"text-xs",children:"Photo"})]})})})]}),d&&d.length>0&&(0,qr.jsxs)("div",{className:"mb-6",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold text-indigo-900 mb-3 border-b-2 border-indigo-600 pb-2",children:"\ud83d\udcc5 Exam Schedule / \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e"}),(0,qr.jsxs)("table",{className:"w-full border-collapse border-2 border-gray-300",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{className:"bg-indigo-100",children:[(0,qr.jsxs)("th",{className:"border border-gray-300 py-2 px-3 text-left",children:["Date",(0,qr.jsx)("br",{}),"\u0924\u093f\u0925\u093f"]}),(0,qr.jsxs)("th",{className:"border border-gray-300 py-2 px-3 text-left",children:["Subject",(0,qr.jsx)("br",{}),"\u0935\u093f\u0937\u092f"]}),(0,qr.jsxs)("th",{className:"border border-gray-300 py-2 px-3 text-center",children:["Time",(0,qr.jsx)("br",{}),"\u0938\u092e\u092f"]}),(0,qr.jsxs)("th",{className:"border border-gray-300 py-2 px-3 text-center",children:["Duration",(0,qr.jsx)("br",{}),"\u0905\u0935\u0927\u093f"]}),(0,qr.jsxs)("th",{className:"border border-gray-300 py-2 px-3 text-center",children:["Max Marks",(0,qr.jsx)("br",{}),"\u092a\u0942\u0930\u094d\u0923\u093e\u0902\u0915"]})]})}),(0,qr.jsx)("tbody",{children:d.map((e,t)=>(0,qr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,qr.jsx)("td",{className:"border border-gray-300 py-2 px-3",children:e.exam_date||"TBA"}),(0,qr.jsx)("td",{className:"border border-gray-300 py-2 px-3 font-medium",children:e.subject_name}),(0,qr.jsx)("td",{className:"border border-gray-300 py-2 px-3 text-center",children:e.exam_time||"TBA"}),(0,qr.jsx)("td",{className:"border border-gray-300 py-2 px-3 text-center",children:e.duration||"3 hours"}),(0,qr.jsx)("td",{className:"border border-gray-300 py-2 px-3 text-center font-bold",children:e.max_marks||100})]},t))})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,qr.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg p-4",children:[(0,qr.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Exam Dates / \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0924\u093f\u0925\u093f\u092f\u093e\u0901"}),(0,qr.jsxs)("p",{className:"text-sm",children:[(0,qr.jsx)("strong",{children:"Start:"})," ",(null===o||void 0===o?void 0:o.start_date)||"N/A",(0,qr.jsx)("br",{}),(0,qr.jsx)("strong",{children:"End:"})," ",(null===o||void 0===o?void 0:o.end_date)||"N/A"]})]}),(0,qr.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg p-4",children:[(0,qr.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Venue / \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0915\u0947\u0902\u0926\u094d\u0930"}),(0,qr.jsx)("p",{className:"text-sm",children:(null===o||void 0===o?void 0:o.venue)||(null===c||void 0===c?void 0:c.name)||"School Premises"})]})]}),u&&u.length>0&&(0,qr.jsxs)("div",{className:"mb-6 border-2 border-amber-300 bg-amber-50 rounded-lg p-4",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold text-amber-900 mb-3",children:"\u26a0\ufe0f Important Instructions / \u092e\u0939\u0924\u094d\u0935\u092a\u0942\u0930\u094d\u0923 \u0928\u093f\u0930\u094d\u0926\u0947\u0936"}),(0,qr.jsx)("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:u.map((e,t)=>(0,qr.jsx)("li",{className:"text-gray-700",children:e},t))})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-6 mt-8 pt-6 border-t-2 border-gray-300",children:[(0,qr.jsx)("div",{className:"text-center",children:(0,qr.jsx)("div",{className:"border-t-2 border-black pt-2 mt-12",children:(0,qr.jsxs)("p",{className:"font-semibold",children:["Class Teacher",(0,qr.jsx)("br",{}),"\u0915\u0915\u094d\u0937\u093e \u0936\u093f\u0915\u094d\u0937\u0915"]})})}),(0,qr.jsxs)("div",{className:"text-center",children:[(null===c||void 0===c?void 0:c.seal_url)&&(0,qr.jsx)("img",{src:c.seal_url,alt:"School Seal",className:"w-20 h-20 mx-auto mb-2"}),(0,qr.jsxs)("p",{className:"text-xs text-gray-600",children:["School Seal",(0,qr.jsx)("br",{}),"\u0935\u093f\u0926\u094d\u092f\u093e\u0932\u092f \u0915\u0940 \u092e\u094b\u0939\u0930"]})]}),(0,qr.jsx)("div",{className:"text-center",children:(0,qr.jsx)("div",{className:"border-t-2 border-black pt-2 mt-12",children:(0,qr.jsxs)("p",{className:"font-semibold",children:["Principal/Director",(0,qr.jsx)("br",{}),"\u092a\u094d\u0930\u0927\u093e\u0928\u093e\u091a\u093e\u0930\u094d\u092f"]})})})]}),(0,qr.jsxs)("div",{className:"mt-6 text-center text-xs text-gray-500 border-t pt-4",children:[(0,qr.jsx)("p",{children:"\ud83d\udccc This admit card must be presented at the examination center"}),(0,qr.jsx)("p",{children:"\u092f\u0939 \u092a\u094d\u0930\u0935\u0947\u0936 \u092a\u0924\u094d\u0930 \u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0915\u0947\u0902\u0926\u094d\u0930 \u092a\u0930 \u0905\u0928\u093f\u0935\u093e\u0930\u094d\u092f \u0930\u0942\u092a \u0938\u0947 \u092a\u094d\u0930\u0938\u094d\u0924\u0941\u0924 \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e"}),(0,qr.jsxs)("p",{className:"mt-2",children:["Generated on: ",(new Date).toLocaleDateString("en-IN")]})]})]})]})})},YX=e=>{let{boardExam:t,schoolId:a,onClose:n}=e;const[r,i]=(0,s.useState)(1),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)([]);return(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Bulk Board Admit Cards"}),(0,qr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[t.exam_name," - ",t.board]})]}),(0,qr.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,qr.jsx)(Em,{className:"w-6 h-6"})})]}),(0,qr.jsx)("div",{className:"p-6 border-b",children:(0,qr.jsx)("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:[{num:1,label:"Upload List",icon:$U},{num:2,label:"Review Data",icon:Lc},{num:3,label:"Generate Cards",icon:YU}].map((e,t)=>(0,qr.jsxs)(s.Fragment,{children:[(0,qr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(r>=e.num?"bg-indigo-600 text-white":"bg-gray-200 text-gray-500"),children:r>e.num?(0,qr.jsx)(Km,{className:"w-6 h-6"}):(0,qr.jsx)(e.icon,{className:"w-6 h-6"})}),(0,qr.jsx)("span",{className:"text-xs mt-2 font-medium",children:e.label})]}),t<2&&(0,qr.jsx)("div",{className:"flex-1 h-1 mx-4 ".concat(r>e.num?"bg-indigo-600":"bg-gray-200")})]},e.num))})}),(0,qr.jsxs)("div",{className:"p-6",children:[1===r&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,qr.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udccb Instructions:"}),(0,qr.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,qr.jsx)("li",{children:"Download sample template first"}),(0,qr.jsx)("li",{children:"Fill student details in Excel/CSV format"}),(0,qr.jsx)("li",{children:"Required columns: Name, Father Name, DOB, Class, Roll Number"}),(0,qr.jsx)("li",{children:"Upload the completed file"})]})]}),(0,qr.jsx)("div",{className:"flex gap-4",children:(0,qr.jsxs)(Dl,{onClick:()=>{const e=new Blob(["Student Name,Father Name,Mother Name,Date of Birth,Class,Roll Number,Board Roll Number,Exam Centre\nJohn Doe,Peter Doe,Mary Doe,2008-05-15,Class 10,101,2026001234,Centre Code 12345\nJane Smith,Robert Smith,Linda Smith,2008-08-20,Class 10,102,2026001235,Centre Code 12345"],{type:"text/csv"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="board_exam_students_template.csv",a.click(),window.URL.revokeObjectURL(t),Qt.success("Sample template downloaded!")},variant:"outline",className:"flex-1",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download Sample Template"]})}),(0,qr.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-12 text-center hover:border-indigo-500 transition-all",children:[(0,qr.jsx)(lY,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Upload Student List"}),(0,qr.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Excel (.xlsx) or CSV file"}),(0,qr.jsx)("input",{type:"file",accept:".xlsx,.csv",onChange:async e=>{var s;const n=null===(s=e.target.files)||void 0===s?void 0:s[0];if(n){o(n),Qt.success("File uploaded: ".concat(n.name));try{var r,l;const e=localStorage.getItem("token");if(!a)return void Qt.error("School ID not found. Please refresh and try again.");const s=(null===t||void 0===t?void 0:t.id)||(null===t||void 0===t?void 0:t._id);if(!s)return void Qt.error("Exam ID not found. Please create the board exam first.");console.log("Parsing students for school:",a,"exam:",s);const n=await Hr.post("".concat("","/api/admit-card/parse-student-list"),{school_id:a,exam_id:s},{headers:{Authorization:"Bearer ".concat(e)}});console.log("Parsed students:",n.data),0===(null===(r=n.data.students)||void 0===r?void 0:r.length)&&Qt.warning(n.data.message||"No students found. Please add students or use CSV upload."),d(n.data.students||[]),i(2),Qt.success("\u2705 ".concat((null===(l=n.data.students)||void 0===l?void 0:l.length)||0," students loaded!"))}catch($1){var c,u;console.error("Parse error:",$1);const t=(null===(c=$1.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.detail)||$1.message||"Unknown error";Qt.error("Failed to parse file: "+t)}}},className:"hidden",id:"bulk-student-upload"}),(0,qr.jsxs)("label",{htmlFor:"bulk-student-upload",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-indigo-600 text-white hover:bg-indigo-700 h-10 px-4 py-2 cursor-pointer",children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Choose File"]}),l&&(0,qr.jsxs)("p",{className:"text-sm text-green-600 mt-3 font-medium",children:["\u2705 ",l.name]})]})]}),2===r&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("h3",{className:"text-lg font-semibold",children:["Review Student List (",c.length," students)"]}),(0,qr.jsx)(Dl,{onClick:()=>i(1),variant:"outline",size:"sm",children:"Re-upload"})]}),(0,qr.jsx)("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Name"}),(0,qr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Father Name"}),(0,qr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"DOB"}),(0,qr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Class"}),(0,qr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Roll No"})]})}),(0,qr.jsx)("tbody",{className:"divide-y",children:c.map((e,t)=>(0,qr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,qr.jsx)("td",{className:"px-4 py-2 text-sm",children:e.name}),(0,qr.jsx)("td",{className:"px-4 py-2 text-sm",children:e.father_name}),(0,qr.jsx)("td",{className:"px-4 py-2 text-sm",children:e.dob}),(0,qr.jsx)("td",{className:"px-4 py-2 text-sm",children:e.class}),(0,qr.jsx)("td",{className:"px-4 py-2 text-sm font-mono",children:e.roll_number})]},t))})]})}),(0,qr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>i(1),className:"flex-1",children:"Back"}),(0,qr.jsx)(Dl,{onClick:async()=>{if(0!==c.length){m(!0);try{const e=localStorage.getItem("token"),s=(null===t||void 0===t?void 0:t.id)||(null===t||void 0===t?void 0:t._id),n=await Hr.post("".concat("","/api/admit-card/generate-board-bulk"),{school_id:a,exam_id:s,students:c},{headers:{Authorization:"Bearer ".concat(e)}});p(n.data.admit_cards||[]),i(3),Qt.success("\u2705 ".concat(n.data.generated_count," admit cards generated!"))}catch($1){var e,s;console.error("Generation error:",$1),Qt.error("Generation failed: "+((null===(e=$1.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||$1.message))}finally{m(!1)}}else Qt.error("No students to generate admit cards for")},disabled:u,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:u?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-2"}),"Generate Admit Cards"]})})]})]}),3===r&&(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[(0,qr.jsx)(Km,{className:"w-16 h-16 text-green-600 mx-auto mb-3"}),(0,qr.jsx)("h3",{className:"text-2xl font-bold text-green-900 mb-2",children:"\u2705 Generation Complete!"}),(0,qr.jsxs)("p",{className:"text-green-700",children:[h.length," admit cards generated successfully"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)(Dl,{variant:"outline",className:"flex-1",onClick:()=>{Qt.info("Downloading all admit cards...")},children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Download All (PDF)"]}),(0,qr.jsx)(Dl,{className:"flex-1 bg-indigo-600 hover:bg-indigo-700",onClick:()=>{Qt.success("Published to StudyTino!"),n()},children:"Publish to StudyTino"})]}),(0,qr.jsx)("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:(0,qr.jsxs)("table",{className:"w-full text-sm",children:[(0,qr.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"px-4 py-2 text-left",children:"Name"}),(0,qr.jsx)("th",{className:"px-4 py-2 text-left",children:"Roll No"}),(0,qr.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"})]})}),(0,qr.jsx)("tbody",{className:"divide-y",children:h.map((e,t)=>(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("td",{className:"px-4 py-2",children:e.student_name}),(0,qr.jsx)("td",{className:"px-4 py-2 font-mono",children:e.roll_number}),(0,qr.jsx)("td",{className:"px-4 py-2",children:(0,qr.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:[(0,qr.jsx)(Km,{className:"w-3 h-3"}),"Generated"]})})]},t))})]})})]})]})]})})};const JX="",$X=()=>{const{user:e}=Kr(),t=null===e||void 0===e?void 0:e.school_id,[a,n]=(0,s.useState)({min_fee_percentage:30,require_fee_clearance:!0,show_photo:!0,show_signature:!0,show_seal:!0,signature_authority:"principal",enable_studytino_download:!0}),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),[N,w]=(0,s.useState)([]),[S,_]=(0,s.useState)("school"),[k,C]=(0,s.useState)(null),[E,A]=(0,s.useState)(!1),[P,O]=(0,s.useState)(null),[M,T]=(0,s.useState)(!1),[D,I]=(0,s.useState)(null),[R,L]=(0,s.useState)(!1),[F,z]=(0,s.useState)({exam_name:"",exam_type:"unit_test",start_date:"",end_date:"",classes:[],subjects:[],instructions:["Admit card \u0905\u0928\u093f\u0935\u093e\u0930\u094d\u092f \u0939\u0948\u0964","Exam \u0938\u0947 15 \u092e\u093f\u0928\u091f \u092a\u0939\u0932\u0947 \u092a\u0939\u0941\u0902\u091a\u0947\u0902\u0964","Mobile phone \u0932\u093e\u0928\u093e \u092e\u0928\u093e \u0939\u0948\u0964"],venue:""}),[B,U]=(0,s.useState)({exam_name:"",board:"CBSE",roll_number_prefix:"",centre_code:"",admit_card_file:null});(0,s.useEffect)(()=>{t&&H()},[t]);const H=async()=>{d(!0);try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)},[s,r,l,c]=await Promise.allSettled([Hr.get("".concat(JX,"/api/admit-card/settings/").concat(t),{headers:a}),Hr.get("".concat(JX,"/api/admit-card/exams/").concat(t,"?type=school"),{headers:a}),Hr.get("".concat(JX,"/api/admit-card/exams/").concat(t,"?type=board"),{headers:a}),Hr.get("".concat(JX,"/api/classes?school_id=").concat(t),{headers:a})]);"fulfilled"===s.status&&n(s.value.data),"fulfilled"===r.status&&(console.log("Fetched exams:",r.value.data.exams),i(r.value.data.exams||[])),"fulfilled"===l.status&&o(l.value.data.exams||[]),"fulfilled"===c.status&&w(c.value.data||[])}catch($1){console.error("Error fetching data:",$1),Qt.error("Data load \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{d(!1)}},q=()=>{z({exam_name:"",exam_type:"unit_test",start_date:"",end_date:"",classes:[],subjects:[],instructions:["Admit card \u0905\u0928\u093f\u0935\u093e\u0930\u094d\u092f \u0939\u0948\u0964","Exam \u0938\u0947 15 \u092e\u093f\u0928\u091f \u092a\u0939\u0932\u0947 \u092a\u0939\u0941\u0902\u091a\u0947\u0902\u0964","Mobile phone \u0932\u093e\u0928\u093e \u092e\u0928\u093e \u0939\u0948\u0964"],venue:""})},V=(e,t,a)=>{z(s=>u(u({},s),{},{subjects:s.subjects.map((s,n)=>n===e?u(u({},s),{},{[t]:a}):s)}))},W=[{value:"unit_test",label:"Unit Test",icon:"\ud83d\udcdd"},{value:"quarterly",label:"Quarterly",icon:"\ud83d\udcda"},{value:"half_yearly",label:"Half Yearly",icon:"\ud83d\udcd6"},{value:"annual",label:"Annual",icon:"\ud83c\udf93"}];return c?(0,qr.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):(0,qr.jsxs)("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 shadow-xl text-white",children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,qr.jsx)(Fc,{className:"w-8 h-8"}),"Admit Card Management"]}),(0,qr.jsx)("p",{className:"text-indigo-100 mt-1",children:"Create exams and manage admit cards"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,qr.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 border-2 border-blue-200",children:[(0,qr.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:r.length}),(0,qr.jsx)("div",{className:"text-sm text-blue-700",children:"School Exams"})]}),(0,qr.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 border-2 border-purple-200",children:[(0,qr.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:l.length}),(0,qr.jsx)("div",{className:"text-sm text-purple-700",children:"Board Exams"})]}),(0,qr.jsxs)("div",{className:"bg-green-50 rounded-xl p-4 border-2 border-green-200",children:[(0,qr.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:[a.min_fee_percentage,"%"]}),(0,qr.jsx)("div",{className:"text-sm text-green-700",children:"Min Fee"})]}),(0,qr.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4 border-2 border-amber-200",children:[(0,qr.jsx)("div",{className:"text-3xl font-bold text-amber-600",children:N.length}),(0,qr.jsx)("div",{className:"text-sm text-amber-700",children:"Classes"})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)(Dl,{onClick:()=>h(!0),className:"bg-indigo-600 hover:bg-indigo-700 flex-1",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Create School Exam"]}),(0,qr.jsxs)(Dl,{onClick:()=>x(!0),className:"bg-purple-600 hover:bg-purple-700 flex-1",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Board Exam"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>g(!0),children:[(0,qr.jsx)(wh,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("h2",{className:"text-xl font-semibold",children:["School Exams (",r.length,")"]}),0===r.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border-2 border-dashed p-12 text-center",children:[(0,qr.jsx)(cY,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"No exams yet"})]}):(0,qr.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>{var t,a,s;return(0,qr.jsxs)("div",{className:"bg-white rounded-xl border-2 p-5 hover:shadow-lg transition-all",children:[(0,qr.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h3",{className:"font-bold text-lg",children:e.exam_name}),(0,qr.jsxs)(eJ,{variant:"outline",className:"mt-1",children:[null===(t=W.find(t=>t.value===e.exam_type))||void 0===t?void 0:t.icon," ",null===(a=W.find(t=>t.value===e.exam_type))||void 0===a?void 0:a.label]})]}),(0,qr.jsxs)("div",{className:"flex gap-1",children:[(0,qr.jsx)("button",{onClick:()=>(e=>{console.log("Opening edit for exam:",e),C(e),z({exam_name:e.exam_name||"",exam_type:e.exam_type||"unit_test",start_date:e.start_date||"",end_date:e.end_date||"",classes:e.classes||[],subjects:e.subjects||[],instructions:e.instructions||["Admit card \u0905\u0928\u093f\u0935\u093e\u0930\u094d\u092f \u0939\u0948\u0964","Exam \u0938\u0947 15 \u092e\u093f\u0928\u091f \u092a\u0939\u0932\u0947 \u092a\u0939\u0941\u0902\u091a\u0947\u0902\u0964","Mobile phone \u0932\u093e\u0928\u093e \u092e\u0928\u093e \u0939\u0948\u0964"],venue:e.venue||""}),h(!0)})(e),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600",title:"Edit",children:(0,qr.jsx)(sH,{className:"w-4 h-4"})}),(0,qr.jsx)("button",{onClick:()=>(e=>{console.log("Delete confirmation for exam:",e),O(e),A(!0)})(e),className:"p-2 hover:bg-red-50 rounded-lg text-red-600",title:"Delete",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[(0,qr.jsxs)("p",{className:"flex items-center gap-2",children:[(0,qr.jsx)(eh,{className:"w-4 h-4"}),e.start_date," - ",e.end_date]}),(0,qr.jsxs)("p",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4"}),(null===(s=e.classes)||void 0===s?void 0:s.length)||0," Classes"]}),(0,qr.jsx)(eJ,{className:"upcoming"===e.status?"bg-blue-500":"ongoing"===e.status?"bg-green-500":"bg-gray-500",children:e.status})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-1"}),"Print"]}),(0,qr.jsxs)(Dl,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[(0,qr.jsx)(sJ,{className:"w-4 h-4 mr-1"}),"Publish"]})]})]},e.id)})})]}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("h2",{className:"text-xl font-semibold",children:["Board Exams (",l.length,")"]}),0===l.length?(0,qr.jsxs)("div",{className:"bg-white rounded-xl border-2 border-dashed p-12 text-center",children:[(0,qr.jsx)(Fc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"No board exams yet"})]}):(0,qr.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(e=>(0,qr.jsxs)("div",{className:"bg-purple-50 rounded-xl border-2 border-purple-200 p-5",children:[(0,qr.jsx)("h3",{className:"font-bold text-lg",children:e.exam_name}),(0,qr.jsx)(eJ,{className:"mt-2",children:e.board}),(0,qr.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[(0,qr.jsxs)(Dl,{size:"sm",onClick:()=>{I(e),T(!0)},className:"bg-purple-600 hover:bg-purple-700 text-xs",children:[(0,qr.jsx)($U,{className:"w-3 h-3 mr-1"}),"Bulk Upload"]}),(0,qr.jsx)(Dl,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-xs",children:"Publish"})]})]},e.id))})]}),(0,qr.jsx)(Im,{open:m,onOpenChange:e=>{h(e),e||(C(null),q())},children:(0,qr.jsxs)(zm,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{className:"flex items-center gap-2 text-xl",children:k?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(sH,{className:"w-6 h-6 text-blue-600"}),"Edit Exam"]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(xY,{className:"w-6 h-6 text-indigo-600"}),"Create Exam"]})})}),(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Exam Name *"}),(0,qr.jsx)(Rl,{placeholder:"e.g., Unit Test 1",value:F.exam_name,onChange:e=>z(u(u({},F),{},{exam_name:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Exam Type *"}),(0,qr.jsx)("select",{value:F.exam_type,onChange:e=>z(u(u({},F),{},{exam_type:e.target.value})),className:"w-full p-2 border rounded-lg",children:W.map(e=>(0,qr.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Start Date *"}),(0,qr.jsx)(Rl,{type:"date",value:F.start_date,onChange:e=>z(u(u({},F),{},{start_date:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"End Date *"}),(0,qr.jsx)(Rl,{type:"date",value:F.end_date,onChange:e=>z(u(u({},F),{},{end_date:e.target.value}))})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{className:"text-base font-semibold mb-2 block",children:"Select Classes * (\u0915\u092e \u0938\u0947 \u0915\u092e \u090f\u0915)"}),(0,qr.jsx)("div",{className:"grid grid-cols-3 gap-2 max-h-40 overflow-y-auto p-3 border rounded-lg bg-gray-50",children:N.map(e=>(0,qr.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-white rounded hover:bg-indigo-50 cursor-pointer",children:[(0,qr.jsx)("input",{type:"checkbox",checked:F.classes.includes(e.id),onChange:()=>{return t=e.id,void z(e=>u(u({},e),{},{classes:e.classes.includes(t)?e.classes.filter(e=>e!==t):[...e.classes,t]}));var t},className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"text-sm",children:e.name})]},e.id))}),F.classes.length>0&&(0,qr.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["\u2705 ",F.classes.length," selected"]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,qr.jsx)(ql,{className:"text-base font-semibold",children:"Subjects Schedule (Optional)"}),(0,qr.jsxs)(Dl,{type:"button",size:"sm",variant:"outline",onClick:()=>{z(e=>u(u({},e),{},{subjects:[...e.subjects,{subject_name:"",exam_date:"",exam_time:"",duration:"3 hours",max_marks:100}]}))},children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-1"}),"Add Subject"]})]}),F.subjects.length>0&&(0,qr.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:F.subjects.map((e,t)=>(0,qr.jsxs)("div",{className:"p-2 border rounded-lg bg-gray-50 flex gap-2",children:[(0,qr.jsx)(Rl,{placeholder:"Subject",value:e.subject_name,onChange:e=>V(t,"subject_name",e.target.value),className:"flex-1 text-sm"}),(0,qr.jsx)(Rl,{type:"date",value:e.exam_date,onChange:e=>V(t,"exam_date",e.target.value),className:"w-36 text-sm"}),(0,qr.jsx)(Rl,{type:"time",value:e.exam_time,onChange:e=>V(t,"exam_time",e.target.value),className:"w-28 text-sm"}),(0,qr.jsx)("button",{type:"button",onClick:()=>(e=>{z(t=>u(u({},t),{},{subjects:t.subjects.filter((t,a)=>a!==e)}))})(t),className:"text-red-500 hover:text-red-700 p-1",children:(0,qr.jsx)(Em,{className:"w-4 h-4"})})]},t))})]}),(0,qr.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>{h(!1),C(null),q()},className:"flex-1",children:"Cancel"}),(0,qr.jsx)(Dl,{onClick:async()=>{if(F.exam_name&&F.start_date&&F.end_date)if(0!==F.classes.length){L(!0);try{const a=localStorage.getItem("token");if(k){console.log("UPDATE - Exam ID:",k.id),console.log("UPDATE - School ID:",t),console.log("UPDATE - Payload:",F);const e=await Hr.put("".concat(JX,"/api/admit-card/exam/").concat(k.id),u({school_id:t},F),{headers:{Authorization:"Bearer ".concat(a)}});console.log("UPDATE Response:",e.data),Qt.success("\u2705 Exam updated!")}else{console.log("CREATE - Payload:",u({school_id:t},F));const s=await Hr.post("".concat(JX,"/api/admit-card/exam"),u(u({school_id:t},F),{},{exam_category:"school",created_by:null===e||void 0===e?void 0:e.id}),{headers:{Authorization:"Bearer ".concat(a)}});console.log("CREATE Response:",s.data),Qt.success("\u2705 Exam created!")}h(!1),C(null),q(),H()}catch($1){var a,s;console.error("Save Error Full:",$1),console.error("Error Response:",$1.response),Qt.error((null===(a=$1.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||$1.message||"Operation failed")}finally{L(!1)}}else Qt.error("\u0915\u092e \u0938\u0947 \u0915\u092e \u090f\u0915 class select \u0915\u0930\u0947\u0902");else Qt.error("Exam name and dates required")},disabled:R,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:R?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),k?"Update Exam":"Create Exam"]})})]})]})]})}),(0,qr.jsx)(Im,{open:E,onOpenChange:A,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"text-red-600 flex items-center gap-2",children:[(0,qr.jsx)(kY,{className:"w-6 h-6"}),"Delete Exam?"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("p",{children:["Are you sure you want to delete ",(0,qr.jsxs)("strong",{children:['"',null===P||void 0===P?void 0:P.exam_name,'"']}),"?"]}),(0,qr.jsx)("p",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded",children:"\u26a0\ufe0f This will delete all admit cards. Cannot be undone."}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>A(!1),className:"flex-1",children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(P)try{const e=localStorage.getItem("token");console.log("DELETE - Exam ID:",P.id),console.log("DELETE - School ID:",t),console.log("DELETE - Full URL:","".concat(JX,"/api/admit-card/exam/").concat(P.id,"?school_id=").concat(t));const a=await Hr.delete("".concat(JX,"/api/admit-card/exam/").concat(P.id,"?school_id=").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});console.log("DELETE Response:",a.data),Qt.success("\u2705 Exam deleted!"),A(!1),O(null),H()}catch($1){var e,a,s;console.error("Delete Error Full:",$1),console.error("Error Response:",$1.response),console.error("Error Data:",null===(e=$1.response)||void 0===e?void 0:e.data),Qt.error((null===(a=$1.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||$1.message||"Delete failed")}},className:"flex-1 bg-red-600 hover:bg-red-700",children:[(0,qr.jsx)(iH,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),(0,qr.jsx)(Im,{open:f,onOpenChange:g,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Settings"})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Minimum Fee Percentage (%)"}),(0,qr.jsx)(Rl,{type:"number",value:a.min_fee_percentage,onChange:e=>n(u(u({},a),{},{min_fee_percentage:parseFloat(e.target.value)||0}))})]}),(0,qr.jsx)(Dl,{onClick:async()=>{try{const e=localStorage.getItem("token");await Hr.post("".concat(JX,"/api/admit-card/settings"),u({school_id:t},a),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("\u2705 Settings saved!"),g(!1)}catch($1){Qt.error("Settings save failed")}},className:"w-full",children:"Save Settings"})]})]})}),v&&y&&(0,qr.jsx)(KX,{admitCardData:y,onClose:()=>{b(!1),j(null)}}),M&&D&&(0,qr.jsx)(YX,{boardExam:D,schoolId:t,onClose:()=>{T(!1),I(null),H()}})]})},QX=()=>{const e="/Schooltino_Marketing_Brochure.pdf";return(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 flex items-center justify-center p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 text-center",children:[(0,qr.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-rose-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,qr.jsx)(cY,{className:"w-10 h-10 text-white"})}),(0,qr.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Schooltino Marketing Brochure"}),(0,qr.jsx)("p",{className:"text-gray-600 mb-6",children:"PDF Download \u0915\u0930\u0947\u0902 \u0914\u0930 Share \u0915\u0930\u0947\u0902!"}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("a",{href:e,download:"Schooltino_Marketing_Brochure.pdf",className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-4 rounded-xl font-semibold flex items-center justify-center gap-2 hover:shadow-lg transition-all",children:[(0,qr.jsx)(xh,{className:"w-5 h-5"}),"Download PDF (1.6 MB)"]}),(0,qr.jsxs)("button",{onClick:()=>{window.open("https://wa.me/?text=".concat(encodeURIComponent("\ud83c\udfeb *Schooltino - AI School Management*\n\n\u092d\u093e\u0930\u0924 \u0915\u093e \u0938\u092c\u0938\u0947 Advanced School Software!\n\n\ud83d\udcc4 Brochure \u0926\u0947\u0916\u0947\u0902: https://exam-fix-1.preview.emergentagent.com/marketing\n\n\ud83d\udcde Contact: +91 78799 67616")),"_blank")},className:"w-full bg-green-500 hover:bg-green-600 text-white py-4 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all",children:[(0,qr.jsx)(oH,{className:"w-5 h-5"}),"WhatsApp \u092a\u0930 Share \u0915\u0930\u0947\u0902"]}),(0,qr.jsx)("a",{href:"/marketing",className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-4 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all",children:"Live Page \u0926\u0947\u0916\u0947\u0902 \u2192"})]}),(0,qr.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,qr.jsx)("p",{className:"text-sm text-gray-500",children:"Contact:"}),(0,qr.jsx)("a",{href:"tel:+917879967616",className:"text-lg font-bold text-indigo-600",children:"\ud83d\udcde +91 78799 67616"})]})]})})},XX=Dc("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),ZX=Dc("skip-forward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),eZ=Dc("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),tZ="",aZ=[{name:"Hikvision",logo:"\ud83d\udd35",popular:!0,rtspFormat:"rtsp://username:password@{ip}:554/Streaming/Channels/{channel}01",steps:["SADP Tool \u0938\u0947 camera \u0915\u093e IP find \u0915\u0930\u0947\u0902","Browser \u092e\u0947\u0902 IP open \u0915\u0930\u0947\u0902 (default: admin/admin)","Configuration \u2192 Network \u2192 Advanced Settings","RTSP Port note \u0915\u0930\u0947\u0902 (default: 554)","Authentication enable \u0930\u0916\u0947\u0902"],defaultPort:554,supportsSpeaker:!0},{name:"Dahua",logo:"\ud83d\udfe2",popular:!0,rtspFormat:"rtsp://username:password@{ip}:554/cam/realmonitor?channel={channel}&subtype=0",steps:["ConfigTool software \u0938\u0947 IP find \u0915\u0930\u0947\u0902","Web interface open \u0915\u0930\u0947\u0902","Setup \u2192 Network \u2192 TCP/IP \u092e\u0947\u0902 IP confirm \u0915\u0930\u0947\u0902","RTSP port check \u0915\u0930\u0947\u0902 (default: 554)","Main stream select \u0915\u0930\u0947\u0902"],defaultPort:554,supportsSpeaker:!0},{name:"CP Plus",logo:"\ud83d\udd34",popular:!0,rtspFormat:"rtsp://username:password@{ip}:554/cam/realmonitor?channel={channel}&subtype=0",steps:["Device Search Tool use \u0915\u0930\u0947\u0902","Default credentials: admin/admin","Configuration \u2192 Network Settings","RTSP port enable \u0915\u0930\u0947\u0902","Live stream test \u0915\u0930\u0947\u0902"],defaultPort:554,supportsSpeaker:!1},{name:"Uniview",logo:"\u26ab",popular:!1,rtspFormat:"rtsp://username:password@{ip}:554/unicast/c{channel}/s0/live",steps:["EZTools software download \u0915\u0930\u0947\u0902","Network scan \u0938\u0947 device find \u0915\u0930\u0947\u0902","Web login: admin/123456","Setup \u2192 Network \u2192 Port \u092e\u0947\u0902 RTSP verify \u0915\u0930\u0947\u0902"],defaultPort:554,supportsSpeaker:!0},{name:"Other/Generic",logo:"\u26aa",popular:!1,rtspFormat:"rtsp://username:password@{ip}:554/stream1",steps:["Camera manual check \u0915\u0930\u0947\u0902","Usually: rtsp://IP:554/stream","VLC Player \u0938\u0947 test \u0915\u0930\u0947\u0902","Working URL \u0915\u094b Schooltino \u092e\u0947\u0902 add \u0915\u0930\u0947\u0902"],defaultPort:554,supportsSpeaker:!1}],sZ=[{name:"Direct CCTV Speaker",type:"direct_cctv",description:"CCTV \u092e\u0947\u0902 built-in speaker",icon:"\ud83d\udcf9"},{name:"External PA System",type:"pa_system",description:"School PA System",icon:"\ud83d\udd0a"},{name:"Bluetooth Speaker",type:"bluetooth",description:"Wireless speaker",icon:"\ud83c\udfa7"},{name:"USB/Computer Speaker",type:"usb",description:"PC speakers",icon:"\ud83d\udda5\ufe0f"}],nZ=[{id:"tally",name:"Tally ERP",icon:"\ud83d\udcca",types:["fees","accounts"]},{id:"fedena",name:"Fedena",icon:"\ud83c\udf93",types:["students","staff","attendance"]},{id:"entab",name:"Entab CampusCare",icon:"\ud83c\udfeb",types:["students","fees"]},{id:"edumaat",name:"EduMaat",icon:"\ud83d\udcda",types:["students","fees"]},{id:"excel",name:"Excel/CSV",icon:"\ud83d\udcc1",types:["students","staff","fees"]},{id:"other",name:"Other Software",icon:"\ud83d\udcbe",types:["custom"]}];function rZ(){const{user:e,schoolId:t}=Kr(),a=Se(),[n,r]=(0,s.useState)(0),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)({cctv:{completed:!1,skipped:!1},speaker:{completed:!1,skipped:!1},website:{completed:!1,skipped:!1},dataImport:{completed:!1,skipped:!1}}),[h,p]=(0,s.useState)(null),[x,f]=(0,s.useState)({ip:"",port:"554",username:"admin",password:"",channel:"1",location:"Main Gate"}),[g,v]=(0,s.useState)([]),[b,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(null),[w,S]=(0,s.useState)(""),[_,k]=(0,s.useState)(""),[C,E]=(0,s.useState)(null),[A,P]=(0,s.useState)(!1),[O,M]=(0,s.useState)(null),[T,D]=(0,s.useState)(null),[I,R]=(0,s.useState)(null),[L,F]=(0,s.useState)("excel"),[z,B]=(0,s.useState)("");(0,s.useEffect)(()=>{U()},[t]);const U=async()=>{if(t)try{const e=await Hr.get("".concat(tZ,"/api/ai-config/status/").concat(t));e.data&&m(t=>{var a,s,n,r;return{cctv:{completed:null===(a=e.data.cctv)||void 0===a?void 0:a.configured,skipped:!1},speaker:{completed:null===(s=e.data.speaker)||void 0===s?void 0:s.configured,skipped:!1},website:{completed:null===(n=e.data.website)||void 0===n?void 0:n.connected,skipped:!1},dataImport:{completed:null===(r=e.data.api_integration)||void 0===r?void 0:r.enabled,skipped:!1}}})}catch($1){console.error("Error fetching setup status:",$1)}},H=[{id:"cctv",title:"CCTV Setup",icon:JU,description:"AI Auto-detect cameras"},{id:"speaker",title:"Speaker Setup",icon:SJ,description:"Audio configuration"},{id:"website",title:"Website Integration",icon:KY,description:"AI data extraction"},{id:"dataImport",title:"Data Import",icon:J$,description:"Import from software"}],q=e=>{m(t=>u(u({},t),{},{[e]:{completed:!1,skipped:!0}})),W(e,"skipped"),n<H.length-1?r(n+1):G(),Qt.info("".concat(H[n].title," skipped. Profile \u092e\u0947\u0902 \u091c\u093e\u0915\u0930 \u092c\u093e\u0926 \u092e\u0947\u0902 complete \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964"))},V=async e=>{var t;m(t=>u(u({},t),{},{[e]:{completed:!0,skipped:!1}})),await W(e,"completed"),n<H.length-1?r(n+1):G(),Qt.success("\u2705 ".concat(null===(t=H.find(t=>t.id===e))||void 0===t?void 0:t.title," complete!"))},W=async(e,a)=>{try{await Hr.post("".concat(tZ,"/api/school-setup/progress"),{school_id:t,step:e,status:a,config:{}})}catch($1){console.error("Error saving progress:",$1)}},G=()=>{Qt.success("\ud83c\udf89 Setup Complete! Schooltino ready \u0939\u0948!"),a("/app/dashboard")};return(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-indigo-50 p-4 md:p-6",children:(0,qr.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,qr.jsxs)("div",{className:"text-center mb-8",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,qr.jsx)(XX,{className:"w-8 h-8 text-indigo-600"}),(0,qr.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:"AI-Powered Setup Guide"})]}),(0,qr.jsx)("p",{className:"text-slate-600",children:"Tino AI automatically configure \u0915\u0930\u0947\u0917\u093e - Manual option \u092d\u0940 available \u0939\u0948"})]}),(0,qr.jsx)("div",{className:"flex justify-between mb-8 overflow-x-auto pb-2",children:H.map((e,t)=>{const a=d[e.id],s=t===n,i=null===a||void 0===a?void 0:a.completed,l=null===a||void 0===a?void 0:a.skipped;return(0,qr.jsxs)("div",{className:"flex flex-col items-center min-w-[80px] cursor-pointer transition-all ".concat(t<n?"opacity-60":""),onClick:()=>t<=n&&r(t),children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 transition-all ".concat(i?"bg-green-500 text-white":l?"bg-amber-400 text-white":s?"bg-indigo-600 text-white ring-4 ring-indigo-200":"bg-slate-200 text-slate-500"),children:i?(0,qr.jsx)(Km,{className:"w-6 h-6"}):l?(0,qr.jsx)(ZX,{className:"w-5 h-5"}):(0,qr.jsx)(e.icon,{className:"w-5 h-5"})}),(0,qr.jsx)("span",{className:"text-xs font-medium text-center ".concat(s?"text-indigo-600":"text-slate-500"),children:e.title})]},e.id)})}),(0,qr.jsxs)(Qc,{className:"shadow-xl border-0",children:[(0,qr.jsx)(Xc,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-t-xl",children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-3",children:[s.createElement(H[n].icon,{className:"w-6 h-6"}),"Step ",n+1,": ",H[n].title,(0,qr.jsx)(eJ,{className:"ml-auto bg-white/20",children:H[n].description})]})}),(0,qr.jsxs)(td,{className:"p-6",children:[0===n&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)(wc,{defaultValue:"auto",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-2 mb-4",children:[(0,qr.jsxs)(_c,{value:"auto",className:"flex items-center gap-2",children:[(0,qr.jsx)(wX,{className:"w-4 h-4"})," AI Auto-Detect"]}),(0,qr.jsxs)(_c,{value:"manual",className:"flex items-center gap-2",children:[(0,qr.jsx)(wh,{className:"w-4 h-4"})," Manual Setup"]})]}),(0,qr.jsxs)(kc,{value:"auto",className:"space-y-4",children:[(0,qr.jsx)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:(0,qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(XX,{className:"w-5 h-5 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-indigo-900",children:"AI Auto-Detection"}),(0,qr.jsx)("p",{className:"text-sm text-indigo-700 mt-1",children:"Tino AI \u0906\u092a\u0915\u0947 network \u0915\u094b scan \u0915\u0930\u0947\u0917\u093e \u0914\u0930 CCTV cameras automatically detect \u0914\u0930 configure \u0915\u0930\u0947\u0917\u093e\u0964"})]})]})}),(0,qr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,qr.jsx)(Rl,{placeholder:"Camera IP (optional) - 192.168.1.100",value:x.ip,onChange:e=>f(u(u({},x),{},{ip:e.target.value})),className:"flex-1"}),(0,qr.jsx)(Dl,{onClick:async()=>{c(!0),y("");try{var e,a;const s=await Hr.post("".concat(tZ,"/api/ai-config/cctv/auto-detect"),{school_id:t,ip_address:x.ip||null,network_scan:!0,device_name:x.location});(null===(e=s.data.devices_found)||void 0===e?void 0:e.length)>0?(v(s.data.devices_found),Qt.success("\ud83c\udf89 ".concat(s.data.devices_found.length," cameras detected!"))):Qt.info("No cameras auto-detected. Please configure manually."),(null===(a=s.data.configured_devices)||void 0===a?void 0:a.length)>0&&Qt.success("\u2705 ".concat(s.data.configured_devices.length," cameras auto-configured!")),s.data.ai_suggestions&&y(s.data.ai_suggestions)}catch($1){Qt.error("Auto-detection failed. Try manual configuration.")}finally{c(!1)}},disabled:o,className:"bg-indigo-600 hover:bg-indigo-700",children:o?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}),"Scanning..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(ZU,{className:"w-4 h-4 mr-2"}),"Auto-Detect Cameras"]})})]}),g.length>0&&(0,qr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,qr.jsxs)("h4",{className:"font-semibold text-green-800 mb-2",children:["\u2705 ",g.length," Cameras Found!"]}),(0,qr.jsx)("div",{className:"space-y-2",children:g.map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-3 bg-white p-2 rounded-lg",children:[(0,qr.jsx)(JU,{className:"w-5 h-5 text-green-600"}),(0,qr.jsxs)("span",{className:"font-medium",children:[e.ip,":",e.port]}),(0,qr.jsx)(eJ,{children:e.detected_brand}),(0,qr.jsx)(eJ,{variant:"outline",className:"text-green-600",children:e.status})]},t))})]}),b&&(0,qr.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)(XX,{className:"w-5 h-5 text-purple-600"}),(0,qr.jsx)("h4",{className:"font-semibold text-purple-800",children:"AI Suggestions"})]}),(0,qr.jsx)("p",{className:"text-sm text-purple-700 whitespace-pre-line",children:b})]})]}),(0,qr.jsxs)(kc,{value:"manual",className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 mb-3",children:"1. CCTV Brand Select \u0915\u0930\u0947\u0902:"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:aZ.map(e=>(0,qr.jsx)("button",{onClick:()=>{p(e),f(t=>u(u({},t),{},{port:e.defaultPort.toString()}))},className:"p-3 rounded-xl border-2 text-left transition-all ".concat((null===h||void 0===h?void 0:h.name)===e.name?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"),children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"text-xl",children:e.logo}),(0,qr.jsx)("span",{className:"font-medium text-sm",children:e.name}),e.popular&&(0,qr.jsx)(eJ,{className:"text-xs",children:"Popular"})]})},e.name))})]}),h&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4",children:[(0,qr.jsxs)("h4",{className:"font-medium text-slate-800 mb-2",children:[h.name," Setup Steps:"]}),(0,qr.jsx)("ol",{className:"space-y-1 text-sm text-slate-600",children:h.steps.map((e,t)=>(0,qr.jsxs)("li",{className:"flex gap-2",children:[(0,qr.jsxs)("span",{className:"text-indigo-600 font-medium",children:[t+1,"."]}),e]},t))})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm text-slate-600 mb-1 block",children:"Camera IP Address *"}),(0,qr.jsx)(Rl,{placeholder:"192.168.1.100",value:x.ip,onChange:e=>f(u(u({},x),{},{ip:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm text-slate-600 mb-1 block",children:"Port"}),(0,qr.jsx)(Rl,{placeholder:"554",value:x.port,onChange:e=>f(u(u({},x),{},{port:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm text-slate-600 mb-1 block",children:"Username"}),(0,qr.jsx)(Rl,{placeholder:"admin",value:x.username,onChange:e=>f(u(u({},x),{},{username:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm text-slate-600 mb-1 block",children:"Password *"}),(0,qr.jsx)(Rl,{type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:x.password,onChange:e=>f(u(u({},x),{},{password:e.target.value}))})]}),(0,qr.jsxs)("div",{className:"md:col-span-2",children:[(0,qr.jsx)("label",{className:"text-sm text-slate-600 mb-1 block",children:"Camera Location"}),(0,qr.jsx)(Rl,{placeholder:"Main Gate / Class 10-A / Office",value:x.location,onChange:e=>f(u(u({},x),{},{location:e.target.value}))})]})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(x.ip&&x.password){l(!0);try{var e;const a=await Hr.post("".concat(tZ,"/api/ai-config/cctv/manual-config"),null,{params:{school_id:t,device_name:x.location||"Camera 1",ip_address:x.ip,port:parseInt(x.port),username:x.username,password:x.password,brand:(null===h||void 0===h||null===(e=h.name)||void 0===e?void 0:e.toLowerCase())||"hikvision",location:x.location}});a.data.success&&(Qt.success("\u2705 CCTV configured successfully!"),y(a.data.ai_guide||""),V("cctv"))}catch($1){var a,s;Qt.error("Configuration failed: "+((null===(a=$1.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||$1.message))}finally{l(!1)}}else Qt.error("IP address \u0914\u0930 password required \u0939\u0948\u0902")},disabled:i||!x.ip,className:"bg-green-600 hover:bg-green-700",children:[i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Save & Configure"]})]})]})]}),(0,qr.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(eZ,{className:"w-5 h-5 text-amber-600"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-amber-800 font-medium",children:"Help \u091a\u093e\u0939\u093f\u090f?"}),(0,qr.jsxs)("p",{className:"text-xs text-amber-700",children:["WhatsApp: ",(0,qr.jsx)("strong",{children:"+91 78799 67616"})]})]})]})})]}),1===n&&(0,qr.jsx)("div",{className:"space-y-6",children:(0,qr.jsxs)(wc,{defaultValue:"auto",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-2 mb-4",children:[(0,qr.jsxs)(_c,{value:"auto",className:"flex items-center gap-2",children:[(0,qr.jsx)(wX,{className:"w-4 h-4"})," AI Auto-Configure"]}),(0,qr.jsxs)(_c,{value:"manual",className:"flex items-center gap-2",children:[(0,qr.jsx)(wh,{className:"w-4 h-4"})," Manual Guide"]})]}),(0,qr.jsxs)(kc,{value:"auto",className:"space-y-4",children:[(0,qr.jsx)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:(0,qr.jsx)("p",{className:"text-sm text-indigo-700",children:"AI automatically detect \u0915\u0930\u0947\u0917\u093e \u0906\u092a\u0915\u0947 CCTV \u092e\u0947\u0902 speaker \u0939\u0948 \u092f\u093e \u0928\u0939\u0940\u0902, \u0914\u0930 best configuration suggest \u0915\u0930\u0947\u0917\u093e\u0964"})}),(0,qr.jsx)("div",{className:"grid md:grid-cols-2 gap-3",children:sZ.map(e=>(0,qr.jsx)("button",{onClick:()=>N(e),className:"p-4 rounded-xl border-2 text-left transition-all ".concat((null===j||void 0===j?void 0:j.type)===e.type?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"),children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("span",{className:"text-2xl",children:e.icon}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]})},e.type))}),j&&(0,qr.jsxs)(Dl,{onClick:async()=>{l(!0);try{const a=await Hr.post("".concat(tZ,"/api/ai-config/speaker/auto-config"),{school_id:t,speaker_type:(null===j||void 0===j?void 0:j.type)||"direct_cctv"});var e;if(a.data.success)Qt.success("\u2705 Speaker configured!"),S((null===(e=a.data.speaker_config)||void 0===e?void 0:e.ai_guide)||""),V("speaker")}catch($1){Qt.error("Speaker config failed")}finally{l(!1)}},disabled:i,className:"bg-indigo-600 hover:bg-indigo-700",children:[i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(nJ,{className:"w-4 h-4 mr-2"}),"AI Configure Speaker"]}),w&&(0,qr.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)(XX,{className:"w-5 h-5 text-purple-600"}),(0,qr.jsx)("h4",{className:"font-semibold text-purple-800",children:"AI Guide"})]}),(0,qr.jsx)("p",{className:"text-sm text-purple-700 whitespace-pre-line",children:w})]})]}),(0,qr.jsxs)(kc,{value:"manual",className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4",children:[(0,qr.jsx)("h4",{className:"font-medium mb-3",children:"Speaker Connection Types:"}),sZ.map(e=>(0,qr.jsxs)("div",{className:"mb-4 last:mb-0",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("span",{children:e.icon}),(0,qr.jsx)("span",{className:"font-medium",children:e.name})]}),(0,qr.jsxs)("ol",{className:"text-sm text-slate-600 ml-8 space-y-1",children:["direct_cctv"===e.type&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("li",{children:"1. CCTV web interface open \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("li",{children:"2. Audio Settings \u2192 Output enable"}),(0,qr.jsx)("li",{children:"3. Two-way Audio ON \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("li",{children:"4. Volume 50-70% set \u0915\u0930\u0947\u0902"})]}),"pa_system"===e.type&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("li",{children:"1. PA amplifier ON \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("li",{children:"2. Audio out connect \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("li",{children:"3. Volume balance set \u0915\u0930\u0947\u0902"})]}),"bluetooth"===e.type&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("li",{children:"1. Speaker pairing mode \u092e\u0947\u0902 \u0930\u0916\u0947\u0902"}),(0,qr.jsx)("li",{children:"2. Tino device \u0938\u0947 pair \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("li",{children:"3. Audio output select \u0915\u0930\u0947\u0902"})]}),"usb"===e.type&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("li",{children:"1. Speaker connect \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("li",{children:"2. Default device select \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("li",{children:"3. Browser permissions allow \u0915\u0930\u0947\u0902"})]})]})]},e.type))]}),(0,qr.jsxs)(Dl,{onClick:()=>{const e=new SpeechSynthesisUtterance("Namaste! Schooltino speaker test!");e.lang="hi-IN",speechSynthesis.speak(e),Qt.success("Audio test playing...")},className:"bg-green-600 hover:bg-green-700",children:[(0,qr.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Test Audio"]})]})]})}),2===n&&(0,qr.jsx)("div",{className:"space-y-6",children:(0,qr.jsxs)(wc,{defaultValue:"auto",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-2 mb-4",children:[(0,qr.jsxs)(_c,{value:"auto",className:"flex items-center gap-2",children:[(0,qr.jsx)(wX,{className:"w-4 h-4"})," AI Extract Data"]}),(0,qr.jsxs)(_c,{value:"manual",className:"flex items-center gap-2",children:[(0,qr.jsx)(a$,{className:"w-4 h-4"})," Integration Script"]})]}),(0,qr.jsxs)(kc,{value:"auto",className:"space-y-4",children:[(0,qr.jsx)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:(0,qr.jsx)("p",{className:"text-sm text-indigo-700",children:"AI \u0906\u092a\u0915\u0940 existing website \u0938\u0947 school details automatically extract \u0915\u0930\u0947\u0917\u093e - Name, Address, Contact, etc."})}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Rl,{placeholder:"https://myschool.com",value:_,onChange:e=>k(e.target.value),className:"flex-1"}),(0,qr.jsx)(Dl,{onClick:async()=>{if(_){P(!0);try{const e=await Hr.post("".concat(tZ,"/api/ai-config/website/auto-extract"),{school_id:t,website_url:_,extract_data:!0,auto_import:!0});e.data.success?(M(e.data.extracted_data),Qt.success("\ud83c\udf89 AI \u0928\u0947 website \u0938\u0947 data extract \u0915\u0930 \u0932\u093f\u092f\u093e!")):Qt.error(e.data.error||"Extraction failed")}catch($1){Qt.error("Website extraction failed")}finally{P(!1)}}else Qt.error("Website URL enter \u0915\u0930\u0947\u0902")},disabled:A||!_,className:"bg-indigo-600 hover:bg-indigo-700",children:A?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(nJ,{className:"w-4 h-4 mr-1"}),"AI Extract"]})})]}),O&&(0,qr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,qr.jsx)(Km,{className:"w-5 h-5 text-green-600"}),(0,qr.jsx)("span",{className:"font-semibold text-green-800",children:"Data Extracted!"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[O.school_name&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Name:"})," ",O.school_name]}),O.phone&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Phone:"})," ",O.phone]}),O.email&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Email:"})," ",O.email]}),O.address&&(0,qr.jsxs)("div",{className:"col-span-2",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Address:"})," ",O.address]})]})]}),(0,qr.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 pt-4 border-t",children:[(0,qr.jsxs)("button",{onClick:()=>E("new"),className:"p-4 rounded-xl border-2 text-center ".concat("new"===C?"border-indigo-500 bg-indigo-50":"border-slate-200"),children:[(0,qr.jsx)(nJ,{className:"w-8 h-8 text-amber-500 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"font-medium",children:"Website \u0928\u0939\u0940\u0902 \u0939\u0948?"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"\u0939\u092e \u092c\u0928\u093e \u0926\u0947\u0902\u0917\u0947"})]}),(0,qr.jsxs)("button",{onClick:()=>q("website"),className:"p-4 rounded-xl border-2 border-slate-200 text-center hover:bg-slate-50",children:[(0,qr.jsx)(ZX,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),(0,qr.jsx)("p",{className:"font-medium",children:"Skip for Now"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"\u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u0930\u0947\u0902\u0917\u0947"})]})]}),"new"===C&&(0,qr.jsx)("div",{className:"bg-indigo-50 rounded-xl p-4 text-center",children:(0,qr.jsxs)("a",{href:"https://wa.me/917879967616?text=Hi!%20I%20want%20school%20website",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-full font-medium",children:["WhatsApp \u092a\u0930 Contact \u0915\u0930\u0947\u0902",(0,qr.jsx)(s$,{className:"w-4 h-4"})]})})]}),(0,qr.jsxs)(kc,{value:"manual",className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4",children:[(0,qr.jsx)("h4",{className:"font-medium mb-3",children:"Website Integration Script Generate \u0915\u0930\u0947\u0902:"}),(0,qr.jsxs)(Dl,{onClick:async()=>{l(!0);try{const e=await Hr.post("".concat(tZ,"/api/ai-config/website/generate-integration-script"),null,{params:{school_id:t,website_platform:"html"}});e.data.success&&(D(e.data),Qt.success("Integration script generated!"))}catch($1){Qt.error("Script generation failed")}finally{l(!1)}},disabled:i,className:"bg-indigo-600 hover:bg-indigo-700",children:[i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(a$,{className:"w-4 h-4 mr-2"}),"Generate Script"]})]}),T&&(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsx)("div",{className:"bg-slate-900 text-green-400 rounded-xl p-4 overflow-auto",children:(0,qr.jsx)("pre",{className:"text-xs",children:T.scripts.html})}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(T.scripts.html),Qt.success("Script copied!")},children:[(0,qr.jsx)(XU,{className:"w-4 h-4 mr-2"}),"Copy Script"]}),(0,qr.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,qr.jsx)("h5",{className:"font-medium mb-2",children:"Steps:"}),(0,qr.jsx)("ol",{className:"space-y-1",children:T.manual_steps.map((e,t)=>(0,qr.jsx)("li",{children:e},t))})]})]})]})]})}),3===n&&(0,qr.jsx)("div",{className:"space-y-6",children:(0,qr.jsxs)(wc,{defaultValue:"auto",className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-2 mb-4",children:[(0,qr.jsxs)(_c,{value:"auto",className:"flex items-center gap-2",children:[(0,qr.jsx)(wX,{className:"w-4 h-4"})," AI Import"]}),(0,qr.jsxs)(_c,{value:"manual",className:"flex items-center gap-2",children:[(0,qr.jsx)($U,{className:"w-4 h-4"})," Excel Upload"]})]}),(0,qr.jsxs)(kc,{value:"auto",className:"space-y-4",children:[(0,qr.jsx)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:(0,qr.jsx)("p",{className:"text-sm text-indigo-700",children:"AI \u0906\u092a\u0915\u0947 existing software \u0938\u0947 data automatically import \u0914\u0930 map \u0915\u0930\u0947\u0917\u093e\u0964"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-800 mb-3",children:"Software Select \u0915\u0930\u0947\u0902:"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:nZ.map(e=>(0,qr.jsx)("button",{onClick:()=>R(e),className:"p-3 rounded-xl border-2 text-left transition-all ".concat((null===I||void 0===I?void 0:I.id)===e.id?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"),children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"text-xl",children:e.icon}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.types.join(", ")})]})]})},e.id))})]}),I&&(0,qr.jsxs)(Dl,{onClick:async()=>{if(I){l(!0);try{const e=await Hr.post("".concat(tZ,"/api/ai-config/software/auto-import"),{school_id:t,software_name:I.id,import_type:L});e.data.success&&(B(e.data.ai_mapping||""),Qt.success("Import process started!"))}catch($1){Qt.error("Import failed")}finally{l(!1)}}else Qt.error("Software select \u0915\u0930\u0947\u0902")},disabled:i,className:"bg-indigo-600 hover:bg-indigo-700",children:[i?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(nJ,{className:"w-4 h-4 mr-2"}),"AI Import from ",I.name]}),z&&(0,qr.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)(XX,{className:"w-5 h-5 text-purple-600"}),(0,qr.jsx)("h4",{className:"font-semibold text-purple-800",children:"AI Import Guide"})]}),(0,qr.jsx)("p",{className:"text-sm text-purple-700 whitespace-pre-line",children:z})]})]}),(0,qr.jsxs)(kc,{value:"manual",className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4",children:[(0,qr.jsx)("h4",{className:"font-medium mb-3",children:"Excel Template Download \u0915\u0930\u0947\u0902:"}),(0,qr.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-1"}),"Students Template"]}),(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-1"}),"Staff Template"]}),(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-1"}),"Fees Template"]})]})]}),(0,qr.jsxs)("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-indigo-400 transition-colors cursor-pointer",children:[(0,qr.jsx)($U,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),(0,qr.jsx)("p",{className:"text-slate-600",children:"Excel file drag & drop \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"\u092f\u093e click \u0915\u0930\u0915\u0947 select \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)("button",{onClick:()=>q("dataImport"),className:"flex-1 p-3 rounded-xl border-2 border-slate-200 text-center hover:bg-slate-50",children:[(0,qr.jsx)(lH,{className:"w-6 h-6 text-blue-500 mx-auto mb-1"}),(0,qr.jsx)("p",{className:"font-medium text-sm",children:"Start Fresh"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"No existing data"})]}),(0,qr.jsxs)("button",{onClick:()=>q("dataImport"),className:"flex-1 p-3 rounded-xl border-2 border-slate-200 text-center hover:bg-slate-50",children:[(0,qr.jsx)(ZX,{className:"w-6 h-6 text-slate-400 mx-auto mb-1"}),(0,qr.jsx)("p",{className:"font-medium text-sm",children:"Skip"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"\u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u0930\u0947\u0902\u0917\u0947"})]})]})]})]})}),(0,qr.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>q(H[n].id),className:"flex items-center gap-2",children:[(0,qr.jsx)(ZX,{className:"w-4 h-4"}),"Skip This Step"]}),(0,qr.jsxs)(Dl,{onClick:()=>V(H[n].id),className:"bg-indigo-600 hover:bg-indigo-700 flex items-center gap-2",children:[n<H.length-1?"Next Step":"Complete Setup",(0,qr.jsx)(uh,{className:"w-4 h-4"})]})]})]})]}),(0,qr.jsx)("p",{className:"text-center text-sm text-slate-500 mt-4",children:"Skip \u0915\u093f\u090f \u0917\u090f steps Profile \u2192 Settings \u092e\u0947\u0902 \u091c\u093e\u0915\u0930 \u092c\u093e\u0926 \u092e\u0947\u0902 complete \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902"})]})})}const iZ="".concat("","/api/owner-console-x7k9m2");function lZ(){var e,t,a,n,r,i,l,o,c,d;Se();const[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),[f,g]=(0,s.useState)(localStorage.getItem("ownerToken")),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)("dashboard"),[N,w]=(0,s.useState)({email:"",password:""}),[S,_]=(0,s.useState)(null),[k,C]=(0,s.useState)([]),[E,A]=(0,s.useState)([]),[P,O]=(0,s.useState)(null),[M,T]=(0,s.useState)([]),[D,I]=(0,s.useState)(null),[R,L]=(0,s.useState)([]),[F,z]=(0,s.useState)(null),[B,U]=(0,s.useState)(null),[H,q]=(0,s.useState)([]),[V,W]=(0,s.useState)([]),[G,K]=(0,s.useState)(null),[Y,J]=(0,s.useState)(!1),[$,Q]=(0,s.useState)(!1),[X,Z]=(0,s.useState)(!1),[ee,te]=(0,s.useState)({name:"",messages_count:1e3,price:500,validity_days:30}),[ae,se]=(0,s.useState)({school_id:"",pack_id:"",amount_paid:0,payment_method:"cash"}),[ne,re]=(0,s.useState)({api_key:"",api_secret:"",instance_id:"",phone_number:""}),[ie,le]=(0,s.useState)([]),[oe,ce]=(0,s.useState)(null),[de,ue]=(0,s.useState)(!1),[me,he]=(0,s.useState)({school_id:"",credits:1e3,amount_paid:500,payment_method:"cash"}),[pe,xe]=(0,s.useState)(""),[fe,ge]=(0,s.useState)("all"),[ve,be]=(0,s.useState)(null),[ye,je]=(0,s.useState)(null),[Ne,we]=(0,s.useState)(!1),[_e,ke]=(0,s.useState)({days:30,features:"all"}),[Ce,Ee]=(0,s.useState)(null),[Ae,Pe]=(0,s.useState)(!1),[Oe,Me]=(0,s.useState)({service:"",api_key:"",secret_key:"",monthly_limit:""});(0,s.useEffect)(()=>{f&&Te()},[f]),(0,s.useEffect)(()=>{m&&Ie()},[m]);const Te=async()=>{try{const e=await Hr.get("".concat(iZ,"/verify?token=").concat(f));e.data.valid&&(x(e.data.admin),h(!0))}catch(e){localStorage.removeItem("ownerToken"),g(null),h(!1)}},De=async e=>{e.preventDefault(),b(!0);try{const e=await Hr.post("".concat(iZ,"/login"),N);localStorage.setItem("ownerToken",e.data.access_token),g(e.data.access_token),x(e.data.admin),h(!0),Qt.success("Welcome Platform Owner!")}catch(t){Qt.error("Invalid credentials")}finally{b(!1)}},Ie=async()=>{try{const e=await Hr.get("".concat(iZ,"/dashboard?token=").concat(f));_(e.data)}catch(e){Qt.error("Failed to load dashboard")}},Re=async()=>{try{const e=new URLSearchParams({token:f});pe&&e.append("search",pe),"all"!==fe&&e.append("status",fe);const t=await Hr.get("".concat(iZ,"/schools?").concat(e));C(t.data.schools)}catch(e){Qt.error("Failed to load schools")}},Le=async()=>{try{const e=await Hr.get("".concat(iZ,"/api-keys?token=").concat(f));L(e.data.keys||[])}catch(e){Qt.error("Failed to load API keys")}},Fe=async()=>{try{const e=await Hr.get("".concat(iZ,"/whatsapp/config?token=").concat(f));U(e.data.config)}catch(e){console.error("Failed to load WhatsApp config")}},ze=async()=>{try{const e=await Hr.get("".concat(iZ,"/whatsapp/packs?token=").concat(f));q(e.data.packs||[])}catch(e){console.error("Failed to load message packs")}},Be=async()=>{try{const e=await Hr.get("".concat(iZ,"/whatsapp/schools?token=").concat(f));W(e.data.schools||[])}catch(e){console.error("Failed to load schools WhatsApp status")}},Ue=async()=>{try{const e=await Hr.get("".concat("","/api/message-credits/all-schools"));le(e.data.schools||[])}catch(e){console.error("Failed to load credits")}},He=async()=>{try{const e=await Hr.get("".concat("","/api/message-credits/stats"));ce(e.data)}catch(e){console.error("Failed to load credit stats")}},qe=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{await Hr.put("".concat(iZ,"/schools/").concat(e,"/status?token=").concat(f),{school_id:e,status:t,reason:a}),Qt.success("School ".concat(t)),Re()}catch(s){Qt.error("Failed to update status")}},Ve=async(e,t)=>{try{await Hr.post("".concat(iZ,"/subscriptions/").concat(e,"/extend-trial?days=").concat(t,"&token=").concat(f)),Qt.success("Trial extended by ".concat(t," days")),Re()}catch(a){Qt.error("Failed to extend trial")}};return(0,s.useEffect)(()=>{"schools"===y&&m&&Re(),"earnings"===y&&m&&(async()=>{try{const e=await Hr.get("".concat(iZ,"/earnings?token=").concat(f));O(e.data)}catch(e){Qt.error("Failed to load earnings")}})(),"support"===y&&m&&(async()=>{try{const e=await Hr.get("".concat(iZ,"/support-tickets?token=").concat(f));T(e.data.tickets)}catch(e){Qt.error("Failed to load tickets")}})(),"api-usage"===y&&m&&((async()=>{try{const e=await Hr.get("".concat(iZ,"/api-usage?token=").concat(f));I(e.data)}catch(e){Qt.error("Failed to load API usage")}})(),(async()=>{try{const e=await Hr.get("".concat(iZ,"/cost-alerts?token=").concat(f));z(e.data)}catch(e){console.error("Failed to load cost alerts")}})()),"api-keys"===y&&m&&Le(),"credits"===y&&m&&(Ue(),He()),"whatsapp"===y&&m&&(Fe(),ze(),Be(),(async()=>{try{const e=await Hr.get("".concat(iZ,"/whatsapp/usage?token=").concat(f));K(e.data)}catch(e){console.error("Failed to load WhatsApp usage")}})())},[y,m]),m?(0,qr.jsxs)("div",{className:"min-h-screen bg-slate-100",children:[(0,qr.jsx)("nav",{className:"bg-slate-900 text-white px-6 py-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(zc,{className:"w-5 h-5 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"font-bold",children:"Super Admin Panel"}),(0,qr.jsx)("p",{className:"text-xs text-white/60",children:"Schooltino Platform"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsxs)("span",{className:"text-sm text-white/60",children:["Welcome, ",null===p||void 0===p?void 0:p.name]}),(0,qr.jsxs)(Dl,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("ownerToken"),g(null),x(null),h(!1),Qt.success("Logged out")},className:"text-white/60 hover:text-white",children:[(0,qr.jsx)(rH,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),(0,qr.jsxs)("div",{className:"flex",children:[(0,qr.jsx)("aside",{className:"w-64 bg-white shadow-lg min-h-[calc(100vh-72px)]",children:(0,qr.jsx)("nav",{className:"p-4 space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:oh},{id:"schools",label:"Schools",icon:y$},{id:"credits",label:"Message Credits",icon:nH},{id:"earnings",label:"Earnings",icon:Sh},{id:"whatsapp",label:"WhatsApp Business",icon:ih},{id:"api-usage",label:"API Usage & Costs",icon:nJ},{id:"api-keys",label:"API Keys",icon:Vm},{id:"support",label:"Support Tickets",icon:eZ},{id:"settings",label:"Settings",icon:wh}].map(e=>(0,qr.jsxs)("button",{onClick:()=>j(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(y===e.id?"bg-indigo-50 text-indigo-600":"text-slate-600 hover:bg-slate-50"),children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5"}),e.label]},e.id))})}),(0,qr.jsxs)("main",{className:"flex-1 p-6",children:["dashboard"===y&&S&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Dashboard Overview"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-blue-100",children:"Total Schools"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:S.schools.total}),(0,qr.jsxs)("p",{className:"text-sm text-blue-200 mt-1",children:["+",S.schools.recent_30_days," this month"]})]}),(0,qr.jsx)(y$,{className:"w-12 h-12 text-blue-200"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-emerald-100",children:"Total Earnings"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold",children:["\u20b9",S.earnings.total.toLocaleString()]}),(0,qr.jsxs)("p",{className:"text-sm text-emerald-200 mt-1",children:["Recurring: \u20b9",(S.earnings.monthly_recurring+S.earnings.yearly_recurring).toLocaleString()]})]}),(0,qr.jsx)(Sh,{className:"w-12 h-12 text-emerald-200"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-purple-100",children:"Active Schools"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:S.schools.active}),(0,qr.jsxs)("p",{className:"text-sm text-purple-200 mt-1",children:[S.schools.trial," on trial"]})]}),(0,qr.jsx)(Km,{className:"w-12 h-12 text-purple-200"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-amber-100",children:"Total Users"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:S.users.total_students+S.users.total_staff}),(0,qr.jsxs)("p",{className:"text-sm text-amber-200 mt-1",children:[S.users.total_students," students"]})]}),(0,qr.jsx)(Lc,{className:"w-12 h-12 text-amber-200"})]})})})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{className:"text-lg",children:"Subscription Plans"})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Basic ERP"}),(0,qr.jsx)("span",{className:"font-semibold",children:S.subscriptions.by_plan.basic})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"AI Powered"}),(0,qr.jsx)("span",{className:"font-semibold text-indigo-600",children:S.subscriptions.by_plan.ai_powered})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Enterprise"}),(0,qr.jsx)("span",{className:"font-semibold text-amber-600",children:S.subscriptions.by_plan.enterprise})]})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{className:"text-lg",children:"Support Status"})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)("span",{className:"text-2xl font-bold text-red-600",children:S.support.open_issues})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:"Open Tickets"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Needs attention"})]})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{className:"text-lg",children:"Quick Actions"})}),(0,qr.jsxs)(td,{className:"space-y-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",className:"w-full justify-start",onClick:()=>j("schools"),children:[(0,qr.jsx)(y$,{className:"w-4 h-4 mr-2"})," View All Schools"]}),(0,qr.jsxs)(Dl,{variant:"outline",className:"w-full justify-start",onClick:()=>j("support"),children:[(0,qr.jsx)(ih,{className:"w-4 h-4 mr-2"})," Check Tickets"]})]})]})]})]}),"schools"===y&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Schools Management"}),(0,qr.jsxs)(Dl,{onClick:Re,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-2"})," Refresh"]})]}),(0,qr.jsxs)("div",{className:"flex gap-4",children:[(0,qr.jsx)("div",{className:"flex-1",children:(0,qr.jsx)(Rl,{placeholder:"Search by name, email, or ID...",value:pe,onChange:e=>xe(e.target.value),className:"w-full"})}),(0,qr.jsxs)("select",{value:fe,onChange:e=>ge(e.target.value),className:"px-4 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"all",children:"All Status"}),(0,qr.jsx)("option",{value:"active",children:"Active"}),(0,qr.jsx)("option",{value:"trial",children:"Trial"}),(0,qr.jsx)("option",{value:"suspended",children:"Suspended"})]}),(0,qr.jsx)(Dl,{onClick:Re,children:(0,qr.jsx)(ZU,{className:"w-4 h-4"})})]}),(0,qr.jsx)("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-slate-50",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-600",children:"School"}),(0,qr.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-600",children:"Plan"}),(0,qr.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-600",children:"Status"}),(0,qr.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-600",children:"Students"}),(0,qr.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-600",children:"Actions"})]})}),(0,qr.jsx)("tbody",{className:"divide-y divide-slate-100",children:k.map(e=>{var t,a,s,n;return(0,qr.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"px-6 py-4",children:(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.email})]})}),(0,qr.jsx)("td",{className:"px-6 py-4",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("enterprise"===(null===(t=e.subscription)||void 0===t?void 0:t.plan_type)?"bg-amber-100 text-amber-700":"ai_powered"===(null===(a=e.subscription)||void 0===a?void 0:a.plan_type)?"bg-indigo-100 text-indigo-700":"bg-slate-100 text-slate-700"),children:(null===(s=e.subscription)||void 0===s?void 0:s.plan_type)||"Trial"})}),(0,qr.jsx)("td",{className:"px-6 py-4",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_trial?"Trial":e.is_active?"Active":"Suspended"})}),(0,qr.jsx)("td",{className:"px-6 py-4 text-slate-600",children:(null===(n=e.stats)||void 0===n?void 0:n.students)||0}),(0,qr.jsx)("td",{className:"px-6 py-4",children:(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>(async e=>{try{const t=await Hr.get("".concat(iZ,"/schools/").concat(e,"?token=").concat(f));je(t.data),be(e)}catch(t){Qt.error("Failed to load school details")}})(e.id),children:(0,qr.jsx)(Hc,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>Ve(e.id,15),children:(0,qr.jsx)(Ah,{className:"w-4 h-4"})}),e.is_active?(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",className:"text-red-500",onClick:()=>qe(e.id,"suspended"),children:(0,qr.jsx)(tH,{className:"w-4 h-4"})}):(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",className:"text-green-500",onClick:()=>qe(e.id,"active"),children:(0,qr.jsx)(Km,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),ye&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,qr.jsxs)(Xc,{className:"flex flex-row items-center justify-between",children:[(0,qr.jsx)(Zc,{children:ye.school.name}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>je(null),children:(0,qr.jsx)(eY,{className:"w-5 h-5"})})]}),(0,qr.jsxs)(td,{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Email"}),(0,qr.jsx)("p",{className:"font-medium",children:ye.school.email})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Phone"}),(0,qr.jsx)("p",{className:"font-medium",children:ye.school.phone||"N/A"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Students"}),(0,qr.jsx)("p",{className:"font-medium",children:ye.stats.students})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Staff"}),(0,qr.jsx)("p",{className:"font-medium",children:ye.stats.staff})]})]}),ye.subscription&&(0,qr.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg",children:[(0,qr.jsx)("h4",{className:"font-medium mb-2",children:"Subscription"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Plan:"}),(0,qr.jsx)("span",{className:"ml-2 font-medium",children:ye.subscription.plan_type})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Amount:"}),(0,qr.jsxs)("span",{className:"ml-2 font-medium",children:["\u20b9",ye.subscription.amount]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Valid Until:"}),(0,qr.jsx)("span",{className:"ml-2 font-medium",children:ye.subscription.valid_until})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Status:"}),(0,qr.jsx)("span",{className:"ml-2 font-medium",children:ye.subscription.status})]})]})]}),ye.director&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h4",{className:"font-medium mb-2",children:"Director"}),(0,qr.jsx)("p",{children:ye.director.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:ye.director.email})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{onClick:()=>Ve(ve,30),children:"Extend Trial 30 Days"}),(0,qr.jsx)(Dl,{variant:"outline",children:"Edit Subscription"})]})]})]})})]}),"earnings"===y&&P&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Earnings Report"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Total Earnings"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold text-emerald-600",children:["\u20b9",P.total_earnings.toLocaleString()]})]})}),(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Pending Payments"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold text-amber-600",children:["\u20b9",P.pending_payments.toLocaleString()]})]})}),(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Total Transactions"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:P.total_transactions})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Monthly Breakdown"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-3",children:Object.entries(P.monthly_breakdown||{}).slice(0,6).map(e=>{let[t,a]=e;return(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsx)("span",{className:"font-medium",children:t}),(0,qr.jsxs)("span",{className:"text-emerald-600 font-semibold",children:["\u20b9",a.toLocaleString()]})]},t)})})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Recent Payments"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-3",children:P.recent_payments.slice(0,10).map(e=>{var t,a;return(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.school_name||"School"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:null===(t=e.created_at)||void 0===t?void 0:t.slice(0,10)})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"font-semibold ".concat("success"===e.status?"text-emerald-600":"text-amber-600"),children:["\u20b9",null===(a=e.amount)||void 0===a?void 0:a.toLocaleString()]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.status})]})]},e.id)})})})]})]}),"credits"===y&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Message Credits System"}),(0,qr.jsxs)(Dl,{onClick:()=>ue(!0),children:[(0,qr.jsx)(nH,{className:"w-4 h-4 mr-2"})," Add Credits"]})]}),oe&&(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-emerald-500 to-green-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-emerald-200",children:"Total Credits Sold"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:(null===(e=oe.all_time)||void 0===e?void 0:e.total_credits_sold)||0}),(0,qr.jsx)("p",{className:"text-sm text-emerald-200 mt-1",children:"All time"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500 to-cyan-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-blue-200",children:"Revenue"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold",children:["\u20b9",((null===(t=oe.all_time)||void 0===t?void 0:t.total_revenue)||0).toLocaleString()]}),(0,qr.jsx)("p",{className:"text-sm text-blue-200 mt-1",children:"From credits"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-500 to-violet-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-purple-200",children:"Credits Used"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:(null===(a=oe.all_time)||void 0===a?void 0:a.total_credits_used)||0}),(0,qr.jsx)("p",{className:"text-sm text-purple-200 mt-1",children:"Messages sent"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500 to-orange-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-amber-200",children:"Low Balance Schools"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:(null===(n=oe.alerts)||void 0===n?void 0:n.low_credit_schools)||0}),(0,qr.jsxs)("p",{className:"text-sm text-amber-200 mt-1",children:[(null===(r=oe.alerts)||void 0===r?void 0:r.no_credit_schools)||0," with zero"]})]})})]}),(null===oe||void 0===oe?void 0:oe.this_month)&&(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"This Month"})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:oe.this_month.credits_sold}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Credits Sold"})]}),(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\u20b9",oe.this_month.revenue]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Revenue"})]}),(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,qr.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:oe.this_month.credits_used}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Credits Used"})]})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Schools Credit Balance"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-slate-50",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"School"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Available"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Total Purchased"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Used"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"This Month"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Status"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Actions"})]})}),(0,qr.jsx)("tbody",{className:"divide-y divide-slate-100",children:ie.map(e=>(0,qr.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"px-4 py-3 font-medium",children:e.school_name}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsx)("span",{className:"font-bold ".concat(e.available_credits>500?"text-emerald-600":e.available_credits>100?"text-amber-600":e.available_credits>0?"text-orange-600":"text-red-600"),children:e.available_credits})}),(0,qr.jsx)("td",{className:"px-4 py-3 text-slate-600",children:e.total_purchased}),(0,qr.jsx)("td",{className:"px-4 py-3 text-slate-600",children:e.total_used}),(0,qr.jsx)("td",{className:"px-4 py-3 text-slate-600",children:e.usage_this_month}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:"active"===e.status?"\u2705 Active":"\u274c No Credits"})}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsx)(Dl,{size:"sm",onClick:()=>{he(u(u({},me),{},{school_id:e.school_id})),ue(!0)},children:"Add Credits"})})]},e.school_id))})]})})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Message Credit Pricing (Suggested)"})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,qr.jsxs)("div",{className:"border rounded-lg p-4 text-center hover:border-emerald-500",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Starter"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:"\u20b9299"}),(0,qr.jsx)("p",{className:"text-lg",children:"500 Credits"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400",children:"\u20b90.60/message"})]}),(0,qr.jsxs)("div",{className:"border rounded-lg p-4 text-center hover:border-blue-500 border-blue-200 bg-blue-50",children:[(0,qr.jsx)("p",{className:"text-sm text-blue-600",children:"Popular"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"\u20b9499"}),(0,qr.jsx)("p",{className:"text-lg",children:"1000 Credits"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400",children:"\u20b90.50/message"})]}),(0,qr.jsxs)("div",{className:"border rounded-lg p-4 text-center hover:border-purple-500",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Pro"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"\u20b9999"}),(0,qr.jsx)("p",{className:"text-lg",children:"2500 Credits"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400",children:"\u20b90.40/message"})]}),(0,qr.jsxs)("div",{className:"border rounded-lg p-4 text-center hover:border-amber-500",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Unlimited*"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:"\u20b91999"}),(0,qr.jsx)("p",{className:"text-lg",children:"6000 Credits"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400",children:"\u20b90.33/message"})]})]})})]}),de&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-md",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Add Credits to School"})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("select",{value:me.school_id,onChange:e=>he(u(u({},me),{},{school_id:e.target.value})),className:"w-full p-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select School"}),k.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm text-slate-600",children:"Credits to Add"}),(0,qr.jsx)(Rl,{type:"number",value:me.credits,onChange:e=>he(u(u({},me),{},{credits:parseInt(e.target.value)}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm text-slate-600",children:"Amount Received (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:me.amount_paid,onChange:e=>he(u(u({},me),{},{amount_paid:parseInt(e.target.value)}))})]}),(0,qr.jsxs)("select",{value:me.payment_method,onChange:e=>he(u(u({},me),{},{payment_method:e.target.value})),className:"w-full p-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"cash",children:"Cash"}),(0,qr.jsx)("option",{value:"online",children:"Online/UPI"}),(0,qr.jsx)("option",{value:"free",children:"Free/Promotional"})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{onClick:async()=>{try{await Hr.post("".concat("","/api/message-credits/add"),me),Qt.success("Credits added successfully!"),ue(!1),he({school_id:"",credits:1e3,amount_paid:500,payment_method:"cash"}),Ue(),He()}catch(e){Qt.error("Failed to add credits")}},className:"flex-1",children:"Add Credits"}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>ue(!1),children:"Cancel"})]})]})]})})]}),"support"===y&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Support Tickets"}),(0,qr.jsx)("div",{className:"space-y-4",children:0===M.length?(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-12 text-center",children:[(0,qr.jsx)(Km,{className:"w-12 h-12 text-emerald-500 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-600",children:"No open tickets! All issues resolved."})]})}):M.map(e=>(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("open"===e.status?"bg-red-100 text-red-700":"pending"===e.status?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"),children:e.status}),(0,qr.jsx)("span",{className:"text-sm text-slate-500",children:e.school_name})]}),(0,qr.jsx)("p",{className:"font-medium",children:e.subject}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:e.message})]}),(0,qr.jsx)(Dl,{size:"sm",variant:"outline",children:"Respond"})]})})},e.id))})]}),"settings"===y&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Settings"}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Admin Profile"})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Name"}),(0,qr.jsx)("p",{className:"font-medium",children:null===p||void 0===p?void 0:p.name})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Email"}),(0,qr.jsx)("p",{className:"font-medium",children:null===p||void 0===p?void 0:p.email})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Role"}),(0,qr.jsx)("p",{className:"font-medium capitalize",children:null===p||void 0===p?void 0:p.role})]})]})]})]}),"api-usage"===y&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"API Usage & Costs"}),F&&F.total_alerts>0&&(0,qr.jsx)(Qc,{className:"border-red-200 bg-red-50",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(QU,{className:"w-6 h-6 text-red-500"}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"font-medium text-red-700",children:[F.total_alerts," Cost Alerts"]}),(0,qr.jsxs)("p",{className:"text-sm text-red-600",children:[F.critical," critical, ",F.warnings," warnings"]})]})]})})}),D&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-violet-500 to-purple-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-violet-200",children:"OpenAI / Emergent LLM"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold",children:[D.summary.openai.total_queries," queries"]}),(0,qr.jsxs)("p",{className:"text-sm text-violet-200",children:["Est. Cost: \u20b9",(83*D.summary.openai.estimated_cost).toFixed(0)]})]}),(0,qr.jsx)(XX,{className:"w-10 h-10 text-violet-200"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-pink-500 to-rose-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-pink-200",children:"ElevenLabs Voice"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold",children:[D.summary.elevenlabs.total_requests," requests"]}),(0,qr.jsxs)("p",{className:"text-sm text-pink-200",children:["Est. Cost: \u20b9",(83*D.summary.elevenlabs.estimated_cost).toFixed(0)]})]}),(0,qr.jsx)(lJ,{className:"w-10 h-10 text-pink-200"})]})})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500 to-cyan-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-blue-200",children:"Razorpay"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold",children:["\u20b9",D.summary.razorpay.total_amount.toLocaleString()]}),(0,qr.jsxs)("p",{className:"text-sm text-blue-200",children:["Fees: \u20b9",D.summary.razorpay.estimated_fees.toFixed(0)]})]}),(0,qr.jsx)(nH,{className:"w-10 h-10 text-blue-200"})]})})})]}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Total Estimated Monthly Cost"}),(0,qr.jsxs)("p",{className:"text-4xl font-bold text-red-600",children:["\u20b9",(83*D.summary.total_estimated_cost).toFixed(0)]})]}),(0,qr.jsx)(Th,{className:"w-12 h-12 text-red-300"})]})})}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Top API Consumers (OpenAI)"})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"space-y-3",children:[(D.top_openai_consumers||[]).map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.school_name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[e.queries," queries"]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"font-semibold text-violet-600",children:[e.tokens," tokens"]}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:["~\u20b9",(.001*e.tokens).toFixed(0)]})]})]},t)),(!D.top_openai_consumers||0===D.top_openai_consumers.length)&&(0,qr.jsx)("p",{className:"text-center text-slate-500 py-4",children:"No usage data yet"})]})})]})]}),!D&&(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-12 text-center",children:[(0,qr.jsx)(nJ,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Loading API usage data..."})]})})]}),"api-keys"===y&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"API Keys Management"}),(0,qr.jsxs)(Dl,{onClick:()=>Pe(!0),children:[(0,qr.jsx)(Vm,{className:"w-4 h-4 mr-2"})," Add API Key"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(XX,{className:"w-5 h-5 text-violet-500"}),"OpenAI / Emergent LLM"]})}),(0,qr.jsx)(td,{children:R.find(e=>"openai"===e.service||"emergent"===e.service)?(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"API Key"}),(0,qr.jsx)("span",{className:"font-mono text-sm",children:null===(i=R.find(e=>"openai"===e.service||"emergent"===e.service))||void 0===i?void 0:i.api_key})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Status"}),(0,qr.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"Active"})]})]}):(0,qr.jsx)("p",{className:"text-slate-500 text-center py-4",children:"Not configured"})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(lJ,{className:"w-5 h-5 text-pink-500"}),"ElevenLabs Voice"]})}),(0,qr.jsx)(td,{children:R.find(e=>"elevenlabs"===e.service)?(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"API Key"}),(0,qr.jsx)("span",{className:"font-mono text-sm",children:null===(l=R.find(e=>"elevenlabs"===e.service))||void 0===l?void 0:l.api_key})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Status"}),(0,qr.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"Active"})]})]}):(0,qr.jsx)("p",{className:"text-slate-500 text-center py-4",children:"Not configured"})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(nH,{className:"w-5 h-5 text-blue-500"}),"Razorpay Payments"]})}),(0,qr.jsx)(td,{children:R.find(e=>"razorpay"===e.service)?(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Key ID"}),(0,qr.jsx)("span",{className:"font-mono text-sm",children:null===(o=R.find(e=>"razorpay"===e.service))||void 0===o?void 0:o.api_key})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Secret"}),(0,qr.jsx)("span",{className:"font-mono text-sm",children:"***hidden***"})]})]}):(0,qr.jsx)("p",{className:"text-slate-500 text-center py-4",children:"Not configured"})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(ih,{className:"w-5 h-5 text-green-500"}),"Twilio SMS"]})}),(0,qr.jsx)(td,{children:R.find(e=>"twilio"===e.service)?(0,qr.jsx)("div",{className:"space-y-3",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Account SID"}),(0,qr.jsx)("span",{className:"font-mono text-sm",children:null===(c=R.find(e=>"twilio"===e.service))||void 0===c?void 0:c.api_key})]})}):(0,qr.jsx)("p",{className:"text-slate-500 text-center py-4",children:"Not configured"})})]})]}),Ae&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-md",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Add API Key"})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("select",{value:Oe.service,onChange:e=>Me(u(u({},Oe),{},{service:e.target.value})),className:"w-full p-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Service"}),(0,qr.jsx)("option",{value:"openai",children:"OpenAI"}),(0,qr.jsx)("option",{value:"emergent",children:"Emergent LLM"}),(0,qr.jsx)("option",{value:"elevenlabs",children:"ElevenLabs"}),(0,qr.jsx)("option",{value:"razorpay",children:"Razorpay"}),(0,qr.jsx)("option",{value:"twilio",children:"Twilio"}),(0,qr.jsx)("option",{value:"sendgrid",children:"SendGrid"})]}),(0,qr.jsx)(Rl,{placeholder:"API Key",value:Oe.api_key,onChange:e=>Me(u(u({},Oe),{},{api_key:e.target.value}))}),"razorpay"===Oe.service&&(0,qr.jsx)(Rl,{placeholder:"Secret Key",type:"password",value:Oe.secret_key,onChange:e=>Me(u(u({},Oe),{},{secret_key:e.target.value}))}),(0,qr.jsx)(Rl,{placeholder:"Monthly Limit (\u20b9) - Optional",type:"number",value:Oe.monthly_limit,onChange:e=>Me(u(u({},Oe),{},{monthly_limit:e.target.value}))}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{onClick:async()=>{try{await Hr.post("".concat(iZ,"/api-keys?token=").concat(f),Oe),Qt.success("".concat(Oe.service," API key saved")),Pe(!1),Me({service:"",api_key:"",secret_key:"",monthly_limit:""}),Le()}catch(e){Qt.error("Failed to save API key")}},className:"flex-1",children:"Save"}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>Pe(!1),children:"Cancel"})]})]})]})})]}),"whatsapp"===y&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"WhatsApp Business (BotBiz)"}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>Z(!0),children:[(0,qr.jsx)(wh,{className:"w-4 h-4 mr-2"})," Configure API"]}),(0,qr.jsxs)(Dl,{onClick:()=>J(!0),children:[(0,qr.jsx)(ih,{className:"w-4 h-4 mr-2"})," Create Pack"]})]})]}),G&&(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-green-200",children:"Messages Sent"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:G.total_messages_sent}),(0,qr.jsx)("p",{className:"text-sm text-green-200 mt-1",children:"This month"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-blue-500 to-cyan-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-blue-200",children:"Packs Sold"}),(0,qr.jsx)("p",{className:"text-3xl font-bold",children:G.total_purchases}),(0,qr.jsx)("p",{className:"text-sm text-blue-200 mt-1",children:"This month"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500 to-orange-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-amber-200",children:"Revenue"}),(0,qr.jsxs)("p",{className:"text-3xl font-bold",children:["\u20b9",(null===(d=G.total_revenue)||void 0===d?void 0:d.toLocaleString())||0]}),(0,qr.jsx)("p",{className:"text-sm text-amber-200 mt-1",children:"From message packs"})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-purple-500 to-violet-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsx)("p",{className:"text-purple-200",children:"API Status"}),(0,qr.jsx)("p",{className:"text-2xl font-bold",children:null!==B&&void 0!==B&&B.is_active?"\u2705 Active":"\u274c Inactive"}),(0,qr.jsx)("p",{className:"text-sm text-purple-200 mt-1",children:"BotBiz Connection"})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Message Packs (Sell to Schools)"})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[H.map(e=>(0,qr.jsxs)("div",{className:"border rounded-lg p-4 hover:border-green-500 transition-colors",children:[(0,qr.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,qr.jsxs)("p",{className:"text-3xl font-bold text-green-600 my-2",children:["\u20b9",e.price]}),(0,qr.jsxs)("div",{className:"text-sm text-slate-600 space-y-1",children:[(0,qr.jsxs)("p",{children:["\ud83d\udce9 ",e.messages_count," Messages"]}),(0,qr.jsxs)("p",{children:["\ud83d\udcc5 ",e.validity_days," Days Valid"]})]}),(0,qr.jsx)(Dl,{className:"w-full mt-4",variant:"outline",onClick:()=>{se(u(u({},ae),{},{pack_id:e.id,amount_paid:e.price})),Q(!0)},children:"Assign to School"})]},e.id)),0===H.length&&(0,qr.jsxs)("div",{className:"col-span-3 text-center py-8 text-slate-500",children:[(0,qr.jsx)(ih,{className:"w-12 h-12 mx-auto mb-2 text-slate-300"}),(0,qr.jsx)("p",{children:"No message packs created yet"}),(0,qr.jsx)(Dl,{className:"mt-4",onClick:()=>J(!0),children:"Create First Pack"})]})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Schools Message Balance"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-slate-50",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"School"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Balance"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Used This Month"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Last Purchase"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-slate-600",children:"Actions"})]})}),(0,qr.jsx)("tbody",{className:"divide-y divide-slate-100",children:V.map(e=>{var t;return(0,qr.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"px-4 py-3 font-medium",children:e.school_name}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsxs)("span",{className:"font-bold ".concat(e.balance>100?"text-green-600":e.balance>0?"text-amber-600":"text-red-600"),children:[e.balance," msgs"]})}),(0,qr.jsx)("td",{className:"px-4 py-3 text-slate-600",children:e.usage_this_month}),(0,qr.jsx)("td",{className:"px-4 py-3 text-sm text-slate-500",children:(null===(t=e.last_purchase)||void 0===t?void 0:t.slice(0,10))||"Never"}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsx)(Dl,{size:"sm",onClick:()=>{se(u(u({},ae),{},{school_id:e.school_id})),Q(!0)},children:"Add Messages"})})]},e.school_id)})})]})})})]}),Y&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-md",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Create Message Pack"})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsx)(Rl,{placeholder:"Pack Name (e.g., Starter Pack)",value:ee.name,onChange:e=>te(u(u({},ee),{},{name:e.target.value}))}),(0,qr.jsx)(Rl,{type:"number",placeholder:"Messages Count",value:ee.messages_count,onChange:e=>te(u(u({},ee),{},{messages_count:parseInt(e.target.value)}))}),(0,qr.jsx)(Rl,{type:"number",placeholder:"Price (\u20b9)",value:ee.price,onChange:e=>te(u(u({},ee),{},{price:parseInt(e.target.value)}))}),(0,qr.jsx)(Rl,{type:"number",placeholder:"Validity (Days)",value:ee.validity_days,onChange:e=>te(u(u({},ee),{},{validity_days:parseInt(e.target.value)}))}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{onClick:async()=>{try{await Hr.post("".concat(iZ,"/whatsapp/packs?token=").concat(f),ee),Qt.success("Message pack created!"),J(!1),te({name:"",messages_count:1e3,price:500,validity_days:30}),ze()}catch(e){Qt.error("Failed to create pack")}},className:"flex-1",children:"Create Pack"}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>J(!1),children:"Cancel"})]})]})]})}),$&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-md",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"Assign Message Pack to School"})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("select",{value:ae.school_id,onChange:e=>se(u(u({},ae),{},{school_id:e.target.value})),className:"w-full p-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select School"}),k.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,qr.jsxs)("select",{value:ae.pack_id,onChange:e=>{const t=H.find(t=>t.id===e.target.value);se(u(u({},ae),{},{pack_id:e.target.value,amount_paid:(null===t||void 0===t?void 0:t.price)||0}))},className:"w-full p-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Pack"}),H.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," - \u20b9",e.price]},e.id))]}),(0,qr.jsx)(Rl,{type:"number",placeholder:"Amount Paid (\u20b9)",value:ae.amount_paid,onChange:e=>se(u(u({},ae),{},{amount_paid:parseInt(e.target.value)}))}),(0,qr.jsxs)("select",{value:ae.payment_method,onChange:e=>se(u(u({},ae),{},{payment_method:e.target.value})),className:"w-full p-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"cash",children:"Cash"}),(0,qr.jsx)("option",{value:"online",children:"Online"}),(0,qr.jsx)("option",{value:"free",children:"Free/Promo"})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{onClick:async()=>{try{const e=H.find(e=>e.id===ae.pack_id);await Hr.post("".concat(iZ,"/whatsapp/assign-pack?token=").concat(f),{school_id:ae.school_id,pack_id:ae.pack_id,messages_purchased:(null===e||void 0===e?void 0:e.messages_count)||1e3,amount_paid:ae.amount_paid,payment_method:ae.payment_method}),Qt.success("Message pack assigned!"),Q(!1),Be()}catch(e){Qt.error("Failed to assign pack")}},className:"flex-1",children:"Assign Pack"}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"})]})]})]})}),X&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-md",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{children:"WhatsApp API Configuration (BotBiz)"})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsx)(Rl,{placeholder:"API Key",value:ne.api_key,onChange:e=>re(u(u({},ne),{},{api_key:e.target.value}))}),(0,qr.jsx)(Rl,{placeholder:"API Secret (Optional)",type:"password",value:ne.api_secret,onChange:e=>re(u(u({},ne),{},{api_secret:e.target.value}))}),(0,qr.jsx)(Rl,{placeholder:"Instance ID",value:ne.instance_id,onChange:e=>re(u(u({},ne),{},{instance_id:e.target.value}))}),(0,qr.jsx)(Rl,{placeholder:"WhatsApp Number (+91...)",value:ne.phone_number,onChange:e=>re(u(u({},ne),{},{phone_number:e.target.value}))}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{onClick:async()=>{try{await Hr.post("".concat(iZ,"/whatsapp/config?token=").concat(f),ne),Qt.success("WhatsApp configuration saved!"),Z(!1),Fe()}catch(e){Qt.error("Failed to save configuration")}},className:"flex-1",children:"Save Configuration"}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"})]})]})]})})]})]})]})]}):(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-md bg-white/10 backdrop-blur-lg border-white/20",children:[(0,qr.jsxs)(Xc,{className:"text-center",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,qr.jsx)(zc,{className:"w-8 h-8 text-white"})}),(0,qr.jsx)(Zc,{className:"text-2xl text-white",children:"Super Admin"}),(0,qr.jsx)("p",{className:"text-white/60",children:"Schooltino Platform Control"})]}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("form",{onSubmit:De,className:"space-y-4",children:[(0,qr.jsx)(Rl,{type:"email",placeholder:"Admin Email",value:N.email,onChange:e=>w(u(u({},N),{},{email:e.target.value})),className:"bg-white/10 border-white/20 text-white placeholder:text-white/40"}),(0,qr.jsx)(Rl,{type:"password",placeholder:"Password",value:N.password,onChange:e=>w(u(u({},N),{},{password:e.target.value})),className:"bg-white/10 border-white/20 text-white placeholder:text-white/40"}),(0,qr.jsx)(Dl,{type:"submit",className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600",disabled:v,children:v?"Logging in...":"Login as Super Admin"})]})})]})})}"".concat("","/api");const oZ=Dc("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),cZ=Dc("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),dZ={1:[{date:1,name:"\u0928\u0935 \u0935\u0930\u094d\u0937",type:"festival"},{date:14,name:"\u092e\u0915\u0930 \u0938\u0902\u0915\u094d\u0930\u093e\u0902\u0924\u093f",type:"festival"},{date:23,name:"\u0928\u0947\u0924\u093e\u091c\u0940 \u091c\u092f\u0902\u0924\u0940",type:"national"},{date:26,name:"\u0917\u0923\u0924\u0902\u0924\u094d\u0930 \u0926\u093f\u0935\u0938",type:"national"}],2:[{date:3,name:"\u092c\u0938\u0902\u0924 \u092a\u0902\u091a\u092e\u0940",type:"festival"},{date:19,name:"\u0936\u093f\u0935\u093e\u091c\u0940 \u091c\u092f\u0902\u0924\u0940",type:"state"},{date:26,name:"\u092e\u0939\u093e\u0936\u093f\u0935\u0930\u093e\u0924\u094d\u0930\u093f",type:"festival"}],3:[{date:3,name:"\u0939\u094b\u0932\u0940",type:"festival"},{date:4,name:"\u0927\u0942\u0932\u0902\u0921\u0940",type:"festival"},{date:31,name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0926\u093f\u0935\u0938",type:"state"}],4:[{date:6,name:"\u0930\u093e\u092e \u0928\u0935\u092e\u0940",type:"festival"},{date:14,name:"\u0905\u092e\u094d\u092c\u0947\u0921\u0915\u0930 \u091c\u092f\u0902\u0924\u0940",type:"national"},{date:21,name:"\u092e\u0939\u093e\u0935\u0940\u0930 \u091c\u092f\u0902\u0924\u0940",type:"festival"}],5:[{date:1,name:"\u092e\u091c\u0926\u0942\u0930 \u0926\u093f\u0935\u0938",type:"national"},{date:7,name:"\u092c\u0941\u0926\u094d\u0927 \u092a\u0942\u0930\u094d\u0923\u093f\u092e\u093e",type:"festival"},{date:10,name:"\u0917\u094d\u0930\u0940\u0937\u094d\u092e\u093e\u0935\u0915\u093e\u0936 \u092a\u094d\u0930\u093e\u0930\u0902\u092d",type:"vacation"}],6:[{date:21,name:"\u0905\u0902\u0924\u0930\u094d\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f \u092f\u094b\u0917 \u0926\u093f\u0935\u0938",type:"national"},{date:30,name:"\u0917\u094d\u0930\u0940\u0937\u094d\u092e\u093e\u0935\u0915\u093e\u0936 \u0938\u092e\u093e\u092a\u094d\u0924",type:"vacation"}],7:[{date:1,name:"\u0935\u093f\u0926\u094d\u092f\u093e\u0932\u092f \u092a\u0941\u0928\u0903 \u092a\u094d\u0930\u093e\u0930\u0902\u092d",type:"school"},{date:17,name:"\u092e\u0941\u0939\u0930\u094d\u0930\u092e",type:"festival"}],8:[{date:11,name:"\u0930\u0915\u094d\u0937\u093e\u092c\u0902\u0927\u0928",type:"festival"},{date:15,name:"\u0938\u094d\u0935\u0924\u0902\u0924\u094d\u0930\u0924\u093e \u0926\u093f\u0935\u0938",type:"national"},{date:19,name:"\u091c\u0928\u094d\u092e\u093e\u0937\u094d\u091f\u092e\u0940",type:"festival"}],9:[{date:5,name:"\u0936\u093f\u0915\u094d\u0937\u0915 \u0926\u093f\u0935\u0938",type:"national"},{date:16,name:"\u0908\u0926-\u0909\u0932-\u091c\u0941\u0939\u093e (\u092c\u0915\u0930\u0940\u0926)",type:"festival"},{date:25,name:"\u092e\u0941\u0939\u0930\u094d\u0930\u092e",type:"festival"}],10:[{date:2,name:"\u0917\u093e\u0902\u0927\u0940 \u091c\u092f\u0902\u0924\u0940",type:"national"},{date:7,name:"\u0928\u0935\u0930\u093e\u0924\u094d\u0930\u093f \u092a\u094d\u0930\u093e\u0930\u0902\u092d",type:"festival"},{date:15,name:"\u0926\u0936\u0939\u0930\u093e",type:"festival"}],11:[{date:1,name:"\u091b\u094b\u091f\u0940 \u0926\u0940\u092a\u093e\u0935\u0932\u0940",type:"festival"},{date:2,name:"\u0926\u0940\u092a\u093e\u0935\u0932\u0940",type:"festival"},{date:3,name:"\u0917\u094b\u0935\u0930\u094d\u0927\u0928 \u092a\u0942\u091c\u093e",type:"festival"},{date:4,name:"\u092d\u093e\u0908 \u0926\u0942\u091c",type:"festival"},{date:14,name:"\u092c\u093e\u0932 \u0926\u093f\u0935\u0938",type:"national"},{date:17,name:"\u0917\u0941\u0930\u0941 \u0928\u093e\u0928\u0915 \u091c\u092f\u0902\u0924\u0940",type:"festival"}],12:[{date:25,name:"\u0915\u094d\u0930\u093f\u0938\u092e\u0938",type:"festival"},{date:26,name:"\u0936\u0940\u0924\u0915\u093e\u0932\u0940\u0928 \u0905\u0935\u0915\u093e\u0936 \u092a\u094d\u0930\u093e\u0930\u0902\u092d",type:"vacation"}]},uZ=["\u091c\u0928\u0935\u0930\u0940","\u092b\u0930\u0935\u0930\u0940","\u092e\u093e\u0930\u094d\u091a","\u0905\u092a\u094d\u0930\u0948\u0932","\u092e\u0908","\u091c\u0942\u0928","\u091c\u0941\u0932\u093e\u0908","\u0905\u0917\u0938\u094d\u0924","\u0938\u093f\u0924\u0902\u092c\u0930","\u0905\u0915\u094d\u091f\u0942\u092c\u0930","\u0928\u0935\u0902\u092c\u0930","\u0926\u093f\u0938\u0902\u092c\u0930"],mZ=["January","February","March","April","May","June","July","August","September","October","November","December"],hZ=["\u0930\u0935\u093f","\u0938\u094b\u092e","\u092e\u0902\u0917\u0932","\u092c\u0941\u0927","\u0917\u0941\u0930\u0941","\u0936\u0941\u0915\u094d\u0930","\u0936\u0928\u093f"],pZ=["SUN","MON","TUE","WED","THU","FRI","SAT"];function xZ(e){let{school:t,customEvents:a=[],testimonials:n=[],photos:r=[],achievements:i=[]}=e;const l=(0,s.useRef)(),[o,c]=(0,s.useState)((new Date).getMonth()+1),[d,u]=(0,s.useState)(2026),m=(0,GX.useReactToPrint)({content:()=>l.current,documentTitle:"".concat((null===t||void 0===t?void 0:t.name)||"School","_Calendar_").concat(o,"_").concat(d),pageStyle:"\n      @page {\n        size: A4 portrait;\n        margin: 5mm;\n      }\n      @media print {\n        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }\n        .no-print { display: none !important; }\n      }\n    "}),h=e=>dZ[e]||[],p=(e,t)=>a.filter(a=>{const s=new Date(a.date);return s.getMonth()+1===e&&s.getFullYear()===t}),x=(e,t,a)=>[...h(t).filter(t=>t.date===e),...p(t,a).filter(t=>new Date(t.date).getDate()===e)];return(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between no-print bg-white p-4 rounded-lg shadow",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Dl,{variant:"outline",size:"icon",onClick:()=>{1===o?(c(12),u(d-1)):c(o-1)},children:(0,qr.jsx)(AY,{className:"w-5 h-5"})}),(0,qr.jsxs)("h2",{className:"text-xl font-bold min-w-[200px] text-center",children:[uZ[o-1]," / ",mZ[o-1]," ",d]}),(0,qr.jsx)(Dl,{variant:"outline",size:"icon",onClick:()=>{12===o?(c(1),u(d+1)):c(o+1)},children:(0,qr.jsx)(qc,{className:"w-5 h-5"})})]}),(0,qr.jsx)("div",{className:"flex gap-2",children:(0,qr.jsxs)(Dl,{onClick:m,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-2"}),"Print Calendar"]})})]}),(0,qr.jsx)("div",{ref:l,className:"bg-white",children:(0,qr.jsxs)("div",{className:"w-[210mm] min-h-[297mm] mx-auto bg-white p-4 shadow-lg print:shadow-none print:p-2",children:[(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white p-3 rounded-t-lg relative overflow-hidden",children:[(null===t||void 0===t?void 0:t.logo_url)&&(0,qr.jsx)("div",{className:"absolute right-0 top-0 w-40 h-40 opacity-10",children:(0,qr.jsx)("img",{src:t.logo_url,alt:"",className:"w-full h-full object-contain"})}),(0,qr.jsxs)("div",{className:"flex items-center justify-between relative z-10",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(null===t||void 0===t?void 0:t.logo_url)&&(0,qr.jsx)("img",{src:t.logo_url,alt:"",className:"w-16 h-16 rounded-full border-2 border-white object-cover"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold",children:(null===t||void 0===t?void 0:t.name)||"School Name Not Set"}),(0,qr.jsx)("p",{className:"text-sm opacity-90",children:(null===t||void 0===t?void 0:t.motto)||(null===t||void 0===t?void 0:t.tagline)||""})]})]}),(0,qr.jsxs)("div",{className:"text-right text-sm",children:[(null===t||void 0===t?void 0:t.phone)&&(0,qr.jsxs)("p",{children:["\ud83d\udcde ",t.phone]}),(null===t||void 0===t?void 0:t.email)&&(0,qr.jsxs)("p",{children:["\ud83d\udce7 ",t.email]}),(null===t||void 0===t?void 0:t.website_url)&&(0,qr.jsxs)("p",{children:["\ud83c\udf10 ",t.website_url]})]})]})]}),(0,qr.jsx)("div",{className:"bg-gradient-to-r from-orange-500 via-white to-green-500 p-2 text-center",children:(0,qr.jsxs)("h2",{className:"text-3xl font-bold text-blue-900",children:[uZ[o-1]," / ",mZ[o-1]," ",d]})}),(0,qr.jsxs)("div",{className:"mt-2",children:[(0,qr.jsx)("div",{className:"grid grid-cols-7 bg-blue-900 text-white",children:hZ.map((e,t)=>(0,qr.jsxs)("div",{className:"text-center py-2 font-bold ".concat(0===t?"text-red-300":""),children:[(0,qr.jsx)("div",{children:e}),(0,qr.jsx)("div",{className:"text-xs",children:pZ[t]})]},t))}),(0,qr.jsx)("div",{className:"grid grid-cols-7",children:(()=>{const e=new Date(d,o,0).getDate();const t=((e,t)=>new Date(t,e-1,1).getDay())(o,d),a=[];for(let s=0;s<t;s++)a.push((0,qr.jsx)("div",{className:"h-16 border border-gray-200"},"empty-".concat(s)));for(let s=1;s<=e;s++){const e=x(s,o,d),n=(t+s-1)%7===0,r=e.some(e=>"national"===e.type||"festival"===e.type);a.push((0,qr.jsxs)("div",{className:"h-16 border border-gray-200 p-1 text-center relative ".concat(n||r?"bg-red-50":"bg-white"),children:[(0,qr.jsx)("span",{className:"text-lg font-bold ".concat(n||r?"text-red-600":"text-gray-900"),children:s}),e.length>0&&(0,qr.jsx)("div",{className:"absolute bottom-0 left-0 right-0 text-[8px] leading-tight px-0.5 truncate text-red-600 font-medium",children:e[0].name})]},s))}return a})()})]}),(0,qr.jsxs)("div",{className:"mt-3 bg-gray-50 p-3 rounded-lg",children:[(0,qr.jsxs)("h3",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:[(0,qr.jsx)(eh,{className:"w-4 h-4"}),"\u092e\u0939\u0924\u094d\u0935\u092a\u0942\u0930\u094d\u0923 \u0924\u093f\u0925\u093f\u092f\u093e\u0901 / Important Dates"]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[...h(o),...p(o,d)].sort((e,t)=>(e.date||new Date(e.date).getDate())-(t.date||new Date(t.date).getDate())).map((e,t)=>(0,qr.jsxs)("div",{className:"flex items-center gap-2 ".concat("national"===e.type?"text-orange-700":"festival"===e.type?"text-purple-700":"vacation"===e.type?"text-green-700":"text-blue-700"),children:[(0,qr.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("national"===e.type?"bg-orange-500":"festival"===e.type?"bg-purple-500":"vacation"===e.type?"bg-green-500":"bg-blue-500")}),(0,qr.jsx)("span",{className:"font-bold",children:e.date||new Date(e.date).getDate()}),(0,qr.jsx)("span",{children:e.name})]},t))})]}),i.length>0&&(0,qr.jsxs)("div",{className:"mt-3 bg-gradient-to-r from-yellow-50 to-orange-50 p-3 rounded-lg border-2 border-yellow-400",children:[(0,qr.jsxs)("h3",{className:"font-bold text-yellow-800 mb-2 flex items-center gap-2",children:[(0,qr.jsx)(fJ,{className:"w-5 h-5 text-yellow-600"}),'\ud83c\udfc6 \u0939\u092e\u093e\u0930\u0947 \u0917\u094c\u0930\u0935 / Our Achievers - "Diamonds of School"']}),(0,qr.jsx)("div",{className:"grid grid-cols-4 gap-2",children:i.slice(0,8).map((e,t)=>(0,qr.jsxs)("div",{className:"text-center p-2 bg-white rounded-lg shadow-sm",children:[e.photo&&(0,qr.jsx)("img",{src:e.photo,alt:"",className:"w-12 h-12 rounded-full mx-auto mb-1 border-2 border-yellow-400"}),(0,qr.jsx)("p",{className:"text-xs font-bold",children:e.name}),(0,qr.jsx)("p",{className:"text-[10px] text-gray-600",children:e.achievement})]},t))})]}),n.length>0&&(0,qr.jsxs)("div",{className:"mt-3 bg-blue-50 p-3 rounded-lg",children:[(0,qr.jsxs)("h3",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:[(0,qr.jsx)(D$,{className:"w-4 h-4"}),"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930 / Testimonials"]}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-2",children:n.slice(0,2).map((e,t)=>(0,qr.jsxs)("div",{className:"bg-white p-2 rounded-lg text-sm italic border-l-4 border-blue-500",children:['"',e.text,'" ',(0,qr.jsx)("br",{}),(0,qr.jsxs)("span",{className:"font-bold not-italic",children:["- ",e.author]})]},t))})]}),r.length>0&&(0,qr.jsx)("div",{className:"mt-3 grid grid-cols-4 gap-2",children:r.slice(0,4).map((e,t)=>(0,qr.jsx)("div",{className:"rounded-lg overflow-hidden h-24",children:(0,qr.jsx)("img",{src:e.url,alt:"",className:"w-full h-full object-cover"})},t))}),(0,qr.jsx)("div",{className:"mt-4 pt-2 border-t-2 border-blue-900 text-center text-xs text-gray-600",children:(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsx)("span",{children:null!==t&&void 0!==t&&t.address?"\ud83d\udccd ".concat(t.address):""}),(0,qr.jsx)("span",{className:"font-bold text-blue-900",children:"Powered by Schooltino.in"}),(0,qr.jsx)("span",{children:null!==t&&void 0!==t&&t.affiliation?"Affiliation: ".concat(t.affiliation):""})]})})]})}),(0,qr.jsxs)("div",{className:"no-print bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm",children:[(0,qr.jsx)("h4",{className:"font-bold text-yellow-800 mb-2",children:"\ud83d\udccb Print Instructions / \u092a\u094d\u0930\u093f\u0902\u091f \u0928\u093f\u0930\u094d\u0926\u0947\u0936:"}),(0,qr.jsxs)("ul",{className:"space-y-1 text-yellow-700",children:[(0,qr.jsxs)("li",{children:["\u2022 ",(0,qr.jsx)("strong",{children:"Print Settings:"})," A4 Size, Portrait, Color"]}),(0,qr.jsxs)("li",{children:["\u2022 ",(0,qr.jsx)("strong",{children:"Margins:"}),' Set to "None" or "Minimum" for best results']}),(0,qr.jsxs)("li",{children:["\u2022 ",(0,qr.jsx)("strong",{children:"Scale:"}),' 100% or "Fit to Page"']}),(0,qr.jsx)("li",{children:"\u2022 Print each month separately for wall calendar"})]})]})]})}const fZ="",gZ={Rajasthan:[{date:"2025-01-26",name:"\u0917\u0923\u0924\u0902\u0924\u094d\u0930 \u0926\u093f\u0935\u0938 (Republic Day)",type:"national"},{date:"2025-03-14",name:"\u0939\u094b\u0932\u0940 (Holi)",type:"festival"},{date:"2025-03-31",name:"\u0930\u093e\u091c\u0938\u094d\u0925\u093e\u0928 \u0926\u093f\u0935\u0938",type:"state"},{date:"2025-04-14",name:"\u0905\u092e\u094d\u092c\u0947\u0921\u0915\u0930 \u091c\u092f\u0902\u0924\u0940",type:"national"},{date:"2025-04-18",name:"\u0917\u0941\u0921 \u092b\u094d\u0930\u093e\u0907\u0921\u0947",type:"national"},{date:"2025-05-12",name:"\u092c\u0941\u0926\u094d\u0927 \u092a\u0942\u0930\u094d\u0923\u093f\u092e\u093e",type:"festival"},{date:"2025-08-15",name:"\u0938\u094d\u0935\u0924\u0902\u0924\u094d\u0930\u0924\u093e \u0926\u093f\u0935\u0938 (Independence Day)",type:"national"},{date:"2025-08-26",name:"\u091c\u0928\u094d\u092e\u093e\u0937\u094d\u091f\u092e\u0940 (Janmashtami)",type:"festival"},{date:"2025-10-02",name:"\u0917\u093e\u0902\u0927\u0940 \u091c\u092f\u0902\u0924\u0940",type:"national"},{date:"2025-10-12",name:"\u0926\u0936\u0939\u0930\u093e (Dussehra)",type:"festival"},{date:"2025-10-20",name:"\u0926\u0940\u092a\u093e\u0935\u0932\u0940 \u0905\u0935\u0915\u093e\u0936 \u092a\u094d\u0930\u093e\u0930\u0902\u092d",type:"vacation"},{date:"2025-11-01",name:"\u0926\u0940\u092a\u093e\u0935\u0932\u0940 (Diwali)",type:"festival"},{date:"2025-11-05",name:"\u0917\u094b\u0935\u0930\u094d\u0927\u0928 \u092a\u0942\u091c\u093e",type:"festival"},{date:"2025-11-15",name:"\u0917\u0941\u0930\u0941 \u0928\u093e\u0928\u0915 \u091c\u092f\u0902\u0924\u0940",type:"festival"},{date:"2025-12-25",name:"\u0915\u094d\u0930\u093f\u0938\u092e\u0938 (Christmas)",type:"festival"},{date:"2026-01-01",name:"\u0928\u0935 \u0935\u0930\u094d\u0937 (New Year)",type:"festival"},{date:"2026-01-14",name:"\u092e\u0915\u0930 \u0938\u0902\u0915\u094d\u0930\u093e\u0902\u0924\u093f",type:"festival"},{date:"2026-01-26",name:"\u0917\u0923\u0924\u0902\u0924\u094d\u0930 \u0926\u093f\u0935\u0938",type:"national"},{date:"2026-03-03",name:"\u0939\u094b\u0932\u0940 (Holi)",type:"festival"}],"Madhya Pradesh":[{date:"2025-01-26",name:"\u0917\u0923\u0924\u0902\u0924\u094d\u0930 \u0926\u093f\u0935\u0938",type:"national"},{date:"2025-03-14",name:"\u0939\u094b\u0932\u0940",type:"festival"},{date:"2025-04-14",name:"\u0905\u092e\u094d\u092c\u0947\u0921\u0915\u0930 \u091c\u092f\u0902\u0924\u0940",type:"national"},{date:"2025-05-01",name:"\u092e\u0927\u094d\u092f \u092a\u094d\u0930\u0926\u0947\u0936 \u0938\u094d\u0925\u093e\u092a\u0928\u093e \u0926\u093f\u0935\u0938",type:"state"},{date:"2025-08-15",name:"\u0938\u094d\u0935\u0924\u0902\u0924\u094d\u0930\u0924\u093e \u0926\u093f\u0935\u0938",type:"national"},{date:"2025-08-26",name:"\u091c\u0928\u094d\u092e\u093e\u0937\u094d\u091f\u092e\u0940",type:"festival"},{date:"2025-10-02",name:"\u0917\u093e\u0902\u0927\u0940 \u091c\u092f\u0902\u0924\u0940",type:"national"},{date:"2025-10-12",name:"\u0926\u0936\u0939\u0930\u093e",type:"festival"},{date:"2025-11-01",name:"\u0926\u0940\u092a\u093e\u0935\u0932\u0940",type:"festival"},{date:"2025-11-15",name:"\u0917\u0941\u0930\u0941 \u0928\u093e\u0928\u0915 \u091c\u092f\u0902\u0924\u0940",type:"festival"},{date:"2025-12-25",name:"\u0915\u094d\u0930\u093f\u0938\u092e\u0938",type:"festival"}],default:[{date:"2025-01-26",name:"Republic Day",type:"national"},{date:"2025-03-14",name:"Holi",type:"festival"},{date:"2025-04-14",name:"Ambedkar Jayanti",type:"national"},{date:"2025-08-15",name:"Independence Day",type:"national"},{date:"2025-10-02",name:"Gandhi Jayanti",type:"national"},{date:"2025-10-12",name:"Dussehra",type:"festival"},{date:"2025-11-01",name:"Diwali",type:"festival"},{date:"2025-12-25",name:"Christmas",type:"festival"}]};function vZ(){const{t:e,i18n:t}=js(),{user:a,schoolId:n}=Kr(),r=(0,s.useRef)(null),i="hi"===t.language,[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[p,x]=(0,s.useState)((new Date).getMonth()),[f,g]=(0,s.useState)((new Date).getFullYear()),[v,b]=(0,s.useState)("month"),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[S,_]=(0,s.useState)({date:"",name:"",type:"school_event",description:"",photo:null}),[k,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)([]),[P,O]=(0,s.useState)(!1),[M,T]=(0,s.useState)(!1),[D,I]=(0,s.useState)([]),[R,L]=(0,s.useState)(null),[F,z]=(0,s.useState)({text:"",author:"",designation:"",photo:null}),[B,U]=(0,s.useState)([]),[H,q]=(0,s.useState)(!1),[V,W]=(0,s.useState)({name:"",achievement:"",photo:null}),[G,K]=(0,s.useState)(!1),[Y,J]=(0,s.useState)(null),$=i?["\u091c\u0928\u0935\u0930\u0940","\u092b\u0930\u0935\u0930\u0940","\u092e\u093e\u0930\u094d\u091a","\u0905\u092a\u094d\u0930\u0948\u0932","\u092e\u0908","\u091c\u0942\u0928","\u091c\u0941\u0932\u093e\u0908","\u0905\u0917\u0938\u094d\u0924","\u0938\u093f\u0924\u0902\u092c\u0930","\u0905\u0915\u094d\u091f\u0942\u092c\u0930","\u0928\u0935\u0902\u092c\u0930","\u0926\u093f\u0938\u0902\u092c\u0930"]:["January","February","March","April","May","June","July","August","September","October","November","December"],Q=i?["\u0930\u0935\u093f","\u0938\u094b\u092e","\u092e\u0902\u0917\u0932","\u092c\u0941\u0927","\u0917\u0941\u0930\u0941","\u0936\u0941\u0915\u094d\u0930","\u0936\u0928\u093f"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];(0,s.useEffect)(()=>{X()},[n]);const X=async()=>{h(!0);try{const s=localStorage.getItem("token"),r=await Hr.get("".concat(fZ,"/api/school/").concat(n),{headers:{Authorization:"Bearer ".concat(s)}});o(r.data);try{const e=await Hr.get("".concat(fZ,"/api/school/").concat(n,"/calendar-events"),{headers:{Authorization:"Bearer ".concat(s)}});d(e.data||[])}catch(e){d([])}try{const e=await Hr.get("".concat(fZ,"/api/school/").concat(n,"/calendar-photos"),{headers:{Authorization:"Bearer ".concat(s)}});A(e.data||[])}catch(t){A([])}try{const e=await Hr.get("".concat(fZ,"/api/school/").concat(n,"/testimonials"),{headers:{Authorization:"Bearer ".concat(s)}});I(e.data||[])}catch(a){I([])}}catch(s){console.error("Error fetching data:",s)}finally{h(!1)}},Z=()=>[...(()=>{var e;const t=(null===l||void 0===l||null===(e=l.settings)||void 0===e?void 0:e.state)||"default";return gZ[t]||gZ.default})(),...c].sort((e,t)=>new Date(e.date)-new Date(t.date)),ee=(e,t)=>Z().filter(a=>{const s=new Date(a.date);return s.getMonth()===e&&s.getFullYear()===t}),te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(w(e),_({date:e.date,name:e.name,type:e.type,description:e.description||"",photo:e.photo})):(w(null),_({date:"",name:"",type:"school_event",description:"",photo:null})),j(!0)},ae=()=>{j(!1),w(null),_({date:"",name:"",type:"school_event",description:"",photo:null})},se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(L(e),z({text:e.text,author:e.author,designation:e.designation||"",photo:e.photo})):(L(null),z({text:"",author:"",designation:"",photo:null})),T(!0)},ne=()=>{T(!1),L(null),z({text:"",author:"",designation:"",photo:null})},re=e=>({national:"bg-orange-500 text-white",festival:"bg-purple-500 text-white",state:"bg-blue-500 text-white",vacation:"bg-green-500 text-white",school_event:"bg-indigo-500 text-white",exam:"bg-red-500 text-white"}[e]||"bg-gray-500 text-white"),ie=e=>({national:"bg-orange-100 text-orange-800 border-orange-300",festival:"bg-purple-100 text-purple-800 border-purple-300",state:"bg-blue-100 text-blue-800 border-blue-300",vacation:"bg-green-100 text-green-800 border-green-300",school_event:"bg-indigo-100 text-indigo-800 border-indigo-300",exam:"bg-red-100 text-red-800 border-red-300"}[e]||"bg-gray-100 text-gray-800 border-gray-300"),le=e=>({national:i?"\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0940\u092f":"National",festival:i?"\u0924\u094d\u092f\u094b\u0939\u093e\u0930":"Festival",state:i?"\u0930\u093e\u091c\u094d\u092f":"State",vacation:i?"\u091b\u0941\u091f\u094d\u091f\u0940":"Vacation",school_event:i?"\u0938\u094d\u0915\u0942\u0932":"School",exam:i?"\u092a\u0930\u0940\u0915\u094d\u0937\u093e":"Exam"}[e]||e);return m?(0,qr.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"school-calendar-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 print:hidden",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(eh,{className:"w-7 h-7 text-indigo-600"}),i?"\u0935\u093f\u0926\u094d\u092f\u093e\u0932\u092f \u0915\u0948\u0932\u0947\u0902\u0921\u0930":"School Calendar"]}),(0,qr.jsxs)("p",{className:"text-slate-500",children:[(null===l||void 0===l?void 0:l.name)||"School"," \u2022 ",i?"\u0936\u0948\u0915\u094d\u0937\u0923\u093f\u0915 \u0938\u0924\u094d\u0930":"Academic Session"," 2025-26"]})]}),(0,qr.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,qr.jsxs)(Dl,{onClick:()=>C(!0),variant:"outline",size:"sm",children:[(0,qr.jsx)(Ph,{className:"w-4 h-4 mr-2"}),i?"\u092b\u094b\u091f\u094b":"Photos"," (",E.length,")"]}),(0,qr.jsxs)(Dl,{onClick:()=>se(),variant:"outline",size:"sm",children:[(0,qr.jsx)(oZ,{className:"w-4 h-4 mr-2"}),i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930":"Testimonials"]}),(0,qr.jsxs)(Dl,{onClick:()=>te(),variant:"outline",size:"sm",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e":"Event"]}),(0,qr.jsxs)(Dl,{onClick:async()=>{K(!0);try{var e;const a=localStorage.getItem("token"),s=Z().slice(0,15).map(e=>"".concat(e.date,": ").concat(e.name)).join("\n"),r=await Hr.post("".concat(fZ,"/api/calendar/generate-image"),{school_id:n,school_name:(null===l||void 0===l?void 0:l.name)||"School",year:"2025-26",events:s,state:(null===l||void 0===l||null===(e=l.settings)||void 0===e?void 0:e.state)||"Rajasthan",language:t.language,include_logo_watermark:!0,calendar_style:"single_page"},{headers:{Authorization:"Bearer ".concat(a)}});r.data.image_url&&(J(r.data.image_url),Qt.success(i?"AI \u0915\u0948\u0932\u0947\u0902\u0921\u0930 \u092c\u0928 \u0917\u092f\u093e! \ud83c\udf89":"AI Calendar generated! \ud83c\udf89"))}catch(a){console.error("AI Calendar generation error:",a),Qt.error(i?"AI \u0915\u0948\u0932\u0947\u0902\u0921\u0930 \u092c\u0928\u093e\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e":"Error generating AI calendar")}finally{K(!1)}},disabled:G,variant:"outline",size:"sm",className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:[G?(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}):(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2 text-purple-600"}),i?"AI \u0915\u0948\u0932\u0947\u0902\u0921\u0930":"AI Calendar"]}),(0,qr.jsxs)(Dl,{onClick:()=>{window.print()},className:"bg-indigo-600 hover:bg-indigo-700",size:"sm",children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-2"}),i?"\u092a\u094d\u0930\u093f\u0902\u091f":"Print"]})]})]}),(0,qr.jsxs)("div",{className:"flex gap-2 print:hidden",children:[(0,qr.jsx)(Dl,{variant:"month"===v?"default":"outline",size:"sm",onClick:()=>b("month"),children:i?"\u092e\u0939\u0940\u0928\u093e":"Month View"}),(0,qr.jsx)(Dl,{variant:"year"===v?"default":"outline",size:"sm",onClick:()=>b("year"),children:i?"\u092a\u0942\u0930\u093e \u0938\u093e\u0932":"Year View"}),(0,qr.jsxs)(Dl,{variant:"print"===v?"default":"outline",size:"sm",onClick:()=>b("print"),className:"bg-gradient-to-r from-orange-50 to-green-50 border-orange-200",children:[(0,qr.jsx)(cY,{className:"w-4 h-4 mr-1"}),i?"\ud83d\udcc5 \u092a\u094d\u0930\u093f\u0902\u091f \u0915\u0948\u0932\u0947\u0902\u0921\u0930":"\ud83d\udcc5 Print Calendar"]}),(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:()=>q(!0),children:[(0,qr.jsx)(fJ,{className:"w-4 h-4 mr-1 text-yellow-600"}),i?"\ud83c\udfc6 \u0909\u092a\u0932\u092c\u094d\u0927\u093f\u092f\u093e\u0901":"\ud83c\udfc6 Achievements"]})]}),"print"===v&&(0,qr.jsx)(xZ,{school:l,customEvents:c,testimonials:D,photos:E,achievements:B}),"print"!==v&&(0,qr.jsxs)("div",{ref:r,className:"calendar-print-container",children:[(null===l||void 0===l?void 0:l.logo_url)&&(0,qr.jsx)("div",{className:"hidden print:block calendar-watermark",children:(0,qr.jsx)("img",{src:l.logo_url,alt:"",className:"w-full opacity-10"})}),(0,qr.jsxs)("div",{className:"hidden print:block mb-6 text-center border-b-2 border-black pb-4 school-print-header",children:[(null===l||void 0===l?void 0:l.logo_url)&&(0,qr.jsx)("img",{src:l.logo_url,alt:"",className:"h-16 mx-auto mb-2"}),(0,qr.jsx)("h1",{className:"text-2xl font-bold",children:(null===l||void 0===l?void 0:l.name)||"School Name"}),(null===l||void 0===l?void 0:l.motto)&&(0,qr.jsx)("p",{className:"text-sm italic text-gray-600",children:l.motto}),(0,qr.jsxs)("div",{className:"flex justify-center gap-6 text-sm mt-2",children:[(null===l||void 0===l?void 0:l.address)&&(0,qr.jsxs)("span",{children:[(0,qr.jsx)(c$,{className:"w-3 h-3 inline mr-1"}),l.address]}),(null===l||void 0===l?void 0:l.phone)&&(0,qr.jsxs)("span",{children:[(0,qr.jsx)(Gm,{className:"w-3 h-3 inline mr-1"}),l.phone]}),(null===l||void 0===l?void 0:l.email)&&(0,qr.jsxs)("span",{children:[(0,qr.jsx)(Wm,{className:"w-3 h-3 inline mr-1"}),l.email]})]}),(null===l||void 0===l?void 0:l.website_url)&&(0,qr.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,qr.jsx)(KY,{className:"w-3 h-3 inline mr-1"}),l.website_url]}),(0,qr.jsxs)("p",{className:"text-lg font-semibold mt-3 bg-indigo-600 text-white py-2 rounded",children:[i?"\u0936\u0948\u0915\u094d\u0937\u0923\u093f\u0915 \u0915\u0948\u0932\u0947\u0902\u0921\u0930":"Academic Calendar"," 2025-26"]})]}),"month"===v?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4 print:hidden",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>{0===p?(x(11),g(f-1)):x(p-1)},children:(0,qr.jsx)(AY,{className:"w-5 h-5"})}),(0,qr.jsxs)("h2",{className:"text-xl font-bold",children:[$[p]," ",f]}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>{11===p?(x(0),g(f+1)):x(p+1)},children:(0,qr.jsx)(qc,{className:"w-5 h-5"})})]}),(0,qr.jsx)(Qc,{className:"mb-6",children:(0,qr.jsxs)(td,{className:"p-4",children:[(0,qr.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Q.map((e,t)=>(0,qr.jsx)("div",{className:"text-center text-sm font-semibold p-2 ".concat(0===t?"text-red-600":"text-slate-600"),children:e},t))}),(0,qr.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array((oe=p,ce=f,new Date(ce,oe,1).getDay())).fill(null).map((e,t)=>(0,qr.jsx)("div",{className:"h-20 md:h-24"},"empty-".concat(t))),Array(((e,t)=>new Date(t,e+1,0).getDate())(p,f)).fill(null).map((e,t)=>{const a=t+1,s=((e,t,a)=>{const s="".concat(a,"-").concat(String(t+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0"));return Z().find(e=>e.date===s)})(a,p,f),n=(new Date).getDate()===a&&(new Date).getMonth()===p&&(new Date).getFullYear()===f,r=0===new Date(f,p,a).getDay();return(0,qr.jsxs)("div",{className:"h-20 md:h-24 border rounded-lg p-1 cursor-pointer hover:bg-slate-50 transition-colors ".concat(n?"ring-2 ring-indigo-500 bg-indigo-50":""," ").concat(r?"bg-red-50":""),onClick:()=>{const e="".concat(f,"-").concat(String(p+1).padStart(2,"0"),"-").concat(String(a).padStart(2,"0"));_(u(u({},S),{},{date:e})),j(!0)},children:[(0,qr.jsx)("div",{className:"text-sm font-semibold ".concat(r?"text-red-600":""," ").concat(n?"text-indigo-600":""),children:a}),s&&(0,qr.jsx)("div",{className:"text-xs p-1 rounded mt-1 truncate ".concat(re(s.type)),children:s.name.length>15?s.name.substring(0,15)+"...":s.name})]},a)})]})]})}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsx)(Zc,{className:"text-lg",children:i?"".concat($[p]," ").concat(f," \u0915\u0947 \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e"):"Events in ".concat($[p]," ").concat(f)})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-2",children:ee(p,f).length>0?ee(p,f).map((e,t)=>(0,qr.jsxs)("div",{className:"p-3 rounded-lg border flex items-center justify-between ".concat(ie(e.type)),children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("span",{className:"font-bold text-lg w-8",children:new Date(e.date).getDate()}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:e.name}),(0,qr.jsx)("span",{className:"text-xs opacity-80",children:le(e.type)})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"text-sm hidden md:block",children:new Date(e.date).toLocaleDateString("en-IN",{weekday:"short"})}),e.id&&!["national","festival","state"].includes(e.type)&&(0,qr.jsxs)("div",{className:"flex gap-1",children:[(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),te(e)},children:(0,qr.jsx)(cZ,{className:"w-3 h-3"})}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm(i?"\u0915\u094d\u092f\u093e \u0906\u092a \u0907\u0938 \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0915\u094b \u0939\u091f\u093e\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?":"Delete this event?"))try{const t=localStorage.getItem("token");await Hr.delete("".concat(fZ,"/api/school/").concat(n,"/calendar-events/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),X(),Qt.success(i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0939\u091f\u093e \u0926\u093f\u092f\u093e \u0917\u092f\u093e":"Event deleted")}catch(t){d(c.filter(t=>t.id!==e)),Qt.success(i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0939\u091f\u093e \u0926\u093f\u092f\u093e \u0917\u092f\u093e":"Event deleted")}})(e.id)},children:(0,qr.jsx)(iH,{className:"w-3 h-3 text-red-500"})})]})]})]},t)):(0,qr.jsx)("p",{className:"text-center text-slate-400 py-4",children:i?"\u0907\u0938 \u092e\u0939\u0940\u0928\u0947 \u0915\u094b\u0908 \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0928\u0939\u0940\u0902":"No events this month"})})})]})]}):(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 print:grid-cols-4 calendar-months-grid",children:$.map((e,t)=>{const a=t>=3?2025:2026,s=ee(t,a);return(0,qr.jsxs)(Qc,{className:"print:border print:shadow-none month-card",children:[(0,qr.jsx)(Xc,{className:"pb-2 print:pb-1",children:(0,qr.jsxs)(Zc,{className:"text-sm font-bold print:text-xs",children:[e," ",a]})}),(0,qr.jsx)(td,{className:"pt-0 print:pt-0",children:s.length>0?(0,qr.jsxs)("ul",{className:"space-y-1 print:space-y-0",children:[s.slice(0,5).map((e,t)=>(0,qr.jsxs)("li",{className:"text-xs flex items-start gap-1 print:text-[9px]",children:[(0,qr.jsx)("span",{className:"w-2 h-2 rounded-full mt-1 flex-shrink-0 print:w-1.5 print:h-1.5 ".concat(re(e.type).split(" ")[0])}),(0,qr.jsxs)("span",{children:[(0,qr.jsx)("strong",{children:new Date(e.date).getDate()})," - ",e.name]})]},t)),s.length>5&&(0,qr.jsxs)("li",{className:"text-xs text-slate-400 print:text-[8px]",children:["+",s.length-5," more"]})]}):(0,qr.jsx)("p",{className:"text-xs text-slate-400 print:text-[9px]",children:"-"})})]},t)})}),(0,qr.jsx)("div",{className:"mt-6 flex flex-wrap gap-2 justify-center print:mt-4 print:gap-1",children:["national","festival","state","vacation","school_event","exam"].map(e=>(0,qr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs border print:px-2 print:text-[8px] ".concat(ie(e)),children:le(e)},e))}),(0,qr.jsxs)("div",{className:"hidden print:block mt-8 pt-4 border-t text-center text-xs text-gray-500",children:[(0,qr.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," ",null===l||void 0===l?void 0:l.name,". All Rights Reserved."]}),(null===l||void 0===l?void 0:l.website_url)&&(0,qr.jsx)("p",{children:l.website_url})]}),E.length>0&&(0,qr.jsxs)("div",{className:"mt-8 print:mt-6 print:page-break-before",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold mb-4 text-center print:text-base",children:i?"\u092b\u094b\u091f\u094b \u0917\u0948\u0932\u0930\u0940":"Photo Gallery"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 print:grid-cols-4 print:gap-2",children:E.slice(0,8).map((e,t)=>(0,qr.jsx)("img",{src:e.url,alt:"Gallery ".concat(t+1),className:"w-full h-32 object-cover rounded-lg print:h-20"},t))})]}),D.length>0&&(0,qr.jsxs)("div",{className:"mt-8 print:mt-6",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold mb-4 text-center",children:i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930":"Testimonials"}),(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 print:grid-cols-2",children:D.slice(0,4).map((e,t)=>(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg border italic print:p-2 print:text-sm",children:[(0,qr.jsx)(oZ,{className:"w-5 h-5 text-indigo-400 mb-2"}),(0,qr.jsxs)("p",{className:"text-slate-700",children:['"',e.text,'"']}),(0,qr.jsxs)("p",{className:"text-sm font-semibold mt-2 text-slate-600",children:["- ",e.author]}),e.designation&&(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.designation})]},t))})]}),Y&&(0,qr.jsxs)("div",{className:"mt-8",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold mb-4 text-center",children:i?"AI \u0926\u094d\u0935\u093e\u0930\u093e \u092c\u0928\u093e\u092f\u093e \u0917\u092f\u093e \u0915\u0948\u0932\u0947\u0902\u0921\u0930":"AI Generated Calendar"}),(0,qr.jsx)("img",{src:Y,alt:"AI Generated Calendar",className:"max-w-full mx-auto rounded-xl shadow-lg"})]}),(0,qr.jsxs)("div",{className:"hidden print:block mt-8 pt-4 border-t text-center text-xs text-gray-500",children:[(0,qr.jsx)("p",{children:"Powered by Schooltino - Smart School Management System"}),(0,qr.jsx)("p",{children:(new Date).toLocaleDateString("en-IN",{dateStyle:"long"})})]})]}),y&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold",children:N?i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0938\u0902\u092a\u093e\u0926\u093f\u0924 \u0915\u0930\u0947\u0902":"Edit Event":i?"\u0928\u092f\u093e \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e":"Add Event"}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:ae,children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[i?"\u0924\u093e\u0930\u0940\u0916":"Date"," *"]}),(0,qr.jsx)(Rl,{type:"date",value:S.date,onChange:e=>_(u(u({},S),{},{date:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0915\u093e \u0928\u093e\u092e":"Event Name"," *"]}),(0,qr.jsx)(Rl,{value:S.name,onChange:e=>_(u(u({},S),{},{name:e.target.value})),placeholder:i?"\u091c\u0948\u0938\u0947: \u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u0909\u0924\u094d\u0938\u0935":"e.g., Annual Function"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:i?"\u092a\u094d\u0930\u0915\u093e\u0930":"Type"}),(0,qr.jsxs)("select",{value:S.type,onChange:e=>_(u(u({},S),{},{type:e.target.value})),className:"w-full h-10 rounded-md border border-slate-200 px-3",children:[(0,qr.jsx)("option",{value:"school_event",children:i?"\u0938\u094d\u0915\u0942\u0932 \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e":"School Event"}),(0,qr.jsx)("option",{value:"exam",children:i?"\u092a\u0930\u0940\u0915\u094d\u0937\u093e":"Exam"}),(0,qr.jsx)("option",{value:"vacation",children:i?"\u091b\u0941\u091f\u094d\u091f\u0940":"Holiday/Vacation"}),(0,qr.jsx)("option",{value:"festival",children:i?"\u0924\u094d\u092f\u094b\u0939\u093e\u0930":"Festival"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:i?"\u0935\u093f\u0935\u0930\u0923":"Description"}),(0,qr.jsx)("textarea",{value:S.description,onChange:e=>_(u(u({},S),{},{description:e.target.value})),className:"w-full rounded-md border border-slate-200 px-3 py-2",rows:3,placeholder:i?"\u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u091c\u093e\u0928\u0915\u093e\u0930\u0940...":"Additional details..."})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,qr.jsxs)(Dl,{onClick:async()=>{if(S.date&&S.name)try{const e=localStorage.getItem("token");N?(await Hr.put("".concat(fZ,"/api/school/").concat(n,"/calendar-events/").concat(N.id),S,{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success(i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0905\u092a\u0921\u0947\u091f \u0939\u094b \u0917\u092f\u093e":"Event updated")):(await Hr.post("".concat(fZ,"/api/school/").concat(n,"/calendar-events"),S,{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success(i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u091c\u094b\u0921\u093c\u093e \u0917\u092f\u093e":"Event added")),X(),ae()}catch(e){d(N?c.map(e=>e.id===N.id?u(u({},e),S):e):[...c,u(u({},S),{},{id:Date.now().toString()})]),Qt.success(i?"\u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u0938\u0947\u0935 \u0939\u094b \u0917\u092f\u093e":"Event saved"),ae()}else Qt.error(i?"\u0924\u093e\u0930\u0940\u0916 \u0914\u0930 \u0928\u093e\u092e \u091c\u0930\u0942\u0930\u0940 \u0939\u0948":"Date and name are required")},className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),i?"\u0938\u0947\u0935 \u0915\u0930\u0947\u0902":"Save"]}),(0,qr.jsx)(Dl,{variant:"outline",onClick:ae,className:"flex-1",children:i?"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902":"Cancel"})]})]})}),k&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold",children:i?"\u092b\u094b\u091f\u094b \u0917\u0948\u0932\u0930\u0940":"Photo Gallery"}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>C(!1),children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]}),(0,qr.jsx)("div",{className:"mb-4",children:(0,qr.jsxs)("label",{className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t){O(!0);try{const e=new FormData;e.append("file",t),e.append("school_id",n),e.append("type","calendar");const a=localStorage.getItem("token"),s=await Hr.post("".concat(fZ,"/api/upload"),e,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"}}),r={id:Date.now().toString(),url:s.data.url,caption:"",uploaded_at:(new Date).toISOString()};A([...E,r]),Qt.success(i?"\u092b\u094b\u091f\u094b \u0905\u092a\u0932\u094b\u0921 \u0939\u094b \u0917\u0908":"Photo uploaded")}catch(a){const e=new FileReader;e.onload=e=>{const t={id:Date.now().toString(),url:e.target.result,caption:"",uploaded_at:(new Date).toISOString()};A([...E,t]),Qt.success(i?"\u092b\u094b\u091f\u094b \u091c\u094b\u0921\u093c\u0940 \u0917\u0908":"Photo added")},e.readAsDataURL(t)}finally{O(!1)}}},className:"hidden"}),P?(0,qr.jsx)(Bc,{className:"w-5 h-5 animate-spin"}):(0,qr.jsx)($U,{className:"w-5 h-5 text-slate-400"}),(0,qr.jsx)("span",{className:"text-slate-600",children:i?"\u092b\u094b\u091f\u094b \u0905\u092a\u0932\u094b\u0921 \u0915\u0930\u0947\u0902":"Upload Photo"})]})}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[E.map(e=>(0,qr.jsxs)("div",{className:"relative group",children:[(0,qr.jsx)("img",{src:e.url,alt:"",className:"w-full h-32 object-cover rounded-lg"}),(0,qr.jsx)("button",{onClick:()=>{return t=e.id,A(E.filter(e=>e.id!==t)),void Qt.success(i?"\u092b\u094b\u091f\u094b \u0939\u091f\u093e\u0908 \u0917\u0908":"Photo removed");var t},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]},e.id)),0===E.length&&(0,qr.jsx)("p",{className:"col-span-full text-center text-slate-400 py-8",children:i?"\u0915\u094b\u0908 \u092b\u094b\u091f\u094b \u0928\u0939\u0940\u0902":"No photos yet"})]})]})}),M&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold",children:i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930":"Testimonials"}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:ne,children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]}),D.length>0&&!R&&(0,qr.jsx)("div",{className:"mb-4 space-y-3",children:D.map(e=>(0,qr.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[(0,qr.jsxs)("p",{className:"text-sm italic",children:['"',e.text,'"']}),(0,qr.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,qr.jsxs)("span",{className:"text-xs font-semibold",children:["- ",e.author]}),(0,qr.jsxs)("div",{className:"flex gap-1",children:[(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>se(e),children:(0,qr.jsx)(cZ,{className:"w-3 h-3"})}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>{return t=e.id,I(D.filter(e=>e.id!==t)),void Qt.success(i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930 \u0939\u091f\u093e\u092f\u093e \u0917\u092f\u093e":"Testimonial removed");var t},children:(0,qr.jsx)(iH,{className:"w-3 h-3 text-red-500"})})]})]})]},e.id))}),(0,qr.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,qr.jsx)("h4",{className:"font-semibold",children:R?i?"\u0938\u0902\u092a\u093e\u0926\u093f\u0924 \u0915\u0930\u0947\u0902":"Edit":i?"\u0928\u092f\u093e \u091c\u094b\u0921\u093c\u0947\u0902":"Add New"}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930":"Testimonial"," *"]}),(0,qr.jsx)("textarea",{value:F.text,onChange:e=>z(u(u({},F),{},{text:e.target.value})),className:"w-full rounded-md border border-slate-200 px-3 py-2",rows:3,placeholder:i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930 \u0932\u093f\u0916\u0947\u0902...":"Write testimonial..."})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[i?"\u0928\u093e\u092e":"Name"," *"]}),(0,qr.jsx)(Rl,{value:F.author,onChange:e=>z(u(u({},F),{},{author:e.target.value})),placeholder:i?"\u091c\u0948\u0938\u0947: \u0930\u092e\u0947\u0936 \u0915\u0941\u092e\u093e\u0930":"e.g., Ramesh Kumar"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:i?"\u092a\u0926":"Designation"}),(0,qr.jsx)(Rl,{value:F.designation,onChange:e=>z(u(u({},F),{},{designation:e.target.value})),placeholder:i?"\u091c\u0948\u0938\u0947: \u0905\u092d\u093f\u092d\u093e\u0935\u0915":"e.g., Parent"})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(F.text&&F.author)try{const e=localStorage.getItem("token");R?await Hr.put("".concat(fZ,"/api/school/").concat(n,"/testimonials/").concat(R.id),F,{headers:{Authorization:"Bearer ".concat(e)}}):await Hr.post("".concat(fZ,"/api/school/").concat(n,"/testimonials"),F,{headers:{Authorization:"Bearer ".concat(e)}}),X(),ne(),Qt.success(i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930 \u0938\u0947\u0935 \u0939\u094b \u0917\u092f\u093e":"Testimonial saved")}catch(e){I(R?D.map(e=>e.id===R.id?u(u({},e),F):e):[...D,u(u({},F),{},{id:Date.now().toString()})]),ne(),Qt.success(i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930 \u091c\u094b\u0921\u093c\u093e \u0917\u092f\u093e":"Testimonial added")}else Qt.error(i?"\u092a\u094d\u0930\u0936\u0902\u0938\u093e\u092a\u0924\u094d\u0930 \u0914\u0930 \u0928\u093e\u092e \u091c\u0930\u0942\u0930\u0940 \u0939\u0948":"Testimonial and name required")},className:"w-full bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),i?"\u0938\u0947\u0935 \u0915\u0930\u0947\u0902":"Save"]})]})]})}),(0,qr.jsx)("style",{children:'\n        @media print {\n          body * { visibility: hidden; }\n          [data-testid="school-calendar-page"], [data-testid="school-calendar-page"] * { visibility: visible; }\n          [data-testid="school-calendar-page"] { position: absolute; left: 0; top: 0; width: 100%; }\n          .print\\:hidden { display: none !important; }\n          .print\\:block { display: block !important; }\n          @page { margin: 10mm; size: A4; }\n        }\n      '}),H&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,qr.jsx)(fJ,{className:"w-5 h-5 text-yellow-600"}),i?"\ud83c\udfc6 \u0939\u092e\u093e\u0930\u0947 \u0917\u094c\u0930\u0935 - Diamonds of School":"\ud83c\udfc6 Our Achievers - Diamonds of School"]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>q(!1),children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:i?"\u092f\u0939\u093e\u0901 \u0905\u092a\u0928\u0947 \u0938\u094d\u0915\u0942\u0932 \u0915\u0947 \u0939\u094b\u0928\u0939\u093e\u0930 \u0935\u093f\u0926\u094d\u092f\u093e\u0930\u094d\u0925\u093f\u092f\u094b\u0902 \u0915\u0940 \u0909\u092a\u0932\u092c\u094d\u0927\u093f\u092f\u093e\u0901 \u091c\u094b\u0921\u093c\u0947\u0902 \u091c\u094b \u0915\u0948\u0932\u0947\u0902\u0921\u0930 \u092e\u0947\u0902 \u0926\u093f\u0916\u0947\u0902\u0917\u0940 (IIT/NIT/NEET/NDA selections etc.)":"Add your school achievers here - these will appear in the printed calendar (IIT/NIT/NEET/NDA selections etc.)"}),B.length>0&&(0,qr.jsx)("div",{className:"mb-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:B.map((e,t)=>(0,qr.jsxs)("div",{className:"relative p-3 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200 text-center",children:[(0,qr.jsx)("button",{onClick:()=>U(B.filter((e,a)=>a!==t)),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs",children:"\xd7"}),e.photo&&(0,qr.jsx)("img",{src:e.photo,alt:"",className:"w-12 h-12 rounded-full mx-auto mb-2 border-2 border-yellow-400 object-cover"}),(0,qr.jsx)("p",{className:"text-sm font-bold",children:e.name}),(0,qr.jsx)("p",{className:"text-xs text-gray-600",children:e.achievement})]},t))}),(0,qr.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,qr.jsx)("h4",{className:"font-semibold",children:i?"\u2795 \u0928\u0908 \u0909\u092a\u0932\u092c\u094d\u0927\u093f \u091c\u094b\u0921\u093c\u0947\u0902":"\u2795 Add New Achievement"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[i?"\u0935\u093f\u0926\u094d\u092f\u093e\u0930\u094d\u0925\u0940 \u0915\u093e \u0928\u093e\u092e":"Student Name"," *"]}),(0,qr.jsx)(Rl,{value:V.name,onChange:e=>W(u(u({},V),{},{name:e.target.value})),placeholder:i?"\u091c\u0948\u0938\u0947: \u0930\u093e\u0939\u0941\u0932 \u0936\u0930\u094d\u092e\u093e":"e.g., Rahul Sharma"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[i?"\u0909\u092a\u0932\u092c\u094d\u0927\u093f":"Achievement"," *"]}),(0,qr.jsx)(Rl,{value:V.achievement,onChange:e=>W(u(u({},V),{},{achievement:e.target.value})),placeholder:i?"\u091c\u0948\u0938\u0947: IIT Delhi - AIR 125":"e.g., IIT Delhi - AIR 125"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:i?"\u092b\u094b\u091f\u094b (Optional)":"Photo (Optional)"}),(0,qr.jsx)(Rl,{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>W(u(u({},V),{},{photo:e.target.result})),e.readAsDataURL(t)}}})]}),(0,qr.jsxs)(Dl,{onClick:()=>{V.name&&V.achievement&&(U([...B,u(u({},V),{},{id:Date.now()})]),W({name:"",achievement:"",photo:null}),Qt.success(i?"\u0909\u092a\u0932\u092c\u094d\u0927\u093f \u091c\u094b\u0921\u093c\u0940 \u0917\u0908!":"Achievement added!"))},className:"w-full bg-yellow-600 hover:bg-yellow-700",children:[(0,qr.jsx)(pJ,{className:"w-4 h-4 mr-2"}),i?"\u091c\u094b\u0921\u093c\u0947\u0902":"Add Achievement"]})]}),(0,qr.jsxs)("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsx)("p",{className:"text-xs font-semibold text-slate-600 mb-2",children:i?"\ud83d\udcdd \u0909\u0926\u093e\u0939\u0930\u0923:":"\ud83d\udcdd Examples:"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500",children:[(0,qr.jsx)("span",{children:"\u2022 \u0930\u093e\u0939\u0941\u0932 \u0936\u0930\u094d\u092e\u093e - IIT Delhi AIR 125"}),(0,qr.jsx)("span",{children:"\u2022 \u092a\u094d\u0930\u093f\u092f\u093e \u0917\u0941\u092a\u094d\u0924\u093e - NEET AIR 456"}),(0,qr.jsx)("span",{children:"\u2022 \u0905\u092e\u093f\u0924 \u0938\u093f\u0902\u0939 - NDA Selection"}),(0,qr.jsx)("span",{children:"\u2022 \u0928\u0947\u0939\u093e \u0935\u0930\u094d\u092e\u093e - CUET 98.5%"})]})]})]})})]});var oe,ce}function bZ(){const{t:e,i18n:t}=js(),{user:a,schoolId:n}=Kr(),r="hi"===t.language,i=["director","principal","vice_principal"].includes(null===a||void 0===a?void 0:a.role),[l,o]=(0,s.useState)("complaints"),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)("all"),[y,j]=(0,s.useState)({type:"complaint",subject:"",message:"",category:"general",rating:0,anonymous:!1});(0,s.useEffect)(()=>{i&&(N(),w())},[n,i]);const N=async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat("","/complaints?school_id=").concat(n),{headers:{Authorization:"Bearer ".concat(e)}});d(t.data||[])}catch(e){d([])}},w=async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat("","/feedbacks?school_id=").concat(n),{headers:{Authorization:"Bearer ".concat(e)}});h(t.data||[])}catch(e){h([])}},S=async(e,t)=>{try{const a=localStorage.getItem("token");await Hr.patch("".concat("","/complaints/").concat(e),{status:t},{headers:{Authorization:"Bearer ".concat(a)}}),Qt.success("Status updated"),N()}catch(a){d(c.map(a=>a.id===e?u(u({},a),{},{status:t}):a)),Qt.success("Status updated")}},_=e=>{switch(e){case"pending":return"bg-amber-100 text-amber-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k="all"===v?c:c.filter(e=>e.status===v);return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"complaint-feedback-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900",children:[r?"\u0936\u093f\u0915\u093e\u092f\u0924 \u0914\u0930 \u092b\u093c\u0940\u0921\u092c\u0948\u0915":"Complaints & Feedback"," \ud83d\udcdd"]}),(0,qr.jsx)("p",{className:"text-slate-500",children:i?r?"\u0938\u092d\u0940 \u0936\u093f\u0915\u093e\u092f\u0924\u0947\u0902 \u0914\u0930 \u092b\u093c\u0940\u0921\u092c\u0948\u0915 \u0926\u0947\u0916\u0947\u0902":"View all complaints and feedback":r?"\u0905\u092a\u0928\u0940 \u0936\u093f\u0915\u093e\u092f\u0924 \u092f\u093e \u092b\u093c\u0940\u0921\u092c\u0948\u0915 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902":"Submit your complaint or feedback"})]}),!i&&(0,qr.jsxs)(Dl,{onClick:()=>g(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(ih,{className:"w-4 h-4 mr-2"}),r?"\u0928\u092f\u093e \u091c\u092e\u093e \u0915\u0930\u0947\u0902":"Submit New"]})]}),(0,qr.jsxs)("div",{className:"flex gap-4 border-b",children:[(0,qr.jsxs)("button",{onClick:()=>o("complaints"),className:"pb-3 px-1 font-medium transition-colors ".concat("complaints"===l?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-500 hover:text-slate-700"),children:[(0,qr.jsx)(kY,{className:"w-4 h-4 inline mr-2"}),r?"\u0936\u093f\u0915\u093e\u092f\u0924\u0947\u0902":"Complaints"," (",c.length,")"]}),(0,qr.jsxs)("button",{onClick:()=>o("feedback"),className:"pb-3 px-1 font-medium transition-colors ".concat("feedback"===l?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-500 hover:text-slate-700"),children:[(0,qr.jsx)(D$,{className:"w-4 h-4 inline mr-2"}),r?"\u092b\u093c\u0940\u0921\u092c\u0948\u0915":"Feedback"," (",m.length,")"]})]}),i&&"complaints"===l&&(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(KQ,{className:"w-4 h-4 text-slate-400"}),(0,qr.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"h-9 rounded-lg border border-slate-200 px-3 text-sm",children:[(0,qr.jsx)("option",{value:"all",children:r?"\u0938\u092d\u0940":"All"}),(0,qr.jsx)("option",{value:"pending",children:r?"\u0932\u0902\u092c\u093f\u0924":"Pending"}),(0,qr.jsx)("option",{value:"in_progress",children:r?"\u092a\u094d\u0930\u0917\u0924\u093f \u092e\u0947\u0902":"In Progress"}),(0,qr.jsx)("option",{value:"resolved",children:r?"\u0939\u0932":"Resolved"})]})]}),"complaints"===l&&(0,qr.jsx)("div",{className:"space-y-4",children:k.length>0?k.map(e=>{var t,a,s,n;return(0,qr.jsx)(Qc,{className:"border-l-4 border-l-amber-500",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:e.subject}),(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(_(e.status)),children:(n=e.status,{pending:r?"\u0932\u0902\u092c\u093f\u0924":"Pending",in_progress:r?"\u092a\u094d\u0930\u0917\u0924\u093f \u092e\u0947\u0902":"In Progress",resolved:r?"\u0939\u0932":"Resolved",rejected:r?"\u0905\u0938\u094d\u0935\u0940\u0915\u0943\u0924":"Rejected"}[n]||n)}),(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-100 text-slate-600",children:(s=e.category,{general:r?"\u0938\u093e\u092e\u093e\u0928\u094d\u092f":"General",academic:r?"\u0936\u0948\u0915\u094d\u0937\u0923\u093f\u0915":"Academic",transport:r?"\u092a\u0930\u093f\u0935\u0939\u0928":"Transport",fees:r?"\u0936\u0941\u0932\u094d\u0915":"Fees",infrastructure:r?"\u092c\u0941\u0928\u093f\u092f\u093e\u0926\u0940 \u0922\u093e\u0902\u091a\u093e":"Infrastructure",staff:r?"\u0938\u094d\u091f\u093e\u092b":"Staff",safety:r?"\u0938\u0941\u0930\u0915\u094d\u0937\u093e":"Safety"}[s]||s)})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:e.message}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[(0,qr.jsxs)("span",{children:["\ud83d\udc64 ",(null===(t=e.submitted_by)||void 0===t?void 0:t.name)||"Anonymous"]}),(null===(a=e.submitted_by)||void 0===a?void 0:a.student_name)&&(0,qr.jsxs)("span",{children:["\ud83d\udcda Student: ",e.submitted_by.student_name]}),(0,qr.jsxs)("span",{children:["\ud83d\udcc5 ",new Date(e.created_at).toLocaleDateString("en-IN")]})]})]}),i&&"resolved"!==e.status&&(0,qr.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,qr.jsxs)(Dl,{size:"sm",variant:"outline",onClick:()=>S(e.id,"in_progress"),children:[(0,qr.jsx)(Ah,{className:"w-3 h-3 mr-1"}),r?"\u092a\u094d\u0930\u0917\u0924\u093f":"In Progress"]}),(0,qr.jsxs)(Dl,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>S(e.id,"resolved"),children:[(0,qr.jsx)(Km,{className:"w-3 h-3 mr-1"}),r?"\u0939\u0932":"Resolve"]})]})]})})},e.id)}):(0,qr.jsx)("div",{className:"text-center py-8 text-slate-400",children:r?"\u0915\u094b\u0908 \u0936\u093f\u0915\u093e\u092f\u0924 \u0928\u0939\u0940\u0902":"No complaints"})}),"feedback"===l&&(0,qr.jsx)("div",{className:"space-y-4",children:m.length>0?m.map(e=>{var t;return(0,qr.jsx)(Qc,{className:"border-l-4 border-l-green-500",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsx)("div",{className:"flex items-start justify-between",children:(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)("h3",{className:"font-semibold text-slate-900",children:e.subject}),(0,qr.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(t=>(0,qr.jsx)(D$,{className:"w-4 h-4 ".concat(t<=e.rating?"text-yellow-400 fill-yellow-400":"text-gray-300")},t))})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:e.message}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[(0,qr.jsxs)("span",{children:["\ud83d\udc64 ",(null===(t=e.submitted_by)||void 0===t?void 0:t.name)||"Anonymous"]}),(0,qr.jsxs)("span",{children:["\ud83d\udcc5 ",new Date(e.created_at).toLocaleDateString("en-IN")]})]})]})})})},e.id)}):(0,qr.jsx)("div",{className:"text-center py-8 text-slate-400",children:r?"\u0915\u094b\u0908 \u092b\u093c\u0940\u0921\u092c\u0948\u0915 \u0928\u0939\u0940\u0902":"No feedback"})}),f&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold mb-4",children:r?"\u0928\u092f\u093e \u091c\u092e\u093e \u0915\u0930\u0947\u0902":"Submit New"}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex gap-4",children:[(0,qr.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,qr.jsx)("input",{type:"radio",checked:"complaint"===y.type,onChange:()=>j(u(u({},y),{},{type:"complaint"})),className:"w-4 h-4 text-indigo-600"}),(0,qr.jsx)("span",{className:"complaint"===y.type?"font-semibold text-indigo-600":"",children:r?"\u0936\u093f\u0915\u093e\u092f\u0924":"Complaint"})]}),(0,qr.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,qr.jsx)("input",{type:"radio",checked:"feedback"===y.type,onChange:()=>j(u(u({},y),{},{type:"feedback"})),className:"w-4 h-4 text-indigo-600"}),(0,qr.jsx)("span",{className:"feedback"===y.type?"font-semibold text-indigo-600":"",children:r?"\u092b\u093c\u0940\u0921\u092c\u0948\u0915":"Feedback"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[r?"\u0935\u093f\u0937\u092f":"Subject"," *"]}),(0,qr.jsx)(Rl,{value:y.subject,onChange:e=>j(u(u({},y),{},{subject:e.target.value})),placeholder:r?"\u0938\u0902\u0915\u094d\u0937\u093f\u092a\u094d\u0924 \u0935\u093f\u0937\u092f":"Brief subject",className:"mt-1"})]}),"complaint"===y.type&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:r?"\u0936\u094d\u0930\u0947\u0923\u0940":"Category"}),(0,qr.jsxs)("select",{value:y.category,onChange:e=>j(u(u({},y),{},{category:e.target.value})),className:"w-full h-11 rounded-lg border border-slate-200 px-3 mt-1",children:[(0,qr.jsx)("option",{value:"general",children:r?"\u0938\u093e\u092e\u093e\u0928\u094d\u092f":"General"}),(0,qr.jsx)("option",{value:"academic",children:r?"\u0936\u0948\u0915\u094d\u0937\u0923\u093f\u0915":"Academic"}),(0,qr.jsx)("option",{value:"transport",children:r?"\u092a\u0930\u093f\u0935\u0939\u0928":"Transport"}),(0,qr.jsx)("option",{value:"fees",children:r?"\u0936\u0941\u0932\u094d\u0915":"Fees"}),(0,qr.jsx)("option",{value:"infrastructure",children:r?"\u092c\u0941\u0928\u093f\u092f\u093e\u0926\u0940 \u0922\u093e\u0902\u091a\u093e":"Infrastructure"}),(0,qr.jsx)("option",{value:"staff",children:r?"\u0938\u094d\u091f\u093e\u092b":"Staff"}),(0,qr.jsx)("option",{value:"safety",children:r?"\u0938\u0941\u0930\u0915\u094d\u0937\u093e":"Safety"})]})]}),"feedback"===y.type&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:r?"\u0930\u0947\u091f\u093f\u0902\u0917":"Rating"}),(0,qr.jsx)("div",{className:"flex gap-2 mt-2",children:[1,2,3,4,5].map(e=>(0,qr.jsx)("button",{type:"button",onClick:()=>j(u(u({},y),{},{rating:e})),children:(0,qr.jsx)(D$,{className:"w-8 h-8 transition-colors ".concat(e<=y.rating?"text-yellow-400 fill-yellow-400":"text-gray-300 hover:text-yellow-200")})},e))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[r?"\u0935\u093f\u0938\u094d\u0924\u0943\u0924 \u0935\u093f\u0935\u0930\u0923":"Detailed Message"," *"]}),(0,qr.jsx)("textarea",{value:y.message,onChange:e=>j(u(u({},y),{},{message:e.target.value})),placeholder:r?"\u0905\u092a\u0928\u0940 \u092c\u093e\u0924 \u0935\u093f\u0938\u094d\u0924\u093e\u0930 \u0938\u0947 \u0932\u093f\u0916\u0947\u0902...":"Write your message in detail...",className:"w-full rounded-lg border border-slate-200 px-3 py-2 mt-1",rows:4})]}),(0,qr.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,qr.jsx)("input",{type:"checkbox",checked:y.anonymous,onChange:e=>j(u(u({},y),{},{anonymous:e.target.checked})),className:"w-4 h-4 rounded border-slate-300"}),(0,qr.jsx)("span",{className:"text-sm",children:r?"\u0917\u0941\u092e\u0928\u093e\u092e \u0930\u0942\u092a \u0938\u0947 \u091c\u092e\u093e \u0915\u0930\u0947\u0902":"Submit anonymously"})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-400",children:r?"\u0928\u094b\u091f: \u0917\u0941\u092e\u0928\u093e\u092e \u0936\u093f\u0915\u093e\u092f\u0924\u094b\u0902 \u092a\u0930 \u092d\u0940 \u0915\u093e\u0930\u094d\u0930\u0935\u093e\u0908 \u0939\u094b\u0917\u0940":"Note: Anonymous submissions will also be addressed"})]}),(0,qr.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,qr.jsxs)(Dl,{onClick:async()=>{if(y.subject&&y.message){x(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat("","/").concat(y.type,"s"),u(u({},y),{},{school_id:n,submitted_by:y.anonymous?null:{name:null===a||void 0===a?void 0:a.name,type:"parent"===(null===a||void 0===a?void 0:a.role)?"parent":"student",user_id:null===a||void 0===a?void 0:a.id}}),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success(r?"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u091c\u092e\u093e \u0915\u093f\u092f\u093e \u0917\u092f\u093e":"Submitted successfully"),g(!1),j({type:"complaint",subject:"",message:"",category:"general",rating:0,anonymous:!1})}catch(e){Qt.success(r?"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u091c\u092e\u093e \u0915\u093f\u092f\u093e \u0917\u092f\u093e":"Submitted successfully"),g(!1)}x(!1)}else Qt.error(r?"\u0915\u0943\u092a\u092f\u093e \u0938\u092d\u0940 \u0906\u0935\u0936\u094d\u092f\u0915 \u092b\u093c\u0940\u0932\u094d\u0921 \u092d\u0930\u0947\u0902":"Please fill all required fields")},disabled:p,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(sJ,{className:"w-4 h-4 mr-2"}),p?r?"\u091c\u092e\u093e \u0939\u094b \u0930\u0939\u093e \u0939\u0948...":"Submitting...":r?"\u091c\u092e\u093e \u0915\u0930\u0947\u0902":"Submit"]}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>g(!1),className:"flex-1",children:r?"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902":"Cancel"})]})]})})]})}const yZ=Dc("speaker",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["circle",{cx:"12",cy:"14",r:"4",key:"1jruaj"}],["path",{d:"M12 14h.01",key:"1etili"}]]),jZ=Dc("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),NZ=Dc("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),wZ=Dc("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),SZ=[{id:"saraswati_vandana",name:"Saraswati Vandana (\u0938\u0930\u0938\u094d\u0935\u0924\u0940 \u0935\u0902\u0926\u0928\u093e)",lyrics:"\u092f\u093e \u0915\u0941\u0928\u094d\u0926\u0947\u0928\u094d\u0926\u0941\u0924\u0941\u0937\u093e\u0930\u0939\u093e\u0930\u0927\u0935\u0932\u093e \u092f\u093e \u0936\u0941\u092d\u094d\u0930\u0935\u0938\u094d\u0924\u094d\u0930\u093e\u0935\u0943\u0924\u093e...",duration:"3:45",category:"morning",language:"sanskrit",audioUrl:null},{id:"gayatri_mantra",name:"Gayatri Mantra (\u0917\u093e\u092f\u0924\u094d\u0930\u0940 \u092e\u0902\u0924\u094d\u0930)",lyrics:"\u0950 \u092d\u0942\u0930\u094d\u092d\u0941\u0935\u0903 \u0938\u094d\u0935\u0903 \u0924\u0924\u094d\u0938\u0935\u093f\u0924\u0941\u0930\u094d\u0935\u0930\u0947\u0923\u094d\u092f\u0902...",duration:"2:30",category:"morning",language:"sanskrit",audioUrl:null},{id:"itni_shakti",name:"Itni Shakti Hame Dena Data (\u0907\u0924\u0928\u0940 \u0936\u0915\u094d\u0924\u093f \u0939\u092e\u0947\u0902 \u0926\u0947\u0928\u093e \u0926\u093e\u0924\u093e)",lyrics:"\u0907\u0924\u0928\u0940 \u0936\u0915\u094d\u0924\u093f \u0939\u092e\u0947\u0902 \u0926\u0947\u0928\u093e \u0926\u093e\u0924\u093e, \u092e\u0928 \u0915\u093e \u0935\u093f\u0936\u094d\u0935\u093e\u0938 \u0915\u092e\u091c\u094b\u0930 \u0939\u094b \u0928\u093e...",duration:"4:00",category:"morning",language:"hindi",audioUrl:null},{id:"hamko_man_ki",name:"Hamko Man Ki Shakti Dena (\u0939\u092e\u0915\u094b \u092e\u0928 \u0915\u0940 \u0936\u0915\u094d\u0924\u093f \u0926\u0947\u0928\u093e)",lyrics:"\u0939\u092e\u0915\u094b \u092e\u0928 \u0915\u0940 \u0936\u0915\u094d\u0924\u093f \u0926\u0947\u0928\u093e, \u092e\u0928 \u0935\u093f\u091c\u092f \u0915\u0930\u0947\u0902...",duration:"3:30",category:"morning",language:"hindi",audioUrl:null},{id:"vande_mataram",name:"Vande Mataram (\u0935\u0928\u094d\u0926\u0947 \u092e\u093e\u0924\u0930\u092e\u094d)",lyrics:"\u0935\u0928\u094d\u0926\u0947 \u092e\u093e\u0924\u0930\u092e\u094d, \u0938\u0941\u091c\u0932\u093e\u0902 \u0938\u0941\u092b\u0932\u093e\u0902 \u092e\u0932\u092f\u091c\u0936\u0940\u0924\u0932\u093e\u092e\u094d...",duration:"2:00",category:"patriotic",language:"sanskrit",audioUrl:null},{id:"jana_gana_mana",name:"Jana Gana Mana (\u091c\u0928 \u0917\u0923 \u092e\u0928)",lyrics:"\u091c\u0928 \u0917\u0923 \u092e\u0928 \u0905\u0927\u093f\u0928\u093e\u092f\u0915 \u091c\u092f \u0939\u0947 \u092d\u093e\u0930\u0924 \u092d\u093e\u0917\u094d\u092f \u0935\u093f\u0927\u093e\u0924\u093e...",duration:"0:52",category:"national",language:"hindi",audioUrl:null},{id:"lab_pe_aati",name:"Lab Pe Aati Hai Dua (\u0932\u092c \u092a\u0947 \u0906\u0924\u0940 \u0939\u0948 \u0926\u0941\u0906)",lyrics:"\u0932\u092c \u092a\u0947 \u0906\u0924\u0940 \u0939\u0948 \u0926\u0941\u0906 \u092c\u0928 \u0915\u0947 \u0924\u092e\u0928\u094d\u0928\u093e \u092e\u0947\u0930\u0940...",duration:"3:15",category:"morning",language:"urdu",audioUrl:null},{id:"aye_malik_tere",name:"Aye Malik Tere Bande Hum (\u0910 \u092e\u093e\u0932\u093f\u0915 \u0924\u0947\u0930\u0947 \u092c\u0902\u0926\u0947 \u0939\u092e)",lyrics:"\u0910 \u092e\u093e\u0932\u093f\u0915 \u0924\u0947\u0930\u0947 \u092c\u0902\u0926\u0947 \u0939\u092e, \u0910\u0938\u0947 \u0939\u094b\u0902 \u0939\u092e\u093e\u0930\u0947 \u0915\u0930\u092e...",duration:"4:30",category:"morning",language:"hindi",audioUrl:null}];function _Z(){const{t:e,i18n:t}=js(),{user:a,schoolId:n}=Kr(),r="hi"===t.language,i=(0,s.useRef)(null),[l,o]=(0,s.useState)(SZ),[c,d]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(80),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)({enabled:!0,morning_time:"08:00",duration:15,auto_start:!1,prayers_sequence:["saraswati_vandana","itni_shakti","jana_gana_mana"],announcement_before:!0,announcement_text:"\u0927\u094d\u092f\u093e\u0928 \u0926\u0947\u0902! \u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0938\u092d\u093e \u0936\u0941\u0930\u0942 \u0939\u094b \u0930\u0939\u0940 \u0939\u0948\u0964 \u0915\u0943\u092a\u092f\u093e \u0905\u092a\u0928\u0947 \u0938\u094d\u0925\u093e\u0928 \u092a\u0930 \u0916\u0921\u093c\u0947 \u0939\u094b\u0902\u0964"}),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)("connected"),[S,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{k()},[n]);const k=async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat("","/school/").concat(n,"/prayer-settings"),{headers:{Authorization:"Bearer ".concat(e)}});t.data&&(b(e=>u(u({},e),t.data)),t.data.custom_prayers&&o([...SZ,...t.data.custom_prayers]))}catch(e){console.log("Using default prayer settings")}},C=e=>{d(e),e.audioUrl?i.current&&(i.current.src=e.audioUrl,i.current.play(),h(!0)):(h(!0),Qt.info(r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0936\u0941\u0930\u0942...":"Prayer starting...",{description:e.name}))},E=()=>{i.current&&(i.current.pause(),i.current.currentTime=0),h(!1),d(null)},A=async()=>{if(Qt.success(r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0938\u092d\u093e \u0936\u0941\u0930\u0942!":"Prayer session started!",{description:r?"\u0938\u094d\u092a\u0940\u0915\u0930 \u092a\u0930 \u0918\u094b\u0937\u0923\u093e \u092d\u0947\u091c\u0940 \u091c\u093e \u0930\u0939\u0940 \u0939\u0948...":"Sending announcement to speakers..."}),v.prayers_sequence.length>0){const e=l.find(e=>e.id===v.prayers_sequence[0]);e&&setTimeout(()=>C(e),2e3)}};return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"prayer-system-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900",children:[r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0938\u092d\u093e \u092a\u094d\u0930\u0923\u093e\u0932\u0940":"Prayer System"," \ud83d\ude4f"]}),(0,qr.jsx)("p",{className:"text-slate-500",children:r?"AI \u0938\u0902\u091a\u093e\u0932\u093f\u0924 \u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0914\u0930 \u0938\u094d\u092a\u0940\u0915\u0930 \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u0923":"AI powered prayer and speaker control"})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>{w("testing"),Qt.info(r?"\u0938\u094d\u092a\u0940\u0915\u0930 \u091f\u0947\u0938\u094d\u091f \u0939\u094b \u0930\u0939\u093e \u0939\u0948...":"Testing speakers..."),setTimeout(()=>{w("connected"),Qt.success(r?"\u0938\u094d\u092a\u0940\u0915\u0930 \u0915\u0928\u0947\u0915\u094d\u091f \u0939\u0948!":"Speakers connected!")},2e3)},children:[(0,qr.jsx)(yZ,{className:"w-4 h-4 mr-2"}),"testing"===N?r?"\u091f\u0947\u0938\u094d\u091f\u093f\u0902\u0917...":"Testing...":r?"\u0938\u094d\u092a\u0940\u0915\u0930 \u091f\u0947\u0938\u094d\u091f":"Test Speakers"]}),(0,qr.jsxs)(Dl,{onClick:()=>j(!0),variant:"outline",children:[(0,qr.jsx)(wh,{className:"w-4 h-4 mr-2"}),r?"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938":"Settings"]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:(0,qr.jsx)(jZ,{className:"w-8 h-8"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h3",{className:"font-bold text-lg",children:r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902":"Start Prayer Session"}),(0,qr.jsxs)("p",{className:"text-sm opacity-80",children:[v.prayers_sequence.length," ",r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e\u090f\u0902 \u0915\u094d\u0930\u092e \u092e\u0947\u0902":"prayers in sequence"]})]})]}),(0,qr.jsxs)(Dl,{onClick:A,className:"w-full mt-4 bg-white text-indigo-600 hover:bg-white/90",children:[(0,qr.jsx)(mh,{className:"w-4 h-4 mr-2"}),r?"\u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902":"Start Now"]})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center ".concat(S?"animate-pulse":""),children:(0,qr.jsx)(lJ,{className:"w-8 h-8"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h3",{className:"font-bold text-lg",children:r?"AI \u0935\u0949\u0907\u0938 \u0915\u092e\u093e\u0902\u0921":"AI Voice Command"}),(0,qr.jsx)("p",{className:"text-sm opacity-80",children:r?'"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0936\u0941\u0930\u0942 \u0915\u0930\u094b" \u092c\u094b\u0932\u0947\u0902':'Say "Start Prayer"'})]})]}),(0,qr.jsxs)(Dl,{onClick:()=>{_(!0),Qt.info(r?"AI \u0938\u0941\u0928 \u0930\u0939\u093e \u0939\u0948...":"AI is listening...",{description:r?'"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0936\u0941\u0930\u0942 \u0915\u0930\u094b" \u092c\u094b\u0932\u0947\u0902':'Say "Start Prayer"'}),setTimeout(()=>{_(!1),A()},3e3)},disabled:S,className:"w-full mt-4 bg-white text-emerald-600 hover:bg-white/90",children:[(0,qr.jsx)(lJ,{className:"w-4 h-4 mr-2"}),S?r?"\u0938\u0941\u0928 \u0930\u0939\u093e \u0939\u0948...":"Listening...":r?"\u092c\u094b\u0932\u0947\u0902":"Speak"]})]})}),(0,qr.jsx)(Qc,{className:"bg-gradient-to-br from-amber-500 to-orange-600 text-white",children:(0,qr.jsxs)(td,{className:"p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Ah,{className:"w-8 h-8"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h3",{className:"font-bold text-lg",children:r?"\u0906\u091c \u0915\u093e \u0938\u092e\u092f":"Today's Schedule"}),(0,qr.jsxs)("p",{className:"text-sm opacity-80",children:[v.morning_time," - ",v.duration," ",r?"\u092e\u093f\u0928\u091f":"min"]})]})]}),(0,qr.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm",children:[(0,qr.jsx)("span",{className:"opacity-80",children:r?"\u0911\u091f\u094b \u0938\u094d\u091f\u093e\u0930\u094d\u091f:":"Auto Start:"}),(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded ".concat(v.auto_start?"bg-green-400":"bg-red-400"),children:v.auto_start?r?"\u091a\u093e\u0932\u0942":"ON":r?"\u092c\u0902\u0926":"OFF"})]})]})})]}),c&&(0,qr.jsx)(Qc,{className:"border-2 border-indigo-500 bg-indigo-50",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-indigo-500 rounded-full flex items-center justify-center ".concat(m?"animate-spin-slow":""),children:(0,qr.jsx)(jZ,{className:"w-8 h-8 text-white"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("p",{className:"text-sm text-indigo-600 font-medium",children:r?"\u0905\u092d\u0940 \u092c\u091c \u0930\u0939\u093e \u0939\u0948":"Now Playing"}),(0,qr.jsx)("h3",{className:"font-bold text-xl text-slate-900",children:c.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1 line-clamp-1",children:c.lyrics})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)(Dl,{size:"icon",variant:"ghost",onClick:()=>g(!f),children:f?(0,qr.jsx)(NZ,{className:"w-5 h-5"}):(0,qr.jsx)(SJ,{className:"w-5 h-5"})}),(0,qr.jsx)("input",{type:"range",min:"0",max:"100",value:f?0:p,onChange:e=>x(Number(e.target.value)),className:"w-24 h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer"}),(0,qr.jsx)(Dl,{onClick:E,variant:"destructive",size:"icon",children:(0,qr.jsx)(wZ,{className:"w-5 h-5"})})]})]})})}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(jZ,{className:"w-5 h-5 text-indigo-500"}),r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940":"Prayer Library"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(e=>{return(0,qr.jsxs)("div",{className:"p-4 rounded-lg border transition-all cursor-pointer ".concat((null===c||void 0===c?void 0:c.id)===e.id?"border-indigo-500 bg-indigo-50 ring-2 ring-indigo-200":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50"),onClick:()=>!m&&C(e),children:[(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-900",children:e.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mt-1 line-clamp-2",children:e.lyrics})]}),(0,qr.jsx)("button",{onClick:t=>{t.stopPropagation(),C(e)},className:"p-2 rounded-full bg-indigo-100 text-indigo-600 hover:bg-indigo-200",children:(0,qr.jsx)(mh,{className:"w-4 h-4"})})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 mt-3 text-xs",children:[(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded bg-slate-100 text-slate-600",children:(t=e.category,{morning:r?"\u092a\u094d\u0930\u093e\u0924\u0903 \u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e":"Morning Prayer",patriotic:r?"\u0926\u0947\u0936\u092d\u0915\u094d\u0924\u093f":"Patriotic",national:r?"\u0930\u093e\u0937\u094d\u091f\u094d\u0930\u0917\u093e\u0928":"National Anthem"}[t]||t)}),(0,qr.jsx)("span",{className:"text-slate-400",children:e.duration})]})]},e.id);var t})})})]}),(0,qr.jsx)("audio",{ref:i,onEnded:E}),y&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold mb-4",children:r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938":"Prayer Settings"}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(ql,{children:r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0938\u0915\u094d\u0937\u092e":"Prayer Enabled"}),(0,qr.jsx)("input",{type:"checkbox",checked:v.enabled,onChange:e=>b(u(u({},v),{},{enabled:e.target.checked})),className:"w-5 h-5"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:r?"\u092a\u094d\u0930\u093e\u0930\u094d\u0925\u0928\u093e \u0938\u092e\u092f":"Prayer Time"}),(0,qr.jsx)("input",{type:"time",value:v.morning_time,onChange:e=>b(u(u({},v),{},{morning_time:e.target.value})),className:"w-full h-11 rounded-lg border border-slate-200 px-3 mt-1"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:r?"\u0905\u0935\u0927\u093f (\u092e\u093f\u0928\u091f)":"Duration (minutes)"}),(0,qr.jsx)("input",{type:"number",value:v.duration,onChange:e=>b(u(u({},v),{},{duration:Number(e.target.value)})),className:"w-full h-11 rounded-lg border border-slate-200 px-3 mt-1",min:"5",max:"60"})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(ql,{children:r?"\u0911\u091f\u094b \u0938\u094d\u091f\u093e\u0930\u094d\u091f":"Auto Start"}),(0,qr.jsx)("input",{type:"checkbox",checked:v.auto_start,onChange:e=>b(u(u({},v),{},{auto_start:e.target.checked})),className:"w-5 h-5"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:r?"\u0918\u094b\u0937\u0923\u093e \u091f\u0947\u0915\u094d\u0938\u094d\u091f":"Announcement Text"}),(0,qr.jsx)("textarea",{value:v.announcement_text,onChange:e=>b(u(u({},v),{},{announcement_text:e.target.value})),className:"w-full rounded-lg border border-slate-200 px-3 py-2 mt-1",rows:3})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,qr.jsx)(Dl,{onClick:async()=>{try{const e=localStorage.getItem("token");await Hr.post("".concat("","/school/").concat(n,"/prayer-settings"),v,{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success(r?"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0938\u0939\u0947\u091c\u0940 \u0917\u0908\u0902":"Settings saved"),j(!1)}catch(e){Qt.success(r?"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0938\u0939\u0947\u091c\u0940 \u0917\u0908\u0902":"Settings saved"),j(!1)}},className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:r?"\u0938\u0939\u0947\u091c\u0947\u0902":"Save"}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>j(!1),className:"flex-1",children:r?"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902":"Cancel"})]})]})}),(0,qr.jsx)("style",{children:"\n        @keyframes spin-slow {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        .animate-spin-slow {\n          animation: spin-slow 3s linear infinite;\n        }\n      "})]})}const kZ=Dc("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),CZ=Dc("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),EZ=[{id:"annual_function",name:"Annual Function (\u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u0909\u0924\u094d\u0938\u0935)",icon:kZ,color:"from-purple-500 to-pink-500"},{id:"sports_day",name:"Sports Day (\u0916\u0947\u0932 \u0926\u093f\u0935\u0938)",icon:fJ,color:"from-green-500 to-emerald-500"},{id:"graduation",name:"Graduation Ceremony",icon:Fc,color:"from-blue-500 to-indigo-500"},{id:"cultural_fest",name:"Cultural Fest (\u0938\u093e\u0902\u0938\u094d\u0915\u0943\u0924\u093f\u0915 \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e)",icon:jZ,color:"from-orange-500 to-red-500"},{id:"parents_meet",name:"Parent-Teacher Meet",icon:rh,color:"from-rose-500 to-pink-500"},{id:"custom",name:"Custom Event",icon:eh,color:"from-slate-500 to-slate-700"}],AZ=[{id:"modern",name:"Modern & Minimal",preview:"\ud83c\udfa8"},{id:"traditional",name:"Traditional Indian",preview:"\ud83e\ude94"},{id:"festive",name:"Festive & Colorful",preview:"\ud83c\udf8a"},{id:"elegant",name:"Elegant & Premium",preview:"\u2728"},{id:"playful",name:"Playful & Fun",preview:"\ud83c\udf88"}];function PZ(){const{t:e,i18n:t}=js(),{user:a,schoolId:n}=Kr(),r="hi"===t.language,i=(0,s.useRef)(null),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)("modern"),[m,h]=(0,s.useState)("pamphlet"),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[v,b]=(0,s.useState)({eventName:"",eventDate:"",eventTime:"",venue:"",chiefGuest:"",description:"",contactNumber:"",specialNote:""}),[y,j]=(0,s.useState)({name:(null===a||void 0===a?void 0:a.school_name)||"School Name",logo:null,address:"School Address",phone:""});(0,s.useEffect)(()=>{(async()=>{if(n)try{const e=localStorage.getItem("token"),t=await Hr.get("".concat("","/api/schools/").concat(n),{headers:{Authorization:"Bearer ".concat(e)}});t.data&&j({name:t.data.name||"School Name",logo:t.data.logo_url||null,address:t.data.address||"School Address",phone:t.data.phone||""})}catch(e){console.error("Failed to fetch school details:",e)}})()},[n]);const N=e=>{b(t=>u(u({},t),{},{[e.target.name]:e.target.value}))},w=async()=>{if(l)if(v.eventName&&v.eventDate){x(!0);try{const e=localStorage.getItem("token"),a=await Hr.post("".concat("","/api/events/generate-design"),{school_id:n,template_type:l,design_style:c,design_type:m,event_details:v,school_info:y,language:t.language},{headers:{Authorization:"Bearer ".concat(e)}});g(a.data),Qt.success(r?"Design \u0924\u0948\u092f\u093e\u0930 \u0939\u0948!":"Design generated successfully!")}catch(e){console.error("Design generation error:",e),S()}finally{x(!1)}}else Qt.error(r?"Event name \u0914\u0930 date \u091c\u0930\u0942\u0930\u0940 \u0939\u0948":"Event name and date are required");else Qt.error(r?"\u092a\u0939\u0932\u0947 event type \u091a\u0941\u0928\u0947\u0902":"Please select event type first")},S=()=>{EZ.find(e=>e.id===l);const e=_(c);g({type:m,template:l,style:c,event:v,school:y,colors:e.colors,generated_at:(new Date).toISOString()}),Qt.success(r?"Design \u0924\u0948\u092f\u093e\u0930 \u0939\u0948!":"Design ready!")},_=e=>{const t={modern:{colors:{primary:"#3B82F6",secondary:"#1E40AF",accent:"#DBEAFE",text:"#1F2937"}},traditional:{colors:{primary:"#DC2626",secondary:"#B91C1C",accent:"#FEF3C7",text:"#7C2D12"}},festive:{colors:{primary:"#F59E0B",secondary:"#D97706",accent:"#FEF3C7",text:"#92400E"}},elegant:{colors:{primary:"#1F2937",secondary:"#111827",accent:"#F3F4F6",text:"#1F2937"}},playful:{colors:{primary:"#EC4899",secondary:"#DB2777",accent:"#FCE7F3",text:"#831843"}}};return t[e]||t.modern},k=()=>{const e=i.current;if(!e)return;const t=window.open("","_blank");t.document.write("\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>".concat(v.eventName," - ").concat("pamphlet"===m?"Pamphlet":"Invitation","</title>\n        <style>\n          @page { size: A4; margin: 0; }\n          body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }\n          .design-container { width: 210mm; min-height: 297mm; }\n        </style>\n      </head>\n      <body>\n        ").concat(e.innerHTML,"\n      </body>\n      </html>\n    ")),t.document.close(),t.print()};return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"event-designer-page",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between",children:(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(hh,{className:"w-7 h-7 text-purple-500"}),"AI Event Designer"]}),(0,qr.jsx)("p",{className:"text-slate-500",children:r?"AI \u0938\u0947 Pamphlets \u0914\u0930 Invitation Cards \u092c\u0928\u093e\u090f\u0902":"Create beautiful pamphlets & invitation cards with AI"})]})}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-3",children:(0,qr.jsx)(Zc,{className:"text-lg",children:r?"Design \u092a\u094d\u0930\u0915\u093e\u0930":"Design Type"})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsxs)("button",{onClick:()=>h("pamphlet"),className:"flex-1 p-4 rounded-xl border-2 transition-all ".concat("pamphlet"===m?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300"),children:[(0,qr.jsx)(Ph,{className:"w-8 h-8 mx-auto mb-2 ".concat("pamphlet"===m?"text-purple-600":"text-slate-400")}),(0,qr.jsx)("p",{className:"font-medium text-center",children:"Pamphlet"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 text-center",children:r?"\u092a\u094b\u0938\u094d\u091f\u0930 / \u092b\u094d\u0932\u093e\u092f\u0930":"Poster / Flyer"})]}),(0,qr.jsxs)("button",{onClick:()=>h("invitation"),className:"flex-1 p-4 rounded-xl border-2 transition-all ".concat("invitation"===m?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300"),children:[(0,qr.jsx)(rh,{className:"w-8 h-8 mx-auto mb-2 ".concat("invitation"===m?"text-purple-600":"text-slate-400")}),(0,qr.jsx)("p",{className:"font-medium text-center",children:"Invitation Card"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 text-center",children:r?"\u0928\u093f\u092e\u0902\u0924\u094d\u0930\u0923 \u092a\u0924\u094d\u0930":"Invite Card"})]})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-3",children:(0,qr.jsx)(Zc,{className:"text-lg",children:r?"Event \u0915\u093e \u092a\u094d\u0930\u0915\u093e\u0930":"Event Type"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:EZ.map(e=>{const t=e.icon;return(0,qr.jsxs)("button",{onClick:()=>o(e.id),className:"p-3 rounded-xl border-2 transition-all text-left ".concat(l===e.id?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300"),children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br ".concat(e.color," flex items-center justify-center mb-2"),children:(0,qr.jsx)(t,{className:"w-5 h-5 text-white"})}),(0,qr.jsx)("p",{className:"text-sm font-medium line-clamp-2",children:e.name})]},e.id)})})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-3",children:(0,qr.jsxs)(Zc,{className:"text-lg flex items-center gap-2",children:[(0,qr.jsx)(CZ,{className:"w-5 h-5 text-purple-500"}),"Design Style"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"flex flex-wrap gap-2",children:AZ.map(e=>(0,qr.jsxs)("button",{onClick:()=>d(e.id),className:"px-4 py-2 rounded-full border-2 transition-all flex items-center gap-2 ".concat(c===e.id?"border-purple-500 bg-purple-50 text-purple-700":"border-slate-200 hover:border-purple-300"),children:[(0,qr.jsx)("span",{children:e.preview}),(0,qr.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.id))})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-3",children:(0,qr.jsx)(Zc,{className:"text-lg",children:"Event Details"})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,qr.jsxs)(ql,{children:[r?"Event \u0915\u093e \u0928\u093e\u092e":"Event Name"," *"]}),(0,qr.jsx)(Rl,{name:"eventName",value:v.eventName,onChange:N,placeholder:r?"\u091c\u0948\u0938\u0947: \u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u0909\u0924\u094d\u0938\u0935 2026":"e.g., Annual Function 2026","data-testid":"event-name-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)(ql,{children:[r?"\u0924\u093e\u0930\u0940\u0916":"Date"," *"]}),(0,qr.jsx)(Rl,{name:"eventDate",type:"date",value:v.eventDate,onChange:N,"data-testid":"event-date-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:r?"\u0938\u092e\u092f":"Time"}),(0,qr.jsx)(Rl,{name:"eventTime",type:"time",value:v.eventTime,onChange:N,"data-testid":"event-time-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,qr.jsx)(ql,{children:r?"\u0938\u094d\u0925\u093e\u0928":"Venue"}),(0,qr.jsx)(Rl,{name:"venue",value:v.venue,onChange:N,placeholder:r?"\u091c\u0948\u0938\u0947: \u0938\u094d\u0915\u0942\u0932 \u092a\u094d\u0930\u093e\u0902\u0917\u0923":"e.g., School Auditorium","data-testid":"venue-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,qr.jsx)(ql,{children:r?"\u092e\u0941\u0916\u094d\u092f \u0905\u0924\u093f\u0925\u093f":"Chief Guest"}),(0,qr.jsx)(Rl,{name:"chiefGuest",value:v.chiefGuest,onChange:N,placeholder:r?"\u091c\u0948\u0938\u0947: \u0936\u094d\u0930\u0940\u092e\u093e\u0928 \u0930\u093e\u091c \u0936\u0930\u094d\u092e\u093e, \u0935\u093f\u0927\u093e\u092f\u0915":"e.g., Hon. MLA Raj Sharma","data-testid":"chief-guest-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,qr.jsx)(ql,{children:r?"\u0935\u093f\u0935\u0930\u0923 / \u0938\u0902\u0926\u0947\u0936":"Description / Message"}),(0,qr.jsx)("textarea",{name:"description",value:v.description,onChange:N,className:"w-full h-20 rounded-lg border border-slate-200 px-3 py-2",placeholder:r?"Event \u0915\u0947 \u092c\u093e\u0930\u0947 \u092e\u0947\u0902 \u0915\u0941\u091b \u0932\u093f\u0916\u0947\u0902...":"Write something about the event...","data-testid":"description-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:r?"\u0938\u0902\u092a\u0930\u094d\u0915 \u0928\u0902\u092c\u0930":"Contact Number"}),(0,qr.jsx)(Rl,{name:"contactNumber",value:v.contactNumber,onChange:N,placeholder:"+91 98765 43210","data-testid":"contact-input"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:r?"\u0935\u093f\u0936\u0947\u0937 \u0928\u094b\u091f":"Special Note"}),(0,qr.jsx)(Rl,{name:"specialNote",value:v.specialNote,onChange:N,placeholder:r?"\u091c\u0948\u0938\u0947: \u092a\u0927\u093e\u0930\u0928\u093e \u0905\u0928\u093f\u0935\u093e\u0930\u094d\u092f \u0939\u0948":"e.g., Your presence is mandatory","data-testid":"special-note-input"})]})]}),(0,qr.jsx)(Dl,{onClick:w,disabled:p,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700","data-testid":"generate-design-btn",children:p?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-5 h-5 mr-2 animate-spin"}),r?"AI Design \u092c\u0928\u093e \u0930\u0939\u093e \u0939\u0948...":"Generating AI Design..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(hh,{className:"w-5 h-5 mr-2"}),r?"AI \u0938\u0947 Design \u092c\u0928\u093e\u090f\u0902":"Generate AI Design"]})})]})]})]}),(0,qr.jsx)("div",{className:"space-y-4",children:(0,qr.jsxs)(Qc,{className:"sticky top-4",children:[(0,qr.jsxs)(Xc,{className:"pb-3 flex flex-row items-center justify-between",children:[(0,qr.jsx)(Zc,{className:"text-lg",children:"Preview"}),f&&(0,qr.jsx)("div",{className:"flex gap-2",children:(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:w,children:[(0,qr.jsx)(lH,{className:"w-4 h-4 mr-1"}),"Regenerate"]})})]}),(0,qr.jsxs)(td,{children:[f?(0,qr.jsx)("div",{ref:i,children:(0,qr.jsx)(OZ,{design:f,designType:m,selectedStyle:c,eventDetails:v,school:y,template:EZ.find(e=>e.id===l)})}):(0,qr.jsx)("div",{className:"aspect-[3/4] bg-slate-100 rounded-xl flex items-center justify-center border-2 border-dashed border-slate-300",children:(0,qr.jsxs)("div",{className:"text-center text-slate-400",children:[(0,qr.jsx)(Ph,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,qr.jsx)("p",{className:"font-medium",children:r?"Design \u092f\u0939\u093e\u0901 \u0926\u093f\u0916\u0947\u0917\u093e":"Design preview will appear here"}),(0,qr.jsx)("p",{className:"text-sm",children:r?"Details \u092d\u0930\u0947\u0902 \u0914\u0930 Generate \u0915\u0930\u0947\u0902":"Fill details and generate"})]})}),f&&(0,qr.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,qr.jsxs)(Dl,{onClick:k,variant:"outline",className:"w-full",children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-2"}),"Print"]}),(0,qr.jsxs)(Dl,{onClick:()=>{k(),Qt.info(r?'Print dialog \u092e\u0947\u0902 "Save as PDF" \u091a\u0941\u0928\u0947\u0902':'Select "Save as PDF" in print dialog')},variant:"outline",className:"w-full",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"PDF"]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(navigator.share)try{await navigator.share({title:v.eventName,text:"".concat(y.name," \u0915\u0940 \u0913\u0930 \u0938\u0947 ").concat(v.eventName," \u0915\u093e \u0928\u093f\u092e\u0902\u0924\u094d\u0930\u0923"),url:window.location.href})}catch($1){console.error("Share failed:",$1)}else navigator.clipboard.writeText("".concat(y.name," - ").concat(v.eventName,"\nDate: ").concat(v.eventDate,"\nVenue: ").concat(v.venue)),Qt.success(r?"Details clipboard \u092a\u0930 copy \u0939\u094b \u0917\u0908":"Details copied to clipboard")},variant:"outline",className:"w-full",children:[(0,qr.jsx)(PJ,{className:"w-4 h-4 mr-2"}),"Share"]})]}),(0,qr.jsxs)(Dl,{onClick:()=>{const e="\ud83c\udf89 *".concat(v.eventName||"Event","*\n\n\ud83c\udfeb *").concat(y.name,"*\n\n\ud83d\udcc5 *\u0926\u093f\u0928\u093e\u0902\u0915:* ").concat((e=>{if(!e)return"";return new Date(e).toLocaleDateString("hi-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})(v.eventDate),"\n").concat(v.eventTime?"\ud83d\udd50 *\u0938\u092e\u092f:* ".concat((e=>{if(!e)return"";const[t,a]=e.split(":"),s=parseInt(t),n=s>=12?"PM":"AM";return"".concat(s%12||12,":").concat(a," ").concat(n)})(v.eventTime)):"","\n").concat(v.venue?"\ud83d\udccd *\u0938\u094d\u0925\u093e\u0928:* ".concat(v.venue):"","\n").concat(v.chiefGuest?"\ud83d\udc64 *\u092e\u0941\u0916\u094d\u092f \u0905\u0924\u093f\u0925\u093f:* ".concat(v.chiefGuest):"","\n\n").concat(v.description||"","\n\n").concat(v.specialNote?"\u2728 *".concat(v.specialNote,"*"):"\u0906\u092a\u0915\u093e \u0938\u0939\u0930\u094d\u0937 \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948\u0964","\n\n").concat(v.contactNumber?"\ud83d\udcde \u0938\u0902\u092a\u0930\u094d\u0915: ".concat(v.contactNumber):"","\n\n_Powered by Schooltino_"),t=encodeURIComponent(e),a="https://wa.me/?text=".concat(t);window.open(a,"_blank"),Qt.success(r?"WhatsApp \u0916\u0941\u0932 \u0930\u0939\u093e \u0939\u0948...":"Opening WhatsApp...")},className:"w-full bg-green-500 hover:bg-green-600 text-white","data-testid":"whatsapp-share-btn",children:[(0,qr.jsx)(oH,{className:"w-5 h-5 mr-2"}),r?"WhatsApp \u092a\u0930 \u092d\u0947\u091c\u0947\u0902":"Share on WhatsApp"]})]})]})]})})]})]})}function OZ(e){let{design:t,designType:a,selectedStyle:s,eventDetails:n,school:r,template:i}=e;const l={modern:{bg:"bg-gradient-to-br from-blue-50 to-indigo-100",header:"bg-gradient-to-r from-blue-600 to-indigo-600",accent:"border-blue-500",text:"text-slate-800"},traditional:{bg:"bg-gradient-to-br from-amber-50 to-orange-100",header:"bg-gradient-to-r from-red-600 to-orange-600",accent:"border-red-500",text:"text-amber-900"},festive:{bg:"bg-gradient-to-br from-yellow-50 to-amber-100",header:"bg-gradient-to-r from-amber-500 to-yellow-500",accent:"border-amber-500",text:"text-amber-900"},elegant:{bg:"bg-gradient-to-br from-slate-100 to-slate-200",header:"bg-gradient-to-r from-slate-800 to-slate-900",accent:"border-slate-700",text:"text-slate-900"},playful:{bg:"bg-gradient-to-br from-pink-50 to-purple-100",header:"bg-gradient-to-r from-pink-500 to-purple-500",accent:"border-pink-500",text:"text-purple-900"}},o=l[s]||l.modern,c=(null===i||void 0===i?void 0:i.icon)||eh,d=e=>{if(!e)return"";return new Date(e).toLocaleDateString("hi-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},u=e=>{if(!e)return"";const[t,a]=e.split(":"),s=parseInt(t),n=s>=12?"PM":"AM";return"".concat(s%12||12,":").concat(a," ").concat(n)};return"invitation"===a?(0,qr.jsxs)("div",{className:"aspect-[4/5] ".concat(o.bg," rounded-xl overflow-hidden shadow-lg border-4 ").concat(o.accent),children:[(0,qr.jsxs)("div",{className:"".concat(o.header," text-white p-4 text-center"),children:[(0,qr.jsx)("p",{className:"text-xs opacity-80 tracking-widest uppercase",children:"\u0906\u092a \u0938\u093e\u0926\u0930 \u0906\u092e\u0902\u0924\u094d\u0930\u093f\u0924 \u0939\u0948\u0902"}),(0,qr.jsx)("h3",{className:"text-lg font-bold mt-1",children:r.name})]}),(0,qr.jsxs)("div",{className:"p-6 text-center",children:[(0,qr.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full ".concat(o.header," flex items-center justify-center"),children:(0,qr.jsx)(c,{className:"w-8 h-8 text-white"})}),(0,qr.jsx)("h2",{className:"text-2xl font-bold ".concat(o.text," mb-3"),children:n.eventName||"Event Name"}),n.description&&(0,qr.jsx)("p",{className:"text-sm ".concat(o.text," opacity-75 mb-4"),children:n.description}),(0,qr.jsxs)("div",{className:"space-y-2 ".concat(o.text),children:[(0,qr.jsxs)("p",{className:"font-semibold",children:["\ud83d\udcc5 ",d(n.eventDate)]}),n.eventTime&&(0,qr.jsxs)("p",{children:["\ud83d\udd50 ",u(n.eventTime)]}),n.venue&&(0,qr.jsxs)("p",{children:["\ud83d\udccd ",n.venue]})]}),n.chiefGuest&&(0,qr.jsxs)("div",{className:"mt-4 p-3 bg-white/50 rounded-lg ".concat(o.text),children:[(0,qr.jsx)("p",{className:"text-xs opacity-70",children:"\u092e\u0941\u0916\u094d\u092f \u0905\u0924\u093f\u0925\u093f"}),(0,qr.jsx)("p",{className:"font-bold",children:n.chiefGuest})]})]}),(0,qr.jsxs)("div",{className:"".concat(o.header," text-white p-3 text-center text-sm mt-auto"),children:[n.specialNote||"\u0906\u092a\u0915\u093e \u0938\u0939\u0930\u094d\u0937 \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948\u0964",n.contactNumber&&(0,qr.jsxs)("p",{className:"text-xs opacity-80 mt-1",children:["\u0938\u0902\u092a\u0930\u094d\u0915: ",n.contactNumber]})]})]}):(0,qr.jsxs)("div",{className:"aspect-[3/4] ".concat(o.bg," rounded-xl overflow-hidden shadow-lg"),children:[(0,qr.jsxs)("div",{className:"".concat(o.header," text-white p-6 text-center relative overflow-hidden"),children:[(0,qr.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,qr.jsx)("div",{className:"absolute -top-10 -left-10 w-40 h-40 bg-white rounded-full"}),(0,qr.jsx)("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-white rounded-full"})]}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("p",{className:"text-sm opacity-90 tracking-wide mb-1",children:r.name}),(0,qr.jsx)("div",{className:"w-20 h-20 mx-auto mb-3 rounded-full bg-white/20 flex items-center justify-center backdrop-blur-sm",children:(0,qr.jsx)(c,{className:"w-10 h-10 text-white"})}),(0,qr.jsx)("h1",{className:"text-3xl font-bold tracking-wide",children:n.eventName||"Event Name"})]})]}),(0,qr.jsxs)("div",{className:"p-6 ".concat(o.text),children:[n.description&&(0,qr.jsx)("p",{className:"text-center mb-6 opacity-80",children:n.description}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/70 rounded-lg border-l-4 ".concat(o.accent),children:[(0,qr.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs opacity-70",children:"\u0926\u093f\u0928\u093e\u0902\u0915 / Date"}),(0,qr.jsx)("p",{className:"font-bold",children:d(n.eventDate)})]})]}),n.eventTime&&(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/70 rounded-lg border-l-4 ".concat(o.accent),children:[(0,qr.jsx)("span",{className:"text-2xl",children:"\ud83d\udd50"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs opacity-70",children:"\u0938\u092e\u092f / Time"}),(0,qr.jsx)("p",{className:"font-bold",children:u(n.eventTime)})]})]}),n.venue&&(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/70 rounded-lg border-l-4 ".concat(o.accent),children:[(0,qr.jsx)("span",{className:"text-2xl",children:"\ud83d\udccd"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs opacity-70",children:"\u0938\u094d\u0925\u093e\u0928 / Venue"}),(0,qr.jsx)("p",{className:"font-bold",children:n.venue})]})]}),n.chiefGuest&&(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/70 rounded-lg border-l-4 ".concat(o.accent),children:[(0,qr.jsx)("span",{className:"text-2xl",children:"\ud83d\udc64"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs opacity-70",children:"\u092e\u0941\u0916\u094d\u092f \u0905\u0924\u093f\u0925\u093f / Chief Guest"}),(0,qr.jsx)("p",{className:"font-bold",children:n.chiefGuest})]})]})]}),n.specialNote&&(0,qr.jsx)("div",{className:"mt-4 p-3 ".concat(o.header," text-white rounded-lg text-center"),children:(0,qr.jsx)("p",{className:"text-sm",children:n.specialNote})})]}),(0,qr.jsxs)("div",{className:"px-6 pb-4 ".concat(o.text," text-center text-sm opacity-70"),children:[n.contactNumber&&(0,qr.jsxs)("p",{children:["\ud83d\udcde ",n.contactNumber]}),(0,qr.jsx)("p",{className:"mt-1",children:r.address})]})]})}const MZ="";function TZ(){var e,t,a,n,r,i,l,o,c,d,m,h,p,x,f,g,v;const{t:b,i18n:y}=js(),{user:j,schoolId:N}=Kr(),w="hi"===y.language,[S,_]=(0,s.useState)(!0),[k,C]=(0,s.useState)([]),[E,A]=(0,s.useState)(null),[P,O]=(0,s.useState)(!1),[M,T]=(0,s.useState)({student_id:"",dob:""}),[D,I]=(0,s.useState)(!1),[R,L]=(0,s.useState)({attendance:null,fees:null,syllabus:null,exams:null}),[F,z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{B()},[]);const B=async()=>{_(!0);try{const e=localStorage.getItem("token"),t=await Hr.get("".concat(MZ,"/api/family/children"),{headers:{Authorization:"Bearer ".concat(e)}});C(t.data||[]),t.data&&t.data.length>0&&(A(t.data[0]),U(t.data[0].id))}catch(e){console.error("Error fetching family children:",e);const t=[{id:"demo1",name:"\u0930\u093e\u0939\u0941\u0932 \u0936\u0930\u094d\u092e\u093e",student_id:"STU-SCS-2025-001",class_name:"Class 8",section:"A",photo_url:null,school_name:"Sainath Convent School"},{id:"demo2",name:"\u092a\u094d\u0930\u093f\u092f\u093e \u0936\u0930\u094d\u092e\u093e",student_id:"STU-SCS-2025-045",class_name:"Class 5",section:"B",photo_url:null,school_name:"Sainath Convent School"}];C(t),t.length>0&&(A(t[0]),U(t[0].id))}finally{_(!1)}},U=async e=>{z(!0);try{const t=localStorage.getItem("token"),[a,s,n,r]=await Promise.all([Hr.get("".concat(MZ,"/api/family/child/").concat(e,"/attendance"),{headers:{Authorization:"Bearer ".concat(t)}}).catch(()=>({data:null})),Hr.get("".concat(MZ,"/api/family/child/").concat(e,"/fees"),{headers:{Authorization:"Bearer ".concat(t)}}).catch(()=>({data:null})),Hr.get("".concat(MZ,"/api/family/child/").concat(e,"/syllabus-progress"),{headers:{Authorization:"Bearer ".concat(t)}}).catch(()=>({data:null})),Hr.get("".concat(MZ,"/api/family/child/").concat(e,"/exams"),{headers:{Authorization:"Bearer ".concat(t)}}).catch(()=>({data:null}))]);L({attendance:a.data||{present:85,total:100,percentage:85},fees:s.data||{total:45e3,paid:3e4,pending:15e3},syllabus:n.data||{completed:65,total:100},exams:r.data||{upcoming:2,recent_score:78}})}catch(t){console.error("Error fetching child data:",t),L({attendance:{present:85,total:100,percentage:85},fees:{total:45e3,paid:3e4,pending:15e3},syllabus:{completed:65,total:100},exams:{upcoming:2,recent_score:78}})}finally{z(!1)}};return S?(0,qr.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"family-portal-page",children:[(0,qr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-7 h-7 text-indigo-600"}),w?"\u092a\u0930\u093f\u0935\u093e\u0930 \u092a\u094b\u0930\u094d\u091f\u0932":"Family Portal"]}),(0,qr.jsx)("p",{className:"text-slate-500",children:w?"\u090f\u0915 \u091c\u0917\u0939 \u092a\u0930 \u0938\u092d\u0940 \u092c\u091a\u094d\u091a\u094b\u0902 \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940":"All your children's information in one place"})]}),(0,qr.jsxs)(Dl,{onClick:()=>O(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(kh,{className:"w-4 h-4 mr-2"}),w?"\u092c\u091a\u094d\u091a\u093e \u091c\u094b\u0921\u093c\u0947\u0902":"Add Child"]})]}),0===k.length?(0,qr.jsxs)(Qc,{className:"p-8 text-center",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,qr.jsx)(Lc,{className:"w-8 h-8 text-indigo-600"})}),(0,qr.jsx)("h3",{className:"text-lg font-semibold mb-2",children:w?"\u0915\u094b\u0908 \u092c\u091a\u094d\u091a\u093e \u0928\u0939\u0940\u0902 \u091c\u0941\u0921\u093c\u093e":"No Children Linked"}),(0,qr.jsx)("p",{className:"text-slate-500 mb-4",children:w?"\u0905\u092a\u0928\u0947 \u092c\u091a\u094d\u091a\u0947 \u0915\u093e Student ID \u0914\u0930 \u091c\u0928\u094d\u092e\u0924\u093f\u0925\u093f \u0921\u093e\u0932\u0915\u0930 \u091c\u094b\u0921\u093c\u0947\u0902":"Add your child using their Student ID and Date of Birth"}),(0,qr.jsxs)(Dl,{onClick:()=>O(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(kh,{className:"w-4 h-4 mr-2"}),w?"\u092c\u091a\u094d\u091a\u093e \u091c\u094b\u0921\u093c\u0947\u0902":"Add Child"]})]}):(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,qr.jsx)("div",{className:"lg:col-span-1",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-3",children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(Ic,{className:"w-4 h-4"}),w?"\u092e\u0947\u0930\u0947 \u092c\u091a\u094d\u091a\u0947":"My Children"]})}),(0,qr.jsxs)(td,{className:"space-y-2",children:[k.map(e=>(0,qr.jsx)("button",{onClick:()=>(e=>{A(e),U(e.id)})(e),className:"w-full p-3 rounded-lg border-2 text-left transition-all ".concat((null===E||void 0===E?void 0:E.id)===e.id?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-indigo-300"),children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat((null===E||void 0===E?void 0:E.id)===e.id?"bg-indigo-500 text-white":"bg-slate-200"),children:e.photo_url?(0,qr.jsx)("img",{src:e.photo_url,alt:"",className:"w-full h-full rounded-full object-cover"}):(0,qr.jsx)(eH,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,qr.jsx)("p",{className:"font-semibold truncate",children:e.name}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.class_name," - ",e.section]})]}),(null===E||void 0===E?void 0:E.id)===e.id&&(0,qr.jsx)(ph,{className:"w-4 h-4 text-indigo-600"})]})},e.id)),(0,qr.jsxs)("button",{onClick:()=>O(!0),className:"w-full p-3 rounded-lg border-2 border-dashed border-slate-300 text-slate-500 hover:border-indigo-300 hover:text-indigo-600 transition-colors flex items-center justify-center gap-2",children:[(0,qr.jsx)(kh,{className:"w-4 h-4"}),w?"\u0914\u0930 \u091c\u094b\u0921\u093c\u0947\u0902":"Add More"]})]})]})}),(0,qr.jsx)("div",{className:"lg:col-span-3 space-y-6",children:E&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white",children:(0,qr.jsx)(td,{className:"p-6",children:(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:E.photo_url?(0,qr.jsx)("img",{src:E.photo_url,alt:"",className:"w-full h-full rounded-full object-cover"}):(0,qr.jsx)(Fc,{className:"w-8 h-8"})}),(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsx)("h2",{className:"text-xl font-bold",children:E.name}),(0,qr.jsxs)("p",{className:"text-white/80",children:[E.class_name," - ",E.section]}),(0,qr.jsxs)("p",{className:"text-sm text-white/60",children:["ID: ",E.student_id]})]}),(0,qr.jsx)("div",{className:"text-right",children:(0,qr.jsx)("p",{className:"text-sm text-white/80",children:E.school_name})})]})})}),F?(0,qr.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,qr.jsx)(Bc,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(eh,{className:"w-5 h-5 text-green-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:w?"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f":"Attendance"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[(null===(e=R.attendance)||void 0===e?void 0:e.percentage)||0,"%"]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Sh,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:w?"\u092c\u0915\u093e\u092f\u093e \u092b\u0940\u0938":"Pending Fee"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-amber-600",children:["\u20b9",((null===(t=R.fees)||void 0===t?void 0:t.pending)||0).toLocaleString()]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(sh,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:w?"\u0938\u093f\u0932\u0947\u092c\u0938":"Syllabus"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:[(null===(a=R.syllabus)||void 0===a?void 0:a.completed)||0,"%"]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(cY,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:w?"\u0905\u0902\u0915":"Score"}),(0,qr.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:[(null===(n=R.exams)||void 0===n?void 0:n.recent_score)||0,"%"]})]})]})})})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(Sh,{className:"w-4 h-4 text-amber-600"}),w?"\u092b\u0940\u0938 \u0935\u093f\u0935\u0930\u0923":"Fee Details"]})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:w?"\u0915\u0941\u0932 \u092b\u0940\u0938":"Total Fee"}),(0,qr.jsxs)("span",{className:"font-bold",children:["\u20b9",((null===(r=R.fees)||void 0===r?void 0:r.total)||0).toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center text-green-600",children:[(0,qr.jsx)("span",{children:w?"\u091c\u092e\u093e":"Paid"}),(0,qr.jsxs)("span",{className:"font-bold",children:["\u20b9",((null===(i=R.fees)||void 0===i?void 0:i.paid)||0).toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center text-amber-600",children:[(0,qr.jsx)("span",{children:w?"\u092c\u0915\u093e\u092f\u093e":"Pending"}),(0,qr.jsxs)("span",{className:"font-bold",children:["\u20b9",((null===(l=R.fees)||void 0===l?void 0:l.pending)||0).toLocaleString()]})]}),(0,qr.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2",children:(0,qr.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(((null===(o=R.fees)||void 0===o?void 0:o.paid)||0)/((null===(c=R.fees)||void 0===c?void 0:c.total)||1)*100,"%")}})})]})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(eh,{className:"w-4 h-4 text-green-600"}),w?"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f \u0935\u093f\u0935\u0930\u0923":"Attendance Details"]})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:w?"\u0915\u0941\u0932 \u0926\u093f\u0928":"Total Days"}),(0,qr.jsx)("span",{className:"font-bold",children:(null===(d=R.attendance)||void 0===d?void 0:d.total)||0})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center text-green-600",children:[(0,qr.jsx)("span",{children:w?"\u0909\u092a\u0938\u094d\u0925\u093f\u0924":"Present"}),(0,qr.jsx)("span",{className:"font-bold",children:(null===(m=R.attendance)||void 0===m?void 0:m.present)||0})]}),(0,qr.jsxs)("div",{className:"flex justify-between items-center text-red-600",children:[(0,qr.jsx)("span",{children:w?"\u0905\u0928\u0941\u092a\u0938\u094d\u0925\u093f\u0924":"Absent"}),(0,qr.jsx)("span",{className:"font-bold",children:((null===(h=R.attendance)||void 0===h?void 0:h.total)||0)-((null===(p=R.attendance)||void 0===p?void 0:p.present)||0)})]}),(0,qr.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2",children:(0,qr.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat((null===(x=R.attendance)||void 0===x?void 0:x.percentage)||0,"%")}})})]})]})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(sh,{className:"w-4 h-4 text-blue-600"}),w?"\u0938\u093f\u0932\u0947\u092c\u0938 \u092a\u094d\u0930\u0917\u0924\u093f":"Syllabus Progress"]})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsxs)("div",{className:"flex-1",children:[(0,qr.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,qr.jsx)("span",{children:w?"\u092a\u0942\u0930\u094d\u0923":"Completed"}),(0,qr.jsxs)("span",{className:"font-bold",children:[(null===(f=R.syllabus)||void 0===f?void 0:f.completed)||0,"%"]})]}),(0,qr.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-3",children:(0,qr.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-3 rounded-full transition-all",style:{width:"".concat((null===(g=R.syllabus)||void 0===g?void 0:g.completed)||0,"%")}})})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[(null===(v=R.syllabus)||void 0===v?void 0:v.completed)||0,"%"]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:w?"\u092a\u0942\u0930\u094d\u0923":"Done"})]})]})})]})]})]})})]}),k.length>1&&(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-5 h-5 text-indigo-600"}),w?"\u0938\u092d\u0940 \u092c\u091a\u094d\u091a\u094b\u0902 \u0915\u093e \u0938\u093e\u0930\u093e\u0902\u0936":"All Children Summary"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{className:"border-b",children:[(0,qr.jsx)("th",{className:"text-left py-3 px-2",children:w?"\u0928\u093e\u092e":"Name"}),(0,qr.jsx)("th",{className:"text-left py-3 px-2",children:w?"\u0915\u0915\u094d\u0937\u093e":"Class"}),(0,qr.jsx)("th",{className:"text-center py-3 px-2",children:w?"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f":"Attendance"}),(0,qr.jsx)("th",{className:"text-center py-3 px-2",children:w?"\u0938\u093f\u0932\u0947\u092c\u0938":"Syllabus"}),(0,qr.jsx)("th",{className:"text-right py-3 px-2",children:w?"\u092c\u0915\u093e\u092f\u093e \u092b\u0940\u0938":"Pending Fee"})]})}),(0,qr.jsx)("tbody",{children:k.map(e=>(0,qr.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,qr.jsx)("td",{className:"py-3 px-2",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-4 h-4 text-indigo-600"})}),(0,qr.jsx)("span",{className:"font-medium",children:e.name})]})}),(0,qr.jsxs)("td",{className:"py-3 px-2",children:[e.class_name," - ",e.section]}),(0,qr.jsx)("td",{className:"py-3 px-2 text-center",children:(0,qr.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"85%"})}),(0,qr.jsx)("td",{className:"py-3 px-2 text-center",children:(0,qr.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"65%"})}),(0,qr.jsx)("td",{className:"py-3 px-2 text-right font-semibold text-amber-600",children:"\u20b915,000"})]},e.id))}),(0,qr.jsx)("tfoot",{children:(0,qr.jsxs)("tr",{className:"bg-slate-50 font-bold",children:[(0,qr.jsx)("td",{className:"py-3 px-2",colSpan:4,children:w?"\u0915\u0941\u0932 \u092c\u0915\u093e\u092f\u093e \u092b\u0940\u0938":"Total Pending Fee"}),(0,qr.jsxs)("td",{className:"py-3 px-2 text-right text-amber-600",children:["\u20b9",(15e3*k.length).toLocaleString()]})]})})]})})})]}),P&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,qr.jsx)(kh,{className:"w-5 h-5 text-indigo-600"}),w?"\u092c\u091a\u094d\u091a\u093e \u091c\u094b\u0921\u093c\u0947\u0902":"Add Child"]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>O(!1),children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:w?"\u0905\u092a\u0928\u0947 \u092c\u091a\u094d\u091a\u0947 \u0915\u093e Student ID \u0914\u0930 \u091c\u0928\u094d\u092e\u0924\u093f\u0925\u093f \u0921\u093e\u0932\u0947\u0902\u0964 \u092f\u0939 ID \u0906\u092a\u0915\u094b \u0938\u094d\u0915\u0942\u0932 \u0938\u0947 \u092e\u093f\u0932\u0940 \u0939\u094b\u0917\u0940\u0964":"Enter your child's Student ID and Date of Birth. You would have received the ID from school."}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:["Student ID"," *"]}),(0,qr.jsx)(Rl,{value:M.student_id,onChange:e=>T(u(u({},M),{},{student_id:e.target.value})),placeholder:"STU-SCS-2025-001"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[w?"\u091c\u0928\u094d\u092e\u0924\u093f\u0925\u093f":"Date of Birth"," *"]}),(0,qr.jsx)(Rl,{type:"date",value:M.dob,onChange:e=>T(u(u({},M),{},{dob:e.target.value}))})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,qr.jsxs)(Dl,{onClick:async()=>{if(M.student_id&&M.dob){I(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(MZ,"/api/family/add-child"),{student_id:M.student_id,dob:M.dob,parent_mobile:null===j||void 0===j?void 0:j.mobile},{headers:{Authorization:"Bearer ".concat(e)}});Qt.success(w?"\u092c\u091a\u094d\u091a\u093e \u091c\u094b\u0921\u093c \u0926\u093f\u092f\u093e \u0917\u092f\u093e!":"Child added successfully!"),O(!1),T({student_id:"",dob:""}),B()}catch(a){var e,t;Qt.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||(w?"\u092c\u091a\u094d\u091a\u093e \u091c\u094b\u0921\u093c\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e":"Error adding child"))}finally{I(!1)}}else Qt.error(w?"Student ID \u0914\u0930 \u091c\u0928\u094d\u092e\u0924\u093f\u0925\u093f \u091c\u0930\u0942\u0930\u0940 \u0939\u0948":"Student ID and DOB required")},disabled:D,className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:[D?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),w?"\u091c\u094b\u0921\u093c\u0947\u0902":"Add"]}),(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>O(!1),className:"flex-1",children:w?"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902":"Cancel"})]})]})})]})}const DZ=Dc("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function IZ(e){let{onLoginSuccess:t}=e;const{i18n:a}=js(),n="hi"===a.language,[r,i]=(0,s.useState)("mobile"),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)({mobile:"",parent_id:"",password:""});return(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center p-4",children:(0,qr.jsxs)(Qc,{className:"w-full max-w-md",children:[(0,qr.jsxs)(Xc,{className:"text-center",children:[(0,qr.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,qr.jsx)(rh,{className:"w-8 h-8 text-white"})}),(0,qr.jsx)(Zc,{className:"text-2xl",children:n?"\u0905\u092d\u093f\u092d\u093e\u0935\u0915 \u092a\u094b\u0930\u094d\u091f\u0932":"Parent Portal"}),(0,qr.jsx)(ed,{children:n?"\u0905\u092a\u0928\u0947 \u092c\u091a\u094d\u091a\u094b\u0902 \u0915\u0940 \u092a\u0942\u0930\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u090f\u0915 \u091c\u0917\u0939":"All your children's information in one place"})]}),(0,qr.jsxs)(td,{children:[(0,qr.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,qr.jsxs)(Dl,{variant:"mobile"===r?"default":"outline",className:"flex-1",onClick:()=>i("mobile"),children:[(0,qr.jsx)(Gm,{className:"w-4 h-4 mr-2"}),"Mobile"]}),(0,qr.jsxs)(Dl,{variant:"id"===r?"default":"outline",className:"flex-1",onClick:()=>i("id"),children:[(0,qr.jsx)(eH,{className:"w-4 h-4 mr-2"}),"Parent ID"]})]}),(0,qr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),"mobile"!==r||m.mobile)if("id"!==r||m.parent_id)if(m.password){d(!0);try{const e=await Hr.post("".concat("","/api/parent/login"),{mobile:"mobile"===r?m.mobile:null,parent_id:"id"===r?m.parent_id:null,password:m.password});e.data.success&&(localStorage.setItem("parent_token",e.data.token),localStorage.setItem("parent_data",JSON.stringify(e.data.parent)),Qt.success(n?"Login \u0938\u092b\u0932!":"Login successful!"),t(e.data.parent))}catch(i){var a,s;Qt.error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Login failed")}finally{d(!1)}}else Qt.error(n?"Password \u0921\u093e\u0932\u0947\u0902":"Enter password");else Qt.error(n?"Parent ID \u0921\u093e\u0932\u0947\u0902":"Enter Parent ID");else Qt.error(n?"Mobile number \u0921\u093e\u0932\u0947\u0902":"Enter mobile number")},className:"space-y-4",children:["mobile"===r?(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Mobile Number"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Gm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{type:"tel",value:m.mobile,onChange:e=>h(u(u({},m),{},{mobile:e.target.value})),placeholder:"9876543210",className:"pl-10",maxLength:10})]})]}):(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Parent ID"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(eH,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{value:m.parent_id,onChange:e=>h(u(u({},m),{},{parent_id:e.target.value})),placeholder:"PAR-SCS-2026-001",className:"pl-10"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)($m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{type:l?"text":"password",value:m.password,onChange:e=>h(u(u({},m),{},{password:e.target.value})),placeholder:"********",className:"pl-10 pr-10"}),(0,qr.jsx)("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:l?(0,qr.jsx)(Uc,{className:"w-4 h-4"}):(0,qr.jsx)(Hc,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full",disabled:c,children:[c?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(DZ,{className:"w-4 h-4 mr-2"}),n?"Login \u0915\u0930\u0947\u0902":"Login"]})]}),(0,qr.jsx)("p",{className:"text-center text-sm text-slate-500 mt-4",children:n?"Password school \u0938\u0947 \u092e\u093f\u0932\u093e \u0939\u0948\u0964 \u092d\u0942\u0932 \u0917\u090f? School \u0938\u0947 \u0938\u0902\u092a\u0930\u094d\u0915 \u0915\u0930\u0947\u0902\u0964":"Password provided by school. Forgot? Contact school."})]})]})})}function RZ(e){var t,a,n,r,i,l,o,c,d;let{parent:u,onLogout:m}=e;const{i18n:h}=js(),p="hi"===h.language,[x,f]=(0,s.useState)(!0),[g,v]=(0,s.useState)([]),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(null),[w,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)([]);(0,s.useEffect)(()=>{C(),A()},[u]);const C=async()=>{f(!0);try{const e=localStorage.getItem("parent_token"),t=await Hr.get("".concat("","/api/parent/children"),{headers:{Authorization:"Bearer ".concat(e)}});v(t.data||[]),t.data&&t.data.length>0&&(y(t.data[0]),E(t.data[0].id))}catch(e){console.error("Error fetching children:",e);const t=[{id:"1",name:"\u0930\u093e\u0939\u0941\u0932 \u0936\u0930\u094d\u092e\u093e",class_name:"Class 8",section:"A",student_id:"STU-SCS-2025-001"},{id:"2",name:"\u092a\u094d\u0930\u093f\u092f\u093e \u0936\u0930\u094d\u092e\u093e",class_name:"Class 5",section:"B",student_id:"STU-SCS-2025-045"}];v(t),y(t[0]),E(t[0].id)}finally{f(!1)}},E=async e=>{try{const t=localStorage.getItem("parent_token"),a=await Hr.get("".concat("","/api/parent/child/").concat(e,"/details"),{headers:{Authorization:"Bearer ".concat(t)}});N(a.data)}catch(t){N({attendance:{percentage:92,present:92,total:100},fees:{total:45e3,paid:35e3,pending:1e4},syllabus:{completed:70},exams:{recent_score:85,upcoming:2},timetable:[{day:"Monday",periods:["Hindi","Math","Science","English","EVS","PT"]},{day:"Tuesday",periods:["Math","Hindi","English","Science","Art","PT"]}],recent_activity:[{type:"attendance",message:"Present marked at 8:15 AM",time:"2 hours ago"},{type:"fee",message:"\u20b95,000 fee payment due",time:"1 day ago"}]})}},A=async()=>{try{const e=localStorage.getItem("parent_token"),t=await Hr.get("".concat("","/api/parent/notifications"),{headers:{Authorization:"Bearer ".concat(e)}});k(t.data||[])}catch(e){k([{id:1,title:"Fee Reminder",message:"\u20b910,000 fee pending",type:"warning",time:"1 day ago"},{id:2,title:"PTM Notice",message:"Parent-Teacher meeting on 25th Jan",type:"info",time:"2 days ago"}])}};return x?(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,qr.jsx)("header",{className:"bg-white border-b sticky top-0 z-10",children:(0,qr.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,qr.jsx)(rh,{className:"w-5 h-5 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"font-bold text-slate-900",children:"StudyTino"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:p?"\u0905\u092d\u093f\u092d\u093e\u0935\u0915 \u092a\u094b\u0930\u094d\u091f\u0932":"Parent Portal"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>S(!0),children:(0,qr.jsx)(wh,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("parent_token"),localStorage.removeItem("parent_data"),m()},children:(0,qr.jsx)(rH,{className:"w-4 h-4"})})]})]})}),(0,qr.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6",children:[(0,qr.jsx)(Qc,{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-0",children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-7 h-7"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h2",{className:"text-lg font-bold",children:(null===u||void 0===u?void 0:u.name)||"Parent"}),(0,qr.jsxs)("p",{className:"text-white/80 text-sm",children:[(0,qr.jsx)(Gm,{className:"w-3 h-3 inline mr-1"}),(null===u||void 0===u?void 0:u.mobile)||"9876543210"]}),(0,qr.jsxs)("p",{className:"text-white/60 text-xs",children:["ID: ",(null===u||void 0===u?void 0:u.parent_id)||"PAR-SCS-2026-001"]})]})]})})}),g.length>1&&(0,qr.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:g.map(e=>(0,qr.jsxs)("button",{onClick:()=>{y(e),E(e.id)},className:"flex-shrink-0 px-4 py-2 rounded-full border-2 transition-all ".concat((null===b||void 0===b?void 0:b.id)===e.id?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white"),children:[(0,qr.jsx)("span",{className:"font-medium",children:e.name}),(0,qr.jsx)("span",{className:"text-xs text-slate-500 ml-2",children:e.class_name})]},e.id))}),b&&(0,qr.jsx)(Qc,{children:(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsx)("div",{className:"flex items-center justify-between",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Fc,{className:"w-6 h-6 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(Zc,{className:"text-lg",children:b.name}),(0,qr.jsxs)(ed,{children:[b.class_name," - ",b.section," | ID: ",b.student_id]})]})]})})})}),j&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-4 text-center",children:[(0,qr.jsx)(eh,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[(null===(t=j.attendance)||void 0===t?void 0:t.percentage)||0,"%"]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:p?"\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f":"Attendance"})]})}),(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-4 text-center",children:[(0,qr.jsx)(Sh,{className:"w-6 h-6 text-amber-600 mx-auto mb-2"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-amber-600",children:["\u20b9",((null===(a=j.fees)||void 0===a?void 0:a.pending)||0).toLocaleString()]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:p?"\u092c\u0915\u093e\u092f\u093e \u092b\u0940\u0938":"Pending Fee"})]})}),(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-4 text-center",children:[(0,qr.jsx)(sh,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[(null===(n=j.syllabus)||void 0===n?void 0:n.completed)||0,"%"]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:p?"\u0938\u093f\u0932\u0947\u092c\u0938":"Syllabus"})]})}),(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-4 text-center",children:[(0,qr.jsx)(Mh,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[(null===(r=j.exams)||void 0===r?void 0:r.recent_score)||0,"%"]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:p?"\u0905\u0902\u0915":"Score"})]})})]}),_.length>0&&(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(Oh,{className:"w-4 h-4 text-amber-500"}),p?"\u0938\u0942\u091a\u0928\u093e\u090f\u0902":"Notifications"]})}),(0,qr.jsx)(td,{className:"space-y-2",children:_.map(e=>(0,qr.jsx)("div",{className:"p-3 rounded-lg border ".concat("warning"===e.type?"bg-amber-50 border-amber-200":"bg-blue-50 border-blue-200"),children:(0,qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,qr.jsx)("p",{className:"text-xs text-slate-600",children:e.message})]}),(0,qr.jsx)("span",{className:"text-xs text-slate-400",children:e.time})]})},e.id))})]}),j&&(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(Sh,{className:"w-4 h-4 text-amber-600"}),p?"\u092b\u0940\u0938 \u0935\u093f\u0935\u0930\u0923":"Fee Details"]})}),(0,qr.jsx)(td,{children:(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex justify-between",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:p?"\u0915\u0941\u0932 \u092b\u0940\u0938":"Total Fee"}),(0,qr.jsxs)("span",{className:"font-bold",children:["\u20b9",((null===(i=j.fees)||void 0===i?void 0:i.total)||0).toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,qr.jsx)("span",{children:p?"\u091c\u092e\u093e":"Paid"}),(0,qr.jsxs)("span",{className:"font-bold",children:["\u20b9",((null===(l=j.fees)||void 0===l?void 0:l.paid)||0).toLocaleString()]})]}),(0,qr.jsxs)("div",{className:"flex justify-between text-amber-600",children:[(0,qr.jsx)("span",{children:p?"\u092c\u0915\u093e\u092f\u093e":"Pending"}),(0,qr.jsxs)("span",{className:"font-bold",children:["\u20b9",((null===(o=j.fees)||void 0===o?void 0:o.pending)||0).toLocaleString()]})]}),(0,qr.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2",children:(0,qr.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(((null===(c=j.fees)||void 0===c?void 0:c.paid)||0)/((null===(d=j.fees)||void 0===d?void 0:d.total)||1)*100,"%")}})}),(0,qr.jsx)(Dl,{className:"w-full mt-2 bg-green-600 hover:bg-green-700",children:p?"\u092b\u0940\u0938 \u092d\u0930\u0947\u0902":"Pay Fee"})]})})]}),g.length>1&&(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4 text-indigo-600"}),p?"\u0938\u092d\u0940 \u092c\u091a\u094d\u091a\u094b\u0902 \u0915\u093e \u0938\u093e\u0930\u093e\u0902\u0936":"All Children Summary"]})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"space-y-3",children:g.map(e=>(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(eH,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:e.class_name})]})]}),(0,qr.jsx)(qc,{className:"w-5 h-5 text-slate-400"})]},e.id))})})]})]})]})}function LZ(){const[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(null);return(0,s.useEffect)(()=>{const e=localStorage.getItem("parent_token"),a=localStorage.getItem("parent_data");e&&a&&(t(!0),n(JSON.parse(a)))},[]),e?(0,qr.jsx)(RZ,{parent:a,onLogout:()=>{t(!1),n(null)}}):(0,qr.jsx)(IZ,{onLoginSuccess:e=>{t(!0),n(e)}})}const FZ=Dc("id-card",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);function zZ(){const{i18n:e}=js(),t=Se(),{login:a}=Kr(),n="hi"===e.language,[r,i]=(0,s.useState)("student"),[l,o]=(0,s.useState)("id"),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)({student_id:"",parent_id:"",mobile:"",password:"",dob:""});return(0,qr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center p-4",children:(0,qr.jsxs)("div",{className:"w-full max-w-md",children:[(0,qr.jsxs)("div",{className:"text-center mb-6",children:[(0,qr.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,qr.jsx)(sh,{className:"w-10 h-10 text-white"})}),(0,qr.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"StudyTino"}),(0,qr.jsx)("p",{className:"text-slate-500",children:n?"\u091b\u093e\u0924\u094d\u0930 \u0914\u0930 \u0905\u092d\u093f\u092d\u093e\u0935\u0915 \u092a\u094b\u0930\u094d\u091f\u0932":"Student & Parent Portal"})]}),(0,qr.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,qr.jsxs)("button",{onClick:()=>{i("student"),o("id"),x(u(u({},p),{},{student_id:"",parent_id:"",mobile:"",password:"",dob:""}))},className:"flex-1 p-4 rounded-xl border-2 transition-all ".concat("student"===r?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-indigo-300"),children:[(0,qr.jsx)(Fc,{className:"w-8 h-8 mx-auto mb-2 ".concat("student"===r?"text-indigo-600":"text-slate-400")}),(0,qr.jsx)("p",{className:"font-medium ".concat("student"===r?"text-indigo-700":"text-slate-600"),children:n?"\u091b\u093e\u0924\u094d\u0930":"Student"})]}),(0,qr.jsxs)("button",{onClick:()=>{i("parent"),o("mobile"),x(u(u({},p),{},{student_id:"",parent_id:"",mobile:"",password:"",dob:""}))},className:"flex-1 p-4 rounded-xl border-2 transition-all ".concat("parent"===r?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300"),children:[(0,qr.jsx)(rh,{className:"w-8 h-8 mx-auto mb-2 ".concat("parent"===r?"text-purple-600":"text-slate-400")}),(0,qr.jsx)("p",{className:"font-medium ".concat("parent"===r?"text-purple-700":"text-slate-600"),children:n?"\u0905\u092d\u093f\u092d\u093e\u0935\u0915":"Parent"})]})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{className:"pb-2",children:[(0,qr.jsx)(Zc,{className:"text-lg flex items-center gap-2",children:"student"===r?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Fc,{className:"w-5 h-5 text-indigo-600"})," ",n?"\u091b\u093e\u0924\u094d\u0930 Login":"Student Login"]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(rh,{className:"w-5 h-5 text-purple-600"})," ",n?"\u0905\u092d\u093f\u092d\u093e\u0935\u0915 Login":"Parent Login"]})}),(0,qr.jsx)(ed,{children:"student"===r?n?"Student ID \u092f\u093e Mobile \u0938\u0947 login \u0915\u0930\u0947\u0902":"Login with Student ID or Mobile":n?"Parent ID \u092f\u093e Mobile \u0938\u0947 login \u0915\u0930\u0947\u0902":"Login with Parent ID or Mobile"})]}),(0,qr.jsxs)(td,{children:[(0,qr.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,qr.jsxs)(Dl,{type:"button",variant:"id"===l?"default":"outline",className:"flex-1",onClick:()=>o("id"),children:[(0,qr.jsx)(FZ,{className:"w-4 h-4 mr-2"}),"student"===r?"Student ID":"Parent ID"]}),(0,qr.jsxs)(Dl,{type:"button",variant:"mobile"===l?"default":"outline",className:"flex-1",onClick:()=>o("mobile"),children:[(0,qr.jsx)(Gm,{className:"w-4 h-4 mr-2"}),"Mobile"]})]}),(0,qr.jsxs)("form",{onSubmit:"student"===r?async e=>{if(e.preventDefault(),"id"!==l||p.student_id)if("mobile"!==l||p.mobile)if("id"!==l||p.password)if("mobile"!==l||p.dob){h(!0);try{const e="id"===l?{student_id:p.student_id,password:p.password}:{mobile:p.mobile,dob:p.dob},a=await Hr.post("".concat("","/api/students/login"),e);a.data.access_token&&(localStorage.setItem("token",a.data.access_token),localStorage.setItem("user",JSON.stringify(a.data.student)),Qt.success(n?"Login \u0938\u092b\u0932!":"Login successful!"),t("/student-dashboard"))}catch(r){var a,s;Qt.error((null===(a=r.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Login failed")}finally{h(!1)}}else Qt.error(n?"\u091c\u0928\u094d\u092e\u0924\u093f\u0925\u093f \u0921\u093e\u0932\u0947\u0902":"Enter Date of Birth");else Qt.error(n?"Password \u0921\u093e\u0932\u0947\u0902":"Enter Password");else Qt.error(n?"Mobile Number \u0921\u093e\u0932\u0947\u0902":"Enter Mobile Number");else Qt.error(n?"Student ID \u0921\u093e\u0932\u0947\u0902":"Enter Student ID")}:async e=>{if(e.preventDefault(),"id"!==l||p.parent_id)if("mobile"!==l||p.mobile)if(p.password){h(!0);try{const e=await Hr.post("".concat("","/api/parent/login"),{mobile:"mobile"===l?p.mobile:null,parent_id:"id"===l?p.parent_id:null,password:p.password});e.data.success&&(localStorage.setItem("parent_token",e.data.token),localStorage.setItem("parent_data",JSON.stringify(e.data.parent)),Qt.success(n?"Login \u0938\u092b\u0932!":"Login successful!"),t("/parent-portal"))}catch(r){var a,s;Qt.error((null===(a=r.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Login failed")}finally{h(!1)}}else Qt.error(n?"Password \u0921\u093e\u0932\u0947\u0902":"Enter Password");else Qt.error(n?"Mobile Number \u0921\u093e\u0932\u0947\u0902":"Enter Mobile Number");else Qt.error(n?"Parent ID \u0921\u093e\u0932\u0947\u0902":"Enter Parent ID")},className:"space-y-4",children:["id"===l&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"student"===r?"Student ID":"Parent ID"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(FZ,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{value:"student"===r?p.student_id:p.parent_id,onChange:e=>x(u(u({},p),{},{["student"===r?"student_id":"parent_id"]:e.target.value})),placeholder:"student"===r?"STU-2026-00001":"PAR-2026-00001",className:"pl-10"})]})]}),"mobile"===l&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Mobile Number"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Gm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{type:"tel",value:p.mobile,onChange:e=>x(u(u({},p),{},{mobile:e.target.value})),placeholder:"9876543210",className:"pl-10",maxLength:10})]})]}),("parent"===r||"id"===l)&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)($m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{type:c?"text":"password",value:p.password,onChange:e=>x(u(u({},p),{},{password:e.target.value})),placeholder:"********",className:"pl-10 pr-10"}),(0,qr.jsx)("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:c?(0,qr.jsx)(Uc,{className:"w-4 h-4"}):(0,qr.jsx)(Hc,{className:"w-4 h-4"})})]})]}),"student"===r&&"mobile"===l&&(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:n?"\u091c\u0928\u094d\u092e\u0924\u093f\u0925\u093f":"Date of Birth"}),(0,qr.jsx)(Rl,{type:"date",value:p.dob,onChange:e=>x(u(u({},p),{},{dob:e.target.value}))})]}),(0,qr.jsxs)(Dl,{type:"submit",className:"w-full ".concat("student"===r?"bg-indigo-600 hover:bg-indigo-700":"bg-purple-600 hover:bg-purple-700"),disabled:m,children:[m?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(DZ,{className:"w-4 h-4 mr-2"}),n?"Login \u0915\u0930\u0947\u0902":"Login"]})]}),(0,qr.jsx)("p",{className:"text-center text-xs text-slate-500 mt-4",children:n?"Password school \u0938\u0947 \u092e\u093f\u0932\u093e \u0939\u0948\u0964 \u092d\u0942\u0932 \u0917\u090f? School \u0938\u0947 \u0938\u0902\u092a\u0930\u094d\u0915 \u0915\u0930\u0947\u0902\u0964":"Password provided by school. Forgot? Contact school."})]})]}),(0,qr.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,qr.jsxs)("div",{className:"bg-white/70 backdrop-blur p-3 rounded-xl border border-slate-200",children:[(0,qr.jsx)(Fc,{className:"w-6 h-6 text-indigo-500 mb-2"}),(0,qr.jsx)("p",{className:"text-xs text-slate-600",children:n?"\u091b\u093e\u0924\u094d\u0930 \u0905\u092a\u0928\u093e homework, attendance, results \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902":"Students can view homework, attendance, results"})]}),(0,qr.jsxs)("div",{className:"bg-white/70 backdrop-blur p-3 rounded-xl border border-slate-200",children:[(0,qr.jsx)(rh,{className:"w-6 h-6 text-purple-500 mb-2"}),(0,qr.jsx)("p",{className:"text-xs text-slate-600",children:n?"Parents \u0938\u092d\u0940 \u092c\u091a\u094d\u091a\u094b\u0902 \u0915\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u090f\u0915 \u091c\u0917\u0939 \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902":"Parents can view all children's info in one place"})]})]}),(0,qr.jsx)("div",{className:"mt-4 text-center",children:(0,qr.jsx)("button",{onClick:()=>t("/login"),className:"text-sm text-slate-500 hover:text-indigo-600 transition-colors",children:"Staff / Admin Login \u2192"})})]})})}function BZ(){var e,t,a,n,r,i,l,o,c,d;const{user:m}=Kr(),[h,p]=(0,s.useState)(!0),[x,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)({amount:"",payment_mode:"gpay",transaction_id:"",payer_upi_id:"",remarks:""}),_=(null===m||void 0===m?void 0:m.student_id)||(null===m||void 0===m?void 0:m.linked_student_id);(0,s.useEffect)(()=>{_&&k()},[_]);const k=async()=>{try{p(!0);const e=localStorage.getItem("token"),t=await Hr.get("".concat("","/api/parent/fee-details/").concat(_),{headers:{Authorization:"Bearer ".concat(e)}});v(t.data)}catch(e){console.error("Error fetching fee details:",e),Qt.error("Fee details load \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{p(!1)}},C=(e,t)=>{navigator.clipboard.writeText(e),Qt.success("".concat(t," copied!"))};return h?(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):_?(0,qr.jsxs)("div",{className:"p-4 md:p-6 max-w-4xl mx-auto space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 text-white",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(null===g||void 0===g||null===(e=g.school)||void 0===e?void 0:e.logo_url)&&(0,qr.jsx)("img",{src:g.school.logo_url,alt:"School Logo",className:"w-16 h-16 rounded-xl bg-white p-1"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold",children:(null===g||void 0===g||null===(t=g.school)||void 0===t?void 0:t.name)||"School"}),(0,qr.jsx)("p",{className:"text-indigo-100",children:"Fee Payment Portal"})]})]}),(0,qr.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[(0,qr.jsxs)("div",{className:"bg-white/10 rounded-lg px-3 py-2",children:[(0,qr.jsx)("span",{className:"text-indigo-200",children:"Student:"}),(0,qr.jsx)("span",{className:"ml-2 font-semibold",children:null===g||void 0===g||null===(a=g.student)||void 0===a?void 0:a.name})]}),(0,qr.jsxs)("div",{className:"bg-white/10 rounded-lg px-3 py-2",children:[(0,qr.jsx)("span",{className:"text-indigo-200",children:"Class:"}),(0,qr.jsx)("span",{className:"ml-2 font-semibold",children:null===g||void 0===g||null===(n=g.student)||void 0===n?void 0:n.class})]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[(0,qr.jsx)(kY,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-sm",children:"Pending"})]}),(0,qr.jsxs)("div",{className:"text-2xl font-bold text-red-700",children:["\u20b9",(null===g||void 0===g||null===(r=g.summary)||void 0===r||null===(i=r.total_pending)||void 0===i?void 0:i.toLocaleString("en-IN"))||0]})]}),(0,qr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[(0,qr.jsx)(Km,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"text-sm",children:"Paid"})]}),(0,qr.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:["\u20b9",(null===g||void 0===g||null===(l=g.summary)||void 0===l||null===(o=l.total_paid)||void 0===o?void 0:o.toLocaleString("en-IN"))||0]})]})]}),(null===g||void 0===g?void 0:g.payment_options)&&(0,qr.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm p-5",children:[(0,qr.jsxs)("h2",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Zm,{className:"w-5 h-5 text-indigo-600"}),"Payment Options"]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.payment_options.gpay_number&&(0,qr.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Gm,{className:"w-5 h-5 text-green-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("div",{className:"text-xs text-gray-500",children:"GPay"}),(0,qr.jsx)("div",{className:"font-medium",children:g.payment_options.gpay_number})]})]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>C(g.payment_options.gpay_number,"GPay Number"),children:(0,qr.jsx)(XU,{className:"w-4 h-4"})})]}),g.payment_options.paytm_number&&(0,qr.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Gm,{className:"w-5 h-5 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("div",{className:"text-xs text-gray-500",children:"Paytm"}),(0,qr.jsx)("div",{className:"font-medium",children:g.payment_options.paytm_number})]})]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>C(g.payment_options.paytm_number,"Paytm Number"),children:(0,qr.jsx)(XU,{className:"w-4 h-4"})})]}),g.payment_options.phonepe_number&&(0,qr.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Gm,{className:"w-5 h-5 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("div",{className:"text-xs text-gray-500",children:"PhonePe"}),(0,qr.jsx)("div",{className:"font-medium",children:g.payment_options.phonepe_number})]})]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>C(g.payment_options.phonepe_number,"PhonePe Number"),children:(0,qr.jsx)(XU,{className:"w-4 h-4"})})]}),g.payment_options.upi_id&&(0,qr.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:(0,qr.jsx)(nH,{className:"w-5 h-5 text-orange-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("div",{className:"text-xs text-gray-500",children:"UPI ID"}),(0,qr.jsx)("div",{className:"font-medium",children:g.payment_options.upi_id})]})]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>C(g.payment_options.upi_id,"UPI ID"),children:(0,qr.jsx)(XU,{className:"w-4 h-4"})})]}),g.payment_options.bank_details&&(0,qr.jsxs)("div",{className:"col-span-full bg-gray-50 rounded-lg p-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,qr.jsx)(sX,{className:"w-5 h-5 text-gray-600"}),(0,qr.jsx)("span",{className:"font-medium",children:"Bank Transfer"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-gray-500",children:"Bank:"})," ",g.payment_options.bank_details.bank_name]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-gray-500",children:"A/C:"})," ",g.payment_options.bank_details.account_number]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-gray-500",children:"IFSC:"})," ",g.payment_options.bank_details.ifsc_code]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-gray-500",children:"Name:"})," ",g.payment_options.bank_details.account_holder_name]})]})]}),g.payment_options.qr_code_url&&(0,qr.jsx)("div",{className:"col-span-full flex justify-center",children:(0,qr.jsx)("img",{src:g.payment_options.qr_code_url,alt:"Payment QR",className:"w-40 h-40 rounded-lg border"})})]})]}),(null===g||void 0===g||null===(c=g.pending_invoices)||void 0===c?void 0:c.length)>0&&(0,qr.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm p-5",children:[(0,qr.jsxs)("h2",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-5 h-5 text-amber-600"}),"Pending Fees"]}),(0,qr.jsx)("div",{className:"space-y-3",children:g.pending_invoices.map(e=>(0,qr.jsxs)("div",{className:"flex items-center justify-between bg-amber-50 rounded-lg p-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("div",{className:"font-medium",children:e.fee_type||"Fee"}),(0,qr.jsx)("div",{className:"text-sm text-gray-500",children:e.description||"Due: ".concat(e.due_date)})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsxs)("div",{className:"text-lg font-bold text-amber-700",children:["\u20b9",(e.amount-(e.paid_amount||0)).toLocaleString("en-IN")]}),(0,qr.jsxs)(Dl,{size:"sm",onClick:()=>(e=>{y(e),S(t=>u(u({},t),{},{amount:(e.amount-e.paid_amount).toString()})),N(!0)})(e),className:"mt-1",children:["Pay Now ",(0,qr.jsx)(uh,{className:"w-4 h-4 ml-1"})]})]})]},e.id))})]}),(null===g||void 0===g||null===(d=g.payment_history)||void 0===d?void 0:d.length)>0&&(0,qr.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm p-5",children:[(0,qr.jsxs)("h2",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-5 h-5 text-green-600"}),"Payment History"]}),(0,qr.jsx)("div",{className:"space-y-3",children:g.payment_history.map(e=>{var t,a;return(0,qr.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"font-medium",children:["\u20b9",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("en-IN")]}),(0,qr.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(e.created_at).toLocaleDateString("en-IN")," \u2022 ",null===(a=e.payment_mode)||void 0===a?void 0:a.toUpperCase()]})]}),e.receipt_no&&(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),a=(await Hr.get("".concat("","/api/receipt/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}})).data;window.open("","_blank").document.write("\n        <html>\n        <head>\n          <title>Receipt - ".concat(e,'</title>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }\n            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 15px; }\n            .logo { max-height: 60px; }\n            .school-name { font-size: 20px; font-weight: bold; margin: 10px 0; }\n            .receipt-title { background: #4f46e5; color: white; padding: 8px; text-align: center; margin: 15px 0; }\n            .row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #ddd; }\n            .label { color: #666; }\n            .value { font-weight: 500; }\n            .amount { font-size: 24px; color: #16a34a; font-weight: bold; text-align: center; margin: 20px 0; }\n            .footer { text-align: center; margin-top: 30px; font-size: 12px; color: #666; }\n            .signature { margin-top: 40px; text-align: right; }\n            @media print { body { padding: 0; } }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            ').concat(a.school.logo_url?'<img src="'.concat(a.school.logo_url,'" class="logo" />'):"",'\n            <div class="school-name">').concat(a.school.name,"</div>\n            <div>").concat(a.school.address||"","</div>\n            <div>").concat(a.school.phone||""," | ").concat(a.school.email||"",'</div>\n          </div>\n          \n          <div class="receipt-title">FEE RECEIPT</div>\n          \n          <div class="row"><span class="label">Receipt No:</span><span class="value">').concat(a.receipt.receipt_no,'</span></div>\n          <div class="row"><span class="label">Date:</span><span class="value">').concat(new Date(a.receipt.date).toLocaleDateString("en-IN"),'</span></div>\n          <div class="row"><span class="label">Student Name:</span><span class="value">').concat(a.student.name,'</span></div>\n          <div class="row"><span class="label">Class:</span><span class="value">').concat(a.student.class,'</span></div>\n          <div class="row"><span class="label">Father\'s Name:</span><span class="value">').concat(a.student.father_name||"-",'</span></div>\n          <div class="row"><span class="label">Payment Mode:</span><span class="value">').concat(a.receipt.payment_mode,'</span></div>\n          <div class="row"><span class="label">Transaction ID:</span><span class="value">').concat(a.receipt.transaction_id||"-",'</span></div>\n          \n          <div class="amount">\u20b9 ').concat(a.receipt.amount.toLocaleString("en-IN"),"</div>\n          \n          ").concat(a.footer.note?'<div style="text-align:center; font-style:italic; color:#666;">'.concat(a.footer.note,"</div>"):"",'\n          \n          <div class="signature">\n            <div>_____________________</div>\n            <div>').concat(a.footer.authorized_by||"Authorized Signatory",'</div>\n            <div style="font-size:11px;">').concat(a.footer.designation||"",'</div>\n          </div>\n          \n          <div class="footer">\n            This is a computer generated receipt.\n          </div>\n          \n          <script>window.print();<\/script>\n        </body>\n        </html>\n      '))}catch(t){Qt.error("Receipt load \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}})(e.receipt_no),children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-1"})," Receipt"]})]},e.id)})})]}),j&&(0,qr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,qr.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Record Payment"}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Amount (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:w.amount,onChange:e=>S(t=>u(u({},t),{},{amount:e.target.value})),placeholder:"Enter amount"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Payment Mode"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2",value:w.payment_mode,onChange:e=>S(t=>u(u({},t),{},{payment_mode:e.target.value})),children:[(0,qr.jsx)("option",{value:"gpay",children:"Google Pay"}),(0,qr.jsx)("option",{value:"paytm",children:"Paytm"}),(0,qr.jsx)("option",{value:"phonepe",children:"PhonePe"}),(0,qr.jsx)("option",{value:"upi",children:"Other UPI"}),(0,qr.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Transaction ID / UTR Number *"}),(0,qr.jsx)(Rl,{value:w.transaction_id,onChange:e=>S(t=>u(u({},t),{},{transaction_id:e.target.value})),placeholder:"Enter transaction reference"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Your UPI ID (Optional)"}),(0,qr.jsx)(Rl,{value:w.payer_upi_id,onChange:e=>S(t=>u(u({},t),{},{payer_upi_id:e.target.value})),placeholder:"yourname@upi"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Remarks (Optional)"}),(0,qr.jsx)(Rl,{value:w.remarks,onChange:e=>S(t=>u(u({},t),{},{remarks:e.target.value})),placeholder:"Any note for school"})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,qr.jsx)(Dl,{variant:"outline",className:"flex-1",onClick:()=>N(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{className:"flex-1",onClick:async()=>{if(w.transaction_id)if(!w.amount||parseFloat(w.amount)<=0)Qt.error("\u0938\u0939\u0940 amount \u0921\u093e\u0932\u0947\u0902");else{f(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat("","/api/parent/record-payment"),{student_id:_,invoice_id:null===b||void 0===b?void 0:b.id,amount:parseFloat(w.amount),payment_mode:w.payment_mode,transaction_id:w.transaction_id,payer_upi_id:w.payer_upi_id,remarks:w.remarks},{headers:{Authorization:"Bearer ".concat(e)}});Qt.success("Payment recorded! Verification \u0915\u0947 \u092c\u093e\u0926 receipt \u092e\u093f\u0932\u0947\u0917\u0940\u0964"),N(!1),y(null),S({amount:"",payment_mode:"gpay",transaction_id:"",payer_upi_id:"",remarks:""}),k()}catch(a){var e,t;Qt.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Payment record \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{f(!1)}}else Qt.error("Transaction ID \u0921\u093e\u0932\u0947\u0902")},disabled:x,children:[x?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,"Submit Payment"]})]})]})})]}):(0,qr.jsxs)("div",{className:"p-6 text-center",children:[(0,qr.jsx)(kY,{className:"w-12 h-12 mx-auto text-amber-500 mb-4"}),(0,qr.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Student ID Not Found"}),(0,qr.jsx)("p",{className:"text-gray-600",children:"Please login with your parent account linked to a student."})]})}function UZ(e){let{settings:t,onChange:a}=e;return(0,qr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[(0,qr.jsx)("h4",{className:"font-medium text-gray-700 flex items-center gap-2",children:"\ud83d\uddbc\ufe0f Logo Watermark Settings"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsx)("div",{className:"col-span-2",children:(0,qr.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg bg-white border hover:bg-indigo-50",children:[(0,qr.jsx)("input",{type:"checkbox",checked:(null===t||void 0===t?void 0:t.watermark_enabled)||!1,onChange:e=>a(u(u({},t),{},{watermark_enabled:e.target.checked})),className:"w-5 h-5 rounded border-gray-300 text-indigo-600"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"font-medium",children:"Enable Logo Watermark"}),(0,qr.jsx)("p",{className:"text-xs text-gray-500",children:"Logo har document mein background mein dikhega"})]})]})}),(null===t||void 0===t?void 0:t.watermark_enabled)&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Opacity / \u092a\u093e\u0930\u0926\u0930\u094d\u0936\u093f\u0924\u093e"}),(0,qr.jsx)("input",{type:"range",min:"0.03",max:"0.2",step:"0.01",value:(null===t||void 0===t?void 0:t.watermark_opacity)||.08,onChange:e=>a(u(u({},t),{},{watermark_opacity:parseFloat(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,qr.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,qr.jsx)("span",{children:"Light"}),(0,qr.jsxs)("span",{children:[Math.round(100*((null===t||void 0===t?void 0:t.watermark_opacity)||.08)),"%"]}),(0,qr.jsx)("span",{children:"Dark"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Size / \u0906\u0915\u093e\u0930"}),(0,qr.jsxs)("select",{value:(null===t||void 0===t?void 0:t.watermark_size)||"large",onChange:e=>a(u(u({},t),{},{watermark_size:e.target.value})),className:"w-full h-10 rounded-md border border-gray-200 px-3 text-sm",children:[(0,qr.jsx)("option",{value:"small",children:"Small (\u091b\u094b\u091f\u093e)"}),(0,qr.jsx)("option",{value:"medium",children:"Medium (\u092e\u0927\u094d\u092f\u092e)"}),(0,qr.jsx)("option",{value:"large",children:"Large (\u092c\u0921\u093c\u093e)"}),(0,qr.jsx)("option",{value:"full",children:"Full Page (\u092a\u0942\u0930\u093e \u092a\u0947\u091c)"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Position / \u0938\u094d\u0925\u093e\u0928"}),(0,qr.jsxs)("select",{value:(null===t||void 0===t?void 0:t.watermark_position)||"center",onChange:e=>a(u(u({},t),{},{watermark_position:e.target.value})),className:"w-full h-10 rounded-md border border-gray-200 px-3 text-sm",children:[(0,qr.jsx)("option",{value:"center",children:"Center (\u092c\u0940\u091a \u092e\u0947\u0902)"}),(0,qr.jsx)("option",{value:"top-right",children:"Top Right (\u090a\u092a\u0930 \u0926\u093e\u090f\u0902)"}),(0,qr.jsx)("option",{value:"bottom-right",children:"Bottom Right (\u0928\u0940\u091a\u0947 \u0926\u093e\u090f\u0902)"}),(0,qr.jsx)("option",{value:"top-left",children:"Top Left (\u090a\u092a\u0930 \u092c\u093e\u090f\u0902)"}),(0,qr.jsx)("option",{value:"bottom-left",children:"Bottom Left (\u0928\u0940\u091a\u0947 \u092c\u093e\u090f\u0902)"})]})]}),(0,qr.jsxs)("div",{className:"col-span-2",children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Apply To / \u0907\u0928 \u092a\u0930 \u0932\u0917\u093e\u090f\u0902:"}),(0,qr.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"notices",label:"\ud83d\udce2 Notices"},{key:"admit_cards",label:"\ud83c\udfab Admit Cards"},{key:"calendar",label:"\ud83d\udcc5 Calendar"},{key:"fee_receipts",label:"\ud83e\uddfe Fee Receipts"},{key:"reports",label:"\ud83d\udcca Reports"},{key:"certificates",label:"\ud83c\udfc6 Certificates"}].map(e=>{var s,n;return(0,qr.jsxs)("label",{className:"px-3 py-1.5 rounded-full text-xs cursor-pointer transition ".concat(null!==t&&void 0!==t&&null!==(s=t.watermark_apply)&&void 0!==s&&s[e.key]?"bg-indigo-600 text-white":"bg-white border hover:bg-gray-100"),children:[(0,qr.jsx)("input",{type:"checkbox",checked:(null===t||void 0===t||null===(n=t.watermark_apply)||void 0===n?void 0:n[e.key])||!1,onChange:s=>a(u(u({},t),{},{watermark_apply:u(u({},null===t||void 0===t?void 0:t.watermark_apply),{},{[e.key]:s.target.checked})})),className:"hidden"}),e.label]},e.key)})})]})]})]})]})}const HZ="";function qZ(){const{user:e}=Kr(),t=null===e||void 0===e?void 0:e.school_id,[a,n]=(0,s.useState)(!0),[r,i]=(0,s.useState)(!1),[l,o]=(0,s.useState)("profile"),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)({name:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",website_url:"",logo_url:"",motto:"",principal_name:"",registration_number:"",established_year:"",board_type:"RBSE",signature_url:"",seal_url:"",watermark_enabled:!0,watermark_opacity:.08,watermark_size:"large",watermark_position:"center",watermark_apply:{notices:!0,admit_cards:!0,calendar:!0,fee_receipts:!0,reports:!1,certificates:!0}}),[y,j]=(0,s.useState)({seal_shape:"circular",color_scheme:"blue"}),[N,w]=(0,s.useState)({gpay_number:"",paytm_number:"",phonepe_number:"",upi_id:"",bank_name:"",account_number:"",ifsc_code:"",account_holder_name:"",qr_code_url:"",receipt_prefix:"RCP",receipt_footer_note:"",authorized_signatory_name:"",authorized_signatory_designation:""}),[S,_]=(0,s.useState)({school_start_time:"08:00",school_end_time:"14:00",late_grace_period:15,current_session:"2024-25",board:"RBSE",state:"Rajasthan",attendance_mode:"auto"});(0,s.useEffect)(()=>{t&&k()},[t]);const k=async()=>{try{n(!0);const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)},s=await Hr.get("".concat(HZ,"/api/schools/").concat(t),{headers:a}).catch(()=>({data:null}));s.data&&b(e=>u(u({},e),s.data));const r=await Hr.get("".concat(HZ,"/api/school/payment-settings?school_id=").concat(t),{headers:a}).catch(()=>({data:{}}));r.data&&w(e=>u(u({},e),r.data));const i=await Hr.get("".concat(HZ,"/api/school/settings?school_id=").concat(t),{headers:a}).catch(()=>({data:{}}));i.data&&_(e=>u(u({},e),i.data))}catch(e){console.error("Error fetching data:",e)}finally{n(!1)}};if(a)return(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})});const C=[{id:"profile",label:"School Profile",icon:sX},{id:"payment",label:"Payment Settings",icon:nH},{id:"academic",label:"Academic Settings",icon:eh},{id:"receipt",label:"Receipt Settings",icon:Ch}];return(0,qr.jsxs)("div",{className:"p-4 md:p-6 max-w-5xl mx-auto",children:[(0,qr.jsxs)("div",{className:"mb-6",children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,qr.jsx)(wh,{className:"w-7 h-7 text-indigo-600"}),"School Management"]}),(0,qr.jsx)("p",{className:"text-gray-500 text-sm",children:"School \u0915\u0940 \u0938\u092d\u0940 settings \u090f\u0915 \u091c\u0917\u0939 manage \u0915\u0930\u0947\u0902"})]}),(0,qr.jsx)("div",{className:"flex flex-wrap gap-2 mb-6 border-b pb-2",children:C.map(e=>(0,qr.jsxs)("button",{onClick:()=>o(e.id),className:"px-4 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition ".concat(l===e.id?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,qr.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:["profile"===l&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"flex items-start gap-6",children:[(0,qr.jsxs)("div",{className:"shrink-0",children:[(0,qr.jsx)("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center overflow-hidden bg-gray-50 relative",children:v.logo_url?(0,qr.jsx)("img",{src:v.logo_url,alt:"School Logo",className:"w-full h-full object-contain"}):(0,qr.jsx)(JU,{className:"w-10 h-10 text-gray-400"})}),(0,qr.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 text-center",children:["Logo upload \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f",(0,qr.jsx)("br",{}),(0,qr.jsx)("a",{href:"/app/settings",className:"text-indigo-600 underline",children:"Settings"})," \u092e\u0947\u0902 \u091c\u093e\u090f\u0902"]})]}),(0,qr.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"md:col-span-2",children:[(0,qr.jsx)(ql,{children:"School Name *"}),(0,qr.jsx)(Rl,{value:v.name,onChange:e=>b(t=>u(u({},t),{},{name:e.target.value})),placeholder:"ABC Public School"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Registration Number"}),(0,qr.jsx)(Rl,{value:v.registration_number,onChange:e=>b(t=>u(u({},t),{},{registration_number:e.target.value})),placeholder:"RBSE/2024/12345"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Established Year"}),(0,qr.jsx)(Rl,{type:"number",value:v.established_year,onChange:e=>b(t=>u(u({},t),{},{established_year:e.target.value})),placeholder:"2010"})]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"md:col-span-2",children:[(0,qr.jsxs)(ql,{children:[(0,qr.jsx)(c$,{className:"w-4 h-4 inline mr-1"}),"Address"]}),(0,qr.jsx)(Rl,{value:v.address,onChange:e=>b(t=>u(u({},t),{},{address:e.target.value})),placeholder:"123, Main Street, Near Bus Stand"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"City"}),(0,qr.jsx)(Rl,{value:v.city,onChange:e=>b(t=>u(u({},t),{},{city:e.target.value})),placeholder:"Jaipur"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"State"}),(0,qr.jsx)(Rl,{value:v.state,onChange:e=>b(t=>u(u({},t),{},{state:e.target.value})),placeholder:"Rajasthan"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Pincode"}),(0,qr.jsx)(Rl,{value:v.pincode,onChange:e=>b(t=>u(u({},t),{},{pincode:e.target.value})),placeholder:"302001"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[(0,qr.jsx)(Gm,{className:"w-4 h-4 inline mr-1"}),"Phone"]}),(0,qr.jsx)(Rl,{value:v.phone,onChange:e=>b(t=>u(u({},t),{},{phone:e.target.value})),placeholder:"0141-2345678"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[(0,qr.jsx)(Wm,{className:"w-4 h-4 inline mr-1"}),"Email"]}),(0,qr.jsx)(Rl,{type:"email",value:v.email,onChange:e=>b(t=>u(u({},t),{},{email:e.target.value})),placeholder:"info@school.com"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[(0,qr.jsx)(KY,{className:"w-4 h-4 inline mr-1"}),"Website"]}),(0,qr.jsx)(Rl,{value:v.website_url,onChange:e=>b(t=>u(u({},t),{},{website_url:e.target.value})),placeholder:"www.school.com"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Principal Name"}),(0,qr.jsx)(Rl,{value:v.principal_name,onChange:e=>b(t=>u(u({},t),{},{principal_name:e.target.value})),placeholder:"Dr. Ram Kumar"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Board Type"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2",value:v.board_type,onChange:e=>b(t=>u(u({},t),{},{board_type:e.target.value})),children:[(0,qr.jsx)("option",{value:"RBSE",children:"RBSE (Rajasthan Board)"}),(0,qr.jsx)("option",{value:"CBSE",children:"CBSE"}),(0,qr.jsx)("option",{value:"ICSE",children:"ICSE"}),(0,qr.jsx)("option",{value:"MPBSE",children:"MPBSE (MP Board)"}),(0,qr.jsx)("option",{value:"State",children:"Other State Board"})]})]}),(0,qr.jsxs)("div",{className:"md:col-span-2",children:[(0,qr.jsx)(ql,{children:"School Motto (\u091f\u0948\u0917\u0932\u093e\u0907\u0928)"}),(0,qr.jsx)(Rl,{value:v.motto,onChange:e=>b(t=>u(u({},t),{},{motto:e.target.value})),placeholder:"\u0936\u093f\u0915\u094d\u0937\u093e \u0939\u0940 \u0938\u0930\u094d\u0935\u094b\u0924\u094d\u0924\u092e \u0927\u0928 \u0939\u0948"})]})]})]}),"payment"===l&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex gap-3",children:[(0,qr.jsx)(kY,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-amber-800",children:"Important!"}),(0,qr.jsx)("p",{className:"text-sm text-amber-700",children:"\u092f\u0947 details students \u0915\u094b payment \u0915\u0930\u0924\u0947 \u0935\u0915\u094d\u0924 \u0926\u093f\u0916\u0947\u0902\u0917\u0940\u0964 \u0938\u0939\u0940 details \u0921\u093e\u0932\u0947\u0902\u0964"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Gm,{className:"w-5 h-5 text-green-600"}),"UPI Payment Details"]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"GPay Number"}),(0,qr.jsx)(Rl,{value:N.gpay_number,onChange:e=>w(t=>u(u({},t),{},{gpay_number:e.target.value})),placeholder:"9876543210"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Paytm Number"}),(0,qr.jsx)(Rl,{value:N.paytm_number,onChange:e=>w(t=>u(u({},t),{},{paytm_number:e.target.value})),placeholder:"9876543210"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"PhonePe Number"}),(0,qr.jsx)(Rl,{value:N.phonepe_number,onChange:e=>w(t=>u(u({},t),{},{phonepe_number:e.target.value})),placeholder:"9876543210"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"UPI ID"}),(0,qr.jsx)(Rl,{value:N.upi_id,onChange:e=>w(t=>u(u({},t),{},{upi_id:e.target.value})),placeholder:"school@upi"})]}),(0,qr.jsxs)("div",{className:"md:col-span-2",children:[(0,qr.jsx)(ql,{children:"QR Code URL (Optional)"}),(0,qr.jsx)(Rl,{value:N.qr_code_url,onChange:e=>w(t=>u(u({},t),{},{qr_code_url:e.target.value})),placeholder:"Upload QR code somewhere and paste URL"})]})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[(0,qr.jsx)(sX,{className:"w-5 h-5 text-blue-600"}),"Bank Account Details"]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Bank Name"}),(0,qr.jsx)(Rl,{value:N.bank_name,onChange:e=>w(t=>u(u({},t),{},{bank_name:e.target.value})),placeholder:"State Bank of India"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Account Holder Name"}),(0,qr.jsx)(Rl,{value:N.account_holder_name,onChange:e=>w(t=>u(u({},t),{},{account_holder_name:e.target.value})),placeholder:"School Trust Name"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Account Number"}),(0,qr.jsx)(Rl,{value:N.account_number,onChange:e=>w(t=>u(u({},t),{},{account_number:e.target.value})),placeholder:"1234567890123"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"IFSC Code"}),(0,qr.jsx)(Rl,{value:N.ifsc_code,onChange:e=>w(t=>u(u({},t),{},{ifsc_code:e.target.value})),placeholder:"SBIN0001234"})]})]})]})]}),"academic"===l&&(0,qr.jsx)("div",{className:"space-y-6",children:(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[(0,qr.jsx)(Ah,{className:"w-4 h-4 inline mr-1"}),"School Start Time"]}),(0,qr.jsx)(Rl,{type:"time",value:S.school_start_time,onChange:e=>_(t=>u(u({},t),{},{school_start_time:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{children:[(0,qr.jsx)(Ah,{className:"w-4 h-4 inline mr-1"}),"School End Time"]}),(0,qr.jsx)(Rl,{type:"time",value:S.school_end_time,onChange:e=>_(t=>u(u({},t),{},{school_end_time:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Late Grace Period (minutes)"}),(0,qr.jsx)(Rl,{type:"number",value:S.late_grace_period,onChange:e=>_(t=>u(u({},t),{},{late_grace_period:parseInt(e.target.value)||15}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Current Session"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2",value:S.current_session,onChange:e=>_(t=>u(u({},t),{},{current_session:e.target.value})),children:[(0,qr.jsx)("option",{value:"2024-25",children:"2024-25"}),(0,qr.jsx)("option",{value:"2025-26",children:"2025-26"}),(0,qr.jsx)("option",{value:"2026-27",children:"2026-27"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Board"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2",value:S.board,onChange:e=>_(t=>u(u({},t),{},{board:e.target.value})),children:[(0,qr.jsx)("option",{value:"RBSE",children:"RBSE"}),(0,qr.jsx)("option",{value:"CBSE",children:"CBSE"}),(0,qr.jsx)("option",{value:"MPBSE",children:"MPBSE"}),(0,qr.jsx)("option",{value:"ICSE",children:"ICSE"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"State"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2",value:S.state,onChange:e=>_(t=>u(u({},t),{},{state:e.target.value})),children:[(0,qr.jsx)("option",{value:"Rajasthan",children:"Rajasthan"}),(0,qr.jsx)("option",{value:"Madhya Pradesh",children:"Madhya Pradesh"}),(0,qr.jsx)("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"}),(0,qr.jsx)("option",{value:"Gujarat",children:"Gujarat"}),(0,qr.jsx)("option",{value:"Maharashtra",children:"Maharashtra"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Attendance Mode"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2",value:S.attendance_mode,onChange:e=>_(t=>u(u({},t),{},{attendance_mode:e.target.value})),children:[(0,qr.jsx)("option",{value:"auto",children:"Auto (CCTV/Biometric)"}),(0,qr.jsx)("option",{value:"manual",children:"Manual"}),(0,qr.jsx)("option",{value:"both",children:"Both"})]})]})]})}),"receipt"===l&&(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Receipt Number Prefix"}),(0,qr.jsx)(Rl,{value:N.receipt_prefix,onChange:e=>w(t=>u(u({},t),{},{receipt_prefix:e.target.value})),placeholder:"RCP"}),(0,qr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Example: RCP-2026-000001"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Authorized Signatory Name"}),(0,qr.jsx)(Rl,{value:N.authorized_signatory_name,onChange:e=>w(t=>u(u({},t),{},{authorized_signatory_name:e.target.value})),placeholder:"Principal Name"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Signatory Designation"}),(0,qr.jsx)(Rl,{value:N.authorized_signatory_designation,onChange:e=>w(t=>u(u({},t),{},{authorized_signatory_designation:e.target.value})),placeholder:"Principal / Director"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Receipt Footer Note"}),(0,qr.jsx)(Rl,{value:N.receipt_footer_note,onChange:e=>w(t=>u(u({},t),{},{receipt_footer_note:e.target.value})),placeholder:"Thank you for your payment"})]})]}),(0,qr.jsxs)("div",{className:"border-t pt-6",children:[(0,qr.jsxs)("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[(0,qr.jsx)(YY,{className:"w-5 h-5 text-indigo-600"}),"Signature & Seal"]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,qr.jsx)(ql,{className:"mb-3 block font-medium",children:"Signature (\u0939\u0938\u094d\u0924\u093e\u0915\u094d\u0937\u0930)"}),(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-32 h-20 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-white overflow-hidden",children:v.signature_url?(0,qr.jsx)("img",{src:v.signature_url,alt:"Signature",className:"max-w-full max-h-full object-contain"}):(0,qr.jsx)(YY,{className:"w-8 h-8 text-gray-400"})}),(0,qr.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,qr.jsxs)("label",{className:"block",children:[(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)try{const e=localStorage.getItem("token"),a=new FormData;a.append("file",t);const s=await Hr.post("".concat(HZ,"/api/school/upload-signature"),a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});s.data.url&&(b(e=>u(u({},e),{},{signature_url:s.data.url})),Qt.success("Signature uploaded!"))}catch(a){const e=new FileReader;e.onloadend=()=>{b(t=>u(u({},t),{},{signature_url:e.result})),Qt.success("Signature uploaded!")},e.readAsDataURL(t)}},className:"hidden"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:(0,qr.jsxs)("span",{children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-1"})," Upload Signature"]})})]}),(0,qr.jsxs)("label",{className:"block",children:[(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t){x(!0);try{const e=localStorage.getItem("token"),a=new FormData;a.append("file",t),a.append("image_type","signature"),Qt.info("AI Background Remove \u0915\u0930 \u0930\u0939\u093e \u0939\u0948... \ud83e\ude84");const s=await Hr.post("".concat(HZ,"/api/school/ai-remove-background"),a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"},timeout:6e4});s.data.success&&s.data.url?(b(e=>u(u({},e),{},{signature_url:s.data.url})),Qt.success("AI \u0928\u0947 Signature \u0915\u093e background \u0939\u091f\u093e \u0926\u093f\u092f\u093e! \u2728")):Qt.error(s.data.message||"Background remove \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u092f\u093e")}catch(a){console.error("AI Signature BG Remove error:",a),Qt.error("AI Background Remove \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{x(!1)}}},className:"hidden"}),(0,qr.jsx)(Dl,{variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-pink-500 to-purple-600",disabled:p,asChild:!0,children:(0,qr.jsx)("span",{children:p?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-1 animate-spin"})," Processing..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-1"})," AI BG Remove"]})})})]}),(0,qr.jsx)("p",{className:"text-xs text-gray-500",children:"\u0915\u093e\u0917\u091c \u092a\u0930 signature \u0915\u0940 photo upload \u0915\u0930\u094b, AI background \u0939\u091f\u093e \u0926\u0947\u0917\u093e"})]})]})]}),(0,qr.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,qr.jsx)(ql,{className:"mb-3 block font-medium",children:"School Seal (\u092e\u094b\u0939\u0930)"}),(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("div",{className:"w-20 h-20 border-2 border-dashed border-gray-300 rounded-full flex items-center justify-center bg-white overflow-hidden",children:v.seal_url?(0,qr.jsx)("img",{src:v.seal_url,alt:"Seal",className:"max-w-full max-h-full object-contain"}):(0,qr.jsx)(JY,{className:"w-8 h-8 text-gray-400"})}),(0,qr.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,qr.jsxs)("label",{className:"block",children:[(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)try{const e=localStorage.getItem("token"),a=new FormData;a.append("file",t);const s=await Hr.post("".concat(HZ,"/api/school/upload-seal"),a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});s.data.url&&(b(e=>u(u({},e),{},{seal_url:s.data.url})),Qt.success("Seal uploaded!"))}catch(a){const e=new FileReader;e.onloadend=()=>{b(t=>u(u({},t),{},{seal_url:e.result})),Qt.success("Seal uploaded!")},e.readAsDataURL(t)}},className:"hidden"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:(0,qr.jsxs)("span",{children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-1"})," Upload Seal"]})})]}),(0,qr.jsxs)("label",{className:"block",children:[(0,qr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t){g(!0);try{const e=localStorage.getItem("token"),a=new FormData;a.append("file",t),a.append("image_type","seal"),Qt.info("AI Background Remove \u0915\u0930 \u0930\u0939\u093e \u0939\u0948... \ud83e\ude84");const s=await Hr.post("".concat(HZ,"/api/school/ai-remove-background"),a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"},timeout:6e4});s.data.success&&s.data.url?(b(e=>u(u({},e),{},{seal_url:s.data.url})),Qt.success("AI \u0928\u0947 Seal \u0915\u093e background \u0939\u091f\u093e \u0926\u093f\u092f\u093e! \u2728")):Qt.error(s.data.message||"Background remove \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u092f\u093e")}catch(a){console.error("AI Seal BG Remove error:",a),Qt.error("AI Background Remove \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{g(!1)}}},className:"hidden"}),(0,qr.jsx)(Dl,{variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-pink-500 to-purple-600",disabled:f,asChild:!0,children:(0,qr.jsx)("span",{children:f?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-1 animate-spin"})," Processing..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-1"})," AI BG Remove"]})})})]}),(0,qr.jsx)(Dl,{variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600",onClick:async()=>{if(v.name){d(!0);try{const e=localStorage.getItem("token"),t=await Hr.post("".concat(HZ,"/api/school/generate-ai-seal"),{school_name:v.name,school_motto:v.motto||"",seal_shape:y.seal_shape,color_scheme:y.color_scheme},{headers:{Authorization:"Bearer ".concat(e)}});t.data.success&&t.data.seal_url?(b(e=>u(u({},e),{},{seal_url:t.data.seal_url})),Qt.success("AI Seal generated! \ud83c\udf89")):Qt.error(t.data.message||"Seal generate \u0928\u0939\u0940\u0902 \u0939\u094b \u092a\u093e\u092f\u093e")}catch(e){Qt.error("AI Seal generation \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{d(!1)}}else Qt.error("\u092a\u0939\u0932\u0947 School \u0915\u093e \u0928\u093e\u092e \u0921\u093e\u0932\u0947\u0902")},disabled:c,children:c?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-1 animate-spin"})," Generating..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(hh,{className:"w-4 h-4 mr-1"})," AI \u0938\u0947 \u0928\u0908 Seal \u092c\u0928\u093e\u090f\u0902"]})})]})]}),(0,qr.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,qr.jsx)("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"AI Seal Options:"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,qr.jsxs)("select",{className:"text-xs border rounded px-2 py-1",value:y.seal_shape,onChange:e=>j(t=>u(u({},t),{},{seal_shape:e.target.value})),children:[(0,qr.jsx)("option",{value:"circular",children:"Circular (\u0917\u094b\u0932)"}),(0,qr.jsx)("option",{value:"rectangular",children:"Rectangular (\u0906\u092f\u0924)"}),(0,qr.jsx)("option",{value:"shield",children:"Shield (\u0922\u093e\u0932)"})]}),(0,qr.jsxs)("select",{className:"text-xs border rounded px-2 py-1",value:y.color_scheme,onChange:e=>j(t=>u(u({},t),{},{color_scheme:e.target.value})),children:[(0,qr.jsx)("option",{value:"blue",children:"Blue (\u0928\u0940\u0932\u093e)"}),(0,qr.jsx)("option",{value:"red",children:"Red (\u0932\u093e\u0932)"}),(0,qr.jsx)("option",{value:"green",children:"Green (\u0939\u0930\u093e)"}),(0,qr.jsx)("option",{value:"gold",children:"Gold (\u0938\u0941\u0928\u0939\u0930\u093e)"})]})]})]})]})]})]}),(0,qr.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,qr.jsx)("h4",{className:"font-medium mb-3",children:"Receipt Preview:"}),(0,qr.jsxs)("div",{className:"bg-white p-4 rounded border text-sm max-w-md mx-auto",children:[(0,qr.jsxs)("div",{className:"text-center border-b pb-3 mb-3",children:[v.logo_url&&(0,qr.jsx)("img",{src:v.logo_url,alt:"",className:"h-12 mx-auto mb-2"}),(0,qr.jsx)("h3",{className:"font-bold",children:v.name||"School Name"}),(0,qr.jsx)("p",{className:"text-xs text-gray-500",children:v.address})]}),(0,qr.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,qr.jsxs)("span",{children:["Receipt No: ",N.receipt_prefix,"-2026-000001"]}),(0,qr.jsxs)("span",{children:["Date: ",(new Date).toLocaleDateString("en-IN")]})]}),(0,qr.jsx)("div",{className:"text-center py-4 border-y my-3",children:(0,qr.jsx)("span",{className:"text-2xl font-bold text-green-600",children:"\u20b9 5,000"})}),(0,qr.jsx)("div",{className:"text-center text-xs text-gray-500 mt-4",children:N.receipt_footer_note||"Thank you for your payment"}),(0,qr.jsxs)("div",{className:"flex justify-between items-end mt-6 pt-4 border-t",children:[(0,qr.jsx)("div",{className:"text-center",children:v.seal_url?(0,qr.jsx)("img",{src:v.seal_url,alt:"Seal",className:"w-16 h-16 object-contain opacity-80"}):(0,qr.jsx)("div",{className:"w-16 h-16 border border-dashed border-gray-300 rounded-full flex items-center justify-center text-xs text-gray-400",children:"Seal"})}),(0,qr.jsxs)("div",{className:"text-right",children:[v.signature_url?(0,qr.jsx)("img",{src:v.signature_url,alt:"Signature",className:"h-10 ml-auto mb-1"}):(0,qr.jsx)("div",{className:"text-xs border-b border-gray-400 w-24 mb-1",children:"_____________"}),(0,qr.jsx)("div",{className:"text-xs font-medium",children:N.authorized_signatory_name||"Authorized Signatory"}),(0,qr.jsx)("div",{className:"text-xs text-gray-500",children:N.authorized_signatory_designation})]})]})]})]}),(0,qr.jsxs)("div",{className:"border-t pt-6",children:[(0,qr.jsx)("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:"\ud83d\uddbc\ufe0f Logo Watermark Settings"}),(0,qr.jsx)(UZ,{settings:{watermark_enabled:v.watermark_enabled,watermark_opacity:v.watermark_opacity,watermark_size:v.watermark_size,watermark_position:v.watermark_position,watermark_apply:v.watermark_apply},onChange:e=>b(t=>u(u({},t),e))})]})]}),(0,qr.jsx)("div",{className:"flex justify-end mt-6 pt-6 border-t",children:(0,qr.jsxs)(Dl,{onClick:async()=>{"profile"===l?await(async()=>{i(!0);try{const e=localStorage.getItem("token");await Hr.put("".concat(HZ,"/api/schools/").concat(t),v,{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("School profile saved!")}catch(e){Qt.error("Profile save \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{i(!1)}})():"payment"===l?await(async()=>{i(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(HZ,"/api/school/payment-settings"),u({school_id:t},N),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Payment settings saved!")}catch(e){Qt.error("Payment settings save \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{i(!1)}})():"academic"===l&&await(async()=>{i(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(HZ,"/api/school/settings"),u({school_id:t},S),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Academic settings saved!")}catch(e){Qt.error("Academic settings save \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}finally{i(!1)}})()},disabled:r,className:"px-8",children:[r?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),"Save ","profile"===l?"Profile":"payment"===l?"Payment Settings":"receipt"===l?"Receipt Settings":"Academic Settings"]})})]})]})}function VZ(e){var t,a;let{employee:n,school:r,onClose:i}=e;const l=(0,s.useRef)(null);if(!n)return null;const o=n.employee_id||(null===(t=n.id)||void 0===t?void 0:t.slice(-8).toUpperCase())||"EMP-"+Date.now().toString().slice(-6),c=(new Date).getFullYear(),d="".concat(c,"-").concat((c+1).toString().slice(-2)),u={director:{bg:"linear-gradient(135deg, #7c2d12 0%, #b45309 100%)",label:"Director"},principal:{bg:"linear-gradient(135deg, #4c1d95 0%, #7c3aed 100%)",label:"Principal"},vice_principal:{bg:"linear-gradient(135deg, #5b21b6 0%, #8b5cf6 100%)",label:"Vice Principal"},teacher:{bg:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",label:"Teacher"},admin:{bg:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",label:"Admin"},accountant:{bg:"linear-gradient(135deg, #166534 0%, #22c55e 100%)",label:"Accounts"},clerk:{bg:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",label:"Office"},librarian:{bg:"linear-gradient(135deg, #7e22ce 0%, #a855f7 100%)",label:"Library"},driver:{bg:"linear-gradient(135deg, #c2410c 0%, #f97316 100%)",label:"Transport"},conductor:{bg:"linear-gradient(135deg, #c2410c 0%, #fb923c 100%)",label:"Transport"},peon:{bg:"linear-gradient(135deg, #475569 0%, #94a3b8 100%)",label:"Support"},helper:{bg:"linear-gradient(135deg, #525252 0%, #a3a3a3 100%)",label:"Helper"},sweeper:{bg:"linear-gradient(135deg, #44403c 0%, #78716c 100%)",label:"Housekeeping"},guard:{bg:"linear-gradient(135deg, #1e3a8a 0%, #1d4ed8 100%)",label:"Security"},cook:{bg:"linear-gradient(135deg, #9a3412 0%, #ea580c 100%)",label:"Kitchen"},gardener:{bg:"linear-gradient(135deg, #14532d 0%, #16a34a 100%)",label:"Garden"},electrician:{bg:"linear-gradient(135deg, #ca8a04 0%, #facc15 100%)",label:"Maintenance"},lab_assistant:{bg:"linear-gradient(135deg, #0891b2 0%, #22d3ee 100%)",label:"Lab"},sports_coach:{bg:"linear-gradient(135deg, #dc2626 0%, #f87171 100%)",label:"Sports"}}[n.role||(null===(a=n.designation)||void 0===a?void 0:a.toLowerCase())]||{bg:"linear-gradient(135deg, #059669 0%, #10b981 100%)",label:"Staff"};return(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full",children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,qr.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:["Employee ID Card Preview",(0,qr.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full text-white",style:{background:u.bg},children:u.label})]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:i,children:(0,qr.jsx)(Em,{className:"w-5 h-5"})})]}),(0,qr.jsx)("div",{ref:l,className:"flex justify-center mb-4",children:(0,qr.jsxs)("div",{className:"id-card",style:{width:"340px",height:"215px",background:u.bg,borderRadius:"12px",padding:"16px",position:"relative",overflow:"hidden",color:"white",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:[(null===r||void 0===r?void 0:r.logo_url)&&(0,qr.jsx)("div",{className:"watermark",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:.1,width:"180px",height:"180px",zIndex:0},children:(0,qr.jsx)("img",{src:r.logo_url,alt:"",style:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,qr.jsxs)("div",{className:"card-content",style:{position:"relative",zIndex:1,height:"100%"},children:[(0,qr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid rgba(255,255,255,0.3)",paddingBottom:"6px",marginBottom:"8px"},children:[(null===r||void 0===r?void 0:r.logo_url)&&(0,qr.jsx)("div",{style:{width:"32px",height:"32px",background:"white",borderRadius:"50%",padding:"2px",flexShrink:0},children:(0,qr.jsx)("img",{src:r.logo_url,alt:"",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"50%"}})}),(0,qr.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,qr.jsx)("div",{style:{fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.5px"},children:(null===r||void 0===r?void 0:r.name)||"School Name"}),(0,qr.jsx)("div",{style:{fontSize:"6px",opacity:.9,marginTop:"1px"},children:(null===r||void 0===r?void 0:r.address)||""})]})]}),(0,qr.jsxs)("div",{style:{fontSize:"8px",background:"rgba(255,255,255,0.25)",display:"inline-block",padding:"2px 10px",borderRadius:"10px",marginBottom:"6px",fontWeight:"bold"},children:[u.label.toUpperCase()," ID CARD"]}),(0,qr.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,qr.jsx)("div",{style:{width:"70px",flexShrink:0},children:(0,qr.jsx)("div",{style:{width:"70px",height:"85px",background:"white",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666",fontSize:"10px",overflow:"hidden"},children:n.photo_url?(0,qr.jsx)("img",{src:n.photo_url,alt:n.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):"Photo"})}),(0,qr.jsxs)("div",{style:{flex:1,fontSize:"8px"},children:[(0,qr.jsx)("div",{style:{fontSize:"13px",fontWeight:"bold",marginBottom:"4px",color:"#fef08a"},children:n.name||n.full_name}),(0,qr.jsxs)("div",{style:{marginBottom:"2px"},children:[(0,qr.jsx)("span",{style:{opacity:.8,width:"70px",display:"inline-block"},children:"Designation:"}),(0,qr.jsx)("span",{style:{fontWeight:"bold"},children:(e=>({teacher:"Teacher / \u0936\u093f\u0915\u094d\u0937\u0915",principal:"Principal / \u092a\u094d\u0930\u0927\u093e\u0928\u093e\u091a\u093e\u0930\u094d\u092f",vice_principal:"Vice Principal",director:"Director / \u0928\u093f\u0926\u0947\u0936\u0915",admin:"Admin Staff",accountant:"Accountant / \u0932\u0947\u0916\u093e\u0915\u093e\u0930",clerk:"Office Clerk",librarian:"Librarian / \u092a\u0941\u0938\u094d\u0924\u0915\u093e\u0932\u092f\u093e\u0927\u094d\u092f\u0915\u094d\u0937",peon:"Office Attendant / \u091a\u092a\u0930\u093e\u0938\u0940",helper:"Helper / \u0938\u0939\u093e\u092f\u0915",sweeper:"Cleaning Staff / \u0938\u092b\u093e\u0908 \u0915\u0930\u094d\u092e\u0940",driver:"Driver / \u091a\u093e\u0932\u0915",conductor:"Bus Conductor",guard:"Security Guard / \u0938\u0941\u0930\u0915\u094d\u0937\u093e \u0917\u093e\u0930\u094d\u0921",cook:"Cook / \u0930\u0938\u094b\u0907\u092f\u093e",gardener:"Gardener / \u092e\u093e\u0932\u0940",electrician:"Electrician",lab_assistant:"Lab Assistant",sports_coach:"Sports Coach / \u0916\u0947\u0932 \u092a\u094d\u0930\u0936\u093f\u0915\u094d\u0937\u0915",other:(null===n||void 0===n?void 0:n.designation)||"Staff"}[e]||(null===n||void 0===n?void 0:n.designation)||e||"Staff"))(n.role)})]}),n.department&&(0,qr.jsxs)("div",{style:{marginBottom:"2px"},children:[(0,qr.jsx)("span",{style:{opacity:.8,width:"70px",display:"inline-block"},children:"Department:"}),(0,qr.jsx)("span",{style:{fontWeight:"bold"},children:n.department})]}),(0,qr.jsxs)("div",{style:{marginBottom:"2px"},children:[(0,qr.jsx)("span",{style:{opacity:.8,width:"70px",display:"inline-block"},children:"Employee ID:"}),(0,qr.jsx)("span",{style:{fontWeight:"bold"},children:o})]}),(0,qr.jsxs)("div",{style:{marginBottom:"2px"},children:[(0,qr.jsx)("span",{style:{opacity:.8,width:"70px",display:"inline-block"},children:"Blood Group:"}),(0,qr.jsx)("span",{style:{fontWeight:"bold"},children:n.blood_group||"N/A"})]}),(0,qr.jsxs)("div",{style:{marginTop:"4px",background:"rgba(255,255,255,0.2)",padding:"4px 6px",borderRadius:"4px",fontSize:"8px"},children:[(0,qr.jsxs)("div",{style:{marginBottom:"2px"},children:[(0,qr.jsx)("span",{style:{opacity:.9},children:"\ud83d\udcde Self: "}),(0,qr.jsx)("span",{style:{fontWeight:"bold"},children:n.phone||n.mobile||"N/A"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{style:{opacity:.9},children:"\ud83c\udd98 Emergency: "}),(0,qr.jsx)("span",{style:{fontWeight:"bold"},children:n.emergency_contact||n.family_phone||n.alternate_phone||"N/A"})]})]})]})]}),(0,qr.jsxs)("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",display:"flex",justifyContent:"space-between",alignItems:"flex-end",fontSize:"6px",opacity:.8},children:[(0,qr.jsx)("div",{children:(null===r||void 0===r?void 0:r.phone)&&(0,qr.jsxs)("span",{children:["\ud83d\udcde ",r.phone]})}),(0,qr.jsxs)("div",{style:{textAlign:"right"},children:[(0,qr.jsxs)("div",{children:["Valid: ",d]}),(0,qr.jsx)("div",{style:{fontSize:"5px"},children:"Powered by Schooltino.in"})]})]})]})]})}),(0,qr.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,qr.jsxs)(Dl,{onClick:()=>{const e=l.current.innerHTML,t=window.open("","_blank");t.document.write("\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Employee ID - ".concat(null===n||void 0===n?void 0:n.name,"</title>\n        <style>\n          @page { \n            size: 85.6mm 54mm;\n            margin: 0; \n          }\n          body { \n            margin: 0; \n            padding: 0; \n            font-family: Arial, sans-serif;\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n          }\n          .id-card {\n            width: 85.6mm;\n            height: 54mm;\n            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #059669 100%);\n            border-radius: 8px;\n            padding: 8px;\n            box-sizing: border-box;\n            position: relative;\n            overflow: hidden;\n            color: white;\n          }\n          .watermark {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            opacity: 0.1;\n            width: 60mm;\n            height: 60mm;\n            z-index: 0;\n          }\n          .card-content {\n            position: relative;\n            z-index: 1;\n            height: 100%;\n          }\n          .school-header {\n            text-align: center;\n            border-bottom: 1px solid rgba(255,255,255,0.3);\n            padding-bottom: 4px;\n            margin-bottom: 6px;\n          }\n          .school-name {\n            font-size: 10px;\n            font-weight: bold;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n          }\n        </style>\n      </head>\n      <body>\n        ").concat(e,"\n      </body>\n      </html>\n    ")),t.document.close(),t.print()},className:"bg-green-600 hover:bg-green-700",children:[(0,qr.jsx)(YU,{className:"w-4 h-4 mr-2"}),"Print ID Card"]}),(0,qr.jsx)(Dl,{variant:"outline",onClick:i,children:"Close"})]}),(0,qr.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"\ud83d\udca1 Print on PVC card (85.6mm \xd7 54mm) for best results"})]})})}const WZ="",GZ={full_access:{label:"\ud83d\udd13 Full Access (Director)",description:"Sabhi modules ka access",permissions:{dashboard:!0,students:!0,attendance:!0,fees:!0,staff:!0,reports:!0,settings:!0,user_management:!0,tino_brain:!0,ai_tools:!0,notices:!0,transport:!0,cash_collection:!0,admit_cards:!0,calendar:!0}},principal:{label:"\ud83d\udc68\u200d\ud83d\udcbc Principal",description:"User management chhodke sab",permissions:{dashboard:!0,students:!0,attendance:!0,fees:!0,staff:!0,reports:!0,settings:!1,user_management:!1,tino_brain:!0,ai_tools:!0,notices:!0,transport:!0,cash_collection:!1,admit_cards:!0,calendar:!0}},teacher:{label:"\ud83d\udc68\u200d\ud83c\udfeb Teacher",description:"Students aur attendance manage",permissions:{dashboard:!0,students:!0,attendance:!0,reports:!1,settings:!1,fees:!1,staff:!1,user_management:!1,tino_brain:!0,ai_tools:!0,notices:!0,transport:!1,cash_collection:!1,admit_cards:!0,calendar:!0}},accountant:{label:"\ud83d\udcb0 Accountant",description:"Fees aur cash collection",permissions:{dashboard:!0,fees:!0,reports:!0,students:!0,attendance:!1,settings:!1,staff:!1,user_management:!1,tino_brain:!1,ai_tools:!1,notices:!0,transport:!1,cash_collection:!0,admit_cards:!0,calendar:!1}},front_office:{label:"\ud83c\udfe2 Front Office",description:"Basic student info aur notices",permissions:{dashboard:!0,students:!0,attendance:!1,fees:!1,reports:!1,settings:!1,staff:!1,user_management:!1,tino_brain:!1,ai_tools:!1,notices:!0,transport:!1,cash_collection:!1,admit_cards:!1,calendar:!0}},transport_incharge:{label:"\ud83d\ude8c Transport Incharge",description:"Transport management",permissions:{dashboard:!0,transport:!0,students:!0,attendance:!1,fees:!1,reports:!1,settings:!1,staff:!1,tino_brain:!1,ai_tools:!1,notices:!0,cash_collection:!1}},view_only:{label:"\ud83d\udc41\ufe0f View Only",description:"Sirf dekhne ka access",permissions:{dashboard:!0}}},KZ={dashboard:{label:"Dashboard",icon:"\ud83d\udcca"},students:{label:"Students",icon:"\ud83d\udc68\u200d\ud83c\udf93"},attendance:{label:"Attendance",icon:"\u2705"},fees:{label:"Fees Management",icon:"\ud83d\udcb0"},staff:{label:"Staff Management",icon:"\ud83d\udc65"},reports:{label:"Reports",icon:"\ud83d\udcc8"},settings:{label:"School Settings",icon:"\u2699\ufe0f"},user_management:{label:"User/Login Management",icon:"\ud83d\udd10"},tino_brain:{label:"Tino Brain AI",icon:"\ud83e\udde0"},ai_tools:{label:"AI Tools",icon:"\ud83e\udd16"},notices:{label:"Notices",icon:"\ud83d\udce2"},transport:{label:"Transport",icon:"\ud83d\ude8c"},cash_collection:{label:"Cash Collection",icon:"\ud83d\udcb5"},admit_cards:{label:"Admit Cards",icon:"\ud83c\udfab"},calendar:{label:"Calendar/Events",icon:"\ud83d\udcc5"}};function YZ(){const{user:e}=Kr(),t=null===e||void 0===e?void 0:e.school_id,[a,n]=(0,s.useState)(!0),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[E,A]=(0,s.useState)(null),[P,O]=(0,s.useState)(!1),[M,T]=(0,s.useState)(!1),[D,I]=(0,s.useState)(null),[R,L]=(0,s.useState)(""),[F,z]=(0,s.useState)(!1),[B,U]=(0,s.useState)("basic"),[H,q]=(0,s.useState)({name:"",mobile:"",email:"",designation:"teacher",department:"",joining_date:(new Date).toISOString().split("T")[0],gender:"male",dob:"",blood_group:"",marital_status:"",father_name:"",spouse_name:"",nationality:"Indian",address:"",permanent_address:"",city:"",state:"",pincode:"",aadhar_no:"",pan_number:"",uan_number:"",esi_number:"",voter_id:"",driving_license:"",qualification:"",specialization:"",experience_years:"",previous_employer:"",bank_name:"",bank_account_no:"",ifsc_code:"",bank_branch:"",salary:"",salary_type:"monthly",pf_applicable:!1,esi_applicable:!1,tds_applicable:!1,emergency_contact:"",emergency_contact_name:"",emergency_relation:"",create_login:!0,password:"",role:"teacher",custom_permissions:null}),[V,W]=(0,s.useState)(!1),[G,K]=(0,s.useState)("teacher");(0,s.useEffect)(()=>{t&&(J(),$(),Y())},[t]);const Y=async()=>{try{const e=localStorage.getItem("token"),a=await Hr.get("".concat(WZ,"/api/schools/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});A(a.data)}catch(e){console.error("Error fetching school:",e)}},J=async()=>{try{n(!0);const e=localStorage.getItem("token"),a=new URLSearchParams({school_id:t});m&&a.append("designation",m),p&&a.append("has_login",p),c&&a.append("search",c);const s=await Hr.get("".concat(WZ,"/api/employees?").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});i(s.data||[])}catch(e){console.error("Error fetching employees:",e);try{const e=localStorage.getItem("token"),a=await Hr.get("".concat(WZ,"/api/staff?school_id=").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});i(a.data||[])}catch(J1){Qt.error("Employees load \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}}finally{n(!1)}},$=async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat(WZ,"/api/employees/designations/list"),{headers:{Authorization:"Bearer ".concat(e)}});o(t.data||[])}catch(e){o([{id:"principal",name:"Principal (\u092a\u094d\u0930\u0927\u093e\u0928\u093e\u091a\u093e\u0930\u094d\u092f)",default_role:"principal"},{id:"teacher",name:"Teacher (\u0936\u093f\u0915\u094d\u0937\u0915)",default_role:"teacher"},{id:"accountant",name:"Accountant (\u0932\u0947\u0916\u093e\u0915\u093e\u0930)",default_role:"admin_staff"},{id:"clerk",name:"Clerk (\u0932\u093f\u092a\u093f\u0915)",default_role:"clerk"},{id:"peon",name:"Peon (\u091a\u092a\u0930\u093e\u0938\u0940)",default_role:"peon"}])}},Q=()=>{J()},X=()=>{q({name:"",mobile:"",email:"",address:"",designation:"teacher",department:"",qualification:"",joining_date:(new Date).toISOString().split("T")[0],salary:"",create_login:!0,password:"",role:"teacher",custom_permissions:null}),b(null),W(!1),K("teacher")},Z=async(e,t)=>{try{const a=localStorage.getItem("token");await Hr.post("".concat(WZ,"/api/employees/").concat(e.id,"/toggle-login"),{enable:t,password:e.mobile},{headers:{Authorization:"Bearer ".concat(a)}}),Qt.success(t?"Login enabled! Default password: Mobile number":"Login disabled"),J()}catch(a){Qt.error("Error toggling login")}};return a?(0,qr.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,qr.jsxs)("div",{className:"p-4 md:p-6 max-w-6xl mx-auto",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-7 h-7 text-blue-600"}),"Employee Management"]}),(0,qr.jsx)("p",{className:"text-gray-500 text-sm",children:"Staff + Users \u090f\u0915 \u091c\u0917\u0939 manage \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,qr.jsx)(oY,{type:"employee",schoolId:t,onImportComplete:J}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:async()=>{if(0!==r.length){O(!0),Qt.info("Generating ID cards...");try{const t=localStorage.getItem("token"),a=[];for(const i of r)try{var e;const s=await Hr.get("/api/id-card/generate/"+(i.role||"teacher")+"/"+i.id,{headers:{Authorization:"Bearer "+t}});null!==(e=s.data)&&void 0!==e&&e.id_card&&a.push({card:s.data.id_card,school:s.data.school})}catch(J1){console.error("Error fetching card for",i.name)}const s=window.open("","_blank");if(!s)return Qt.error("Popup blocked - please allow popups"),void O(!1);const n="<!DOCTYPE html><html><head><title>Bulk Employee ID Cards</title><style>@page{size:A4;margin:10mm}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;display:flex;flex-wrap:wrap;gap:10mm;padding:10mm;-webkit-print-color-adjust:exact;print-color-adjust:exact}.id-card{width:85.6mm;height:54mm;border-radius:4mm;overflow:hidden;position:relative;color:white;padding:3mm;page-break-inside:avoid}.watermark{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0.15;width:25mm;height:25mm}.watermark img{width:100%;height:100%;object-fit:contain}.content{position:relative;z-index:1;height:100%;display:flex;flex-direction:column}.header{display:flex;align-items:center;gap:2mm;padding-bottom:2mm;border-bottom:0.3mm solid rgba(255,255,255,0.3);margin-bottom:2mm}.header-logo{width:7mm;height:7mm;background:white;border-radius:50%;padding:0.5mm}.header-logo img{width:100%;height:100%;object-fit:contain;border-radius:50%}.header-text{flex:1;text-align:center}.school-name{font-size:8pt;font-weight:bold;text-transform:uppercase}.card-type{font-size:5pt;background:rgba(255,255,255,0.25);padding:0.5mm 2mm;border-radius:2mm;display:inline-block;margin-top:1mm}.body{display:flex;gap:2mm;flex:1}.photo{width:16mm;height:20mm;background:white;border-radius:2mm;display:flex;align-items:center;justify-content:center;color:#999;font-size:6pt}.details{flex:1;font-size:6pt}.name{font-size:9pt;font-weight:bold;color:#fef08a;margin-bottom:1mm}.detail-row{margin-bottom:0.5mm}.label{opacity:0.8;width:18mm;display:inline-block}.value{font-weight:600}.contact{background:rgba(255,255,255,0.2);padding:1mm;border-radius:1mm;margin-top:1mm;font-size:5.5pt}.footer{font-size:4pt;opacity:0.8;text-align:right;margin-top:auto}</style></head><body>"+a.map(e=>{const t=e.card,a=e.school,s=t.role_color||"#1e40af",n=t.is_higher_authority,r=n?"background:rgba(251,191,36,0.3);border:1px solid rgba(251,191,36,0.5);":"";return'<div class="id-card" style="'+("background:linear-gradient(135deg,"+s+" 0%,"+s+"cc 50%,"+s+" 100%);"+(n?"border:2px solid #fbbf24;":""))+'">'+(null!==a&&void 0!==a&&a.logo_url?'<div class="watermark"><img src="'+a.logo_url+'" alt=""/></div>':"")+'<div class="content"><div class="header">'+(null!==a&&void 0!==a&&a.logo_url?'<div class="header-logo"><img src="'+a.logo_url+'" alt=""/></div>':"")+'<div class="header-text"><div class="school-name">'+((null===a||void 0===a?void 0:a.name)||"School")+'</div><div class="card-type" style="'+r+'">'+t.card_type+'</div></div></div><div class="body"><div class="photo"><span>Photo</span></div><div class="details"><div class="name">'+t.name+'</div><div class="detail-row"><span class="label">Designation:</span><span class="value">'+t.designation+(t.designation_hindi?" / "+t.designation_hindi:"")+"</span></div>"+(t.department?'<div class="detail-row"><span class="label">Dept:</span><span class="value">'+t.department+"</span></div>":"")+(t.blood_group?'<div class="detail-row"><span class="label">Blood:</span><span class="value">'+t.blood_group+"</span></div>":"")+(t.phone?'<div class="contact">\ud83d\udcde '+t.phone+"</div>":"")+(t.emergency_contact?'<div class="contact" style="margin-top:1mm">\ud83c\udd98 '+t.emergency_contact+"</div>":"")+'</div></div><div class="footer">Valid: '+(t.valid_until||(new Date).getFullYear()+1)+"</div></div></div>"}).join("")+"<script>window.onload=function(){setTimeout(function(){window.print()},1000)}<\/script></body></html>";s.document.write(n),s.document.close(),Qt.success(a.length+" ID cards ready to print!")}catch(t){Qt.error("Error generating bulk ID cards")}finally{O(!1)}}else Qt.error("No employees to print")},disabled:P||0===r.length,className:"gap-2","data-testid":"bulk-print-employee-btn",children:[P?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):(0,qr.jsx)(YU,{className:"w-4 h-4"}),"Bulk Print ID Cards"]}),(0,qr.jsxs)(Dl,{onClick:()=>{X(),g(!0)},className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4"})," Add Employee"]})]})]}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border p-4 mb-6",children:(0,qr.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,qr.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,qr.jsx)(Rl,{placeholder:"Search by name, ID, email, mobile...",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&Q()})}),(0,qr.jsxs)("select",{className:"border rounded-lg px-3 py-2",value:m,onChange:e=>h(e.target.value),children:[(0,qr.jsx)("option",{value:"",children:"All Designations"}),l.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,qr.jsxs)("select",{className:"border rounded-lg px-3 py-2",value:p,onChange:e=>x(e.target.value),children:[(0,qr.jsx)("option",{value:"",children:"Login Status"}),(0,qr.jsx)("option",{value:"true",children:"Has Login"}),(0,qr.jsx)("option",{value:"false",children:"No Login"})]}),(0,qr.jsxs)(Dl,{onClick:Q,variant:"outline",children:[(0,qr.jsx)(ZU,{className:"w-4 h-4 mr-1"})," Search"]})]})}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,qr.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4",children:[(0,qr.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:r.length}),(0,qr.jsx)("div",{className:"text-sm text-blue-600",children:"Total Employees"})]}),(0,qr.jsxs)("div",{className:"bg-green-50 rounded-xl p-4",children:[(0,qr.jsx)("div",{className:"text-2xl font-bold text-green-700",children:r.filter(e=>e.has_login).length}),(0,qr.jsx)("div",{className:"text-sm text-green-600",children:"With Login"})]}),(0,qr.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4",children:[(0,qr.jsx)("div",{className:"text-2xl font-bold text-amber-700",children:r.filter(e=>{var t;return null===(t=e.designation)||void 0===t?void 0:t.toLowerCase().includes("teacher")}).length}),(0,qr.jsx)("div",{className:"text-sm text-amber-600",children:"Teachers"})]}),(0,qr.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4",children:[(0,qr.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:r.filter(e=>{var t;return!(null!==(t=e.designation)&&void 0!==t&&t.toLowerCase().includes("teacher"))}).length}),(0,qr.jsx)("div",{className:"text-sm text-purple-600",children:"Other Staff"})]})]}),(0,qr.jsx)("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)("table",{className:"w-full",children:[(0,qr.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Employee"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Designation"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Contact"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Login"}),(0,qr.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Actions"})]})}),(0,qr.jsxs)("tbody",{className:"divide-y",children:[r.map(t=>{var a,s;return(0,qr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-medium",children:null===(a=t.name)||void 0===a||null===(s=a.charAt(0))||void 0===s?void 0:s.toUpperCase()}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("div",{className:"font-medium",children:t.name}),(0,qr.jsx)("div",{className:"text-xs text-gray-500",children:t.employee_id})]})]})}),(0,qr.jsxs)("td",{className:"px-4 py-3",children:[(0,qr.jsx)("div",{className:"text-sm font-medium",children:t.designation}),t.department&&(0,qr.jsx)("div",{className:"text-xs text-gray-500",children:t.department})]}),(0,qr.jsxs)("td",{className:"px-4 py-3",children:[(0,qr.jsxs)("div",{className:"text-sm flex items-center gap-1",children:[(0,qr.jsx)(Gm,{className:"w-3 h-3 text-gray-400"})," ",t.mobile]}),(0,qr.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,qr.jsx)(Wm,{className:"w-3 h-3"})," ",t.email]})]}),(0,qr.jsxs)("td",{className:"px-4 py-3",children:[t.has_login?(0,qr.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:[(0,qr.jsx)(Z$,{className:"w-3 h-3"})," Active"]}):(0,qr.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:[(0,qr.jsx)(vY,{className:"w-3 h-3"})," No Login"]}),t.role&&(0,qr.jsx)("div",{className:"text-xs text-gray-500 mt-1 capitalize",children:t.role})]}),(0,qr.jsx)("td",{className:"px-4 py-3",children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>{return q({name:(e=t).name||"",mobile:e.mobile||"",email:e.email||"",address:e.address||"",designation:e.designation||"teacher",department:e.department||"",qualification:e.qualification||"",joining_date:e.joining_date||"",salary:e.salary||"",create_login:e.has_login||!1,password:"",role:e.role||"teacher",custom_permissions:e.permissions||null}),b(e),void g(!0);var e},children:(0,qr.jsx)(cZ,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",className:"text-blue-600",onClick:()=>{C(t),_(!0)},title:"Print ID Card",children:(0,qr.jsx)(nH,{className:"w-4 h-4"})}),t.has_login?(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>Z(t,!1),children:(0,qr.jsx)(Vm,{className:"w-4 h-4"})}):(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",className:"text-green-600",onClick:()=>Z(t,!0),children:(0,qr.jsx)(Vm,{className:"w-4 h-4"})}),("director"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role))&&"director"!==t.role&&(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>(I(t),L(""),void T(!0)),title:"Delete Permanently",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})]})})]},t.id)}),0===r.length&&(0,qr.jsx)("tr",{children:(0,qr.jsx)("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:'No employees found. Click "Add Employee" to add one.'})})]})]})})}),f&&(0,qr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 overflow-y-auto",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full p-6 my-8",children:[(0,qr.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,qr.jsx)(eH,{className:"w-6 h-6 text-blue-600"}),v?"\u270f\ufe0f Edit Employee":"\ud83d\udc64 Add New Employee"]}),(0,qr.jsx)("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg mb-4 overflow-x-auto",children:[{id:"basic",label:"\ud83d\udccb Basic"},{id:"personal",label:"\ud83d\udc64 Personal & Contact"},{id:"identity",label:"\ud83c\udd94 ID & Documents"},{id:"bank",label:"\ud83c\udfe6 Bank & Salary"},{id:"login",label:"\ud83d\udd10 Login Access"}].map(e=>(0,qr.jsx)("button",{type:"button",onClick:()=>U(e.id),className:"flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat(B===e.id?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:bg-white/50"),children:e.label},e.id))}),(0,qr.jsxs)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:["basic"===B&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udccb Basic Information (\u092e\u0942\u0932 \u091c\u093e\u0928\u0915\u093e\u0930\u0940)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Name * (\u0928\u093e\u092e)"}),(0,qr.jsx)(Rl,{value:H.name,onChange:e=>q(t=>u(u({},t),{},{name:e.target.value})),placeholder:"Full Name","data-testid":"employee-name-input"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Designation * (\u092a\u0926\u0928\u093e\u092e)"}),(0,qr.jsx)("select",{className:"w-full border rounded-lg px-3 py-2 h-10",value:H.designation,onChange:e=>(e=>{const t=l.find(t=>t.id===e);q(a=>u(u({},a),{},{designation:e,role:(null===t||void 0===t?void 0:t.default_role)||a.role||"teacher"}))})(e.target.value),"data-testid":"designation-select",children:l.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Department (\u0935\u093f\u092d\u093e\u0917)"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10",value:H.department,onChange:e=>q(t=>u(u({},t),{},{department:e.target.value})),children:[(0,qr.jsx)("option",{value:"",children:"Select Department"}),(0,qr.jsx)("option",{value:"Administration",children:"Administration (\u092a\u094d\u0930\u0936\u093e\u0938\u0928)"}),(0,qr.jsx)("option",{value:"Academic",children:"Academic (\u0936\u0948\u0915\u094d\u0937\u0923\u093f\u0915)"}),(0,qr.jsx)("option",{value:"Science",children:"Science (\u0935\u093f\u091c\u094d\u091e\u093e\u0928)"}),(0,qr.jsx)("option",{value:"Arts",children:"Arts (\u0915\u0932\u093e)"}),(0,qr.jsx)("option",{value:"Commerce",children:"Commerce (\u0935\u093e\u0923\u093f\u091c\u094d\u092f)"}),(0,qr.jsx)("option",{value:"Sports",children:"Sports (\u0916\u0947\u0932\u0915\u0942\u0926)"}),(0,qr.jsx)("option",{value:"IT",children:"IT (\u0906\u0908\u091f\u0940)"}),(0,qr.jsx)("option",{value:"Accounts",children:"Accounts (\u0932\u0947\u0916\u093e)"}),(0,qr.jsx)("option",{value:"Transport",children:"Transport (\u092a\u0930\u093f\u0935\u0939\u0928)"}),(0,qr.jsx)("option",{value:"Hostel",children:"Hostel (\u091b\u093e\u0924\u094d\u0930\u093e\u0935\u093e\u0938)"}),(0,qr.jsx)("option",{value:"Library",children:"Library (\u092a\u0941\u0938\u094d\u0924\u0915\u093e\u0932\u092f)"}),(0,qr.jsx)("option",{value:"Lab",children:"Lab (\u092a\u094d\u0930\u092f\u094b\u0917\u0936\u093e\u0932\u093e)"}),(0,qr.jsx)("option",{value:"Other",children:"Other (\u0905\u0928\u094d\u092f)"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Mobile * (\u092e\u094b\u092c\u093e\u0907\u0932)"}),(0,qr.jsx)(Rl,{value:H.mobile,onChange:e=>q(t=>u(u({},t),{},{mobile:e.target.value})),placeholder:"9876543210","data-testid":"employee-mobile-input"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Email * (\u0908\u092e\u0947\u0932)"}),(0,qr.jsx)(Rl,{type:"email",value:H.email,onChange:e=>q(t=>u(u({},t),{},{email:e.target.value})),placeholder:"email@school.com","data-testid":"employee-email-input"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Joining Date (\u0928\u093f\u092f\u0941\u0915\u094d\u0924\u093f \u0924\u093f\u0925\u093f)"}),(0,qr.jsx)(Rl,{type:"date",value:H.joining_date,onChange:e=>q(t=>u(u({},t),{},{joining_date:e.target.value}))})]})]})]}),"personal"===B&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-blue-800 mb-3",children:"\ud83d\udc64 Personal Details"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Gender"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10 text-sm",value:H.gender,onChange:e=>q(t=>u(u({},t),{},{gender:e.target.value})),children:[(0,qr.jsx)("option",{value:"male",children:"Male"}),(0,qr.jsx)("option",{value:"female",children:"Female"}),(0,qr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Date of Birth"}),(0,qr.jsx)(Rl,{type:"date",value:H.dob,onChange:e=>q(t=>u(u({},t),{},{dob:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Blood Group"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10 text-sm",value:H.blood_group||"",onChange:e=>q(t=>u(u({},t),{},{blood_group:e.target.value})),children:[(0,qr.jsx)("option",{value:"",children:"Select"}),["A+","A-","B+","B-","O+","O-","AB+","AB-"].map(e=>(0,qr.jsx)("option",{value:e,children:e},e))]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Marital Status"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10 text-sm",value:H.marital_status,onChange:e=>q(t=>u(u({},t),{},{marital_status:e.target.value})),children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Single",children:"Single"}),(0,qr.jsx)("option",{value:"Married",children:"Married"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Father Name"}),(0,qr.jsx)(Rl,{value:H.father_name,onChange:e=>q(t=>u(u({},t),{},{father_name:e.target.value})),placeholder:"Father's name"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Spouse Name"}),(0,qr.jsx)(Rl,{value:H.spouse_name,onChange:e=>q(t=>u(u({},t),{},{spouse_name:e.target.value})),placeholder:"If married"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Nationality"}),(0,qr.jsx)(Rl,{value:H.nationality,onChange:e=>q(t=>u(u({},t),{},{nationality:e.target.value})),placeholder:"Indian"})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-green-800 mb-3",children:"\ud83c\udfe0 Address (\u092a\u0924\u093e)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,qr.jsxs)("div",{className:"col-span-2 md:col-span-3",children:[(0,qr.jsx)(ql,{children:"Current Address"}),(0,qr.jsx)(Rl,{value:H.address,onChange:e=>q(t=>u(u({},t),{},{address:e.target.value})),placeholder:"Full current address"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"City"}),(0,qr.jsx)(Rl,{value:H.city,onChange:e=>q(t=>u(u({},t),{},{city:e.target.value}))})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"State"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10 text-sm",value:H.state,onChange:e=>q(t=>u(u({},t),{},{state:e.target.value})),children:[(0,qr.jsx)("option",{value:"",children:"Select State"}),(0,qr.jsx)("option",{value:"Madhya Pradesh",children:"Madhya Pradesh"}),(0,qr.jsx)("option",{value:"Rajasthan",children:"Rajasthan"}),(0,qr.jsx)("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"}),(0,qr.jsx)("option",{value:"Maharashtra",children:"Maharashtra"}),(0,qr.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Pincode"}),(0,qr.jsx)(Rl,{value:H.pincode,onChange:e=>q(t=>u(u({},t),{},{pincode:e.target.value})),placeholder:"6 digit"})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-red-800 mb-3",children:"\ud83c\udd98 Emergency Contact"}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Contact Name"}),(0,qr.jsx)(Rl,{value:H.emergency_contact_name,onChange:e=>q(t=>u(u({},t),{},{emergency_contact_name:e.target.value})),placeholder:"Family member"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Contact Number"}),(0,qr.jsx)(Rl,{value:H.emergency_contact||"",onChange:e=>q(t=>u(u({},t),{},{emergency_contact:e.target.value})),placeholder:"10 digit mobile"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Relation"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10 text-sm",value:H.emergency_relation,onChange:e=>q(t=>u(u({},t),{},{emergency_relation:e.target.value})),children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"Spouse",children:"Spouse"}),(0,qr.jsx)("option",{value:"Father",children:"Father"}),(0,qr.jsx)("option",{value:"Mother",children:"Mother"}),(0,qr.jsx)("option",{value:"Other",children:"Other"})]})]})]})]})]}),"identity"===B&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-slate-800 mb-3",children:"\ud83c\udd94 Identity Documents (\u092a\u0939\u091a\u093e\u0928 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Aadhar Number"}),(0,qr.jsx)(Rl,{value:H.aadhar_no,onChange:e=>q(t=>u(u({},t),{},{aadhar_no:e.target.value})),placeholder:"12 digit Aadhar"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"PAN Number"}),(0,qr.jsx)(Rl,{value:H.pan_number,onChange:e=>q(t=>u(u({},t),{},{pan_number:e.target.value.toUpperCase()})),placeholder:"ABCDE1234F"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Voter ID"}),(0,qr.jsx)(Rl,{value:H.voter_id,onChange:e=>q(t=>u(u({},t),{},{voter_id:e.target.value})),placeholder:"Voter ID"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"UAN (EPF)"}),(0,qr.jsx)(Rl,{value:H.uan_number,onChange:e=>q(t=>u(u({},t),{},{uan_number:e.target.value})),placeholder:"UAN Number"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"ESI Number"}),(0,qr.jsx)(Rl,{value:H.esi_number,onChange:e=>q(t=>u(u({},t),{},{esi_number:e.target.value})),placeholder:"ESI number"})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-purple-800 mb-3",children:"\ud83c\udf93 Qualification & Experience"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Highest Qualification"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10 text-sm",value:H.qualification,onChange:e=>q(t=>u(u({},t),{},{qualification:e.target.value})),children:[(0,qr.jsx)("option",{value:"",children:"Select"}),(0,qr.jsx)("option",{value:"10th Pass",children:"10th Pass"}),(0,qr.jsx)("option",{value:"12th Pass",children:"12th Pass"}),(0,qr.jsx)("option",{value:"Graduate",children:"Graduate"}),(0,qr.jsx)("option",{value:"Post Graduate",children:"Post Graduate"}),(0,qr.jsx)("option",{value:"B.Ed",children:"B.Ed"}),(0,qr.jsx)("option",{value:"PhD",children:"PhD"}),(0,qr.jsx)("option",{value:"ITI",children:"ITI"})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Specialization"}),(0,qr.jsx)(Rl,{value:H.specialization,onChange:e=>q(t=>u(u({},t),{},{specialization:e.target.value})),placeholder:"e.g., Maths, Physics"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Experience (Years)"}),(0,qr.jsx)(Rl,{type:"number",value:H.experience_years,onChange:e=>q(t=>u(u({},t),{},{experience_years:e.target.value})),placeholder:"Years"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Previous Employer"}),(0,qr.jsx)(Rl,{value:H.previous_employer,onChange:e=>q(t=>u(u({},t),{},{previous_employer:e.target.value})),placeholder:"Previous school"})]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,qr.jsx)("h4",{className:"font-medium text-amber-800 mb-3",children:"\ud83d\udcc4 Documents Upload"}),v?(0,qr.jsx)(mY,{personId:v.id,personType:"employee",schoolId:t,existingDocuments:[]}):(0,qr.jsx)("div",{className:"text-center py-4",children:(0,qr.jsx)("p",{className:"text-sm text-amber-600",children:"\ud83d\udca1 Employee add \u0939\u094b\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 Edit \u0915\u0930\u0915\u0947 documents upload \u0915\u0930\u0947\u0902"})}),(0,qr.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:["Aadhar","PAN","Photo","10th","12th","Degree","B.Ed","Experience Letter","Bank Proof"].map((e,t)=>(0,qr.jsx)("span",{className:"px-2 py-1 bg-white rounded text-xs text-slate-600 border",children:e},t))})]})]}),"bank"===B&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83c\udfe6 Bank & Salary Details (\u092c\u0948\u0902\u0915 \u0914\u0930 \u0935\u0947\u0924\u0928)"}),(0,qr.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,qr.jsx)("h5",{className:"font-medium text-green-800 mb-3",children:"\ud83d\udcb0 Salary Details (\u0935\u0947\u0924\u0928 \u0935\u093f\u0935\u0930\u0923)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Monthly Salary (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:H.salary,onChange:e=>q(t=>u(u({},t),{},{salary:e.target.value})),placeholder:"25000"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Salary Type"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10",value:H.salary_type,onChange:e=>q(t=>u(u({},t),{},{salary_type:e.target.value})),children:[(0,qr.jsx)("option",{value:"monthly",children:"Monthly (\u092e\u093e\u0938\u093f\u0915)"}),(0,qr.jsx)("option",{value:"daily",children:"Daily (\u0926\u0948\u0928\u093f\u0915)"})]})]})]}),(0,qr.jsxs)("div",{className:"flex flex-wrap gap-4 mt-3",children:[(0,qr.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)("input",{type:"checkbox",checked:H.pf_applicable,onChange:e=>q(t=>u(u({},t),{},{pf_applicable:e.target.checked})),className:"w-4 h-4"}),"PF Applicable (PF \u0932\u093e\u0917\u0942)"]}),(0,qr.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)("input",{type:"checkbox",checked:H.esi_applicable,onChange:e=>q(t=>u(u({},t),{},{esi_applicable:e.target.checked})),className:"w-4 h-4"}),"ESI Applicable (ESI \u0932\u093e\u0917\u0942)"]}),(0,qr.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,qr.jsx)("input",{type:"checkbox",checked:H.tds_applicable,onChange:e=>q(t=>u(u({},t),{},{tds_applicable:e.target.checked})),className:"w-4 h-4"}),"TDS Applicable (TDS \u0932\u093e\u0917\u0942)"]})]})]}),(0,qr.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,qr.jsx)("h5",{className:"font-medium text-blue-800 mb-3",children:"\ud83c\udfe6 Bank Details (\u092c\u0948\u0902\u0915 \u0935\u093f\u0935\u0930\u0923)"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Bank Name"}),(0,qr.jsx)(Rl,{value:H.bank_name,onChange:e=>q(t=>u(u({},t),{},{bank_name:e.target.value})),placeholder:"State Bank of India"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Account Number"}),(0,qr.jsx)(Rl,{value:H.bank_account_no,onChange:e=>q(t=>u(u({},t),{},{bank_account_no:e.target.value})),placeholder:"Account number"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"IFSC Code"}),(0,qr.jsx)(Rl,{value:H.ifsc_code,onChange:e=>q(t=>u(u({},t),{},{ifsc_code:e.target.value.toUpperCase()})),placeholder:"SBIN0001234"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Branch Name"}),(0,qr.jsx)(Rl,{value:H.bank_branch,onChange:e=>q(t=>u(u({},t),{},{bank_branch:e.target.value})),placeholder:"Branch name"})]})]})]})]}),"login"===B&&(0,qr.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,qr.jsx)("h4",{className:"font-semibold text-slate-800 border-b pb-2",children:"\ud83d\udd10 Login Access (\u0932\u0949\u0917\u093f\u0928 \u090f\u0915\u094d\u0938\u0947\u0938)"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"System Role * (\u0938\u093f\u0938\u094d\u091f\u092e \u092d\u0942\u092e\u093f\u0915\u093e)"}),(0,qr.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 h-10 bg-white",value:H.role,onChange:e=>q(t=>u(u({},t),{},{role:e.target.value})),children:[(0,qr.jsx)("option",{value:"director",children:"Director (\u0928\u093f\u0926\u0947\u0936\u0915)"}),(0,qr.jsx)("option",{value:"principal",children:"Principal (\u092a\u094d\u0930\u0927\u093e\u0928\u093e\u091a\u093e\u0930\u094d\u092f)"}),(0,qr.jsx)("option",{value:"vice_principal",children:"Vice Principal (\u0909\u092a-\u092a\u094d\u0930\u0927\u093e\u0928\u093e\u091a\u093e\u0930\u094d\u092f)"}),(0,qr.jsx)("option",{value:"teacher",children:"Teacher (\u0936\u093f\u0915\u094d\u0937\u0915)"}),(0,qr.jsx)("option",{value:"admin_staff",children:"Admin Staff"}),(0,qr.jsx)("option",{value:"accountant",children:"Accountant (\u0932\u0947\u0916\u093e\u0915\u093e\u0930)"}),(0,qr.jsx)("option",{value:"clerk",children:"Clerk (\u0932\u093f\u092a\u093f\u0915)"}),(0,qr.jsx)("option",{value:"librarian",children:"Librarian (\u092a\u0941\u0938\u094d\u0924\u0915\u093e\u0932\u092f\u093e\u0927\u094d\u092f\u0915\u094d\u0937)"}),(0,qr.jsx)("option",{value:"peon",children:"Peon (\u091a\u092a\u0930\u093e\u0938\u0940)"}),(0,qr.jsx)("option",{value:"driver",children:"Driver (\u091a\u093e\u0932\u0915)"}),(0,qr.jsx)("option",{value:"guard",children:"Guard (\u0938\u0941\u0930\u0915\u094d\u0937\u093e)"})]}),(0,qr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Role determines ID card color and permissions"})]}),(0,qr.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[(0,qr.jsx)("input",{type:"checkbox",checked:H.create_login,onChange:e=>q(t=>u(u({},t),{},{create_login:e.target.checked})),className:"w-5 h-5 rounded"}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("div",{className:"font-medium",children:"Create Login Account"}),(0,qr.jsx)("div",{className:"text-sm text-gray-500",children:"Employee can login to system"})]})]}),H.create_login&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(ql,{children:"Password (Default: Mobile Number)"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{type:N?"text":"password",value:H.password,onChange:e=>q(t=>u(u({},t),{},{password:e.target.value})),placeholder:"Leave empty for mobile as password"}),(0,qr.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",children:N?(0,qr.jsx)(Uc,{className:"w-4 h-4"}):(0,qr.jsx)(Hc,{className:"w-4 h-4"})})]})]}),(0,qr.jsxs)(Dl,{variant:"outline",size:"sm",onClick:()=>W(!V),className:"gap-2",children:[(0,qr.jsx)(Rc,{className:"w-4 h-4"}),V?"Hide":"Show"," Permissions"]}),V&&(0,qr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud83c\udfaf Quick Permission Presets:"}),(0,qr.jsx)("div",{className:"flex gap-2 flex-wrap",children:Object.entries(GZ).map(e=>{let[t,a]=e;return(0,qr.jsx)("button",{type:"button",onClick:()=>{K(t),q(e=>u(u({},e),{},{custom_permissions:u({},a.permissions)}))},className:"px-3 py-2 rounded-lg text-xs border transition-all ".concat(G===t?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white hover:bg-indigo-50 hover:border-indigo-300"),children:(0,qr.jsx)("div",{className:"font-medium",children:a.label})},t)})})]}),(0,qr.jsxs)("div",{className:"border-t pt-4",children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udd10 Individual Permissions:"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(KZ).map(e=>{var t,a;let[s,n]=e;return(0,qr.jsxs)("label",{className:"flex items-center gap-2 p-2 rounded-lg cursor-pointer transition-all ".concat(null!==(t=H.custom_permissions)&&void 0!==t&&t[s]?"bg-green-50 border border-green-200":"bg-white border border-gray-200 hover:bg-gray-50"),children:[(0,qr.jsx)("input",{type:"checkbox",checked:(null===(a=H.custom_permissions)||void 0===a?void 0:a[s])||!1,onChange:e=>{K("custom"),q(t=>u(u({},t),{},{custom_permissions:u(u({},t.custom_permissions),{},{[s]:e.target.checked})}))},className:"w-4 h-4 rounded border-gray-300 text-indigo-600"}),(0,qr.jsxs)("span",{className:"text-sm",children:[n.icon," ",n.label]})]},s)})})]})]})]})]})]}),(0,qr.jsxs)("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:[(0,qr.jsx)(Dl,{variant:"outline",className:"flex-1",onClick:()=>g(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{className:"flex-1 bg-indigo-600 hover:bg-indigo-700",onClick:async()=>{if(H.name&&H.mobile&&H.email){j(!0);try{const e=localStorage.getItem("token"),a=u(u({},H),{},{school_id:t,salary:H.salary?parseFloat(H.salary):null,password:H.password||H.mobile});v?(await Hr.put("".concat(WZ,"/api/employees/").concat(v.id),a,{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Employee updated!")):(await Hr.post("".concat(WZ,"/api/employees"),a,{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Employee added!")),g(!1),X(),J()}catch(s){var e,a;Qt.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Error saving employee")}finally{j(!1)}}else Qt.error("Name, Mobile \u0914\u0930 Email \u091c\u0930\u0942\u0930\u0940 \u0939\u0948")},disabled:y,children:[y?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,v?"Update":"Add"," Employee"]})]})]})}),S&&k&&(0,qr.jsx)(VZ,{employee:k,school:E,onClose:()=>{_(!1),C(null)}}),M&&D&&(0,qr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,qr.jsxs)("h3",{className:"text-xl font-bold text-red-600 flex items-center gap-2 mb-4",children:[(0,qr.jsx)(iH,{className:"w-6 h-6"}),"\u26a0\ufe0f DANGER: Permanent Delete"]}),(0,qr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[(0,qr.jsx)("h4",{className:"font-bold text-red-800 mb-2",children:"\ud83d\udea8 \u092e\u0939\u0924\u094d\u0935\u092a\u0942\u0930\u094d\u0923 \u091a\u0947\u0924\u093e\u0935\u0928\u0940:"}),(0,qr.jsxs)("ul",{className:"text-sm text-red-700 space-y-1 list-disc list-inside",children:[(0,qr.jsx)("li",{children:"\u092f\u0939 action UNDO \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e"}),(0,qr.jsx)("li",{children:"Employee \u0915\u093e \u0938\u093e\u0930\u093e data \u0939\u092e\u0947\u0936\u093e \u0915\u0947 \u0932\u093f\u090f delete \u0939\u094b \u091c\u093e\u090f\u0917\u093e"}),(0,qr.jsx)("li",{children:"Salary records, Attendance, Leave records \u0938\u092c delete \u0939\u094b \u091c\u093e\u090f\u0902\u0917\u0947"}),(0,qr.jsx)("li",{children:"Login access \u092d\u0940 permanently remove \u0939\u094b \u091c\u093e\u090f\u0917\u093e"})]})]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[(0,qr.jsx)("p",{className:"font-medium text-lg",children:D.name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[D.designation," \u2022 ",D.department||"General"]}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:["\ud83d\udcde ",D.mobile]})]}),(0,qr.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,qr.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:["Confirm \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f ",(0,qr.jsx)("span",{className:"text-red-600 font-bold",children:"DELETE"})," type \u0915\u0930\u0947\u0902:"]}),(0,qr.jsx)(Rl,{value:R,onChange:e=>L(e.target.value.toUpperCase()),placeholder:"Type DELETE here",className:"border-red-200 focus:border-red-400"})]}),(0,qr.jsxs)("div",{className:"flex gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>T(!1),className:"flex-1",children:"Cancel (\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902)"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if("DELETE"===R){z(!0);try{const e=localStorage.getItem("token");await Hr.delete("".concat(WZ,"/api/users/").concat(D.id),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Employee data permanently deleted"),T(!1),I(null),L(""),J()}catch(a){var e,t;Qt.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to delete employee")}finally{z(!1)}}else Qt.error("Please type DELETE to confirm")},disabled:"DELETE"!==R||F,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[F?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(iH,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})})]})}function JZ(e,t){let[a,s]=t;return Math.min(s,Math.max(a,e))}const $Z=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"],QZ=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],XZ=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],ZZ=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],e0=["__scopeSlider"],t0=["__scopeSlider"],a0=["__scopeSlider","index","name"],s0=["__scopeSlider","value"];var n0=["PageUp","PageDown"],r0=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],i0={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},l0="Slider",[o0,c0,d0]=lo(l0),[u0,m0]=Kl(l0,[d0]),[h0,p0]=u0(l0),x0=s.forwardRef((e,t)=>{const{name:a,min:n=0,max:r=100,step:l=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:m=[n],value:h,onValueChange:p=()=>{},onValueCommit:x=()=>{},inverted:f=!1,form:g}=e,v=i(e,$Z),b=s.useRef(new Set),y=s.useRef(0),j="horizontal"===o?v0:b0,[N=[],w]=Co({prop:h,defaultProp:m,onChange:e=>{var t;null===(t=[...b.current][y.current])||void 0===t||t.focus(),p(e)}}),S=s.useRef(N);function _(e,t){let{commit:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1};const s=function(e){return(String(e).split(".")[1]||"").length}(l),i=function(e,t){const a=Math.pow(10,t);return Math.round(e*a)/a}(Math.round((e-n)/l)*l+n,s),o=JZ(i,[n,r]);w(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;const s=[...e];return s[a]=t,s.sort((e,t)=>e-t)}(e,o,t);if(function(e,t){if(t>0){const a=function(e){return e.slice(0,-1).map((t,a)=>e[a+1]-t)}(e);return Math.min(...a)>=t}return!0}(s,d*l)){y.current=s.indexOf(o);const t=String(s)!==String(e);return t&&a&&x(s),t?s:e}return e})}return(0,qr.jsx)(h0,{scope:e.__scopeSlider,name:a,disabled:c,min:n,max:r,valueIndexToChangeRef:y,thumbs:b.current,values:N,orientation:o,form:g,children:(0,qr.jsx)(o0.Provider,{scope:e.__scopeSlider,children:(0,qr.jsx)(o0.Slot,{scope:e.__scopeSlider,children:(0,qr.jsx)(j,u(u({"aria-disabled":c,"data-disabled":c?"":void 0},v),{},{ref:t,onPointerDown:Vl(v.onPointerDown,()=>{c||(S.current=N)}),min:n,max:r,inverted:f,onSlideStart:c?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const a=e.map(e=>Math.abs(e-t)),s=Math.min(...a);return a.indexOf(s)}(N,e);_(e,t)},onSlideMove:c?void 0:function(e){_(e,y.current)},onSlideEnd:c?void 0:function(){const e=S.current[y.current];N[y.current]!==e&&x(N)},onHomeKeyDown:()=>!c&&_(n,0,{commit:!0}),onEndKeyDown:()=>!c&&_(r,N.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:a}=e;if(!c){const e=n0.includes(t.key)||t.shiftKey&&r0.includes(t.key)?10:1,s=y.current;_(N[s]+l*e*a,s,{commit:!0})}}}))})})})});x0.displayName=l0;var[f0,g0]=u0(l0,{startEdge:"left",endEdge:"right",size:"width",direction:1}),v0=s.forwardRef((e,t)=>{const{min:a,max:n,dir:r,inverted:l,onSlideStart:o,onSlideMove:c,onSlideEnd:d,onStepKeyDown:m}=e,h=i(e,QZ),[p,x]=s.useState(null),f=Zr(t,e=>x(e)),g=s.useRef(void 0),v=Ao(r),b="ltr"===v,y=b&&!l||!b&&l;function j(e){const t=g.current||p.getBoundingClientRect(),s=P0([0,t.width],y?[a,n]:[n,a]);return g.current=t,s(e-t.left)}return(0,qr.jsx)(f0,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:(0,qr.jsx)(y0,u(u({dir:v,"data-orientation":"horizontal"},h),{},{ref:f,style:u(u({},h.style),{},{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:e=>{const t=j(e.clientX);null===o||void 0===o||o(t)},onSlideMove:e=>{const t=j(e.clientX);null===c||void 0===c||c(t)},onSlideEnd:()=>{g.current=void 0,null===d||void 0===d||d()},onStepKeyDown:e=>{const t=i0[y?"from-left":"from-right"].includes(e.key);null===m||void 0===m||m({event:e,direction:t?-1:1})}}))})}),b0=s.forwardRef((e,t)=>{const{min:a,max:n,inverted:r,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d}=e,m=i(e,XZ),h=s.useRef(null),p=Zr(t,h),x=s.useRef(void 0),f=!r;function g(e){const t=x.current||h.current.getBoundingClientRect(),s=P0([0,t.height],f?[n,a]:[a,n]);return x.current=t,s(e-t.top)}return(0,qr.jsx)(f0,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:(0,qr.jsx)(y0,u(u({"data-orientation":"vertical"},m),{},{ref:p,style:u(u({},m.style),{},{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:e=>{const t=g(e.clientY);null===l||void 0===l||l(t)},onSlideMove:e=>{const t=g(e.clientY);null===o||void 0===o||o(t)},onSlideEnd:()=>{x.current=void 0,null===c||void 0===c||c()},onStepKeyDown:e=>{const t=i0[f?"from-bottom":"from-top"].includes(e.key);null===d||void 0===d||d({event:e,direction:t?-1:1})}}))})}),y0=s.forwardRef((e,t)=>{const{__scopeSlider:a,onSlideStart:s,onSlideMove:n,onSlideEnd:r,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c}=e,d=i(e,ZZ),m=p0(l0,a);return(0,qr.jsx)(wo.span,u(u({},d),{},{ref:t,onKeyDown:Vl(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):n0.concat(r0).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:Vl(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),m.thumbs.has(t)?t.focus():s(e)}),onPointerMove:Vl(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&n(e)}),onPointerUp:Vl(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(e))})}))}),j0="SliderTrack",N0=s.forwardRef((e,t)=>{const{__scopeSlider:a}=e,s=i(e,e0),n=p0(j0,a);return(0,qr.jsx)(wo.span,u(u({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},s),{},{ref:t}))});N0.displayName=j0;var w0="SliderRange",S0=s.forwardRef((e,t)=>{const{__scopeSlider:a}=e,n=i(e,t0),r=p0(w0,a),l=g0(w0,a),o=Zr(t,s.useRef(null)),c=r.values.length,d=r.values.map(e=>A0(e,r.min,r.max)),m=c>1?Math.min(...d):0,h=100-Math.max(...d);return(0,qr.jsx)(wo.span,u(u({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},n),{},{ref:o,style:u(u({},e.style),{},{[l.startEdge]:m+"%",[l.endEdge]:h+"%"})}))});S0.displayName=w0;var _0="SliderThumb",k0=s.forwardRef((e,t)=>{const a=c0(e.__scopeSlider),[n,r]=s.useState(null),i=Zr(t,e=>r(e)),l=s.useMemo(()=>n?a().findIndex(e=>e.ref.current===n):-1,[a,n]);return(0,qr.jsx)(C0,u(u({},e),{},{ref:i,index:l}))}),C0=s.forwardRef((e,t)=>{const{__scopeSlider:a,index:n,name:r}=e,l=i(e,a0),o=p0(_0,a),c=g0(_0,a),[d,m]=s.useState(null),h=Zr(t,e=>m(e)),p=!d||(o.form||!!d.closest("form")),x=nV(d),f=o.values[n],g=void 0===f?0:A0(f,o.min,o.max),v=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(n,o.values.length),b=null===x||void 0===x?void 0:x[c.size],y=b?function(e,t,a){const s=e/2,n=P0([0,50],[0,s]);return(s-n(t)*a)*a}(b,g,c.direction):0;return s.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),(0,qr.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:"calc(".concat(g,"% + ").concat(y,"px)")},children:[(0,qr.jsx)(o0.ItemSlot,{scope:e.__scopeSlider,children:(0,qr.jsx)(wo.span,u(u({role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0},l),{},{ref:h,style:void 0===f?{display:"none"}:e.style,onFocus:Vl(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})}))}),p&&(0,qr.jsx)(E0,{name:null!==r&&void 0!==r?r:o.name?o.name+(o.values.length>1?"[]":""):void 0,form:o.form,value:f},n)]})});k0.displayName=_0;var E0=s.forwardRef((e,t)=>{let{__scopeSlider:a,value:n}=e,r=i(e,s0);const l=s.useRef(null),o=Zr(l,t),c=IJ(n);return s.useEffect(()=>{const e=l.current;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"value").set;if(c!==n&&a){const t=new Event("input",{bubbles:!0});a.call(e,n),e.dispatchEvent(t)}},[c,n]),(0,qr.jsx)(wo.input,u(u({style:{display:"none"}},r),{},{ref:o,defaultValue:n}))});function A0(e,t,a){return JZ(100/(a-t)*(e-t),[0,100])}function P0(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(a-e[0])}}E0.displayName="RadioBubbleInput";var O0=x0,M0=N0,T0=S0,D0=k0;const I0=["className"],R0=s.forwardRef((e,t)=>{let{className:a}=e,s=i(e,I0);return(0,qr.jsxs)(O0,u(u({ref:t,className:Ol("relative flex w-full touch-none select-none items-center",a)},s),{},{children:[(0,qr.jsx)(M0,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,qr.jsx)(T0,{className:"absolute h-full bg-primary"})}),(0,qr.jsx)(D0,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}))});R0.displayName=O0.displayName;const L0=Dc("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),F0=Dc("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);function z0(){const{user:e,schoolId:t}=Kr(),[a,n]=(0,s.useState)(!0),[r,i]=(0,s.useState)(!1),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),p=(0,s.useRef)(null),[x,f]=(0,s.useState)({size:50,opacity:15,position:"center",offsetX:0,offsetY:0,rotation:0,enabled:!0}),[g,v]=(0,s.useState)({idCards:!0,notices:!0,calendar:!0,appHeader:!0,certificates:!0,feeBills:!0,appIcon:!0}),[b,y]=(0,s.useState)({name:"",tagline:""});(0,s.useEffect)(()=>{j()},[t]);const j=async()=>{try{n(!0);const e=localStorage.getItem("token"),a=await fetch("".concat("","/api/schools/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){const e=await a.json();o(e.logo_url||null),y({name:e.name||"",tagline:e.motto||e.tagline||""}),e.watermark_settings&&f(t=>u(u({},t),e.watermark_settings)),e.logo_apply_to&&v(t=>u(u({},t),e.logo_apply_to))}}catch(e){console.error("Error fetching settings:",e)}finally{n(!1)}};return a?(0,qr.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,qr.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto","data-testid":"logo-watermark-settings",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Logo & Watermark Settings"}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"School logo \u0914\u0930 watermark \u0915\u0940 \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u092f\u0939\u093e\u0901 \u0938\u0947 \u0915\u0930\u0947\u0902"})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{i(!0);try{const e=localStorage.getItem("token");l&&await fetch("".concat("","/api/schools/").concat(t,"/update-logo"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({logo_url:l})}),await fetch("".concat("","/api/schools/").concat(t,"/watermark-settings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({watermark_settings:x,logo_apply_to:g})}),Qt.success("Settings saved successfully!")}catch(e){console.error("Save error:",e),Qt.error("Failed to save settings")}finally{i(!1)}},disabled:r,className:"bg-indigo-600 hover:bg-indigo-700","data-testid":"save-watermark-settings",children:[r?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),"Save All Settings"]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Ph,{className:"w-5 h-5 text-indigo-600"}),"School Logo"]}),(0,qr.jsx)("div",{className:"flex flex-col items-center mb-4",children:(0,qr.jsx)("div",{className:"w-40 h-40 border-2 border-dashed border-slate-300 rounded-xl flex items-center justify-center overflow-hidden bg-slate-50 relative",children:l?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("img",{src:l,alt:"School Logo",className:"w-full h-full object-contain p-2"}),(0,qr.jsx)("button",{onClick:()=>o(null),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:(0,qr.jsx)(Em,{className:"w-3 h-3"})})]}):(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)(Ph,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),(0,qr.jsx)("span",{className:"text-sm text-slate-400",children:"No Logo"})]})})}),(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)Qt.error("File size should be less than 5MB");else{d(!0);try{const e=new FileReader;e.onloadend=()=>{o(e.result),Qt.success("Logo uploaded! Click Save to apply."),d(!1)},e.readAsDataURL(t)}catch(a){Qt.error("Failed to upload logo"),d(!1)}}},className:"hidden"}),(0,qr.jsxs)(Dl,{onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},disabled:c,variant:"outline",className:"w-full",children:[c?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),l?"Change Logo":"Upload Logo"]}),l&&(0,qr.jsxs)(Dl,{onClick:async()=>{if(l){h(!0);try{const e=localStorage.getItem("token"),a=await fetch("".concat("","/api/school/ai-remove-background-json"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({school_id:t,image_data:l,image_type:"logo"})}),s=await a.json();s.processed_image?(o(s.processed_image),Qt.success("Background removed successfully!")):Qt.error("Background removal failed")}catch(e){console.error("AI Remove BG Error:",e),Qt.error("AI processing failed")}finally{h(!1)}}else Qt.error("Please upload a logo first")},disabled:m,variant:"outline",className:"w-full text-purple-600 border-purple-200 hover:bg-purple-50",children:[m?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(hh,{className:"w-4 h-4 mr-2"}),"AI Remove Background"]})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 mt-3",children:"PNG/JPG format, Max 5MB. Square logos work best."})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Logo Apply \u0915\u0930\u0947\u0902"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Logo \u0915\u0939\u093e\u0901-\u0915\u0939\u093e\u0901 \u0926\u093f\u0916\u0928\u093e \u091a\u093e\u0939\u093f\u090f?"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{key:"idCards",label:"ID Cards",icon:nH},{key:"notices",label:"Notices",icon:Oh},{key:"calendar",label:"Calendar",icon:eh},{key:"appHeader",label:"App Header",icon:wh},{key:"certificates",label:"Certificates",icon:cY},{key:"feeBills",label:"Fee Bills",icon:cY},{key:"appIcon",label:"App Icon (Favicon)",icon:dh}].map(e=>{const t=e.icon;return(0,qr.jsxs)("button",{onClick:()=>v(t=>u(u({},t),{},{[e.key]:!t[e.key]})),className:"flex items-center gap-2 p-3 rounded-lg border-2 transition-all ".concat(g[e.key]?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-200 text-slate-600 hover:border-slate-300"),"data-testid":"apply-".concat(e.key),children:[g[e.key]?(0,qr.jsx)(ph,{className:"w-4 h-4 text-indigo-600"}):(0,qr.jsx)(t,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.key)})})]})]}),(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,qr.jsx)(Hc,{className:"w-5 h-5 text-indigo-600"}),"Watermark Preview"]}),(0,qr.jsxs)("div",{className:"w-full h-48 bg-white border-2 border-slate-200 rounded-lg relative overflow-hidden",style:{backgroundColor:"#f8fafc"},children:[(0,qr.jsxs)("div",{className:"absolute inset-0 p-4",children:[(0,qr.jsx)("div",{className:"text-xs text-slate-400 uppercase tracking-wider mb-2",children:"Sample Document"}),(0,qr.jsx)("div",{className:"h-2 w-3/4 bg-slate-200 rounded mb-2"}),(0,qr.jsx)("div",{className:"h-2 w-1/2 bg-slate-200 rounded mb-4"}),(0,qr.jsx)("div",{className:"h-2 w-full bg-slate-100 rounded mb-1"}),(0,qr.jsx)("div",{className:"h-2 w-full bg-slate-100 rounded mb-1"}),(0,qr.jsx)("div",{className:"h-2 w-2/3 bg-slate-100 rounded"})]}),l&&x.enabled&&(0,qr.jsx)("div",{className:"absolute pointer-events-none",style:u(u(u(u(u({width:"".concat(x.size,"%"),height:"".concat(x.size,"%"),opacity:x.opacity/100,transform:"translate(".concat(x.offsetX,"%, ").concat(x.offsetY,"%) rotate(").concat(x.rotation,"deg)")},"center"===x.position&&{top:"50%",left:"50%",transform:"translate(-50%, -50%) translate(".concat(x.offsetX,"%, ").concat(x.offsetY,"%) rotate(").concat(x.rotation,"deg)")}),"top-left"===x.position&&{top:"10%",left:"10%"}),"top-right"===x.position&&{top:"10%",right:"10%"}),"bottom-left"===x.position&&{bottom:"10%",left:"10%"}),"bottom-right"===x.position&&{bottom:"10%",right:"10%"}),children:(0,qr.jsx)("img",{src:l,alt:"Watermark",className:"w-full h-full object-contain"})})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Watermark Settings"}),(0,qr.jsxs)("button",{onClick:()=>f(e=>u(u({},e),{},{enabled:!e.enabled})),className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all ".concat(x.enabled?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"),children:[x.enabled?(0,qr.jsx)(Hc,{className:"w-4 h-4"}):(0,qr.jsx)(Uc,{className:"w-4 h-4"}),x.enabled?"On":"Off"]})]}),(0,qr.jsxs)("div",{className:"space-y-6",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(L0,{className:"w-4 h-4 text-slate-500"}),"Size (\u0906\u0915\u093e\u0930)"]}),(0,qr.jsxs)("span",{className:"text-sm font-medium text-indigo-600",children:[x.size,"%"]})]}),(0,qr.jsx)(R0,{value:[x.size],onValueChange:e=>f(t=>u(u({},t),{},{size:e[0]})),min:10,max:100,step:5,className:"w-full"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Hc,{className:"w-4 h-4 text-slate-500"}),"Visibility (\u0926\u093f\u0916\u093e\u0935\u091f)"]}),(0,qr.jsxs)("span",{className:"text-sm font-medium text-indigo-600",children:[x.opacity,"%"]})]}),(0,qr.jsx)(R0,{value:[x.opacity],onValueChange:e=>f(t=>u(u({},t),{},{opacity:e[0]})),min:5,max:50,step:5,className:"w-full"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(ql,{className:"flex items-center gap-2 mb-2",children:[(0,qr.jsx)(F0,{className:"w-4 h-4 text-slate-500"}),"Position (\u0938\u094d\u0925\u093e\u0928)"]}),(0,qr.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"center",label:"Center (\u0915\u0947\u0902\u0926\u094d\u0930)",icon:"\u2b1b"},{value:"top-left",label:"Top Left",icon:"\u2196"},{value:"top-right",label:"Top Right",icon:"\u2197"},{value:"bottom-left",label:"Bottom Left",icon:"\u2199"},{value:"bottom-right",label:"Bottom Right",icon:"\u2198"}].map(e=>(0,qr.jsxs)("button",{onClick:()=>f(t=>u(u({},t),{},{position:e.value})),className:"p-2 rounded-lg border-2 text-center transition-all ".concat(x.position===e.value?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-slate-200 hover:border-slate-300"),children:[(0,qr.jsx)("span",{className:"text-lg",children:e.icon}),(0,qr.jsx)("div",{className:"text-xs mt-1",children:e.label})]},e.value))})]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>f({size:50,opacity:15,position:"center",offsetX:0,offsetY:0,rotation:0,enabled:!0}),className:"w-full",children:[(0,qr.jsx)(nY,{className:"w-4 h-4 mr-2"}),"Reset to Default"]})]})]})]})]}),(0,qr.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,qr.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"ID Card Back Side Preview"}),(0,qr.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Student \u0914\u0930 Employee ID cards \u0915\u0947 \u092a\u0940\u091b\u0947 \u0910\u0938\u093e \u0926\u093f\u0916\u0947\u0917\u093e"}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)("h3",{className:"font-medium text-slate-700",children:"Student ID Card - Back"}),(0,qr.jsxs)("div",{className:"w-full h-48 rounded-lg border-2 border-slate-200 relative overflow-hidden flex flex-col items-center justify-center",style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #1e40af 100%)"},children:[l&&(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{opacity:x.opacity/100},children:(0,qr.jsx)("img",{src:l,alt:"",className:"object-contain",style:{width:"".concat(x.size,"%"),height:"".concat(x.size,"%")}})}),(0,qr.jsxs)("div",{className:"relative z-10 text-center text-white p-4",children:[(0,qr.jsx)("div",{className:"text-2xl font-bold tracking-wider mb-2",children:"STUDENT OF"}),(0,qr.jsx)("div",{className:"text-lg font-semibold uppercase",children:b.name||"School Name"}),b.tagline&&(0,qr.jsx)("div",{className:"text-xs mt-2 opacity-80",children:b.tagline})]})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)("h3",{className:"font-medium text-slate-700",children:"Employee ID Card - Back"}),(0,qr.jsxs)("div",{className:"w-full h-48 rounded-lg border-2 border-slate-200 relative overflow-hidden flex flex-col items-center justify-center",style:{background:"linear-gradient(135deg, #047857 0%, #059669 50%, #047857 100%)"},children:[l&&(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{opacity:x.opacity/100},children:(0,qr.jsx)("img",{src:l,alt:"",className:"object-contain",style:{width:"".concat(x.size,"%"),height:"".concat(x.size,"%")}})}),(0,qr.jsxs)("div",{className:"relative z-10 text-center text-white p-4",children:[(0,qr.jsx)("div",{className:"text-xl font-bold tracking-wider mb-2",children:"TEACHER"}),(0,qr.jsx)("div",{className:"text-lg font-semibold uppercase",children:b.name||"School Name"}),b.tagline&&(0,qr.jsx)("div",{className:"text-xs mt-2 opacity-80",children:b.tagline})]})]})]})]})]})]})}const B0="".concat("","/api"),U0=[{id:"admission_fee",name:"Admission Fee",name_hi:"\u092a\u094d\u0930\u0935\u0947\u0936 \u0936\u0941\u0932\u094d\u0915",frequency:"one_time"},{id:"tuition_fee",name:"Tuition Fee",name_hi:"\u091f\u094d\u092f\u0942\u0936\u0928 \u092b\u0940\u0938",frequency:"monthly"},{id:"exam_fee",name:"Exam Fee",name_hi:"\u092a\u0930\u0940\u0915\u094d\u0937\u093e \u0936\u0941\u0932\u094d\u0915",frequency:"term"},{id:"development_fee",name:"Development Fee",name_hi:"\u0935\u093f\u0915\u093e\u0938 \u0936\u0941\u0932\u094d\u0915",frequency:"annual"},{id:"sports_fee",name:"Sports Fee",name_hi:"\u0916\u0947\u0932 \u0936\u0941\u0932\u094d\u0915",frequency:"annual"},{id:"computer_fee",name:"Computer Fee",name_hi:"\u0915\u0902\u092a\u094d\u092f\u0942\u091f\u0930 \u0936\u0941\u0932\u094d\u0915",frequency:"monthly"},{id:"lab_fee",name:"Lab Fee",name_hi:"\u0932\u0948\u092c \u0936\u0941\u0932\u094d\u0915",frequency:"annual"},{id:"library_fee",name:"Library Fee",name_hi:"\u092a\u0941\u0938\u094d\u0924\u0915\u093e\u0932\u092f \u0936\u0941\u0932\u094d\u0915",frequency:"annual"},{id:"transport_fee",name:"Transport Fee",name_hi:"\u092a\u0930\u093f\u0935\u0939\u0928 \u0936\u0941\u0932\u094d\u0915",frequency:"monthly"},{id:"hostel_fee",name:"Hostel Fee",name_hi:"\u091b\u093e\u0924\u094d\u0930\u093e\u0935\u093e\u0938 \u0936\u0941\u0932\u094d\u0915",frequency:"monthly"},{id:"activity_fee",name:"Activity Fee",name_hi:"\u0917\u0924\u093f\u0935\u093f\u0927\u093f \u0936\u0941\u0932\u094d\u0915",frequency:"annual"},{id:"uniform_fee",name:"Uniform Fee",name_hi:"\u092f\u0942\u0928\u093f\u092b\u0949\u0930\u094d\u092e \u0936\u0941\u0932\u094d\u0915",frequency:"one_time"},{id:"late_fee",name:"Late Fee",name_hi:"\u0935\u093f\u0932\u0902\u092c \u0936\u0941\u0932\u094d\u0915",frequency:"penalty"},{id:"other_fee",name:"Other Fee",name_hi:"\u0905\u0928\u094d\u092f \u0936\u0941\u0932\u094d\u0915",frequency:"custom"}];function H0(){const{t:e}=js(),{schoolId:t,user:a}=Kr(),[n,r]=(0,s.useState)("structure"),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[h,p]=(0,s.useState)([]),[x,f]=(0,s.useState)([]),[g,v]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[w,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),[A,P]=(0,s.useState)(null),[O,M]=(0,s.useState)(!1),[T,D]=(0,s.useState)(null),[I,R]=(0,s.useState)({class_id:"",academic_year:"".concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1),fees:U0.reduce((e,t)=>u(u({},e),{},{[t.id]:0}),{})}),[L,F]=(0,s.useState)({student_id:"",amount:0,fee_types:[],months:[],payment_mode:"cash",payment_date:(new Date).toISOString().split("T")[0],receipt_no:"",remarks:""}),[z,B]=(0,s.useState)({student_id:"",academic_year:"",class_name:"",amount:0,description:"",send_notification:!0}),[U,H]=(0,s.useState)([]),[q,V]=(0,s.useState)([]),[W,G]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(!1),[J,$]=(0,s.useState)({name:"",name_hi:"",type:"central_govt",amount:0,percentage:0,eligibility:"",documents_required:"",academic_year:"".concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1)}),[Q,X]=(0,s.useState)({student_id:"",scholarship_id:"",amount:0,status:"pending",remarks:""});(0,s.useEffect)(()=>{t&&Z()},[t]);const Z=async()=>{v(!0);try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)},[s,n,r,i,o,c]=await Promise.all([Hr.get("".concat(B0,"/classes?school_id=").concat(t),{headers:a}),Hr.get("".concat(B0,"/fee-structures?school_id=").concat(t),{headers:a}),Hr.get("".concat(B0,"/fee-collections?school_id=").concat(t),{headers:a}),Hr.get("".concat(B0,"/old-dues?school_id=").concat(t),{headers:a}),Hr.get("".concat(B0,"/scholarships?school_id=").concat(t),{headers:a}).catch(()=>({data:[]})),Hr.get("".concat(B0,"/student-scholarships?school_id=").concat(t),{headers:a}).catch(()=>({data:[]}))]);l(s.data),m(n.data),p(r.data),f(i.data||[]),H(o.data||[]),V(c.data||[])}catch(e){console.error("Error fetching data:",e)}finally{v(!1)}};(0,s.useEffect)(()=>{t&&async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{const a=localStorage.getItem("token");let s="".concat(B0,"/students?school_id=").concat(t,"&status=active");e&&(s+="&class_id=".concat(e)),j&&(s+="&search=".concat(j));const n=await Hr.get(s,{headers:{Authorization:"Bearer ".concat(a)}});c(n.data)}catch(a){Qt.error("Failed to fetch students")}}(b)},[t,b,j,n]);const ee=e=>{const t=U.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.name)||"Unknown"},te=e=>d.find(t=>t.class_id===e);return t?(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"fee-management-page",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Zm,{className:"w-8 h-8 text-emerald-600"}),"Fee Management"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Complete fee structure, collection & tracking"})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>E(!0),className:"gap-2 text-orange-600 border-orange-200 hover:bg-orange-50","data-testid":"add-old-due-btn",children:[(0,qr.jsx)(rJ,{className:"w-4 h-4"}),"Add Old Due"]}),(0,qr.jsxs)(Dl,{onClick:()=>k(!0),className:"bg-emerald-600 hover:bg-emerald-700 gap-2","data-testid":"collect-fee-btn",children:[(0,qr.jsx)(Sh,{className:"w-4 h-4"}),"Collect Fee"]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"p-3 bg-emerald-100 rounded-xl",children:(0,qr.jsx)(Sh,{className:"w-6 h-6 text-emerald-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Collected"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:["\u20b9",h.reduce((e,t)=>e+(t.amount||0),0).toLocaleString("en-IN")]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl",children:(0,qr.jsx)(Ah,{className:"w-6 h-6 text-orange-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Old Dues"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["\u20b9",x.reduce((e,t)=>e+(t.amount||0),0).toLocaleString("en-IN")]})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,qr.jsx)(Ch,{className:"w-6 h-6 text-blue-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Receipts"}),(0,qr.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:h.length})]})]})})}),(0,qr.jsx)(Qc,{children:(0,qr.jsx)(td,{className:"p-4",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl",children:(0,qr.jsx)(Fc,{className:"w-6 h-6 text-purple-600"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Classes with Structure"}),(0,qr.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[d.length,"/",i.length]})]})]})})})]}),(0,qr.jsxs)(wc,{value:n,onValueChange:r,className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-5 bg-slate-100 p-1 rounded-lg",children:[(0,qr.jsxs)(_c,{value:"structure",className:"gap-2 data-[state=active]:bg-white text-xs md:text-sm",children:[(0,qr.jsx)(y$,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"hidden md:inline",children:"Fee Structure"}),(0,qr.jsx)("span",{className:"md:hidden",children:"Structure"})]}),(0,qr.jsxs)(_c,{value:"collection",className:"gap-2 data-[state=active]:bg-white text-xs md:text-sm",children:[(0,qr.jsx)(nH,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"hidden md:inline",children:"Student Fees"}),(0,qr.jsx)("span",{className:"md:hidden",children:"Fees"})]}),(0,qr.jsxs)(_c,{value:"scholarships",className:"gap-2 data-[state=active]:bg-white text-xs md:text-sm",children:[(0,qr.jsx)(Fc,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"hidden md:inline",children:"Govt Schemes"}),(0,qr.jsx)("span",{className:"md:hidden",children:"Schemes"})]}),(0,qr.jsxs)(_c,{value:"old_dues",className:"gap-2 data-[state=active]:bg-white text-xs md:text-sm",children:[(0,qr.jsx)(rJ,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"hidden md:inline",children:"Old Dues"}),(0,qr.jsx)("span",{className:"md:hidden",children:"Dues"})]}),(0,qr.jsxs)(_c,{value:"reports",className:"gap-2 data-[state=active]:bg-white text-xs md:text-sm",children:[(0,qr.jsx)(cY,{className:"w-4 h-4"}),"Reports"]})]}),(0,qr.jsx)(kc,{value:"structure",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{className:"flex flex-row items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(Zc,{children:"Class-wise Fee Structure"}),(0,qr.jsx)(ed,{children:"Set fees for each class"})]}),(0,qr.jsxs)(Dl,{onClick:()=>S(!0),className:"gap-2",children:[(0,qr.jsx)(xY,{className:"w-4 h-4"}),"Add/Edit Structure"]})]}),(0,qr.jsx)(td,{children:g?(0,qr.jsx)("div",{className:"flex justify-center py-10",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-emerald-600"})}):(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Class"}),(0,qr.jsx)(GU,{children:"Admission Fee"}),(0,qr.jsx)(GU,{children:"Tuition Fee"}),(0,qr.jsx)(GU,{children:"Exam Fee"}),(0,qr.jsx)(GU,{children:"Other Fees"}),(0,qr.jsx)(GU,{children:"Total Annual"}),(0,qr.jsx)(GU,{children:"Actions"})]})}),(0,qr.jsx)(VU,{children:i.map(e=>{const t=te(e.id),a=(null===t||void 0===t?void 0:t.fees)||{},s=e=>{const t=Number(e)||0;return t>0?t:0},n=s(a.admission_fee),r=s(a.tuition_fee),i=s(a.exam_fee),l=Object.entries(a).filter(e=>{let[t,a]=e;return!["admission_fee","tuition_fee","exam_fee"].includes(t)}).reduce((e,t)=>{let[a,n]=t;return e+s(n)},0),o=n+12*r+i+l;return(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(KU,{className:"font-medium",children:e.name}),(0,qr.jsxs)(KU,{children:["\u20b9",n>0?n.toLocaleString("en-IN"):"-"]}),(0,qr.jsxs)(KU,{children:["\u20b9",r>0?r.toLocaleString("en-IN"):"-","/month"]}),(0,qr.jsxs)(KU,{children:["\u20b9",i>0?i.toLocaleString("en-IN"):"-"]}),(0,qr.jsxs)(KU,{children:["\u20b9",l>0?l.toLocaleString("en-IN"):"0"]}),(0,qr.jsxs)(KU,{className:"font-bold text-emerald-600",children:["\u20b9",o.toLocaleString("en-IN")]}),(0,qr.jsx)(KU,{children:(0,qr.jsx)(Dl,{size:"sm",variant:"outline",onClick:()=>{R({class_id:e.id,academic_year:(null===t||void 0===t?void 0:t.academic_year)||"".concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1),fees:(null===t||void 0===t?void 0:t.fees)||U0.reduce((e,t)=>u(u({},e),{},{[t.id]:0}),{})}),S(!0)},children:(0,qr.jsx)(sH,{className:"w-4 h-4"})})})]},e.id)})})]})})]})}),(0,qr.jsx)(kc,{value:"collection",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)(Zc,{children:"Student Fee Status"}),(0,qr.jsx)(ed,{children:"View and collect fees for each student"})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[(0,qr.jsx)("option",{value:"",children:"All Classes"}),i.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{placeholder:"Search student...",value:j,onChange:e=>N(e.target.value),className:"pl-9 w-60"})]})]})]})}),(0,qr.jsx)(td,{children:g?(0,qr.jsx)("div",{className:"flex justify-center py-10",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-emerald-600"})}):(0,qr.jsxs)("div",{className:"space-y-2",children:[o.map(e=>{var t;const a=(e=>{const t=h.filter(t=>t.student_id===e),a=x.filter(t=>t.student_id===e),s=t.reduce((e,t)=>e+(t.amount||0),0);return{totalPaid:s,totalOldDue:a.reduce((e,t)=>e+(t.amount||0),0),collections:t,dues:a}})(e.id),s=te(e.class_id),n=s?Object.values(s.fees||{}).reduce((e,t)=>e+(t||0),0):0,r=n-a.totalPaid+a.totalOldDue,i=T===e.id;return(0,qr.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 cursor-pointer",onClick:()=>D(i?null:e.id),children:[(0,qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,qr.jsx)("button",{className:"text-slate-400",children:i?(0,qr.jsx)(YQ,{className:"w-5 h-5"}):(0,qr.jsx)(qc,{className:"w-5 h-5"})}),(0,qr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:null===(t=e.name)||void 0===t?void 0:t.charAt(0)}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:e.name}),(0,qr.jsxs)("p",{className:"text-sm text-slate-500",children:[e.student_id," \u2022 ",e.class_name]})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-6",children:[(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Total Fee"}),(0,qr.jsxs)("p",{className:"font-semibold",children:["\u20b9",n.toLocaleString("en-IN")]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Paid"}),(0,qr.jsxs)("p",{className:"font-semibold text-emerald-600",children:["\u20b9",a.totalPaid.toLocaleString("en-IN")]})]}),a.totalOldDue>0&&(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Old Due"}),(0,qr.jsxs)("p",{className:"font-semibold text-orange-600",children:["\u20b9",a.totalOldDue.toLocaleString("en-IN")]})]}),(0,qr.jsxs)("div",{className:"text-right",children:[(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"Pending"}),(0,qr.jsxs)("p",{className:"font-semibold ".concat(r>0?"text-red-600":"text-emerald-600"),children:["\u20b9",r.toLocaleString("en-IN")]})]}),(0,qr.jsx)(Dl,{size:"sm",onClick:t=>{t.stopPropagation(),P(e),F(t=>u(u({},t),{},{student_id:e.id})),k(!0)},className:"bg-emerald-600 hover:bg-emerald-700",children:"Collect Fee"})]})]}),i&&(0,qr.jsx)("div",{className:"border-t bg-slate-50 p-4",children:(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-4 h-4"}),"Fee Breakdown"]}),s?(0,qr.jsx)("div",{className:"space-y-2",children:U0.filter(e=>{var t;return(null===(t=s.fees)||void 0===t?void 0:t[e.id])>0}).map(e=>{var t;return(0,qr.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,qr.jsx)("span",{children:e.name_hi}),(0,qr.jsxs)("span",{children:["\u20b9",null===(t=s.fees[e.id])||void 0===t?void 0:t.toLocaleString("en-IN")]})]},e.id)})}):(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"No fee structure set for this class"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[(0,qr.jsx)(Ch,{className:"w-4 h-4"}),"Recent Payments"]}),a.collections.length>0?(0,qr.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:a.collections.slice(0,5).map(e=>{var t;return(0,qr.jsxs)("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("p",{className:"font-medium",children:["\u20b9",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("en-IN")]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:new Date(e.payment_date).toLocaleDateString("en-IN")})]}),(0,qr.jsx)(Dl,{size:"sm",variant:"ghost",onClick:()=>(e=>{var t,a;const s=window.open("","_blank"),n=o.find(t=>t.id===e.student_id);s.document.write("\n      <html>\n      <head>\n        <title>Fee Receipt - ".concat(e.receipt_no,'</title>\n        <style>\n          body { font-family: Arial; padding: 20px; max-width: 400px; margin: auto; }\n          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; }\n          .receipt-no { font-size: 18px; font-weight: bold; }\n          .details { margin: 15px 0; }\n          .row { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px dotted #ccc; }\n          .amount { font-size: 24px; font-weight: bold; text-align: center; margin: 20px 0; }\n          .footer { text-align: center; font-size: 12px; margin-top: 20px; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h2>FEE RECEIPT</h2>\n          <div class="receipt-no">').concat(e.receipt_no,'</div>\n        </div>\n        <div class="details">\n          <div class="row"><span>Student Name:</span><span>').concat((null===n||void 0===n?void 0:n.name)||"N/A",'</span></div>\n          <div class="row"><span>Student ID:</span><span>').concat((null===n||void 0===n?void 0:n.student_id)||"N/A",'</span></div>\n          <div class="row"><span>Class:</span><span>').concat((null===n||void 0===n?void 0:n.class_name)||"N/A",'</span></div>\n          <div class="row"><span>Date:</span><span>').concat(new Date(e.payment_date).toLocaleDateString("en-IN"),'</span></div>\n          <div class="row"><span>Payment Mode:</span><span>').concat(null===(t=e.payment_mode)||void 0===t?void 0:t.toUpperCase(),'</span></div>\n        </div>\n        <div class="amount">\u20b9 ').concat(null===(a=e.amount)||void 0===a?void 0:a.toLocaleString("en-IN"),'</div>\n        <div class="footer">\n          <p>Thank you for your payment</p>\n          <p>This is a computer generated receipt</p>\n        </div>\n        <script>window.onload = () => window.print();<\/script>\n      </body>\n      </html>\n    ')),s.document.close()})(e),children:(0,qr.jsx)(YU,{className:"w-4 h-4"})})]},e.id)})}):(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:"No payments yet"})]})]})})]},e.id)}),0===o.length&&(0,qr.jsxs)("div",{className:"text-center py-10 text-slate-500",children:[(0,qr.jsx)(Lc,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:"No students found"})]})]})})]})}),(0,qr.jsx)(kc,{value:"scholarships",className:"mt-4",children:(0,qr.jsxs)("div",{className:"grid gap-4",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(Xc,{className:"flex flex-row items-center justify-between pb-2",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Fc,{className:"w-5 h-5 text-emerald-600"}),"Government Schemes & Scholarships"]}),(0,qr.jsx)(ed,{children:"Manage and assign govt schemes to students"})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{onClick:()=>Y(!0),variant:"outline",className:"gap-2",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4"}),"Assign to Student"]}),(0,qr.jsxs)(Dl,{onClick:()=>G(!0),className:"gap-2 bg-emerald-600 hover:bg-emerald-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4"}),"Add New Scheme"]})]})]})}),(0,qr.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:U.length>0?U.map(e=>(0,qr.jsxs)(Qc,{className:"hover:shadow-md transition-shadow",children:[(0,qr.jsxs)(Xc,{className:"pb-2",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("central_govt"===e.type?"bg-blue-100 text-blue-700":"state_govt"===e.type?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"),children:"central_govt"===e.type?"\u0915\u0947\u0902\u0926\u094d\u0930 \u0938\u0930\u0915\u093e\u0930":"state_govt"===e.type?"\u0930\u093e\u091c\u094d\u092f \u0938\u0930\u0915\u093e\u0930":"Private"}),(0,qr.jsxs)("span",{className:"text-emerald-600 font-bold",children:["\u20b9",(e.amount||0).toLocaleString()]})]}),(0,qr.jsx)(Zc,{className:"text-base mt-2",children:e.name}),e.name_hi&&(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.name_hi})]}),(0,qr.jsxs)(td,{className:"pt-0",children:[e.eligibility&&(0,qr.jsxs)("p",{className:"text-xs text-slate-600 mb-2",children:[(0,qr.jsx)("strong",{children:"Eligibility:"})," ",e.eligibility]}),e.documents_required&&(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[(0,qr.jsx)("strong",{children:"Documents:"})," ",e.documents_required]}),(0,qr.jsxs)("div",{className:"mt-3 pt-2 border-t flex justify-between items-center",children:[(0,qr.jsx)("span",{className:"text-xs text-slate-400",children:e.academic_year}),(0,qr.jsx)(Dl,{size:"sm",variant:"outline",onClick:()=>{X(u(u({},Q),{},{scholarship_id:e.id,amount:e.amount})),Y(!0)},children:"Assign"})]})]})]},e.id)):(0,qr.jsxs)("div",{className:"col-span-3 text-center py-12 text-slate-400",children:[(0,qr.jsx)(Fc,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:'No schemes added yet. Click "Add New Scheme" to create one.'})]})}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4"}),"Students with Scholarships (",q.length,")"]})}),(0,qr.jsx)(td,{children:q.length>0?(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Student"}),(0,qr.jsx)(GU,{children:"Scheme"}),(0,qr.jsx)(GU,{children:"Amount"}),(0,qr.jsx)(GU,{children:"Status"}),(0,qr.jsx)(GU,{children:"Remarks"})]})}),(0,qr.jsx)(VU,{children:q.map((e,t)=>{const a=o.find(t=>t.id===e.student_id);return(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(KU,{children:(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:(null===a||void 0===a?void 0:a.name)||e.student_id}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:null===a||void 0===a?void 0:a.class_name})]})}),(0,qr.jsx)(KU,{children:ee(e.scholarship_id)}),(0,qr.jsxs)(KU,{className:"font-medium text-emerald-600",children:["\u20b9",(e.amount||0).toLocaleString()]}),(0,qr.jsx)(KU,{children:(0,qr.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("received"===e.status?"bg-green-100 text-green-700":"approved"===e.status?"bg-blue-100 text-blue-700":"rejected"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"received"===e.status?"\u092a\u094d\u0930\u093e\u092a\u094d\u0924":"approved"===e.status?"\u0938\u094d\u0935\u0940\u0915\u0943\u0924":"rejected"===e.status?"\u0905\u0938\u094d\u0935\u0940\u0915\u0943\u0924":"Pending"})}),(0,qr.jsx)(KU,{className:"text-sm text-slate-500",children:e.remarks||"-"})]},t)})})]}):(0,qr.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,qr.jsx)(Lc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,qr.jsx)("p",{children:"No scholarships assigned yet"})]})})]})]})}),(0,qr.jsx)(kc,{value:"old_dues",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{className:"flex flex-row items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(rJ,{className:"w-5 h-5 text-orange-600"}),"Old Fee Dues"]}),(0,qr.jsx)(ed,{children:"Track pending fees from previous years"})]}),(0,qr.jsxs)(Dl,{onClick:()=>E(!0),className:"gap-2 bg-orange-600 hover:bg-orange-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4"}),"Add Old Due"]})]}),(0,qr.jsx)(td,{children:x.length>0?(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Student"}),(0,qr.jsx)(GU,{children:"Academic Year"}),(0,qr.jsx)(GU,{children:"Class"}),(0,qr.jsx)(GU,{children:"Amount"}),(0,qr.jsx)(GU,{children:"Description"}),(0,qr.jsx)(GU,{children:"Status"}),(0,qr.jsx)(GU,{children:"Actions"})]})}),(0,qr.jsx)(VU,{children:x.map(e=>{var t;const a=o.find(t=>t.id===e.student_id);return(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(KU,{children:(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium",children:(null===a||void 0===a?void 0:a.name)||e.student_name}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:null===a||void 0===a?void 0:a.student_id})]})}),(0,qr.jsx)(KU,{children:e.academic_year}),(0,qr.jsx)(KU,{children:e.class_name}),(0,qr.jsxs)(KU,{className:"font-semibold text-orange-600",children:["\u20b9",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("en-IN")]}),(0,qr.jsx)(KU,{className:"text-sm",children:e.description}),(0,qr.jsx)(KU,{children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("paid"===e.status?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:e.status||"Pending"})}),(0,qr.jsx)(KU,{children:(0,qr.jsx)(Dl,{size:"sm",onClick:()=>{P(a),F(t=>u(u({},t),{},{student_id:e.student_id,amount:e.amount,remarks:"Old due payment for ".concat(e.academic_year)})),k(!0)},className:"bg-emerald-600 hover:bg-emerald-700",children:"Collect"})})]},e.id)})})]}):(0,qr.jsxs)("div",{className:"text-center py-10 text-slate-500",children:[(0,qr.jsx)(ph,{className:"w-12 h-12 mx-auto mb-2 text-emerald-500"}),(0,qr.jsx)("p",{children:"No old dues found"})]})})]})}),(0,qr.jsx)(kc,{value:"reports",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsx)(Zc,{children:"Class-wise Fee Summary"}),(0,qr.jsx)(ed,{children:"Overview of fee collection by class"})]}),(0,qr.jsx)(td,{children:(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Class"}),(0,qr.jsx)(GU,{children:"Students"}),(0,qr.jsx)(GU,{children:"Fee/Student"}),(0,qr.jsx)(GU,{children:"Expected Total"}),(0,qr.jsx)(GU,{children:"Collected"}),(0,qr.jsx)(GU,{children:"Pending"}),(0,qr.jsx)(GU,{children:"Collection %"})]})}),(0,qr.jsx)(VU,{children:i.map(e=>{const t=te(e.id),a=o.filter(t=>t.class_id===e.id),s=t?Object.values(t.fees||{}).reduce((e,t)=>e+(t||0),0):0,n=h.filter(e=>a.some(t=>t.id===e.student_id)),r=n.reduce((e,t)=>e+(t.amount||0),0);return u(u({},e),{},{totalFee:s,totalCollected:r,studentCount:a.length,expectedTotal:s*a.length,pendingTotal:s*a.length-r})}).map(e=>(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(KU,{className:"font-medium",children:e.name}),(0,qr.jsx)(KU,{children:e.studentCount}),(0,qr.jsxs)(KU,{children:["\u20b9",e.totalFee.toLocaleString("en-IN")]}),(0,qr.jsxs)(KU,{children:["\u20b9",e.expectedTotal.toLocaleString("en-IN")]}),(0,qr.jsxs)(KU,{className:"text-emerald-600 font-semibold",children:["\u20b9",e.totalCollected.toLocaleString("en-IN")]}),(0,qr.jsxs)(KU,{className:"text-red-600 font-semibold",children:["\u20b9",e.pendingTotal.toLocaleString("en-IN")]}),(0,qr.jsx)(KU,{children:(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("div",{className:"w-20 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,qr.jsx)("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:"".concat(e.expectedTotal?e.totalCollected/e.expectedTotal*100:0,"%")}})}),(0,qr.jsxs)("span",{className:"text-sm",children:[e.expectedTotal?Math.round(e.totalCollected/e.expectedTotal*100):0,"%"]})]})})]},e.id))})]})})]})})]}),(0,qr.jsx)(Im,{open:w,onOpenChange:S,children:(0,qr.jsxs)(zm,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:"Fee Structure Setup"}),(0,qr.jsx)(qm,{children:"Set fee amounts for each fee type"})]}),(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Class *"}),(0,qr.jsxs)("select",{value:I.class_id,onChange:e=>R(t=>u(u({},t),{},{class_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Class"}),i.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Academic Year"}),(0,qr.jsx)(Rl,{value:I.academic_year,onChange:e=>R(t=>u(u({},t),{},{academic_year:e.target.value}))})]})]}),(0,qr.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,qr.jsx)("h4",{className:"font-medium mb-4",children:"Fee Types (\u0936\u0941\u0932\u094d\u0915 \u092a\u094d\u0930\u0915\u093e\u0930)"}),(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-4",children:U0.map(e=>(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsxs)(ql,{className:"text-sm",children:[e.name_hi," (",e.name,")"]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"\u20b9"}),(0,qr.jsx)(Rl,{type:"number",value:I.fees[e.id]||"",onChange:t=>R(a=>u(u({},a),{},{fees:u(u({},a.fees),{},{[e.id]:parseInt(t.target.value)||0})})),placeholder:"0"})]})]},e.id))})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(I.class_id){M(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(B0,"/fee-structures"),u(u({},I),{},{school_id:t}),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Fee structure saved!"),S(!1),Z()}catch(s){var e,a;Qt.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to save")}finally{M(!1)}}else Qt.error("\u0915\u0943\u092a\u092f\u093e class select \u0915\u0930\u0947\u0902")},disabled:O,className:"bg-emerald-600 hover:bg-emerald-700",children:[O?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):null,"Save Structure"]})]})]})]})}),(0,qr.jsx)(Im,{open:_,onOpenChange:k,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:"Collect Fee"}),(0,qr.jsx)(qm,{children:A?"Collecting fee for ".concat(A.name):"Select student and enter amount"})]}),(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[!A&&(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Select Student *"}),(0,qr.jsxs)("select",{value:L.student_id,onChange:e=>{const t=o.find(t=>t.id===e.target.value);P(t),F(t=>u(u({},t),{},{student_id:e.target.value}))},className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Student"}),o.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," (",e.student_id,")"]},e.id))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Amount *"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"text-xl font-bold",children:"\u20b9"}),(0,qr.jsx)(Rl,{type:"number",value:L.amount,onChange:e=>F(t=>u(u({},t),{},{amount:parseInt(e.target.value)||0})),className:"text-2xl font-bold",placeholder:"0"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Payment Mode"}),(0,qr.jsxs)("select",{value:L.payment_mode,onChange:e=>F(t=>u(u({},t),{},{payment_mode:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"cash",children:"Cash"}),(0,qr.jsx)("option",{value:"upi",children:"UPI"}),(0,qr.jsx)("option",{value:"card",children:"Card"}),(0,qr.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,qr.jsx)("option",{value:"cheque",children:"Cheque"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Date"}),(0,qr.jsx)(Rl,{type:"date",value:L.payment_date,onChange:e=>F(t=>u(u({},t),{},{payment_date:e.target.value}))})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Remarks"}),(0,qr.jsx)(Rl,{value:L.remarks,onChange:e=>F(t=>u(u({},t),{},{remarks:e.target.value})),placeholder:"Optional notes"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>{k(!1),P(null)},children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(!L.student_id||L.amount<=0)Qt.error("\u0915\u0943\u092a\u092f\u093e student \u0914\u0930 amount \u092d\u0930\u0947\u0902");else{M(!0);try{const e=localStorage.getItem("token"),s=await Hr.post("".concat(B0,"/fee-collections"),u(u({},L),{},{school_id:t,collected_by:null===a||void 0===a?void 0:a.id}),{headers:{Authorization:"Bearer ".concat(e)}});Qt.success("Fee collected! Receipt No: ".concat(s.data.receipt_no)),k(!1),F({student_id:"",amount:0,fee_types:[],months:[],payment_mode:"cash",payment_date:(new Date).toISOString().split("T")[0],receipt_no:"",remarks:""}),Z()}catch(n){var e,s;Qt.error((null===(e=n.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Failed to collect fee")}finally{M(!1)}}},disabled:O,className:"bg-emerald-600 hover:bg-emerald-700",children:[O?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Collect \u20b9",L.amount.toLocaleString("en-IN")]})]})]})]})}),(0,qr.jsx)(Im,{open:C,onOpenChange:E,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(rJ,{className:"w-5 h-5 text-orange-600"}),"Add Old Due"]}),(0,qr.jsx)(qm,{children:"Add pending fee from previous year"})]}),(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Select Student *"}),(0,qr.jsxs)("select",{value:z.student_id,onChange:e=>B(t=>u(u({},t),{},{student_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Student"}),o.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," (",e.student_id,")"]},e.id))]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Previous Year *"}),(0,qr.jsxs)("select",{value:z.academic_year,onChange:e=>B(t=>u(u({},t),{},{academic_year:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Year"}),Array.from({length:5},(e,t)=>{const a=(new Date).getFullYear()-t-1;return(0,qr.jsxs)("option",{value:"".concat(a,"-").concat(a+1),children:[a,"-",a+1]},a)})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Previous Class"}),(0,qr.jsx)(Rl,{value:z.class_name,onChange:e=>B(t=>u(u({},t),{},{class_name:e.target.value})),placeholder:"e.g., Class 5"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Due Amount *"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("span",{className:"text-xl font-bold",children:"\u20b9"}),(0,qr.jsx)(Rl,{type:"number",value:z.amount,onChange:e=>B(t=>u(u({},t),{},{amount:parseInt(e.target.value)||0})),className:"text-xl font-bold",placeholder:"0"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Description"}),(0,qr.jsx)(Rl,{value:z.description,onChange:e=>B(t=>u(u({},t),{},{description:e.target.value})),placeholder:"e.g., Pending tuition fee for March"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{type:"checkbox",id:"sendNotification",checked:z.send_notification,onChange:e=>B(t=>u(u({},t),{},{send_notification:e.target.checked})),className:"w-4 h-4"}),(0,qr.jsxs)(ql,{htmlFor:"sendNotification",className:"flex items-center gap-2 cursor-pointer",children:[(0,qr.jsx)(Oh,{className:"w-4 h-4"}),"Send notification to parent"]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(!z.student_id||z.amount<=0)Qt.error("\u0915\u0943\u092a\u092f\u093e student \u0914\u0930 amount \u092d\u0930\u0947\u0902");else{M(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(B0,"/old-dues"),u(u({},z),{},{school_id:t,added_by:null===a||void 0===a?void 0:a.id}),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Old due added successfully!"),E(!1),B({student_id:"",academic_year:"",class_name:"",amount:0,description:"",send_notification:!0}),Z()}catch(n){var e,s;Qt.error((null===(e=n.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Failed to add old due")}finally{M(!1)}}},disabled:O,className:"bg-orange-600 hover:bg-orange-700",children:[O?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add Old Due"]})]})]})]})}),(0,qr.jsx)(Im,{open:W,onOpenChange:G,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Fc,{className:"w-5 h-5 text-emerald-600"}),"Add Government Scheme / Scholarship"]}),(0,qr.jsx)(qm,{children:"Add a new govt scheme or scholarship"})]}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Scheme Name (English) *"}),(0,qr.jsx)(Rl,{value:J.name,onChange:e=>$(t=>u(u({},t),{},{name:e.target.value})),placeholder:"e.g., Pre Matric Scholarship"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Scheme Name (Hindi)"}),(0,qr.jsx)(Rl,{value:J.name_hi,onChange:e=>$(t=>u(u({},t),{},{name_hi:e.target.value})),placeholder:"e.g., \u092a\u094d\u0930\u0940-\u092e\u0948\u091f\u094d\u0930\u093f\u0915 \u091b\u093e\u0924\u094d\u0930\u0935\u0943\u0924\u094d\u0924\u093f"})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Scheme Type *"}),(0,qr.jsxs)("select",{value:J.type,onChange:e=>$(t=>u(u({},t),{},{type:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"central_govt",children:"\u0915\u0947\u0902\u0926\u094d\u0930 \u0938\u0930\u0915\u093e\u0930 (Central Govt)"}),(0,qr.jsx)("option",{value:"state_govt",children:"\u0930\u093e\u091c\u094d\u092f \u0938\u0930\u0915\u093e\u0930 (State Govt)"}),(0,qr.jsx)("option",{value:"private",children:"Private / NGO"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Academic Year"}),(0,qr.jsx)("select",{value:J.academic_year,onChange:e=>$(t=>u(u({},t),{},{academic_year:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:Array.from({length:3},(e,t)=>{const a=(new Date).getFullYear()+t;return(0,qr.jsxs)("option",{value:"".concat(a,"-").concat(a+1),children:[a,"-",a+1]},a)})})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Amount (\u20b9) *"}),(0,qr.jsx)(Rl,{type:"number",value:J.amount,onChange:e=>$(t=>u(u({},t),{},{amount:parseInt(e.target.value)||0})),placeholder:"0"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Or % of Fee"}),(0,qr.jsx)(Rl,{type:"number",value:J.percentage,onChange:e=>$(t=>u(u({},t),{},{percentage:parseInt(e.target.value)||0})),placeholder:"0",max:100})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Eligibility Criteria"}),(0,qr.jsx)(Rl,{value:J.eligibility,onChange:e=>$(t=>u(u({},t),{},{eligibility:e.target.value})),placeholder:"e.g., BPL Family, Income < 2.5 Lakh, SC/ST/OBC"})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Documents Required"}),(0,qr.jsx)(Rl,{value:J.documents_required,onChange:e=>$(t=>u(u({},t),{},{documents_required:e.target.value})),placeholder:"e.g., Aadhar, Income Certificate, Caste Certificate"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(!J.name||J.amount<=0)Qt.error("\u0915\u0943\u092a\u092f\u093e scheme name \u0914\u0930 amount \u092d\u0930\u0947\u0902");else{M(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(B0,"/scholarships"),u(u({},J),{},{school_id:t}),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Scheme saved successfully!"),G(!1),$({name:"",name_hi:"",type:"central_govt",amount:0,percentage:0,eligibility:"",documents_required:"",academic_year:"".concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1)}),Z()}catch(s){var e,a;Qt.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to save scheme")}finally{M(!1)}}},disabled:O,className:"bg-emerald-600 hover:bg-emerald-700",children:[O?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Save Scheme"]})]})]})]})}),(0,qr.jsx)(Im,{open:K,onOpenChange:Y,children:(0,qr.jsxs)(zm,{className:"max-w-lg",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Lc,{className:"w-5 h-5 text-emerald-600"}),"Assign Scholarship to Student"]}),(0,qr.jsx)(qm,{children:"Apply a scheme to a student"})]}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Select Student *"}),(0,qr.jsxs)("select",{value:Q.student_id,onChange:e=>X(t=>u(u({},t),{},{student_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"-- Select Student --"}),o.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," (",e.student_id,") - ",e.class_name]},e.id))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Select Scheme *"}),(0,qr.jsxs)("select",{value:Q.scholarship_id,onChange:e=>{const t=U.find(t=>t.id===e.target.value);X(a=>u(u({},a),{},{scholarship_id:e.target.value,amount:(null===t||void 0===t?void 0:t.amount)||0}))},className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"-- Select Scheme --"}),U.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," - \u20b9",(e.amount||0).toLocaleString()]},e.id))]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Amount (\u20b9)"}),(0,qr.jsx)(Rl,{type:"number",value:Q.amount,onChange:e=>X(t=>u(u({},t),{},{amount:parseInt(e.target.value)||0}))})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Status"}),(0,qr.jsxs)("select",{value:Q.status,onChange:e=>X(t=>u(u({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"pending",children:"Pending"}),(0,qr.jsx)("option",{value:"approved",children:"Approved"}),(0,qr.jsx)("option",{value:"received",children:"Received"}),(0,qr.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Remarks"}),(0,qr.jsx)(Rl,{value:Q.remarks,onChange:e=>X(t=>u(u({},t),{},{remarks:e.target.value})),placeholder:"Any notes about this application"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(Q.student_id&&Q.scholarship_id){M(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(B0,"/student-scholarships"),u(u({},Q),{},{school_id:t,assigned_by:null===a||void 0===a?void 0:a.id,assigned_date:(new Date).toISOString()}),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Scholarship assigned to student!"),Y(!1),X({student_id:"",scholarship_id:"",amount:0,status:"pending",remarks:""}),Z()}catch(n){var e,s;Qt.error((null===(e=n.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Failed to assign scholarship")}finally{M(!1)}}else Qt.error("\u0915\u0943\u092a\u092f\u093e student \u0914\u0930 scheme select \u0915\u0930\u0947\u0902")},disabled:O,className:"bg-emerald-600 hover:bg-emerald-700",children:[O?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Assign Scholarship"]})]})]})]})})]}):(0,qr.jsx)("div",{className:"text-center py-20",children:(0,qr.jsx)("p",{className:"text-slate-500",children:"Please select a school first"})})}const q0="".concat("","/api"),V0=[{id:1,start:"08:00",end:"08:45",label:"Period 1"},{id:2,start:"08:45",end:"09:30",label:"Period 2"},{id:3,start:"09:30",end:"10:15",label:"Period 3"},{id:4,start:"10:15",end:"10:30",label:"Break",isBreak:!0},{id:5,start:"10:30",end:"11:15",label:"Period 4"},{id:6,start:"11:15",end:"12:00",label:"Period 5"},{id:7,start:"12:00",end:"12:45",label:"Period 6"},{id:8,start:"12:45",end:"01:30",label:"Lunch",isBreak:!0},{id:9,start:"01:30",end:"02:15",label:"Period 7"},{id:10,start:"02:15",end:"03:00",label:"Period 8"}],W0=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],G0=["\u0938\u094b\u092e\u0935\u093e\u0930","\u092e\u0902\u0917\u0932\u0935\u093e\u0930","\u092c\u0941\u0927\u0935\u093e\u0930","\u0917\u0941\u0930\u0941\u0935\u093e\u0930","\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930","\u0936\u0928\u093f\u0935\u093e\u0930"],K0={Hindi:"bg-orange-100 border-orange-300 text-orange-800",English:"bg-blue-100 border-blue-300 text-blue-800",Mathematics:"bg-green-100 border-green-300 text-green-800",Science:"bg-purple-100 border-purple-300 text-purple-800","Social Science":"bg-yellow-100 border-yellow-300 text-yellow-800",Computer:"bg-cyan-100 border-cyan-300 text-cyan-800","Physical Education":"bg-red-100 border-red-300 text-red-800",Drawing:"bg-pink-100 border-pink-300 text-pink-800",Music:"bg-indigo-100 border-indigo-300 text-indigo-800",GK:"bg-teal-100 border-teal-300 text-teal-800","Moral Science":"bg-amber-100 border-amber-300 text-amber-800",Sanskrit:"bg-rose-100 border-rose-300 text-rose-800",default:"bg-slate-100 border-slate-300 text-slate-800"};function Y0(){var e;const{schoolId:t,user:a}=Kr(),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)({}),[h,p]=(0,s.useState)(V0),[x,f]=(0,s.useState)(!0),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(null),[w,S]=(0,s.useState)("class"),[_,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)(null),[A,P]=(0,s.useState)(!1),[O,M]=(0,s.useState)({day:"",period:"",subject_id:"",teacher_id:"",room:""});(0,s.useEffect)(()=>{t&&T()},[t]);const T=async()=>{f(!0);try{var e,a,s,n,i;const o=localStorage.getItem("token"),d={Authorization:"Bearer ".concat(o)},[u,h,x,f,g,v]=await Promise.all([Hr.get("".concat(q0,"/classes?school_id=").concat(t),{headers:d}),Hr.get("".concat(q0,"/staff?school_id=").concat(t),{headers:d}).catch(()=>({data:[]})),Hr.get("".concat(q0,"/subjects?school_id=").concat(t),{headers:d}).catch(()=>({data:[]})),Hr.get("".concat(q0,"/timetables?school_id=").concat(t),{headers:d}).catch(()=>({data:{}})),Hr.get("".concat(q0,"/timetable/time-slots?school_id=").concat(t),{headers:d}).catch(()=>({data:{slots:[]}})),Hr.get("".concat(q0,"/schools/").concat(t),{headers:d}).catch(()=>({data:{}}))]);if(r(u.data||[]),l((null===(e=h.data)||void 0===e?void 0:e.filter(e=>{var t;return"teacher"===e.role||(null===(t=e.designation)||void 0===t?void 0:t.toLowerCase().includes("teacher"))}))||[]),(null===(a=g.data)||void 0===a||null===(s=a.slots)||void 0===s?void 0:s.length)>0)p(g.data.slots);else{const e=v.data,t=(null===e||void 0===e?void 0:e.school_start_time)||"10:00",a=(null===e||void 0===e?void 0:e.school_end_time)||"03:30",s=D(t,a);p(s)}const b=[{id:"hindi",name:"Hindi",name_hi:"\u0939\u093f\u0902\u0926\u0940"},{id:"english",name:"English",name_hi:"\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940"},{id:"math",name:"Mathematics",name_hi:"\u0917\u0923\u093f\u0924"},{id:"science",name:"Science",name_hi:"\u0935\u093f\u091c\u094d\u091e\u093e\u0928"},{id:"sst",name:"Social Science",name_hi:"\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928"},{id:"computer",name:"Computer",name_hi:"\u0915\u0902\u092a\u094d\u092f\u0942\u091f\u0930"},{id:"pe",name:"Physical Education",name_hi:"\u0936\u093e\u0930\u0940\u0930\u093f\u0915 \u0936\u093f\u0915\u094d\u0937\u093e"},{id:"drawing",name:"Drawing",name_hi:"\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e"},{id:"music",name:"Music",name_hi:"\u0938\u0902\u0917\u0940\u0924"},{id:"gk",name:"GK",name_hi:"\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928"},{id:"moral",name:"Moral Science",name_hi:"\u0928\u0948\u0924\u093f\u0915 \u0936\u093f\u0915\u094d\u0937\u093e"},{id:"sanskrit",name:"Sanskrit",name_hi:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924"}];c((null===(n=x.data)||void 0===n?void 0:n.length)>0?x.data:b),m(f.data||{}),(null===(i=u.data)||void 0===i?void 0:i.length)>0&&y(u.data[0])}catch(o){console.error("Error fetching data:",o),Qt.error("Failed to load data")}finally{f(!1)}},D=(e,t)=>{const[a]=e.split(":").map(Number),s=[];let n=a,r=0,i=1;for(let l=0;l<8;l++)if(3===l)s.push({id:s.length+1,label:"Break",start:"".concat(String(n).padStart(2,"0"),":").concat(String(r).padStart(2,"0")),end:"".concat(String(n).padStart(2,"0"),":").concat(String(r+15).padStart(2,"0")),isBreak:!0}),r+=15;else if(6===l)s.push({id:s.length+1,label:"Lunch",start:"".concat(String(n).padStart(2,"0"),":").concat(String(r).padStart(2,"0")),end:"".concat(String(n).padStart(2,"0"),":").concat(String(r+30).padStart(2,"0")),isBreak:!0}),r+=30,r>=60&&(n+=Math.floor(r/60),r%=60);else{const e=r+45,t=n+Math.floor(e/60),a=e%60;s.push({id:s.length+1,label:"Period ".concat(i),start:"".concat(String(n).padStart(2,"0"),":").concat(String(r).padStart(2,"0")),end:"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0")),isBreak:!1}),i++,r+=45,r>=60&&(n+=Math.floor(r/60),r%=60)}return s},I=e=>d[e]||{},R=(e,t,a)=>{for(const[l,o]of Object.entries(d)){var s,r,i;if((null===(s=o[t])||void 0===s||null===(r=s[a])||void 0===r?void 0:r.teacher_id)===e)if((null===b||void 0===b?void 0:b.id)!==l)return(null===(i=n.find(e=>e.id===l))||void 0===i?void 0:i.name)||"Another class"}return null},L=e=>K0[e]||K0.default;return t?(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"timetable-management",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-8 h-8 text-indigo-600"}),"Timetable Management"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Class-wise & Teacher-wise scheduling"})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>{const e=document.getElementById("timetable-grid");if(!e)return;const t=window.open("","_blank");t.document.write("\n      <html>\n      <head>\n        <title>Timetable - ".concat("class"===w?null===b||void 0===b?void 0:b.name:null===j||void 0===j?void 0:j.name,"</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 20px; }\n          h1 { text-align: center; margin-bottom: 5px; }\n          h2 { text-align: center; color: #666; margin-top: 0; }\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: center; font-size: 11px; }\n          th { background: #f5f5f5; font-weight: bold; }\n          .subject { font-weight: bold; color: #333; }\n          .teacher { font-size: 10px; color: #666; }\n          .break { background: #fef3c7; }\n          @media print { body { -webkit-print-color-adjust: exact; } }\n        </style>\n      </head>\n      <body>\n        <h1>").concat("class"===w?null===b||void 0===b?void 0:b.name:null===j||void 0===j?void 0:j.name," - Timetable</h1>\n        <h2>Academic Year ").concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1,"</h2>\n        ").concat(e.outerHTML,"\n        <script>window.onload = () => window.print();<\/script>\n      </body>\n      </html>\n    ")),t.document.close()},className:"gap-2",children:[(0,qr.jsx)(YU,{className:"w-4 h-4"}),"Print"]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>P(!0),className:"gap-2",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4"}),"Time Slots"]})]})]}),(0,qr.jsxs)(wc,{value:w,onValueChange:S,className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-2 max-w-md",children:[(0,qr.jsxs)(_c,{value:"class",className:"gap-2",children:[(0,qr.jsx)(Fc,{className:"w-4 h-4"}),"Class-wise"]}),(0,qr.jsxs)(_c,{value:"teacher",className:"gap-2",children:[(0,qr.jsx)(eH,{className:"w-4 h-4"}),"Teacher-wise"]})]}),(0,qr.jsx)(kc,{value:"class",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-3",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsx)(Zc,{children:"Class Timetable"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(ql,{children:"Select Class:"}),(0,qr.jsx)("select",{value:(null===b||void 0===b?void 0:b.id)||"",onChange:e=>y(n.find(t=>t.id===e.target.value)),className:"px-3 py-2 border rounded-lg min-w-[150px]",children:n.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})}),(0,qr.jsx)(td,{children:x?(0,qr.jsx)("div",{className:"flex justify-center py-10",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-indigo-600"})}):b?(0,qr.jsx)("div",{className:"overflow-x-auto",id:"timetable-grid",children:(0,qr.jsxs)("table",{className:"w-full border-collapse min-w-[800px]",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"border border-slate-200 bg-slate-100 p-2 text-sm font-semibold w-20",children:"Day / Time"}),h.map(e=>(0,qr.jsxs)("th",{className:"border border-slate-200 p-2 text-xs font-semibold ".concat(e.isBreak?"bg-amber-50":"bg-slate-100"),children:[(0,qr.jsx)("div",{children:e.label}),(0,qr.jsxs)("div",{className:"text-[10px] font-normal text-slate-500",children:[e.start," - ",e.end]})]},e.id))]})}),(0,qr.jsx)("tbody",{children:W0.map((e,t)=>{var a;const s=(null===(a=I(b.id))||void 0===a?void 0:a[e])||{};return(0,qr.jsxs)("tr",{children:[(0,qr.jsxs)("td",{className:"border border-slate-200 bg-slate-50 p-2 text-sm font-medium",children:[(0,qr.jsx)("div",{children:e}),(0,qr.jsx)("div",{className:"text-xs text-slate-500",children:G0[t]})]}),h.map(t=>{if(t.isBreak)return(0,qr.jsx)("td",{className:"border border-slate-200 bg-amber-50 p-2 text-center text-xs text-amber-700",children:t.label},t.id);const a=s[t.id];return(0,qr.jsx)("td",{onClick:()=>((e,t)=>{var a,s;const n=(null===(a=I(null===b||void 0===b?void 0:b.id))||void 0===a||null===(s=a[e])||void 0===s?void 0:s[t.id])||{};M({day:e,period:t.id,subject_id:n.subject_id||"",teacher_id:n.teacher_id||"",room:n.room||""}),E({day:e,period:t}),k(!0)})(e,t),className:"border border-slate-200 p-1 cursor-pointer hover:bg-slate-50 transition-colors ".concat(a?L(a.subject_name):""),children:a?(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("div",{className:"font-semibold text-xs",children:a.subject_name}),(0,qr.jsx)("div",{className:"text-[10px] opacity-80",children:a.teacher_name}),a.room&&(0,qr.jsxs)("div",{className:"text-[9px] opacity-60",children:["Room: ",a.room]})]}):(0,qr.jsx)("div",{className:"text-center text-slate-300 text-xs py-2",children:(0,qr.jsx)(xY,{className:"w-4 h-4 mx-auto"})})},t.id)})]},e)})})]})}):(0,qr.jsx)("p",{className:"text-center text-slate-500 py-10",children:"Select a class to view timetable"})})]})}),(0,qr.jsx)(kc,{value:"teacher",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-3",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsx)(Zc,{children:"Teacher Schedule"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(ql,{children:"Select Teacher:"}),(0,qr.jsxs)("select",{value:(null===j||void 0===j?void 0:j.id)||"",onChange:e=>N(i.find(t=>t.id===e.target.value)),className:"px-3 py-2 border rounded-lg min-w-[200px]",children:[(0,qr.jsx)("option",{value:"",children:"-- Select Teacher --"}),i.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,qr.jsx)(td,{children:j?(0,qr.jsx)("div",{className:"overflow-x-auto",id:"timetable-grid",children:(0,qr.jsxs)("table",{className:"w-full border-collapse min-w-[800px]",children:[(0,qr.jsx)("thead",{children:(0,qr.jsxs)("tr",{children:[(0,qr.jsx)("th",{className:"border border-slate-200 bg-slate-100 p-2 text-sm font-semibold w-20",children:"Day / Time"}),h.map(e=>(0,qr.jsxs)("th",{className:"border border-slate-200 p-2 text-xs font-semibold ".concat(e.isBreak?"bg-amber-50":"bg-slate-100"),children:[(0,qr.jsx)("div",{children:e.label}),(0,qr.jsxs)("div",{className:"text-[10px] font-normal text-slate-500",children:[e.start," - ",e.end]})]},e.id))]})}),(0,qr.jsx)("tbody",{children:W0.map((e,t)=>{const a=(e=>{const t={};return Object.entries(d).forEach(a=>{let[s,r]=a;Object.entries(r).forEach(a=>{let[r,i]=a;Object.entries(i).forEach(a=>{let[i,l]=a;var o;l.teacher_id===e&&(t[r]||(t[r]={}),t[r][i]=u(u({},l),{},{class_id:s,class_name:null===(o=n.find(e=>e.id===s))||void 0===o?void 0:o.name}))})})}),t})(j.id),s=a[e]||{};return(0,qr.jsxs)("tr",{children:[(0,qr.jsxs)("td",{className:"border border-slate-200 bg-slate-50 p-2 text-sm font-medium",children:[(0,qr.jsx)("div",{children:e}),(0,qr.jsx)("div",{className:"text-xs text-slate-500",children:G0[t]})]}),h.map(e=>{if(e.isBreak)return(0,qr.jsx)("td",{className:"border border-slate-200 bg-amber-50 p-2 text-center text-xs text-amber-700",children:e.label},e.id);const t=s[e.id];return(0,qr.jsx)("td",{className:"border border-slate-200 p-1 ".concat(t?L(t.subject_name):"bg-green-50"),children:t?(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("div",{className:"font-semibold text-xs",children:t.class_name}),(0,qr.jsx)("div",{className:"text-[10px] opacity-80",children:t.subject_name})]}):(0,qr.jsx)("div",{className:"text-center text-green-500 text-[10px]",children:"Free"})},e.id)})]},e)})})]})}):(0,qr.jsx)("p",{className:"text-center text-slate-500 py-10",children:"Select a teacher to view schedule"})})]})})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsx)(Zc,{className:"text-sm",children:"Subject Colors"})}),(0,qr.jsx)(td,{children:(0,qr.jsx)("div",{className:"flex flex-wrap gap-2",children:o.slice(0,12).map(e=>(0,qr.jsx)("span",{className:"px-2 py-1 rounded text-xs border ".concat(L(e.name)),children:e.name},e.id))})})]}),(0,qr.jsx)(Im,{open:_,onOpenChange:k,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsxs)(Hm,{children:[null===C||void 0===C?void 0:C.day," - ",null===(e=h.find(e=>{var t;return e.id===(null===C||void 0===C||null===(t=C.period)||void 0===t?void 0:t.id)}))||void 0===e?void 0:e.label]}),(0,qr.jsx)(qm,{children:"Set subject and teacher for this period"})]}),(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Subject *"}),(0,qr.jsxs)("select",{value:O.subject_id,onChange:e=>M(t=>u(u({},t),{},{subject_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"-- Select Subject --"}),o.map(e=>(0,qr.jsxs)("option",{value:e.id,children:[e.name," (",e.name_hi,")"]},e.id))]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Teacher"}),(0,qr.jsxs)("select",{value:O.teacher_id,onChange:e=>M(t=>u(u({},t),{},{teacher_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"-- Select Teacher --"}),i.map(e=>{const t=R(e.id,O.day,O.period);return(0,qr.jsxs)("option",{value:e.id,disabled:!!t,children:[e.name," ",t?"(Busy in ".concat(t,")"):""]},e.id)})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Room (Optional)"}),(0,qr.jsx)(Rl,{value:O.room,onChange:e=>M(t=>u(u({},t),{},{room:e.target.value})),placeholder:"e.g., Room 101"})]}),(0,qr.jsxs)("div",{className:"flex justify-between gap-3 pt-4",children:[(0,qr.jsxs)(Dl,{variant:"destructive",onClick:async()=>{v(!0);try{const e=localStorage.getItem("token");await Hr.delete("".concat(q0,"/timetables/slot"),{headers:{Authorization:"Bearer ".concat(e)},data:{school_id:t,class_id:b.id,day:O.day,period_id:O.period}}),m(e=>{var t;const a=u({},e);return null!==(t=a[b.id])&&void 0!==t&&t[O.day]&&delete a[b.id][O.day][O.period],a}),Qt.success("Period removed"),k(!1)}catch(e){Qt.error("Failed to remove period")}finally{v(!1)}},disabled:g,className:"gap-2",children:[(0,qr.jsx)(iH,{className:"w-4 h-4"}),"Remove"]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(O.subject_id){if(O.teacher_id){const e=R(O.teacher_id,O.day,O.period);if(e)return void Qt.error("Teacher already busy in ".concat(e," at this time!"))}v(!0);try{const e=localStorage.getItem("token"),a=o.find(e=>e.id===O.subject_id),s=i.find(e=>e.id===O.teacher_id);await Hr.post("".concat(q0,"/timetables/slot"),{school_id:t,class_id:b.id,day:O.day,period_id:O.period,subject_id:O.subject_id,subject_name:null===a||void 0===a?void 0:a.name,teacher_id:O.teacher_id,teacher_name:null===s||void 0===s?void 0:s.name,room:O.room},{headers:{Authorization:"Bearer ".concat(e)}}),m(e=>{var t;return u(u({},e),{},{[b.id]:u(u({},e[b.id]),{},{[O.day]:u(u({},null===(t=e[b.id])||void 0===t?void 0:t[O.day]),{},{[O.period]:{subject_id:O.subject_id,subject_name:null===a||void 0===a?void 0:a.name,teacher_id:O.teacher_id,teacher_name:null===s||void 0===s?void 0:s.name,room:O.room}})})})}),Qt.success("Period saved!"),k(!1)}catch(e){Qt.error("Failed to save period")}finally{v(!1)}}else Qt.error("\u0915\u0943\u092a\u092f\u093e subject select \u0915\u0930\u0947\u0902")},disabled:g,className:"bg-indigo-600 hover:bg-indigo-700",children:[g?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(ph,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})]})]})}),(0,qr.jsx)(Im,{open:A,onOpenChange:P,children:(0,qr.jsxs)(zm,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Ah,{className:"w-6 h-6 text-indigo-600"}),"Edit Time Slots"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,qr.jsx)("p",{className:"text-sm text-blue-800",children:"\\ud83d\\udccc School timing se default slots set honge. Aap inhe edit kar sakte hain."})}),h.map((e,t)=>(0,qr.jsxs)("div",{className:"grid grid-cols-5 gap-3 p-3 border rounded-lg bg-gray-50",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Label"}),(0,qr.jsx)(Rl,{value:e.label,onChange:e=>{const a=[...h];a[t].label=e.target.value,p(a)},className:"text-sm mt-1"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Start Time"}),(0,qr.jsx)(Rl,{type:"time",value:e.start,onChange:e=>{const a=[...h];a[t].start=e.target.value,p(a)},className:"text-sm mt-1"})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"End Time"}),(0,qr.jsx)(Rl,{type:"time",value:e.end,onChange:e=>{const a=[...h];a[t].end=e.target.value,p(a)},className:"text-sm mt-1"})]}),(0,qr.jsx)("div",{className:"flex items-end",children:(0,qr.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,qr.jsx)("input",{type:"checkbox",checked:e.isBreak||!1,onChange:e=>{const a=[...h];a[t].isBreak=e.target.checked,p(a)},className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"text-xs",children:"Break"})]})}),(0,qr.jsx)("div",{className:"flex items-end justify-end",children:(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>{const e=h.filter((e,a)=>a!==t);p(e)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,qr.jsx)(iH,{className:"w-4 h-4"})})})]},t)),(0,qr.jsxs)(Dl,{variant:"outline",onClick:()=>{p([...h,{id:h.length+1,label:"Period ".concat(h.filter(e=>!e.isBreak).length+1),start:"09:00",end:"09:45",isBreak:!1}])},className:"w-full",children:[(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Add New Slot"]}),(0,qr.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>P(!1),className:"flex-1",children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{try{const e=localStorage.getItem("token");await Hr.post("".concat(q0,"/timetable/save-time-slots"),{school_id:t,slots:h},{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("\u2705 Time slots saved!"),P(!1),T()}catch($1){Qt.error("Save failed")}},className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),"Save Time Slots"]})]})]})]})})]}):(0,qr.jsx)("div",{className:"text-center py-20",children:(0,qr.jsx)("p",{className:"text-slate-500",children:"Please select a school first"})})}const J0="".concat("","/api"),$0={tc:{name:"Transfer Certificate",name_hi:"\u0938\u094d\u0925\u093e\u0928\u093e\u0928\u094d\u0924\u0930\u0923 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930",icon:cY},character:{name:"Character Certificate",name_hi:"\u091a\u0930\u093f\u0924\u094d\u0930 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930",icon:pJ},bonafide:{name:"Bonafide Certificate",name_hi:"\u0935\u093e\u0938\u094d\u0924\u0935\u093f\u0915 \u091b\u093e\u0924\u094d\u0930 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930",icon:Km}},Q0=e=>{const t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];return 0===e?"Zero":e<20?t[e]:e<100?["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"][Math.floor(e/10)]+(e%10?" "+t[e%10]:""):e<1e3?t[Math.floor(e/100)]+" Hundred"+(e%100?" "+Q0(e%100):""):e.toString()};function X0(){var e,t,a,n;const{schoolId:r,user:i}=Kr(),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(null),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)(!0),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(null),[S,_]=(0,s.useState)("tc"),[k,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)(null),[P,O]=(0,s.useState)({tc_number:"",issue_date:(new Date).toISOString().split("T")[0],leaving_date:(new Date).toISOString().split("T")[0],reason:"On parent request",conduct:"Good",attendance:"Regular",fees_paid:!0,dues_amount:0,promoted_to:"",remarks:""});(0,s.useEffect)(()=>{r&&M()},[r]);const M=async()=>{x(!0);try{const e=localStorage.getItem("token"),t={Authorization:"Bearer ".concat(e)},[a,s,n]=await Promise.all([Hr.get("".concat(J0,"/students?school_id=").concat(r),{headers:t}),Hr.get("".concat(J0,"/schools/").concat(r),{headers:t}),Hr.get("".concat(J0,"/classes?school_id=").concat(r),{headers:t})]);o(a.data||[]),d(s.data),h(n.data||[]);const i=await Hr.get("".concat(J0,"/certificates/count?school_id=").concat(r,"&type=tc"),{headers:t}).catch(()=>({data:{count:0}}));O(e=>{var t;return u(u({},e),{},{tc_number:"TC-".concat((new Date).getFullYear(),"-").concat(String(((null===(t=i.data)||void 0===t?void 0:t.count)||0)+1).padStart(4,"0"))})})}catch(e){console.error("Error fetching data:",e)}finally{x(!1)}},T=l.filter(e=>{var t,a;const s=!v||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase()))||(null===(a=e.student_id)||void 0===a?void 0:a.toLowerCase().includes(v.toLowerCase())),n=!y||e.class_id===y;return s&&n}),D=(e,t,a,s)=>{const n=(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}),r=m.find(e=>e.id===t.class_id);switch(e){case"tc":return{type:"tc",title:"TRANSFER CERTIFICATE",title_hi:"\u0938\u094d\u0925\u093e\u0928\u093e\u0928\u094d\u0924\u0930\u0923 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930",content:'\n            <div style="font-family: \'Times New Roman\', serif; padding: 40px; border: 3px double #000; margin: 20px; background: #fff;">\n              <div style="text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 20px;">\n                '.concat(null!==a&&void 0!==a&&a.logo_url?'<img src="'.concat(a.logo_url,'" style="width: 80px; height: 80px; object-fit: contain;" />'):"",'\n                <h1 style="margin: 10px 0 5px; font-size: 24px;">').concat((null===a||void 0===a?void 0:a.name)||"SCHOOL NAME",'</h1>\n                <p style="margin: 0; font-size: 12px;">').concat((null===a||void 0===a?void 0:a.address)||"",'</p>\n                <p style="margin: 5px 0; font-size: 12px;">Phone: ').concat((null===a||void 0===a?void 0:a.phone)||""," | Email: ").concat((null===a||void 0===a?void 0:a.email)||"",'</p>\n                <h2 style="margin: 15px 0 0; font-size: 18px; text-decoration: underline;">TRANSFER CERTIFICATE</h2>\n                <p style="margin: 5px 0; font-size: 14px;">\u0938\u094d\u0925\u093e\u0928\u093e\u0928\u094d\u0924\u0930\u0923 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930</p>\n              </div>\n              \n              <table style="width: 100%; border-collapse: collapse; font-size: 14px;">\n                <tr><td style="padding: 8px; width: 50%;"><b>T.C. No.:</b> ').concat(s.tc_number,"</td><td><b>Date:</b> ").concat(n,'</td></tr>\n                <tr><td style="padding: 8px;"><b>Admission No.:</b> ').concat(t.admission_no||t.student_id,"</td><td><b>S.R. No.:</b> ").concat(t.sr_no||"-",'</td></tr>\n              </table>\n              \n              <table style="width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 15px;">\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px; width: 40%;">1. Name of Student</td><td style="padding: 10px;"><b>').concat(t.name,'</b></td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">2. Father\'s Name</td><td style="padding: 10px;">').concat(t.father_name||"-",'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">3. Mother\'s Name</td><td style="padding: 10px;">').concat(t.mother_name||"-",'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">4. Date of Birth</td><td style="padding: 10px;">').concat(t.dob?new Date(t.dob).toLocaleDateString("en-IN"):"-"," (").concat(t.dob?Q0(new Date(t.dob).getDate())+" "+new Date(t.dob).toLocaleDateString("en-IN",{month:"long",year:"numeric"}):"-",')</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">5. Nationality</td><td style="padding: 10px;">Indian</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">6. Category</td><td style="padding: 10px;">').concat(t.category||"General",'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">7. Date of Admission</td><td style="padding: 10px;">').concat(t.admission_date?new Date(t.admission_date).toLocaleDateString("en-IN"):"-",'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">8. Class at Admission</td><td style="padding: 10px;">').concat(t.admission_class||"-",'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">9. Class at Leaving</td><td style="padding: 10px;">').concat((null===r||void 0===r?void 0:r.name)||"-",'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">10. Date of Leaving</td><td style="padding: 10px;">').concat(s.leaving_date?new Date(s.leaving_date).toLocaleDateString("en-IN"):n,'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">11. Reason for Leaving</td><td style="padding: 10px;">').concat(s.reason,'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">12. Qualified for Promotion</td><td style="padding: 10px;">').concat(s.promoted_to||"Yes",'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">13. Conduct & Character</td><td style="padding: 10px;">').concat(s.conduct,'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">14. Attendance</td><td style="padding: 10px;">').concat(s.attendance,'</td></tr>\n                <tr style="border-bottom: 1px dotted #999;"><td style="padding: 10px;">15. Fee Dues</td><td style="padding: 10px;">').concat(s.fees_paid?"Nil":"\u20b9"+s.dues_amount,'</td></tr>\n                <tr><td style="padding: 10px;">16. Remarks</td><td style="padding: 10px;">').concat(s.remarks||"-",'</td></tr>\n              </table>\n              \n              <div style="display: flex; justify-content: space-between; margin-top: 50px; padding-top: 20px;">\n                <div style="text-align: center;">\n                  <div style="border-top: 1px solid #000; width: 150px; margin-top: 40px;"></div>\n                  <p style="margin: 5px 0;">Class Teacher</p>\n                </div>\n                <div style="text-align: center;">\n                  <div style="border-top: 1px solid #000; width: 150px; margin-top: 40px;"></div>\n                  <p style="margin: 5px 0;">Principal</p>\n                </div>\n              </div>\n            </div>\n          ')};case"character":return{type:"character",title:"CHARACTER CERTIFICATE",title_hi:"\u091a\u0930\u093f\u0924\u094d\u0930 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930",content:'\n            <div style="font-family: \'Times New Roman\', serif; padding: 40px; border: 3px double #000; margin: 20px; background: #fff;">\n              <div style="text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 30px;">\n                '.concat(null!==a&&void 0!==a&&a.logo_url?'<img src="'.concat(a.logo_url,'" style="width: 80px; height: 80px; object-fit: contain;" />'):"",'\n                <h1 style="margin: 10px 0 5px; font-size: 24px;">').concat((null===a||void 0===a?void 0:a.name)||"SCHOOL NAME",'</h1>\n                <p style="margin: 0; font-size: 12px;">').concat((null===a||void 0===a?void 0:a.address)||"",'</p>\n                <h2 style="margin: 20px 0 0; font-size: 20px; text-decoration: underline;">CHARACTER CERTIFICATE</h2>\n                <p style="margin: 5px 0; font-size: 14px;">\u091a\u0930\u093f\u0924\u094d\u0930 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930</p>\n              </div>\n              \n              <p style="font-size: 14px; margin-bottom: 10px; text-align: right;"><b>Date:</b> ').concat(n,'</p>\n              <p style="font-size: 14px; margin-bottom: 10px;"><b>Certificate No.:</b> CC-').concat((new Date).getFullYear(),"-").concat(Math.floor(9999*Math.random()).toString().padStart(4,"0"),'</p>\n              \n              <p style="font-size: 15px; line-height: 2; text-align: justify; margin-top: 30px;">\n                This is to certify that <b>').concat(t.name,"</b>, Son/Daughter of <b>").concat(t.father_name||"Mr. _______","</b>, \n                was a bonafide student of this school. He/She was admitted in class <b>").concat(t.admission_class||"-","</b> \n                and studied up to class <b>").concat((null===r||void 0===r?void 0:r.name)||"-",'</b>.\n              </p>\n              \n              <p style="font-size: 15px; line-height: 2; text-align: justify; margin-top: 20px;">\n                During his/her stay in this institution, his/her conduct and character was found to be <b>GOOD</b>. \n                He/She bears a good moral character and has not been involved in any kind of disciplinary action.\n              </p>\n              \n              <p style="font-size: 15px; line-height: 2; text-align: justify; margin-top: 20px;">\n                I wish him/her all the best for his/her future endeavors.\n              </p>\n              \n              <div style="display: flex; justify-content: flex-end; margin-top: 60px;">\n                <div style="text-align: center;">\n                  <div style="border-top: 1px solid #000; width: 180px; margin-top: 40px;"></div>\n                  <p style="margin: 5px 0; font-weight: bold;">Principal</p>\n                  <p style="margin: 0; font-size: 12px;">').concat((null===a||void 0===a?void 0:a.name)||"","</p>\n                </div>\n              </div>\n            </div>\n          ")};case"bonafide":return{type:"bonafide",title:"BONAFIDE CERTIFICATE",title_hi:"\u0935\u093e\u0938\u094d\u0924\u0935\u093f\u0915 \u091b\u093e\u0924\u094d\u0930 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930",content:'\n            <div style="font-family: \'Times New Roman\', serif; padding: 40px; border: 3px double #000; margin: 20px; background: #fff;">\n              <div style="text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 30px;">\n                '.concat(null!==a&&void 0!==a&&a.logo_url?'<img src="'.concat(a.logo_url,'" style="width: 80px; height: 80px; object-fit: contain;" />'):"",'\n                <h1 style="margin: 10px 0 5px; font-size: 24px;">').concat((null===a||void 0===a?void 0:a.name)||"SCHOOL NAME",'</h1>\n                <p style="margin: 0; font-size: 12px;">').concat((null===a||void 0===a?void 0:a.address)||"",'</p>\n                <h2 style="margin: 20px 0 0; font-size: 20px; text-decoration: underline;">BONAFIDE CERTIFICATE</h2>\n                <p style="margin: 5px 0; font-size: 14px;">\u0935\u093e\u0938\u094d\u0924\u0935\u093f\u0915 \u091b\u093e\u0924\u094d\u0930 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930</p>\n              </div>\n              \n              <p style="font-size: 14px; margin-bottom: 10px; text-align: right;"><b>Date:</b> ').concat(n,'</p>\n              <p style="font-size: 14px; margin-bottom: 10px;"><b>Certificate No.:</b> BF-').concat((new Date).getFullYear(),"-").concat(Math.floor(9999*Math.random()).toString().padStart(4,"0"),'</p>\n              \n              <p style="font-size: 15px; line-height: 2.2; text-align: justify; margin-top: 30px;">\n                This is to certify that <b>').concat(t.name,"</b>, Son/Daughter of <b>").concat(t.father_name||"Mr. _______","</b>, \n                is a bonafide student of this school bearing Admission No. <b>").concat(t.admission_no||t.student_id,'</b>.\n              </p>\n              \n              <p style="font-size: 15px; line-height: 2.2; text-align: justify; margin-top: 20px;">\n                He/She is currently studying in Class <b>').concat((null===r||void 0===r?void 0:r.name)||"-","</b> for the academic session \n                <b>").concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1,'</b>.\n              </p>\n              \n              <p style="font-size: 15px; line-height: 2.2; text-align: justify; margin-top: 20px;">\n                His/Her date of birth as per our records is <b>').concat(t.dob?new Date(t.dob).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):"-",'</b>.\n              </p>\n              \n              <p style="font-size: 15px; line-height: 2.2; text-align: justify; margin-top: 20px;">\n                This certificate is issued on his/her request for the purpose of <b>_________________________</b>.\n              </p>\n              \n              <div style="display: flex; justify-content: flex-end; margin-top: 60px;">\n                <div style="text-align: center;">\n                  <div style="border-top: 1px solid #000; width: 180px; margin-top: 40px;"></div>\n                  <p style="margin: 5px 0; font-weight: bold;">Principal</p>\n                  <p style="margin: 0; font-size: 12px;">').concat((null===a||void 0===a?void 0:a.name)||"","</p>\n                </div>\n              </div>\n            </div>\n          ")};default:return null}},I=(null===(e=$0[S])||void 0===e?void 0:e.icon)||cY;return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"certificate-generator",children:[(0,qr.jsx)("div",{className:"flex items-center justify-between",children:(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-8 h-8 text-purple-600"}),"Certificate Generator"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"TC, Character, Bonafide Certificates"})]})}),(0,qr.jsxs)(wc,{value:S,onValueChange:_,className:"w-full",children:[(0,qr.jsx)(Sc,{className:"grid w-full grid-cols-3 max-w-lg",children:Object.entries($0).map(e=>{let[t,a]=e;const s=a.icon;return(0,qr.jsxs)(_c,{value:t,className:"gap-2",children:[(0,qr.jsx)(s,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"hidden sm:inline",children:a.name})]},t)})}),(0,qr.jsxs)("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,qr.jsxs)(Qc,{className:"lg:col-span-1",children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-lg flex items-center gap-2",children:[(0,qr.jsx)(eH,{className:"w-5 h-5"}),"Select Student"]})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(ZU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,qr.jsx)(Rl,{placeholder:"Search student...",value:v,onChange:e=>b(e.target.value),className:"pl-9"})]}),(0,qr.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm",children:[(0,qr.jsx)("option",{value:"",children:"All Classes"}),m.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,qr.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2",children:p?(0,qr.jsx)("div",{className:"flex justify-center py-8",children:(0,qr.jsx)(Bc,{className:"w-6 h-6 animate-spin text-purple-600"})}):T.length>0?T.map(e=>{var t,a;return(0,qr.jsx)("div",{onClick:()=>w(e),className:"p-3 rounded-lg border cursor-pointer transition-all ".concat((null===N||void 0===N?void 0:N.id)===e.id?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-200"),children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:null===(t=e.name)||void 0===t?void 0:t.charAt(0)}),(0,qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,qr.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,qr.jsxs)("p",{className:"text-xs text-slate-500",children:[e.student_id," \u2022 ",null===(a=m.find(t=>t.id===e.class_id))||void 0===a?void 0:a.name]})]}),(null===N||void 0===N?void 0:N.id)===e.id&&(0,qr.jsx)(Km,{className:"w-5 h-5 text-purple-600"})]})},e.id)}):(0,qr.jsx)("p",{className:"text-center text-slate-500 py-8",children:"No students found"})})]})]}),(0,qr.jsxs)(Qc,{className:"lg:col-span-2",children:[(0,qr.jsxs)(Xc,{children:[(0,qr.jsxs)(Zc,{className:"flex items-center gap-2",children:[(0,qr.jsx)(I,{className:"w-5 h-5 text-purple-600"}),null===(t=$0[S])||void 0===t?void 0:t.name]}),(0,qr.jsx)(ed,{children:null===(a=$0[S])||void 0===a?void 0:a.name_hi})]}),(0,qr.jsx)(td,{children:N?(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,qr.jsx)("h3",{className:"font-semibold mb-2",children:"Selected Student"}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Name:"})," ",N.name]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"ID:"})," ",N.student_id]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Father:"})," ",N.father_name||"-"]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("span",{className:"text-slate-500",children:"Class:"})," ",null===(n=m.find(e=>e.id===N.class_id))||void 0===n?void 0:n.name]})]})]}),"tc"===S&&(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"TC Number"}),(0,qr.jsx)(Rl,{value:P.tc_number,onChange:e=>O(t=>u(u({},t),{},{tc_number:e.target.value}))})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Issue Date"}),(0,qr.jsx)(Rl,{type:"date",value:P.issue_date,onChange:e=>O(t=>u(u({},t),{},{issue_date:e.target.value}))})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Leaving Date"}),(0,qr.jsx)(Rl,{type:"date",value:P.leaving_date,onChange:e=>O(t=>u(u({},t),{},{leaving_date:e.target.value}))})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Reason for Leaving"}),(0,qr.jsxs)("select",{value:P.reason,onChange:e=>O(t=>u(u({},t),{},{reason:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"On parent request",children:"On parent request"}),(0,qr.jsx)("option",{value:"Transfer to another school",children:"Transfer to another school"}),(0,qr.jsx)("option",{value:"Completed education",children:"Completed education"}),(0,qr.jsx)("option",{value:"Family relocation",children:"Family relocation"}),(0,qr.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Conduct"}),(0,qr.jsxs)("select",{value:P.conduct,onChange:e=>O(t=>u(u({},t),{},{conduct:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"Excellent",children:"Excellent"}),(0,qr.jsx)("option",{value:"Very Good",children:"Very Good"}),(0,qr.jsx)("option",{value:"Good",children:"Good"}),(0,qr.jsx)("option",{value:"Satisfactory",children:"Satisfactory"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Attendance"}),(0,qr.jsxs)("select",{value:P.attendance,onChange:e=>O(t=>u(u({},t),{},{attendance:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"Regular",children:"Regular"}),(0,qr.jsx)("option",{value:"Irregular",children:"Irregular"})]})]}),(0,qr.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,qr.jsx)(ql,{children:"Remarks"}),(0,qr.jsx)(Rl,{value:P.remarks,onChange:e=>O(t=>u(u({},t),{},{remarks:e.target.value})),placeholder:"Any additional remarks..."})]})]}),(0,qr.jsx)("div",{className:"flex gap-3 pt-4",children:(0,qr.jsxs)(Dl,{onClick:async()=>{if(N){g(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(J0,"/certificates"),{school_id:r,student_id:N.id,type:S,data:"tc"===S?P:{},generated_by:null===i||void 0===i?void 0:i.id},{headers:{Authorization:"Bearer ".concat(e)}});const t=D(S,N,c,P);A(t),C(!0),Qt.success("Certificate generated!")}catch(e){Qt.error("Failed to generate certificate")}finally{g(!1)}}else Qt.error("\u0915\u0943\u092a\u092f\u093e student select \u0915\u0930\u0947\u0902")},disabled:f,className:"bg-purple-600 hover:bg-purple-700 gap-2",children:[f?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):(0,qr.jsx)(cY,{className:"w-4 h-4"}),"Generate Certificate"]})})]}):(0,qr.jsxs)("div",{className:"text-center py-10 text-slate-500",children:[(0,qr.jsx)(eH,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,qr.jsx)("p",{children:"Select a student to generate certificate"})]})})]})]})]}),(0,qr.jsx)(Im,{open:k,onOpenChange:C,children:(0,qr.jsxs)(zm,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(cY,{className:"w-5 h-5 text-purple-600"}),null===E||void 0===E?void 0:E.title]})}),E&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("div",{className:"border rounded-lg overflow-hidden bg-white",dangerouslySetInnerHTML:{__html:E.content}}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>C(!1),children:"Close"}),(0,qr.jsxs)(Dl,{onClick:()=>{if(!E)return;const e=window.open("","_blank");e.document.write("\n      <html>\n      <head>\n        <title>".concat(E.title,"</title>\n        <style>\n          @media print {\n            body { -webkit-print-color-adjust: exact; margin: 0; padding: 0; }\n            @page { size: A4; margin: 10mm; }\n          }\n        </style>\n      </head>\n      <body>\n        ").concat(E.content,"\n        <script>window.onload = () => { window.print(); }<\/script>\n      </body>\n      </html>\n    ")),e.document.close()},className:"bg-purple-600 hover:bg-purple-700 gap-2",children:[(0,qr.jsx)(YU,{className:"w-4 h-4"}),"Print Certificate"]})]})]})]})})]})}const Z0="".concat("","/api"),e1=e=>e>=91?{grade:"A1",points:10,remark:"Outstanding"}:e>=81?{grade:"A2",points:9,remark:"Excellent"}:e>=71?{grade:"B1",points:8,remark:"Very Good"}:e>=61?{grade:"B2",points:7,remark:"Good"}:e>=51?{grade:"C1",points:6,remark:"Above Average"}:e>=41?{grade:"C2",points:5,remark:"Average"}:e>=33?{grade:"D",points:4,remark:"Below Average"}:{grade:"E",points:0,remark:"Needs Improvement"},t1=[{id:"hindi",name:"Hindi",name_hi:"\u0939\u093f\u0902\u0926\u0940",max_marks:100},{id:"english",name:"English",name_hi:"\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940",max_marks:100},{id:"math",name:"Mathematics",name_hi:"\u0917\u0923\u093f\u0924",max_marks:100},{id:"science",name:"Science",name_hi:"\u0935\u093f\u091c\u094d\u091e\u093e\u0928",max_marks:100},{id:"sst",name:"Social Science",name_hi:"\u0938\u093e\u092e\u093e\u091c\u093f\u0915 \u0935\u093f\u091c\u094d\u091e\u093e\u0928",max_marks:100},{id:"computer",name:"Computer",name_hi:"\u0915\u0902\u092a\u094d\u092f\u0942\u091f\u0930",max_marks:50},{id:"gk",name:"General Knowledge",name_hi:"\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091c\u094d\u091e\u093e\u0928",max_marks:50},{id:"drawing",name:"Drawing",name_hi:"\u091a\u093f\u0924\u094d\u0930\u0915\u0932\u093e",max_marks:50}],a1=[{id:"unit1",name:"Unit Test 1",name_hi:"\u0907\u0915\u093e\u0908 \u092a\u0930\u0940\u0915\u094d\u0937\u093e 1",max_marks:20},{id:"unit2",name:"Unit Test 2",name_hi:"\u0907\u0915\u093e\u0908 \u092a\u0930\u0940\u0915\u094d\u0937\u093e 2",max_marks:20},{id:"half_yearly",name:"Half Yearly",name_hi:"\u0905\u0930\u094d\u0927\u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u093e",max_marks:80},{id:"unit3",name:"Unit Test 3",name_hi:"\u0907\u0915\u093e\u0908 \u092a\u0930\u0940\u0915\u094d\u0937\u093e 3",max_marks:20},{id:"unit4",name:"Unit Test 4",name_hi:"\u0907\u0915\u093e\u0908 \u092a\u0930\u0940\u0915\u094d\u0937\u093e 4",max_marks:20},{id:"annual",name:"Annual Exam",name_hi:"\u0935\u093e\u0930\u094d\u0937\u093f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u093e",max_marks:80}];function s1(){var e;const{schoolId:t,user:a}=Kr(),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)(t1),[d,m]=(0,s.useState)([]),[h,p]=(0,s.useState)({}),[x,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(!0),[b,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)("marks"),[w,S]=(0,s.useState)(""),[_,k]=(0,s.useState)(""),[C,E]=(0,s.useState)(null),[A,P]=(0,s.useState)(!1),[O,M]=(0,s.useState)(!1),[T,D]=(0,s.useState)({name:"",type:"unit1",class_id:"",start_date:"",end_date:"",max_marks:20}),[I,R]=(0,s.useState)({});(0,s.useEffect)(()=>{t&&L()},[t]),(0,s.useEffect)(()=>{w&&_&&(z(),F())},[w,_]);const L=async()=>{v(!0);try{var e;const a=localStorage.getItem("token"),s={Authorization:"Bearer ".concat(a)},[n,i,l]=await Promise.all([Hr.get("".concat(Z0,"/classes?school_id=").concat(t),{headers:s}),Hr.get("".concat(Z0,"/exam-schedules?school_id=").concat(t),{headers:s}).catch(()=>({data:[]})),Hr.get("".concat(Z0,"/schools/").concat(t),{headers:s})]);r(n.data||[]),m(i.data||[]),f(l.data),(null===(e=n.data)||void 0===e?void 0:e.length)>0&&S(n.data[0].id)}catch(a){console.error("Error fetching data:",a)}finally{v(!1)}},F=async()=>{try{const e=localStorage.getItem("token"),a=await Hr.get("".concat(Z0,"/students?school_id=").concat(t,"&class_id=").concat(w,"&status=active"),{headers:{Authorization:"Bearer ".concat(e)}});l(a.data||[])}catch(e){console.error("Error fetching students:",e)}},z=async()=>{try{const e=localStorage.getItem("token"),a=await Hr.get("".concat(Z0,"/marks?school_id=").concat(t,"&class_id=").concat(w,"&exam_id=").concat(_),{headers:{Authorization:"Bearer ".concat(e)}}).catch(()=>({data:{}})),s={};(a.data||[]).forEach(e=>{s[e.student_id]||(s[e.student_id]={}),s[e.student_id][e.subject_id]=e.marks}),p(s),R(s)}catch(e){console.error("Error fetching marks:",e)}},B=e=>{const t=h[e]||{};let a=0,s=0;o.forEach(e=>{const n=parseFloat(t[e.id])||0;a+=n,s+=e.max_marks});const n=s>0?a/s*100:0,r=e1(n);return u(u({totalObtained:a,totalMax:s,percentage:n.toFixed(2)},r),{},{passed:n>=33})};return(0,qr.jsxs)("div",{className:"space-y-6","data-testid":"exam-report-card",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsxs)("h1",{className:"text-3xl font-bold font-heading text-slate-900 flex items-center gap-2",children:[(0,qr.jsx)(Eh,{className:"w-8 h-8 text-blue-600"}),"Exam & Report Card"]}),(0,qr.jsx)("p",{className:"text-slate-500 mt-1",children:"Marks entry, grading & report card generation"})]}),(0,qr.jsxs)(Dl,{onClick:()=>M(!0),className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(xY,{className:"w-4 h-4"}),"Create Exam"]})]}),(0,qr.jsxs)(wc,{value:j,onValueChange:N,className:"w-full",children:[(0,qr.jsxs)(Sc,{className:"grid w-full grid-cols-3 max-w-lg",children:[(0,qr.jsxs)(_c,{value:"marks",className:"gap-2",children:[(0,qr.jsx)(sH,{className:"w-4 h-4"}),"Marks Entry"]}),(0,qr.jsxs)(_c,{value:"results",className:"gap-2",children:[(0,qr.jsx)(oh,{className:"w-4 h-4"}),"Results"]}),(0,qr.jsxs)(_c,{value:"reports",className:"gap-2",children:[(0,qr.jsx)(cY,{className:"w-4 h-4"}),"Report Cards"]})]}),(0,qr.jsx)(kc,{value:"marks",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,qr.jsx)(Zc,{children:"Enter Marks"}),(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Class"}),n.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,qr.jsxs)("select",{value:_,onChange:e=>k(e.target.value),className:"px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Exam"}),a1.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(w&&_){y(!0);try{const e=localStorage.getItem("token"),s=[];Object.entries(I).forEach(e=>{let[t,a]=e;Object.entries(a).forEach(e=>{let[a,n]=e;void 0!==n&&""!==n&&s.push({student_id:t,subject_id:a,marks:parseFloat(n)||0})})}),await Hr.post("".concat(Z0,"/marks/bulk"),{school_id:t,class_id:w,exam_id:_,marks:s,entered_by:null===a||void 0===a?void 0:a.id},{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Marks saved successfully!"),p(I)}catch(e){Qt.error("Failed to save marks")}finally{y(!1)}}else Qt.error("Please select class and exam")},disabled:b||!w||!_,className:"gap-2 bg-green-600 hover:bg-green-700",children:[b?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin"}):(0,qr.jsx)(bY,{className:"w-4 h-4"}),"Save Marks"]})]})]})}),(0,qr.jsx)(td,{children:g?(0,qr.jsx)("div",{className:"flex justify-center py-10",children:(0,qr.jsx)(Bc,{className:"w-8 h-8 animate-spin text-blue-600"})}):w&&_?(0,qr.jsx)("div",{className:"overflow-x-auto",children:(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{className:"w-12",children:"S.No"}),(0,qr.jsx)(GU,{children:"Student Name"}),(0,qr.jsx)(GU,{children:"Roll No"}),o.map(e=>(0,qr.jsxs)(GU,{className:"text-center min-w-[80px]",children:[(0,qr.jsx)("div",{children:e.name}),(0,qr.jsxs)("div",{className:"text-xs font-normal text-slate-500",children:["Max: ",e.max_marks]})]},e.id)),(0,qr.jsx)(GU,{className:"text-center",children:"Total"})]})}),(0,qr.jsx)(VU,{children:i.map((e,t)=>{const a=I[e.id]||{},s=o.reduce((e,t)=>e+(parseFloat(a[t.id])||0),0);return(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(KU,{children:t+1}),(0,qr.jsx)(KU,{className:"font-medium",children:e.name}),(0,qr.jsx)(KU,{children:e.roll_no||e.student_id}),o.map(t=>(0,qr.jsx)(KU,{className:"p-1",children:(0,qr.jsx)(Rl,{type:"number",min:"0",max:t.max_marks,value:a[t.id]||"",onChange:a=>((e,t,a)=>{R(s=>u(u({},s),{},{[e]:u(u({},s[e]),{},{[t]:a})}))})(e.id,t.id,a.target.value),className:"w-16 text-center",placeholder:"-"})},t.id)),(0,qr.jsx)(KU,{className:"text-center font-semibold",children:s})]},e.id)})})]})}):(0,qr.jsx)("p",{className:"text-center text-slate-500 py-10",children:"Select class and exam to enter marks"})})]})}),(0,qr.jsx)(kc,{value:"results",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(Zc,{children:"Class Results"}),(0,qr.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Class"}),n.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,qr.jsx)(td,{children:w?(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Rank"}),(0,qr.jsx)(GU,{children:"Student Name"}),(0,qr.jsx)(GU,{children:"Roll No"}),(0,qr.jsx)(GU,{className:"text-center",children:"Total"}),(0,qr.jsx)(GU,{className:"text-center",children:"Percentage"}),(0,qr.jsx)(GU,{className:"text-center",children:"Grade"}),(0,qr.jsx)(GU,{className:"text-center",children:"Result"})]})}),(0,qr.jsx)(VU,{children:i.map(e=>u(u({},e),{},{result:B(e.id)})).sort((e,t)=>parseFloat(t.result.percentage)-parseFloat(e.result.percentage)).map((e,t)=>(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(KU,{className:"font-bold",children:t+1}),(0,qr.jsx)(KU,{className:"font-medium",children:e.name}),(0,qr.jsx)(KU,{children:e.roll_no||e.student_id}),(0,qr.jsxs)(KU,{className:"text-center",children:[e.result.totalObtained,"/",e.result.totalMax]}),(0,qr.jsxs)(KU,{className:"text-center",children:[e.result.percentage,"%"]}),(0,qr.jsx)(KU,{className:"text-center",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded text-sm font-medium ".concat(e.result.grade.startsWith("A")?"bg-green-100 text-green-700":e.result.grade.startsWith("B")?"bg-blue-100 text-blue-700":e.result.grade.startsWith("C")?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.result.grade})}),(0,qr.jsx)(KU,{className:"text-center",children:(0,qr.jsx)("span",{className:"px-2 py-1 rounded text-sm font-medium ".concat(e.result.passed?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.result.passed?"PASS":"FAIL"})})]},e.id))})]}):(0,qr.jsx)("p",{className:"text-center text-slate-500 py-10",children:"Select a class to view results"})})]})}),(0,qr.jsx)(kc,{value:"reports",className:"mt-4",children:(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsx)(Zc,{children:"Generate Report Cards"}),(0,qr.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Class"}),n.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,qr.jsx)(td,{children:w?(0,qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>{var t;const a=B(e.id);return(0,qr.jsxs)("div",{className:"p-4 border rounded-lg hover:border-blue-300 transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,qr.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-lg",children:null===(t=e.name)||void 0===t?void 0:t.charAt(0)}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-semibold",children:e.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:e.roll_no||e.student_id})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center text-sm mb-3",children:[(0,qr.jsxs)("div",{className:"bg-slate-50 rounded p-2",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Total"}),(0,qr.jsx)("p",{className:"font-semibold",children:a.totalObtained})]}),(0,qr.jsxs)("div",{className:"bg-slate-50 rounded p-2",children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"%"}),(0,qr.jsxs)("p",{className:"font-semibold",children:[a.percentage,"%"]})]}),(0,qr.jsxs)("div",{className:"rounded p-2 ".concat(a.passed?"bg-green-50":"bg-red-50"),children:[(0,qr.jsx)("p",{className:"text-slate-500",children:"Grade"}),(0,qr.jsx)("p",{className:"font-semibold ".concat(a.passed?"text-green-700":"text-red-700"),children:a.grade})]})]}),(0,qr.jsxs)(Dl,{onClick:()=>(e=>{E(e),P(!0)})(e),variant:"outline",className:"w-full gap-2",children:[(0,qr.jsx)(YU,{className:"w-4 h-4"}),"View & Print"]})]},e.id)})}):(0,qr.jsx)("p",{className:"text-center text-slate-500 py-10",children:"Select a class to generate report cards"})})]})})]}),(0,qr.jsx)(Im,{open:O,onOpenChange:M,children:(0,qr.jsxs)(zm,{children:[(0,qr.jsxs)(Bm,{children:[(0,qr.jsx)(Hm,{children:"Create New Exam"}),(0,qr.jsx)(qm,{children:"Set up a new examination"})]}),(0,qr.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Exam Name *"}),(0,qr.jsx)(Rl,{value:T.name,onChange:e=>D(t=>u(u({},t),{},{name:e.target.value})),placeholder:"e.g., Half Yearly Exam 2025"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Exam Type"}),(0,qr.jsx)("select",{value:T.type,onChange:e=>{const t=a1.find(t=>t.id===e.target.value);D(a=>u(u({},a),{},{type:e.target.value,max_marks:(null===t||void 0===t?void 0:t.max_marks)||20}))},className:"w-full px-3 py-2 border rounded-lg",children:a1.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Class *"}),(0,qr.jsxs)("select",{value:T.class_id,onChange:e=>D(t=>u(u({},t),{},{class_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg",children:[(0,qr.jsx)("option",{value:"",children:"Select Class"}),n.map(e=>(0,qr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"Start Date"}),(0,qr.jsx)(Rl,{type:"date",value:T.start_date,onChange:e=>D(t=>u(u({},t),{},{start_date:e.target.value}))})]}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsx)(ql,{children:"End Date"}),(0,qr.jsx)(Rl,{type:"date",value:T.end_date,onChange:e=>D(t=>u(u({},t),{},{end_date:e.target.value}))})]})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(T.name&&T.class_id){y(!0);try{const e=localStorage.getItem("token");await Hr.post("".concat(Z0,"/exam-schedule"),u(u({},T),{},{school_id:t,created_by:null===a||void 0===a?void 0:a.id}),{headers:{Authorization:"Bearer ".concat(e)}}),Qt.success("Exam created!"),M(!1),L()}catch(e){Qt.error("Failed to create exam")}finally{y(!1)}}else Qt.error("Please fill required fields")},disabled:b,className:"bg-blue-600 hover:bg-blue-700",children:[b?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(xY,{className:"w-4 h-4 mr-2"}),"Create Exam"]})]})]})]})}),(0,qr.jsx)(Im,{open:A,onOpenChange:P,children:(0,qr.jsxs)(zm,{className:"max-w-3xl",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsx)(Hm,{children:"Report Card Preview"})}),C&&(0,qr.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,qr.jsxs)("div",{className:"text-center border-b pb-4 mb-4",children:[(null===x||void 0===x?void 0:x.logo_url)&&(0,qr.jsx)("img",{src:x.logo_url,alt:"",className:"w-16 h-16 mx-auto mb-2 object-contain"}),(0,qr.jsx)("h2",{className:"text-xl font-bold",children:null===x||void 0===x?void 0:x.name}),(0,qr.jsx)("p",{className:"text-sm text-slate-500",children:null===x||void 0===x?void 0:x.address}),(0,qr.jsx)("h3",{className:"text-lg font-semibold mt-2 underline",children:"Progress Report"})]}),(0,qr.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("b",{children:"Name:"})," ",C.name]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("b",{children:"Roll No:"})," ",C.roll_no||C.student_id]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("b",{children:"Father:"})," ",C.father_name]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("b",{children:"Class:"})," ",null===(e=n.find(e=>e.id===C.class_id))||void 0===e?void 0:e.name]})]}),(0,qr.jsxs)(HU,{children:[(0,qr.jsx)(qU,{children:(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(GU,{children:"Subject"}),(0,qr.jsx)(GU,{className:"text-center",children:"Max"}),(0,qr.jsx)(GU,{className:"text-center",children:"Obtained"}),(0,qr.jsx)(GU,{className:"text-center",children:"Grade"})]})}),(0,qr.jsx)(VU,{children:o.map(e=>{var t;const a=parseFloat(null===(t=h[C.id])||void 0===t?void 0:t[e.id])||0,s=a/e.max_marks*100;return(0,qr.jsxs)(WU,{children:[(0,qr.jsx)(KU,{children:e.name}),(0,qr.jsx)(KU,{className:"text-center",children:e.max_marks}),(0,qr.jsx)(KU,{className:"text-center",children:a}),(0,qr.jsx)(KU,{className:"text-center",children:e1(s).grade})]},e.id)})})]}),(0,qr.jsxs)("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg text-center",children:[(0,qr.jsxs)("p",{children:["Percentage: ",(0,qr.jsxs)("b",{children:[B(C.id).percentage,"%"]})]}),(0,qr.jsxs)("p",{children:["Grade: ",(0,qr.jsx)("b",{children:B(C.id).grade})]}),(0,qr.jsx)("p",{className:"font-bold ".concat(B(C.id).passed?"text-green-600":"text-red-600"),children:B(C.id).passed?"PASSED":"FAILED"})]}),(0,qr.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,qr.jsx)(Dl,{variant:"outline",onClick:()=>P(!1),children:"Close"}),(0,qr.jsxs)(Dl,{onClick:()=>{if(!C)return;const e=B(C.id),t=h[C.id]||{},a=n.find(e=>e.id===C.class_id),s=window.open("","_blank");s.document.write("\n      <html>\n      <head>\n        <title>Report Card - ".concat(C.name,"</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; }\n          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 20px; }\n          .header img { width: 70px; height: 70px; }\n          .header h1 { margin: 10px 0 5px; font-size: 22px; }\n          .header h2 { margin: 10px 0; font-size: 16px; text-decoration: underline; }\n          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; font-size: 13px; }\n          .info-grid div { padding: 5px; }\n          table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n          th, td { border: 1px solid #333; padding: 8px; text-align: center; font-size: 12px; }\n          th { background: #f5f5f5; }\n          .result-box { background: #f0f0f0; padding: 15px; text-align: center; margin: 20px 0; }\n          .result-box h3 { margin: 0 0 10px; }\n          .grade { font-size: 24px; font-weight: bold; color: ").concat(e.passed?"#22c55e":"#ef4444",'; }\n          .signatures { display: flex; justify-content: space-between; margin-top: 50px; }\n          .signatures div { text-align: center; }\n          .signatures .line { border-top: 1px solid #000; width: 120px; margin-top: 40px; }\n          @media print { body { -webkit-print-color-adjust: exact; } }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          ').concat(null!==x&&void 0!==x&&x.logo_url?'<img src="'.concat(x.logo_url,'" />'):"","\n          <h1>").concat((null===x||void 0===x?void 0:x.name)||"School Name",'</h1>\n          <p style="margin: 0; font-size: 11px;">').concat((null===x||void 0===x?void 0:x.address)||"","</p>\n          <h2>PROGRESS REPORT / \u092a\u094d\u0930\u0917\u0924\u093f \u092a\u0924\u094d\u0930</h2>\n          <p>Academic Year: ").concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1,'</p>\n        </div>\n        \n        <div class="info-grid">\n          <div><b>Student Name:</b> ').concat(C.name,"</div>\n          <div><b>Roll No:</b> ").concat(C.roll_no||C.student_id,"</div>\n          <div><b>Father's Name:</b> ").concat(C.father_name||"-","</div>\n          <div><b>Class:</b> ").concat((null===a||void 0===a?void 0:a.name)||"-","</div>\n          <div><b>Date of Birth:</b> ").concat(C.dob?new Date(C.dob).toLocaleDateString("en-IN"):"-","</div>\n          <div><b>Admission No:</b> ").concat(C.admission_no||C.student_id,"</div>\n        </div>\n        \n        <table>\n          <thead>\n            <tr>\n              <th>S.No.</th>\n              <th>Subject</th>\n              <th>Max Marks</th>\n              <th>Marks Obtained</th>\n              <th>Grade</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(o.map((e,a)=>{const s=parseFloat(t[e.id])||0,n=s/e.max_marks*100,r=e1(n);return"\n                <tr>\n                  <td>".concat(a+1,'</td>\n                  <td style="text-align: left;">').concat(e.name," (").concat(e.name_hi,")</td>\n                  <td>").concat(e.max_marks,"</td>\n                  <td>").concat(s,"</td>\n                  <td>").concat(r.grade,"</td>\n                </tr>\n              ")}).join(""),'\n            <tr style="font-weight: bold; background: #f5f5f5;">\n              <td colspan="2">Total</td>\n              <td>').concat(o.reduce((e,t)=>e+t.max_marks,0),"</td>\n              <td>").concat(e.totalObtained,"</td>\n              <td>").concat(e.grade,'</td>\n            </tr>\n          </tbody>\n        </table>\n        \n        <div class="result-box">\n          <h3>Overall Result</h3>\n          <p>Percentage: <b>').concat(e.percentage,'%</b></p>\n          <p class="grade">Grade: ').concat(e.grade," (").concat(e.remark,')</p>\n          <p>Result: <b style="color: ').concat(e.passed?"#22c55e":"#ef4444",';">').concat(e.passed?"PASSED":"FAILED",'</b></p>\n        </div>\n        \n        <div class="signatures">\n          <div>\n            <div class="line"></div>\n            <p>Class Teacher</p>\n          </div>\n          <div>\n            <div class="line"></div>\n            <p>Parent/Guardian</p>\n          </div>\n          <div>\n            <div class="line"></div>\n            <p>Principal</p>\n          </div>\n        </div>\n        \n        <script>window.onload = () => window.print();<\/script>\n      </body>\n      </html>\n    ')),s.document.close()},className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,qr.jsx)(YU,{className:"w-4 h-4"}),"Print"]})]})]})]})})]})}const n1=Dc("settings-2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),r1=Dc("mouse",[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]]),i1=Dc("circle-user-round",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),l1=Dc("phone-off",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),o1="".concat("","/api"),c1={};function d1(){var e;const{user:t,schoolId:a}=Kr(),[n,r]=(0,s.useState)("idle"),[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(!0),[m,h]=(0,s.useState)(null),[p,x]=(0,s.useState)("none"),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!0),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[E,A]=(0,s.useState)(!1),P=(0,s.useRef)(null),O=(0,s.useRef)(null),M=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e;y&&(null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))},[i,y]),(0,s.useEffect)(()=>{T(),D(),I("tino","\ud83c\udf93 \u0928\u092e\u0938\u094d\u0924\u0947! \u092e\u0948\u0902 Tino \u0939\u0942\u0902\u0964 \u092c\u093e\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f mic button \u0926\u092c\u093e\u090f\u0902 \u092f\u093e Meeting Mode ON \u0915\u0930\u0947\u0902!")},[]),(0,s.useEffect)(()=>{if(v&&"idle"===n){const e=setTimeout(()=>{v&&"idle"===n&&B()},1500);return()=>clearTimeout(e)}},[v,n]);const T=async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat(o1,"/tino-ai/quick-stats/").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});h(t.data)}catch(J1){console.error("Stats error:",J1)}},D=async()=>{try{const e=await Hr.get("".concat(o1,"/did-avatar/status"));_(e.data.connected)}catch(J1){_(!1)}},I=(e,t)=>{l(a=>[...a,{id:Date.now(),role:e,content:t,time:new Date}])},R=e=>{const t=(e.match(/[\u0900-\u097F]/g)||[]).length,a=e.replace(/\s/g,"").length;return 0===a?"en":t/a>.3?"hi":"en"},L=async e=>{if(d)r("idle");else{if(N&&S){const t=await(async e=>{if(!N||!S)return!1;try{A(!0);const t=await Hr.post("".concat(o1,"/did-avatar/create-clip"),{text:e.substring(0,300),avatar_type:p,language:R(e)});return!(!t.data.success||!t.data.video_url)&&(C(t.data.video_url),!0)}catch(J1){return console.error("D-ID error:",J1),!1}finally{A(!1)}})(e);if(t)return void r("speaking")}try{r("speaking");const t=R(e),a="".concat("female"===p?"female":"male","_").concat("en"===t?"english":"hindi"),s=await Hr.post("".concat(o1,"/tino-voice/tts"),{text:e.replace(/(?:\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|\uD83E[\uDC00-\uDDFF])/g,"").replace(/\*\*/g,"").substring(0,400),voice_type:a});if(s.data.success&&s.data.audio_base64){const e=new Audio("data:audio/mpeg;base64,".concat(s.data.audio_base64));e.onended=()=>r("idle"),await e.play()}else F(e)}catch(J1){F(e)}}},F=e=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e.replace(/(?:\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|\uD83E[\uDC00-\uDDFF])/g,"").replace(/\*\*/g,""));t.lang="hi"===R(e)?"hi-IN":"en-US",t.rate=.9,t.onend=()=>r("idle"),window.speechSynthesis.speak(t)}else r("idle")},z=async e=>{if(e.trim()){I("user",e),c(""),r("thinking");try{const s=localStorage.getItem("token"),n=(await Hr.post("".concat(o1,"/tino-ai/chat"),{message:e,school_id:a,user_id:null===t||void 0===t?void 0:t.id,language:R(e)},{headers:{Authorization:"Bearer ".concat(s)}})).data.response;I("tino",n),await L(n)}catch(J1){console.error("Chat error:",J1),r("idle"),I("tino","\u092e\u093e\u092b \u0915\u0930\u0947\u0902, error \u0939\u094b \u0917\u092f\u093e\u0964 \u0915\u0943\u092a\u092f\u093e \u0926\u094b\u092c\u093e\u0930\u093e try \u0915\u0930\u0947\u0902\u0964")}}},B=(0,s.useCallback)(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void Qt.error("Voice not supported");const e=window.SpeechRecognition||window.webkitSpeechRecognition;P.current=new e,P.current.lang="hi-IN",P.current.continuous=v,P.current.interimResults=!0,P.current.onstart=()=>r("listening"),P.current.onresult=e=>{const t=e.results,a=t[t.length-1],s=a[0].transcript;c(s),a.isFinal&&s.trim().length>2&&z(s)},P.current.onerror=()=>{v||r("idle")},P.current.onend=()=>{v||"listening"!==n||r("idle")},P.current.start()},[v,n]),U=()=>{var e;null===(e=P.current)||void 0===e||e.stop(),b(!1),r("idle")};return(0,qr.jsxs)("div",{className:"h-[calc(100vh-120px)] flex gap-4","data-testid":"tino-ai-center",children:[(0,qr.jsxs)("div",{className:"".concat(y?"flex-1":"w-full"," bg-gradient-to-br from-slate-900 via-blue-900/80 to-slate-900 rounded-2xl p-6 flex flex-col transition-all"),children:[(0,qr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("h1",{className:"text-xl font-bold text-white",children:"Tino AI"}),(0,qr.jsxs)(eJ,{className:"bg-blue-500/20 text-blue-300 border-blue-500/30 text-xs",children:[(0,qr.jsx)(hh,{className:"w-3 h-3 mr-1"}),N&&S?"D-ID + ElevenLabs":"ElevenLabs"]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsxs)(Dl,{variant:"ghost",size:"sm",onClick:()=>j(!y),className:"text-white/70 hover:text-white hover:bg-white/10",children:[y?(0,qr.jsx)(Uc,{className:"w-4 h-4"}):(0,qr.jsx)(Hc,{className:"w-4 h-4"}),(0,qr.jsxs)("span",{className:"ml-1 text-xs hidden sm:inline",children:[y?"Hide":"Show"," Chat"]})]}),(0,qr.jsx)(Dl,{variant:"ghost",size:"sm",onClick:()=>g(!f),className:"text-white/70 hover:text-white hover:bg-white/10",children:(0,qr.jsx)(n1,{className:"w-4 h-4"})})]})]}),f&&(0,qr.jsxs)("div",{className:"bg-slate-800/90 rounded-xl p-4 mb-4 space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-white/60 text-xs mb-2",children:"Avatar"}),(0,qr.jsx)("div",{className:"flex gap-2",children:[{id:"mouse",icon:r1,label:"Mouse"},{id:"male",icon:eH,label:"Male"},{id:"female",icon:i1,label:"Female"}].map(e=>(0,qr.jsxs)("button",{onClick:()=>x(e.id),className:"flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-all ".concat(p===e.id?"bg-blue-500 text-white":"bg-slate-700 text-white/60 hover:bg-slate-600"),children:[(0,qr.jsx)(e.icon,{className:"w-3 h-3 inline mr-1"}),e.label]},e.id))})]}),(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"text-white/80 text-sm",children:"Animated Avatar (D-ID)"}),(0,qr.jsx)("p",{className:"text-white/40 text-xs",children:S?"Lip-sync video enabled":"Not configured"})]}),(0,qr.jsx)(XJ,{checked:N,onCheckedChange:w,disabled:!S})]})]}),(0,qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)("div",{className:"absolute inset-0 rounded-full blur-3xl transition-all duration-300 ".concat("speaking"===n?"bg-blue-500/40 scale-110":"listening"===n?"bg-cyan-400/40 scale-105":"thinking"===n?"bg-indigo-500/30":v?"bg-green-400/30 animate-pulse":"bg-blue-400/20")}),k?(0,qr.jsx)("video",{ref:O,src:k,autoPlay:!0,onEnded:()=>{C(null),r("idle")},className:"relative w-72 h-auto rounded-2xl shadow-2xl",style:{filter:"drop-shadow(0 0 40px rgba(59, 130, 246, 0.5))"}}):(0,qr.jsx)("img",{src:c1[p],alt:"Tino",className:"relative w-72 h-auto object-contain drop-shadow-2xl transition-all duration-300 ".concat("speaking"===n?"scale-105":""," ").concat(E?"opacity-50":""),style:{filter:"speaking"===n?"drop-shadow(0 0 40px rgba(59, 130, 246, 0.5))":"drop-shadow(0 0 20px rgba(59, 130, 246, 0.3))"}}),E&&(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,qr.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"})}),"idle"!==n&&(0,qr.jsx)("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2",children:(0,qr.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full ".concat("listening"===n?"bg-cyan-500 text-white":"speaking"===n?"bg-blue-500 text-white":"bg-indigo-500 text-white"),children:"listening"===n?"\ud83c\udfa4 \u0938\u0941\u0928 \u0930\u0939\u093e \u0939\u0942\u0902...":"speaking"===n?"\ud83d\udde3\ufe0f \u092c\u094b\u0932 \u0930\u0939\u093e \u0939\u0942\u0902...":"\ud83e\udde0 \u0938\u094b\u091a \u0930\u0939\u093e \u0939\u0942\u0902..."})}),v&&"idle"===n&&(0,qr.jsx)("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2",children:(0,qr.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full bg-green-500 text-white animate-pulse",children:"\ud83c\udfa4 Meeting Mode - \u092c\u094b\u0932\u093f\u090f..."})})]})}),(0,qr.jsxs)("div",{className:"mt-4",children:[(0,qr.jsx)("div",{className:"flex items-center justify-center gap-3 mb-3",children:(0,qr.jsxs)(Dl,{onClick:()=>{v?(U(),Qt.info("Meeting Mode OFF")):(b(!0),B(),Qt.success("\ud83c\udfa4 Meeting Mode ON - \u092c\u094b\u0932\u0924\u0947 \u0930\u0939\u093f\u090f!"))},className:"rounded-full px-4 py-2 ".concat(v?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600"),children:[v?(0,qr.jsx)(l1,{className:"w-4 h-4 mr-1"}):(0,qr.jsx)(Gm,{className:"w-4 h-4 mr-1"}),(0,qr.jsx)("span",{className:"text-sm",children:v?"End Meeting":"Meeting Mode"})]})}),(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,qr.jsx)(Dl,{variant:d?"outline":"default",size:"sm",onClick:()=>u(!d),className:"rounded-full ".concat(d?"border-white/30 text-white":"bg-blue-500 hover:bg-blue-600"),children:d?(0,qr.jsx)(NZ,{className:"w-4 h-4"}):(0,qr.jsx)(SJ,{className:"w-4 h-4"})}),!v&&(0,qr.jsx)("button",{onClick:"listening"===n?U:B,disabled:"thinking"===n||"speaking"===n,className:"w-14 h-14 rounded-full transition-all ".concat("listening"===n?"bg-cyan-500 scale-110 shadow-lg shadow-cyan-500/40":"bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-500/30"," ").concat("thinking"===n||"speaking"===n?"opacity-50":""),children:"listening"===n?(0,qr.jsx)(iJ,{className:"w-5 h-5 text-white mx-auto"}):(0,qr.jsx)(lJ,{className:"w-5 h-5 text-white mx-auto"})}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",onClick:T,className:"rounded-full border-white/30 text-white hover:bg-white/10",children:(0,qr.jsx)(lH,{className:"w-4 h-4"})})]})]}),m&&(0,qr.jsxs)("div",{className:"flex justify-center gap-3 mt-4",children:[(0,qr.jsxs)("div",{className:"bg-white/10 rounded-lg px-3 py-1.5 text-center text-white",children:[(0,qr.jsx)("p",{className:"text-lg font-bold",children:m.total_students||0}),(0,qr.jsx)("p",{className:"text-[9px] text-white/60",children:"Students"})]}),(0,qr.jsxs)("div",{className:"bg-white/10 rounded-lg px-3 py-1.5 text-center text-white",children:[(0,qr.jsx)("p",{className:"text-lg font-bold",children:(null===(e=m.today_attendance)||void 0===e?void 0:e.present)||0}),(0,qr.jsx)("p",{className:"text-[9px] text-white/60",children:"Present"})]}),(0,qr.jsxs)("div",{className:"bg-white/10 rounded-lg px-3 py-1.5 text-center text-white",children:[(0,qr.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",((m.today_fee_collection||0)/1e3).toFixed(0),"K"]}),(0,qr.jsx)("p",{className:"text-[9px] text-white/60",children:"Fee"})]})]}),(0,qr.jsx)("p",{className:"text-white/50 text-xs text-center mt-3",children:v?"\ud83d\udfe2 Meeting Mode ON - \u092c\u093f\u0928\u093e button \u0926\u092c\u093e\u090f \u092c\u094b\u0932\u0924\u0947 \u0930\u0939\u093f\u090f":"Mic button \u0926\u092c\u093e\u090f\u0902 \u092f\u093e Meeting Mode ON \u0915\u0930\u0947\u0902"})]}),y&&(0,qr.jsxs)("div",{className:"w-96 bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[(0,qr.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[i.map(e=>(0,qr.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,qr.jsx)("div",{className:"max-w-[85%] rounded-2xl px-4 py-2 ".concat("user"===e.role?"bg-blue-600 text-white":"bg-slate-100 text-slate-800"),children:(0,qr.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})})},e.id)),"thinking"===n&&(0,qr.jsx)("div",{className:"flex justify-start",children:(0,qr.jsx)("div",{className:"bg-slate-100 rounded-2xl px-4 py-2 flex items-center gap-2",children:(0,qr.jsxs)("div",{className:"flex gap-1",children:[(0,qr.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,qr.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-100"}),(0,qr.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce delay-200"})]})})}),(0,qr.jsx)("div",{ref:M})]}),(0,qr.jsx)("div",{className:"p-3 border-t border-slate-100",children:(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&z(o),placeholder:"Type here...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl focus:border-blue-500 outline-none text-sm",disabled:"listening"===n}),(0,qr.jsx)(Dl,{onClick:()=>z(o),disabled:!o.trim()||"thinking"===n,className:"rounded-xl bg-blue-600 hover:bg-blue-700",children:(0,qr.jsx)(sJ,{className:"w-4 h-4"})})]})})]})]})}const u1=e=>{let{state:t="idle",size:a="md",className:s="",onClick:n}=e;const r={sm:"w-12 h-12",md:"w-20 h-20",lg:"w-32 h-32",xl:"w-44 h-44"},i=(()=>{switch(t){case"listening":return{core:"from-pink-500 via-rose-500 to-purple-500",glow:"bg-pink-400/50",animation:"animate-pulse-fast",rings:!0,soundBars:!0};case"thinking":return{core:"from-indigo-500 via-purple-600 to-violet-500",glow:"bg-purple-400/40",animation:"animate-spin-slow",rings:!1,particles:!0};case"speaking":return{core:"from-blue-400 via-indigo-500 to-purple-500",glow:"bg-blue-400/50",animation:"animate-pulse-speak",rings:!0,waves:!0,speakingBars:!0};default:return{core:"from-indigo-500 via-purple-500 to-pink-500",glow:"bg-indigo-400/30",animation:"animate-breathe",rings:!1,idlePulse:!0}}})();return(0,qr.jsxs)("div",{className:"relative flex items-center justify-center ".concat({sm:"w-16 h-16",md:"w-28 h-28",lg:"w-40 h-40",xl:"w-56 h-56"}[a]," ").concat(s," cursor-pointer"),"data-testid":"tino-orb","data-state":t,onClick:n,children:[(0,qr.jsx)("div",{className:"absolute inset-0 rounded-full ".concat(i.glow," blur-3xl ").concat(i.animation),style:{transform:"scale(1.5)"}}),i.rings&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-white/30 animate-ping-slow"}),(0,qr.jsx)("div",{className:"absolute inset-1 rounded-full border border-white/20 animate-ping-slower"}),(0,qr.jsx)("div",{className:"absolute inset-2 rounded-full border border-white/10 animate-ping-slowest"})]}),i.waves&&(0,qr.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,qr.jsx)("div",{className:"absolute w-full h-full rounded-full border-2 border-blue-300/40 animate-wave-1"}),(0,qr.jsx)("div",{className:"absolute w-full h-full rounded-full border-2 border-blue-300/30 animate-wave-2"}),(0,qr.jsx)("div",{className:"absolute w-full h-full rounded-full border-2 border-blue-300/20 animate-wave-3"})]}),i.idlePulse&&(0,qr.jsx)("div",{className:"absolute inset-4 rounded-full bg-gradient-to-tr from-indigo-400/20 to-purple-400/20 blur-xl animate-breathe"}),(0,qr.jsx)("div",{className:"absolute ".concat(r[a]," rounded-full bg-gradient-to-tr ").concat(i.core," opacity-50 blur-lg ").concat(i.animation)}),(0,qr.jsxs)("div",{className:"relative ".concat(r[a]," rounded-full bg-gradient-to-tr ").concat(i.core," shadow-2xl ").concat(i.animation),style:{boxShadow:"speaking"===t?"0 0 80px rgba(59, 130, 246, 0.6), 0 0 120px rgba(99, 102, 241, 0.4), inset 0 -10px 30px rgba(0,0,0,0.3)":"listening"===t?"0 0 80px rgba(236, 72, 153, 0.6), 0 0 120px rgba(139, 92, 246, 0.4), inset 0 -10px 30px rgba(0,0,0,0.3)":"thinking"===t?"0 0 60px rgba(139, 92, 246, 0.5), 0 0 100px rgba(99, 102, 241, 0.3), inset 0 -10px 30px rgba(0,0,0,0.3)":"0 0 50px rgba(99, 102, 241, 0.4), inset 0 -10px 30px rgba(0,0,0,0.2)"},children:[(0,qr.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-b from-white/40 via-transparent to-transparent opacity-70"}),(0,qr.jsx)("div",{className:"absolute bottom-0 left-1/4 right-1/4 h-1/3 rounded-full bg-gradient-to-t from-white/10 to-transparent blur-sm"}),(0,qr.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[i.soundBars&&(0,qr.jsxs)("div",{className:"flex gap-1 items-end",children:[(0,qr.jsx)("div",{className:"w-1.5 bg-white/90 rounded-full animate-sound-bar-1",style:{height:"16px"}}),(0,qr.jsx)("div",{className:"w-1.5 bg-white/90 rounded-full animate-sound-bar-2",style:{height:"24px"}}),(0,qr.jsx)("div",{className:"w-1.5 bg-white/90 rounded-full animate-sound-bar-3",style:{height:"12px"}}),(0,qr.jsx)("div",{className:"w-1.5 bg-white/90 rounded-full animate-sound-bar-2",style:{height:"20px"}}),(0,qr.jsx)("div",{className:"w-1.5 bg-white/90 rounded-full animate-sound-bar-1",style:{height:"14px"}})]}),i.speakingBars&&(0,qr.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,qr.jsx)("div",{className:"w-2 bg-white/95 rounded-full animate-speak-bar-1",style:{height:"12px"}}),(0,qr.jsx)("div",{className:"w-2 bg-white/95 rounded-full animate-speak-bar-2",style:{height:"20px"}}),(0,qr.jsx)("div",{className:"w-2 bg-white/95 rounded-full animate-speak-bar-3",style:{height:"16px"}}),(0,qr.jsx)("div",{className:"w-2 bg-white/95 rounded-full animate-speak-bar-2",style:{height:"24px"}}),(0,qr.jsx)("div",{className:"w-2 bg-white/95 rounded-full animate-speak-bar-1",style:{height:"10px"}})]}),i.particles&&(0,qr.jsxs)("div",{className:"relative w-10 h-10",children:[(0,qr.jsx)("div",{className:"absolute inset-0 border-3 border-white/30 border-t-white rounded-full animate-spin"}),(0,qr.jsx)("div",{className:"absolute inset-2 border-2 border-white/20 border-b-white/60 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"0.8s"}})]}),i.idlePulse&&(0,qr.jsx)("div",{className:"w-4 h-4 bg-white/90 rounded-full animate-pulse shadow-lg shadow-white/50"})]})]}),(0,qr.jsx)("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap",children:(0,qr.jsx)("span",{className:"text-xs font-semibold px-3 py-1 rounded-full shadow-sm ".concat("listening"===t?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":"speaking"===t?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white":"thinking"===t?"bg-gradient-to-r from-purple-500 to-violet-500 text-white":"bg-white/90 text-slate-600 border border-slate-200"),children:"listening"===t?"\ud83c\udfa4 \u0938\u0941\u0928 \u0930\u0939\u093e \u0939\u0942\u0902...":"speaking"===t?"\ud83d\udde3\ufe0f \u092c\u094b\u0932 \u0930\u0939\u093e \u0939\u0942\u0902...":"thinking"===t?"\ud83e\udde0 \u0938\u094b\u091a \u0930\u0939\u093e \u0939\u0942\u0902...":"\u2728 Tino AI"})})]})},m1=Dc("maximize-2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),h1=Dc("minimize-2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),p1="".concat("","/api"),x1=[{id:"attendance",icon:tJ,label:"\u0906\u091c \u0915\u0940 attendance",query:"\u0906\u091c \u0915\u0940 attendance \u0915\u093f\u0924\u0928\u0940 \u0939\u0948?",color:"text-blue-500"},{id:"fees",icon:Sh,label:"Fee collection",query:"\u0906\u091c \u0915\u0940 fee collection \u0915\u093f\u0924\u0928\u0940 \u0939\u0948?",color:"text-emerald-500"},{id:"students",icon:Lc,label:"Total students",query:"\u0915\u093f\u0924\u0928\u0947 students \u0939\u0948\u0902?",color:"text-purple-500"},{id:"summary",icon:eh,label:"\u0906\u091c \u0915\u0940 summary",query:"\u0906\u091c \u0915\u0940 \u092a\u0942\u0930\u0940 summary \u0926\u094b",color:"text-orange-500"}];function f1(){var e;const{user:t,schoolId:a}=Kr(),[n,r]=(0,s.useState)(!0),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)("idle"),[d,u]=(0,s.useState)([]),[m,h]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!0),[y,j]=(0,s.useState)(null),N=((0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null)),w=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[d,m]),(0,s.useEffect)(()=>{S(),setTimeout(()=>{_("\ud83c\udf93 \u0928\u092e\u0938\u094d\u0924\u0947! \u092e\u0948\u0902 Tino \u0939\u0942\u0902 - \u0906\u092a\u0915\u093e AI School Assistant\u0964 \u092e\u0941\u091d\u0938\u0947 Hindi \u092f\u093e English \u092e\u0947\u0902 \u0915\u0941\u091b \u092d\u0940 \u092a\u0942\u091b\u0947\u0902\u0964")},500)},[]);const S=async()=>{try{const e=localStorage.getItem("token"),t=await Hr.get("".concat(p1,"/tino-ai/quick-stats/").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});j(t.data)}catch(e){console.error("Failed to fetch stats:",e)}},_=e=>{u(t=>[...t,{id:Date.now(),role:"tino",content:e,timestamp:new Date}])},k=async e=>{if(e.trim()){(e=>{u(t=>[...t,{id:Date.now(),role:"user",content:e,timestamp:new Date}])})(e),x(""),c("thinking"),h("");try{const s=localStorage.getItem("token"),n=await Hr.post("".concat(p1,"/tino-ai/chat"),{message:e,school_id:a,user_id:null===t||void 0===t?void 0:t.id,session_id:"tino_".concat(a,"_").concat(null===t||void 0===t?void 0:t.id),language:"hi"},{headers:{Authorization:"Bearer ".concat(s)}}),{response:r}=n.data;c("speaking"),await C(r),_(r),h(""),v||E(r)}catch(s){console.error("Tino AI Error:",s),c("idle"),_("\u092e\u093e\u092b \u0915\u0930\u0947\u0902, \u0915\u0941\u091b \u0917\u0921\u093c\u092c\u0921\u093c \u0939\u094b \u0917\u0908\u0964 \u0915\u0943\u092a\u092f\u093e \u0926\u094b\u092c\u093e\u0930\u093e \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902\u0964")}}},C=async e=>{const t=e.split(" ");for(let a=0;a<t.length;a++)h(e=>e+(a>0?" ":"")+t[a]),await new Promise(e=>setTimeout(e,50))},E=((0,s.useCallback)(()=>{Qt.info("\ud83d\udd07 Voice disabled. Please type your message.")},[]),e=>{c("idle")});return n?(0,qr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm","data-testid":"tino-ai-agent",children:(0,qr.jsxs)(Qc,{className:"tino-panel w-full max-w-2xl transition-all duration-300 ".concat(i?"h-20":"h-[85vh] max-h-[700px]"),children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-100",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"relative",children:(0,qr.jsx)(u1,{state:o,size:"sm"})}),(0,qr.jsxs)("div",{className:"ml-4",children:[(0,qr.jsxs)("h2",{className:"font-bold text-lg text-slate-900 flex items-center gap-2",children:["Tino AI",(0,qr.jsxs)(eJ,{variant:"outline",className:"text-xs bg-gradient-to-r from-indigo-500 to-purple-500 text-white border-0",children:[(0,qr.jsx)(hh,{className:"w-3 h-3 mr-1"}),"GPT-5.2"]})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"listening"===o?"\ud83c\udfa4 \u0938\u0941\u0928 \u0930\u0939\u093e \u0939\u0942\u0902...":"thinking"===o?"\ud83e\udde0 \u0938\u094b\u091a \u0930\u0939\u093e \u0939\u0942\u0902...":"speaking"===o?"\ud83d\udde3\ufe0f \u092c\u094b\u0932 \u0930\u0939\u093e \u0939\u0942\u0902...":"\u0906\u092a\u0915\u093e Intelligent School Assistant"})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>l(!i),children:i?(0,qr.jsx)(m1,{className:"w-4 h-4"}):(0,qr.jsx)(h1,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{variant:"ghost",size:"icon",onClick:()=>r(!1),children:(0,qr.jsx)(Em,{className:"w-4 h-4"})})]})]}),!i&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)(td,{className:"flex-1 flex flex-col p-0 h-[calc(100%-140px)]",children:[y&&(0,qr.jsxs)("div",{className:"flex items-center gap-4 px-4 py-2 bg-slate-50 border-b border-slate-100 overflow-x-auto",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm whitespace-nowrap",children:[(0,qr.jsx)(Lc,{className:"w-4 h-4 text-blue-500"}),(0,qr.jsx)("span",{className:"font-medium",children:y.total_students||0}),(0,qr.jsx)("span",{className:"text-slate-500",children:"Students"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm whitespace-nowrap",children:[(0,qr.jsx)(tJ,{className:"w-4 h-4 text-emerald-500"}),(0,qr.jsx)("span",{className:"font-medium",children:(null===(e=y.today_attendance)||void 0===e?void 0:e.present)||0}),(0,qr.jsx)("span",{className:"text-slate-500",children:"Present"})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm whitespace-nowrap",children:[(0,qr.jsx)(Sh,{className:"w-4 h-4 text-amber-500"}),(0,qr.jsxs)("span",{className:"font-medium",children:["\u20b9",(y.today_fee_collection||0).toLocaleString()]}),(0,qr.jsx)("span",{className:"text-slate-500",children:"Today"})]})]}),(0,qr.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.length<=2&&(0,qr.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:x1.map(e=>(0,qr.jsxs)("button",{onClick:()=>{return t=e.query,void k(t);var t},className:"flex items-center gap-2 p-3 bg-slate-50 hover:bg-slate-100 rounded-xl transition-all text-left",children:[(0,qr.jsx)(e.icon,{className:"w-5 h-5 ".concat(e.color)}),(0,qr.jsx)("span",{className:"text-sm text-slate-700",children:e.label})]},e.id))}),d.map(e=>(0,qr.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,qr.jsxs)("div",{className:"max-w-[85%] rounded-2xl px-4 py-3 ".concat("user"===e.role?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-slate-100 text-slate-800"),children:[(0,qr.jsx)("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:e.content}),(0,qr.jsx)("p",{className:"text-[10px] mt-1 opacity-60",children:e.timestamp.toLocaleTimeString("hi-IN",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),m&&(0,qr.jsx)("div",{className:"flex justify-start",children:(0,qr.jsxs)("div",{className:"max-w-[85%] rounded-2xl px-4 py-3 bg-slate-100 text-slate-800",children:[(0,qr.jsx)("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:m}),(0,qr.jsx)("span",{className:"inline-block w-2 h-4 bg-indigo-500 animate-pulse ml-1"})]})}),"thinking"===o&&!m&&(0,qr.jsx)("div",{className:"flex justify-start",children:(0,qr.jsxs)("div",{className:"bg-slate-100 rounded-2xl px-4 py-3 flex items-center gap-2",children:[(0,qr.jsxs)("div",{className:"flex gap-1",children:[(0,qr.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,qr.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,qr.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,qr.jsx)("span",{className:"text-sm text-slate-500",children:"Tino \u0938\u094b\u091a \u0930\u0939\u093e \u0939\u0948..."})]})}),(0,qr.jsx)("div",{ref:N})]})]}),(0,qr.jsxs)("div",{className:"p-4 border-t border-slate-100 bg-white rounded-b-2xl",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-3",children:[(0,qr.jsx)(Dl,{variant:v?"outline":"default",size:"sm",onClick:()=>b(!v),className:"rounded-full ".concat(v?"":"bg-emerald-500 hover:bg-emerald-600"),children:v?(0,qr.jsx)(NZ,{className:"w-4 h-4"}):(0,qr.jsx)(SJ,{className:"w-4 h-4"})}),(0,qr.jsx)("div",{className:"text-center text-sm text-slate-500 mb-2",children:"\ud83d\udcdd Text Chat Only (Voice Disabled)"}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",onClick:S,className:"rounded-full",children:(0,qr.jsx)(lH,{className:"w-4 h-4"})})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("input",{ref:w,type:"text",value:p,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k(p))},placeholder:"Tino \u0938\u0947 \u0915\u0941\u091b \u092d\u0940 \u092a\u0942\u091b\u0947\u0902... (Hindi / English)",className:"flex-1 px-4 py-3 border border-slate-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all",disabled:"listening"===o}),(0,qr.jsx)(Dl,{onClick:()=>k(p),disabled:!p.trim()||"thinking"===o,className:"rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 px-4",children:(0,qr.jsx)(sJ,{className:"w-5 h-5"})})]}),(0,qr.jsx)("p",{className:"text-[10px] text-center text-slate-400 mt-2",children:"\ud83c\udfa4 Voice \u092c\u091f\u0928 \u0926\u092c\u093e\u090f\u0902 \u092f\u093e \u091f\u093e\u0907\u092a \u0915\u0930\u0947\u0902 \u2022 Powered by GPT-5.2"})]})]})]})}):null}const g1={isTrialMode:!0,trialDays:30,trialStartDate:"2025-01-04",schoolName:"",contactPhone:"+91 7879967616",contactWhatsApp:"+91 7879967616",supportEmail:"support@schooltino.in",features:{aiSupport:!0,feePayment:!0,onlineExams:!0,attendance:!0,reports:!0,allFeatures:!0}};function v1(){const[e,t]=(0,s.useState)(!1);return g1.isTrialMode?(0,qr.jsxs)("div",{className:"fixed bottom-6 left-6 z-50",children:[e&&(0,qr.jsxs)("div",{className:"absolute bottom-16 left-0 bg-white rounded-2xl shadow-2xl p-4 w-72 border",children:[(0,qr.jsxs)("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[(0,qr.jsx)(hh,{className:"w-5 h-5 text-emerald-500"}),"Need Help?"]}),(0,qr.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Trial period me unlimited support available hai!"}),(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)("a",{href:"https://wa.me/917879967616?text=Hi, I need help with Schooltino",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-green-50 hover:bg-green-100 rounded-xl transition-colors",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,qr.jsx)(ih,{className:"w-5 h-5 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-green-800",children:"WhatsApp"}),(0,qr.jsx)("p",{className:"text-xs text-green-600",children:"Instant Reply"})]})]}),(0,qr.jsxs)("a",{href:"tel:+917879967616",className:"flex items-center gap-3 p-3 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:(0,qr.jsx)(Gm,{className:"w-5 h-5 text-white"})}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{className:"font-medium text-blue-800",children:"Call Us"}),(0,qr.jsx)("p",{className:"text-xs text-blue-600",children:"+91 7879967616"})]})]})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 mt-3 text-center",children:"Support Hours: 9 AM - 9 PM"})]}),(0,qr.jsx)("button",{onClick:()=>t(!e),className:"w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all ".concat(e?"bg-slate-700 rotate-45":"bg-gradient-to-r from-emerald-500 to-teal-500 hover:scale-110"),children:e?(0,qr.jsx)(Em,{className:"w-6 h-6 text-white"}):(0,qr.jsx)(ih,{className:"w-6 h-6 text-white"})})]}):null}const b1="".concat("","/api"),y1={urgent:{bg:"bg-red-500",border:"border-red-500",text:"text-red-700",light:"bg-red-50"},high:{bg:"bg-orange-500",border:"border-orange-500",text:"text-orange-700",light:"bg-orange-50"},normal:{bg:"bg-blue-500",border:"border-blue-500",text:"text-blue-700",light:"bg-blue-50"},low:{bg:"bg-slate-500",border:"border-slate-500",text:"text-slate-700",light:"bg-slate-50"}};function j1(){var e,t;const{user:a,schoolId:n}=Kr(),[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(()=>{const e=localStorage.getItem("dismissed_notices");return e?JSON.parse(e):[]}),[h,p]=(0,s.useState)(!0),x=(0,s.useCallback)(async()=>{if(a&&n)try{const e=(await Hr.get("".concat(b1,"/notices/unread"),{params:{school_id:n,user_id:a.id,user_role:a.role}})).data.filter(e=>!u.includes(e.id));e.length>0&&(i(e),d(!0),h&&e.some(e=>"urgent"===e.priority||"high"===e.priority)&&f())}catch(e){console.error("Failed to fetch notices:",e)}},[a,n,u,h]);(0,s.useEffect)(()=>{x();const e=setInterval(x,3e4);return()=>clearInterval(e)},[x]);const f=()=>{try{const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleRclW5/cxJ");e.volume=.5,e.play().catch(()=>{})}catch(J1){}};if(!c||0===r.length)return null;const g=r[l];if(!g)return null;const v=y1[g.priority]||y1.normal;return(0,qr.jsx)(Im,{open:c,onOpenChange:()=>{},children:(0,qr.jsxs)(zm,{className:"max-w-lg border-2 ".concat(v.border," p-0 overflow-hidden"),onPointerDownOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),children:[(0,qr.jsx)("div",{className:"".concat(v.bg," text-white p-4"),children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Oh,{className:"w-5 h-5"}),(0,qr.jsx)("span",{className:"font-semibold",children:"New Notice"}),r.length>1&&(0,qr.jsxs)(eJ,{className:"bg-white/20 text-white",children:[l+1," of ",r.length]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)("button",{onClick:()=>p(!h),className:"p-1 hover:bg-white/20 rounded",children:h?(0,qr.jsx)(SJ,{className:"w-4 h-4"}):(0,qr.jsx)(NZ,{className:"w-4 h-4"})}),(0,qr.jsx)(eJ,{className:"".concat(v.light," ").concat(v.text),children:(null===(e=g.priority)||void 0===e?void 0:e.toUpperCase())||"NORMAL"})]})]})}),(0,qr.jsxs)("div",{className:"p-6",children:[(0,qr.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:g.title}),(0,qr.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:[(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(eH,{className:"w-4 h-4"}),g.created_by_name||"Admin"]}),(0,qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,qr.jsx)(eh,{className:"w-4 h-4"}),new Date(g.created_at).toLocaleDateString("hi-IN")]})]}),(0,qr.jsx)("div",{className:"".concat(v.light," rounded-lg p-4 mb-4"),children:(0,qr.jsx)("p",{className:"text-slate-700 whitespace-pre-wrap",children:g.content})}),g.target_type&&(0,qr.jsxs)("div",{className:"text-sm text-slate-500 mb-4",children:[(0,qr.jsx)("span",{className:"font-medium",children:"For: "}),"all"===g.target_type&&"Everyone","students"===g.target_type&&"All Students","teachers"===g.target_type&&"All Teachers","class"===g.target_type&&"Class ".concat(g.target_class),"specific"===g.target_type&&"Specific Users"]}),g.expires_at&&(0,qr.jsxs)("div",{className:"flex items-center gap-2 text-sm text-amber-600 mb-4",children:[(0,qr.jsx)(Ah,{className:"w-4 h-4"}),"Expires: ",new Date(g.expires_at).toLocaleDateString("hi-IN")]}),(null===(t=g.attachments)||void 0===t?void 0:t.length)>0&&(0,qr.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Attachments:"}),(0,qr.jsx)("div",{className:"flex flex-wrap gap-2",children:g.attachments.map((e,t)=>(0,qr.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:underline",children:["\ud83d\udcce ",e.name]},t))})]})]}),(0,qr.jsx)("div",{className:"border-t bg-slate-50 p-4",children:(0,qr.jsxs)("div",{className:"flex items-center justify-between",children:[r.length>1&&(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Dl,{variant:"outline",size:"sm",onClick:()=>o(Math.max(0,l-1)),disabled:0===l,children:(0,qr.jsx)(AY,{className:"w-4 h-4"})}),(0,qr.jsx)(Dl,{variant:"outline",size:"sm",onClick:()=>o(Math.min(r.length-1,l+1)),disabled:l===r.length-1,children:(0,qr.jsx)(qc,{className:"w-4 h-4"})})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[r.length>1&&(0,qr.jsx)(Dl,{variant:"outline",size:"sm",onClick:async()=>{const e=r.map(e=>e.id),t=[...u,...e];m(t),localStorage.setItem("dismissed_notices",JSON.stringify(t));try{await Promise.all(e.map(e=>Hr.post("".concat(b1,"/notices/").concat(e,"/mark-read"),{user_id:a.id})))}catch(s){console.error("Failed to mark notices as read:",s)}d(!1),i([]),o(0)},children:"Dismiss All"}),(0,qr.jsxs)(Dl,{className:v.bg,onClick:()=>(async e=>{const t=[...u,e];m(t),localStorage.setItem("dismissed_notices",JSON.stringify(t));try{await Hr.post("".concat(b1,"/notices/").concat(e,"/mark-read"),{user_id:a.id})}catch(s){console.error("Failed to mark notice as read:",s)}l<r.length-1?o(e=>e+1):(d(!1),i([]),o(0))})(g.id),children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Got It"]})]})]})})]})})}const N1=Dc("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),w1=Dc("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),S1=Dc("move-up",[["path",{d:"M8 6L12 2L16 6",key:"1yvkyx"}],["path",{d:"M12 2V22",key:"r89rzk"}]]),_1=Dc("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),k1="".concat("","/api"),C1=[{angle:"front",label:"Seedha Dekho",instruction:"Camera ki taraf seedha dekhein",icon:w1},{angle:"left",label:"Left Turn",instruction:"Thoda left side ghoomein",icon:Ym},{angle:"right",label:"Right Turn",instruction:"Thoda right side ghoomein",icon:uh},{angle:"up",label:"Upar Dekho",instruction:"Thoda upar dekhein",icon:S1},{angle:"slight_tilt",label:"Tilt Karo",instruction:"Head thoda tilt karein",icon:_1}];function E1(e){let{personId:t,personType:a="staff",personName:n,schoolId:r,onComplete:i,minPhotos:l=4,maxPhotos:o=5}=e;const[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(0),[h,p]=(0,s.useState)(!1),[x,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),w=(0,s.useRef)(null),S=(0,s.useRef)(null),_=(0,s.useRef)(null),k=c.length/l*100,C=c.length>=l,E=()=>{x&&(x.getTracks().forEach(e=>e.stop()),f(null)),p(!1),N(null)},A=()=>{if(!w.current||!S.current)return;const e=w.current,t=S.current;t.width=e.videoWidth,t.height=e.videoHeight;t.getContext("2d").drawImage(e,0,0);const a=t.toDataURL("image/jpeg",.85);d(e=>{var t;return[...e,{angle:(null===(t=C1[u])||void 0===t?void 0:t.angle)||"photo_".concat(e.length+1),data:a,timestamp:(new Date).toISOString()}]}),u<C1.length-1&&m(e=>e+1),Qt.success("Photo ".concat(c.length+1," captured!"))},P=()=>{d([]),m(0),y(!1)};return(0,s.useEffect)(()=>()=>{x&&x.getTracks().forEach(e=>e.stop())},[x]),b?(0,qr.jsx)(Qc,{className:"border-green-200 bg-green-50",children:(0,qr.jsxs)(td,{className:"p-6 text-center",children:[(0,qr.jsx)(Km,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,qr.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Face Enrollment Complete!"}),(0,qr.jsxs)("p",{className:"text-green-600 text-sm mb-4",children:[c.length," photos enrolled. AI ab aapko pehchan sakta hai."]}),(0,qr.jsxs)(Dl,{variant:"outline",onClick:P,children:[(0,qr.jsx)(nY,{className:"w-4 h-4 mr-2"}),"Re-enroll Photos"]})]})}):(0,qr.jsxs)(Qc,{className:"border-0 shadow-sm",children:[(0,qr.jsxs)(Xc,{className:"pb-3",children:[(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(eH,{className:"w-5 h-5 text-indigo-600"}),"Face Enrollment"]}),(0,qr.jsxs)(ed,{className:"text-xs",children:[l,"-",o," photos required for accurate recognition"]})]}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"space-y-2",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,qr.jsx)("span",{className:"text-slate-600",children:"Progress"}),(0,qr.jsxs)("span",{className:"font-medium",children:[c.length,"/",l," Photos"]})]}),(0,qr.jsx)(XK,{value:k,className:"h-2"})]}),c.length>0&&(0,qr.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[c.map((e,t)=>(0,qr.jsxs)("div",{className:"relative aspect-square",children:[(0,qr.jsx)("img",{src:e.data,alt:"Photo ".concat(t+1),className:"w-full h-full object-cover rounded-lg border-2 border-green-200"}),(0,qr.jsx)("button",{onClick:()=>(e=>{d(t=>t.filter((t,a)=>a!==e))})(t),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center hover:bg-red-600",children:"\xd7"}),(0,qr.jsx)(eJ,{className:"absolute bottom-0 left-0 right-0 rounded-none rounded-b-lg bg-green-500 text-[10px] justify-center",children:t+1})]},t)),Array.from({length:Math.max(0,l-c.length)}).map((e,t)=>(0,qr.jsx)("div",{className:"aspect-square rounded-lg border-2 border-dashed border-slate-200 flex items-center justify-center",children:(0,qr.jsx)(JU,{className:"w-6 h-6 text-slate-300"})},"empty-".concat(t)))]}),h&&(0,qr.jsxs)("div",{className:"space-y-3",children:[(0,qr.jsx)("div",{className:"bg-indigo-50 rounded-lg p-3 text-center",children:C1[u]&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)("div",{className:"flex items-center justify-center gap-2 text-indigo-700 font-medium mb-1",children:[(()=>{const e=C1[u].icon;return(0,qr.jsx)(e,{className:"w-5 h-5"})})(),C1[u].label]}),(0,qr.jsx)("p",{className:"text-sm text-indigo-600",children:C1[u].instruction})]})}),(0,qr.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-video",children:[(0,qr.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,qr.jsx)("canvas",{ref:S,className:"hidden"}),null!==j&&(0,qr.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,qr.jsx)("span",{className:"text-6xl font-bold text-white animate-pulse",children:j})}),(0,qr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,qr.jsx)("div",{className:"w-40 h-48 border-2 border-white/50 rounded-full"})})]}),(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{className:"flex-1 bg-indigo-600 hover:bg-indigo-700",onClick:()=>{N(3);const e=setInterval(()=>{N(t=>t<=1?(clearInterval(e),A(),null):t-1)},1e3)},disabled:null!==j||c.length>=o,children:[(0,qr.jsx)(JU,{className:"w-4 h-4 mr-2"}),"Capture (",c.length+1,"/",l,")"]}),(0,qr.jsx)(Dl,{variant:"outline",onClick:E,children:"Close"})]})]}),!h&&(0,qr.jsxs)("div",{className:"flex gap-2",children:[(0,qr.jsxs)(Dl,{variant:"outline",className:"flex-1",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});f(e),p(!0),setTimeout(()=>{w.current&&(w.current.srcObject=e)},100)}catch(e){Qt.error("Camera access denied. Please allow camera access.")}},disabled:c.length>=o,children:[(0,qr.jsx)(JU,{className:"w-4 h-4 mr-2"}),"Camera"]}),(0,qr.jsxs)(Dl,{variant:"outline",className:"flex-1",onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},disabled:c.length>=o,children:[(0,qr.jsx)($U,{className:"w-4 h-4 mr-2"}),"Upload"]}),(0,qr.jsx)("input",{ref:_,type:"file",accept:"image/*",multiple:!0,onChange:e=>{Array.from(e.target.files).forEach(e=>{if(e.size>5242880)return void Qt.error("".concat(e.name," is too large. Max 5MB allowed."));const t=new FileReader;t.onload=e=>{d(t=>[...t,{angle:"upload_".concat(t.length+1),data:e.target.result,timestamp:(new Date).toISOString()}])},t.readAsDataURL(e)}),e.target.value=""},className:"hidden"})]}),C&&!h&&(0,qr.jsx)(Dl,{className:"w-full bg-green-600 hover:bg-green-700",onClick:async()=>{if(c.length<l)Qt.error("Minimum ".concat(l," photos required"));else{v(!0);try{await Hr.post("".concat(k1,"/face-recognition/enroll-multiple"),{person_id:t,person_type:a,person_name:n,school_id:r,photos:c.map(e=>({angle:e.angle,photo_data:e.data}))});y(!0),Qt.success("Face enrollment complete! AI ab aapko pehchan sakta hai."),i&&i({success:!0,photoCount:c.length,personId:t})}catch(e){console.error("Enrollment error:",e),y(!0),Qt.success("Photos saved! Face enrollment complete."),i&&i({success:!0,photoCount:c.length,personId:t})}finally{v(!1),E()}}},disabled:g,children:g?(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Bc,{className:"w-4 h-4 mr-2 animate-spin"}),"Enrolling Face..."]}):(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)(Km,{className:"w-4 h-4 mr-2"}),"Complete Enrollment (",c.length," Photos)"]})}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 text-center",children:c.length<l?"".concat(l-c.length," aur photos chahiye for better recognition"):"Ready for enrollment! Submit karein."})]})]})}function A1(){var e,t,a;const n=Se(),{user:r,token:i,logout:l,schoolId:o}=Kr(),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)(null),[P,O]=(0,s.useState)(!1),[M,T]=((0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useState)(!1)),[D,I]=(0,s.useState)({name:"",designation:"",phone:"",department:""}),[R,L]=(0,s.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),[F,z]=(0,s.useState)({name:(null===r||void 0===r?void 0:r.name)||"",email:(null===r||void 0===r?void 0:r.email)||"",mobile:(null===r||void 0===r?void 0:r.mobile)||"",role:(null===r||void 0===r?void 0:r.role)||""}),B={director:{color:"bg-purple-100 text-purple-700",label:"Director"},principal:{color:"bg-blue-100 text-blue-700",label:"Principal"},vice_principal:{color:"bg-indigo-100 text-indigo-700",label:"Vice Principal"},teacher:{color:"bg-green-100 text-green-700",label:"Teacher"},accountant:{color:"bg-amber-100 text-amber-700",label:"Accountant"},student:{color:"bg-cyan-100 text-cyan-700",label:"Student"}}[U=null===r||void 0===r?void 0:r.role]||{color:"bg-slate-100 text-slate-700",label:U};var U;return(0,qr.jsxs)("div",{className:"min-h-screen bg-slate-50 p-4 md:p-6","data-testid":"profile-page",children:[(0,qr.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,qr.jsxs)("div",{className:"text-center",children:[(0,qr.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"My Profile"}),(0,qr.jsx)("p",{className:"text-slate-500",children:"Manage your account & AI settings"})]}),(0,qr.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsx)(Qc,{children:(0,qr.jsxs)(td,{className:"p-6 text-center",children:[(0,qr.jsxs)("div",{className:"relative inline-block mb-4",children:[y?(0,qr.jsx)("img",{src:y,alt:null===r||void 0===r?void 0:r.name,className:"w-28 h-28 rounded-full object-cover border-4 border-indigo-100"}):(0,qr.jsx)("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-3xl font-bold",children:(null===r||void 0===r||null===(e=r.name)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())||"U"}),N&&(0,qr.jsx)("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-2 border-white",children:(0,qr.jsx)(Km,{className:"w-4 h-4 text-white"})})]}),(0,qr.jsx)("h2",{className:"text-lg font-bold text-slate-900",children:null===r||void 0===r?void 0:r.name}),(0,qr.jsx)("span",{className:"inline-block mt-1 px-3 py-1 rounded-full text-sm font-medium ".concat(B.color),children:B.label}),N?(0,qr.jsxs)(eJ,{className:"mt-3 bg-green-100 text-green-700 block mx-auto w-fit",children:[(0,qr.jsx)(Km,{className:"w-3 h-3 mr-1"}),"Face Enrolled for AI"]}):(0,qr.jsxs)(eJ,{className:"mt-3 bg-amber-100 text-amber-700 block mx-auto w-fit",children:[(0,qr.jsx)(kY,{className:"w-3 h-3 mr-1"}),"Enroll Face for AI"]})]})}),(0,qr.jsx)(E1,{personId:null===r||void 0===r?void 0:r.id,personType:"student"===(null===r||void 0===r?void 0:r.role)?"student":"staff",personName:null===r||void 0===r?void 0:r.name,schoolId:o,minPhotos:4,maxPhotos:5,onComplete:e=>{e.success&&(w(!0),Qt.success("".concat(e.photoCount," photos enrolled!")))}}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{className:"pb-2",children:(0,qr.jsxs)(Zc,{className:"text-base flex items-center gap-2",children:[(0,qr.jsx)(lh,{className:"w-5 h-5 text-indigo-600"}),"AI Features"]})}),(0,qr.jsxs)(td,{className:"space-y-3",children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(ah,{className:"w-4 h-4 text-purple-600"}),(0,qr.jsx)("span",{className:"text-sm",children:"CCTV Commands"})]}),(0,qr.jsx)(Dl,{size:"sm",variant:S?"default":"outline",onClick:()=>{_(!S),Qt.success(S?"CCTV authorization disabled":"CCTV authorization enabled - You can now give commands via CCTV!")},className:S?"bg-green-500 hover:bg-green-600":"",children:S?"On":"Off"})]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 px-1",children:S?"\u2705 Aap CCTV se Tino ko command de sakte hain":"Enable karein to give voice commands via CCTV"})]})]})]}),(0,qr.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-lg flex items-center gap-2",children:[(0,qr.jsx)(eH,{className:"w-5 h-5 text-indigo-600"}),"Profile Information"]})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsx)(ql,{className:"text-slate-500 text-xs",children:"Name"}),(0,qr.jsx)("p",{className:"font-medium",children:null===r||void 0===r?void 0:r.name})]}),(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsx)(ql,{className:"text-slate-500 text-xs",children:"Role"}),(0,qr.jsx)("p",{className:"font-medium capitalize",children:null===r||void 0===r||null===(a=r.role)||void 0===a?void 0:a.replace("_"," ")})]})]}),(0,qr.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsx)(ql,{className:"text-slate-500 text-xs",children:"Email"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Wm,{className:"w-4 h-4 text-slate-400"}),(0,qr.jsx)("p",{className:"text-sm",children:null===r||void 0===r?void 0:r.email})]})]}),(null===r||void 0===r?void 0:r.mobile)&&(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsx)(ql,{className:"text-slate-500 text-xs",children:"Mobile"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(Gm,{className:"w-4 h-4 text-slate-400"}),(0,qr.jsx)("p",{className:"text-sm",children:r.mobile})]})]})]}),(null===r||void 0===r?void 0:r.school_id)&&(0,qr.jsxs)("div",{className:"space-y-1",children:[(0,qr.jsx)(ql,{className:"text-slate-500 text-xs",children:"School ID"}),(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(y$,{className:"w-4 h-4 text-slate-400"}),(0,qr.jsx)("p",{className:"text-sm",children:r.school_id})]})]})]})]}),(0,qr.jsxs)(Qc,{children:[(0,qr.jsx)(Xc,{children:(0,qr.jsxs)(Zc,{className:"text-lg flex items-center gap-2",children:[(0,qr.jsx)(Rc,{className:"w-5 h-5 text-indigo-600"}),"Account Settings"]})}),(0,qr.jsxs)(td,{className:"space-y-4",children:[(0,qr.jsxs)(Dl,{variant:"outline",className:"w-full justify-between h-14",onClick:()=>h(!0),"data-testid":"change-password-button",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(Vm,{className:"w-5 h-5 text-amber-600"})}),(0,qr.jsxs)("div",{className:"text-left",children:[(0,qr.jsx)("p",{className:"font-medium",children:"Change Password"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Update your account password"})]})]}),(0,qr.jsx)(sH,{className:"w-4 h-4 text-slate-400"})]}),("director"===(null===r||void 0===r?void 0:r.role)||"principal"===(null===r||void 0===r?void 0:r.role))&&(0,qr.jsxs)(Dl,{variant:"outline",className:"w-full justify-between h-14 border-indigo-200 hover:bg-indigo-50",onClick:()=>n("/app/setup-guide"),children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)(N1,{className:"w-5 h-5 text-indigo-600"})}),(0,qr.jsxs)("div",{className:"text-left",children:[(0,qr.jsx)("p",{className:"font-medium text-indigo-700",children:"Setup Guide / Resume Setup"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"CCTV, Speaker, Website configure \u0915\u0930\u0947\u0902"})]})]}),(0,qr.jsx)(uh,{className:"w-4 h-4 text-indigo-400"})]}),(0,qr.jsx)(Dl,{variant:"outline",className:"w-full justify-between h-14 border-red-200 hover:bg-red-50",onClick:l,children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,qr.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:(0,qr.jsx)($m,{className:"w-5 h-5 text-red-600"})}),(0,qr.jsxs)("div",{className:"text-left",children:[(0,qr.jsx)("p",{className:"font-medium text-red-600",children:"Logout"}),(0,qr.jsx)("p",{className:"text-xs text-slate-500",children:"Sign out from your account"})]})]})})]})]})]})]})]}),(0,qr.jsx)(Im,{open:m,onOpenChange:h,children:(0,qr.jsxs)(zm,{className:"max-w-md",children:[(0,qr.jsx)(Bm,{children:(0,qr.jsxs)(Hm,{className:"flex items-center gap-2",children:[(0,qr.jsx)(Vm,{className:"w-5 h-5 text-amber-600"}),"Change Password"]})}),(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Current Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{type:f?"text":"password",value:R.oldPassword,onChange:e=>L(t=>u(u({},t),{},{oldPassword:e.target.value})),placeholder:"Enter current password","data-testid":"old-password-input"}),(0,qr.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>g(!f),children:f?(0,qr.jsx)(Uc,{className:"w-4 h-4 text-slate-400"}):(0,qr.jsx)(Hc,{className:"w-4 h-4 text-slate-400"})})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"New Password"}),(0,qr.jsxs)("div",{className:"relative",children:[(0,qr.jsx)(Rl,{type:v?"text":"password",value:R.newPassword,onChange:e=>L(t=>u(u({},t),{},{newPassword:e.target.value})),placeholder:"Enter new password (min 6 chars)","data-testid":"new-password-input"}),(0,qr.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>b(!v),children:v?(0,qr.jsx)(Uc,{className:"w-4 h-4 text-slate-400"}):(0,qr.jsx)(Hc,{className:"w-4 h-4 text-slate-400"})})]})]}),(0,qr.jsxs)("div",{children:[(0,qr.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Confirm New Password"}),(0,qr.jsx)(Rl,{type:"password",value:R.confirmPassword,onChange:e=>L(t=>u(u({},t),{},{confirmPassword:e.target.value})),placeholder:"Confirm new password","data-testid":"confirm-password-input"}),R.confirmPassword&&R.newPassword!==R.confirmPassword&&(0,qr.jsxs)("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[(0,qr.jsx)(kY,{className:"w-3 h-3"}),"Passwords do not match"]})]}),(0,qr.jsxs)(Dl,{onClick:async()=>{if(R.oldPassword&&R.newPassword)if(R.newPassword===R.confirmPassword)if(R.newPassword.length<6)Qt.error("Password must be at least 6 characters");else{x(!0);try{const e=new FormData;e.append("old_password",R.oldPassword),e.append("new_password",R.newPassword);const t=await fetch("".concat("","/api/auth/change-password"),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:e}),a=await t.json();t.ok?(Qt.success("Password changed successfully! \ud83c\udf89"),h(!1),L({oldPassword:"",newPassword:"",confirmPassword:""})):Qt.error(a.detail||"Failed to change password")}catch(e){Qt.error("Error changing password")}finally{x(!1)}}else Qt.error("New passwords do not match");else Qt.error("Please fill all password fields")},disabled:p||!R.oldPassword||!R.newPassword||R.newPassword!==R.confirmPassword,className:"w-full","data-testid":"submit-password-change",children:[p?(0,qr.jsx)(Bc,{className:"w-4 h-4 animate-spin mr-2"}):(0,qr.jsx)(bY,{className:"w-4 h-4 mr-2"}),"Change Password"]}),(0,qr.jsx)("p",{className:"text-xs text-slate-500 text-center",children:"Password change hone ke baad aapko dobara login karna padega"})]})]})})]})}const P1=Dc("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),O1=Dc("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),M1=Dc("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),T1=Dc("megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),D1=Dc("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),I1=e=>{var t;let{isOpen:a,onClose:n}=e;const{t:r}=js(),{user:i,logout:l,schoolData:o}=Kr(),c=Se(),[d,m]=(0,s.useState)(["dashboard","academic"]),[h,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{null!==o&&void 0!==o&&o.logo&&p(o.logo)},[o]);const x=(null===i||void 0===i?void 0:i.permissions)||{},f="director"===(null===i||void 0===i?void 0:i.role),g=()=>{window.innerWidth<1024&&n&&n()},v=[{id:"dashboard",label:r("dashboard"),icon:wJ,items:[{path:"/app/dashboard",icon:wJ,label:r("dashboard"),permKey:"dashboard"},{path:"/app/tino-brain",icon:th,label:r("tino_brain"),permKey:"dashboard"},{path:"/app/school-analytics",icon:oh,label:r("school_analytics"),permKey:"school_analytics"}]},{id:"academic",label:r("academic")||"Academic",icon:sh,items:[{path:"/app/students",icon:Lc,label:r("students"),permKey:"students"},{path:"/app/classes",icon:Fc,label:r("classes"),permKey:"classes"},{path:"/app/attendance",icon:_h,label:r("attendance"),permKey:"attendance"},{path:"/app/timetable-management",icon:Ah,label:"Timetable",permKey:"attendance"},{path:"/app/exam-report",icon:Eh,label:"Exam & Report Card",permKey:"attendance"},{path:"/app/certificates",icon:pJ,label:"Certificates (TC/Character)",permKey:"students"},{path:"/app/admit-cards",icon:cY,label:"Admit Cards",permKey:"attendance"}]},{id:"staff",label:"Team Management",icon:O1,items:[{path:"/app/employee-management",icon:Lc,label:"All Team Members",permKey:"staff"},{path:"/app/leave",icon:eh,label:r("leave_management"),permKey:"leave_management"},{path:"/app/salary",icon:M1,label:r("salary"),permKey:"fees"},{path:"/app/permission-manager",icon:Rc,label:"Permissions & Roles",permKey:"user_management",directorOnly:!0}]},{id:"finance",label:r("fees")||"Finance",icon:Zm,items:[{path:"/app/fee-management",icon:Zm,label:"Fee Management",permKey:"fees"},{path:"/app/accountant",icon:kQ,label:r("ai_accountant"),permKey:"fees"}]},{id:"communication",label:r("notices")||"Communication",icon:T1,items:[{path:"/app/notices",icon:Oh,label:r("notices"),permKey:"notices"},{path:"/app/sms",icon:ih,label:r("sms_center"),permKey:"sms_center"},{path:"/app/meetings",icon:ah,label:r("zoom_meetings"),permKey:"meetings"},{path:"/app/gallery",icon:Ph,label:r("gallery"),permKey:"gallery"},{path:"/app/family-portal",icon:Lc,label:"Family Portal (ParentTino)",permKey:"settings"},{path:"/app/complaints",icon:ih,label:"Complaints & Feedback",permKey:"settings"}]},{id:"ai_tools",label:"AI Tools",icon:D1,items:[{path:"/app/tino-ai",icon:th,label:"Tino AI (Command Center)",permKey:"dashboard"},{path:"/app/ai-paper",icon:hh,label:r("ai_paper"),permKey:"ai_paper"},{path:"/app/event-designer",icon:Ph,label:"AI Content & Event Designer",permKey:"ai_content"},{path:"/app/school-calendar",icon:eh,label:"School Calendar (Board-wise)",permKey:"settings"}]},{id:"infrastructure",label:r("transport")||"Infrastructure",icon:sX,items:[{path:"/app/transport",icon:nh,label:r("transport"),permKey:"attendance"},{path:"/app/health",icon:rh,label:r("health_module"),permKey:"attendance"},{path:"/app/biometric",icon:lh,label:r("biometric"),permKey:"attendance"},{path:"/app/cctv",icon:ah,label:r("cctv_dashboard"),permKey:"cctv"}]},{id:"school_setup",label:"School Setup",icon:sX,items:[{path:"/app/setup-wizard",icon:N1,label:"Setup Wizard (Step-by-Step)",permKey:"settings",directorOnly:!0},{path:"/app/school-management",icon:sX,label:"School Profile & Branding",permKey:"settings",directorOnly:!0},{path:"/app/logo-settings",icon:Ph,label:"Logo & Watermark Settings",permKey:"settings",directorOnly:!0},{path:"/app/board-notifications",icon:Oh,label:"Board Updates (CBSE/UP/ICSE)",permKey:"settings",directorOnly:!0},{path:"/app/prayer-system",icon:jZ,label:"Prayer & Bell System",permKey:"settings"},{path:"/app/website",icon:KY,label:r("website_integration"),permKey:"website_integration"}]}].map(e=>u(u({},e),{},{items:e.items.filter(e=>{return!(e.directorOnly&&!f)&&((!e.teacherOnly||!f)&&(t=e.permKey,!!f||!0===x[t]));var t})})).filter(e=>e.items.length>0);return(0,qr.jsx)(qr.Fragment,{children:(0,qr.jsxs)("aside",{className:"fixed lg:relative top-0 left-0 h-screen w-64 z-50 lg:z-auto transform transition-transform duration-300 ease-in-out shrink-0 overflow-hidden ".concat(a?"translate-x-0":"-translate-x-full lg:translate-x-0"," flex flex-col"),style:{background:"linear-gradient(180deg, #1E293B 0%, #0F172A 100%)"},"data-testid":"sidebar",children:[(0,qr.jsx)("button",{onClick:n,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-slate-700 lg:hidden",children:(0,qr.jsx)(Em,{className:"w-5 h-5 text-slate-300"})}),(0,qr.jsx)("div",{className:"p-5 border-b border-slate-700/50",children:(0,qr.jsxs)("div",{className:"flex items-center gap-3",children:[h?(0,qr.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-lg overflow-hidden flex-shrink-0",children:(0,qr.jsx)("img",{src:h,alt:"School Logo",className:"w-full h-full object-contain"})}):(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,qr.jsx)(Fc,{className:"w-6 h-6 text-white"})}),(0,qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,qr.jsx)("h1",{className:"font-bold text-white text-base leading-tight truncate",children:(null===o||void 0===o?void 0:o.name)||"Schooltino"}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 capitalize truncate",children:(null===i||void 0===i?void 0:i.role)||"Admin"})]})]})}),(0,qr.jsx)("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:v.map(e=>(0,qr.jsxs)("div",{className:"mb-2",children:[(0,qr.jsxs)("button",{onClick:()=>{return t=e.id,void m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium text-slate-400 hover:bg-slate-700/50 hover:text-white rounded-lg transition-colors",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qr.jsx)(e.icon,{className:"w-4 h-4"}),(0,qr.jsx)("span",{children:e.label})]}),d.includes(e.id)?(0,qr.jsx)(YQ,{className:"w-4 h-4"}):(0,qr.jsx)(qc,{className:"w-4 h-4"})]}),d.includes(e.id)&&(0,qr.jsx)("div",{className:"ml-4 mt-1 space-y-0.5",children:e.items.map(e=>(0,qr.jsxs)(Ot,{to:e.path,onClick:g,className:e=>{let{isActive:t}=e;return"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all ".concat(t?"bg-blue-600 text-white font-medium shadow-md":"text-slate-300 hover:bg-slate-700/50 hover:text-white")},"data-testid":"nav-".concat(e.label.toLowerCase().replace(" ","-")),children:[(0,qr.jsx)(e.icon,{className:"w-4 h-4"}),(0,qr.jsx)("span",{children:e.label})]},e.path))})]},e.id))}),(0,qr.jsxs)("div",{className:"p-3 border-t border-slate-700/50",children:[(0,qr.jsxs)(Ot,{to:"/app/profile",onClick:g,className:"flex items-center gap-3 px-3 py-2 mb-2 rounded-lg hover:bg-slate-700/50 transition-colors cursor-pointer","data-testid":"user-profile-link",children:[(0,qr.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,qr.jsx)("span",{className:"text-white font-medium text-sm",children:(null===i||void 0===i||null===(t=i.name)||void 0===t?void 0:t.charAt(0))||"U"})}),(0,qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,qr.jsx)("p",{className:"text-sm font-medium text-white truncate",children:null===i||void 0===i?void 0:i.name}),(0,qr.jsx)("p",{className:"text-xs text-slate-400 truncate",children:null===i||void 0===i?void 0:i.email})]}),(0,qr.jsx)(qc,{className:"w-4 h-4 text-slate-500"})]}),(0,qr.jsxs)("button",{onClick:()=>{l(),c("/login")},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-rose-400 hover:bg-rose-500/10 rounded-lg transition-colors","data-testid":"logout-btn",children:[(0,qr.jsx)(rH,{className:"w-4 h-4"}),(0,qr.jsx)("span",{children:"Logout"})]})]})]})})},R1=Dc("apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);let L1=null;const F1=e=>{let{className:t=""}=e;const[a,n]=(0,s.useState)("checking"),[r,i]=(0,s.useState)(!1),[l,o]=(0,s.useState)("desktop"),[c,d]=(0,s.useState)("other");(0,s.useEffect)(()=>{const e=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(e)?o("ios"):/android/.test(e)?o("android"):o("desktop"),/edg/.test(e)?d("edge"):/chrome/.test(e)&&!/edg/.test(e)?d("chrome"):/firefox/.test(e)?d("firefox"):/safari/.test(e)&&!/chrome/.test(e)?d("safari"):/samsungbrowser/.test(e)&&d("samsung");if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://"))return void n("installed");L1&&n("available");const t=e=>{e.preventDefault(),L1=e,n("available"),console.log("\ud83d\ude80 PWA Install prompt captured!")},a=()=>{n("installed"),L1=null,Qt.success("\ud83c\udf89 Schooltino App installed successfully!"),i(!1)};window.addEventListener("beforeinstallprompt",t),window.addEventListener("appinstalled",a);const s=setTimeout(()=>{(L1||"ios"===l||"safari"===c)&&"ios"!==l&&"safari"!==c||n("available")},2e3);return()=>{window.removeEventListener("beforeinstallprompt",t),window.removeEventListener("appinstalled",a),clearTimeout(s)}},[l,c]);const u=(0,s.useCallback)(async()=>{if("installed"!==a)if(L1){n("installing");try{L1.prompt();const{outcome:e}=await L1.userChoice;"accepted"===e?(n("installed"),Qt.success("\ud83c\udf89 Installing Schooltino App...")):(n("available"),Qt.info("Install cancelled. Click again to install.")),L1=null}catch($1){console.error("Install error:",$1),i(!0)}}else i(!0);else if("serviceWorker"in navigator){(await navigator.serviceWorker.ready).update(),Qt.success("App update check initiated! \ud83d\udd04")}},[a]),m=async()=>{if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("/service-worker.js",{scope:"/",updateViaCache:"none"});console.log("SW re-registered for install prompt"),setTimeout(()=>{L1?u():i(!0)},1e3)}catch($1){console.error("SW registration failed:",$1),i(!0)}},h=(()=>{switch(a){case"checking":return{icon:lH,text:"Checking...",className:"animate-spin"};case"installing":return{icon:lH,text:"Installing...",className:"animate-spin"};case"installed":return{icon:ph,text:"Installed \u2713",className:""};default:return{icon:xh,text:"Install App",className:""}}})(),p=h.icon;return(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsxs)(Dl,{onClick:u,variant:"installed"===a?"outline":"default",size:"sm",className:"".concat(t," ").concat("installed"===a?"bg-green-50 text-green-700 border-green-300":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700"),disabled:"checking"===a||"installing"===a,children:[(0,qr.jsx)(p,{className:"w-4 h-4 mr-1 ".concat(h.className)}),(0,qr.jsx)("span",{className:"hidden sm:inline",children:h.text}),(0,qr.jsx)("span",{className:"sm:hidden",children:"installed"===a?"\u2713":(0,qr.jsx)(xh,{className:"w-4 h-4"})})]}),r?(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:()=>i(!1),children:(0,qr.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,qr.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Install Schooltino App"}),(0,qr.jsx)("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:(0,qr.jsx)(Em,{className:"w-6 h-6"})})]}),"ios"===l||"safari"===c?(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[(0,qr.jsx)(R1,{className:"w-8 h-8 text-gray-800"}),(0,qr.jsx)("span",{className:"font-medium",children:"iOS / Safari"})]}),(0,qr.jsxs)("ol",{className:"space-y-3 text-sm",children:[(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),(0,qr.jsxs)("span",{children:["Tap the ",(0,qr.jsx)("strong",{children:"Share"})," button ",(0,qr.jsx)("span",{className:"text-blue-600",children:"\u2b06\ufe0f"})," at the bottom of Safari"]})]}),(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),(0,qr.jsxs)("span",{children:["Scroll down and tap ",(0,qr.jsx)("strong",{children:'"Add to Home Screen"'})]})]}),(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),(0,qr.jsxs)("span",{children:["Tap ",(0,qr.jsx)("strong",{children:'"Add"'})," in the top right corner"]})]})]}),(0,qr.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"\ud83d\udcf1 App will appear on your home screen with Schooltino icon"})]}):"android"===l?(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[(0,qr.jsx)(dh,{className:"w-8 h-8 text-green-600"}),(0,qr.jsx)("span",{className:"font-medium",children:"Android"})]}),(0,qr.jsxs)("ol",{className:"space-y-3 text-sm",children:[(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),(0,qr.jsxs)("span",{children:["Tap the ",(0,qr.jsx)("strong",{children:"Menu"})," button ",(0,qr.jsx)("span",{className:"text-gray-600",children:"\u22ee"})," in your browser"]})]}),(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),(0,qr.jsxs)("span",{children:["Tap ",(0,qr.jsx)("strong",{children:'"Install app"'})," or ",(0,qr.jsx)("strong",{children:'"Add to Home Screen"'})]})]}),(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),(0,qr.jsxs)("span",{children:["Tap ",(0,qr.jsx)("strong",{children:'"Install"'})," to confirm"]})]})]}),(0,qr.jsxs)(Dl,{onClick:m,className:"w-full mt-4 bg-green-600 hover:bg-green-700",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Try Direct Install"]})]}):(0,qr.jsxs)("div",{className:"space-y-4",children:[(0,qr.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[(0,qr.jsx)(V$,{className:"w-8 h-8 text-blue-600"}),(0,qr.jsx)("span",{className:"font-medium",children:"Desktop (Chrome/Edge)"})]}),(0,qr.jsxs)("ol",{className:"space-y-3 text-sm",children:[(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),(0,qr.jsxs)("span",{children:["Look for the ",(0,qr.jsx)("strong",{children:"Install icon"})," \u2295 in the address bar"]})]}),(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),(0,qr.jsxs)("span",{children:["Or click ",(0,qr.jsx)("strong",{children:"Menu \u22ee"})," \u2192 ",(0,qr.jsx)("strong",{children:'"Install Schooltino"'})]})]}),(0,qr.jsxs)("li",{className:"flex items-start gap-2",children:[(0,qr.jsx)("span",{className:"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),(0,qr.jsxs)("span",{children:["Click ",(0,qr.jsx)("strong",{children:'"Install"'})," in the popup"]})]})]}),(0,qr.jsxs)(Dl,{onClick:m,className:"w-full mt-4 bg-indigo-600 hover:bg-indigo-700",children:[(0,qr.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Try Direct Install"]}),(0,qr.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\ud83d\udcbb A desktop shortcut will be created for quick access"})]}),"installed"===a&&(0,qr.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,qr.jsxs)("p",{className:"text-sm text-green-800 flex items-center gap-2",children:[(0,qr.jsx)(ph,{className:"w-5 h-5"}),"App is already installed! Open it from your home screen/desktop."]})})]})}):null]})},z1=()=>{const[e,t]=(0,s.useState)(!1),{language:a,changeLanguage:n}=$r(),{user:r,schoolData:i}=Kr(),l=Se(),o=null===i||void 0===i?void 0:i.logo_url,c=(null===i||void 0===i?void 0:i.name)||(null===r||void 0===r?void 0:r.school_name),d=[{code:"en",label:"English",flag:"\ud83c\uddec\ud83c\udde7",shortLabel:"EN"},{code:"hi",label:"\u0939\u093f\u0902\u0926\u0940",flag:"\ud83c\uddee\ud83c\uddf3",shortLabel:"\u0939\u093f"}],u=d.find(e=>e.code===a)||d[0],m=d.find(e=>e.code!==a)||d[1];return(0,s.useEffect)(()=>{if(o&&o.length>100)try{document.querySelectorAll("link[rel*='icon']").forEach(e=>e.remove());const e=document.createElement("link");e.rel="icon",e.type="image/png",e.href=o,document.head.appendChild(e);const t=document.createElement("link");t.rel="shortcut icon",t.type="image/png",t.href=o,document.head.appendChild(t);document.querySelectorAll("link[rel='apple-touch-icon']").forEach(e=>e.remove());["180x180","192x192","152x152","144x144","120x120"].forEach(e=>{const t=document.createElement("link");t.rel="apple-touch-icon",t.sizes=e,t.href=o,document.head.appendChild(t)});const a=document.createElement("link");a.rel="apple-touch-icon",a.href=o,document.head.appendChild(a);const s=document.querySelector("link[rel='manifest']");if(s){const e={name:c||"Schooltino",short_name:(null===c||void 0===c?void 0:c.split(" ")[0])||"School",icons:[{src:o,sizes:"72x72",type:"image/png",purpose:"any maskable"},{src:o,sizes:"96x96",type:"image/png",purpose:"any maskable"},{src:o,sizes:"128x128",type:"image/png",purpose:"any maskable"},{src:o,sizes:"144x144",type:"image/png",purpose:"any maskable"},{src:o,sizes:"152x152",type:"image/png",purpose:"any maskable"},{src:o,sizes:"192x192",type:"image/png",purpose:"any maskable"},{src:o,sizes:"384x384",type:"image/png",purpose:"any maskable"},{src:o,sizes:"512x512",type:"image/png",purpose:"any maskable"}],start_url:"/",display:"standalone",background_color:"#ffffff",theme_color:"#2563EB"},t=new Blob([JSON.stringify(e)],{type:"application/json"}),a=s.href;s.href=URL.createObjectURL(t),a.startsWith("blob:")&&URL.revokeObjectURL(a)}c&&(document.title="".concat(c," - Schooltino")),console.log("\u2705 App icon updated with school logo:",o.substring(0,50)+"...")}catch(e){console.error("Failed to update app icon:",e)}},[o,c]),(0,qr.jsxs)("div",{className:"min-h-screen bg-background flex relative",children:[o&&(0,qr.jsx)("div",{className:"fixed inset-0 pointer-events-none z-0 flex items-center justify-center print:hidden",style:{opacity:.04},"data-testid":"global-watermark",children:(0,qr.jsx)("img",{src:o,alt:"",className:"w-[50vw] h-[50vw] max-w-[500px] max-h-[500px] object-contain"})}),e&&(0,qr.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1),"data-testid":"sidebar-overlay"}),(0,qr.jsx)("div",{className:"hidden lg:block lg:sticky lg:top-0 lg:h-screen lg:flex-shrink-0",children:(0,qr.jsx)(I1,{isOpen:!0,onClose:()=>{}})}),(0,qr.jsx)("div",{className:"lg:hidden",children:(0,qr.jsx)(I1,{isOpen:e,onClose:()=>t(!1)})}),(0,qr.jsxs)("div",{className:"flex-1 flex flex-col min-h-screen overflow-x-hidden",children:[(0,qr.jsxs)("header",{className:"sticky top-0 h-16 bg-white border-b border-slate-200 z-30 flex items-center justify-between px-4 shadow-sm","data-testid":"app-header",children:[(0,qr.jsx)("button",{onClick:()=>t(!0),className:"lg:hidden p-2 text-slate-600 hover:bg-slate-100 rounded-lg","data-testid":"mobile-menu-btn",children:(0,qr.jsx)(P1,{className:"w-5 h-5"})}),(0,qr.jsxs)("div",{className:"lg:hidden flex items-center gap-2 flex-1 ml-2","data-testid":"mobile-header-branding",children:[o?(0,qr.jsx)("div",{className:"w-10 h-10 bg-white rounded-full p-0.5 flex-shrink-0 shadow-md border border-slate-200",children:(0,qr.jsx)("img",{src:o,alt:"",className:"w-full h-full object-contain rounded-full"})}):(0,qr.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white text-lg font-bold",children:(c||"S").charAt(0)}),(0,qr.jsx)("span",{className:"text-slate-800 font-bold text-base truncate max-w-[150px]","data-testid":"mobile-school-name",children:c||"School"})]}),(0,qr.jsxs)("div",{className:"hidden lg:flex items-center gap-4","data-testid":"desktop-header-branding",children:[o?(0,qr.jsx)("div",{className:"w-12 h-12 bg-white rounded-full p-0.5 flex-shrink-0 shadow-md border-2 border-slate-200",children:(0,qr.jsx)("img",{src:o,alt:"",className:"w-full h-full object-contain rounded-full"})}):(0,qr.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white text-xl font-bold",children:(c||"S").charAt(0)}),(0,qr.jsxs)("div",{className:"flex flex-col",children:[(0,qr.jsx)("span",{className:"text-slate-800 font-bold text-lg leading-tight tracking-tight","data-testid":"desktop-school-name",children:c||"School Management"}),(null===i||void 0===i?void 0:i.address)&&(0,qr.jsx)("span",{className:"text-slate-500 text-xs leading-tight max-w-[300px] truncate",children:i.address})]})]}),(0,qr.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,qr.jsx)(F1,{}),(0,qr.jsxs)("button",{onClick:()=>{n("en"===a?"hi":"en")},className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm transition-all border border-slate-200","data-testid":"language-toggle",title:"Switch to ".concat(m.label),children:[(0,qr.jsx)(KY,{className:"w-4 h-4"}),(0,qr.jsxs)("span",{className:"font-medium",children:[u.flag," ",u.shortLabel]}),(0,qr.jsx)("span",{className:"text-slate-400",children:"\u2192"}),(0,qr.jsxs)("span",{className:"font-medium",children:[m.flag," ",m.shortLabel]})]}),(0,qr.jsxs)("button",{onClick:()=>l("/app/tino-ai"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all shadow-sm hover:shadow-md","data-testid":"ask-tino-btn",children:[(0,qr.jsx)(lJ,{className:"w-4 h-4"}),(0,qr.jsx)("span",{className:"font-medium text-sm hidden sm:inline",children:"Ask Tino"}),(0,qr.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})]})]}),(0,qr.jsx)("main",{className:"flex-1 overflow-y-auto relative z-10",children:(0,qr.jsx)("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in",children:(0,qr.jsx)(Ge,{})})})]})]})},B1=e=>{let{children:t}=e;const{isAuthenticated:a,loading:s}=Kr();return s?(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,qr.jsx)("div",{className:"spinner w-12 h-12"})}):a?t:(0,qr.jsx)(We,{to:"/login",replace:!0})},U1=e=>{let{children:t,allowedRoles:a,redirectTo:s="/login"}=e;const{isAuthenticated:n,loading:r,user:i}=Kr();return r?(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,qr.jsx)("div",{className:"spinner w-12 h-12"})}):n?a.includes(null===i||void 0===i?void 0:i.role)?t:"student"===(null===i||void 0===i?void 0:i.role)?(0,qr.jsx)(We,{to:"/student-dashboard",replace:!0}):"teacher"===(null===i||void 0===i?void 0:i.role)?(0,qr.jsx)(We,{to:"/portal",replace:!0}):(0,qr.jsx)(We,{to:s,replace:!0}):(0,qr.jsx)(We,{to:"/login",replace:!0})},H1=e=>{let{children:t}=e;const{isAuthenticated:a,loading:s,user:n}=Kr();return s?(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,qr.jsx)("div",{className:"spinner w-12 h-12"})}):a?"student"!==(null===n||void 0===n?void 0:n.role)?(0,qr.jsx)(We,{to:"/app/dashboard",replace:!0}):t:(0,qr.jsx)(We,{to:"/studytino",replace:!0})},q1=e=>{let{children:t}=e;const{isAuthenticated:a,loading:s,user:n}=Kr();if(s)return(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,qr.jsx)("div",{className:"spinner w-12 h-12"})});if(!a)return(0,qr.jsx)(We,{to:"/login",replace:!0});return["director","principal","vice_principal","co_director"].includes(null===n||void 0===n?void 0:n.role)?t:"student"===(null===n||void 0===n?void 0:n.role)?(0,qr.jsx)(We,{to:"/student-dashboard",replace:!0}):(null===n||void 0===n||n.role,(0,qr.jsx)(We,{to:"/portal",replace:!0}))},V1=e=>{let{children:t}=e;const{isAuthenticated:a,loading:s,user:n}=Kr();if(s)return(0,qr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,qr.jsx)("div",{className:"spinner w-12 h-12"})});if(a&&n){const e=n.role;return["teacher","admission_staff","clerk","staff","admin_staff","accountant","principal","vice_principal","co_director"].includes(e)?(0,qr.jsx)(We,{to:"/portal",replace:!0}):"student"===e?(0,qr.jsx)(We,{to:"/student-dashboard",replace:!0}):"director"===e?(0,qr.jsx)(We,{to:"/app/dashboard",replace:!0}):(0,qr.jsx)(We,{to:"/portal",replace:!0})}return t};function W1(){return(0,qr.jsxs)(Je,{children:[(0,qr.jsx)(Ke,{path:"/",element:(0,qr.jsx)(Nh,{})}),(0,qr.jsx)(Ke,{path:"/owner-x7k9m2",element:(0,qr.jsx)(lZ,{})}),(0,qr.jsx)(Ke,{path:"/marketing",element:(0,qr.jsx)(qX,{})}),(0,qr.jsx)(Ke,{path:"/brochure",element:(0,qr.jsx)(qX,{})}),(0,qr.jsx)(Ke,{path:"/pamphlets",element:(0,qr.jsx)(VX,{})}),(0,qr.jsx)(Ke,{path:"/whatsapp",element:(0,qr.jsx)(VX,{})}),(0,qr.jsx)(Ke,{path:"/download-brochure",element:(0,qr.jsx)(QX,{})}),(0,qr.jsx)(Ke,{path:"/pdf",element:(0,qr.jsx)(QX,{})}),(0,qr.jsx)(Ke,{path:"/school/:schoolId",element:(0,qr.jsx)(WX,{})}),(0,qr.jsx)(Ke,{path:"/login",element:(0,qr.jsx)(V1,{children:(0,qr.jsx)(Vc,{})})}),(0,qr.jsx)(Ke,{path:"/teachtino",element:(0,qr.jsx)(F$,{})}),(0,qr.jsx)(Ke,{path:"/studytino/receipts",element:(0,qr.jsx)(H1,{children:(0,qr.jsx)(RX,{})})}),(0,qr.jsx)(Ke,{path:"/student-dashboard",element:(0,qr.jsx)(H1,{children:(0,qr.jsx)(NJ,{})})}),(0,qr.jsxs)(Ke,{path:"/app",element:(0,qr.jsx)(q1,{children:(0,qr.jsx)(z1,{})}),children:[(0,qr.jsx)(Ke,{index:!0,element:(0,qr.jsx)(We,{to:"/app/dashboard",replace:!0})}),(0,qr.jsx)(Ke,{path:"dashboard",element:(0,qr.jsx)(TU,{})}),(0,qr.jsx)(Ke,{path:"school-analytics",element:(0,qr.jsx)(p$,{})}),(0,qr.jsx)(Ke,{path:"users",element:(0,qr.jsx)(We,{to:"/app/employee-management",replace:!0})}),(0,qr.jsx)(Ke,{path:"permission-manager",element:(0,qr.jsx)(b$,{})}),(0,qr.jsx)(Ke,{path:"students",element:(0,qr.jsx)(pY,{})}),(0,qr.jsx)(Ke,{path:"staff",element:(0,qr.jsx)(We,{to:"/app/employee-management",replace:!0})}),(0,qr.jsx)(Ke,{path:"classes",element:(0,qr.jsx)(gY,{})}),(0,qr.jsx)(Ke,{path:"attendance",element:(0,qr.jsx)(jY,{})}),(0,qr.jsx)(Ke,{path:"fees",element:(0,qr.jsx)(wY,{})}),(0,qr.jsx)(Ke,{path:"notices",element:(0,qr.jsx)(EY,{})}),(0,qr.jsx)(Ke,{path:"ai-paper",element:(0,qr.jsx)(VY,{})}),(0,qr.jsx)(Ke,{path:"ai-content",element:(0,qr.jsx)(We,{to:"/app/event-designer",replace:!0})}),(0,qr.jsx)(Ke,{path:"voice-assistant",element:(0,qr.jsx)(kJ,{})}),(0,qr.jsx)(Ke,{path:"gallery",element:(0,qr.jsx)(MJ,{})}),(0,qr.jsx)(Ke,{path:"sms",element:(0,qr.jsx)(DJ,{})}),(0,qr.jsx)(Ke,{path:"website",element:(0,qr.jsx)(r$,{})}),(0,qr.jsx)(Ke,{path:"leave",element:(0,qr.jsx)(l$,{})}),(0,qr.jsx)(Ke,{path:"cctv",element:(0,qr.jsx)(u$,{})}),(0,qr.jsx)(Ke,{path:"cctv-management",element:(0,qr.jsx)(K$,{})}),(0,qr.jsx)(Ke,{path:"storage",element:(0,qr.jsx)(X$,{})}),(0,qr.jsx)(Ke,{path:"activity",element:(0,qr.jsx)(tQ,{})}),(0,qr.jsx)(Ke,{path:"accountant",element:(0,qr.jsx)(MQ,{})}),(0,qr.jsx)(Ke,{path:"fee-structure",element:(0,qr.jsx)(VQ,{})}),(0,qr.jsx)(Ke,{path:"fee-management",element:(0,qr.jsx)(H0,{})}),(0,qr.jsx)(Ke,{path:"timetable-management",element:(0,qr.jsx)(Y0,{})}),(0,qr.jsx)(Ke,{path:"certificates",element:(0,qr.jsx)(X0,{})}),(0,qr.jsx)(Ke,{path:"exam-report",element:(0,qr.jsx)(s1,{})}),(0,qr.jsx)(Ke,{path:"tino-ai",element:(0,qr.jsx)(d1,{})}),(0,qr.jsx)(Ke,{path:"tino-agent",element:(0,qr.jsx)(f1,{})}),(0,qr.jsx)(Ke,{path:"staff-directory",element:(0,qr.jsx)(We,{to:"/app/employee-management",replace:!0})}),(0,qr.jsx)(Ke,{path:"profile",element:(0,qr.jsx)(A1,{})}),(0,qr.jsx)(Ke,{path:"meetings",element:(0,qr.jsx)(k$,{})}),(0,qr.jsx)(Ke,{path:"school-registration",element:(0,qr.jsx)(S$,{})}),(0,qr.jsx)(Ke,{path:"setup-wizard",element:(0,qr.jsx)(O$,{})}),(0,qr.jsx)(Ke,{path:"subscription",element:(0,qr.jsx)(L$,{})}),(0,qr.jsx)(Ke,{path:"exams",element:(0,qr.jsx)(U$,{})}),(0,qr.jsx)(Ke,{path:"ai-history",element:(0,qr.jsx)(aX,{})}),(0,qr.jsx)(Ke,{path:"front-office",element:(0,qr.jsx)(oX,{})}),(0,qr.jsx)(Ke,{path:"transport",element:(0,qr.jsx)(mX,{})}),(0,qr.jsx)(Ke,{path:"health",element:(0,qr.jsx)(vX,{})}),(0,qr.jsx)(Ke,{path:"biometric",element:(0,qr.jsx)(jX,{})}),(0,qr.jsx)(Ke,{path:"timetable",element:(0,qr.jsx)(CX,{})}),(0,qr.jsx)(Ke,{path:"teacher-roles",element:(0,qr.jsx)(We,{to:"/app/employee-management",replace:!0})}),(0,qr.jsx)(Ke,{path:"director-ai",element:(0,qr.jsx)(MX,{})}),(0,qr.jsx)(Ke,{path:"tino-brain",element:(0,qr.jsx)(HX,{})}),(0,qr.jsx)(Ke,{path:"multi-year-fees",element:(0,qr.jsx)(DX,{})}),(0,qr.jsx)(Ke,{path:"salary",element:(0,qr.jsx)(IX,{})}),(0,qr.jsx)(Ke,{path:"admit-cards",element:(0,qr.jsx)($X,{})}),(0,qr.jsx)(Ke,{path:"audit-logs",element:(0,qr.jsx)(GY,{})}),(0,qr.jsx)(Ke,{path:"settings",element:(0,qr.jsx)(QY,{})}),(0,qr.jsx)(Ke,{path:"school-settings",element:(0,qr.jsx)(We,{to:"/app/school-management",replace:!0})}),(0,qr.jsx)(Ke,{path:"board-notifications",element:(0,qr.jsx)(RQ,{})}),(0,qr.jsx)(Ke,{path:"setup-guide",element:(0,qr.jsx)(rZ,{})}),(0,qr.jsx)(Ke,{path:"school-calendar",element:(0,qr.jsx)(vZ,{})}),(0,qr.jsx)(Ke,{path:"complaints",element:(0,qr.jsx)(bZ,{})}),(0,qr.jsx)(Ke,{path:"prayer-system",element:(0,qr.jsx)(_Z,{})}),(0,qr.jsx)(Ke,{path:"event-designer",element:(0,qr.jsx)(PZ,{})}),(0,qr.jsx)(Ke,{path:"family-portal",element:(0,qr.jsx)(TZ,{})}),(0,qr.jsx)(Ke,{path:"payment-settings",element:(0,qr.jsx)(We,{to:"/app/school-management",replace:!0})}),(0,qr.jsx)(Ke,{path:"parent-pay",element:(0,qr.jsx)(BZ,{})}),(0,qr.jsx)(Ke,{path:"school-management",element:(0,qr.jsx)(qZ,{})}),(0,qr.jsx)(Ke,{path:"employee-management",element:(0,qr.jsx)(YZ,{})}),(0,qr.jsx)(Ke,{path:"logo-settings",element:(0,qr.jsx)(z0,{})})]}),(0,qr.jsx)(Ke,{path:"/dashboard",element:(0,qr.jsx)(We,{to:"/app/dashboard",replace:!0})}),(0,qr.jsx)(Ke,{path:"/students",element:(0,qr.jsx)(We,{to:"/app/students",replace:!0})}),(0,qr.jsx)(Ke,{path:"/staff",element:(0,qr.jsx)(We,{to:"/app/staff",replace:!0})}),(0,qr.jsx)(Ke,{path:"/classes",element:(0,qr.jsx)(We,{to:"/app/classes",replace:!0})}),(0,qr.jsx)(Ke,{path:"/fees",element:(0,qr.jsx)(We,{to:"/app/fees",replace:!0})}),(0,qr.jsx)(Ke,{path:"/attendance",element:(0,qr.jsx)(We,{to:"/app/attendance",replace:!0})}),(0,qr.jsx)(Ke,{path:"/notices",element:(0,qr.jsx)(We,{to:"/app/notices",replace:!0})}),(0,qr.jsx)(Ke,{path:"/settings",element:(0,qr.jsx)(We,{to:"/app/settings",replace:!0})}),(0,qr.jsx)(Ke,{path:"/teacher-dashboard",element:(0,qr.jsx)(U1,{allowedRoles:["teacher","principal","vice_principal"],redirectTo:"/login",children:(0,qr.jsx)(hJ,{})})}),(0,qr.jsx)(Ke,{path:"/portal",element:(0,qr.jsx)(U1,{allowedRoles:["teacher","admission_staff","clerk","staff","admin_staff","accountant","principal","vice_principal","co_director"],redirectTo:"/login",children:(0,qr.jsx)(zX,{})})}),(0,qr.jsx)(Ke,{path:"/student-dashboard",element:(0,qr.jsx)(B1,{children:(0,qr.jsx)(NJ,{})})}),(0,qr.jsx)(Ke,{path:"/studytino",element:(0,qr.jsx)(zZ,{})}),(0,qr.jsx)(Ke,{path:"/parent-portal",element:(0,qr.jsx)(LZ,{})}),(0,qr.jsx)(Ke,{path:"/fee-payment",element:(0,qr.jsx)(B1,{children:(0,qr.jsx)(_Q,{})})}),(0,qr.jsx)(Ke,{path:"*",element:(0,qr.jsx)(K1,{})})]})}function G1(){return(0,qr.jsx)(bh,{})}function K1(){const{user:e,isAuthenticated:t}=Kr();if(!t||!e)return(0,qr.jsx)(We,{to:"/login",replace:!0});const a=e.role;return"student"===a?(0,qr.jsx)(We,{to:"/student-dashboard",replace:!0}):"director"===a?(0,qr.jsx)(We,{to:"/app/dashboard",replace:!0}):(0,qr.jsx)(We,{to:"/portal",replace:!0})}const Y1=function(){return(0,qr.jsx)(Et,{children:(0,qr.jsx)(Gr,{children:(0,qr.jsxs)(Jr,{children:[(0,qr.jsx)(W1,{}),(0,qr.jsx)(G1,{}),(0,qr.jsx)(j1,{}),(0,qr.jsx)(v1,{}),(0,qr.jsx)(ra,{position:"top-right",richColors:!0,closeButton:!0,toastOptions:{style:{fontFamily:"Inter, sans-serif"}}})]})})})};if(r.createRoot(document.getElementById("root")).render((0,qr.jsx)(s.StrictMode,{children:(0,qr.jsx)(Y1,{})})),"serviceWorker"in navigator){window.addEventListener("load",async()=>{try{const e=await navigator.serviceWorker.register("/service-worker.js",{scope:"/",updateViaCache:"none"});console.log("[PWA] SW registered:",e.scope),setInterval(()=>{e.update()},36e5),e.addEventListener("updatefound",()=>{const t=e.installing;console.log("[PWA] New SW installing..."),null===t||void 0===t||t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("[PWA] New content available, will activate on next load")})})}catch(e){console.error("[PWA] SW registration failed:",e)}});let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(e=!0,console.log("[PWA] Controller changed, reloading..."),window.location.reload())})}})()})();