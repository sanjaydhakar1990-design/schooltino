/*! For license information please see 6275.2ba24c3f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6275],{3390(e,t,a){a.d(t,{$:()=>u});var s=a(2555),r=a(3986),n=a(5043),i=a(6851),o=a(917),l=a(1089),c=a(579);const d=["className","variant","size","asChild"],h=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-500 text-white shadow-sm hover:bg-blue-600 rounded-lg",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-50 text-gray-700 rounded-lg",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:a,variant:n,size:o,asChild:u=!1}=e,m=(0,r.A)(e,d);const p=u?i.DX:"button";return(0,c.jsx)(p,(0,s.A)({className:(0,l.cn)(h({variant:n,size:o,className:a})),ref:t},m))});u.displayName="Button"},1089(e,t,a){a.d(t,{cn:()=>n});var s=a(8387),r=a(9359);function n(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},6275(e,t,a){a.r(t),a.d(t,{default:()=>k});var s=a(5043),r=a(6930),n=a(8729),i=a(9722),o=a(3390),l=a(2024),c=a(2629),d=a(6210),h=a(7719),u=a(8646),m=a(6099),p=a(73),x=a(6376),y=a(7784);const f=(0,y.A)("badge-percent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);var g=a(5692),v=a(2489);const b=(0,y.A)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);var j=a(3944),w=a(6328),N=a(7353),A=a(579);const _="".concat("","/api");function k(){const{t:e}=(0,r.Bd)(),{user:t,schoolId:a}=(0,n.As)(),{error:y,isLoading:k,Razorpay:z}=(0,N.useRazorpay)(),[P,M]=(0,s.useState)(!0),[R,S]=(0,s.useState)([]),[F,I]=(0,s.useState)(null),[L,C]=(0,s.useState)(null),[O,E]=(0,s.useState)(null);(0,s.useEffect)(()=>{B()},[a]);const B=async()=>{try{const e=localStorage.getItem("token"),t=e?{Authorization:"Bearer ".concat(e)}:{},[s,r,n]=await Promise.all([i.A.get("".concat(_,"/subscription/plans")),a?i.A.get("".concat(_,"/subscription/current/").concat(a),{headers:t}):Promise.resolve({data:null}),i.A.get("".concat(_,"/payments/config"))]);S(s.data.plans),I(r.data),E(n.data)}catch(e){console.error("Error fetching subscription data:",e)}finally{M(!1)}},q=(0,s.useCallback)(async e=>{if(a)if(null!==O&&void 0!==O&&O.configured)if(k)w.oR.info("Payment gateway is loading. Please wait...");else if(y)w.oR.error("Failed to load payment gateway. Please refresh the page.");else if(z){C(e);try{const s=localStorage.getItem("token"),r=await i.A.post("".concat(_,"/payments/create-order"),{plan_type:e,school_id:a},{headers:{Authorization:"Bearer ".concat(s)}}),{order_id:n,amount:o,key_id:l}=r.data,c={key:l,amount:o,currency:"INR",name:"Schooltino",description:"".concat("monthly"===e?"Monthly":"Yearly"," Subscription"),order_id:n,handler:async t=>{try{(await i.A.post("".concat(_,"/payments/verify"),{razorpay_order_id:t.razorpay_order_id,razorpay_payment_id:t.razorpay_payment_id,razorpay_signature:t.razorpay_signature,school_id:a,plan_type:e},{headers:{Authorization:"Bearer ".concat(s)}})).data.success&&(w.oR.success("Payment successful! Subscription activated."),B())}catch(r){w.oR.error("Payment verification failed. Please contact support.")}},prefill:{name:(null===t||void 0===t?void 0:t.name)||"",email:(null===t||void 0===t?void 0:t.email)||"",contact:(null===t||void 0===t?void 0:t.phone)||""},theme:{color:"#4F46E5"},modal:{ondismiss:()=>{C(null),w.oR.info("Payment cancelled")}}};new z(c).open()}catch(n){var s,r;w.oR.error((null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.detail)||"Failed to initiate payment")}finally{C(null)}}else w.oR.error("Payment gateway not available. Please refresh the page.");else w.oR.error("Payment gateway not configured. Please contact support.");else w.oR.error("Please complete school registration first")},[z,k,y,a,t,O]);return P?(0,A.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,A.jsx)(l.A,{className:"w-10 h-10 animate-spin text-indigo-600"})}):(0,A.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8","data-testid":"subscription-page",children:[(0,A.jsxs)("div",{className:"text-center",children:[(0,A.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center justify-center gap-3",children:[(0,A.jsx)(c.A,{className:"w-8 h-8 text-amber-500"}),e("subscription")||"Subscription Plans"]}),(0,A.jsx)("p",{className:"text-slate-500 mt-2",children:"Choose the perfect plan for your school"})]}),F&&"no_subscription"!==F.status&&(0,A.jsx)("div",{className:"rounded-2xl p-6 ".concat("active"===F.status?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":"bg-amber-50 border-2 border-amber-200 text-amber-900"),children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-xl font-bold flex items-center gap-2",children:"active"===F.status?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d.A,{className:"w-6 h-6"}),"Active: ","free_trial"===F.plan_type?"Free Trial":"monthly"===F.plan_type?"Monthly Plan":"Yearly Plan"]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(h.A,{className:"w-6 h-6"}),"Subscription ",F.status]})}),"active"===F.status&&(0,A.jsxs)("div",{className:"mt-2 flex items-center gap-6 text-sm",children:[(0,A.jsxs)("span",{className:"flex items-center gap-1",children:[(0,A.jsx)(u.A,{className:"w-4 h-4"}),F.days_remaining," days remaining"]}),F.ai_active?(0,A.jsxs)("span",{className:"flex items-center gap-1",children:[(0,A.jsx)(m.A,{className:"w-4 h-4"}),"AI: ",F.ai_days_remaining," days left"]}):(0,A.jsxs)("span",{className:"flex items-center gap-1 opacity-75",children:[(0,A.jsx)(m.A,{className:"w-4 h-4"}),"AI trial ended"]})]})]}),"expired"===F.status&&(0,A.jsx)(o.$,{className:"bg-amber-600 hover:bg-amber-700",children:"Renew Now"})]})}),(0,A.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:R.map(e=>{const t=(null===F||void 0===F?void 0:F.plan_type)===e.id&&"active"===(null===F||void 0===F?void 0:F.status),s="yearly"===e.id;return(0,A.jsxs)("div",{className:"relative bg-white rounded-2xl border-2 p-6 transition-all ".concat(s?"border-indigo-500 shadow-xl scale-105":"border-slate-200 hover:border-indigo-200 hover:shadow-lg"),children:[e.badge&&(0,A.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:(0,A.jsx)("span",{className:"px-4 py-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-semibold rounded-full",children:e.badge})}),(0,A.jsxs)("div",{className:"text-center mb-6",children:[(0,A.jsx)("div",{className:"w-14 h-14 mx-auto rounded-2xl flex items-center justify-center mb-4 ".concat("free_trial"===e.id?"bg-emerald-100":"monthly"===e.id?"bg-blue-100":"bg-purple-100"),children:"free_trial"===e.id?(0,A.jsx)(p.A,{className:"w-7 h-7 text-emerald-600"}):"monthly"===e.id?(0,A.jsx)(x.A,{className:"w-7 h-7 text-blue-600"}):(0,A.jsx)(c.A,{className:"w-7 h-7 text-purple-600"})}),(0,A.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:e.name}),(0,A.jsx)("p",{className:"text-sm text-slate-500",children:e.duration})]}),(0,A.jsxs)("div",{className:"text-center mb-6",children:[e.original_price&&(0,A.jsx)("p",{className:"text-sm text-slate-400 line-through",children:e.original_price}),(0,A.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:e.price_display}),e.savings&&(0,A.jsxs)("p",{className:"text-sm text-emerald-600 font-medium flex items-center justify-center gap-1 mt-1",children:[(0,A.jsx)(f,{className:"w-4 h-4"}),e.savings]}),e.ai_note&&(0,A.jsxs)("p",{className:"text-xs text-amber-600 mt-2 bg-amber-50 px-3 py-1 rounded-full inline-block",children:["\u26a1 ",e.ai_note]})]}),(0,A.jsx)("ul",{className:"space-y-3 mb-6",children:e.features.map((e,t)=>(0,A.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,A.jsx)(d.A,{className:"w-5 h-5 text-emerald-500 flex-shrink-0"}),(0,A.jsx)("span",{className:"text-slate-600",children:e})]},t))}),(0,A.jsx)(o.$,{onClick:()=>(async e=>{if(a)if("free_trial"!==e&&null!==O&&void 0!==O&&O.configured)q(e);else{C(e);try{const t=localStorage.getItem("token");await i.A.post("".concat(_,"/subscription/activate"),{plan_type:e,school_id:a},{headers:{Authorization:"Bearer ".concat(t)}}),w.oR.success("Plan activated successfully!"),B()}catch(r){var t,s;w.oR.error((null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to activate plan")}finally{C(null)}}else w.oR.error("Please complete school registration first")})(e.id),disabled:t||L===e.id,className:"w-full ".concat(t?"bg-slate-100 text-slate-500 cursor-not-allowed":s?"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700":"bg-slate-900 hover:bg-slate-800"),children:L===e.id?(0,A.jsx)(l.A,{className:"w-5 h-5 animate-spin"}):t?"Current Plan":"free_trial"===e.id?(0,A.jsxs)(A.Fragment,{children:["Start Free Trial ",(0,A.jsx)(g.A,{className:"w-4 h-4 ml-2"})]}):(0,A.jsxs)(A.Fragment,{children:["Subscribe Now ",(0,A.jsx)(g.A,{className:"w-4 h-4 ml-2"})]})})]},e.id)})}),(0,A.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:[(0,A.jsx)("h2",{className:"text-xl font-bold text-slate-900 text-center mb-8",children:"All Plans Include"}),(0,A.jsx)("div",{className:"grid md:grid-cols-4 gap-6",children:[{icon:v.A,title:"Secure Data",desc:"Bank-level security for your data"},{icon:m.A,title:"AI Features",desc:"Smart automation & insights"},{icon:b,title:"24/7 Support",desc:"Always here to help you"},{icon:j.A,title:"Free Updates",desc:"Latest features automatically"}].map((e,t)=>(0,A.jsxs)("div",{className:"text-center",children:[(0,A.jsx)("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,A.jsx)(e.icon,{className:"w-6 h-6 text-indigo-600"})}),(0,A.jsx)("h3",{className:"font-semibold text-slate-900",children:e.title}),(0,A.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.desc})]},t))})]}),(0,A.jsx)("div",{className:"text-center py-8",children:(0,A.jsxs)("p",{className:"text-slate-500",children:["Questions about pricing? Contact us at"," ",(0,A.jsx)("a",{href:"mailto:support@schooltino.in",className:"text-indigo-600 font-medium",children:"support@schooltino.in"})]})})]})}},5692(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},6210(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6376(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},2629(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},2024(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6099(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},3944(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},7719(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},73(e,t,a){a.d(t,{A:()=>s});const s=(0,a(7784).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},7353(e,t,a){var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,s,r)}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useRazorpay=void 0;const o=n(a(5043)),l=i(a(2131));t.useRazorpay=()=>{const[e,t]=o.useState(!1),[a,s]=o.useState(),r="undefined"!==typeof window;return o.useEffect(()=>{var e;r&&(t(!0),r&&"Razorpay"in window||(e="https://checkout.razorpay.com/v1/checkout.js",new Promise((t,a)=>{const s=window.document.createElement("script");s.src=e,s.onload=function(){t()},s.onerror=function(e){a(e.toString())},document.body.appendChild(s)})).then(()=>{s(void 0)}).catch(e=>{e instanceof Error?s(e.message):s("Unknown Error")}).finally(()=>t(!1)))},[]),{error:a,isLoading:e,Razorpay:l.default}}},2131(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.instance=void 0,this.options=e,"undefined"!==typeof window&&(this.instance=new window.Razorpay(this.options))}on(e,t){if(!this.instance)throw new Error("Razorpay Instance in not ready");this.instance.on(e,t)}open(){if(!this.instance)throw new Error("Razorpay Instance in not ready");this.instance.open()}}}}]);
//# sourceMappingURL=6275.2ba24c3f.chunk.js.map