/*! For license information please see 6860.7439e92d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6860],{6860(e,t,a){a.r(t),a.d(t,{default:()=>L});var s=a(9950),l=a(5010),n=a(5030),r=a(5532),i=a(6910),o=a(2989),c=a(8890),d=a(9318),m=a(9975),p=a(2626),h=a(552),x=a(872),g=a(6958),u=a(5097),b=a(1850),f=a(7637),y=a(6195),v=a(6274),j=a(7737),k=a(903),_=a(9129),w=a(4985),N=a(1878),A=a(1946),C=a(6649),q=a(9201),S=a(8134),z=a(5120),B=a(7143),M=a(4799),I=a(9585);const U=(0,a(6230).A)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var E=a(602),D=a(983),H=a(4414);const F="".concat("","/api");function L(){var e,t;const{t:a}=(0,n.Bd)(),L=(0,l.Zp)(),{schoolId:K,user:R,schoolData:J}=(0,r.As)(),[O,P]=(0,s.useState)(null),[T,Z]=(0,s.useState)(!0),[G,Q]=(0,s.useState)(null),[V,W]=(0,s.useState)([]),[X,Y]=(0,s.useState)(0),[$,ee]=(0,s.useState)({}),te=(0,s.useCallback)(()=>{try{const e=localStorage.getItem("module_visibility_settings");e&&ee(JSON.parse(e))}catch(e){console.error("Error loading module visibility:",e)}},[]);(0,s.useEffect)(()=>{te();const e=()=>te();return window.addEventListener("module_visibility_changed",e),()=>window.removeEventListener("module_visibility_changed",e)},[te]);const ae=(0,s.useCallback)(async()=>{if(K)try{Q(null);const e=localStorage.getItem("token"),t=await i.A.get("".concat(F,"/dashboard/stats?school_id=").concat(K),{headers:{Authorization:"Bearer ".concat(e)}});P(t.data)}catch(e){console.error("Failed to fetch stats:",e),P({total_students:0,total_staff:0,fee_collection_month:0,attendance_today:{present:0},pending_fees:0})}finally{Z(!1)}else Z(!1)},[K]),se=(0,s.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t=await i.A.get("".concat(F,"/admin/teacher-requests?status=pending"),{headers:{Authorization:"Bearer ".concat(e)}});W(t.data||[])}catch(e){console.error("Teacher requests fetch failed:",e)}},[]),le=(0,s.useCallback)(async()=>{try{var e;const t=localStorage.getItem("token"),a=await i.A.get("".concat(F,"/admin/pending-count"),{headers:{Authorization:"Bearer ".concat(t)}});Y((null===(e=a.data)||void 0===e?void 0:e.pending_requests)||0)}catch(t){console.error("Pending count fetch failed:",t)}},[]);(0,s.useEffect)(()=>{K?(ae(),"director"!==(null===R||void 0===R?void 0:R.role)&&"principal"!==(null===R||void 0===R?void 0:R.role)&&"admin"!==(null===R||void 0===R?void 0:R.role)||(se(),le())):Z(!1)},[K,null===R||void 0===R?void 0:R.role,ae,se,le]);if(T)return(0,H.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 gap-3",children:[(0,H.jsx)(o.A,{className:"w-8 h-8 animate-spin text-blue-500"}),(0,H.jsx)("p",{className:"text-sm text-gray-400",children:a("loading")})]});if(!K)return(0,H.jsxs)("div",{className:"text-center py-20",children:[(0,H.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:(0,H.jsx)(c.A,{className:"w-10 h-10 text-white"})}),(0,H.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:a("welcome_to_dashboard")}),(0,H.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:a("setup_school_desc")}),(0,H.jsxs)("button",{onClick:()=>L("/app/settings"),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-medium text-sm hover:bg-blue-700 inline-flex items-center gap-2",children:[(0,H.jsx)(d.A,{className:"w-4 h-4"}),a("get_started")]})]});const ne=O||{total_students:0,total_staff:0,fee_collection_month:0,attendance_today:{present:0},pending_fees:0},re=[{label:a("total_students"),value:ne.total_students||0,icon:m.A,gradient:"from-blue-500 to-blue-600",trend:"+12%",trendUp:!0},{label:a("total_staff"),value:ne.total_staff||0,icon:p.A,gradient:"from-purple-500 to-purple-600",trend:"+5%",trendUp:!0},{label:a("fee_collected"),value:"\u20b9".concat(((ne.fee_collection_month||0)/1e3).toFixed(0),"K"),icon:h.A,gradient:"from-emerald-500 to-teal-600",trend:"+18%",trendUp:!0},{label:a("attendance_today"),value:"".concat((null===(e=ne.attendance_today)||void 0===e?void 0:e.present)||0,"%"),icon:x.A,gradient:"from-orange-500 to-amber-600",trend:"+2%",trendUp:!0},{label:a("pending_fees"),value:"\u20b9".concat(((ne.pending_fees||0)/1e3).toFixed(0),"K"),icon:g.A,gradient:"from-red-500 to-rose-600",trend:"-8%",trendUp:!1}],ie=[{icon:u.A,label:a("new_admissions"),path:"/app/students",color:"bg-blue-500",lightBg:"bg-blue-50",textColor:"text-blue-600"},{icon:x.A,label:a("mark_attendance"),path:"/app/attendance",color:"bg-purple-500",lightBg:"bg-purple-50",textColor:"text-purple-600"},{icon:h.A,label:a("collect_fee"),path:"/app/fees",color:"bg-emerald-500",lightBg:"bg-emerald-50",textColor:"text-emerald-600"},{icon:b.A,label:a("send_notice"),path:"/app/communication",color:"bg-orange-500",lightBg:"bg-orange-50",textColor:"text-orange-600"},{icon:f.A,label:a("create_exam"),path:"/app/exams",color:"bg-pink-500",lightBg:"bg-pink-50",textColor:"text-pink-600"},{icon:y.A,label:a("ai_tools"),path:"/app/ai-tools",color:"bg-indigo-500",lightBg:"bg-indigo-50",textColor:"text-indigo-600"}],oe=[{icon:m.A,label:a("students"),desc:a("student_list"),path:"/app/students",gradient:"from-blue-500 to-blue-600",mk:"students"},{icon:p.A,label:a("staff"),desc:a("staff_management"),path:"/app/staff",gradient:"from-purple-500 to-violet-500",mk:"staff"},{icon:c.A,label:a("classes"),desc:a("class_list"),path:"/app/classes",gradient:"from-cyan-500 to-blue-500",mk:"classes"},{icon:x.A,label:a("attendance"),desc:a("view_attendance"),path:"/app/attendance",gradient:"from-teal-500 to-emerald-500",mk:"attendance"},{icon:h.A,label:a("fees"),desc:a("fee_management"),path:"/app/fees",gradient:"from-emerald-500 to-green-500",mk:"fee_management"},{icon:v.A,label:a("admissions"),desc:a("admissions_crm"),path:"/app/admissions",gradient:"from-cyan-500 to-blue-500",mk:"admissions"},{icon:f.A,label:a("exams"),desc:a("exams_reports"),path:"/app/exams",gradient:"from-pink-500 to-rose-500",mk:"exams_reports"},{icon:j.A,label:a("timetable"),desc:a("schedule_class"),path:"/app/timetable",gradient:"from-indigo-500 to-blue-500",mk:"timetable"},{icon:k.A,label:a("library"),desc:a("digital_library"),path:"/app/library",gradient:"from-purple-500 to-fuchsia-500",mk:"digital_library"},{icon:_.A,label:a("homework"),desc:a("homework_list"),path:"/app/homework",gradient:"from-amber-500 to-orange-500",mk:"homework"},{icon:w.A,label:a("live_classes"),desc:a("online_class"),path:"/app/live-classes",gradient:"from-red-500 to-rose-500",mk:"live_classes"},{icon:N.A,label:a("communication"),desc:a("communication_hub"),path:"/app/communication",gradient:"from-sky-500 to-cyan-500",mk:"communication_hub"},{icon:A.A,label:a("front_office"),desc:a("visitor_management"),path:"/app/front-office",gradient:"from-teal-500 to-cyan-500",mk:"front_office"},{icon:C.A,label:a("transport"),desc:a("gps_tracking"),path:"/app/transport",gradient:"from-orange-500 to-red-500",mk:"transport"},{icon:q.A,label:a("calendar"),desc:a("events"),path:"/app/calendar",gradient:"from-emerald-500 to-teal-500",mk:"calendar"},{icon:S.A,label:a("analytics"),desc:a("reports"),path:"/app/analytics",gradient:"from-blue-500 to-indigo-500",mk:"analytics"},{icon:y.A,label:a("ai_tools"),desc:a("ai_paper"),path:"/app/ai-tools",gradient:"from-purple-500 to-pink-500",mk:"ai_tools"},{icon:z.A,label:a("cctv"),desc:a("cctv_integration"),path:"/app/cctv",gradient:"from-red-500 to-rose-500",mk:"cctv"},{icon:B.A,label:a("inventory"),desc:a("item_list"),path:"/app/inventory",gradient:"from-slate-500 to-zinc-600",mk:"inventory"},{icon:M.A,label:a("multi_branch"),desc:a("branch_list"),path:"/app/multi-branch",gradient:"from-blue-500 to-indigo-500",mk:"multi_branch"}].filter(e=>{return!(t=e.mk)||!$[t]||!1!==$[t].schooltino;var t}),ce=(new Date).getHours(),de=a(ce<12?"good_morning":ce<17?"good_afternoon":"good_evening");return(0,H.jsxs)("div",{className:"space-y-8 max-w-7xl",children:[(0,H.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[(0,H.jsxs)("div",{children:[(0,H.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:de}),(0,H.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:(null===R||void 0===R||null===(t=R.name)||void 0===t?void 0:t.split(" ")[0])||a("dashboard")}),(0,H.jsx)("p",{className:"text-sm text-gray-400 mt-0.5",children:(null===J||void 0===J?void 0:J.name)||a("dashboard")})]}),(0,H.jsxs)("div",{className:"flex items-center gap-3",children:[(0,H.jsxs)("button",{onClick:()=>L("/app/analytics"),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all shadow-sm",children:[(0,H.jsx)(S.A,{className:"w-4 h-4 text-blue-500"}),(0,H.jsx)("span",{className:"hidden sm:inline",children:a("analytics")})]}),(0,H.jsxs)("button",{onClick:()=>L("/app/settings"),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-xl text-sm font-medium hover:bg-blue-700 transition-all shadow-sm",children:[(0,H.jsx)(d.A,{className:"w-4 h-4"}),(0,H.jsx)("span",{className:"hidden sm:inline",children:a("settings")})]})]})]}),(0,H.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:re.map((e,t)=>(0,H.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,H.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br ".concat(e.gradient," flex items-center justify-center"),children:(0,H.jsx)(e.icon,{className:"w-5 h-5 text-white"})}),(0,H.jsxs)("div",{className:"flex items-center gap-1 text-xs font-semibold px-2 py-1 rounded-full ".concat(e.trendUp?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-500"),children:[e.trendUp?(0,H.jsx)(I.A,{className:"w-3 h-3"}):(0,H.jsx)(U,{className:"w-3 h-3"}),e.trend]})]}),(0,H.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-0.5",children:e.value}),(0,H.jsx)("div",{className:"text-xs text-gray-500 font-medium",children:e.label})]},t))}),(0,H.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,H.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:a("quick_actions")}),(0,H.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:ie.map((e,t)=>(0,H.jsxs)("button",{onClick:()=>L(e.path),className:"flex flex-col items-center gap-2.5 p-4 ".concat(e.lightBg," rounded-xl hover:shadow-md hover:-translate-y-0.5 transition-all duration-200 border border-transparent hover:border-gray-200"),children:[(0,H.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-xl flex items-center justify-center shadow-sm"),children:(0,H.jsx)(e.icon,{className:"w-5 h-5 text-white"})}),(0,H.jsx)("span",{className:"text-xs font-semibold ".concat(e.textColor),children:e.label})]},t))})]}),V.length>0&&("director"===(null===R||void 0===R?void 0:R.role)||"principal"===(null===R||void 0===R?void 0:R.role))&&(0,H.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-amber-200 p-6",children:[(0,H.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,H.jsxs)("div",{className:"flex items-center gap-3",children:[(0,H.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,H.jsx)(b.A,{className:"w-5 h-5 text-amber-600"})}),(0,H.jsxs)("div",{children:[(0,H.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:a("teacher_requests_pending")}),(0,H.jsxs)("p",{className:"text-xs text-gray-500",children:[V.length," ",a("requests_waiting_action")]})]})]})}),(0,H.jsx)("div",{className:"space-y-3",children:V.slice(0,5).map(e=>{var t;return(0,H.jsxs)("div",{className:"flex items-center justify-between p-4 bg-amber-50 rounded-xl border border-amber-100",children:[(0,H.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,H.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,H.jsx)("span",{className:"text-sm font-bold text-gray-800",children:e.title}),(0,H.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700 capitalize",children:e.request_type})]}),(0,H.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:[e.teacher_name," - ",null===(t=e.description)||void 0===t?void 0:t.slice(0,80)]}),(0,H.jsx)("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(e.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,H.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,H.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token");await i.A.put("".concat(F,"/admin/teacher-requests/").concat(e),{action:"approved",note:"Approved by admin"},{headers:{Authorization:"Bearer ".concat(t)}}),W(t=>t.filter(t=>t.id!==e)),Y(e=>Math.max(0,e-1))}catch(t){console.error("Approve failed:",t)}})(e.id),className:"px-4 py-2 bg-green-500 text-white text-xs font-medium rounded-lg hover:bg-green-600 transition-colors",children:a("approve")}),(0,H.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token");await i.A.put("".concat(F,"/admin/teacher-requests/").concat(e),{action:"rejected",note:"Rejected by admin"},{headers:{Authorization:"Bearer ".concat(t)}}),W(t=>t.filter(t=>t.id!==e)),Y(e=>Math.max(0,e-1))}catch(t){console.error("Reject failed:",t)}})(e.id),className:"px-4 py-2 bg-red-500 text-white text-xs font-medium rounded-lg hover:bg-red-600 transition-colors",children:a("reject")})]})]},e.id)})})]}),(0,H.jsxs)("div",{children:[(0,H.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,H.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:a("all_modules")}),(0,H.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:oe.length})]}),(0,H.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-5 gap-4",children:oe.map((e,t)=>(0,H.jsxs)("button",{onClick:()=>L(e.path),className:"flex flex-col items-center gap-3 p-5 bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200 group",children:[(0,H.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br ".concat(e.gradient," rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform duration-200"),children:(0,H.jsx)(e.icon,{className:"w-6 h-6 text-white"})}),(0,H.jsxs)("div",{className:"text-center",children:[(0,H.jsx)("span",{className:"text-xs font-semibold text-gray-800 block",children:e.label}),(0,H.jsx)("span",{className:"text-[10px] text-gray-400",children:e.desc})]})]},t))})]}),(0,H.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 text-white",children:(0,H.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,H.jsxs)("div",{children:[(0,H.jsx)("h3",{className:"text-lg font-bold mb-1",children:a("need_help_setup")}),(0,H.jsx)("p",{className:"text-white/70 text-sm",children:a("setup_wizard_desc")})]}),(0,H.jsxs)("button",{onClick:()=>L("/app/setup-wizard"),className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-blue-600 rounded-xl font-semibold text-sm hover:bg-blue-50 transition-all shadow-lg",children:[(0,H.jsx)(E.A,{className:"w-4 h-4"}),a("setup_wizard"),(0,H.jsx)(D.A,{className:"w-4 h-4"})]})]})})]})}},9585(e,t,a){a.d(t,{A:()=>s});const s=(0,a(6230).A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},552(e,t,a){a.d(t,{A:()=>s});const s=(0,a(6230).A)("indian-rupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]])},2989(e,t,a){a.d(t,{A:()=>s});const s=(0,a(6230).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2626(e,t,a){a.d(t,{A:()=>s});const s=(0,a(6230).A)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},5097(e,t,a){a.d(t,{A:()=>s});const s=(0,a(6230).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},602(e,t,a){a.d(t,{A:()=>s});const s=(0,a(6230).A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]])}}]);