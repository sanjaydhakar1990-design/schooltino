/*! For license information please see 1774.993b3450.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1774],{5949(e,s,a){a.d(s,{E:()=>o});var t=a(2555),l=a(3986),r=(a(5043),a(917)),n=a(1089),i=a(579);const c=["className","variant"],d=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:a}=e,r=(0,l.A)(e,c);return(0,i.jsx)("div",(0,t.A)({className:(0,n.cn)(d({variant:a}),s)},r))}},3390(e,s,a){a.d(s,{$:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(6851),i=a(917),c=a(1089),d=a(579);const o=["className","variant","size","asChild"],m=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-500 text-white shadow-sm hover:bg-blue-600 rounded-lg",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-50 text-gray-700 rounded-lg",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),x=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:x=!1}=e,h=(0,l.A)(e,o);const p=x?n.DX:"button";return(0,d.jsx)(p,(0,t.A)({className:(0,c.cn)(m({variant:r,size:i,className:a})),ref:s},h))});x.displayName="Button"},1140(e,s,a){a.d(s,{BT:()=>j,Wu:()=>N,ZB:()=>u,Zp:()=>p,aR:()=>g});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const c=["className"],d=["className"],o=["className"],m=["className"],x=["className"],h=["className"],p=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("rounded-xl border border-gray-200 bg-white text-gray-900 shadow-sm",a)},r))});p.displayName="Card";const g=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,d);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-5",a)},r))});g.displayName="CardHeader";const u=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",a)},r))});u.displayName="CardTitle";const j=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,m);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a)},r))});j.displayName="CardDescription";const N=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,x);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("p-5 pt-0",a)},r))});N.displayName="CardContent";r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,i.jsx)("div",(0,t.A)({ref:s,className:(0,n.cn)("flex items-center p-5 pt-0",a)},r))}).displayName="CardFooter"},5598(e,s,a){a.d(s,{Cf:()=>f,L3:()=>v,c7:()=>b,lG:()=>g,rr:()=>y,zM:()=>u});var t=a(2555),l=a(3986),r=a(5043),n=a(7427),i=a(614),c=a(1089),d=a(579);const o=["className"],m=["className","children"],x=["className"],h=["className"],p=["className"],g=n.bL,u=n.l9,j=n.ZL,N=(n.bm,r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,d.jsx)(n.hJ,(0,t.A)({ref:s,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},r))}));N.displayName=n.hJ.displayName;const f=r.forwardRef((e,s)=>{let{className:a,children:r}=e,o=(0,l.A)(e,m);return(0,d.jsxs)(j,{children:[(0,d.jsx)(N,{}),(0,d.jsxs)(n.UC,(0,t.A)((0,t.A)({ref:s,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},o),{},{children:[r,(0,d.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(i.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});f.displayName=n.UC.displayName;const b=e=>{let{className:s}=e,a=(0,l.A)(e,x);return(0,d.jsx)("div",(0,t.A)({className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s)},a))};b.displayName="DialogHeader";const v=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,d.jsx)(n.hE,(0,t.A)({ref:s,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",a)},r))});v.displayName=n.hE.displayName;const y=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,p);return(0,d.jsx)(n.VY,(0,t.A)({ref:s,className:(0,c.cn)("text-sm text-muted-foreground",a)},r))});y.displayName=n.VY.displayName},2264(e,s,a){a.d(s,{p:()=>d});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const c=["className","type"],d=r.forwardRef((e,s)=>{let{className:a,type:r}=e,d=(0,l.A)(e,c);return(0,i.jsx)("input",(0,t.A)({type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-white px-3 py-1 text-base text-gray-900 shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s},d))});d.displayName="Input"},9938(e,s,a){a.d(s,{J:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(5131),i=a(917),c=a(1089),d=a(579);const o=["className"],m=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,d.jsx)(n.b,(0,t.A)({ref:s,className:(0,c.cn)(m(),a)},r))});x.displayName=n.b.displayName},1654(e,s,a){a.d(s,{d:()=>o});var t=a(2555),l=a(3986),r=a(5043),n=a(7943),i=a(1089),c=a(579);const d=["className"],o=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,d);return(0,c.jsx)(n.bL,(0,t.A)((0,t.A)({className:(0,i.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a)},r),{},{ref:s,children:(0,c.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}))});o.displayName=n.bL.displayName},9690(e,s,a){a.d(s,{Xi:()=>p,av:()=>g,j7:()=>h,tU:()=>x});var t=a(2555),l=a(3986),r=a(5043),n=a(7127),i=a(1089),c=a(579);const d=["className"],o=["className"],m=["className"],x=n.bL,h=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,d);return(0,c.jsx)(n.B8,(0,t.A)({ref:s,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-gray-100 border border-gray-200 p-1 text-muted-foreground",a)},r))});h.displayName=n.B8.displayName;const p=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,o);return(0,c.jsx)(n.l9,(0,t.A)({ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-blue-500",a)},r))});p.displayName=n.l9.displayName;const g=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,m);return(0,c.jsx)(n.UC,(0,t.A)({ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a)},r))});g.displayName=n.UC.displayName},3416(e,s,a){a.d(s,{T:()=>d});var t=a(2555),l=a(3986),r=a(5043),n=a(1089),i=a(579);const c=["className"],d=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,i.jsx)("textarea",(0,t.A)({className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s},r))});d.displayName="Textarea"},1089(e,s,a){a.d(s,{cn:()=>r});var t=a(8387),l=a(9359);function r(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.QP)((0,t.$)(s))}},1774(e,s,a){a.r(s),a.d(s,{default:()=>J});var t=a(2555),l=a(5043),r=a(8729),n=a(6930),i=a(5029),c=a(9722),d=a(3390),o=a(2264),m=a(9938),x=a(1140),h=a(5949),p=a(9690),g=a(5598),u=a(6328),j=a(3416),N=(a(1654),a(7118)),f=a(9797),b=a(1286),v=a(7784);const y=(0,v.A)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);var w=a(4669),A=a(2029),C=a(6376),S=a(516);const k=(0,v.A)("list-checks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);var _=a(7033),R=a(5746),M=a(1680),T=a(7978),D=a(2024),L=a(1360),I=a(2054),q=a(5088),W=a(6533),P=a(9855),z=a(7819),E=a(5087),H=a(4919);const $=(0,v.A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);var F=a(3944),X=a(579);const Z="".concat("","/api");function J(){const{user:e}=(0,r.As)(),{t:s}=(0,n.Bd)(),a=(0,i.Zp)(),[v,J]=(0,l.useState)("sms"),[B,U]=(0,l.useState)([]),[O,V]=(0,l.useState)(!1),[G,Y]=(0,l.useState)(!1),[Q,K]=(0,l.useState)(0),[ee,se]=(0,l.useState)(!0),[ae,te]=(0,l.useState)([]),[le,re]=(0,l.useState)(!1),[ne,ie]=(0,l.useState)([]),[ce,de]=(0,l.useState)(!1),[oe,me]=(0,l.useState)([]),[xe,he]=(0,l.useState)({recipient_type:"all_parents",class_id:"",mobile:"",message:"",template:""}),[pe,ge]=(0,l.useState)("free"),[ue,je]=(0,l.useState)({recipient_type:"all_parents",class_id:"",mobile:"",message:"",template:""}),[Ne,fe]=(0,l.useState)(!1),[be,ve]=(0,l.useState)(null),[ye,we]=(0,l.useState)([{id:1,templateId:"DLT-1234567890",senderId:"SCHLTN",content:"Dear {#var#}, your child {#var#} fee of Rs.{#var#} is due. Pay before {#var#}. - Schooltino",status:"approved",category:"Fee Reminder"},{id:2,templateId:"DLT-0987654321",senderId:"SCHLTN",content:"Dear {#var#}, your child {#var#} was absent on {#var#}. Contact school for details. - Schooltino",status:"approved",category:"Attendance"},{id:3,templateId:"DLT-1122334455",senderId:"SCHLTN",content:"Dear {#var#}, exam results for {#var#} are available. Check Schooltino app. - Schooltino",status:"pending",category:"Exam Results"}]),[Ae,Ce]=(0,l.useState)(!1),[Se,ke]=(0,l.useState)(null),[_e,Re]=(0,l.useState)({templateId:"",senderId:"SCHLTN",content:"",category:""}),[Me]=(0,l.useState)([{id:"wa_fee",name:"Fee Reminder",message:"\ud83c\udfeb Dear Parent, your child's fee of Rs.{amount} is pending. Please pay before {date}. Thank you! - Schooltino"},{id:"wa_attendance",name:"Attendance Alert",message:"\ud83d\udccb Dear Parent, your ward {student_name} was marked {status} on {date}. - Schooltino"},{id:"wa_exam",name:"Exam Notice",message:"\ud83d\udcdd Dear Parent, exams for {student_name} will begin from {date}. Please ensure regular attendance. - Schooltino"},{id:"wa_holiday",name:"Holiday Notice",message:"\ud83c\udf89 Dear Parent, school will remain closed on {date} due to {reason}. - Schooltino"}]),[Te,De]=(0,l.useState)([{id:1,title:"Parent Satisfaction Survey",titleHi:"\u0905\u092d\u093f\u092d\u093e\u0935\u0915 \u0938\u0902\u0924\u0941\u0937\u094d\u091f\u093f \u0938\u0930\u094d\u0935\u0947\u0915\u094d\u0937\u0923",questions:5,responses:127,target:"All Parents",status:"active",createdAt:"2026-02-01"},{id:2,title:"Teacher Observation Form",titleHi:"\u0936\u093f\u0915\u094d\u0937\u0915 \u0928\u093f\u0930\u0940\u0915\u094d\u0937\u0923 \u092b\u0949\u0930\u094d\u092e",questions:8,responses:34,target:"Teachers",status:"active",createdAt:"2026-01-20"},{id:3,title:"Student Feedback - Annual Day",titleHi:"\u091b\u093e\u0924\u094d\u0930 \u092b\u0940\u0921\u092c\u0948\u0915 - \u0935\u093e\u0930\u094d\u0937\u093f\u0915\u094b\u0924\u094d\u0938\u0935",questions:6,responses:245,target:"Students",status:"closed",createdAt:"2026-01-10"}]),[Le,Ie]=(0,l.useState)(!1),[qe,We]=(0,l.useState)({title:"",target:"All Parents",questions:[{type:"mcq",text:"",options:["",""]}]}),[Pe,ze]=(0,l.useState)(null),Ee={totalSent:12450,channels:[{name:"SMS",sent:4200,delivered:4150,failed:50,rate:98.8,color:"bg-blue-500"},{name:"WhatsApp",sent:3800,delivered:3750,failed:50,rate:98.7,color:"bg-green-500"},{name:"Email",sent:3100,delivered:2890,failed:210,rate:93.2,color:"bg-purple-500"},{name:"Push",sent:1350,delivered:1280,failed:70,rate:94.8,color:"bg-orange-500"}],monthlyTrend:[{month:"Sep",count:1800},{month:"Oct",count:2100},{month:"Nov",count:1950},{month:"Dec",count:2400},{month:"Jan",count:2200},{month:"Feb",count:2e3}],engagement:{opened:78.5,clicked:32.1,responded:15.8}},He=(0,l.useCallback)(async()=>{se(!0);try{const a=null===e||void 0===e?void 0:e.school_id;if(a){var s;const e=await c.A.get("".concat(Z,"/message-credits/balance/").concat(a));K((null===(s=e.data)||void 0===s?void 0:s.available_credits)||0)}}catch(l){try{var a,t;const e=await c.A.get("".concat(Z,"/credits/balance"));K((null===(a=e.data)||void 0===a?void 0:a.available_credits)||(null===(t=e.data)||void 0===t?void 0:t.balance)||0)}catch(r){K(0)}}finally{se(!1)}},[e]),$e=(0,l.useCallback)(async()=>{re(!0);try{var e;const s=await c.A.get("".concat(Z,"/sms/history"));te((null===(e=s.data)||void 0===e?void 0:e.history)||s.data||[])}catch(s){te([])}finally{re(!1)}},[]),Fe=(0,l.useCallback)(async()=>{de(!0);try{var e;const s=await c.A.get("".concat(Z,"/whatsapp/history"));ie((null===(e=s.data)||void 0===e?void 0:e.history)||s.data||[])}catch(s){ie([])}finally{de(!1)}},[]),Xe=(0,l.useCallback)(async()=>{try{var e;const s=await c.A.get("".concat(Z,"/sms/templates"));me((null===(e=s.data)||void 0===e?void 0:e.templates)||[])}catch(s){me([])}},[]);(0,l.useEffect)(()=>{(async()=>{try{const e=await c.A.get("".concat(Z,"/classes"));U(e.data||[])}catch(e){console.error("Failed to fetch classes")}})(),He(),Xe()},[He,Xe]);const Ze=e=>"individual"===e.recipient_type?1:"class"===e.recipient_type?30:100,Je=(e,s,a)=>{We(l=>(0,t.A)((0,t.A)({},l),{},{questions:l.questions.map((l,r)=>r===e?(0,t.A)((0,t.A)({},l),{},{[s]:a}):l)}))},Be=e=>{let{form:a,setForm:l,colorClass:r="indigo"}=e;return(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)(m.J,{children:[s("send")," ",s("to_label")," (\u0915\u093f\u0938\u0915\u094b \u092d\u0947\u091c\u0947\u0902)"]}),(0,X.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{type:"all_parents",icon:N.A,label:s("parents"),labelHi:"\u0938\u092d\u0940 \u0905\u092d\u093f\u092d\u093e\u0935\u0915"},{type:"class",icon:f.A,label:"By Class",labelHi:"\u0915\u0915\u094d\u0937\u093e \u0905\u0928\u0941\u0938\u093e\u0930"},{type:"individual",icon:b.A,label:"Individual",labelHi:"\u0935\u094d\u092f\u0915\u094d\u0924\u093f\u0917\u0924"}].map(e=>(0,X.jsxs)("button",{type:"button",onClick:()=>l(s=>(0,t.A)((0,t.A)({},s),{},{recipient_type:e.type})),className:"p-4 rounded-xl border-2 text-center transition-all ".concat(a.recipient_type===e.type?"border-".concat(r,"-500 bg-").concat(r,"-50"):"border-slate-200 hover:border-slate-300"),children:[(0,X.jsx)(e.icon,{className:"w-6 h-6 mx-auto mb-2 text-".concat(r,"-600")}),(0,X.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,X.jsx)("p",{className:"text-xs text-slate-500",children:e.labelHi})]},e.type))})]}),"class"===a.recipient_type&&(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)(m.J,{children:[s("select_class")," (\u0915\u0915\u094d\u0937\u093e \u091a\u0941\u0928\u0947\u0902)"]}),(0,X.jsxs)("select",{value:a.class_id,onChange:e=>l(s=>(0,t.A)((0,t.A)({},s),{},{class_id:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",required:!0,children:[(0,X.jsxs)("option",{value:"",children:["-- ",s("select_class")," --"]}),B.map(e=>(0,X.jsxs)("option",{value:e.id,children:[e.name," - ",e.section]},e.id))]})]}),"individual"===a.recipient_type&&(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(m.J,{children:s("mobile")}),(0,X.jsx)(o.p,{value:a.mobile,onChange:e=>l(s=>(0,t.A)((0,t.A)({},s),{},{mobile:e.target.value})),placeholder:"9876543210",required:!0})]})]})},Ue=e=>{let{form:t,costPerMsg:l}=e;const r=Ze(t),n=r*l,i=Q>=n;return(0,X.jsx)("div",{className:"p-3 rounded-lg border ".concat(i?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,X.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(y,{className:"w-4 h-4"}),(0,X.jsxs)("span",{children:["Est. Cost: ",(0,X.jsxs)("strong",{children:[n," credits"]})," (~",r," ",s("recipients")," \xd7 ",l," credit)"]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("span",{className:i?"text-green-700":"text-red-700",children:[s("balance"),": ",(0,X.jsx)("strong",{children:Q})]}),!i&&(0,X.jsx)(d.$,{size:"sm",variant:"outline",className:"text-red-600 border-red-300 h-7 text-xs",onClick:()=>a("/app/credit-system"),children:s("send")})]})]})})};return(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 text-white",children:(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("div",{children:[(0,X.jsxs)("h1",{className:"text-3xl font-bold font-heading flex items-center gap-3",children:[(0,X.jsx)(w.A,{className:"w-8 h-8"}),s("communication_hub")]}),(0,X.jsxs)("p",{className:"text-indigo-100 mt-2",children:[s("send_sms"),", ",s("send_whatsapp")]})]}),(0,X.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,X.jsxs)("div",{className:"bg-white/20 rounded-xl px-4 py-2 text-center",children:[(0,X.jsxs)("div",{className:"flex items-center gap-1 justify-center",children:[(0,X.jsx)(A.A,{className:"w-4 h-4"}),(0,X.jsx)("p",{className:"text-2xl font-bold",children:ee?"...":Q})]}),(0,X.jsx)("p",{className:"text-xs text-indigo-100",children:s("available")})]}),(0,X.jsxs)(d.$,{onClick:()=>a("/app/credit-system"),className:"bg-white/20 hover:bg-white/30 text-white border-0",children:[(0,X.jsx)(C.A,{className:"w-4 h-4 mr-2"})," ",s("send")]}),(0,X.jsx)(d.$,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/10",onClick:He,children:(0,X.jsx)(S.A,{className:"w-4 h-4 ".concat(ee?"animate-spin":"")})})]})]})}),(0,X.jsxs)(p.tU,{value:v,onValueChange:J,className:"w-full",children:[(0,X.jsxs)(p.j7,{className:"grid w-full grid-cols-4 h-12",children:[(0,X.jsxs)(p.Xi,{value:"sms",className:"flex items-center gap-2",children:[(0,X.jsx)(w.A,{className:"w-4 h-4"})," SMS"]}),(0,X.jsxs)(p.Xi,{value:"whatsapp",className:"flex items-center gap-2",children:[(0,X.jsx)(b.A,{className:"w-4 h-4"})," WhatsApp"]}),(0,X.jsxs)(p.Xi,{value:"surveys",className:"flex items-center gap-2",children:[(0,X.jsx)(k,{className:"w-4 h-4"})," ",s("notice_board")]}),(0,X.jsxs)(p.Xi,{value:"analytics",className:"flex items-center gap-2",children:[(0,X.jsx)(_.A,{className:"w-4 h-4"})," ",s("analytics")]})]}),(0,X.jsx)(p.av,{value:"sms",className:"mt-6",children:(0,X.jsxs)(p.tU,{defaultValue:"send",className:"w-full",children:[(0,X.jsxs)(p.j7,{className:"mb-4",children:[(0,X.jsxs)(p.Xi,{value:"send",className:"flex items-center gap-1",children:[(0,X.jsx)(R.A,{className:"w-3 h-3"})," ",s("send_sms")]}),(0,X.jsxs)(p.Xi,{value:"templates",className:"flex items-center gap-1",children:[(0,X.jsx)(M.A,{className:"w-3 h-3"})," ",s("sms_templates")]}),(0,X.jsxs)(p.Xi,{value:"history",className:"flex items-center gap-1",onClick:$e,children:[(0,X.jsx)(T.A,{className:"w-3 h-3"})," ",s("sent_messages")]})]}),(0,X.jsx)(p.av,{value:"send",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,X.jsx)("div",{className:"lg:col-span-2",children:(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-6",children:[(0,X.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,X.jsx)(R.A,{className:"w-5 h-5 text-blue-600"})," ",s("compose")," SMS"]}),(0,X.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!xe.message.trim())return void u.oR.error("Message \u0932\u093f\u0916\u0928\u093e \u091c\u093c\u0930\u0942\u0930\u0940 \u0939\u0948");const s=Ze(xe);ve({type:"sms",form:xe,estRecipients:s,totalCost:1*s}),fe(!0)},className:"space-y-4",children:[(0,X.jsx)(Be,{form:xe,setForm:he,colorClass:"blue"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)(m.J,{children:[s("message")," (\u0938\u0902\u0926\u0947\u0936)"]}),(0,X.jsx)(j.T,{value:xe.message,onChange:e=>he(s=>(0,t.A)((0,t.A)({},s),{},{message:e.target.value})),placeholder:"\u0905\u092a\u0928\u093e SMS message \u092f\u0939\u093e\u0901 \u0932\u093f\u0916\u0947\u0902...",rows:4,required:!0}),(0,X.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,X.jsxs)("span",{children:[xe.message.length," characters"]}),(0,X.jsx)("span",{children:xe.message.length>160?"".concat(Math.ceil(xe.message.length/160)," SMS parts"):"1 SMS"})]})]}),(0,X.jsx)(Ue,{form:xe,costPerMsg:1}),(0,X.jsxs)(d.$,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:G,children:[G?(0,X.jsx)(D.A,{className:"w-4 h-4 animate-spin mr-2"}):(0,X.jsx)(R.A,{className:"w-4 h-4 mr-2"}),s("send_sms")," (",1," credit/msg)"]})]})]})})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-5",children:[(0,X.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["\ud83d\udccb ",s("sms_templates")]}),(0,X.jsx)("div",{className:"space-y-2",children:(oe.length>0?oe:[{id:"fee_reminder",name:"Fee Reminder",message:"Dear Parent, your child's fee of Rs.{amount} is pending. Please pay before {date}. - Schooltino"},{id:"holiday",name:"Holiday Notice",message:"Dear Parent, school will remain closed on {date} due to {reason}. - Schooltino"},{id:"ptm",name:"PTM Reminder",message:"Dear Parent, PTM is scheduled on {date} at {time}. Please attend. - Schooltino"},{id:"result",name:"Result Declaration",message:"Dear Parent, exam results are now available on Schooltino app. Check now!"}]).map(e=>(0,X.jsxs)("button",{onClick:()=>he(s=>(0,t.A)((0,t.A)({},s),{},{message:e.message,template:e.id})),className:"w-full p-3 rounded-lg text-left border transition-all ".concat(xe.template===e.id?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300 hover:bg-blue-50"),children:[(0,X.jsx)("p",{className:"font-medium text-sm text-gray-900",children:e.name}),(0,X.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.message})]},e.id))})]})}),(0,X.jsx)(x.Zp,{className:"border-0 shadow-md bg-gradient-to-br from-blue-50 to-indigo-50",children:(0,X.jsxs)(x.Wu,{className:"p-5",children:[(0,X.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\ud83d\udca1 SMS Tips"}),(0,X.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,X.jsx)("li",{children:"\u2022 SMS 160 chars \u0924\u0915 = 1 SMS cost"}),(0,X.jsx)("li",{children:"\u2022 DLT approved templates use \u0915\u0930\u0947\u0902"}),(0,X.jsx)("li",{children:"\u2022 Bulk SMS class-wise \u092d\u0947\u091c\u0947\u0902"}),(0,X.jsxs)("li",{children:["\u2022 Each SMS = ",1," credit"]})]})]})})]})]})}),(0,X.jsx)(p.av,{value:"templates",children:(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s("sms_templates")}),(0,X.jsx)("p",{className:"text-sm text-gray-500",children:"TRAI DLT registered SMS templates manage \u0915\u0930\u0947\u0902"})]}),(0,X.jsxs)(d.$,{onClick:()=>{ke(null),Re({templateId:"",senderId:"SCHLTN",content:"",category:""}),Ce(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[(0,X.jsx)(L.A,{className:"w-4 h-4 mr-2"})," ",s("add")]})]}),(0,X.jsx)("div",{className:"grid gap-4",children:ye.map(e=>(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsx)(x.Wu,{className:"p-5",children:(0,X.jsxs)("div",{className:"flex items-start justify-between",children:[(0,X.jsxs)("div",{className:"flex-1",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,X.jsxs)(h.E,{className:"approved"===e.status?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700",children:["approved"===e.status?(0,X.jsx)(I.A,{className:"w-3 h-3 mr-1"}):(0,X.jsx)(q.A,{className:"w-3 h-3 mr-1"}),"approved"===e.status?s("approved"):s("pending")]}),(0,X.jsx)(h.E,{variant:"outline",children:e.category})]}),(0,X.jsx)("p",{className:"text-sm text-gray-800 mb-2",children:e.content}),(0,X.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,X.jsxs)("span",{children:["Template ID: ",e.templateId]}),(0,X.jsxs)("span",{children:["Sender: ",e.senderId]})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,X.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>{ke(e),Re({templateId:e.templateId,senderId:e.senderId,content:e.content,category:e.category}),Ce(!0)},children:(0,X.jsx)(W.A,{className:"w-4 h-4"})}),(0,X.jsx)(d.$,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>{return s=e.id,we(e=>e.filter(e=>e.id!==s)),void u.oR.success("Template deleted");var s},children:(0,X.jsx)(P.A,{className:"w-4 h-4"})})]})]})})},e.id))}),(0,X.jsx)(x.Zp,{className:"border-0 shadow-md bg-amber-50",children:(0,X.jsx)(x.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex items-start gap-3",children:[(0,X.jsx)(z.A,{className:"w-5 h-5 text-amber-500 mt-0.5"}),(0,X.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,X.jsxs)("p",{className:"font-medium",children:["DLT Registration ",s("required")]}),(0,X.jsx)("p",{children:"TRAI \u0915\u0947 \u0905\u0928\u0941\u0938\u093e\u0930, \u0938\u092d\u0940 SMS templates \u0915\u094b DLT portal \u092a\u0930 register \u0915\u0930\u0928\u093e \u091c\u093c\u0930\u0942\u0930\u0940 \u0939\u0948\u0964 \u092c\u093f\u0928\u093e approved template \u0915\u0947 SMS \u092d\u0947\u091c\u0928\u093e \u0938\u0902\u092d\u0935 \u0928\u0939\u0940\u0902 \u0939\u0948\u0964"})]})]})})})]})}),(0,X.jsx)(p.av,{value:"history",children:(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,X.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,X.jsx)(T.A,{className:"w-5 h-5 text-blue-600"})," ",s("sent_messages")]}),(0,X.jsxs)(d.$,{size:"sm",variant:"outline",onClick:$e,disabled:le,children:[(0,X.jsx)(S.A,{className:"w-4 h-4 mr-1 ".concat(le?"animate-spin":"")})," ",s("refresh")]})]}),le?(0,X.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,X.jsx)(D.A,{className:"w-6 h-6 animate-spin text-blue-500"})}):ae.length>0?(0,X.jsx)("div",{className:"space-y-3",children:ae.map((e,a)=>(0,X.jsxs)("div",{className:"p-4 rounded-lg border border-slate-200 hover:bg-slate-50",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,X.jsxs)(h.E,{className:"sent"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:["sent"===e.status?(0,X.jsx)(I.A,{className:"w-3 h-3 mr-1"}):(0,X.jsx)(z.A,{className:"w-3 h-3 mr-1"}),"sent"===e.status?s("sent"):s("failed")]}),(0,X.jsx)("span",{className:"text-xs text-gray-500",children:e.sent_at?new Date(e.sent_at).toLocaleString("en-IN"):""})]}),(0,X.jsx)("p",{className:"text-sm text-gray-800 line-clamp-2",children:e.message}),(0,X.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,X.jsxs)("span",{children:[s("recipients"),": ",e.recipients_count||0]}),(0,X.jsxs)("span",{children:["Credits: ",1*(e.recipients_count||1)]})]})]},e.id||a))}):(0,X.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,X.jsx)(w.A,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),(0,X.jsx)("p",{children:s("no_data")}),(0,X.jsxs)("p",{className:"text-xs mt-1",children:[s("send")," your first SMS to see history here"]})]})]})})})]})}),(0,X.jsx)(p.av,{value:"whatsapp",className:"mt-6",children:(0,X.jsxs)(p.tU,{defaultValue:"send",className:"w-full",children:[(0,X.jsxs)(p.j7,{className:"mb-4",children:[(0,X.jsxs)(p.Xi,{value:"send",className:"flex items-center gap-1",children:[(0,X.jsx)(R.A,{className:"w-3 h-3"})," ",s("send_whatsapp")]}),(0,X.jsxs)(p.Xi,{value:"templates",className:"flex items-center gap-1",children:[(0,X.jsx)(M.A,{className:"w-3 h-3"})," ",s("whatsapp_templates")]}),(0,X.jsxs)(p.Xi,{value:"history",className:"flex items-center gap-1",onClick:Fe,children:[(0,X.jsx)(T.A,{className:"w-3 h-3"})," ",s("sent_messages")]})]}),(0,X.jsxs)(p.av,{value:"send",children:[(0,X.jsxs)("div",{className:"mb-4 flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,X.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"WhatsApp Mode:"}),(0,X.jsx)("button",{onClick:()=>ge("free"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all ".concat("free"===pe?"bg-green-600 text-white shadow":"bg-white text-gray-600 border hover:bg-green-50"),children:"Free (wa.me Link)"}),(0,X.jsx)("button",{onClick:()=>ge("paid"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all ".concat("paid"===pe?"bg-green-600 text-white shadow":"bg-white text-gray-600 border hover:bg-green-50"),children:"Paid API (BotBiz)"}),"free"===pe&&(0,X.jsxs)(h.E,{className:"bg-green-100 text-green-700 ml-auto",children:["No Credits ",s("required")]}),"paid"===pe&&(0,X.jsxs)(h.E,{className:"bg-amber-100 text-amber-700 ml-auto",children:[1," Credit/msg"]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,X.jsx)("div",{className:"lg:col-span-2",children:(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-6",children:[(0,X.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,X.jsx)(R.A,{className:"w-5 h-5 text-green-600"}),"free"===pe?"Free WhatsApp (wa.me Link)":"Paid WhatsApp (API Broadcast)"]}),"free"===pe&&(0,X.jsx)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,X.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,X.jsx)("strong",{children:"Free Mode:"})," Single number \u092a\u0930 direct WhatsApp chat \u0916\u0941\u0932\u0947\u0917\u093e\u0964 Bulk \u092d\u0947\u091c\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f message copy \u0939\u094b\u0917\u093e, WhatsApp \u092a\u0930 contacts select \u0915\u0930\u0915\u0947 forward \u0915\u0930\u0947\u0902\u0964 \u0915\u094b\u0908 credit \u0928\u0939\u0940\u0902 \u0932\u0917\u0947\u0917\u093e!"]})}),(0,X.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),"free"===pe)return void(e=>{if(e.preventDefault(),ue.message.trim())if("single"===ue.recipient_type){let e=(ue.mobile||"").replace(/\D/g,"");if(!e||10!==e.length&&12!==e.length)return void u.oR.error("Valid 10-digit mobile number \u0921\u093e\u0932\u0947\u0902");10===e.length&&(e="91"+e);const s=encodeURIComponent(ue.message);window.open("https://wa.me/".concat(e,"?text=").concat(s),"_blank"),u.oR.success("WhatsApp chat opened! Message copy \u0915\u0930\u0915\u0947 \u092d\u0947\u091c\u0947\u0902\u0964")}else{const e=encodeURIComponent(ue.message),s="https://wa.me/?text=".concat(e);navigator.clipboard.writeText(ue.message).then(()=>{u.oR.success("Message copied! WhatsApp \u0916\u094b\u0932\u0947\u0902 \u0914\u0930 contacts \u0915\u094b forward \u0915\u0930\u0947\u0902\u0964")}).catch(()=>{u.oR.info("WhatsApp \u0916\u094b\u0932\u0947\u0902 \u0914\u0930 message paste \u0915\u0930\u0947\u0902")}),window.open(s,"_blank")}else u.oR.error("Message \u0932\u093f\u0916\u0928\u093e \u091c\u093c\u0930\u0942\u0930\u0940 \u0939\u0948")})(e);if(!ue.message.trim())return void u.oR.error("Message \u0932\u093f\u0916\u0928\u093e \u091c\u093c\u0930\u0942\u0930\u0940 \u0939\u0948");const s=Ze(ue);ve({type:"whatsapp",form:ue,estRecipients:s,totalCost:1*s}),fe(!0)},className:"space-y-4",children:["free"===pe?(0,X.jsxs)("div",{className:"space-y-3",children:[(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsx)("button",{type:"button",onClick:()=>je(e=>(0,t.A)((0,t.A)({},e),{},{recipient_type:"single"})),className:"px-3 py-1.5 rounded text-sm ".concat("single"===ue.recipient_type?"bg-green-600 text-white":"bg-gray-100 text-gray-600"),children:"Single Number"}),(0,X.jsx)("button",{type:"button",onClick:()=>je(e=>(0,t.A)((0,t.A)({},e),{},{recipient_type:"bulk_free"})),className:"px-3 py-1.5 rounded text-sm ".concat("bulk_free"===ue.recipient_type?"bg-green-600 text-white":"bg-gray-100 text-gray-600"),children:"Bulk (Copy & Forward)"})]}),"single"===ue.recipient_type&&(0,X.jsxs)("div",{children:[(0,X.jsx)(m.J,{children:s("mobile")}),(0,X.jsx)(o.p,{value:ue.mobile,onChange:e=>je(s=>(0,t.A)((0,t.A)({},s),{},{mobile:e.target.value})),placeholder:"10-digit mobile number",maxLength:10})]})]}):(0,X.jsx)(Be,{form:ue,setForm:je,colorClass:"green"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)(m.J,{children:[s("message")," (\u0938\u0902\u0926\u0947\u0936)"]}),(0,X.jsx)(j.T,{value:ue.message,onChange:e=>je(s=>(0,t.A)((0,t.A)({},s),{},{message:e.target.value})),placeholder:"\u0905\u092a\u0928\u093e WhatsApp message \u092f\u0939\u093e\u0901 \u0932\u093f\u0916\u0947\u0902...",rows:4,required:!0}),(0,X.jsxs)("p",{className:"text-xs text-slate-500",children:[ue.message.length," characters"]})]}),"paid"===pe&&(0,X.jsx)(Ue,{form:ue,costPerMsg:1}),(0,X.jsxs)(d.$,{type:"submit",className:"w-full ".concat("bg-green-600 hover:bg-green-700"),disabled:G,children:[G?(0,X.jsx)(D.A,{className:"w-4 h-4 animate-spin mr-2"}):(0,X.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"free"===pe?"single"===ue.recipient_type?"Open WhatsApp Chat":"Copy & Open WhatsApp":"".concat(s("send_whatsapp")," (").concat(1," credit/msg)")]})]})]})})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-5",children:[(0,X.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:s("whatsapp_templates")}),(0,X.jsx)("div",{className:"space-y-2",children:Me.map(e=>(0,X.jsxs)("button",{onClick:()=>je(s=>(0,t.A)((0,t.A)({},s),{},{message:e.message,template:e.id})),className:"w-full p-3 rounded-lg text-left border transition-all ".concat(ue.template===e.id?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-300 hover:bg-green-50"),children:[(0,X.jsx)("p",{className:"font-medium text-sm text-gray-900",children:e.name}),(0,X.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.message})]},e.id))})]})}),(0,X.jsx)(x.Zp,{className:"border-0 shadow-md bg-gradient-to-br from-green-50 to-emerald-50",children:(0,X.jsxs)(x.Wu,{className:"p-5",children:[(0,X.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"free"===pe?"Free Mode Tips":"Paid API Tips"}),(0,X.jsx)("ul",{className:"text-xs text-green-700 space-y-1",children:"free"===pe?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("li",{children:"\u2022 Single number: Direct chat \u0916\u0941\u0932\u0947\u0917\u093e"}),(0,X.jsx)("li",{children:"\u2022 Bulk: Message copy \u0939\u094b\u0917\u093e, forward \u0915\u0930\u0947\u0902"}),(0,X.jsx)("li",{children:"\u2022 Unlimited messages, no cost!"}),(0,X.jsx)("li",{children:"\u2022 Media attach WhatsApp \u092e\u0947\u0902 \u0915\u0930\u0947\u0902"})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("li",{children:"\u2022 Bulk broadcast class-wise \u0915\u0930\u0947\u0902"}),(0,X.jsx)("li",{children:"\u2022 Auto-send to all parents"}),(0,X.jsx)("li",{children:"\u2022 Delivery reports available"}),(0,X.jsxs)("li",{children:["\u2022 Each message = ",1," credit"]})]})})]})})]})]})]}),(0,X.jsx)(p.av,{value:"templates",children:(0,X.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Me.map(e=>(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-5",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,X.jsxs)(h.E,{className:"bg-green-100 text-green-700",children:[(0,X.jsx)(I.A,{className:"w-3 h-3 mr-1"})," ",s("active")]}),(0,X.jsx)(h.E,{variant:"outline",children:e.name})]}),(0,X.jsx)("p",{className:"text-sm text-gray-800 mb-3",children:e.message}),(0,X.jsxs)(d.$,{size:"sm",variant:"outline",className:"text-green-600",onClick:()=>{je(s=>(0,t.A)((0,t.A)({},s),{},{message:e.message,template:e.id})),J("whatsapp")},children:[(0,X.jsx)(R.A,{className:"w-3 h-3 mr-1"})," ",s("send")]})]})},e.id))})}),(0,X.jsx)(p.av,{value:"history",children:(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,X.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,X.jsx)(T.A,{className:"w-5 h-5 text-green-600"})," ",s("sent_messages")]}),(0,X.jsxs)(d.$,{size:"sm",variant:"outline",onClick:Fe,disabled:ce,children:[(0,X.jsx)(S.A,{className:"w-4 h-4 mr-1 ".concat(ce?"animate-spin":"")})," ",s("refresh")]})]}),ce?(0,X.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,X.jsx)(D.A,{className:"w-6 h-6 animate-spin text-green-500"})}):ne.length>0?(0,X.jsx)("div",{className:"space-y-3",children:ne.map((e,a)=>(0,X.jsxs)("div",{className:"p-4 rounded-lg border border-slate-200 hover:bg-slate-50",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,X.jsxs)(h.E,{className:"sent"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:["sent"===e.status?(0,X.jsx)(I.A,{className:"w-3 h-3 mr-1"}):(0,X.jsx)(z.A,{className:"w-3 h-3 mr-1"}),"sent"===e.status?s("sent"):s("failed")]}),(0,X.jsx)("span",{className:"text-xs text-gray-500",children:e.sent_at?new Date(e.sent_at).toLocaleString("en-IN"):""})]}),(0,X.jsx)("p",{className:"text-sm text-gray-800 line-clamp-2",children:e.message}),(0,X.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,X.jsxs)("span",{children:[s("recipients"),": ",e.recipients_count||0]}),(0,X.jsxs)("span",{children:["Credits: ",1*(e.recipients_count||1)]})]})]},e.id||a))}):(0,X.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,X.jsx)(b.A,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),(0,X.jsx)("p",{children:s("no_data")}),(0,X.jsxs)("p",{className:"text-xs mt-1",children:[s("send")," your first WhatsApp message to see history here"]})]})]})})})]})}),(0,X.jsx)(p.av,{value:"surveys",className:"mt-6",children:(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s("notice_board")}),(0,X.jsx)("p",{className:"text-sm text-gray-500",children:"Surveys \u092c\u0928\u093e\u090f\u0902 \u0914\u0930 responses \u0926\u0947\u0916\u0947\u0902"})]}),(0,X.jsxs)(d.$,{onClick:()=>Ie(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,X.jsx)(L.A,{className:"w-4 h-4 mr-2"})," ",s("create_notice")]})]}),(0,X.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Te.map(e=>(0,X.jsx)(x.Zp,{className:"border-0 shadow-md hover:shadow-lg transition-shadow",children:(0,X.jsxs)(x.Wu,{className:"p-5",children:[(0,X.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,X.jsx)(h.E,{className:"active"===e.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500",children:"active"===e.status?s("active"):s("completed")}),(0,X.jsx)("span",{className:"text-xs text-gray-400",children:e.createdAt})]}),(0,X.jsx)("h4",{className:"font-semibold text-gray-900 text-lg",children:e.title}),(0,X.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:e.titleHi}),(0,X.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,X.jsxs)("span",{className:"text-gray-500",children:[e.questions," ",s("content")]}),(0,X.jsxs)("span",{className:"text-gray-500",children:[s("target_audience"),": ",e.target]})]}),(0,X.jsxs)("div",{className:"mt-4 pt-3 border-t flex items-center justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(N.A,{className:"w-4 h-4 text-indigo-500"}),(0,X.jsxs)("span",{className:"text-sm font-medium text-indigo-600",children:[e.responses," ",s("recipients")]})]}),(0,X.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>ze(e),children:[(0,X.jsx)(E.A,{className:"w-4 h-4 mr-1"})," ",s("view")]})]})]})},e.id))})]})}),(0,X.jsx)(p.av,{value:"analytics",className:"mt-6",children:(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Ee.channels.map(e=>(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-5",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,X.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,X.jsxs)(h.E,{className:"bg-green-100 text-green-700",children:[e.rate,"%"]})]}),(0,X.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.sent.toLocaleString()}),(0,X.jsxs)("p",{className:"text-sm text-gray-500",children:[s("sent")," ",s("message")]}),(0,X.jsx)("div",{className:"mt-3 w-full bg-gray-200 rounded-full h-2",children:(0,X.jsx)("div",{className:"".concat(e.color," h-2 rounded-full"),style:{width:"".concat(e.rate,"%")}})}),(0,X.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[(0,X.jsxs)("span",{children:[s("delivered"),": ",e.delivered.toLocaleString()]}),(0,X.jsxs)("span",{children:[s("failed"),": ",e.failed]})]})]})},e.name))}),(0,X.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-6",children:[(0,X.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,X.jsx)(H.A,{className:"w-5 h-5 text-indigo-600"})," ",s("analytics")]}),(0,X.jsx)("div",{className:"flex items-end gap-2 h-48",children:Ee.monthlyTrend.map(e=>{const s=Math.max(...Ee.monthlyTrend.map(e=>e.count)),a=e.count/s*100;return(0,X.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,X.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:e.count}),(0,X.jsx)("div",{className:"w-full bg-gradient-to-t from-indigo-500 to-purple-500 rounded-t-lg transition-all",style:{height:"".concat(a,"%")}}),(0,X.jsx)("span",{className:"text-xs text-gray-500",children:e.month})]},e.month)})})]})}),(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-6",children:[(0,X.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,X.jsx)($,{className:"w-5 h-5 text-indigo-600"})," ",s("analytics")]}),(0,X.jsx)("div",{className:"space-y-6",children:[{label:"Opened / Read",labelHi:"\u092a\u0922\u093c\u093e \u0917\u092f\u093e",value:Ee.engagement.opened,color:"bg-green-500"},{label:"Clicked / Interacted",labelHi:"\u0915\u094d\u0932\u093f\u0915 \u0915\u093f\u092f\u093e",value:Ee.engagement.clicked,color:"bg-blue-500"},{label:"Responded",labelHi:"\u091c\u0935\u093e\u092c \u0926\u093f\u092f\u093e",value:Ee.engagement.responded,color:"bg-purple-500"}].map(e=>(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,X.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:e.labelHi})]}),(0,X.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[e.value,"%"]})]}),(0,X.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,X.jsx)("div",{className:"".concat(e.color," h-3 rounded-full transition-all"),style:{width:"".concat(e.value,"%")}})})]},e.label))}),(0,X.jsxs)("div",{className:"mt-6 p-4 bg-indigo-50 rounded-xl",children:[(0,X.jsxs)("h5",{className:"font-medium text-indigo-800 mb-2",children:["\ud83d\udcca ",s("summary")]}),(0,X.jsxs)("p",{className:"text-sm text-indigo-700",children:[s("total")," ",Ee.totalSent.toLocaleString()," messages \u092d\u0947\u091c\u0947 \u0917\u090f\u0964 Average delivery rate 96.4% \u0939\u0948\u0964 \u0938\u092c\u0938\u0947 \u091c\u093c\u094d\u092f\u093e\u0926\u093e engagement WhatsApp \u092a\u0930 \u0939\u0948\u0964"]})]})]})})]}),(0,X.jsx)(x.Zp,{className:"border-0 shadow-md",children:(0,X.jsxs)(x.Wu,{className:"p-6",children:[(0,X.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,X.jsx)(_.A,{className:"w-5 h-5 text-indigo-600"})," ",s("analytics")]}),(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)("table",{className:"w-full text-sm",children:[(0,X.jsx)("thead",{children:(0,X.jsxs)("tr",{className:"border-b",children:[(0,X.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-500",children:s("message")}),(0,X.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:s("sent")}),(0,X.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:s("delivered")}),(0,X.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:s("failed")}),(0,X.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:s("delivered")})]})}),(0,X.jsx)("tbody",{children:Ee.channels.map(e=>(0,X.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,X.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900",children:(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),e.name]})}),(0,X.jsx)("td",{className:"text-right py-3 px-4 text-gray-700",children:e.sent.toLocaleString()}),(0,X.jsx)("td",{className:"text-right py-3 px-4 text-green-600",children:e.delivered.toLocaleString()}),(0,X.jsx)("td",{className:"text-right py-3 px-4 text-red-500",children:e.failed}),(0,X.jsx)("td",{className:"text-right py-3 px-4",children:(0,X.jsxs)(h.E,{className:"bg-green-100 text-green-700",children:[e.rate,"%"]})})]},e.name))}),(0,X.jsx)("tfoot",{children:(0,X.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,X.jsx)("td",{className:"py-3 px-4 text-gray-900",children:s("total")}),(0,X.jsx)("td",{className:"text-right py-3 px-4 text-gray-900",children:Ee.channels.reduce((e,s)=>e+s.sent,0).toLocaleString()}),(0,X.jsx)("td",{className:"text-right py-3 px-4 text-green-600",children:Ee.channels.reduce((e,s)=>e+s.delivered,0).toLocaleString()}),(0,X.jsx)("td",{className:"text-right py-3 px-4 text-red-500",children:Ee.channels.reduce((e,s)=>e+s.failed,0)}),(0,X.jsx)("td",{className:"text-right py-3 px-4",children:(0,X.jsx)(h.E,{className:"bg-green-100 text-green-700",children:"96.4%"})})]})})]})})]})})]})})]}),(0,X.jsx)(g.lG,{open:Ne,onOpenChange:fe,children:(0,X.jsxs)(g.Cf,{className:"max-w-md",children:[(0,X.jsx)(g.c7,{children:(0,X.jsxs)(g.L3,{className:"flex items-center gap-2",children:[(0,X.jsx)(R.A,{className:"w-5 h-5 text-indigo-600"}),s("confirm")," ",s("send")]})}),be&&(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl space-y-2",children:[(0,X.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Channel:"}),(0,X.jsx)("span",{className:"font-medium",children:"sms"===be.type?"SMS":"WhatsApp"})]}),(0,X.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,X.jsxs)("span",{className:"text-gray-500",children:["Est. ",s("recipients"),":"]}),(0,X.jsxs)("span",{className:"font-medium",children:["~",be.estRecipients]})]}),(0,X.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Credit Cost:"}),(0,X.jsxs)("span",{className:"font-bold text-indigo-600",children:[be.totalCost," credits"]})]}),(0,X.jsxs)("div",{className:"flex justify-between text-sm border-t pt-2",children:[(0,X.jsxs)("span",{className:"text-gray-500",children:[s("balance"),":"]}),(0,X.jsxs)("span",{className:"font-bold ".concat(Q>=be.totalCost?"text-green-600":"text-red-600"),children:[Q," credits"]})]}),Q<be.totalCost&&(0,X.jsxs)("div",{className:"p-2 bg-red-50 rounded-lg text-xs text-red-700 flex items-center gap-2",children:[(0,X.jsx)(z.A,{className:"w-4 h-4"}),"Insufficient credits! Please buy more."]})]}),(0,X.jsx)("div",{className:"p-3 bg-indigo-50 rounded-lg",children:(0,X.jsx)("p",{className:"text-xs text-indigo-700 line-clamp-3",children:be.form.message})}),(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsx)(d.$,{variant:"outline",className:"flex-1",onClick:()=>fe(!1),children:s("cancel")}),Q>=be.totalCost?(0,X.jsxs)(d.$,{className:"flex-1 bg-indigo-600 hover:bg-indigo-700",onClick:async()=>{if(!be)return;const{type:e,form:s,totalCost:a}=be;if(Q<a)return u.oR.error("Insufficient credits! Need ".concat(a," credits, you have ").concat(Q,". Please buy more credits.")),void fe(!1);Y(!0),fe(!1);try{var l;const a="".concat(Z,"sms"===e?"/sms/send":"/whatsapp/send"),r=(null===(l=(await c.A.post(a,{recipient_type:s.recipient_type,class_id:s.class_id,mobile:s.mobile,message:s.message,template:s.template})).data)||void 0===l?void 0:l.recipients_count)||1;u.oR.success("".concat("sms"===e?"SMS":"WhatsApp"," sent to ").concat(r," recipients! (").concat(1*r," credits used)")),"sms"===e?he(e=>(0,t.A)((0,t.A)({},e),{},{message:"",template:""})):je(e=>(0,t.A)((0,t.A)({},e),{},{message:"",template:""})),He()}catch(r){const s=be.estRecipients;u.oR.success("Demo: ".concat("sms"===e?"SMS":"WhatsApp"," sent to ~").concat(s," recipients! (").concat(a," credits used)")),"sms"===e?he(e=>(0,t.A)((0,t.A)({},e),{},{message:"",template:""})):je(e=>(0,t.A)((0,t.A)({},e),{},{message:"",template:""}))}finally{Y(!1),ve(null)}},disabled:G,children:[G?(0,X.jsx)(D.A,{className:"w-4 h-4 animate-spin mr-2"}):(0,X.jsx)(R.A,{className:"w-4 h-4 mr-2"}),s("confirm")," & ",s("send")]}):(0,X.jsxs)(d.$,{className:"flex-1 bg-orange-600 hover:bg-orange-700",onClick:()=>{fe(!1),a("/app/credit-system")},children:[(0,X.jsx)(C.A,{className:"w-4 h-4 mr-2"})," ",s("send")]})]})]})]})}),(0,X.jsx)(g.lG,{open:Ae,onOpenChange:Ce,children:(0,X.jsxs)(g.Cf,{className:"max-w-lg",children:[(0,X.jsx)(g.c7,{children:(0,X.jsx)(g.L3,{children:s(Se?"edit":"add")})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(m.J,{children:"DLT Template ID"}),(0,X.jsx)(o.p,{value:_e.templateId,onChange:e=>Re(s=>(0,t.A)((0,t.A)({},s),{},{templateId:e.target.value})),placeholder:"DLT-XXXXXXXXXX"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(m.J,{children:"Sender ID (6 chars)"}),(0,X.jsx)(o.p,{value:_e.senderId,onChange:e=>Re(s=>(0,t.A)((0,t.A)({},s),{},{senderId:e.target.value.toUpperCase().slice(0,6)})),placeholder:"SCHLTN",maxLength:6})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(m.J,{children:s("category")}),(0,X.jsxs)("select",{value:_e.category,onChange:e=>Re(s=>(0,t.A)((0,t.A)({},s),{},{category:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,X.jsxs)("option",{value:"",children:[s("select")," ",s("category")]}),(0,X.jsx)("option",{value:"Fee Reminder",children:"Fee Reminder"}),(0,X.jsx)("option",{value:"Attendance",children:s("attendance")}),(0,X.jsx)("option",{value:"Exam Results",children:s("exam_results")}),(0,X.jsx)("option",{value:"General Notice",children:"General Notice"}),(0,X.jsx)("option",{value:"Transport",children:s("transport")}),(0,X.jsx)("option",{value:"Admission",children:"Admission"})]})]})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(m.J,{children:s("content")}),(0,X.jsx)(j.T,{value:_e.content,onChange:e=>Re(s=>(0,t.A)((0,t.A)({},s),{},{content:e.target.value})),placeholder:"Dear {#var#}, your child {#var#}...",rows:4}),(0,X.jsxs)("p",{className:"text-xs text-gray-500",children:["Use ","{#var#}"," for variable placeholders as per DLT format"]})]}),(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsx)(d.$,{variant:"outline",className:"flex-1",onClick:()=>Ce(!1),children:s("cancel")}),(0,X.jsx)(d.$,{className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>{_e.templateId&&_e.content?(Se?(we(e=>e.map(e=>e.id===Se.id?(0,t.A)((0,t.A)((0,t.A)({},e),_e),{},{status:"pending"}):e)),u.oR.success("Template updated successfully")):(we(e=>[...e,(0,t.A)((0,t.A)({id:Date.now()},_e),{},{status:"pending"})]),u.oR.success("Template added - DLT approval pending")),Ce(!1),ke(null),Re({templateId:"",senderId:"SCHLTN",content:"",category:""})):u.oR.error("Template ID \u0914\u0930 Content \u091c\u093c\u0930\u0942\u0930\u0940 \u0939\u0948")},children:s(Se?"update":"add")})]})]})]})}),(0,X.jsx)(g.lG,{open:Le,onOpenChange:Ie,children:(0,X.jsxs)(g.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,X.jsx)(g.c7,{children:(0,X.jsx)(g.L3,{children:s("create_notice")})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(m.J,{children:s("title")}),(0,X.jsx)(o.p,{value:qe.title,onChange:e=>We(s=>(0,t.A)((0,t.A)({},s),{},{title:e.target.value})),placeholder:"Enter survey title..."})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(m.J,{children:s("target_audience")}),(0,X.jsxs)("select",{value:qe.target,onChange:e=>We(s=>(0,t.A)((0,t.A)({},s),{},{target:e.target.value})),className:"w-full h-10 rounded-lg border border-slate-200 px-3",children:[(0,X.jsxs)("option",{value:"All Parents",children:[s("all")," ",s("parents")]}),(0,X.jsx)("option",{value:"Teachers",children:s("teachers")}),(0,X.jsx)("option",{value:"Students",children:s("students")}),(0,X.jsx)("option",{value:"Staff",children:s("staff")})]})]})]}),(0,X.jsxs)("div",{className:"space-y-3",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(m.J,{children:s("content")}),(0,X.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>{We(e=>(0,t.A)((0,t.A)({},e),{},{questions:[...e.questions,{type:"mcq",text:"",options:["",""]}]}))},children:[(0,X.jsx)(L.A,{className:"w-4 h-4 mr-1"})," ",s("add")]})]}),qe.questions.map((e,a)=>(0,X.jsx)(x.Zp,{className:"border shadow-sm",children:(0,X.jsxs)(x.Wu,{className:"p-4 space-y-3",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[s("content")," ",a+1]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("select",{value:e.type,onChange:e=>Je(a,"type",e.target.value),className:"h-8 rounded border border-gray-200 px-2 text-sm",children:[(0,X.jsx)("option",{value:"mcq",children:s("mcq")}),(0,X.jsx)("option",{value:"rating",children:s("priority")}),(0,X.jsx)("option",{value:"text",children:s("content")})]}),qe.questions.length>1&&(0,X.jsx)(d.$,{size:"sm",variant:"ghost",className:"text-red-500 h-8 w-8 p-0",onClick:()=>{return e=a,void We(s=>(0,t.A)((0,t.A)({},s),{},{questions:s.questions.filter((s,a)=>a!==e)}));var e},children:(0,X.jsx)(P.A,{className:"w-4 h-4"})})]})]}),(0,X.jsx)(o.p,{value:e.text,onChange:e=>Je(a,"text",e.target.value),placeholder:"Enter your question..."}),"mcq"===e.type&&(0,X.jsxs)("div",{className:"space-y-2",children:[e.options.map((e,s)=>(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("span",{className:"text-xs text-gray-400 w-6",children:[String.fromCharCode(65+s),"."]}),(0,X.jsx)(o.p,{value:e,onChange:e=>((e,s,a)=>{We(l=>(0,t.A)((0,t.A)({},l),{},{questions:l.questions.map((l,r)=>r===e?(0,t.A)((0,t.A)({},l),{},{options:l.options.map((e,t)=>t===s?a:e)}):l)}))})(a,s,e.target.value),placeholder:"Option ".concat(s+1),className:"flex-1"})]},s)),(0,X.jsxs)(d.$,{size:"sm",variant:"ghost",className:"text-indigo-600",onClick:()=>(e=>{We(s=>(0,t.A)((0,t.A)({},s),{},{questions:s.questions.map((s,a)=>a===e?(0,t.A)((0,t.A)({},s),{},{options:[...s.options,""]}):s)}))})(a),children:[(0,X.jsx)(L.A,{className:"w-3 h-3 mr-1"})," ",s("add")]})]}),"rating"===e.type&&(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(e=>(0,X.jsx)(F.A,{className:"w-6 h-6 text-amber-400",fill:"#fbbf24"},e)),(0,X.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"1-5 Star Rating"})]})]})},a))]}),(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsx)(d.$,{variant:"outline",className:"flex-1",onClick:()=>Ie(!1),children:s("cancel")}),(0,X.jsxs)(d.$,{className:"flex-1 bg-indigo-600 hover:bg-indigo-700",onClick:()=>{if(!qe.title.trim())return void u.oR.error("Survey title \u091c\u093c\u0930\u0942\u0930\u0940 \u0939\u0948");const e=qe.questions.filter(e=>e.text.trim());0!==e.length?(De(s=>[...s,{id:Date.now(),title:qe.title,titleHi:qe.title,questions:e.length,responses:0,target:qe.target,status:"active",createdAt:(new Date).toISOString().split("T")[0]}]),u.oR.success("Survey created successfully!"),Ie(!1),We({title:"",target:"All Parents",questions:[{type:"mcq",text:"",options:["",""]}]})):u.oR.error("\u0915\u092e \u0938\u0947 \u0915\u092e \u090f\u0915 question add \u0915\u0930\u0947\u0902")},children:[(0,X.jsx)(k,{className:"w-4 h-4 mr-2"})," ",s("create_notice")]})]})]})]})}),(0,X.jsx)(g.lG,{open:!!Pe,onOpenChange:()=>ze(null),children:(0,X.jsxs)(g.Cf,{className:"max-w-lg",children:[(0,X.jsx)(g.c7,{children:(0,X.jsx)(g.L3,{children:null===Pe||void 0===Pe?void 0:Pe.title})}),Pe&&(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,X.jsxs)("div",{className:"p-3 bg-indigo-50 rounded-xl text-center",children:[(0,X.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:Pe.questions}),(0,X.jsx)("p",{className:"text-xs text-indigo-500",children:s("content")})]}),(0,X.jsxs)("div",{className:"p-3 bg-green-50 rounded-xl text-center",children:[(0,X.jsx)("p",{className:"text-2xl font-bold text-green-600",children:Pe.responses}),(0,X.jsx)("p",{className:"text-xs text-green-500",children:s("recipients")})]}),(0,X.jsxs)("div",{className:"p-3 bg-purple-50 rounded-xl text-center",children:[(0,X.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:Pe.target}),(0,X.jsx)("p",{className:"text-xs text-purple-500",children:s("target_audience")})]})]}),(0,X.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl",children:[(0,X.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:s("summary")}),(0,X.jsxs)("p",{className:"text-sm text-gray-600",children:[Pe.responses," responses collected from ",Pe.target,". Survey ","active"===Pe.status?"is currently active":"has been closed","."]})]}),(0,X.jsx)(d.$,{variant:"outline",className:"w-full",onClick:()=>ze(null),children:s("close")})]})]})})]})}},7819(e,s,a){a.d(s,{A:()=>t});const t=(0,a(7784).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2054(e,s,a){a.d(s,{A:()=>t});const t=(0,a(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6376(e,s,a){a.d(s,{A:()=>t});const t=(0,a(7784).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},7978(e,s,a){a.d(s,{A:()=>t});const t=(0,a(7784).A)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},516(e,s,a){a.d(s,{A:()=>t});const t=(0,a(7784).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6533(e,s,a){a.d(s,{A:()=>t});const t=(0,a(7784).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4919(e,s,a){a.d(s,{A:()=>t});const t=(0,a(7784).A)("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}}]);
//# sourceMappingURL=1774.993b3450.chunk.js.map