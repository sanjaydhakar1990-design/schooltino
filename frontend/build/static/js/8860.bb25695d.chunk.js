"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8860],{4773(e,s,a){a.d(s,{A:()=>f});var t=a(9950),l=a(1111),r=a(5833),i=a(9469),d=a(2989),c=a(5924),n=a(9636),o=a(6174),m=a(8907),x=a(7834),p=a(2626),h=a(9975),u=a(7255),b=a(2033),j=a(6910),g=a(4414);function f(e){var s;let{type:a="student",schoolId:f,onImportComplete:N,trigger:v}=e;const[w,y]=(0,t.useState)(!1),[_,k]=(0,t.useState)(1),[C,A]=(0,t.useState)(null),[S,q]=(0,t.useState)(!1),[R,D]=(0,t.useState)(!1),[F,I]=(0,t.useState)(null),[P,B]=(0,t.useState)(null),[M,T]=(0,t.useState)(null),E=(0,t.useRef)(null),U="student"===a?"Students (\u091b\u093e\u0924\u094d\u0930)":"Employees (\u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940)",z="student"===a?h.A:p.A,L=async e=>{q(!0);try{const s=new FormData;s.append("file",e),s.append("import_type",a),s.append("school_id",f);const t=localStorage.getItem("token"),l=await j.A.post("".concat("","/api/bulk-import/preview"),s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});I(l.data),k(2)}catch(l){var s,t;b.oR.error((null===(s=l.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.detail)||"File preview failed"),A(null)}finally{q(!1)}},V=()=>{k(1),A(null),I(null),B(null)},O=()=>{V(),(async()=>{try{const e=localStorage.getItem("token"),s=await j.A.get("".concat("","/api/bulk-import/template/").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});T(s.data)}catch(e){b.oR.error("Template load \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u0938\u094d\u092f\u093e")}})(),y(!0)};return(0,g.jsxs)(g.Fragment,{children:[v?(0,g.jsx)("div",{onClick:O,children:v}):(0,g.jsxs)(l.$,{onClick:O,variant:"outline",className:"gap-2 border-indigo-200 text-indigo-700 hover:bg-indigo-50",children:[(0,g.jsx)(m.A,{className:"w-4 h-4"}),"Bulk Import"]}),(0,g.jsx)(u.lG,{open:w,onOpenChange:e=>{y(e),e||V()},children:(0,g.jsxs)(u.Cf,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,g.jsxs)(u.c7,{children:[(0,g.jsxs)(u.L3,{className:"flex items-center gap-2",children:[(0,g.jsx)(z,{className:"w-5 h-5 text-indigo-600"}),"\ud83d\udce5 Bulk Import ",U]}),(0,g.jsxs)(u.rr,{children:["CSV \u092f\u093e Excel file \u0938\u0947 \u090f\u0915 \u0938\u093e\u0925 \u092c\u0939\u0941\u0924 \u0938\u093e\u0930\u0947 ","student"===a?"students":"employees"," add \u0915\u0930\u0947\u0902"]})]}),1===_&&(0,g.jsxs)("div",{className:"space-y-6 py-4",children:[(0,g.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,g.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\ud83d\udccb Step 1: Download Template"}),(0,g.jsx)("p",{className:"text-sm text-blue-600 mb-3",children:"\u092a\u0939\u0932\u0947 template download \u0915\u0930\u0947\u0902, \u0905\u092a\u0928\u093e data \u092d\u0930\u0947\u0902, \u092b\u093f\u0930 upload \u0915\u0930\u0947\u0902\u0964"}),(0,g.jsxs)(l.$,{onClick:()=>{if(!M)return;const e=new Blob([M.sample_csv],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="".concat(a,"_import_template.csv"),t.click(),window.URL.revokeObjectURL(s),b.oR.success("Template downloaded!")},disabled:!M,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[(0,g.jsx)(n.A,{className:"w-4 h-4"}),"Download Template CSV"]}),M&&(0,g.jsxs)("div",{className:"mt-3 text-xs text-blue-700",children:[(0,g.jsx)("p",{className:"font-medium",children:"Required columns:"}),(0,g.jsxs)("p",{className:"opacity-80",children:[M.headers.slice(0,8).join(", "),"..."]})]})]}),(0,g.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[(0,g.jsx)("h4",{className:"font-medium text-emerald-800 mb-2",children:"\ud83d\udce4 Step 2: Upload Your File"}),(0,g.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",className:"hidden",ref:E,onChange:async e=>{const s=e.target.files[0];if(!s)return;const a=s.name.substring(s.name.lastIndexOf(".")).toLowerCase();[".csv",".xlsx",".xls"].includes(a)?s.size>10485760?b.oR.error("File size should be less than 10MB"):(A(s),await L(s)):b.oR.error("Only CSV or Excel files are allowed")}}),(0,g.jsx)("div",{onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.click()},className:"border-2 border-dashed border-emerald-300 rounded-lg p-8 text-center cursor-pointer hover:border-emerald-500 hover:bg-emerald-100 transition-all",children:S?(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)(d.A,{className:"w-10 h-10 text-emerald-600 animate-spin mb-2"}),(0,g.jsx)("p",{className:"text-emerald-700",children:"Processing file..."})]}):(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)(o.A,{className:"w-10 h-10 text-emerald-500 mb-2"}),(0,g.jsx)("p",{className:"text-emerald-700 font-medium",children:"Click to upload CSV or Excel"}),(0,g.jsx)("p",{className:"text-sm text-emerald-600",children:"\u092f\u093e file \u092f\u0939\u093e\u0901 drag \u0915\u0930\u0947\u0902"})]})}),(0,g.jsx)("p",{className:"text-xs text-emerald-600 mt-2",children:"Supported: CSV, XLSX, XLS | Max size: 10MB"})]}),(0,g.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,g.jsx)("h4",{className:"font-medium text-amber-800 mb-2",children:"\ud83d\udca1 Tips"}),(0,g.jsxs)("ul",{className:"text-sm text-amber-700 space-y-1",children:[(0,g.jsx)("li",{children:"\u2022 First row should be headers (column names)"}),(0,g.jsx)("li",{children:"\u2022 Mobile numbers should be 10 digits"}),(0,g.jsx)("li",{children:"\u2022 Date format: YYYY-MM-DD (e.g., 2024-01-15)"}),(0,g.jsx)("li",{children:"\u2022 Existing software (Tally, other ERP) \u0938\u0947 export \u0915\u0930\u0915\u0947 upload \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902"})]})]})]}),2===_&&F&&(0,g.jsxs)("div",{className:"space-y-4 py-4",children:[(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,g.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg text-center",children:[(0,g.jsx)("p",{className:"text-2xl font-bold text-slate-800",children:F.total_rows}),(0,g.jsx)("p",{className:"text-sm text-slate-500",children:"Total Rows"})]}),(0,g.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg text-center",children:[(0,g.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:F.valid_rows}),(0,g.jsx)("p",{className:"text-sm text-emerald-600",children:"Valid"})]}),(0,g.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg text-center",children:[(0,g.jsx)("p",{className:"text-2xl font-bold text-red-600",children:F.invalid_rows}),(0,g.jsx)("p",{className:"text-sm text-red-600",children:"Invalid"})]})]}),(0,g.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,g.jsx)("div",{className:"bg-slate-100 px-4 py-2 font-medium text-slate-700",children:"Preview (First 10 rows)"}),(0,g.jsx)("div",{className:"max-h-64 overflow-auto",children:(0,g.jsxs)("table",{className:"w-full text-sm",children:[(0,g.jsx)("thead",{className:"bg-slate-50 sticky top-0",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-3 py-2 text-left",children:"Row"}),(0,g.jsx)("th",{className:"px-3 py-2 text-left",children:"Name"}),(0,g.jsx)("th",{className:"px-3 py-2 text-left",children:"student"===a?"Class":"Designation"}),(0,g.jsx)("th",{className:"px-3 py-2 text-left",children:"Mobile"}),(0,g.jsx)("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),(0,g.jsx)("tbody",{children:F.preview_data.map((e,s)=>(0,g.jsxs)("tr",{className:e.is_valid?"":"bg-red-50",children:[(0,g.jsx)("td",{className:"px-3 py-2 border-t",children:e.row_number}),(0,g.jsx)("td",{className:"px-3 py-2 border-t",children:e.data.name||"-"}),(0,g.jsx)("td",{className:"px-3 py-2 border-t",children:"student"===a?e.data.class_name:e.data.designation}),(0,g.jsx)("td",{className:"px-3 py-2 border-t",children:e.data.mobile||"-"}),(0,g.jsx)("td",{className:"px-3 py-2 border-t",children:e.is_valid?(0,g.jsx)(r.A,{className:"w-4 h-4 text-emerald-500"}):(0,g.jsx)(i.A,{className:"w-4 h-4 text-red-500"})})]},s))})]})})]}),F.all_errors.length>0&&(0,g.jsxs)("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[(0,g.jsxs)("h4",{className:"font-medium text-red-800 mb-2 flex items-center gap-2",children:[(0,g.jsx)(c.A,{className:"w-4 h-4"}),"Errors (",F.all_errors.length,")"]}),(0,g.jsx)("ul",{className:"text-sm text-red-700 space-y-1 max-h-32 overflow-auto",children:F.all_errors.slice(0,10).map((e,s)=>(0,g.jsxs)("li",{children:["\u2022 ",e]},s))})]}),(0,g.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,g.jsx)(l.$,{variant:"outline",onClick:()=>{k(1),A(null)},children:"\u2190 Back"}),(0,g.jsx)(l.$,{onClick:async()=>{if(C){D(!0);try{const e=new FormData;e.append("file",C),e.append("import_type",a),e.append("school_id",f),e.append("skip_invalid","true");const s=localStorage.getItem("token"),t=await j.A.post("".concat("","/api/bulk-import/execute"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}});B(t.data),k(3),b.oR.success("".concat(t.data.success_count," ").concat(a,"s imported!")),N&&N()}catch(t){var e,s;b.oR.error((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Import failed")}finally{D(!1)}}},disabled:R||0===F.valid_rows,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 gap-2",children:R?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.A,{className:"w-4 h-4"}),"Import ",F.valid_rows," Valid Rows"]})})]})]}),3===_&&P&&(0,g.jsxs)("div",{className:"space-y-4 py-4 text-center",children:[(0,g.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full ".concat(P.success_count>0?"bg-emerald-100":"bg-red-100"),children:P.success_count>0?(0,g.jsx)(r.A,{className:"w-8 h-8 text-emerald-600"}):(0,g.jsx)(i.A,{className:"w-8 h-8 text-red-600"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-xl font-bold text-slate-800",children:P.success_count>0?"Import Successful!":"Import Failed"}),(0,g.jsxs)("p",{className:"text-slate-500",children:[P.success_count," ",a,"s imported successfully"]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg",children:[(0,g.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:P.success_count}),(0,g.jsx)("p",{className:"text-sm text-emerald-600",children:"Success"})]}),(0,g.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[(0,g.jsx)("p",{className:"text-2xl font-bold text-red-600",children:P.error_count}),(0,g.jsx)("p",{className:"text-sm text-red-600",children:"Failed"})]})]}),(null===(s=P.errors)||void 0===s?void 0:s.length)>0&&(0,g.jsxs)("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200 text-left",children:[(0,g.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"Errors:"}),(0,g.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:P.errors.slice(0,5).map((e,s)=>{var a;return(0,g.jsxs)("li",{children:["\u2022 Row ",e.row,": ",e.error||(null===(a=e.errors)||void 0===a?void 0:a.join(", "))]},s)})})]}),(0,g.jsx)(l.$,{onClick:()=>y(!1),className:"w-full",children:"Done"})]})]})})]})}},9256(e,s,a){a.d(s,{Ay:()=>b});var t=a(9950),l=(a(1111),a(2989)),r=a(5924),i=a(6311),d=a(7838),c=a(7637),n=a(4814),o=a(7834),m=a(2033),x=a(6910),p=a(4414);const h=[{id:"birth_certificate",label:"Birth Certificate (\u091c\u0928\u094d\u092e \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcc4"},{id:"aadhar_card",label:"Aadhar Card (\u0906\u0927\u093e\u0930 \u0915\u093e\u0930\u094d\u0921)",required:!1,icon:"\ud83c\udd94"},{id:"transfer_certificate",label:"Transfer Certificate (TC)",required:!1,icon:"\ud83d\udccb"},{id:"marksheet",label:"Previous Marksheet (\u092a\u093f\u091b\u0932\u0940 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"caste_certificate",label:"Caste Certificate (\u091c\u093e\u0924\u093f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcdc"},{id:"income_certificate",label:"Income Certificate (\u0906\u092f \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcb0"},{id:"domicile_certificate",label:"Domicile Certificate (\u092e\u0942\u0932 \u0928\u093f\u0935\u093e\u0938)",required:!1,icon:"\ud83c\udfe0"},{id:"passport_photo",label:"Passport Photo (\u092a\u093e\u0938\u092a\u094b\u0930\u094d\u091f \u092b\u094b\u091f\u094b)",required:!1,icon:"\ud83d\udcf7"},{id:"father_aadhar",label:"Father Aadhar (\u092a\u093f\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)",required:!1,icon:"\ud83d\udc68"},{id:"mother_aadhar",label:"Mother Aadhar (\u092e\u093e\u0924\u093e \u0915\u093e \u0906\u0927\u093e\u0930)",required:!1,icon:"\ud83d\udc69"},{id:"bpl_card",label:"BPL Card (\u092c\u0940\u092a\u0940\u090f\u0932 \u0915\u093e\u0930\u094d\u0921)",required:!1,icon:"\ud83c\udfab"},{id:"bank_passbook",label:"Bank Passbook (\u092c\u0948\u0902\u0915 \u092a\u093e\u0938\u092c\u0941\u0915)",required:!1,icon:"\ud83c\udfe6"},{id:"other",label:"Other Document (\u0905\u0928\u094d\u092f)",required:!1,icon:"\ud83d\udcc1"}],u=[{id:"aadhar_card",label:"Aadhar Card (\u0906\u0927\u093e\u0930 \u0915\u093e\u0930\u094d\u0921)",required:!0,icon:"\ud83c\udd94"},{id:"pan_card",label:"PAN Card (\u092a\u0948\u0928 \u0915\u093e\u0930\u094d\u0921)",required:!1,icon:"\ud83d\udcb3"},{id:"resume",label:"Resume/CV (\u092c\u093e\u092f\u094b\u0921\u093e\u091f\u093e)",required:!1,icon:"\ud83d\udcc4"},{id:"photo",label:"Passport Photo (\u092a\u093e\u0938\u092a\u094b\u0930\u094d\u091f \u092b\u094b\u091f\u094b)",required:!0,icon:"\ud83d\udcf7"},{id:"marksheet_10th",label:"10th Marksheet (\u0926\u0938\u0935\u0940\u0902 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"marksheet_12th",label:"12th Marksheet (\u092c\u093e\u0930\u0939\u0935\u0940\u0902 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"marksheet_graduation",label:"Graduation Marksheet (\u0938\u094d\u0928\u093e\u0924\u0915 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"marksheet_pg",label:"Post Graduation (\u0938\u094d\u0928\u093e\u0924\u0915\u094b\u0924\u094d\u0924\u0930 \u092e\u093e\u0930\u094d\u0915\u0936\u0940\u091f)",required:!1,icon:"\ud83d\udcca"},{id:"degree_certificate",label:"Degree Certificate (\u0921\u093f\u0917\u094d\u0930\u0940 \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83c\udf93"},{id:"bed_certificate",label:"B.Ed Certificate (B.Ed \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83c\udf93"},{id:"experience_letter",label:"Experience Letter (\u0905\u0928\u0941\u092d\u0935 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udccb"},{id:"relieving_letter",label:"Relieving Letter (\u092e\u0941\u0915\u094d\u0924\u093f \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83d\udcdd"},{id:"police_verification",label:"Police Verification (\u092a\u0941\u0932\u093f\u0938 \u0938\u0924\u094d\u092f\u093e\u092a\u0928)",required:!1,icon:"\ud83d\ude94"},{id:"medical_certificate",label:"Medical Certificate (\u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e \u092a\u094d\u0930\u092e\u093e\u0923 \u092a\u0924\u094d\u0930)",required:!1,icon:"\ud83c\udfe5"},{id:"bank_details",label:"Bank Account Details (\u092c\u0948\u0902\u0915 \u0916\u093e\u0924\u093e)",required:!1,icon:"\ud83c\udfe6"},{id:"address_proof",label:"Address Proof (\u092a\u0924\u093e \u092a\u094d\u0930\u092e\u093e\u0923)",required:!1,icon:"\ud83c\udfe0"},{id:"other",label:"Other Document (\u0905\u0928\u094d\u092f)",required:!1,icon:"\ud83d\udcc1"}];function b(e){let{personId:s,personType:a="student",schoolId:b,existingDocuments:j=[],onUploadComplete:g,compact:f=!1}=e;const[N,v]=(0,t.useState)(null),[w,y]=(0,t.useState)(j),[_,k]=(0,t.useState)(null),[C,A]=((0,t.useRef)(null),(0,t.useState)(null)),S="student"===a?h:u,q=async(e,t)=>{const l=e.target.files[0];if(!l)return;if(l.size>5242880)return void m.oR.error("File size should be less than 5MB");if(["image/jpeg","image/png","image/jpg","application/pdf"].includes(l.type)){v(t);try{var r;const e=new FormData;e.append("file",l),e.append("document_type",t),e.append("person_id",s),e.append("person_type",a),e.append("school_id",b);const i=localStorage.getItem("token"),d=await x.A.post("".concat("","/api/documents/upload"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)}}),c={id:d.data.id,document_type:t,file_name:l.name,file_url:d.data.file_url,uploaded_at:(new Date).toISOString()};y(e=>[...e.filter(e=>e.document_type!==t),c]),m.oR.success("".concat(null===(r=S.find(e=>e.id===t))||void 0===r?void 0:r.label," uploaded!")),g&&g(c)}catch(c){var i,d;console.error("Upload error:",c),m.oR.error((null===(i=c.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.detail)||"Upload failed")}finally{v(null),e.target.value=""}}else m.oR.error("Only JPG, PNG or PDF files allowed")},R=e=>w.find(s=>s.document_type===e);return f?(0,p.jsxs)("div",{className:"space-y-3",children:[(0,p.jsxs)("h4",{className:"font-medium text-slate-700 flex items-center gap-2",children:[(0,p.jsx)(c.A,{className:"w-4 h-4"}),"Documents (",w.length,"/",S.length,")"]}),(0,p.jsx)("div",{className:"flex flex-wrap gap-2",children:S.slice(0,6).map(e=>{const s=R(e.id);return(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.pdf",className:"hidden",id:"doc-".concat(e.id),onChange:s=>q(s,e.id)}),(0,p.jsxs)("label",{htmlFor:"doc-".concat(e.id),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium cursor-pointer transition-all ".concat(s?"bg-emerald-100 text-emerald-700 border border-emerald-300":"bg-slate-100 text-slate-600 border border-slate-200 hover:bg-slate-200"),children:[N===e.id?(0,p.jsx)(l.A,{className:"w-3 h-3 animate-spin"}):s?(0,p.jsx)(i.A,{className:"w-3 h-3"}):(0,p.jsx)("span",{children:e.icon}),e.label.split(" (")[0]]})]},e.id)})})]}):(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[(0,p.jsx)(c.A,{className:"w-5 h-5 text-indigo-600"}),"\ud83d\udcc1 Documents Upload (\u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c \u0905\u092a\u0932\u094b\u0921)"]}),(0,p.jsxs)("span",{className:"text-sm text-slate-500",children:[w.length,"/",S.length," uploaded"]})]}),(0,p.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.map(e=>{var s;const a=R(e.id),t=N===e.id;return(0,p.jsxs)("div",{className:"relative p-3 rounded-lg border-2 transition-all ".concat(a?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50"),children:[(0,p.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.pdf",className:"hidden",id:"upload-".concat(e.id),onChange:s=>q(s,e.id)}),(0,p.jsxs)("div",{className:"flex items-start justify-between",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("span",{className:"text-lg",children:e.icon}),(0,p.jsx)("p",{className:"text-sm font-medium text-slate-700 mt-1",children:e.label.split(" (")[0]}),(0,p.jsx)("p",{className:"text-xs text-slate-500",children:null===(s=e.label.split(" (")[1])||void 0===s?void 0:s.replace(")","")})]}),e.required&&!a&&(0,p.jsx)("span",{className:"text-red-500 text-xs",children:"*"})]}),a?(0,p.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,p.jsxs)("span",{className:"flex items-center gap-1 text-xs text-emerald-600",children:[(0,p.jsx)(i.A,{className:"w-3 h-3"}),"Uploaded"]}),(0,p.jsx)("button",{onClick:()=>window.open(a.file_url,"_blank"),className:"p-1 text-indigo-600 hover:bg-indigo-100 rounded",title:"View",children:(0,p.jsx)(d.A,{className:"w-3 h-3"})}),(0,p.jsx)("button",{onClick:()=>(async e=>{const s=w.find(s=>s.document_type===e);if(s)try{const a=localStorage.getItem("token");await x.A.delete("".concat("","/api/documents/").concat(s.id),{headers:{Authorization:"Bearer ".concat(a)}}),y(s=>s.filter(s=>s.document_type!==e)),m.oR.success("Document deleted")}catch(a){m.oR.error("Delete failed")}})(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:(0,p.jsx)(n.A,{className:"w-3 h-3"})})]}):(0,p.jsx)("label",{htmlFor:"upload-".concat(e.id),className:"mt-2 flex items-center justify-center gap-1 px-2 py-1.5 bg-slate-100 hover:bg-indigo-100 rounded text-xs text-slate-600 hover:text-indigo-700 cursor-pointer transition-all",children:t?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.A,{className:"w-3 h-3 animate-spin"}),"Uploading..."]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{className:"w-3 h-3"}),"Upload"]})})]},e.id)})}),(0,p.jsxs)("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[(0,p.jsx)(r.A,{className:"w-3 h-3"}),"Max file size: 5MB | Supported: JPG, PNG, PDF"]})]})}}}]);